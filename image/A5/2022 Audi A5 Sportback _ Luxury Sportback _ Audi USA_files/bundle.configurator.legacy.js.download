/*! For license information please see bundle.configurator.legacy.js.LICENSE.txt */
/* nemo v148.0.0 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("core-application"),require("core-utils"),require("microkernel"),require("core-global"),require("core-vendor")):"function"==typeof define&&define.amd?define("configurator",["core-application","core-utils","microkernel","core-global","core-vendor"],e):"object"==typeof exports?exports.configurator=e(require("core-application"),require("core-utils"),require("microkernel"),require("core-global"),require("core-vendor")):t.configurator=e(t["core-application"],t["core-utils"],t.microkernel,t["core-global"],t["core-vendor"])}(window,(function(__WEBPACK_EXTERNAL_MODULE__0__,__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__18__,__WEBPACK_EXTERNAL_MODULE__23__,__WEBPACK_EXTERNAL_MODULE__67__){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=172)}([function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__0__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(14),i=n.n(r),o=(n(74),n(41),n(75),n(95),n(103),n(48),n(112),n(154),n(57),n(49),n(24),n(59),n(66),n(23)),a=n(9),s={},c={__:s};s.stored={},c.getSpecialFamilies=function(){var t,e=SETUPS.get("nemo.families"),n=c.getFamilies();if(!e&&n)for(t in e={},n)n[t].showstandard&&"true"===n[t].showstandard&&(e[t]=n[t]);return e||null},c.getFamilies=function(){return a.a.getFamilies()},c.sendRenderServiceRequest=function(t,e,n,r){return a.a.sendRenderServiceRequest(t,e,n,r)},c.search=function(t,e){var n=c.searchItems(t,e);return n.length>0?s.groupByFamily(n):[]},s.groupByFamily=function(t){var e,n,r={search:[]},i=c.getFamilies(),o={},a=c.getCarlineName(),s=t||{};return jQuery.each(s,(function(t,s){if(void 0===s.family)return console.log("Found item without family: ",s),!0;if(n=i[s.family]){if(!n.name)return console.log("Found family without family.name: ",n),!0;n.group=n.group||n.name||n.id,o[n.group]||(o[n.group]=1,e={key:n.group,value:{carlineName:a,family:n,items:[]}},r.search.push(e)),e.value.items.push(s)}})),r.search},s.groupByExtColorKey=function(t){var e,n,r=c.getFamilies(),i=["extcolors.uni","extcolors.metallic","extcolors.pearl","extcolors.exclusive","extcolors.o","extcolors.m","extcolors.p"],o=[],a=[],s=c.getCarlineName(),l=t||{};for(jQuery.each(l,(function(t,e){if(void 0===e.family)return console.log("Found item without family: ",e),!0;if(n=r[e.family]){if(!n.name)return console.log("Found family without family.name: ",n),!0;n.group=n.group||n.id||n.name,n.group=n.group.trim(),-1===i.indexOf(n.group)?console.log("Found unknown family group: ",n.group):(o[n.group]||(o[n.group]={key:n.group,value:{carlineName:s,family:n,items:[]}}),o[n.group].value.items.push(e))}})),e=0;e<i.length;e++)o[i[e]]&&a.push(o[i[e]]);return a},c.getRenderUrl=function(){return SETUPS.get("nemo.url.mediaservice")||null},c.getSelectedItems=function(){var t,e=c.getItems()||{},n=c.getSpecialFamilies(),r={},i=0;for(t in e)e[t].status&&"1"===e[t].status.charAt(3)&&("0"===e[t].status.charAt(4)&&(r[t]=e[t],i++),"1"===e[t].status.charAt(4)&&e[t].family&&n[e[t].family]&&(r[t]=e[t],i++));return i>0?r:null},c.getSelectedTrimline=function(){var t,e=c.getSelectedItems(),n=[];if(e)for(t=(n=Object.keys(e)).length;t--;)if(n[t].indexOf("trimline_")>-1)return n[t];return null},c.getSelectedItemsArray=function(){var t={};return jQuery.each(c.getItems(),(function(e,n){n.selectionMethod&&(t[n.selectionMethod]=t[n.selectionMethod]||[],t[n.selectionMethod].push(n))})),t},c.getCarline=function(){return a.a.getCarline()},c.getCarlineName=function(){var t=c.getConfiguration();return t&&t.carlineName?t.carlineName:null},c.getEngine=function(){var t=c.getConfiguration();return t&&t.model?t.model:null},c.getTechdata=function(){var t=c.getConfiguration();return t&&t.techdata?t.techdata:null},c.getExtColor=function(){var t,e,n=c.getSelectedItemsIDsArray();for(t=0,e=n.length;t<e;t++)if(4===n[t].length)return n[t];return null},c.getModelYear=function(){var t=c.getConfiguration();return t&&t.modelyear?t.modelyear:null},c.getPriceRateMode=function(){var t=a.a.getHeader();return t&&t.mode?t.mode:"price"},c.getVisitorId=function(){var t=a.a.getHeader();return t&&t["visitor-id"]?t["visitor-id"]:null},c.getHiddenItemIDsFromVersion=function(){return a.a.getHiddenItemIDsFromVersion()},c.getPrString=function(){return a.a.getPrString()},c.getConfigurationStartType=function(){return a.a.getConfigurationStartType()},c.isContinuedConfiguration=function(){return a.a.isContinuedConfiguration()},c.getContentVersion=function(){var t=a.a.getHeader();return t&&t.version?t.version:null},c.getMarketVersion=function(){var t=a.a.getHeader();return t&&t.marketVersion?t.marketVersion:null},c.isLoggedIn=function(){return!!(a.a.getHeader()&&!0===a.a.getHeader()["logged-in"])},c.setLogin=function(t,e){return a.a.setLogin(t,e)},c.getSearchStopWords=function(){return a.a.getSearchStopWords()},c.getConflicts=function(){return a.a.getConflicts()},c.getConflictTriggers=function(){var t=null,e=c.getConflicts();return e&&e.triggers&&e.triggers.length&&(t=e.triggers),t},c.getTransfers=function(){var t=a.a.getTransfers();return t&&t.deleted&&t.deleted.length?t:null},c.getAudicode=function(){return a.a.getAudicode()},c.getConfiguration=function(){return a.a.getConfiguration()},c.getVersion=function(){return a.a.getVersion()},c.getMemcacheVersion=function(){return a.a.getMemcacheVersion()},c.getDpuUrl=function(){return a.a.getDpuUrl()},c.getContext=function(){return a.a.getContext()},c.getSubsessionID=function(){return a.a.getSubsessionID()},c.setSubsessionID=function(t){return a.a.setSubsessionID(t)},c.getMotorcode=function(){var t=c.getConfiguration();return t&&t.model?t.model:null},c.getConfigurationAssets=function(){var t=c.getConfiguration();return t&&t.assets?t.assets:null},c.getCarImages=function(){return a.a.getImages()},c.getExtColors=function(){var t=s.getItemsByFamily("extcolors");return t?s.groupByExtColorKey(t):null},c.getDocrootUrl=function(){var t=window.location.protocol+"//"+window.location.host+(SETUPS.get("nemo.url.static")||"");return"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t},c.isConfigurable=function(){return!!SETUPS.get("nemo.url.carinfo")},c.isInPreviewMode=function(){return!!SETUPS.get("nemo.url.preview")},c.getPageTree=function(){return SETUPS.get("pagetree")},c.getSearchResultsPageUrl=function(){return SETUPS.get("searchResultsLink")||null},c.searchNavigation=function(t,e){var n=[],r=[],i=t.toLowerCase();switch(e){case"model":r=s.getModelNavigationStorage();break;case"siteMap":r=s.getSiteNavigationStorage();break;case"footer":r=s.getFooterNavigationStorage();break;default:r=[]}return jQuery.each(r,(function(t,e){if(!e.search)return!0;-1!==e.search.indexOf(i)&&e.url&&n.push(e)})),n},c.getItems=function(){return a.a.getItems()||null},c.isConfigurationStarted=function(){return a.a.isConfigurationStarted()},c.hasCustomConfiguration=function(){return a.a.hasCustomConfiguration()},c.isOptionSelectedInConfiguration=function(t){return c.getSelectedItemsIDsArray().indexOf(t)>-1},c.getSelectedItemsIDsArray=function(){var t=c.getSelectedItems()||{};return Object.keys(t)},c.getPrices=function(){var t=c.getConfiguration();return t&&t.prices?t.prices:null},c.getItem=function(t){var e=c.getItems();return e&&e[t]?e[t]:null},c.getItemsByStatus=function(t){var e=c.getItems(),n=null,r=t;return r&&e&&("function"!=typeof r.compile&&(r=new RegExp(r)),jQuery.each(e,(function(t,e){e.status&&r.test(e.status)&&((n=n||{})[t]=e)}))),n},s.getItemsByFamily=function(t){var e=c.getItems(),n=null,r=t;return r&&e&&("function"!=typeof r.compile&&(r=new RegExp(r)),jQuery.each(e,(function(t,e){e.family&&r.test(e.family)&&((n=n||{})[t]=e)}))),n},c.getItemsByFamily=s.getItemsByFamily,c.getConfigurationCarPriceRate=function(){var t=c.getConfiguration();return t&&t.rate?t.rate:null},c.getNwbLink=function(){var t=c.getConfiguration();return t&&t.nwbLink?t.nwbLink:null},c.getVtpRequestUrl=function(){return SETUPS.get("nemo.vtp.request.url")},c.getVtpEntryUrl=function(){return SETUPS.get("nemo.vtp.entry.url")},c.getDOMStatusCode=function(t){var e=t?t.get(0).className:"";return-1===e.indexOf("nm-j-configurator-status_")?null:e.split("nm-j-configurator-status_")[1].split(" ")[0]},c.supportsLocalStorage=function(){if(null!==window.navigator.userAgent.toLowerCase().match(/adobeair/i))return!0;try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return t.code===window.DOMException.QUOTA_EXCEEDED_ERR&&0===localStorage.length}},c.getConfigurationFamilies=function(){var t=c.getConfiguration();return t&&t.families?t.families:null},c.getRecommendations=function(){var t=c.getConfiguration();return t&&t.recommendations?t.recommendations:[]},c.getDynamicRecommendations=function(){var t=c.getConfiguration();return t&&t.empfehlungenPoC&&t.empfehlungenPoC.recommendations?t.empfehlungenPoC.recommendations:[]},c.resolvePackagesInPrString=function(t){var e=[];if(t){for(var n=t.split("|"),r=this.getItems(),o=function(t){var o=new RegExp("([\\d\\w]{2,})_in_"+n[t],"gi"),a=Object.getOwnPropertyNames(r).reduce((function(t,e){var n=o.exec(e);return n&&(t.find((function(t){return t===n[1]}))||t.push(n[1])),t}),[n[t]]);e=[].concat(i()(e),i()(a))},a=0;a<n.length;a++)o(a);return e.join("|")}},c.replacePackagesInPrString=function(t){var e=t;if(t)for(var n,r=/([\d\w]{2,})_in_[\d\w]{2,}(|$)?/gi;null!==(n=r.exec(e));)n&&n.length>1&&(e=e.replace(n[0],n[1]));return e},s.getSiteNavigationStorage=function(){var t=SETUPS.get("siteNavigation");return t||[]},s.getModelNavigationStorage=function(){var t=SETUPS.get("modelNavigation");return t||[]},c.searchItems=function(t,e){var n,r=!!window.mss||o.state.getStateOfModeFor("debug")||!1,i=c.getItems()||{},a=[],s=c.getFamilies(),l=t.toLowerCase();return l=l.replace(/^\w\s/," ").replace(/\s\w$/," ").replace(/\s\w\s/," ").trim(),jQuery.each(i,(function(t,i){var o;if(!i.search||"string"!=typeof i.search)return!0;if(n=i.search,r&&i.mbvId&&(n+=" | "+i.mbvId.toLowerCase()),-1!==n.indexOf(l)){if(e&&("00000"===i.status||"10000"===i.status))return!0;if(void 0===i.family)return!0;if(!(o=s[i.family])||!o.name)return!0;a.push(i)}})),a},c.isInitialized=function(){return a.a.isInitialized()},c.getCarlineUrl=function(t){var e=SETUPS.get("nemo.carlineID2Url")||{},n=e[t];return!n&&(e=SETUPS.get("mssc.carlinemapping")||{})?(n=e[t])?n.posterViewUrl:void 0:n?n.baseurl:void 0},c.getCurrentCarlineUrl=function(){var t=c.getCarline();return c.getCarlineUrl(t)},s.d4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},s.guid=function(){return s.d4()+s.d4()+s.d4()+s.d4()+s.d4()},c.getConfigurationId=function(){return s.configurationID=s.configurationID||s.guid(),s.configurationID},c.getModelsInfo=function(t){return a.a.getModelsInfo(t)},c.getModelsInfoFootnotes=function(t){return a.a.getModelsInfoFootnotes(t)},c.getModelsInfoSectionFootnotes=function(t){return a.a.getModelsInfoSectionFootnotes(t)},c.getCurrentModelInfo=function(){var t=c.getEngine();return t?c.getModelsInfo(t):null},c.getModelDisclaimer=function(t){return a.a.getModelDisclaimer(t)},c.getAveString=function(){var t=c.getConfiguration();return t&&t.ave?t.ave:null},c.getSCSmatchingAttributes=function(){var t=c.getSCSAttributes();return t&&t.attrs?t.attrs:[]},c.getSCSAttributes=function(){var t=c.getConfiguration();return t&&t["stock-car-attrs"]?t["stock-car-attrs"]:null},c.getErrorMessage=function(t){var e=s.getErrorMessageFromI18N(t),n=s.getErrorMessageFromDpuError(t),r=e||n;return r||s.getErrorMessageFromI18N("DEFAULT")},s.getErrorMessageFromI18N=function(t){var e="string"==typeof t?t:t.id;return window.i18n["error.message."+e]},s.getErrorMessageFromDpuError=function(t){return t.message?t.message:null},c.getAltImagePath=function(t,e){var n,r;return!!((n=c.getCarline())&&t&&e)&&(r=s.setFallbackGroup(n),s.setImagePath(r,t,e))},s.setFallbackGroup=function(t){var e;return e=t.substring(0,1),0!==t.indexOf("rs")&&0!==t.indexOf("s")||(e="a"),0===t.indexOf("tt")&&(e="r"),e},s.setImagePath=function(t,e,n){var r,i=".jpg";return r="selection-compare"!==e?t+"-"+n.split(".")[0]+"-"+e+i:t+"-"+e+(i=".jpg"),r="undefined"!=typeof mss?c.getDocrootUrl()+"/cms4i-nemo-mss/fallback-renderings/"+r:c.getDocrootUrl()+"/cms4i-nemo/fallback-renderings/"+r},c.getMinPriceForItemIds=function(t){var e=t.map((function(t){return c.getItem(t)})).reduce((function(t,e){return!t||void 0===e.priceValue&&void 0!==t.priceValue||e.priceValue<t.priceValue?e:t}),!1);return e&&e.priceValue?e.price:""},s.getFooterNavigationStorage=function(){var t=SETUPS.get("footerNavigation");return t||[]},c.openEngineDisclaimerLayer=function(){a.a.sendEngineDisclaimerLayerEvent()}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){t.exports=n(90)},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,c,"next",t)}function c(t){n(a,i,o,s,c,"throw",t)}s(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(7),i=n.n(r),o=n(5),a=n.n(o),s=(n(24),n(59),n(103),n(48),n(85),n(0)),c=n(96),l=n(18),u=n(1),d=n(149),f=n(120),m=(n(74),function(t){var e,n,r=new Error;if(r.status=t.statuscode,t.audicode&&t.audicode.message&&(r.name="custom-dpu-error"),t.header&&t.header.error){if(r.id=t.header.error.id,"HIDDEN_CARLINE"===r.id)return e={layerType:"MessageLayerElement",clickOnShaderClosesModal:!1,isLayerClosable:!1,dataset:{headline:window.i18n["error.no_wltp_data.modal_layer.headline"],messageType:"string",message:window.i18n["error.no_wltp_data.modal_layer.message"],actionButtonLinkText:window.i18n["error.no_wltp_data.modal_layer.link.text"],actionButtonLinkUrl:window.i18n["error.no_wltp_data.modal_layer.link.url"]}},n=new CustomEvent("modalLayer:open",{detail:e}),void document.dispatchEvent(n);t.header.error.message?r.message=t.header.error.message:t.header.statusmessage&&(r.message=t.header.statusmessage)}throw r}),g={},p={__:g},v=!1;g.oDefaults={actionsLookup:{itemAdd:"set",removeItem:"remove",itemRemove:"remove"}},g.configurationStartType="default",g.configurationContinued=!1,g.dataInitialized=!1,g.configurationEndpoint="configuration",g.dpuExtra="",g.storage={configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null,modelsInfo:null,images:null},g.sendResetRequest=function(){g.checkDefaultSetup();var t={context:p.getContext(),ids:g.getDefaultPrString()};t=g.addDpuExtraData(t),t=g.addSubsessionData(t);var e=new URLSearchParams(t),n=p.getDpuUrl()+g.configurationEndpoint+"?"+e.toString();return fetch(n,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus)},p.dispatchPriceMode=function(t){var e=new CustomEvent("setPriceMode",{detail:"rate"===t?"RATE":"PRICE"});document.dispatchEvent(e)},p.changeRatePriceMode=function(t){return g.checkDefaultSetup(),new Promise((function(e,n){var r=p.getHeader();if((r&&r.mode?r.mode:"price")===t)return n(new TypeError("Rate/Price mode did not change")),null;var i="rate"===t?"rate":"price",o={context:p.getContext(),ids:p.getPrString(),mode:i};o=g.addDpuExtraData(o),g.isStatelessMode||(o=g.addSubsessionData(o));var a=p.getDpuUrl()+g.configurationEndpoint+"?"+new URLSearchParams(o).toString();return fetch(a,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus).then((function(t){g.setConfigurationRaw(t).then((function(){p.dispatchPriceMode(i),e(!0)}))}),(function(t){n(new TypeError("Error switching priceRateMode: "+t.message))}))}))},g.sendChangeRequest=function(t){var e=p.getDpuUrl()+g.configurationEndpoint+"?",n=g.generateRequestData(t);n=g.addDpuExtraData(n),n=g.addSubsessionData(n);var r=e+new URLSearchParams(n).toString();return fetch(r,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus).catch((function(t){throw t.id||(t.id="NETWORK_ERROR"),t}))},g.setStatelessParams=function(t){var e=p.getConflicts();return g.isStatelessMode&&e&&(e.triggerIds&&(t.trigger=e.triggerIds),e.choiceIds&&(t.choices=e.choiceIds)),t},g.generateRequestData=function(t){var e=p.getSubsessionID(),n=g.oDefaults.actionsLookup[t.action]||"missing_action",r=t.id,i={context:p.getContext(),ids:p.getPrString()};return t.count&&(r+="*"+t.count),i[n]=r,i=g.setStatelessParams(i),e&&!g.isStatelessMode&&(i.subsession=e),g.isDebugMode()&&(i.dpu_extra="messages"),i},g.isDebugMode=function(){var t=document.querySelector("html");return new RegExp("(^| )nm-state-is-debug( |$)","gi").test(t.className)},p.getVersion=function(){var t=p.getHeader();return t&&t.version?t.version:null},p.getStaticVersion=function(){var t=SETUPS.get("nemo.staticversion");return t||null},p.isInitialized=function(){return g.dataInitialized},p.getMemcacheVersion=function(){var t,e,n="",r=p.getDpuHeader();return r&&(r.version&&(n=r.version),r.taggedVersion?n=r.taggedVersion:r.marketVersion&&(n=r.marketVersion),!!r.taggedVersion&&!!r.marketVersion&&r.manualRevision&&parseInt(r.manualRevision,10)>0&&(n+="."+r.manualRevision)),t=p.getStaticVersion(),(e=SETUPS.get("nemo.build.time"))&&t&&e!==t&&(n+="."+t),n&&0===n.toString().indexOf(".")&&(n=n.substring(1)),n},p.getContext=function(){var t=p.getHeader();return t&&t.context?t.context:null},p.getSubsessionID=function(){var t=p.getHeader();return t&&t.subsession?t.subsession:null},p.setSubsessionID=function(t){g.storage.header.subsession=t,g.updateConfigDataForConsumers()},p.getPrString=function(){var t=p.getConfiguration();return t&&t.prstring?t.prstring:null},g.getDefaultPrString=function(){return g.storage.defaultPrString||null},g.setDefaultPrString=function(t){g.storage.defaultPrString=t||null,g.updateConfigDataForConsumers()},p.handleConfigurationResponse=function(t){return g.setConfigurationRaw(t)},p.adoptConfiguration=function(t){return g.setConfigurationRaw(t)},g.setPrice=function(t){t&&t.configuration&&t.configuration.prices&&t.configuration.prices.rotr&&(g.storage.configuration.rotrprice=t.configuration.prices.rotr)},g.setConfigurationRaw=function(){var t=i()(a.a.mark((function t(e){var n,r,i,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!0,r=p.getPrString(),g.setHeader(e),g.setAudicode(e),g.setConfiguration(e),g.setPrice(e),g.setItems(e),g.setFamilies(e),g.storage.searchstopwords=e.searchstopwords||g.storage.searchstopwords||null,g.setConflictsAndTransfers(e),g.updateConfigDataForConsumers(),e.configuration){t.next=13;break}return t.abrupt("return",!1);case 13:return p.sendEngineDisclaimerLayerEvent(),g.getDefaultPrString()||(i=SETUPS.get("nemo.default.prstring")||e.configuration.prstring,g.setDefaultPrString(i)),r&&r===p.getPrString()&&(n=!1),t.prev=16,t.next=19,Object(f.a)(g.storage.configuration);case 19:o=t.sent,g.setImages(o),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(16),console.error(t.t0);case 26:return t.abrupt("return",n);case 27:case"end":return t.stop()}}),t,null,[[16,23]])})));return function(e){return t.apply(this,arguments)}}(),g.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY="engine-disclaimer-layer-shown",g.engineDisclaimerLayerShownNoSessionStorage={},g.getEngineDisclaimerLayerShown=function(){try{var t=window.sessionStorage.getItem(g.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY);return!!JSON.parse(t)[g.storage.configuration.model]}catch(t){return!!g.engineDisclaimerLayerShownNoSessionStorage[g.storage.configuration.model]}},g.setEngineDisclaimerLayerShown=function(){try{var t,e=window.sessionStorage.getItem(g.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY);try{t=JSON.parse(e)||{}}catch(e){t={}}t[g.storage.configuration.model]=!0,window.sessionStorage.setItem(g.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY,JSON.stringify(t))}catch(t){g.engineDisclaimerLayerShownNoSessionStorage[g.storage.configuration.model]=!0}},p.sendEngineDisclaimerLayerEvent=i()(a.a.mark((function t(){var e,n,r,i,o,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.querySelector(".nm-content"),n=e?e.getAttribute("data-template"):"",!g.getEngineDisclaimerLayerShown()&&"home"!==n){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,u.polling.wait(p.isInitialized,5e3);case 6:r=p.getConfiguration(),(i=r&&r.model?p.getModelDisclaimer(r.model):null)&&i.headline&&i.text&&(o={layerType:"EngineDisclaimerLayerElement",options:{onEscClick:!1,onShaderClick:!1,centerVertically:!0},dataset:{headline:i.headline,message:i.text}},s=new CustomEvent("modalLayer:open",{detail:o}),document.dispatchEvent(s),g.setEngineDisclaimerLayerShown());case 9:case"end":return t.stop()}}),t)}))),g.setFamilies=function(t){t&&t.families&&(g.storage.families=jQuery.extend(!0,g.storage.families,t.families),g.updateConfigDataForConsumers())},p.getFamilies=function(){return g.storage.families||null},g.setConflictsAndTransfers=function(t){g.storage.conflicts=t.conflicts||null,g.storage.transfers=t.transfers||null},g.setAudicode=function(t){g.storage.audicode=!(!t.audicode||!t.audicode.id)&&t.audicode.id},g.setConfiguration=function(t){g.storage.configuration=jQuery.extend(!1,g.storage.configuration,t.configuration)},g.setImages=function(t){g.storage.images=jQuery.extend(!1,g.storage.images,t)},g.setHeader=function(t){var e;t&&t.header&&(e=g.storage&&g.storage.header&&g.storage.header.version?{version:g.storage.header.version}:{},g.storage.header=jQuery.extend(!0,g.storage.header,t.header,e))},g.setItems=function(t){var e,n;if("full"===t.itemsUpdateMode&&t.items)for(e in g.storage.items)g.storage.items.hasOwnProperty(e)&&g.storage.items[e].status&&(g.storage.items[e].status="00000");else for(n in console.log("DPU_MODEL.setItems::incrmental update…"),t.items)t.items[n].packageDescription||(t.items[n].packageDescription="");for(n in t.items)t.items[n].subname?t.items[n].subname="("+t.items[n].subname+")":t.items[n].subname="";for(e in g.storage.items=jQuery.extend(!0,g.storage.items,t.items),g.storage.items)g.storage.items.hasOwnProperty(e)&&("11001"!==g.storage.items[e].status&&"10011"!==g.storage.items[e].status||(g.storage.items[e].price=window.i18n&&window.i18n.standard||"***Serie***"))},g.sendVersionRequest=function(){var t=p.getDpuUrl()+"version?",e=p.getCarline();if(!e)return Promise.reject(new TypeError("no carline defined for version request"));var n={context:p.getContext(),carline:e};n=g.addDpuExtraData(n);var r=new URLSearchParams(n);return fetch(t+r,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus)},g.handleVersionResponse=function(t){var e,n=t.items,r=[];if(n)for(e in n)n.hasOwnProperty(e)&&!0===n[e].hidden&&r.push(e);g.storage.header=t.header,g.storage.headerItems=r,g.updateConfigDataForConsumers(),g.eventBus.emit(s.appEvents.VERSION_LOAD_COMPLETE)},g.sendCarinfoRequest=function(){var t=g.getCarinfoUrl();return fetch(t,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus)},g.handleCarinfoResponse=function(t){return console.log("handleCarinfoResponse",t,p.isConfigurationStarted()),p.isConfigurationStarted()?(g.setFamilies(t),g.updateItemsFromCarinfo(t.items),g.eventBus.emit(s.appEvents.CARINFO_LOAD_COMPLETE),Promise.resolve(!1)):p.handleConfigurationResponse(t)},g.sendModelsinfoRequest=function(){var t=g.getModelsinfoUrl();return fetch(t,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus)},g.handleModelsinfoResponse=function(t){console.log("handleModelsinfoResponse",t,p.isConfigurationStarted()),g.storage.modelsInfo=t.models||null,g.storage.modelsInfoFootnotes=t.footnotes||null,g.storage.modelsInfoSectionFootnotes=t.sectionFootnotes||null,g.storage.modelsInfoDisclaimers=t.disclaimers||null,g.updateConfigDataForConsumers(),g.eventBus.emit(s.appEvents.MODELSINFO_LOAD_COMPLETE)},p.getModelsInfo=function(t){var e;return t?((e=g.storage.modelsInfo)?e[t]:null)||null:g.storage.modelsInfo||null},p.getModelsInfoFootnotes=function(t){return t?g.storage.modelsInfoFootnotes&&g.storage.modelsInfoFootnotes[t]?g.storage.modelsInfoFootnotes[t]:null:g.storage.modelsInfoFootnotes||null},p.getModelsInfoSectionFootnotes=function(t){return t?g.storage.modelsInfoSectionFootnotes&&g.storage.modelsInfoSectionFootnotes[t]?g.storage.modelsInfoSectionFootnotes[t]:null:g.storage.modelsInfoSectionFootnotes||null},p.getModelDisclaimer=function(t){if(t){var e=g.storage.modelsInfoDisclaimers?g.storage.modelsInfoDisclaimers[t]:null;if(e&&Array.isArray(e)&&e.length>0)return e[0]}return null},g.updateItemsFromCarinfo=function(t){var e=jQuery.extend(!0,{},p.getItems());if(!t)return console.log("Carinfo Items missing!"),!1;g.storage.items=t,g.storage.items=jQuery.extend(!0,g.storage.items,e),g.updateConfigDataForConsumers()},g.getCarinfoUrl=function(){var t=SETUPS.get("nemo.url.carinfo");return t?t=t.split(".json").join("."+p.getMemcacheVersion()+".json"):null},g.getModelsinfoUrl=function(){var t=SETUPS.get("nemo.url.modelsinfo");return t?t=t.split(".json").join("."+p.getMemcacheVersion()+".json"):null},g.setLoginState=function(t){var e=p.getHeader();e&&(e["logged-in"]=t)},p.sendCarstoreRequest=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g.checkDefaultSetup();var n=["list","delete","load"];if(-1===n.indexOf(t))return Promise.reject(new TypeError("sendCarestoreRequest: invalid actionStr"));e.slot||(e.slot=null);var r=p.getDpuUrl()+"carstore?",i={action:t,context:p.getContext(),subsession:p.getSubsessionID()},o=Object.assign({},i,e);o=g.addDpuExtraData(o);var a=new URLSearchParams(o),s=r+a.toString();return fetch(s,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus)},g.getFilteredPrNumbersFromCurrentConfig=function(t){var e,n,r,i,o,a=p.getPrString().split("|"),s=[];for(e=0,r=a.length,i=t.length;e<r;e++){for(o=!0,n=0;n<i;n++)a[e].indexOf(t[n])>-1&&(o=!1);!0===o&&s.push(a[e])}return s},p.sendRenderServiceRequest=function(t,e,n,r){g.checkDefaultSetup();var i=p.getDpuUrl()+"stateless-render-service?",o=g.getFilteredPrNumbersFromCurrentConfig(t),a={context:p.getContext(),ids:o.join("|"),"render-prnrs":e,"render-views":n,"render-sizes":r};a=g.addDpuExtraData(a);var s=i+new URLSearchParams(a).toString();return fetch(s,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus)},p.sendCarstoreHistoryRequest=function(t){g.checkDefaultSetup();var e=p.getDpuUrl()+"history?",n=t;t&&""!==n&&void 0!==n||(n={}),n.slot&&""!==n.slot&&void 0!==n.slot||(n.slot=null);var r={context:p.getContext(),subsession:p.getSubsessionID()};r=Object.assign(r,n),r=g.addDpuExtraData(r);var i=e+new URLSearchParams(r).toString();return fetch(i,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus)},p.setLogin=function(t,e){return new Promise((function(n,r){"boolean"==typeof t&&e?(p.setSubsessionID(e),g.setLoginState(t),n(t)):(g.setLoginState(!1),r(new TypeError("login failure")))}))},p.requestConfigurationChange=function(t){return new Promise((function(e,n){g.sendChangeRequest(t).then((function(t){e(p.handleConfigurationResponse(t))}),(function(t){n(t)})).catch((function(t){throw new Error(t)}))}))},p.requestConfigurationReset=function(){return new Promise((function(t,e){g.sendResetRequest().then((function(e){return t(p.handleConfigurationResponse(e))}),(function(t){e(t)}))}))},p.setItemSelectionMethod=function(t,e){var n=p.getItems();n&&n[t]&&(n[t].selectionMethod=e||null)},p.requestTransferOrConflictResolve=function(t){return new Promise((function(e,n){var r=g.addDpuExtraParam(t);return fetch(r,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus).then((function(t){return e(p.handleConfigurationResponse(t))}),(function(t){n(t)}))}))},p.loadConfigurationByAudiCode=function(t){g.checkDefaultSetup();var e=p.getDpuUrl()+"audicode?",n=t;void 0!==n&&(n=n.toUpperCase());var r={context:p.getContext(),audicode:n};r=g.addDpuExtraData(r),r=g.addSubsessionData(r);var i=e+new URLSearchParams(r).toString();return fetch(i,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus)},p.loadConfigurationByAudiCodeStateless=function(t){if(t){var e=p.getDpuUrl()+"stateless-audicode?",n=g.addDpuExtraData({context:p.getContext(),audicode:t.toUpperCase()}),r=e+new URLSearchParams(n).toString();return fetch(r,{credentials:"omit"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus)}},p.generateAudiCode=function(t){g.checkDefaultSetup();var e=p.getDpuUrl()+"audicode?",n=t;n&&""!==n&&void 0!==n||(n={});var r={context:p.getContext(),ids:p.getPrString(),subsession:p.getSubsessionID()};r=Object.assign(r,n),r=g.addDpuExtraData(r);var i=e+new URLSearchParams(r).toString();return fetch(i,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus)},p.loadConfigurationByPrString=function(t,e){g.checkDefaultSetup();var n=p.getDpuUrl()+g.configurationEndpoint+"?",r={context:p.getContext(),ids:t};e&&!g.isStatelessMode&&(r.subsession=e),r=g.addDpuExtraData(r);var i=n+new URLSearchParams(r).toString();return fetch(i,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus).catch((function(e){if("PRSTRING_MODEL_NOT_FOUND"===e.id){var n=new CustomEvent("TNT_ERROR",{detail:{errorCode:e.id,prString:t}});document.dispatchEvent(n)}throw e}))},p.getHeader=function(){return g.storage.header||null},p.getHiddenItemIDsFromVersion=function(){return g.storage.headerItems||null},p.getSearchStopWords=function(){return g.storage.searchstopwords||null},p.transferCompleted=function(){g.storage.transfers=null,g.updateConfigDataForConsumers()},p.fireDataInitializationChain=function(){return g.dataInitialized=!1,g.checkDefaultSetup(),g.sendVersionRequest().then(g.handleVersionResponse).then(g.getSignedLink).then(g.sendCarinfoRequest).then(g.handleCarinfoResponse).then(g.sendModelsinfoRequest).then(g.handleModelsinfoResponse).then((function(){g.dataInitialized=!0}))},p.getConflicts=function(){return g.storage.conflicts||null},p.getDpuHeader=function(){return g.storage.header||null},p.getTransfers=function(){return g.storage.transfers||null},p.getRecommendations=function(){return g.storage.configuration.recommendations||[]},p.getAudicode=function(){return g.storage.audicode||!1},p.getConfiguration=function(){return g.storage.configuration||null},p.getRawConfigurationData=function(){return g.storage||null},p.getItems=function(){return g.storage.items||null},p.getImages=function(){return g.storage.images||null},p.getCarline=function(){var t=p.getConfiguration();return t&&t.carline?t.carline:SETUPS.get("nemo.default.carline")||null},p.getDpuUrl=function(){return SETUPS.get("nemo.url.dpu")||null},p.isConfigurationStarted=function(){return g.configurationStartType&&"default"!==g.configurationStartType},p.getFamilies=function(){return g.storage.families||null},p.hasCustomConfiguration=function(){return p.isConfigurationStarted()&&g.getDefaultPrString()!==p.getPrString()},p.isContinuedConfiguration=function(){return g.configurationContinued},g.getSignedLink=function(){var t=SETUPS.get("nemo.url.preview");return t?fetch(t,{credentials:"include"}).then((function(t){if(t.ok)return t.json();m({statuscode:t.status})})).then(g.checkDPUresponseStatus).then((function(t){return g.setConfigurationRaw(t)}),(function(t){return console.warn("loading signedPreviewUrl failed: "+t.message)})):Promise.resolve("no signedPreviewUrl available")},p.switchCarline=function(t,e,n){var r;return g.checkDefaultSetup(),e&&t?(SETUPS.set("nemo.default.carline",t),SETUPS.set("nemo.url.carinfo",e),SETUPS.set("nemo.url.modelsinfo",n),r={configuration:{carline:t},header:{context:p.getContext()}},g.clearConfigurationData(r),p.fireDataInitializationChain()):Promise.reject("switchCarline: missing params for initialization!")},g.clearConfigurationData=function(t){var e;if(g.configurationContinued=!1,g.configurationStartType="default",g.clearStorage(),t&&t)for(e in t)t[e]&&(g.storage[e]=t[e]);g.updateConfigDataForConsumers()},g.clearStorage=function(){g.storage={configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null}},p.setConfigurationStartType=function(t){if("default"===p.getConfigurationStartType()&&"configuration-change"===t)return g.configurationContinued=!1,g.configurationStartType=t,void g.eventBus.emit(s.appEvents.CONFIG_START,g.configurationStartType);"configuration-change"!==t?(g.configurationStartType=t,g.configurationContinued=!1,g.eventBus.emit(s.appEvents.CONFIG_START,g.configurationStartType)):g.configurationContinued=!0},g.checkDPUresponseStatus=function(t){if(t.header&&t.header.statuscode){var e=Math.floor(t.header.statuscode/100);3!==e&&5!==e||m(t)}return t},p.getConfigurationStartType=function(){return g.configurationStartType},p.resetToDefaultSetupParams=function(){var t={prstring:SETUPS.get("nemo.default.prstring"),header:SETUPS.get("nemo.default.header"),configuration:SETUPS.get("nemo.default.configuration"),items:SETUPS.get("nemo.minimal.carinfoitems")||{}};g.clearConfigurationData(t)},g.checkDefaultSetup=function(){v||(g.isStatelessMode=SETUPS.get("scope.nemo.configuration.stateless"),g.configurationEndpoint=g.isStatelessMode?"stateless-configuration":"configuration",v=!0,p.resetToDefaultSetupParams())},p.setDpuExtra=function(t){g.dpuExtra=t,window.sessionStorage&&(t?window.sessionStorage.setItem("dpu_extra",t):window.sessionStorage.removeItem("dpu_extra"))},p.getDpuExtra=function(){var t="";return g.dpuExtra?t=g.dpuExtra:g.isDebugMode()&&(t="messages"),t},g.updateConfigDataForConsumers=function(){l.stateRegistry.triggerAction(c.a,"update",g.storage),Object(d.a)(g.storage)},g.restoreDpuExtra=function(){window.sessionStorage&&(g.dpuExtra=window.sessionStorage.getItem("dpu_extra"))},g.addDpuExtraData=function(t){var e=p.getDpuExtra();return e&&(t.dpu_extra=e),t},g.addDpuExtraParam=function(t){var e=p.getDpuExtra();return e?t.indexOf("?")>=0?t+"&dpu_extra="+e:t+"?dpu_extra="+e:t},g.addSubsessionData=function(t){var e=p.getSubsessionID();return e&&(t.subsession=e),t},p.resetAudicodeRescueInfo=function(){g.storage.configuration["audicode-rescue-info"]=void 0,g.updateConfigDataForConsumers()},g.addEvents=function(){g.eventBus.on(s.appEvents.PAGE_READY,p.sendEngineDisclaimerLayerEvent)},p.initialize=function(t){g.eventBus=t,g.checkDefaultSetup(),g.restoreDpuExtra(),g.addEvents()}},function(t,e,n){var r=n(13);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){t.exports=!n(11)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(109),i=n(110),o=n(98),a=n(111);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(82);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(73).default,i=n(21);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(8),i=n(22),o=n(26),a=n(27),s=n(51),c=function(t,e,n){var l,u,d,f,m=t&c.F,g=t&c.G,p=t&c.S,v=t&c.P,h=t&c.B,y=g?r:p?r[e]||(r[e]={}):(r[e]||{}).prototype,S=g?i:i[e]||(i[e]={}),E=S.prototype||(S.prototype={});for(l in g&&(n=e),n)d=((u=!m&&y&&void 0!==y[l])?y:n)[l],f=h&&u?s(d,r):v&&"function"==typeof d?s(Function.call,d):d,y&&a(y,l,d,t&c.U),S[l]!=d&&o(S,l,f),v&&E[l]!=d&&(E[l]=d)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__18__},function(t,e,n){var r=n(35)("wks"),i=n(29),o=n(8).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(10),i=n(55),o=n(46),a=Object.defineProperty;e.f=n(12)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__23__},function(t,e,n){"use strict";var r=n(71),i={};i[n(19)("toStringTag")]="z",i+""!="[object z]"&&n(27)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(t,e,n){var r=n(52),i=n(30);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(20),i=n(40);t.exports=n(12)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(8),i=n(26),o=n(28),a=n(29)("src"),s=n(63),c=(""+s).split("toString");n(22).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(l&&(o(n,a)||i(n,a,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(36),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(17),i=n(62),o=n(31),a=n(10),s=n(13),c=n(11),l=n(80),u=(n(8).Reflect||{}).construct,d=c((function(){function t(){}return!(u((function(){}),[],t)instanceof t)})),f=!c((function(){u((function(){}))}));r(r.S+r.F*(d||f),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!d)return u(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(l.apply(t,r))}var c=n.prototype,m=i(s(c)?c:Object.prototype),g=Function.apply.call(t,m,e);return s(g)?g:m}})},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(22),i=n(8),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(45)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(60),i=n(42);t.exports=Object.keys||function(t){return r(t,i)}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return D}));n(41),n(76),n(54),n(86),n(87);var r=n(7),i=n.n(r),o=n(43),a=n.n(o),s=n(14),c=n.n(s),l=n(5),u=n.n(l),d=(n(48),n(57),n(24),n(123),n(119),n(95),n(0)),f=n(2),m=n(9),g=n(124),p=n(108),v=n(134),h=n(136),y=n(137),S=n(18),E=n(94),C=n(70);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _={},D={__:_},k=!1;_.dataInitialized=!1,_.initMaxTries=20,_.oDefaults={sSelectorDelegateClick:".nm-j-configurator-delegate-click",sSelectorDelegateChangeCount:".nm-quantity",sSelectorDelegateNewClick:".nm-configuration-new",sSelectorPrintBtn:".nm-configuration-print"},_.startLayerActivated=!1,_.openedLayer=null,_.configurationContinued=!1,_.addEvents=function(){_.legacyEventBus.on("click.configuration.item",_.oDefaults.sSelectorDelegateClick,{triggerAction:"click"},_.handleConfigurationItemChanges),_.legacyEventBus.on("change.configuration.count",_.oDefaults.sSelectorDelegateChangeCount,{triggerAction:"changeCount"},_.handleConfigurationItemChanges),_.legacyEventBus.on("click.configuration.new",_.oDefaults.sSelectorDelegateNewClick,_.handleNewConfigurationClick),_.addModeSwitchEventAfterReset(),_.eventBus.on(d.appEvents.CONFLICT_CLOSE,_.handleConflictClose),_.eventBus.on(d.appEvents.TRANSFER_CLOSE,_.handleTransferClose),_.eventBus.on(d.appEvents.STARTLAYER_CLOSE,_.handleStartlayerClose),_.legacyEventBus.on("click.nemo.configurator.print",_.oDefaults.sSelectorPrintBtn,_.callPrint),_.eventBus.on(d.appEvents.FORM_FINISHED,_.receiveAudicodeForm),document.addEventListener("changeItemInConfiguration",_.handleEventForConfigurationChange),document.addEventListener("configurationUpdateFromCoLa",_.handleEventForConfigurationChange),document.addEventListener("resetConfiguration",_.handleNewConfigurationClick)},_.callPrint=function(){_.eventBus.emit(d.appEvents.CONFIG_PDF);var t=SETUPS.get("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIPrint"),e=jQuery(this),n=f.a.getContext(),r=f.a.getSubsessionID()?"&subsession="+f.a.getSubsessionID():"",i=f.a.getPrString();return t=t+"?context="+n+r+"&ids="+encodeURIComponent(i),e.attr({href:t,target:"_blank"}),!0},_.isSelectedRadioButton=function(t){var e=t.closest(".nm-j-configurator-item");return!(!e.is(".nm-j-configurator-status_11010, .nm-j-configurator-status_100110")||e.is(".nm-md-bicolor-chooser-el-options")||!1!==t.data("is-deselectable"))},_.isPreselectedConflictItem=function(t){var e,n;return!!f.a.getConflicts()&&(-1!==(n=t.closest(".nm-j-configurator-item").get(0).className).indexOf("nm-j-configurator-status_")&&(5===(e=n.split("nm-j-configurator-status_")[1].split(" ")[0]).length&&"1"===e[3]))},_.handleConfigurationItemChanges=function(t){_.cancelEvent(t);var e=jQuery(t.target);if(_.isSelectedRadioButton(e)||_.isPreselectedConflictItem(e))return!1;var n,r=e.closest(".nm-j-configurator-item"),i=r.attr("data-configurator-id"),o=r.find(_.oDefaults.sSelectorDelegateChangeCount).val(),a=t.data.triggerAction||"no-GUI-action-defined",s=f.a.isOptionSelectedInConfiguration(i);switch(a){case"changeCount":if(!s)return!1;n="itemAdd";break;case"click":if(!1===_.isSelectableItem(r))return;n=s?"itemRemove":"itemAdd",n=_.isIndividualColorConfiguration(i)?"itemAdd":n;break;case"dropDown":i=(r=jQuery(this)).val(),n=(s=f.a.isOptionSelectedInConfiguration(i))?"itemRemove":"itemAdd";break;default:return}var c={id:i,count:o,action:n},l=jQuery.extend(!0,c,{triggerAction:a,$element:r});_.eventBus.emit(d.appEvents.CONFIG_CHANGEREQUEST_START,l),_.triggerChangeRequest(c)},_.handleEventForConfigurationChange=function(t){try{t.detail.id&&_.triggerConfigurationChange(t.detail.id)}catch(t){console.error("handleEventForConfigurationChange: ","<id> is not defined")}},_.triggerConfigurationChange=function(t){var e={},n=f.a.isOptionSelectedInConfiguration(t);e.id=t,e.count=0,e.action=n?"itemRemove":"itemAdd",_.triggerChangeRequest(e)},_.receiveAudicodeForm=function(t){_.cancelEvent(this),t.id&&t.id.indexOf("audicode")>-1&&(_.lockPrString(f.a.getPrString()),Promise.resolve(t.response).then((function(t){if(_.detectConfigurationChanges(f.a.getPrString()))throw new TypeError("receiveAudicodeForm:configuration changed while processing, loaded configuration was rejected");D.handleExternalConfiguration(t,{startType:"audicode-input"})})).then((function(){_.dispatchCustomConfigurationStartEvent("audicode-input")})).catch((function(t){console.warn(t),_.eventBus.emit(d.appEvents.ERROR,[window.i18n["standard-audicode-error"],t.message])})))},D.generateAudiCode=function(t){return m.a.generateAudiCode(t)},_.lockPrString=function(t){_.lockedPrString=t},_.detectConfigurationChanges=function(t){return _.lockedPrString!==t},D.handleExternalConfiguration=function(t,e){if(!t||t&&t.audicode&&!1===t.audicode.success||t&&t.errorMessage){var n;if(t.audicode&&!t.audicode.success&&t.audicode&&t.audicode["other-url"])return void(window.location.href=t.audicode["other-url"]);throw n=t&&t.audicode&&t.audicode.message?t.audicode.message:t&&t.errorMessage?t.errorMessage:t&&t.header&&t.header.errormessages?t.header.errormessages.join(","):"unknown_error",new TypeError(n)}if(!e.startType)return m.a.adoptConfiguration(t).then((function(t){_.handleConfigurationUpdate(t)})).catch((function(t){_.handleConfigurationUpdateError(t)}));if(_.startLayerActivated=!0,"user-configuration"===e.startType&&(_.startLayerActivated=!1),p.a.isMatchingConfiguration(t))return m.a.adoptConfiguration(t).then((function(t){_.setConfigurationStartType(e.startType),_.handleConfigurationUpdate(t)})).catch((function(t){_.handleConfigurationUpdateError(t)}));var r=f.a.getSubsessionID();return t.subsession&&(r=t.subsession),t.header&&t.header.subsession&&(r=t.header.subsession),new Promise((function(){p.a.useTrampoline(t,r,e.startType),Promise.reject("using trampoline page")})).catch((function(t){console.err("Trampoline failed",t)}))},_.setConfigurationStartType=function(t){var e="default"===m.a.getConfigurationStartType()&&"configuration-change"===t?"configuration-start":t;m.a.setConfigurationStartType(t),Object(C.d)(e)?_.configurationStartedByAudiCodeSearch=!0:_.dispatchCustomConfigurationStartEvent(e)},_.handleConfigurationUpdate=function(){_.eventBus.emit(d.appEvents.CONFIG_UPDATE),_.configurationStartedByAudiCodeSearch?_.configurationStartedByAudiCodeSearch=!1:_.dispatchCustomConfigurationUpdateEvent(),_.dispatchCustomEvent(),_.checkLayerQueue()},_.dispatchCustomEvent=function(){try{var t=f.a.getItems(),e=new CustomEvent("configurationItemsUpdate",{detail:{items:t}});document.dispatchEvent(e)}catch(t){console.error("dispatchCustomEvent: ","the custom-event for the configuration-change could not be dispatched",t)}},_.dispatchCustomConfigurationStartEvent=function(t){var e=new CustomEvent("configuration-start-tracking",{detail:{type:t}});document.dispatchEvent(e)},_.dispatchCustomConfigurationUpdateEvent=function(){document.dispatchEvent(new CustomEvent("configuration-update-tracking"))},_.checkLayerQueue=function(){var t,e;e=f.a.getTransfers(),t=f.a.getConflicts();var n=!e&&!t,r=f.a.getConfigurationStartType();if(_.startLayerActivated&&n&&!f.a.isContinuedConfiguration()&&"default"!==r&&"configuration-change"!==r){if(_.startLayerActivated=!1,"configuration-reset"===r)return _.handleStartLayerDemand(),!1;var i={configuration:f.a.getConfiguration(),assets:f.a.getConfigurationAssets(),images:f.a.getCarImages(),ms_url:f.a.getRenderUrl(),start_type:r};return _.handleStartLayerDemand(i),!1}return _.unHandleStartLayerDemand(),e&&f.a.isContinuedConfiguration()?(h.a.handleTransfer(e),!1):!t||(y.a.handleConflict(t),!1)},_.handleStartLayerDemand=function(t){if(t&&t.configuration&&t.configuration["audicode-rescue-info"]){var e=_.getAudicodeRescueLayerMessages(t);if(e.length>0)return void _.triggerAudicodeRescueLayer(t,e)}g.a.handleStartLayer(t).then((function(){}),(function(t){console.warn("handleStartLayerDemand Error",t.message)}))},_.unHandleStartLayerDemand=function(){g.a.unHandleStartLayer()},_.getAudicodeRescueLayerMessages=function(t){var e=SETUPS.get("nemo.audicode.rescue.messages");return e?t.configuration["audicode-rescue-info"].history.reduce((function(t,e){return t.includes(e.repairType)?t:[].concat(c()(t),[e.repairType])}),[]).reduce((function(t,n){var r=e[n]?e[n].trim():void 0;return r&&!t.includes(r)?[].concat(c()(t),[r]):t}),[]):[]},_.triggerAudicodeRescueLayer=function(t,e){document.dispatchEvent(new CustomEvent("modalLayer:open",{detail:{layerType:"AudicodeRescueLayerElement",options:{addCssClass:"audicode-rescue-wrapper",onEscClick:!0,onShaderClick:!0,centerVertically:!0},dataset:w(w({},t),{},{rescueMessages:e})}}))},D.resetAudicodeRescueInfo=function(){m.a.resetAudicodeRescueInfo()},_.handleConflictClose=function(t){var e=new Date;m.a.requestTransferOrConflictResolve(t.url).then(_.handleConfigurationUpdate).catch(_.handleConfigurationUpdateError).then((function(){_.onAjaxCompleted(e)}))},_.handleTransferClose=function(t){if(m.a.transferCompleted(),t&&t.url){var e=new Date;m.a.requestTransferOrConflictResolve(t.url).then(_.handleConfigurationUpdate).catch(_.handleConfigurationUpdateError).then((function(){_.onAjaxCompleted(e)}))}else _.checkLayerQueue()},_.handleStartlayerClose=function(){_.checkLayerQueue()},D.addToConfiguration=function(t){var e={action:"itemAdd",count:null,id:t};return _.eventBus.emit(d.appEvents.CONFIG_CHANGEREQUEST_START,{}),_.triggerChangeRequest(e)},D.removeFromConfiguration=function(t){var e={action:"itemRemove",count:null,id:t};return _.eventBus.emit(d.appEvents.CONFIG_CHANGEREQUEST_START,{}),_.triggerChangeRequest(e)},_.triggerChangeRequest=function(t){var e=new Date;return m.a.requestConfigurationChange(t).then((function(e){_.updateItemSelectionMethod(t,"active"),_.setConfigurationStartType("configuration-change"),_.handleConfigurationUpdate(e)})).catch(_.handleConfigurationUpdateError).then((function(){_.onAjaxCompleted(e)}))},_.updateItemSelectionMethod=function(t,e){var n;n=t.id,"itemAdd"===t.action?m.a.setItemSelectionMethod(n,e):m.a.setItemSelectionMethod(n,"")},_.updatePreselectedItems=function(){var t=f.a.getItems();jQuery.each(t,(function(t,e){e.status&&5===e.status.length&&"1"===e.status.substr(3,1)&&m.a.setItemSelectionMethod(t,"pre")}))},_.handleConfigurationUpdateError=function(t){console.error("Configuration Error",t);var e=f.a.getErrorMessage(t);_.eventBus.emit(d.appEvents.ERROR,e)},_.isIndividualColorConfiguration=function(t){return"Q0Q0"===t||"O0O0"===t||"BODY_Q0"===t||"BODY_O0"===t},_.isSelectableItem=function(t){var e=f.a.getDOMStatusCode(t).split(""),n=window.mss||null;return!!t.hasClass("nm-j-configurator-item-forceselectable")||"0"!==e[0]&&("0"!==e[1]&&(("1"!==e[4]||"1"!==e[3]||!n)&&(e[2],!0)))},_.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},_.handleNewConfigurationClick=function(t){_.cancelEvent(t),m.a.requestConfigurationReset().then((function(t){_.startLayerActivated=!0,m.a.setConfigurationStartType("configuration-reset"),_.handleConfigurationUpdate(t)})).then((function(){_.dispatchCustomConfigurationStartEvent("configuration-reset")})).then(void 0,_.configurationErrors).then(_.onAjaxCompleted)},_.configurationErrors=function(t){console.warn("Configuration Error",t.mesage)},_.addModeSwitchEventAfterReset=function(){var t=jQuery("nm-price-rate-switch");t&&(t.checked=!1),_.legacyEventBus.on("change",".nm-price-rate-switch, .j-rate-switch",_.handleModeSwitchChange),document.addEventListener("rateSwitch",_.handleModeSwitchChange)},_.handleModeSwitchChange=function(t){var e;e=t.detail&&t.detail.mode?t.detail.mode:!0===t.target.checked?"rate":"price",m.a.changeRatePriceMode(e).then(_.handleConfigurationUpdate).then(void 0,_.configurationErrors).then(_.onAjaxCompleted)},_.onAjaxCompleted=function(t){_.eventBus.emit(d.appEvents.CONFIG_CHANGEREQUEST_END)},_.initialize=function(){var t;k||(_.addEvents(),k=!0,t=new Date,_.dataInitialized=!1,m.a.fireDataInitializationChain().then((function(){_.initPreviousConfiguration().then((function(){_.updatePreselectedItems(),m.a.dispatchPriceMode(f.a.getPriceRateMode()),_.dispatchCustomEvent(),_.dataInitialized=!0,console.info("fireDataInitializationChain completed after "+((new Date).getTime()-t.getTime())+" ms")}))}),(function(e){_.initPreviousConfiguration().then((function(){_.dataInitialized=!0,console.warn("fireDataInitializationChain failed after "+((new Date).getTime()-t.getTime())+" ms:"+e.message)}))})))},D.isDataInitialized=function(){return _.dataInitialized},_.initPreviousConfiguration=function(){var t,e,n,r,o;if(window.location.search&&window.location.search.indexOf("new_config")>-1&&(e=!0),n=p.a.getPreviousWindowConfig(),r=p.a.getConfigurationRequestParam(),o=v.a.getPreviousUserConfigurationPrString(),r){if(r.audicode)return D.loadConfigurationByAudiCode(r.audicode).then((function(t){D.handleExternalConfiguration(t,{startType:"teaser-audicode"})})).then((function(){_.dispatchCustomConfigurationStartEvent("teaser-audicode"),S.stateRegistry.triggerAction(E.a,"update",{audicode:r.audicode})})).catch((function(e){t=f.a.getErrorMessage(e),_.eventBus.emit(d.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])}));if(r.prstring)return D.loadConfigurationByPrString(r.prstring).then((function(t){D.handleExternalConfiguration(t,{startType:"teaser-prstring"})})).then((function(){_.dispatchCustomConfigurationStartEvent("teaser-prstring")})).catch((function(e){t=f.a.getErrorMessage(e),_.eventBus.emit(d.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])}))}return n?n.carline!==f.a.getCarline()?(p.a.useTrampoline(n,n.subsession,n.entryType),Promise.resolve()):D.loadConfigurationByPrString(n.prstring,n.subsession).then((function(t){D.handleExternalConfiguration(t,{startType:n.entryType})})).then((function(){Object(C.d)(n.entryType)&&_.dispatchCustomConfigurationStartEvent(n.entryType)})).catch((function(e){t=f.a.getErrorMessage(e),_.eventBus.emit(d.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])})):n||r?Promise.resolve():e?D.loadConfigurationByPrString(SETUPS.get("nemo.default.prstring")).then((function(t){D.handleExternalConfiguration(t,{startType:"configuration-reset"})}),(function(t){console.warn(t.message)})).then((function(){_.dispatchCustomConfigurationStartEvent("configuration-reset")})):(console.log("previousUserConfigurationPromise - loadConfiguration"),o.then(function(){var t=i()(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.loadConfigurationByPrString(e).then((function(t){D.handleExternalConfiguration(t,{startType:"user-configuration"})}),(function(t){console.warn(t.message)})).then((function(){_.dispatchCustomConfigurationStartEvent("user-configuration")}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.warn(t.message)})))},D.loadConfigurationByPrString=function(t,e){return m.a.loadConfigurationByPrString(t,e)},D.loadConfigurationFromTeaser=function(t,e){var n,r=f.a.getSubsessionID();return t.prstring?D.loadConfigurationByPrString(t.prstring,r).then((function(t){D.handleExternalConfiguration(t,{startType:e})})).then((function(){"audicode.visualizer"===e&&_.dispatchCustomConfigurationStartEvent(e)})).catch((function(t){n=f.a.getErrorMessage(t),_.eventBus.emit(d.appEvents.ERROR,[window.i18n["standard-configuration-error"],n])})):t.audicode?D.loadConfigurationByAudiCode(t.audicode).then((function(t){D.handleExternalConfiguration(t,{startType:e})})).then((function(){"audicode.visualizer"===e&&_.dispatchCustomConfigurationStartEvent(e)})).catch((function(t){n=f.a.getErrorMessage(t),_.eventBus.emit(d.appEvents.ERROR,[window.i18n["standard-configuration-error"],n])})):Promise.reject("No valid config option found")},D.loadConfigurationByAudiCode=function(t){return m.a.loadConfigurationByAudiCode(t)},D.listCarstoreItems=function(){return m.a.sendCarstoreRequest("list")},D.switchCarline=function(t,e,n,r){return m.a.switchCarline(t,e,n).then((function(){r?m.a.adoptConfiguration(r).then((function(t){_.handleConfigurationUpdate(t)})).catch((function(t){_.handleConfigurationUpdateError(t)})):(_.eventBus.emit(d.appEvents.CONFIG_RESET),m.a.setConfigurationStartType("switched-carline"))}))},D.loadCarstoreItem=function(t){return m.a.sendCarstoreRequest("load",{slot:t}).then((function(t){D.handleExternalConfiguration(t,{startType:"carstore"})}))},D.deleteCarstoreItem=function(t){return m.a.sendCarstoreRequest("delete",{slot:t})},D.setSubsessionID=function(t){m.a.setSubsessionID(t)},D.resetToDefaultSetupParams=function(){m.a.resetToDefaultSetupParams()},D.getAjaxMarker=function(){var t={marker:"",overwrites:!1};return new Promise((function(e){f.a.isConfigurable()?(t.marker=f.a.getMemcacheVersion(),t.overwrites=!0):t.marker=SETUPS.get("nemo.staticversion"),e(t)}))},D.setDpuExtra=function(t){m.a.setDpuExtra(t)},D.initialize=function(t){_.eventBus=t,_.legacyEventBus=jQuery("body"),d.content.registerMarkerProvider(D.getAjaxMarker),_.initialize()}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(50),i=n(37);n(78)("keys",(function(){return function(t){return i(r(t))}}))},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(13),i=n(8).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports=!1},function(t,e,n){var r=n(13);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(35)("keys"),i=n(29);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){"use strict";var r=n(88),i=n(10),o=n(99),a=n(77),s=n(32),c=n(68),l=n(56),u=n(11),d=Math.min,f=[].push,m="length",g=!u((function(){RegExp(4294967295,"y")}));n(69)("split",2,(function(t,e,n,u){var p;return p="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[m]||2!="ab".split(/(?:ab)*/)[m]||4!=".".split(/(.?)(.?)/)[m]||".".split(/()()/)[m]>1||"".split(/.?/)[m]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,a,s,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,g=void 0===e?4294967295:e>>>0,p=new RegExp(t.source,u+"g");(o=l.call(p,i))&&!((a=p.lastIndex)>d&&(c.push(i.slice(d,o.index)),o[m]>1&&o.index<i[m]&&f.apply(c,o.slice(1)),s=o[0][m],d=a,c[m]>=g));)p.lastIndex===o.index&&p.lastIndex++;return d===i[m]?!s&&p.test("")||c.push(""):c.push(i.slice(d)),c[m]>g?c.slice(0,g):c}:"0".split(void 0,0)[m]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):p.call(String(i),n,r)},function(t,e){var r=u(p,t,this,e,p!==n);if(r.done)return r.value;var l=i(t),f=String(this),m=o(l,RegExp),v=l.unicode,h=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(g?"y":"g"),y=new m(g?l:"^(?:"+l.source+")",h),S=void 0===e?4294967295:e>>>0;if(0===S)return[];if(0===f.length)return null===c(y,f)?[f]:[];for(var E=0,C=0,b=[];C<f.length;){y.lastIndex=g?C:0;var w,_=c(y,g?f:f.slice(C));if(null===_||(w=d(s(y.lastIndex+(g?0:C)),f.length))===E)C=a(f,C,v);else{if(b.push(f.slice(E,C)),b.length===S)return b;for(var D=1;D<=_.length-1;D++)if(b.push(_[D]),b.length===S)return b;C=E=w}}return b.push(f.slice(E)),b}]}))},function(t,e,n){"use strict";var r=n(10),i=n(50),o=n(32),a=n(36),s=n(77),c=n(68),l=Math.max,u=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,m=/\$([$&`']|\d\d?)/g;n(69)("replace",2,(function(t,e,n,g){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=g(n,t,this,e);if(i.done)return i.value;var d=r(t),f=String(this),m="function"==typeof e;m||(e=String(e));var v=d.global;if(v){var h=d.unicode;d.lastIndex=0}for(var y=[];;){var S=c(d,f);if(null===S)break;if(y.push(S),!v)break;""===String(S[0])&&(d.lastIndex=s(f,o(d.lastIndex),h))}for(var E,C="",b=0,w=0;w<y.length;w++){S=y[w];for(var _=String(S[0]),D=l(u(a(S.index),f.length),0),k=[],x=1;x<S.length;x++)k.push(void 0===(E=S[x])?E:String(E));var A=S.groups;if(m){var L=[_].concat(k,D,f);void 0!==A&&L.push(A);var I=String(e.apply(void 0,L))}else I=p(_,f,D,k,A,e);D>=b&&(C+=f.slice(b,D)+I,b=D+_.length)}return C+f.slice(b)}];function p(t,e,r,o,a,s){var c=r+t.length,l=o.length,u=m;return void 0!==a&&(a=i(a),u=f),n.call(s,u,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":s=a[i.slice(1,-1)];break;default:var u=+i;if(0===u)return n;if(u>l){var f=d(u/10);return 0===f?n:f<=l?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):n}s=o[u-1]}return void 0===s?"":s}))}}))},function(t,e,n){var r=n(30);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(31);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(34);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var r=n(10);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var r=n(17),i=n(93)(2);r(r.P+r.F*!n(106)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){t.exports=!n(12)&&!n(11)((function(){return 7!=Object.defineProperty(n(44)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";var r,i,o=n(53),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,l=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),u=void 0!==/()??/.exec("")[1];(l||u)&&(c=function(t){var e,n,r,i,c=this;return u&&(n=new RegExp("^"+c.source+"$(?!\\s)",o.call(c))),l&&(e=c.lastIndex),r=a.call(c,t),l&&r&&(c.lastIndex=c.global?r.index+r[0].length:e),u&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=c},function(t,e,n){"use strict";var r=n(17),i=n(93)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(105)("find")},function(t,e,n){var r=n(36),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){"use strict";n(97);var r=n(10),i=n(53),o=n(12),a=/./.toString,s=function(t){n(27)(RegExp.prototype,"toString",t,!0)};n(11)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(t,e,n){var r=n(28),i=n(25),o=n(64)(!1),a=n(47)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),c=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~o(l,n)||l.push(n));return l}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(10),i=n(79),o=n(42),a=n(47)("IE_PROTO"),s=function(){},c=function(){var t,e=n(44)("iframe"),r=o.length;for(e.style.display="none",n(65).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){t.exports=n(35)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(25),i=n(32),o=n(58);t.exports=function(t){return function(e,n,a){var s,c=r(e),l=i(c.length),u=o(a,l);if(t&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var r=n(8).document;t.exports=r&&r.documentElement},function(t,e,n){"use strict";var r=n(17),i=n(93)(1);r(r.P+r.F*!n(106)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__67__},function(t,e,n){"use strict";var r=n(71),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){"use strict";n(91);var r=n(27),i=n(26),o=n(11),a=n(30),s=n(19),c=n(56),l=s("species"),u=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=s(t),m=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),g=m?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[l]=function(){return n}),n[f](""),!e})):void 0;if(!m||!g||"replace"===t&&!u||"split"===t&&!d){var p=/./[f],v=n(a,f,""[t],(function(t,e,n,r,i){return e.exec===c?m&&!i?{done:!0,value:p.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),h=v[0],y=v[1];r(String.prototype,t,h),i(RegExp.prototype,f,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return f}));var r=n(100),i=n.n(r),o=(n(74),n(85),n(48),n(41),function(){var t=!1,e=document.querySelector(".nm-content");if(e){var n=e.getAttribute("data-type");n&&"nemo"===n&&(t=!0)}return t}),a=function(){var t=!1,e=document.querySelector(".nm-content");if(e){var n=e.getAttribute("data-template");n&&"home"===n&&(t=!0)}return t},s=function(t){var e=t.id?{productID:t.id}:{},n=t.mbvId?{productMbvId:t.mbvId}:{},r=t.name?{productName:t.name}:{},i=t.mileage?{mileage:t.mileage}:{};return Object.assign({},e,n,r,i)},c=function(t,e){var n;return e&&e[t.family]&&(void 0!==(n=t.family.split("."))&&n.length>0)&&t.family.split(".")||[]},l=function(t,e){var n=c(t,e),r=i()(n,1)[0],o=void 0===r?"":r,a=c(t,e),s=i()(a,2)[1];return{primaryCategory:o,subCategory1:void 0===s?"":s,productType:function(t,e){var n;return e&&e[t.family]&&((n=e[t.family]).type&&void 0!==n.type)&&e[t.family].type||""}(t,e)}},u=function(t){var e=t.price?{price:t.price}:{};return Object.assign({},e)},d=function(t,e){var n=0!==Object.keys(s(t)).length?{productInfo:s(t)}:{},r=0!==Object.keys(l(t,e)).length?{category:l(t,e)}:{},i=u(t)!=={}?{price:u(t)}:{},o=0!==Object.keys({}).length?{attributes:{}}:{};return Object.assign({},n,r,i,o)};function f(t){return["audicode-input","teaser-audicode","audicode.visualizer","audicode-search","teaser-prstring","user-configuration","configuration-reset"].indexOf(t)>-1}},function(t,e,n){var r=n(34),i=n(19)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(20).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(12)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(17),i=n(65),o=n(34),a=n(58),s=n(32),c=[].slice;r(r.P+r.F*n(11)((function(){i&&c.call(i)})),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return c.call(this,t,e);for(var i=a(t,n),l=a(e,n),u=s(l-i),d=new Array(u),f=0;f<u;f++)d[f]="String"==r?this.charAt(i+f):this[i+f];return d}})},function(t,e,n){"use strict";var r=n(8),i=n(28),o=n(12),a=n(17),s=n(27),c=n(114).KEY,l=n(11),u=n(35),d=n(115),f=n(29),m=n(19),g=n(107),p=n(128),v=n(129),h=n(104),y=n(10),S=n(13),E=n(50),C=n(25),b=n(46),w=n(40),_=n(62),D=n(121),k=n(83),x=n(72),A=n(20),L=n(37),I=k.f,T=A.f,O=D.f,P=r.Symbol,j=r.JSON,R=j&&j.stringify,B=m("_hidden"),M=m("toPrimitive"),F={}.propertyIsEnumerable,U=u("symbol-registry"),N=u("symbols"),z=u("op-symbols"),Q=Object.prototype,H="function"==typeof P&&!!x.f,V=r.QObject,q=!V||!V.prototype||!V.prototype.findChild,W=o&&l((function(){return 7!=_(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=I(Q,e);r&&delete Q[e],T(t,e,n),r&&t!==Q&&T(Q,e,r)}:T,G=function(t){var e=N[t]=_(P.prototype);return e._k=t,e},Y=H&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},K=function(t,e,n){return t===Q&&K(z,e,n),y(t),e=b(e,!0),y(n),i(N,e)?(n.enumerable?(i(t,B)&&t[B][e]&&(t[B][e]=!1),n=_(n,{enumerable:w(0,!1)})):(i(t,B)||T(t,B,w(1,{})),t[B][e]=!0),W(t,e,n)):T(t,e,n)},X=function(t,e){y(t);for(var n,r=v(e=C(e)),i=0,o=r.length;o>i;)K(t,n=r[i++],e[n]);return t},$=function(t){var e=F.call(this,t=b(t,!0));return!(this===Q&&i(N,t)&&!i(z,t))&&(!(e||!i(this,t)||!i(N,t)||i(this,B)&&this[B][t])||e)},J=function(t,e){if(t=C(t),e=b(e,!0),t!==Q||!i(N,e)||i(z,e)){var n=I(t,e);return!n||!i(N,e)||i(t,B)&&t[B][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=O(C(t)),r=[],o=0;n.length>o;)i(N,e=n[o++])||e==B||e==c||r.push(e);return r},tt=function(t){for(var e,n=t===Q,r=O(n?z:C(t)),o=[],a=0;r.length>a;)!i(N,e=r[a++])||n&&!i(Q,e)||o.push(N[e]);return o};H||(s((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===Q&&e.call(z,n),i(this,B)&&i(this[B],t)&&(this[B][t]=!1),W(this,t,w(1,n))};return o&&q&&W(Q,t,{configurable:!0,set:e}),G(t)}).prototype,"toString",(function(){return this._k})),k.f=J,A.f=K,n(84).f=D.f=Z,n(61).f=$,x.f=tt,o&&!n(45)&&s(Q,"propertyIsEnumerable",$,!0),g.f=function(t){return G(m(t))}),a(a.G+a.W+a.F*!H,{Symbol:P});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)m(et[nt++]);for(var rt=L(m.store),it=0;rt.length>it;)p(rt[it++]);a(a.S+a.F*!H,"Symbol",{for:function(t){return i(U,t+="")?U[t]:U[t]=P(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!H,"Object",{create:function(t,e){return void 0===e?_(t):X(_(t),e)},defineProperty:K,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var ot=l((function(){x.f(1)}));a(a.S+a.F*ot,"Object",{getOwnPropertySymbols:function(t){return x.f(E(t))}}),j&&a(a.S+a.F*(!H||l((function(){var t=P();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(S(e)||void 0!==t)&&!Y(t))return h(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,R.apply(j,r)}}),P.prototype[M]||n(26)(P.prototype,M,P.prototype.valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(t,e,n){"use strict";var r=n(89)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r=n(17),i=n(22),o=n(11);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(t,e,n){var r=n(20),i=n(10),o=n(37);t.exports=n(12)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,c=0;s>c;)r.f(t,n=a[c++],e[n]);return t}},function(t,e,n){"use strict";var r=n(31),i=n(13),o=n(81),a=[].slice,s={},c=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?c(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(61),i=n(40),o=n(25),a=n(46),s=n(28),c=n(55),l=Object.getOwnPropertyDescriptor;e.f=n(12)?l:function(t,e){if(t=o(t),e=a(e,!0),c)try{return l(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(60),i=n(42).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(17);r(r.S+r.F,"Object",{assign:n(113)})},function(t,e,n){var r=n(25),i=n(83).f;n(78)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(r(t),e)}}))},function(t,e,n){var r=n(17),i=n(130),o=n(25),a=n(83),s=n(122);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),c=a.f,l=i(r),u={},d=0;l.length>d;)void 0!==(n=c(r,e=l[d++]))&&s(u,e,n);return u}})},function(t,e,n){var r=n(13),i=n(34),o=n(19)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(36),i=n(30);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),c=r(n),l=s.length;return c<0||c>=l?t?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):o:t?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),a=new w(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return D()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function f(){}function m(){}var g={};s(g,i,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(_([])));v&&v!==e&&n.call(v,i)&&(g=v);var h=m.prototype=d.prototype=Object.create(g);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function E(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:D}}function D(){return{value:void 0,done:!0}}return f.prototype=m,s(h,"constructor",m),s(m,"constructor",f),f.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(h),t},t.awrap=function(t){return{__await:t}},y(S.prototype),s(S.prototype,o,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(h),s(h,a,"Generator"),s(h,i,(function(){return this})),s(h,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=_,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;b(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";var r=n(56);n(17)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(51),i=n(52),o=n(50),a=n(32),s=n(126);t.exports=function(t,e){var n=1==t,c=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d,m=e||s;return function(e,s,g){for(var p,v,h=o(e),y=i(h),S=r(s,g,3),E=a(y.length),C=0,b=n?m(e,E):c?m(e,0):void 0;E>C;C++)if((f||C in y)&&(v=S(p=y[C],C,h),t))if(n)b[C]=v;else if(v)switch(t){case 3:return!0;case 5:return p;case 6:return C;case 2:b.push(p)}else if(u)return!1;return d?-1:l||u?u:b}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n(41),n(76),n(54),n(86),n(87);var r=n(43),i=n.n(r),o=n(3),a=n.n(o),s=n(4),c=n.n(s),l=(n(118),n(18));function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f="dbadAudicodeStore",m=new(function(){function t(){return a()(this,t),t.instance||(this._initStore(),t.instance=this),t.instance}return c()(t,[{key:"_initStore",value:function(){var t={update:this._update,invalidate:this._invalidate};l.stateRegistry.addStore(f,{audicode:null,configuration:null},t)}},{key:"_update",value:function(t,e){return d(d({},t),{},{audicode:e.audicode,configuration:e.configuration})}},{key:"_invalidate",value:function(t){return d(d({},t),{},{audicode:null,configuration:null})}}]),t}());Object.freeze(m)},function(t,e,n){"use strict";var r=n(10),i=n(125),o=n(68);n(69)("search",1,(function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var s=r(t),c=String(this),l=s.lastIndex;i(l,0)||(s.lastIndex=0);var u=o(s,c);return i(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n(41),n(76),n(54),n(86),n(87);var r=n(43),i=n.n(r),o=n(3),a=n.n(o),s=n(4),c=n.n(s),l=(n(116),n(118),n(18));function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f="dbadConfigurationStore",m=new(function(){function t(){return a()(this,t),t.instance||(this._initStore(),t.instance=this),t.instance}return c()(t,[{key:"_initStore",value:function(){var t={update:this._update};l.stateRegistry.addStore(f,{configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null},t)}},{key:"_update",value:function(e,n){return d(d(d({},e),n),t._processUpdate(n))}}],[{key:"_processUpdate",value:function(e){return{selectedTrimline:t._getSelectedTrimline(e)}}},{key:"_getSelectedTrimline",value:function(e){return e.items?Object.values(e.items).reduce((function(e,n){return t._isSelectedTrimline(n)?n.id:e}),null):null}},{key:"_isSelectedTrimline",value:function(e){return t._isTrimlineItem(e)&&t._isSelectedItem(e)}},{key:"_isTrimlineItem",value:function(t){return t.id&&t.id.indexOf("trimline_")>-1}},{key:"_isSelectedItem",value:function(t){return t.status&&"1"===t.status.charAt(3)}}]),t}());Object.freeze(m)},function(t,e,n){n(12)&&"g"!=/./g.flags&&n(20).f(RegExp.prototype,"flags",{configurable:!0,get:n(53)})},function(t,e,n){var r=n(92);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(10),i=n(31),o=n(19)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r=n(143),i=n(144),o=n(98),a=n(145);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t){t.exports=JSON.parse('{"mediaService":{"api":"https://mediaservice.audi.com/renderapi/v1/urls","clientId":"4DWZjsGz","live":true}}')},,function(t,e,n){var r=n(8),i=n(138),o=n(20).f,a=n(84).f,s=n(88),c=n(53),l=r.RegExp,u=l,d=l.prototype,f=/a/g,m=/a/g,g=new l(f)!==f;if(n(12)&&(!g||n(11)((function(){return m[n(19)("match")]=!1,l(f)!=f||l(m)==m||"/a/i"!=l(f,"i")})))){l=function(t,e){var n=this instanceof l,r=s(t),o=void 0===e;return!n&&r&&t.constructor===l&&o?t:i(g?new u(r&&!o?t.source:t,e):u((r=t instanceof l)?t.source:t,r&&o?c.call(t):e),n?this:d,l)};for(var p=function(t){t in l||o(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},v=a(u),h=0;v.length>h;)p(v[h++]);d.constructor=l,l.prototype=d,n(27)(r,"RegExp",l)}n(142)("RegExp")},function(t,e,n){var r=n(34);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(19)("unscopables"),i=Array.prototype;null==i[r]&&n(26)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,n){e.f=n(19)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n(74),n(48),n(75);var r=n(0),i=n(2),o={},a={__:o};o.oDefaults={},a.getPreviousWindowConfig=function(){var t,e=null,n=i.a.getCarline(),o=window&&window.name&&null!==window.name?window.name:r.cache.getItem("use_trampoline","data","localStorage");if(o)try{(t=JSON.parse(o))&&t.prstring&&t.subsession&&t.carline===n&&(e=t)}catch(t){console.log("we are not comming from a page were we set the window.name"),e=null}return r.cache.getItem("use_trampoline","data","localStorage")&&r.cache.removeItem("use_trampoline","data","localStorage"),e},a.getConfigurationRequestParam=function(){var t=null,e=o.getUrlVar("audicode"),n=o.getUrlVar("pr");return e&&((t={}).audicode=e),n&&((t={}).prstring=n),t},a.useTrampoline=function(t,e,n){var i=t.configuration.prstring,a=t.configuration.carline,s=o.getCarlineUrl(a);s&&(window.name='{"subsession":"'+e+'","carline":"'+a+'","prstring":"'+i+'","entryType":"'+n+'"}',r.cache.setItem("carline_mapping",e,JSON.stringify(t),"localStorage"),r.cache.setItem("use_trampoline","data",'{"subsession":"'+e+'","carline":"'+a+'","prstring":"'+i+'","entryType":"'+n+'"}',"localStorage"),setTimeout((function(){window.location.href=s}),150))},o.getCarlineUrl=function(t){return i.a.getCarlineUrl(t)},a.hasPreviousWindowConfiguration=function(){return!!a.getPreviousWindowConfig()},a.isMatchingConfiguration=function(t){var e,n,r,a,s,c;return e=!1,r=!!t,a=null,n=i.a.getCarline(),r&&t.configuration&&t.configuration.carline&&(a=t.configuration.carline),r&&t.configuration&&t.configuration.carline&&(a=t.configuration.carline),s=null,r&&t.configuration&&t.configuration.prstring&&(s=t.configuration.prstring),c=!1,o.getCarlineUrl(a)&&(c=!0),a&&n!==a&&c&&(e=!1),a&&n===a&&(e=!0),console.log("isMatchingConfiguration: "+e+"  audiCodeCorrespondingPrstring: "+s),e},o.getUrlVars=function(t){var e,n,r,i,o={};for(r=0,i=(n=t.slice(t.indexOf("?")+1).split("#")[0].split("&")).length;r<i;r++)o[(e=n[r].split("="))[0]]=e[1];return o},o.getUrlVar=function(t,e){var n=e||window.location.href;return o.getUrlVars(n)[t]||null}},function(t,e,n){var r=n(92);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";var r=n(10),i=n(32),o=n(77),a=n(68);n(69)("match",1,(function(t,e,n,s){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var c=r(t),l=String(this);if(!c.global)return a(c,l);var u=c.unicode;c.lastIndex=0;for(var d,f=[],m=0;null!==(d=a(c,l));){var g=String(d[0]);f[m]=g,""===g&&(c.lastIndex=o(l,i(c.lastIndex),u)),m++}return 0===m?null:f}]}))},function(t,e,n){"use strict";var r=n(12),i=n(37),o=n(72),a=n(61),s=n(50),c=n(52),l=Object.assign;t.exports=!l||n(11)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=r}))?function(t,e){for(var n=s(t),l=arguments.length,u=1,d=o.f,f=a.f;l>u;)for(var m,g=c(arguments[u++]),p=d?i(g).concat(d(g)):i(g),v=p.length,h=0;v>h;)m=p[h++],r&&!f.call(g,m)||(n[m]=g[m]);return n}:l},function(t,e,n){var r=n(29)("meta"),i=n(13),o=n(28),a=n(20).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(11)((function(){return c(Object.preventExtensions({}))})),u=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},d=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[r].w},onFreeze:function(t){return l&&d.NEED&&c(t)&&!o(t,r)&&u(t),t}}},function(t,e,n){var r=n(20).f,i=n(28),o=n(19)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(17),i=n(117)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(12),i=n(37),o=n(25),a=n(61).f;t.exports=function(t){return function(e){for(var n,s=o(e),c=i(s),l=c.length,u=0,d=[];l>u;)n=c[u++],r&&!a.call(s,n)||d.push(t?[n,s[n]]:s[n]);return d}}},function(t,e,n){var r=n(13),i=n(114).onFreeze;n(78)("freeze",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){"use strict";var r=n(17),i=n(64)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(105)("includes")},function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));n(41),n(76),n(86),n(87);var r=n(14),i=n.n(r),o=n(7),a=n.n(o),s=n(43),c=n.n(s),l=n(5),u=n.n(l),d=(n(66),n(116),n(57),n(139),n(146),n(24),n(48),n(75),n(54),n(101));function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={exterior:{fullscreen:"aecwn8o1920x1152",flyout:"aecwn8o1920x600"},exterior_front:{fullscreen:"aecwn1o1920x1152",flyout:"aecwn1o1920x600"},exterior_back:{fullscreen:"aecwn6o1920x1152",flyout:"aecwn6o1920x600"},exterior_straight_front:{fullscreen:"aecwn3o1920x1152",flyout:"aecwn3o1920x600"},exterior_straight_back:{fullscreen:"aecwn5o1920x1152",flyout:"aecwn5o1920x600"},closeup_lights:{fullscreen:"aecwn2o1920x1152",flyout:"aecwn2o1920x600"},interior:{fullscreen:"aecwi1n1920x1152",flyout:"aecwi1n1920x600"},dashboard:{fullscreen:"aecwi2n1920x1152",flyout:"aecwi2n1920x600"}},p=Object.values(g).map((function(t){return[null==t?void 0:t.flyout,null==t?void 0:t.fullscreen]}));function v(t,e){if(t&&t.length){var n=t.find((function(t){return t.config===e}));return null==n?void 0:n.url}return null}var h=function(t){return t?Object.entries(g).reduce((function(e,n){var r,i;return m(m({},e),{},c()({},n[0],{fullscreen:v(t,null===(r=n[1])||void 0===r?void 0:r.fullscreen),flyout:v(t,null===(i=n[1])||void 0===i?void 0:i.flyout)}))}),{}):[]},y=function(t){return null==t?void 0:t.startsWith("LC_PR")},S=function(){var t=a()(u.a.mark((function t(e){var n,r,o,a,s,c,l,f,g,v,S,E,C,b,w,_,D,k,x;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null==e?void 0:e.ave,a=e&&e["mbv-ids"],o){t.next=4;break}return t.abrupt("return",Promise.reject({}));case 4:return s=o.split(","),c=s.slice(0,5),l=s.slice(5),f=s[3],g=s[4],v=s[2],S=s[1],E=null==e||null===(n=e.extColorCode)||void 0===n?void 0:n.selected,C=(null==a?void 0:a.exteriorColor)||f,b=(null==a?void 0:a.interiorColor)||g,w=(null==a?void 0:a.modelyear)||(null==e?void 0:e.modelyear)||v,_=S||(null==a?void 0:a.model)||(null==e?void 0:e.model),D={client:d.mediaService.clientId,brand:"ALL",configs:(r=[]).concat.apply(r,i()(p)),live:d.mediaService.live,modelRequests:[m({modelCode:_,modelYear:w,exteriorColor:C,interiorColor:b,standardEquipments:l,mimeType:"image/png"},y(c[3])&&{aozEquipments:[E]})]},k={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)},t.prev=18,t.next=21,fetch(d.mediaService.api,k);case 21:if((x=t.sent).ok){t.next=26;break}console.error("Response error from fetch images API: ",x),t.next=27;break;case 26:return t.abrupt("return",x.json().then((function(t){var e,n=null===(e=t.modelResults[0])||void 0===e?void 0:e.urlResult.filter((function(t){return null==t?void 0:t.url}));return h(n)})));case 27:t.next=32;break;case 29:t.prev=29,t.t0=t.catch(18),console.error("error occured when trying to fetch images from API:"+t.t0);case 32:case"end":return t.stop()}}),t,null,[[18,29]])})));return function(e){return t.apply(this,arguments)}}()},function(t,e,n){var r=n(25),i=n(84).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(20),i=n(40);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){"use strict";var r=n(17),i=n(131);r(r.P+r.F*n(132)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n(24);var r=n(0),i=n(1),o=n(23),a={},s={__:a};a.instance=!1,a.enabled=!0,a.source=!1,a.oDefaults={sCloseLayerButtonSelector:".nm-configurationstart-layer-close"},a.addEvents=function(){a.legacyEventBus.on("click.layer.configstart.close",a.oDefaults.sCloseLayerButtonSelector,a.closeStartLayer)},a.removeEvents=function(){a.legacyEventBus.off("click.layer.configstart.close",a.oDefaults.sCloseLayerButtonSelector,a.closeStartLayer)},a.trackLoadConfigEvent=function(){return a.enabled?new Promise((function(t){var e=setInterval((function(){if(a.layerProcessed){if(clearInterval(e),!a.layerActive)return console.log("reject"),Promise.reject();console.log("resolve: ",a.source),"carstore"===a.source?t({source:"myAudi"}):"audicode-input"===a.source?t({source:"audicode"}):t({source:a.source})}}),50)})):Promise.reject()},a.isStartlayerNotToShow=function(){return!a.enabled||o.hideHeaderFooter.isHiddenHeaderFooter()||SETUPS.get("scope.nemo.hide_startlayer")},a.openStartLayer=function(t){var e=t;return a.isStartlayerNotToShow()?(a.layerProcessed=!0,a.layerActive=!1,Promise.reject(new Error("Start layers not supported."))):new Promise((function(n,o){var s,c,l="configurationstart-implicit";(e=t)?(l="configurationstart-loaded",c='<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n\t<div class="nm-layer nm-layer-dialogue">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-dialogue-content clearfix">\n\t\t\t\t<div class="nm-3col clearfix">\n\t\t\t\t\t<div class="nm-module nm-start-layer nm-simpleform nm-configurationstart-loaded-layer clearfix">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'configurationloaded-layer-info\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-01">\n\t\t\t\t\t\t\t{{=\twindow.i18n[\'configurationloaded-layer-edit\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<img src="{{=it.ms_url}}{{=it.images.exterior_front[\'flyout\']}}"\n\t\t\t\t\t\tclass="nm-unscaled-image nm-alpha" />\n\t\t\t\t\t\t<div class="nm-start-information-overview">\n\t\t\t\t\t\t\t<div class="nm-start-inforamation-content">\n\t\t\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t\t\t\t{{=it.configuration.carlineName}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="nm-engine nm-el-pg nm-el-pg-03">\n\t\t\t\t\t\t\t\t\t{{=it.configuration.description}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<ul class="nm-car-price clearfix">\n\t\t\t\t\t\t\t\t\t<li class="nm-car-price-total nm-el-hdl nm-el-hdl-04 nm-at-hdl-b clearfix">\n\t\t\t\t\t\t\t\t\t\t/*<span class="nm-car-price-total-key">\n\t\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'totalprice-label\']}}\n\t\t\t\t\t\t\t\t\t\t</span>*/\n\t\t\t\t\t\t\t\t\t\t<span class="nm-car-price-total-value">\n\n\t\t\t\t\t\t\t\t\t\t\t{{? typeof(it.configuration.prices.rotr) !== \'undefined\' && parseInt(it.configuration.prices.rotr, 10) > 0 }}\n\t\t\t\t\t\t\t\t\t\t\t\t{{=it.configuration.prices.rotr}}\n\t\t\t\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t\t\t\t{{=it.configuration.price}}\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t\t<a href="#" class="nm-configurationstart-layer-close nm-el-btn nm-el-btn-01 nm-el-btn-ast">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'):(l="configurationstart-implicit",c='<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n\t<div class="nm-layer nm-layer-dialogue">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-dialogue-content clearfix">\n\t\t\t\t<div class="nm-3col clearfix">\n\t\t\t\t\t<div class="nm-module nm-start-layer nm-md-configurationstart-implicit-layer">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'configurationstart-layer-info\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-01">{{= window.i18n[\'configurationstart-layer-edit\']}}</p>\n\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t<a href="#" class="nm-configurationstart-layer-close nm-el-btn nm-el-btn-01 nm-el-btn-ast" style="float:right;">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'),s=i.template.render(c,e||{}),setTimeout((function(){document.body.scrollTop=0,r.layerApi.open(l,s,a.closeStartLayer).then((function(t){a.layerProcessed=!0,a.layerActive=!1,e&&(a.source=e.start_type,a.layerActive=!0),a.instance=t,a.addEvents(),jQuery("body").addClass("nm-config-layer-open"),n(a.instance)}),(function(t){a.layerProcessed=!0,a.layerActive=!1,o(t)}))}),600)}))},a.closeStartLayer=function(t){a.cancelEvent(t),a.instance&&"function"==typeof a.instance.close&&a.instance.close(),a.eventBus.emit(r.appEvents.STARTLAYER_CLOSE),a.instance=null,a.removeEvents(),jQuery("body").removeClass("nm-config-layer-open")},a.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},a.initialize=function(){a.instance||(a.addEvents(),a.instance=!0,a.layerProcessed=!1,a.layerActive=!0)},s.handleStartLayer=function(t){return a.openStartLayer(t)},s.unHandleStartLayer=function(){a.layerProcessed=!0,a.layerActive=!1},s.setEnabled=function(t){a.enabled=t},s.initialize=function(t){a.eventBus=t,a.legacyEventBus=jQuery("body"),a.initialize()}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var r=n(127);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(13),i=n(104),o=n(19)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var r=n(8),i=n(22),o=n(45),a=n(107),s=n(20).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(37),i=n(72),o=n(61);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),c=o.f,l=0;s.length>l;)c.call(t,a=s[l++])&&e.push(a);return e}},function(t,e,n){var r=n(84),i=n(72),o=n(10),a=n(8).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(88),i=n(30);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(19)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e){t.exports={}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n(24),n(103);var r=n(2),i=n(0),o={},a={__:o};o.STORAGE=window.sessionStorage||null,o.entryPrefix="__nemo__",o.handleConfigurationUpdates=function(){var t={prString:r.a.getPrString(),carlineID:r.a.getCarline()};o.writeEntry(t).then((function(t){console.log("user´s configuration storageID: "+t.stored)}),(function(t){console.warn("Error storing user´s configuration: "+t.message)}))},o.writeEntry=function(t){var e=t;return new Promise((function(t,n){var r;r=o.uuid(),e||n(new TypeError("writeEntry: missing param 'entry_'")),e=JSON.stringify(e),o.STORAGE||n(new TypeError("sessionStorage is not available")),o.STORAGE.setItem(r,e),t({stored:r})}))},o.uuid=function(){return o.entryPrefix+r.a.getVersion()},o.addEvents=function(){o.eventBus.on(i.appEvents.CONFIG_UPDATE,o.handleConfigurationUpdates)},o.readEntryFromStorage=function(){return new Promise((function(t,e){var n;o.STORAGE||e(new TypeError("Browserstorage is not available"));try{n=o.STORAGE.getItem(o.uuid()),t(n=JSON.parse(n))}catch(t){e(new TypeError("Error reading user´s configuration: "+t.message))}}))},o.initialize=function(){!r.a.isInPreviewMode()&&r.a.isConfigurable()?o.addEvents():console.log("preview-mode")},a.getPreviousUserConfigurationPrString=function(){return o.readEntryFromStorage().then((function(t){return t&&t.carlineID&&t.prString&&t.carlineID===r.a.getCarline()&&t.prString!==r.a.getPrString()?Promise.resolve(t.prString):Promise.reject(new TypeError("no valid user configuration available"))}),(function(){return Promise.reject(new TypeError("error reading user configuration from storage"))}))},o.debugEntries=function(){var t,e=[],n=new RegExp(o.entryPrefix);for(t in o.STORAGE)n.test(t)&&e.push(t);return e},a.initialize=function(t){o.eventBus=t,o.initialize()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(7),i=n.n(r),o=n(3),a=n.n(o),s=n(4),c=n.n(s),l=(n(24),n(5)),u=n.n(l),d=n(18),f=function(){function t(){var e=this;a()(this,t),d.stateRegistry.subscribeToStore(t.SEARCHQUERY_STORE_ID,(function(t){e.performSearch(t.searchQuery)})),this.registerResultStore()}var e;return c()(t,[{key:"searchResultStoreId",get:function(){return null}},{key:"registerResultStore",value:(e=i()(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.searchResultStoreId){e.next=4;break}return e.next=3,this.waitForProviderStore();case 3:d.stateRegistry.triggerAction(t.SEARCHPROVIDER_STORE_ID,"addSearchProvider",{searchProvider:this.searchResultStoreId});case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"waitForProviderStore",value:function(){return new Promise((function(e){d.stateRegistry.subscribeToStore(t.SEARCHPROVIDER_STORE_ID,(function(){e()}))}))}},{key:"performSearch",value:function(t){throw new Error("Implement performSearch in Subclass. (searchQuery: "+t+")")}},{key:"publishResult",value:function(t,e){d.stateRegistry.triggerAction(this.searchResultStoreId,"update",{result:e,searchQuery:t})}},{key:"setPreventSubmit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d.stateRegistry.triggerAction(t.SEARCHPROVIDER_STORE_ID,"preventSubmit",{preventSubmit:e})}}],[{key:"SEARCHPROVIDER_STORE_ID",get:function(){return"dbadSearchProviderStore"}},{key:"SEARCHQUERY_STORE_ID",get:function(){return"dbadSearchQueryStore"}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n(66),n(24);var r=n(2),i=n(0),o=n(1),a={},s={__:a};a.oDefaults={sSelectorDelegateTransferClick:".nm-layer-transfer .nm-j-configurator-delegate-transfer-click"},a.transfer=null,a.layerInstance=null,a.layerIsOpening=!1,a.layerIsClosing=!1,a.mergeData=function(t){return{deleted:t.deleted?a.mergeItemList(t.deleted):[],transferred:t.transferred?a.mergeItemList(t.transferred):[],standard:t.standard?a.mergeItemList(t.standard):[],urls:t.urls}},a.mergeItemList=function(t){return t.map((function(t){return r.a.getItem(t.id)}))},a.openLayer=function(t,e,n){if(!a.layerIsClosing)return a.layerIsOpening=!0,i.layerApi.open(t,e,n).then((function(t){return a.layerIsOpening=!1,Promise.resolve(t)}),(function(t){return a.layerIsOpening=!1,Promise.reject(t)}));setTimeout((function(){a.openLayer(t,e,n)}),510)},a.closeLayer=function(){a.layerIsClosing=!0,null===a.layerInstance&&a.layerIsOpening?setTimeout(a.closeLayer,510):a.layerInstance.close().then((function(){a.layerInstance=null,a.layerIsClosing=!1,a.onLayerClose()}),(function(){a.layerIsClosing=!1}))},a.onLayerClose=function(){a.transfer=null},a.handleTransferResolveClick=function(t){var e,n,r;t?(a.cancelEvent(t),(e=o.dom.closest(t.target,a.oDefaults.sSelectorDelegateTransferClick))&&(n=e.getAttribute("href"))):(r=o.dom.getElement(a.oDefaults.sSelectorDelegateTransferClick+"[data-transfer='cancel']"),n=o.dom.isElement(r)?r.getAttribute("href"):o.dom.getElement(a.oDefaults.sSelectorDelegateTransferClick+"[data-transfer='submit']").getAttribute("href")),n&&(n=SETUPS.get("nemo.url.dpu")+n,a.eventBus.trigger(i.appEvents.TRANSFER_CLOSE,{url:n})),a.closeLayer()},a.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},a.handleTransferClose=function(){a.layerName&&a.handleTransferResolveClick()},s.handleTransfer=function(t){var e,n;e=a.mergeData(t),n=o.template.render('<div class="nm-layer-wrapper nm-layer-wrapper-dialogue nm-layer-wrapper-transfer">\n\t<div class="nm-layer nm-layer-transfer nm-layer-transfer-default">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-conflict-content clearfix">\n\t\t\t\t<div class="nm-3col cearfix">\n\t\t\t\t\t<div class="">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'transfer-layer.configuration-transfer\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t{{? 0 !== it.deleted.length}}\n\t\t\t\t\t\t<strong class="nm-el-pg nm-el-pg-01">\n\t\t\t\t\t\t\t{{=window.i18n[\'transfer-layer.configuration-transfer-warning\']}}:\n\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t<ul class="nm-options-list nm-transfer-trigger nm-j-configurator-no-update">\n\t\t\t\t\t\t\t{{~it.deleted :value:index}}\n\t\t\t\t\t\t\t<li class="nm-check-list-item nm-j-configurator-item">\n\t\t\t\t\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t\t<div class="nm-list-item-additional clearfix">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t{{=value.name}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul class="nm-button-list clearfix">\n\t\t\t\t\t\t/*<li>\n\t\t\t\t\t\t\t<a class="nm-b7 nm-j-configurator-delegate-transfer-click" data-transfer="cancel"\n\t\t\t\t\t\t\thref="{{=it.urls.cancel}}">{{=window.i18n[\'transfer-layer.label.cancel\']}}</a>\n\t\t\t\t\t\t</li>*/\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-transfer-click nm-el-btn nm-el-btn-01 nm-el-btn-ast" data-transfer="submit">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',e),a.openLayer("transfer-layer",n,a.handleTransferResolveClick).then((function(t){a.layerInstance=t}),(function(t){console.warn("TRANSFER Layer open failed",t.message)}))},s.initialize=function(t){a.eventBus=t,a.legacyEventBus=o.dom.getEventDelegate("body"),a.legacyEventBus.on("click",a.oDefaults.sSelectorDelegateTransferClick,a.handleTransferResolveClick)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n(48),n(74),n(24);var r=n(2),i=n(0),o=n(1),a={},s={__:a};a.previousSelectedSolution=null,a.layerInstance=null,a.currentCancelLink="",a.oDefaults={sSelectorConflictLayer:".nm-layer-conflict",sSelectorConfigLayerOpen:"nm-config-layer-open",sSelectorDelegateConflictClick:".nm-j-configurator-delegate-conflict-click",sSelectorOptionsShow:".nm-j-conflict-options-show",sSelectorConflictSolution:".nm-conflict-solution",sSelectorDelegateClick:".nm-layer-wrapper-conflict .nm-j-configurator-delegate-click",sClassConflictSolutionShow:"nm-conflict-solution-show"},a.groupingWhitelist=["extcolor","upholstery"],a.debouncedConflictResolveHandler=o.dom.debounce((function(t){a.handleConflictResolveClick(t)}),500),a.addEvents=function(){a.legacyEventBus.on("click.nemo.configurator",a.oDefaults.sSelectorDelegateConflictClick,(function(t){t.preventDefault(),a.debouncedConflictResolveHandler(t)})),a.legacyEventBus.on("click.alternative-options",a.oDefaults.sSelectorOptionsShow,a.toggleAlternativeOptions),a.legacyEventBus.on("click.solution.store",a.oDefaults.sSelectorDelegateClick,a.handleConflictItemClick)},a.handleConflictItemClick=function(t){var e,n,r;if(a.cancelEvent(t),r=(n=(e=jQuery(this)).closest("div[data-solution-id]")).data("solution-id"),a.isSelectedItem(e.closest(".nm-j-configurator-item")))return console.log('ITEM "'+e.closest(".nm-j-configurator-item").attr("[nm-j-configurator-id]")+'" is already part of the configuration',e,n,r),!1;a.previousSelectedSolution=r,console.log("ITEM was clicked",e,n,r,a.previousSelectedSolution)},a.isSelectedItem=function(t){var e,n=t.get(0).className;return-1!==n.indexOf("nm-j-configurator-status_")&&(5===(e=n.split("nm-j-configurator-status_")[1].split(" ")[0]).length&&"1"===e[3])},a.toggleAlternativeOptions=function(){return jQuery(this).closest(".nm-conflict-solution").toggleClass(a.oDefaults.sClassConflictSolutionShow),!1},a.detectGroups=function(t,e,n){var r,i,o,s,c,l=t.items.length;if(t.sameTypeItems=!1,l<2)return t;for(r=l-1;r>=0;r--){if(!(i=n[t.items[r].id]))return t;if(!(o=e[i.family]))return t;if(c=o.name,r<l-1&&(s!==o.type||a.groupingWhitelist.indexOf(o.type)<0))return t;s=o.type}return t.sameTypeItems=!0,t.header=c,t},a.mergeData=function(t,e,n){var r,i,o,s,c,l,u,d,f,m,g=t,p=[];for(g.replacedByTriggers&&g.replacedByTriggers.length&&g.solutions.unshift(g.replacedByTriggers),jQuery.each(g.solutions,(function(t,r){(f={}).items=[],f.ids=[],c=[],jQuery.each(r,(function(t,r){(l=n[r.id])?(l.name&&delete r.name,u=jQuery.extend(!0,{},l,r)):u=r,u.family&&e[u.family]&&(u.family=e[u.family]),r.effItems&&jQuery.each(r.effItems,(function(t,r){(l=n[r.id]).name&&delete r.name,(i=jQuery.extend(!0,{},l,r)).family&&e[i.family]&&(i.family=e[i.family]),i.items=[i],c.push(i)})),f.ids.push(u.id),f.items.push(u)})),f.id=f.ids.join(""),p.push(f),c.length>0&&(p=p.concat(c))})),g.solutions=p,o=g.solutions.length-1;o>=0;o--)g.solutions[o]=a.detectGroups(g.solutions[o],e,n);for(m=[],s=g.solutions[0].items.length;s--;)(r=g.solutions[0].items[s]).family&&r.family.id&&r.family.id.indexOf("synthetic.audi_exclusive")>-1?(m.push(r),g.solutions[0].items[s].exclusive=!0):g.solutions[0].items[s].exclusive=!1;return m.reverse(),g.solutions[0].exclusives=m,d=[],c=[],jQuery.each(g.triggers,(function(t,r){(l=n[r.id])?(l.name?delete r.name:r.name="#"+l.name,u=jQuery.extend(!0,{},l,r)):u=r,u.family&&e[u.family]&&(u.family=e[u.family]),d.push(u),r.effItems&&jQuery.each(r.effItems,(function(t,e){(l=n[e.id]).name&&delete e.name,(i=jQuery.extend(!0,{},l,e)).items=[i],c.push(i)}))})),c.length>0&&(g.solutions=c.concat(g.solutions)),g.triggers=d,g},a.openLayer=function(t,e,n){return new Promise((function(r,o){i.layerApi.open(t,e,n).then((function(t){a.layerInstance=t,a.openSelectedSolutionAlternatives(),a.currentCancelLink=jQuery([a.oDefaults.sSelectorDelegateConflictClick,"[data-conflict='cancel']"].join("")).attr("href"),r(a.layerInstance)}),(function(t){o(t)}))}))},a.closeLayer=function(){return a.layerInstance.close().then((function(){a.layerInstance=null,a.onLayerClose()}),(function(t){throw new TypeError("Error closing conflict Layer: "+t.message)}))},a.onLayerClose=function(){jQuery("body").removeClass(a.oDefaults.sSelectorConfigLayerOpen),a.conflict=null},a.handleConflictResolveClick=function(t){var e,n,r,o="cancel";t?(a.cancelEvent(t),e=jQuery(t.target),n=SETUPS.get("nemo.url.dpu")+e.attr("href"),e.data("conflict")&&(o=e.data("conflict"))):(o="cancel",n=(r=jQuery([a.oDefaults.sSelectorDelegateConflictClick,"[data-conflict='cancel']"].join("")).attr("href"))?SETUPS.get("nemo.url.dpu")+r:SETUPS.get("nemo.url.dpu")+a.currentCancelLink),a.eventBus.emit(i.appEvents.CONFLICT_CLOSE,{url:n,action:o}),a.closeLayer()},a.openSelectedSolutionAlternatives=function(){var t;a.previousSelectedSolution&&(t=jQuery("[data-solution-id='"+a.previousSelectedSolution+"']"),a.previousSelectedSolution||(a.previousSelectedSolution=void 0),t.addClass(a.oDefaults.sClassConflictSolutionShow))},a.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},s.handleConflict=function(t){return new Promise((function(e,n){var i=a.mergeData(t,r.a.getSpecialFamilies()||{},r.a.getItems()),s=o.template.render('{{##def.options_tiles:\n<ul class="nm-options-list nm-options-tiles">\n\t<li>\n\t\t<span class="nm-el-pg nm-el-pg-03 nm-at-pg-b">{{=p.header}}</span>\n\n\t\t<div class="nm-tile-block">\n\n\t\t\t<ul class="nm-tile-list clearfix">\n\n\t\t\t{{~ p.items :value:i }}\n\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\t\t\t\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\t\t\t\t\t\t{{? !!value.image }}\n\t\t\t\t\t\t<div class="nm-tile-element-image">\n\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-click" href="#"><img src="{{=value.image}}" /></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\t<div class="nm-tile-element-info">\n\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">{{=value.name}}</span>\n\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t\t</ul>\n\n\t\t</div>\n\n\t</li>\n</ul>\n#}}\n\n\n{{##def.options_list:\n\x3c!-- Default options list --\x3e\n\n<ul class="nm-options-list">\n\t{{~ p.items :value:i }}\n\t<li class="nm-check-list-item nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\n\t\t<div class="nm-options-list-cell-cb clearfix">\n\t\t\t<a class="nm-checkbox-1 nm-j-configurator-delegate-click" href="#"></a>\n\t\t</div>\n\n\t\t<div class="nm-options-cell-additional">\n\t\t\t{{? value.image }}\n\t\t\t<div class="nm-list-item-additional">\n\t\t\t\t<div class="nm-list-item-image">\n\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.image.name}}" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{{?}}\n\n\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">\n\t\t\t\t{{? value.type === "add" }}\n\t\t\t\t<span class="nm-conflict-add-text nm-at-pg-b">\n\t\t\t\t\t{{=window.i18n[\'conflict-layer.add-item\']}}\n\t\t\t\t</span>\n\t\t\t\t{{??}}\n\t\t\t\t<span class="nm-conflict-remove-text nm-at-pg-b">\n\t\t\t\t\t{{=window.i18n[\'conflict-layer.remove-item\']}}\n\t\t\t\t</span>\n\t\t\t\t{{?}} {{=value.name}}\n\t\t\t</span>\n\t\t</div>\n\n\t\t{{? typeof value.priceValue !== \'undefined\' && value.priceValue < 0 }} \n\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t{{??}}\n\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t{{?}}\n\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t</div>\n\t</li>\n\t{{~}}\n</ul>\n#}}\n\n\n<div class="nm-layer-wrapper nm-layer-wrapper-dialogue nm-layer-wrapper-conflict">\n\t<div class="nm-layer nm-layer-conflict nm-layer-conflict-default">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-conflict-content clearfix">\n\t\t\t\t<div class="nm-3col cearfix">\n\t\t\t\t\t<div class="nm-module nm-md-conflict-layer" data-module="conflict-layer">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.selection-conflict\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t{{? 0 !== it.triggers.length}}\n\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.your-selection\']}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ul class="nm-options-list nm-conflict-trigger">\n\t\t\t\t\t\t\t{{~it.triggers :value:index}}\n\t\t\t\t\t\t\t<li class="nm-check-list-item nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\t\t\t\t\t\t\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\t\t\t\t\t\t\t\t<a class="nm-checkbox-1 nm-j-configurator-delegate-click" href="#"></a>\n\t\t\t\t\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">\n\t\t\t\t\t\t\t\t\t\t{{=value.name}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{{? typeof value.priceValue !== \'undefined\' && value.priceValue < 0 }} \n\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t{{?}} {{? 0 !== it.solutions[0].length}}\n\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.mandatory-customizations\']}}:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{{~ it.solutions :p }}\n\t\t\t\t\t\t{{? !!p.id}}\n\t\t\t\t\t\t<div class="nm-conflict-solution" data-solution-id="{{=p.id}}">\n\n\t\t\t\t\t\t\t{{?!!p.sameTypeItems}}\n\t\t\t\t\t\t\t\t{{#def.options_tiles}}\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t{{#def.options_list}}\n\t\t\t\t\t\t\t\t{{? 1 < p.items.length}} <a href="" class="nm-j-conflict-options-show nm-el-lbl nm-el-lbl-01">\n\t\t\t\t\t\t\t\t\t<span class="nm-conflict-alternative-text-show">\n\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.show-alternatives\']}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="nm-conflict-alternative-text-hide">\n\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.hide-alternatives\']}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\n\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t{{~}} {{?}}\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-03 nm-at-pg-b nm-conflict-layer-total-price">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.overall-cutomizations\']}}: {{?\n\t\t\t\t\t\t\ttypeof it.totalPriceValue !== \'undefined\' && it.totalPriceValue\n\t\t\t\t\t\t\t< 0 }} <span class="nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<span class="nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t\t{{?}} {{=it.totalPrice}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<ul class="nm-button-list clearfix">\n\t\t\t\t\t\t\t{{? !!it.urls.cancel }}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-conflict-click nm-el-btn nm-el-btn-01 nm-at-btn-inv" data-conflict="cancel"\n\t\t\t\t\t\t\t\thref="{{=it.urls.cancel}}">{{=window.i18n[\'abort-label\']}}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{?}} {{? !!it.urls.submit }}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-conflict-click nm-el-btn nm-el-btn-02" data-conflict="submit"\n\t\t\t\t\t\t\t\thref="{{=it.urls.submit}}">{{=window.i18n[\'conflict-layer.label.submit\']}}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',i);a.openLayer("conflict-layer",s,a.debouncedConflictResolveHandler).then(e,n)}))},s.initialize=function(t){a.eventBus=t,a.legacyEventBus=jQuery("body"),a.addEvents()}},function(t,e,n){var r=n(13),i=n(141).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){var r=n(17),i=n(117)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(105),i=n(161),o=n(133),a=n(25);t.exports=n(152)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(13),i=n(10),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(51)(Function.call,n(83).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";var r=n(8),i=n(20),o=n(12),a=n(19)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";var r=n(17),i=n(32),o=n(131),a="".startsWith;r(r.P+r.F*n(132)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";var r=n(89)(!0);n(152)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){for(var r=n(140),i=n(37),o=n(27),a=n(8),s=n(26),c=n(133),l=n(19),u=l("iterator"),d=l("toStringTag"),f=c.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=i(m),p=0;p<g.length;p++){var v,h=g[p],y=m[h],S=a[h],E=S&&S.prototype;if(E&&(E[u]||s(E,u,f),E[d]||s(E,d,h),c[h]=f,y))for(v in r)E[v]||o(E,v,r[v],!0)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(7),i=n.n(r),o=n(5),a=n.n(o),s=n(39),c=n(1),l=n(9),u=function(t){var e=new CustomEvent("configurationUpdate",{detail:t});document.dispatchEvent(e)},d=function(){var t=i()(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.polling.wait(s.a.isDataInitialized,3e4);case 2:e=l.a.getRawConfigurationData(),u(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();document.addEventListener("configurationDataRequest",(function(){return d()}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return exports}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),core_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),core_utils__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_utils__WEBPACK_IMPORTED_MODULE_1__),_dpu_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),core_application__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),core_application__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_application__WEBPACK_IMPORTED_MODULE_3__),__={},exports={__:__};__.oDefaults={sSelectorOptionList:".nm-options-list",sSelectorOptionListAlternative:".nm-j-options-list-alternative",sSelectorConfiguratorContainer:".nm-configurator-container",sClassOptionListCollapsed:"nm-options-list-collapsed",sClassConfiguratorContainerShow:"nm-j-configurator-container-show",sClassConfiguratorContainerHide:"nm-j-configurator-container-hide"},__.toggleAlternativeOptions=function(t){var e=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getElement(__.oDefaults.sSelectorOptionList,t.target.parentNode);core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.isElement(e)&&e.classList.toggle(__.oDefaults.sClassOptionListCollapsed)},__.getSelectedIdString=function(t,e){var n="";return e&&e.forEach((function(e){"idid"!==e&&t[e]&&t[e].status&&"11010"===t[e].status&&(n+=e)})),n},__.tilesExclusive=function(){var exclusiveTiles=document.querySelectorAll(".nm-module-tiles-exclusive, .nm-md-tiles-exclusive");_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(exclusiveTiles).forEach((function(element){var items=_dpu_api__WEBPACK_IMPORTED_MODULE_2__.a.getItems()||{},optionsIncluded=eval(element.getAttribute("data-configurator-id-included")),selectedIdString=__.getSelectedIdString(items,optionsIncluded);element.setAttribute("data-tile-selected",selectedIdString)}))},__.hasSelectedItem=function(t,e){var n,r,i=e.length;for(r=0;r<i;r++)if((n=t[e[r]]||{}).status&&("11010"===n.status||"10011"===n.status))return!0;return!1},__.isHiddenByVersion=function(t){var e=!1;return __.hiddenItemsFromVersion&&null!==__.hiddenItemsFromVersion&&(e=__.hiddenItemsFromVersion.indexOf(t)>-1),e},__.isVisible=function(t,e){var n,r=!1,i=!1,o=!1;return e&&e.forEach((function(e){if(!1===r)return"idid"===e||(t[e]?(t[e].status&&"00000"!==t[e].status&&"10000"!==t[e].status&&"10010"!==t[e].status&&(i=!0),t[e].id&&!1===__.isHiddenByVersion(t[e].id)&&(o=!0),r=i&&o,!1):(!1===__.isHiddenByVersion(e)&&((n=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getElement('.nm-j-configurator-item[data-configurator-id="'+e+'"]',document)).classList.contains("nm-j-configurator-status_00000")||n.classList.contains("nm-j-configurator-status_10000")||n.classList.contains("nm-j-configurator-status_10010")||(r=!0)),!1))})),r},__.isVisibleSummary=function(t,e){var n,r=!1,i=!1,o=!1;return e&&e.forEach((function(e){if(!r)return t[e]?(t[e].status&&"11000"!==t[e].status&&"00000"!==t[e].status&&"11100"!==t[e].status&&"10000"!==t[e].status&&"10010"!==t[e].status&&(i=!0),t[e].id&&!1===__.isHiddenByVersion(t[e].id)&&(o=!0),r=i&&o,!0):(!1===__.isHiddenByVersion(e)&&(n=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getElement('.nm-j-configurator-item[data-configurator-id="'+e+'"]',document),!core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.isElement(n)||n.classList.contains("nm-j-configurator-status_11000")||n.classList.contains("nm-j-configurator-status_00000")||n.classList.contains("nm-j-configurator-status_11100")||n.classList.contains("nm-j-configurator-status_10000")||n.classList.contains("nm-j-configurator-status_10010")||(r=!0)),!1)})),r},__.handler=function(){var t=_dpu_api__WEBPACK_IMPORTED_MODULE_2__.a.getItems()||{};__.hiddenItemsFromVersion=_dpu_api__WEBPACK_IMPORTED_MODULE_2__.a.getHiddenItemIDsFromVersion(),__.handleConfiguratorContainer(t),__.handleConfiguratorSummary(t),__.handleEquipmentContainer(t),__.handleOptionsListContainer(t)},__.handleConfiguratorContainer=function(items){var configuratorContainer=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer);configuratorContainer.forEach((function(element){var optionsIncluded=eval(element.getAttribute("data-configurator-id-included"));!1===__.isVisible(items,optionsIncluded)?(element.classList.add(__.oDefaults.sClassConfiguratorContainerHide),element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow)):(element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),element.classList.add(__.oDefaults.sClassConfiguratorContainerShow))}))},__.handleConfiguratorSummary=function(items){var configuratorContainerSummary=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer+".nm-summary-list-container");configuratorContainerSummary.forEach((function(element){var optionsIncluded=eval(element.getAttribute("data-configurator-id-included"));!1===__.isVisibleSummary(items,optionsIncluded)?(element.classList.add(__.oDefaults.sClassConfiguratorContainerHide),element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow)):(element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),element.classList.add(__.oDefaults.sClassConfiguratorContainerShow))}))},__.handleEquipmentContainer=function(items){var equipmentContainers=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getElementsArray(".nm-j-selected-standard-equipment-container");equipmentContainers.forEach((function(container){var optionsIncluded=eval(container.getAttribute("data-configurator-id-included"));__.containsSelectedStandardEquipment(items,optionsIncluded)?(container.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),container.classList.add(__.oDefaults.sClassConfiguratorContainerShow)):(container.classList.add(__.oDefaults.sClassConfiguratorContainerHide),container.classList.remove(__.oDefaults.sClassConfiguratorContainerShow))}))},__.containsSelectedStandardEquipment=function(t,e){var n=!1;return e.forEach((function(e){t[e]&&t[e].status&&"10011"===t[e].status&&(n=!0)})),n},__.handleOptionsListContainer=function(items){var optionsListContainer=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getElementsArray(".nm-md-options-list");optionsListContainer.forEach((function(element){var container=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer,element),optionsIncluded,isCollapsible,optionsList;if(0===container.length)return!0;optionsIncluded=eval(container[0].getAttribute("data-configurator-id-included")),isCollapsible=!1,container.forEach((function(t){var e=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getElement(".nm-j-options-list-alternative",t);core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.isElement(e)&&!core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.isHidden(e)&&(isCollapsible=!0)})),optionsList=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getElementsArray(__.oDefaults.sSelectorOptionList,element),__.hasSelectedItem(items,optionsIncluded)&&isCollapsible?optionsList[0].classList.add(__.oDefaults.sClassOptionListCollapsed):optionsList[0].classList.remove(__.oDefaults.sClassOptionListCollapsed)}))},__.addEvents=function(){__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_3__.appEvents.CONFIG_UPDATE,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_3__.appEvents.PAGE_LOADED,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_3__.appEvents.LAYER_LOADED,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_3__.appEvents.MODELSINFO_LOAD_COMPLETE,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_3__.appEvents.CONFIG_UPDATE,__.tilesExclusive),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_3__.appEvents.PAGE_LOADED,__.tilesExclusive),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_3__.appEvents.LAYER_LOADED,__.tilesExclusive),__.domEventDelegate.on("click",__.oDefaults.sSelectorOptionListAlternative,__.toggleAlternativeOptions)},exports.initialize=function(t){__.eventBus=t,__.domEventDelegate=core_utils__WEBPACK_IMPORTED_MODULE_1__.dom.getEventDelegate("body"),__.addEvents()}},function(t,e,n){"use strict";var r=n(51),i=n(17),o=n(50),a=n(155),s=n(156),c=n(32),l=n(122),u=n(157);i(i.S+i.F*!n(158)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,d,f=o(t),m="function"==typeof this?this:Array,g=arguments.length,p=g>1?arguments[1]:void 0,v=void 0!==p,h=0,y=u(f);if(v&&(p=r(p,g>2?arguments[2]:void 0,2)),null==y||m==Array&&s(y))for(n=new m(e=c(f.length));e>h;h++)l(n,h,v?p(f[h],h):f[h]);else for(d=y.call(f),n=new m;!(i=d.next()).done;h++)l(n,h,v?a(d,p,[i.value,h],!0):i.value);return n.length=h,n}})},function(t,e,n){"use strict";var r=n(45),i=n(17),o=n(27),a=n(26),s=n(133),c=n(159),l=n(115),u=n(160),d=n(19)("iterator"),f=!([].keys&&"next"in[].keys()),m=function(){return this};t.exports=function(t,e,n,g,p,v,h){c(n,e,g);var y,S,E,C=function(t){if(!f&&t in D)return D[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},b=e+" Iterator",w="values"==p,_=!1,D=t.prototype,k=D[d]||D["@@iterator"]||p&&D[p],x=k||C(p),A=p?w?C("entries"):x:void 0,L="Array"==e&&D.entries||k;if(L&&(E=u(L.call(new t)))!==Object.prototype&&E.next&&(l(E,b,!0),r||"function"==typeof E[d]||a(E,d,m)),w&&k&&"values"!==k.name&&(_=!0,x=function(){return k.call(this)}),r&&!h||!f&&!_&&D[d]||a(D,d,x),s[e]=x,s[b]=m,p)if(y={values:w?x:C("values"),keys:v?x:C("keys"),entries:A},h)for(S in y)S in D||o(D,S,y[S]);else i(i.P+i.F*(f||_),e,y);return y}},function(t,e,n){var r,i,o,a=function(){var t=function(t,e){var n=t,r=c[e],i=null,o=0,a=null,s=[],l={},u=function(t,e){i=function(t){for(var e=new Array(t),n=0;n<t;n+=1){e[n]=new Array(t);for(var r=0;r<t;r+=1)e[n][r]=null}return e}(o=4*n+17),d(0,0),d(o-7,0),d(0,o-7),m(),f(),p(t,e),n>=7&&g(t),null==a&&(a=y(n,r,s)),v(a,e)},d=function(t,e){for(var n=-1;n<=7;n+=1)if(!(t+n<=-1||o<=t+n))for(var r=-1;r<=7;r+=1)e+r<=-1||o<=e+r||(i[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},f=function(){for(var t=8;t<o-8;t+=1)null==i[t][6]&&(i[t][6]=t%2==0);for(var e=8;e<o-8;e+=1)null==i[6][e]&&(i[6][e]=e%2==0)},m=function(){for(var t=h.getPatternPosition(n),e=0;e<t.length;e+=1)for(var r=0;r<t.length;r+=1){var o=t[e],a=t[r];if(null==i[o][a])for(var s=-2;s<=2;s+=1)for(var c=-2;c<=2;c+=1)i[o+s][a+c]=-2==s||2==s||-2==c||2==c||0==s&&0==c}},g=function(t){for(var e=h.getBCHTypeNumber(n),r=0;r<18;r+=1){var a=!t&&1==(e>>r&1);i[Math.floor(r/3)][r%3+o-8-3]=a}for(r=0;r<18;r+=1){a=!t&&1==(e>>r&1);i[r%3+o-8-3][Math.floor(r/3)]=a}},p=function(t,e){for(var n=r<<3|e,a=h.getBCHTypeInfo(n),s=0;s<15;s+=1){var c=!t&&1==(a>>s&1);s<6?i[s][8]=c:s<8?i[s+1][8]=c:i[o-15+s][8]=c}for(s=0;s<15;s+=1){c=!t&&1==(a>>s&1);s<8?i[8][o-s-1]=c:s<9?i[8][15-s-1+1]=c:i[8][15-s-1]=c}i[o-8][8]=!t},v=function(t,e){for(var n=-1,r=o-1,a=7,s=0,c=h.getMaskFunction(e),l=o-1;l>0;l-=2)for(6==l&&(l-=1);;){for(var u=0;u<2;u+=1)if(null==i[r][l-u]){var d=!1;s<t.length&&(d=1==(t[s]>>>a&1)),c(r,l-u)&&(d=!d),i[r][l-u]=d,-1==(a-=1)&&(s+=1,a=7)}if((r+=n)<0||o<=r){r-=n,n=-n;break}}},y=function(t,e,n){for(var r=E.getRSBlocks(t,e),i=C(),o=0;o<n.length;o+=1){var a=n[o];i.put(a.getMode(),4),i.put(a.getLength(),h.getLengthInBits(a.getMode(),t)),a.write(i)}var s=0;for(o=0;o<r.length;o+=1)s+=r[o].dataCount;if(i.getLengthInBits()>8*s)throw"code length overflow. ("+i.getLengthInBits()+">"+8*s+")";for(i.getLengthInBits()+4<=8*s&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*s||(i.put(236,8),i.getLengthInBits()>=8*s));)i.put(17,8);return function(t,e){for(var n=0,r=0,i=0,o=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s+=1){var c=e[s].dataCount,l=e[s].totalCount-c;r=Math.max(r,c),i=Math.max(i,l),o[s]=new Array(c);for(var u=0;u<o[s].length;u+=1)o[s][u]=255&t.getBuffer()[u+n];n+=c;var d=h.getErrorCorrectPolynomial(l),f=S(o[s],d.getLength()-1).mod(d);a[s]=new Array(d.getLength()-1);for(u=0;u<a[s].length;u+=1){var m=u+f.getLength()-a[s].length;a[s][u]=m>=0?f.getAt(m):0}}var g=0;for(u=0;u<e.length;u+=1)g+=e[u].totalCount;var p=new Array(g),v=0;for(u=0;u<r;u+=1)for(s=0;s<e.length;s+=1)u<o[s].length&&(p[v]=o[s][u],v+=1);for(u=0;u<i;u+=1)for(s=0;s<e.length;s+=1)u<a[s].length&&(p[v]=a[s][u],v+=1);return p}(i,r)};l.addData=function(t,e){var n=null;switch(e=e||"Byte"){case"Numeric":n=b(t);break;case"Alphanumeric":n=w(t);break;case"Byte":n=_(t);break;case"Kanji":n=D(t);break;default:throw"mode:"+e}s.push(n),a=null},l.isDark=function(t,e){if(t<0||o<=t||e<0||o<=e)throw t+","+e;return i[t][e]},l.getModuleCount=function(){return o},l.make=function(){if(n<1){for(var t=1;t<40;t++){for(var e=E.getRSBlocks(t,r),i=C(),o=0;o<s.length;o++){var a=s[o];i.put(a.getMode(),4),i.put(a.getLength(),h.getLengthInBits(a.getMode(),t)),a.write(i)}var c=0;for(o=0;o<e.length;o++)c+=e[o].dataCount;if(i.getLengthInBits()<=8*c)break}n=t}u(!1,function(){for(var t=0,e=0,n=0;n<8;n+=1){u(!0,n);var r=h.getLostPoint(l);(0==n||t>r)&&(t=r,e=n)}return e}())},l.createTableTag=function(t,e){t=t||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",n+='">',n+="<tbody>";for(var r=0;r<l.getModuleCount();r+=1){n+="<tr>";for(var i=0;i<l.getModuleCount();i+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+t+"px;",n+=" height: "+t+"px;",n+=" background-color: ",n+=l.isDark(r,i)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},l.createSvgTag=function(t,e,n,r){var i={};"object"==typeof arguments[0]&&(t=(i=arguments[0]).cellSize,e=i.margin,n=i.alt,r=i.title),t=t||2,e=void 0===e?4*t:e,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var o,a,s,c,u=l.getModuleCount()*t+2*e,d="";for(c="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",d+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',d+=i.scalable?"":' width="'+u+'px" height="'+u+'px"',d+=' viewBox="0 0 '+u+" "+u+'" ',d+=' preserveAspectRatio="xMinYMin meet"',d+=r.text||n.text?' role="img" aria-labelledby="'+k([r.id,n.id].join(" ").trim())+'"':"",d+=">",d+=r.text?'<title id="'+k(r.id)+'">'+k(r.text)+"</title>":"",d+=n.text?'<description id="'+k(n.id)+'">'+k(n.text)+"</description>":"",d+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',d+='<path d="',a=0;a<l.getModuleCount();a+=1)for(s=a*t+e,o=0;o<l.getModuleCount();o+=1)l.isDark(a,o)&&(d+="M"+(o*t+e)+","+s+c);return d+='" stroke="transparent" fill="black"/>',d+="</svg>"},l.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var n=l.getModuleCount()*t+2*e,r=e,i=n-e;return A(n,n,(function(e,n){if(r<=e&&e<i&&r<=n&&n<i){var o=Math.floor((e-r)/t),a=Math.floor((n-r)/t);return l.isDark(a,o)?0:1}return 1}))},l.createImgTag=function(t,e,n){t=t||2,e=void 0===e?4*t:e;var r=l.getModuleCount()*t+2*e,i="";return i+="<img",i+=' src="',i+=l.createDataURL(t,e),i+='"',i+=' width="',i+=r,i+='"',i+=' height="',i+=r,i+='"',n&&(i+=' alt="',i+=k(n),i+='"'),i+="/>"};var k=function(t){for(var e="",n=0;n<t.length;n+=1){var r=t.charAt(n);switch(r){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=r}}return e};return l.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,n,r,i,o,a=1*l.getModuleCount()+2*t,s=t,c=a-t,u={"██":"█","█ ":"▀"," █":"▄","  ":" "},d={"██":"▀","█ ":"▀"," █":" ","  ":" "},f="";for(e=0;e<a;e+=2){for(r=Math.floor((e-s)/1),i=Math.floor((e+1-s)/1),n=0;n<a;n+=1)o="█",s<=n&&n<c&&s<=e&&e<c&&l.isDark(r,Math.floor((n-s)/1))&&(o=" "),s<=n&&n<c&&s<=e+1&&e+1<c&&l.isDark(i,Math.floor((n-s)/1))?o+=" ":o+="█",f+=t<1&&e+1>=c?d[o]:u[o];f+="\n"}return a%2&&t>0?f.substring(0,f.length-a-1)+Array(a+1).join("▀"):f.substring(0,f.length-1)}(e);t-=1,e=void 0===e?2*t:e;var n,r,i,o,a=l.getModuleCount()*t+2*e,s=e,c=a-e,u=Array(t+1).join("██"),d=Array(t+1).join("  "),f="",m="";for(n=0;n<a;n+=1){for(i=Math.floor((n-s)/t),m="",r=0;r<a;r+=1)o=1,s<=r&&r<c&&s<=n&&n<c&&l.isDark(i,Math.floor((r-s)/t))&&(o=0),m+=o?u:d;for(i=0;i<t;i+=1)f+=m+"\n"}return f.substring(0,f.length-1)},l.renderTo2dContext=function(t,e){e=e||2;for(var n=l.getModuleCount(),r=0;r<n;r++)for(var i=0;i<n;i++)t.fillStyle=l.isDark(r,i)?"black":"white",t.fillRect(r*e,i*e,e,e)},l};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],n=0;n<t.length;n+=1){var r=t.charCodeAt(n);e.push(255&r)}return e}}).default,t.createStringToBytes=function(t,e){var n=function(){for(var n=x(t),r=function(){var t=n.read();if(-1==t)throw"eof";return t},i=0,o={};;){var a=n.read();if(-1==a)break;var s=r(),c=r()<<8|r();o[String.fromCharCode(a<<8|s)]=c,i+=1}if(i!=e)throw i+" != "+e;return o}(),r="?".charCodeAt(0);return function(t){for(var e=[],i=0;i<t.length;i+=1){var o=t.charCodeAt(i);if(o<128)e.push(o);else{var a=n[t.charAt(i)];"number"==typeof a?(255&a)==a?e.push(a):(e.push(a>>>8),e.push(255&a)):e.push(r)}}return e}};var e,n,r,i=1,o=2,a=4,s=8,c={L:1,M:0,Q:3,H:2},l=0,u=1,d=2,f=3,m=4,g=5,p=6,v=7,h=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(n={}).getBCHTypeInfo=function(t){for(var e=t<<10;r(e)-r(1335)>=0;)e^=1335<<r(e)-r(1335);return 21522^(t<<10|e)},n.getBCHTypeNumber=function(t){for(var e=t<<12;r(e)-r(7973)>=0;)e^=7973<<r(e)-r(7973);return t<<12|e},n.getPatternPosition=function(t){return e[t-1]},n.getMaskFunction=function(t){switch(t){case l:return function(t,e){return(t+e)%2==0};case u:return function(t,e){return t%2==0};case d:return function(t,e){return e%3==0};case f:return function(t,e){return(t+e)%3==0};case m:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case g:return function(t,e){return t*e%2+t*e%3==0};case p:return function(t,e){return(t*e%2+t*e%3)%2==0};case v:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},n.getErrorCorrectPolynomial=function(t){for(var e=S([1],0),n=0;n<t;n+=1)e=e.multiply(S([1,y.gexp(n)],0));return e},n.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case i:return 10;case o:return 9;case a:case s:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case i:return 12;case o:return 11;case a:return 16;case s:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case i:return 14;case o:return 13;case a:return 16;case s:return 12;default:throw"mode:"+t}}},n.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r+=1)for(var i=0;i<e;i+=1){for(var o=0,a=t.isDark(r,i),s=-1;s<=1;s+=1)if(!(r+s<0||e<=r+s))for(var c=-1;c<=1;c+=1)i+c<0||e<=i+c||0==s&&0==c||a==t.isDark(r+s,i+c)&&(o+=1);o>5&&(n+=3+o-5)}for(r=0;r<e-1;r+=1)for(i=0;i<e-1;i+=1){var l=0;t.isDark(r,i)&&(l+=1),t.isDark(r+1,i)&&(l+=1),t.isDark(r,i+1)&&(l+=1),t.isDark(r+1,i+1)&&(l+=1),0!=l&&4!=l||(n+=3)}for(r=0;r<e;r+=1)for(i=0;i<e-6;i+=1)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(i=0;i<e;i+=1)for(r=0;r<e-6;r+=1)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);var u=0;for(i=0;i<e;i+=1)for(r=0;r<e;r+=1)t.isDark(r,i)&&(u+=1);return n+=Math.abs(100*u/e/e-50)/5*10},n),y=function(){for(var t=new Array(256),e=new Array(256),n=0;n<8;n+=1)t[n]=1<<n;for(n=8;n<256;n+=1)t[n]=t[n-4]^t[n-5]^t[n-6]^t[n-8];for(n=0;n<255;n+=1)e[t[n]]=n;var r={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return r}();function S(t,e){if(void 0===t.length)throw t.length+"/"+e;var n=function(){for(var n=0;n<t.length&&0==t[n];)n+=1;for(var r=new Array(t.length-n+e),i=0;i<t.length-n;i+=1)r[i]=t[i+n];return r}(),r={getAt:function(t){return n[t]},getLength:function(){return n.length},multiply:function(t){for(var e=new Array(r.getLength()+t.getLength()-1),n=0;n<r.getLength();n+=1)for(var i=0;i<t.getLength();i+=1)e[n+i]^=y.gexp(y.glog(r.getAt(n))+y.glog(t.getAt(i)));return S(e,0)},mod:function(t){if(r.getLength()-t.getLength()<0)return r;for(var e=y.glog(r.getAt(0))-y.glog(t.getAt(0)),n=new Array(r.getLength()),i=0;i<r.getLength();i+=1)n[i]=r.getAt(i);for(i=0;i<t.getLength();i+=1)n[i]^=y.gexp(y.glog(t.getAt(i))+e);return S(n,0).mod(t)}};return r}var E=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var n={};return n.totalCount=t,n.dataCount=e,n},n={};return n.getRSBlocks=function(n,r){var i=function(e,n){switch(n){case c.L:return t[4*(e-1)+0];case c.M:return t[4*(e-1)+1];case c.Q:return t[4*(e-1)+2];case c.H:return t[4*(e-1)+3];default:return}}(n,r);if(void 0===i)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var o=i.length/3,a=[],s=0;s<o;s+=1)for(var l=i[3*s+0],u=i[3*s+1],d=i[3*s+2],f=0;f<l;f+=1)a.push(e(u,d));return a},n}(),C=function(){var t=[],e=0,n={getBuffer:function(){return t},getAt:function(e){var n=Math.floor(e/8);return 1==(t[n]>>>7-e%8&1)},put:function(t,e){for(var r=0;r<e;r+=1)n.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return e},putBit:function(n){var r=Math.floor(e/8);t.length<=r&&t.push(0),n&&(t[r]|=128>>>e%8),e+=1}};return n},b=function(t){var e=i,n=t,r={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+2<e.length;)t.put(o(e.substring(r,r+3)),10),r+=3;r<e.length&&(e.length-r==1?t.put(o(e.substring(r,r+1)),4):e.length-r==2&&t.put(o(e.substring(r,r+2)),7))}},o=function(t){for(var e=0,n=0;n<t.length;n+=1)e=10*e+a(t.charAt(n));return e},a=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return r},w=function(t){var e=o,n=t,r={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+1<e.length;)t.put(45*i(e.charAt(r))+i(e.charAt(r+1)),11),r+=2;r<e.length&&t.put(i(e.charAt(r)),6)}},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return r},_=function(e){var n=a,r=t.stringToBytes(e),i={getMode:function(){return n},getLength:function(t){return r.length},write:function(t){for(var e=0;e<r.length;e+=1)t.put(r[e],8)}};return i},D=function(e){var n=s,r=t.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";!function(t,e){var n=r("友");if(2!=n.length||38726!=(n[0]<<8|n[1]))throw"sjis not supported."}();var i=r(e),o={getMode:function(){return n},getLength:function(t){return~~(i.length/2)},write:function(t){for(var e=i,n=0;n+1<e.length;){var r=(255&e[n])<<8|255&e[n+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(n+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),t.put(r,13),n+=2}if(n<e.length)throw"illegal char at "+(n+1)}};return o},k=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,n,r){n=n||0,r=r||t.length;for(var i=0;i<r;i+=1)e.writeByte(t[i+n])},writeString:function(t){for(var n=0;n<t.length;n+=1)e.writeByte(t.charCodeAt(n))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var n=0;n<t.length;n+=1)n>0&&(e+=","),e+=t[n];return e+="]"}};return e},x=function(t){var e=t,n=0,r=0,i=0,o={read:function(){for(;i<8;){if(n>=e.length){if(0==i)return-1;throw"unexpected end of file./"+i}var t=e.charAt(n);if(n+=1,"="==t)return i=0,-1;t.match(/^\s$/)||(r=r<<6|a(t.charCodeAt(0)),i+=6)}var o=r>>>i-8&255;return i-=8,o}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return o},A=function(t,e,n){for(var r=function(t,e){var n=t,r=e,i=new Array(t*e),o={setPixel:function(t,e,r){i[e*n+t]=r},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(r),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(r),t.writeByte(0);var e=a(2);t.writeByte(2);for(var i=0;e.length-i>255;)t.writeByte(255),t.writeBytes(e,i,255),i+=255;t.writeByte(e.length-i),t.writeBytes(e,i,e.length-i),t.writeByte(0),t.writeString(";")}},a=function(t){for(var e=1<<t,n=1+(1<<t),r=t+1,o=s(),a=0;a<e;a+=1)o.add(String.fromCharCode(a));o.add(String.fromCharCode(e)),o.add(String.fromCharCode(n));var c=k(),l=function(t){var e=t,n=0,r=0,i={write:function(t,i){if(t>>>i!=0)throw"length over";for(;n+i>=8;)e.writeByte(255&(t<<n|r)),i-=8-n,t>>>=8-n,r=0,n=0;r|=t<<n,n+=i},flush:function(){n>0&&e.writeByte(r)}};return i}(c);l.write(e,r);var u=0,d=String.fromCharCode(i[u]);for(u+=1;u<i.length;){var f=String.fromCharCode(i[u]);u+=1,o.contains(d+f)?d+=f:(l.write(o.indexOf(d),r),o.size()<4095&&(o.size()==1<<r&&(r+=1),o.add(d+f)),d=f)}return l.write(o.indexOf(d),r),l.write(n,r),l.flush(),c.toByteArray()},s=function(){var t={},e=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;t[r]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return n};return o}(t,e),i=0;i<e;i+=1)for(var o=0;o<t;o+=1)r.setPixel(o,i,n(o,i));var a=k();r.write(a);for(var s=function(){var t=0,e=0,n=0,r="",i={},o=function(t){r+=String.fromCharCode(a(63&t))},a=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return i.writeByte=function(r){for(t=t<<8|255&r,e+=8,n+=1;e>=6;)o(t>>>e-6),e-=6},i.flush=function(){if(e>0&&(o(t<<6-e),t=0,e=0),n%3!=0)for(var i=3-n%3,a=0;a<i;a+=1)r+="="},i.toString=function(){return r},i}(),c=a.toByteArray(),l=0;l<c.length;l+=1)s.writeByte(c[l]);return s.flush(),"data:image/gif;base64,"+s};return t}();a.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?e.push(192|r>>6,128|63&r):r<55296||r>=57344?e.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return e}(t)},i=[],void 0===(o="function"==typeof(r=function(){return a})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){n(78)("getOwnPropertyNames",(function(){return n(121).f}))},function(t,e,n){var r=n(10);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(133),i=n(19)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(71),i=n(19)("iterator"),o=n(133);t.exports=n(22).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(19)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(62),i=n(40),o=n(115),a={};n(26)(a,n(19)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(28),i=n(50),o=n(47)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";n(163)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},function(t,e,n){var r=n(17),i=n(11),o=n(30),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},function(t,e,n){"use strict";var r=n(8),i=n(28),o=n(34),a=n(138),s=n(46),c=n(11),l=n(84).f,u=n(83).f,d=n(20).f,f=n(165).trim,m=r.Number,g=m,p=m.prototype,v="Number"==o(n(62)(p)),h="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=h?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,c=e.slice(2),l=0,u=c.length;l<u;l++)if((a=c.charCodeAt(l))<48||a>i)return NaN;return parseInt(c,r)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof m&&(v?c((function(){p.valueOf.call(n)})):"Number"!=o(n))?a(new g(y(e)),n,m):y(e)};for(var S,E=n(12)?l(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;E.length>C;C++)i(g,S=E[C])&&!i(m,S)&&d(m,S,u(g,S));m.prototype=p,p.constructor=m,n(27)(r,"Number",m)}},function(t,e,n){var r=n(17),i=n(30),o=n(11),a=n(166),s="["+a+"]",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),u=function(t,e,n){var i={},s=o((function(){return!!a[t]()||"​"!="​"[t]()})),c=i[t]=s?e(d):a[t];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},d=u.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=u},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},,,,,,function(t,e,n){"use strict";n.r(e),n.d(e,"audicode",(function(){return D})),n.d(e,"AUDICODE_STORE_ID",(function(){return m.a})),n.d(e,"ave2cloud",(function(){return N})),n.d(e,"aveApi",(function(){return X})),n.d(e,"aveDom",(function(){return Y})),n.d(e,"carlineMapping",(function(){return it.a})),n.d(e,"cart",(function(){return _t})),n.d(e,"CONFIGURATION_STORE_ID",(function(){return kt.a})),n.d(e,"container",(function(){return Mt.a})),n.d(e,"domState",(function(){return Ut})),n.d(e,"dpuApi",(function(){return d.a})),n.d(e,"dpuConflict",(function(){return Nt.a})),n.d(e,"dpuController",(function(){return B.a})),n.d(e,"dpuModel",(function(){return zt.a})),n.d(e,"dpuSearch",(function(){return Yt})),n.d(e,"dpuTransfer",(function(){return Kt.a})),n.d(e,"equipmentSearch",(function(){return de})),n.d(e,"expertmode",(function(){return me})),n.d(e,"formCore",(function(){return Me})),n.d(e,"formField",(function(){return Ce})),n.d(e,"formGroup",(function(){return Ie})),n.d(e,"formItem",(function(){return De})),n.d(e,"formSelect",(function(){return Ue})),n.d(e,"formSimple",(function(){return Qe})),n.d(e,"hiddenVersionItems",(function(){return Ve})),n.d(e,"infobox",(function(){return We})),n.d(e,"inlinerendering",(function(){return Xe})),n.d(e,"inlinerenderingAoz",(function(){return Ye})),n.d(e,"lastConfiguration",(function(){return Je})),n.d(e,"loadingIndicator",(function(){return fn})),n.d(e,"mediaLibrary",(function(){return tn})),n.d(e,"pattern",(function(){return On})),n.d(e,"patternAudicode",(function(){return hn})),n.d(e,"patternCarlineId",(function(){return Sn})),n.d(e,"patternConfiguration",(function(){return Cn})),n.d(e,"patternLanguage",(function(){return wn})),n.d(e,"patternLeadsource",(function(){return Dn})),n.d(e,"patternPartnerId",(function(){return xn})),n.d(e,"patternPrString",(function(){return An})),n.d(e,"patternVehicleId",(function(){return In})),n.d(e,"pdfServiceLink",(function(){return Bn})),n.d(e,"preconfigurationTeaser",(function(){return Fn})),n.d(e,"preconfsTeaser",(function(){return Nn})),n.d(e,"recommendations",(function(){return Hn})),n.d(e,"renderinginjector",(function(){return Gn})),n.d(e,"scsAttributesInitial",(function(){return Yn})),n.d(e,"scsMatching",(function(){return Zn})),n.d(e,"scsMatchingBasket",(function(){return Xn})),n.d(e,"setFlagsSearch",(function(){return nr})),n.d(e,"startlayer",(function(){return tr.a})),n.d(e,"summaryTechdata",(function(){return ir})),n.d(e,"tooltip",(function(){return pr})),n.d(e,"userConfigurations",(function(){return vr.a})),n.d(e,"USERDATA_STORE_ID",(function(){return b})),n.d(e,"visializer",(function(){return yr})),n.d(e,"vtp",(function(){return wr})),n.d(e,"wallet",(function(){return kr})),n.d(e,"EngineDisclaimerLayerElement",(function(){return Ar})),n.d(e,"yourPayment",(function(){return Ir})),n.d(e,"zipDownload",(function(){return Or}));var r=n(0),i=n(7),o=n.n(i),a=n(5),s=n.n(a),c=(n(24),n(59),n(49),n(153)),l=n.n(c),u=n(1),d=n(2),f=n(18),m=n(94),g=(n(41),n(76),n(54),n(86),n(87),n(43)),p=n.n(g),v=n(3),h=n.n(v),y=n(4),S=n.n(y);n(118);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b="dbadUserdataStore",w=new(function(){function t(){return h()(this,t),t.instance||(this._initStore(),t.instance=this),t.instance}return S()(t,[{key:"_initStore",value:function(){var t={update:this._update,logout:this._logout};f.stateRegistry.addStore(b,{audicodes:null,loggedIn:null,csrfToken:null},t)}},{key:"_update",value:function(t,e){return C(C({},t),e)}},{key:"_logout",value:function(t){return C(C({},t),{},{audicodes:null,loggedIn:!1,csrfToken:null})}}]),t}());Object.freeze(w);var _={},D={__:_};_.audicode=null,_.eventBus=null,_.selectors={audicodeLink:".nm-j-audicode-link"},_.clickCallback=function(t){t.preventDefault();var e=u.dom.closest(t.target,_.selectors.audicodeLink);if("_blank"===e.getAttribute("target")){var n=window.open("","_blank");_.clickAudicodeLink(e,n)}else _.clickAudicodeLink(e,window)},_.addEvents=function(){_.eventBus.addListener(r.appEvents.CONFIG_UPDATE,_.deleteAudicode),_.eventBus.addListener(r.appEvents.LAYER_LOADED,_.onLayerLoaded),_.eventBus.addListener(r.appEvents.LAYER_LOADED,_.removeAudiCodeHref),_.eventBus.addListener(r.appEvents.PAGE_LOADED,_.removeAudiCodeHref),_.legacyEventBus.on("click",_.selectors.audicodeLink,_.clickCallback)},_.removeEvents=function(){_.eventBus.removeListener(r.appEvents.CONFIG_UPDATE,_.deleteAudicode),_.eventBus.removeListener(r.appEvents.LAYER_LOADED,_.onLayerLoaded),_.eventBus.removeListener(r.appEvents.LAYER_LOADED,_.removeAudiCodeHref),_.eventBus.removeListener(r.appEvents.PAGE_LOADED,_.removeAudiCodeHref),_.legacyEventBus.off("click",_.selectors.audicodeLink,_.clickCallback)},_.deleteAudicode=function(){_.audicode=null,f.stateRegistry.triggerAction(m.a,"invalidate"),_.eventBus.emit(r.appEvents.AUDICODE_DELETED)},_.loadAudiCodeRequest=function(){var t=o()(s.a.mark((function t(e){var n,r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.a.getDpuUrl()+"audicode?",r=new URLSearchParams({context:d.a.getContext(),subsession:d.a.getSubsessionID()||"",ids:e||d.a.getPrString()}),i=n+r.toString(),t.abrupt("return",fetch(i,{credentials:"include"}).then((function(t){if(t.ok)return t.json();throw new Error(t.statusText)})).catch((function(t){return console.log("Error fetching AudiCode - server responded with: ",t)})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_.hasAudicode=function(t){return!!t&&!!t.header&&200===t.header.statuscode&&t.audicode&&!!t.audicode.id},D.loadAudiCode=function(){return new Promise((function(t,e){_.audicode&&_.prString&&_.prString===d.a.getPrString()?(_.updateAudicodeStore(),t(_.audicode)):(_.audicode=null,_.loadAudiCodeRequest().then((function(n){_.hasAudicode(n)?(_.audicode=n.audicode.id,_.updateAudicodeStore(),n.header.subsession&&d.a.setSubsessionID(n.header.subsession),_.prString=d.a.getPrString(),_.eventBus.emit(r.appEvents.AUDICODE_SUCCESS),t(_.audicode)):(_.eventBus.emit(r.appEvents.AUDICODE_FAILED),e(new TypeError("load AudiCode failed")))}),(function(t){console.error(t),_.eventBus.emit(r.appEvents.AUDICODE_FAILED),e(new TypeError("load AudiCode error: "+t.message))})))}))},_.isAudicodeFieldOnPage=function(){return u.dom.isElement(".nm-j-audicode")},D.getAudicode=function(){return _.audicode},_.onLayerLoaded=function(){if(_.isAudicodeFieldOnPage()){var t=_.getAudicodeFromUrl();t?(_.audicode=t,_.updateAudicodeStore(),_.updateAudicodeDomElements(),_.removeAudicodeFromUrl()):D.loadAudiCode().then(_.updateAudicodeDomElements).catch((function(t){_.error(t)}))}},_.getAudicodeFromUrl=function(){return new URL(window.location.href).searchParams.get("audicode")},_.removeAudicodeFromUrl=function(){var t=new URL(window.location.href);t.searchParams.delete("audicode"),window.history.replaceState({},document.title,t.href)},_.updateAudicodeStore=function(){f.stateRegistry.triggerAction(m.a,"update",{audicode:_.audicode})},_.updateAudicodeDomElements=function(){_.audicode&&(_.generateQrCode(),u.dom.getElementsArray(".nm-j-audicode").forEach((function(t){return t.innerHTML=_.audicode})),u.dom.getElementsArray(".nm-j-audicode-show").forEach((function(t){return t.classList.remove("nm-j-audicode-failure","nm-j-audicode-loading")})),f.stateRegistry.triggerAction(b,"update",{currentAudicode:_.audicode}))},_.generateQrCode=function(){var t,e,n=u.dom.getElement(".nm-j-audicode-qrcode");u.dom.isElement(n)&&(n.innerHTML="",t=n.getAttribute("data-qr-url"),(e=new l.a(4,"L")).addData(t+_.audicode),e.make(),n.innerHTML=e.createSvgTag(4,0))},_.clickAudicodeLink=function(t,e){null===_.audicode?D.loadAudiCode().then((function(){_.setAudiCodeUrlAsLocation(t,e)})).catch((function(t){_.error(t)})):_.setAudiCodeUrlAsLocation(t,e)},_.setAudiCodeUrlAsLocation=function(t,e){var n;n=(n=t.getAttribute("data-link-pattern")).replace("{{=audicode}}",_.audicode),e.location.href=n},_.removeAudiCodeHref=function(){document.querySelectorAll(_.selectors.audicodeLink).forEach((function(t){t.removeAttribute("href")}))},_.error=function(t){u.dom.getElement(".nm-j-audicode-show").classList.add("nm-j-audicode-failure"),console.log(t)},D.initialize=function(t){_.eventBus=t,_.legacyEventBus=u.dom.getEventDelegate("body"),_.removeAudiCodeHref(),_.addEvents()};n(33);var k=n(14),x=n.n(k),A=n(21),L=n.n(A),I=n(15),T=n.n(I),O=n(16),P=n.n(O),j=n(6),R=n.n(j),B=(n(66),n(39));function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}var F=function(t){T()(r,t);var e,n=M(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,r),(t=n.call(this))._closeLayer=t._closeLayer.bind(L()(t));var i=e.dataset.configuration["audicode-rescue-info"];return t.data={data:e.dataset,whatIsChanged:t._getIsWhatChanged(e.dataset.rescueMessages),pdfLink:t._getPdfLink(i)},t}return S()(r,[{key:"connectedCallback",value:function(){this._render(),this.addEvents(),B.a.resetAudicodeRescueInfo()}},{key:"addEvents",value:function(){var t=this,e=this.querySelectorAll(".j-close");x()(e).map((function(e){return e.addEventListener("click",t._closeLayer)}))}},{key:"_getIsWhatChanged",value:function(t){return t.join(", ")}},{key:"_getPdfLink",value:function(t){return SETUPS.get("scope.nemo.audicode.not_valid_pdflink")?SETUPS.get("nemo.pdf.url")+"/audicode/"+t.audicode:""}},{key:"_closeLayer",value:function(t){t&&(t.preventDefault(),t.stopPropagation()),this._triggerClose()}},{key:"_render",value:function(){this.innerHTML=u.template.render('\n{{?!!it.data.configuration.extColorCode && !!it.data.configuration.extColorCode.selected}}\n\t{{var selected = it.data.configuration.extColorCode.selected;}}\n\t{{var backgroundcolor = \'extcolor--\' + selected;}}\n\t{{var textcolor = \'extcolor-text--\' + selected;}}\n{{??}}\n\t{{var selected = "";}}\n\t{{var backgroundcolor = "";}}\n\t{{var textcolor = "";}}\n{{?}}\n<div class="rescue-audicode">\n\t<div class="rescue-audi__close">\n\t\t<div class="nm-layer__close-button j-close" style="display: inline-flex;">\n\t\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t\t<use xlink:href="{{=SETUPS.get(\'coreci.url.assets\')}}/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"></use>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class="{{=textcolor}}">\n\t\t<div class="rescue-audicode__text-container {{=backgroundcolor}}">\n\t\t\t<p class="rescue-audicode__audicode audi-copy-s">{{=window.i18n[\'audicode.rescue.your_audicode\']}} {{=it.data.configuration[\'audicode-rescue-info\'].audicode}}</p>\n\t\t\t<h3 class="rescue-audicode__carline audi-headline-order-3">{{=it.data.configuration.carlineName}}</h3>\n\t\t\t<p class="rescue-audicode__description audi-copy-s">{{=it.data.configuration.description}}</p>\n\t\t\t<p class="rescue-audicode__price audi-copy-m">{{=it.data.configuration.prices.total}}</p>\n\t\t</div>\n\t\t<div class="rescue-audicode__image-container">\n\t\t\t<div class="rescue-audicode__image-background {{=backgroundcolor}}"></div>\n\t\t\t<div class="rescue-audicode__image-picture">\n                {{?!!it.data.images && it.data.images[\'exterior\'] && it.data.images[\'exterior\'][\'flyout\']}}\n                    <picture>\n                        <source media="(max-width: 427px)" srcset="{{=SETUPS.get(\'nemo.url.mediaservice\')}}{{=it.data.images[\'exterior\'][\'flyout\']}}?imwidth=470">\n                        <img class="rescue-audicode__image" src="{{=SETUPS.get(\'nemo.url.mediaservice\')}}{{=it.data.images[\'exterior\'][\'flyout\']}}?imwidth=654">\n                    </picture>\n                {{??}}\n                    <img class="rescue-audicode__image" src="{{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-audicode-flyout.png"}}" alt="Fallback Image">\n                {{?}}\n            </div>\n\t\t</div>\n\t</div>\n\n\t<div class="rescue-audicode__text-options-container">\n\t\t<p class="rescue-audicode__options_text audi-copy-m">{{=window.i18n[\'audicode.rescue.cant_load_audicode\']}}</p>\n\t\t<p class="rescue-audicode__options-changed audi-copy-s">\n\t\t\t{{=window.i18n[\'audicode.rescue.alternative_configuration\']}}<br/>\n\t\t\t{{=it.whatIsChanged}}\n\t\t</p>\n\n\t\t<a href="#" class="rescue-audicode__options-load-configuration audi-link-m audi-link--arrow j-close">{{=window.i18n[\'audicode.rescue.load_alternative_configuration\']}}</a><br />\n\t\t{{?it.pdfLink}}\n\t\t\t<a href="{{=it.pdfLink}}" class="rescue-audicode__options-pdf audi-link-m audi-link--arrow">{{=window.i18n[\'audicode.rescue.pdf\']}}</a>\n\t\t{{?}}\n\n\t\t{{? !SETUPS.get(\'scope.nemo.hide.consumption-entries\')}}\n\t\t\t<div class="rescue-audicode__disclaimer-entries audi-copy-s">\n\t\t\t\t{{? it.data.configuration.techdata && (it.data.configuration.techdata[\'consumption-combined\'] || it.data.configuration.techdata[\'carbon-dioxide-emissions\'] || it.data.configuration.techdata[\'efficiency-class\'])}}\n\t\t\t\t\t{{? it.data.configuration.techdata[\'consumption-combined\']}}\n\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.consumption-combined\']}}*:</dt>\n\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'consumption-combined\']}}</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? it.data.configuration.techdata[\'carbon-dioxide-emissions\']}}\n\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.emission-combined\']}}*:</dt>\n\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'carbon-dioxide-emissions\']}}</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.eec-entry\')}}\n\t\t\t\t\t\t{{? it.data.configuration.techdata[\'efficiency-class\']}}\n\t\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.efficiency-class\']}}:</dt>\n\t\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'efficiency-class\']}}</dd>\n\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t{{?}}\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t{{?}}\n\n\t</div>\n</div>',this.data)}}],[{key:"type",get:function(){return"AudicodeRescueLayerElement"}},{key:"getContent",value:(e=o()(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new r(e));case 1:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}]),r}(r.ModalLayerContentBase);r.modalLayer.registerLayerType(F),void 0===window.customElements.get("audi-audicode-rescue-layer-element")&&window.customElements.define("audi-audicode-rescue-layer-element",F);n(48);var U={},N={__:U};U.isAve2CloudAvailable=!1,U.containerId="avecanvas";var z=function(){if(console.log("AVE2Cloud updateStreamResolution"),U.controllerFactory){var t=document.getElementById(U.containerId);U.controllerFactory.getUIAndApiController((function(e){e.updateSize(null,t.clientHeight)}))}},Q=function(){window.addEventListener("resize",z)},H=function(){console.log("AVE2Cloud closeLayerHandler"),U.controllerFactory&&U.controllerFactory.getUIAndApiController((function(t){t.close()})),window.removeEventListener("resize",z)},V=function(){U.controllerFactory=new Ave2CloudApplication.ControllerFactory,U.controllerFactory.getUIAndApiController((function(t,e){e.getFreeInstances().then((function(t){t.freeInstances>=1?(U.isAve2CloudAvailable=!0,console.log("AVE2Cloud: freeInstances: ",t.freeInstances)):console.log("AVE2Cloud: No free sessions")})).catch((function(t){console.error(t,"getFreeInstances")}))}))},q=function(){console.log("AVE2Cloud connectToStream");var t=document.getElementById(U.containerId);t.classList.add("ave2cloud-container");var e={connectionParameters:{protocol:document.location.protocol.indexOf("https")>-1?"https":"http",customer:SETUPS.get("ave3d.customer")||"audi",environment:SETUPS.get("ave3d.env")||"live"},car:{manufacturer:"audi",model:d.a.getCarline(),year:d.a.getModelYear()},consumeMouseScrollEvents:!0,resolution:{x:t.clientWidth,y:t.clientHeight},setupCamera:"MRV1",setupPrCodes:d.a.getAveString().split(","),market:SETUPS.get("ave2cloud.market"),service:"web"};console.log("AVE2Cloud webSiteCar",JSON.stringify(e)),U.controllerFactory.getUIAndApiController((function(n,r){n.connect(e,U.containerId),n.on((function(t){console.log(t,"view-event"),"AVEConnected"===t&&r.loadCar(e)})),r.on((function(e){console.log(e.message,"api-event"),"LoadCarFinish"===e.message&&(n.updateSize(null,t.clientHeight),t.classList.add("ave2cloud-container--ready"))}))}))},W=function(){U.eventBus.on(r.appEvents.CARINFO_LOAD_COMPLETE,V),U.eventBus.on(r.appEvents.CONFIG_UPDATE,V),U.eventBus.on("AVE2CLOUD.CONTAINER.READY",q),U.eventBus.on(r.appEvents.RENDERINGLAYER_LOADED,Q),U.eventBus.on("jslayer.close",H)};N.isAve2CloudAvailable=function(){return U.isAve2CloudAvailable},N.isAve2CloudEnabled=function(){return SETUPS.get("ave2cloud.enabled")},N.initialize=function(t){if(U.eventBus=t,N.isAve2CloudEnabled()){console.log("AVE2Cloud initialize");var e=SETUPS.get("ave2cloud.url");u.jsLoader.loadURL(e).then(W)}};var G={},Y={__:G};window.i18n=window.i18n||{},G.optionMappings={Trunk:window.i18n["rendering-layer.option-trunk"],Doors:window.i18n["rendering-layer.option-doors"],MMI:window.i18n["rendering-layer.option-mmi"],RTTVoid:window.i18n["rendering-layer.option-env-grey"],WhiteVoid:window.i18n["rendering-layer.option-env-white"],Tunnel_Env:window.i18n["rendering-layer.option-Tunnel_Env"],Iceland_Void:window.i18n["rendering-layer.option-Iceland_Void"],SoftTop:window.i18n["rendering-layer.option-SoftTop"]},G.oDefaults={sClassHidden:"nm-hidden",sClassActive:"nm-active",sClassSelectorClosed:"nm-icon-expand-white",sClassSelectorOpen:"nm-icon-collapse-white",sSelectorOptionsSelectorWrapper:".nm-ave-animation-selector-wrapper",sSelectorOptionsSelector:".nm-ave-animation-selector",sSelectorActive3dContainer:".nm-md-ave-container",sSelectorStreamWrapper:"#streamWrapper"},Y.renderAnimationControls=function(t){var e,n,r="",i=Object.keys(G.optionMappings);for(e=0,n=i.length;e<n;e++)t.indexOf(i[e])>-1&&(r+=G.renderAnimationOption(i[e],G.optionMappings[i[e]]));return r},Y.renderEnvironmentControls=function(t){var e,n,r="",i=Object.keys(G.optionMappings);for(e=0,n=i.length;e<n;e++)t.indexOf(i[e])>-1&&(r+=G.renderEnvironmentOption(i[e],G.optionMappings[i[e]]));return r},Y.enableOptions=function(){u.dom.getElement(G.oDefaults.sSelectorOptionsSelector).classList.remove(G.oDefaults.sClassHidden),u.dom.getEventDelegate("body").off("click",G.oDefaults.sSelectorOptionsSelectorWrapper,G.handlerAnimationSelectorClick),u.dom.getEventDelegate("body").on("click",G.oDefaults.sSelectorOptionsSelectorWrapper,G.handlerAnimationSelectorClick)},G.renderAnimationOption=function(t,e){return'<li class="nm-avectrl-animation animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-animation="'+t+'">'+e+"</li>"},G.renderEnvironmentOption=function(t,e){return'<li class="nm-avectrl-environment animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-environment="'+t+'">'+e+"</li>"},G.handlerAnimationSelectorClick=function(t){var e=u.dom.getElement(G.oDefaults.sSelectorOptionsSelector),n=u.dom.getElement(G.oDefaults.sSelectorOptionsSelectorWrapper);t.preventDefault(),e.classList.contains(G.oDefaults.sClassSelectorClosed)?(e.classList.remove(G.oDefaults.sClassSelectorClosed),e.classList.add(G.oDefaults.sClassSelectorOpen),n.classList.add("active")):(e.classList.remove(G.oDefaults.sClassSelectorOpen),e.classList.add(G.oDefaults.sClassSelectorClosed),n.classList.remove("active"))},G.stopWheel=function(t){var e;(e=t||window.event)&&e.preventDefault&&e.preventDefault(),e&&(e.returnValue=!1)},G.catchScrollWheel=function(){document.addEventListener("mousewheel",G.stopWheel),document.addEventListener("DOMMouseScroll",G.stopWheel)},G.releaseScrollWheel=function(){document.removeEventListener("mousewheel",G.stopWheel),document.removeEventListener("DOMMouseScroll",G.stopWheel)},Y.activateAveCanvas=function(t){console.log("ave-dom: activate ave canvas");var e=document.getElementById(t);if(u.dom.isElement(e)){var n=document.createElement("div");n.innerHTML=u.template.render('<div class="nm-ave-animation-selector-wrapper">\n\t<div class="nm-ave-animation-selector nm-el-btn nm-el-btn-01 nm-icon-settings nm-icon-expand-white nm-hidden">\n\t\t<div class="options-text">{{=window.i18n[\'rendering-layer.options\']}}</div>\n\t</div>\n\t<ul class="nm-ave-animation-selection">\n\t\t<li class="nm-button-close">\n\t\t\t<svg class="nm-icon-cancel">\n\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel.svg#nm-icon-cancel"}}></use>\n\t\t\t</svg>\n\t\t</li>\n\t</ul>\n</div>',{}),e.insertBefore(n.firstChild,e.firstChild),u.dom.getEventDelegate("body").on("mouseover","#"+t,G.catchScrollWheel),u.dom.getEventDelegate("body").on("mouseout","#"+t,G.releaseScrollWheel)}},Y.resizeStreamWrapper=function(){console.log("resizeStream");var t=u.dom.getElement(G.oDefaults.sSelectorStreamWrapper);u.dom.isElement(t)&&(t.style.width="100%",t.style.height="100%",t.style.position="absolute")},Y.moveAveCanvas=function(t,e){var n=document.getElementById(t),r=document.getElementById(e),i=u.dom.getElement(G.oDefaults.sSelectorOptionsSelectorWrapper,n);console.log("ave-dom: move ave canvas"),u.dom.isElement(n)&&u.dom.isElement(i)&&u.dom.isElement(r)&&(n.classList.remove(G.oDefaults.sClassActive),r.insertBefore(i,r.firstChild),u.dom.getEventDelegate("body").on("mouseover","#"+e,G.catchScrollWheel),u.dom.getEventDelegate("body").on("mouseout","#"+e,G.releaseScrollWheel))},Y.deactivateAveCanvas=function(t){console.info("ave-dom: deactivate ave canvas");var e=document.getElementById(t);if(u.dom.isElement(e)){for(;e.hasChildNodes();)e.removeChild(e.firstChild);u.dom.getEventDelegate("body").off("mouseover","#"+t,G.catchScrollWheel),u.dom.getEventDelegate("body").off("mouseout","#"+t,G.releaseScrollWheel)}};var K={},X={__:K};function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function Z(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}K.oDefaults={sSelectorAnimationListSelector:".nm-ave-animation-selection"},K.debugEnabled=!0,K.zlLoaded=!1,K.zlValidated=!1,K.zlboltURL="",K.cameraMappings={closeup_lights:"FrontRightShare",closeup_wheels:"Rims",dashboard:"Interior",exterior:"MRVSide",exterior_back:"MRV4",exterior_front:"MRV1",exterior_straight_back:"MRV5",exterior_straight_front:"MRV6",interior:"InteriorSide_L0L",rearseat:"Interior_Rear_View"},K.defaultCamera="MRV1",K.zlGetCustomer=function(){var t=SETUPS.get("ave3d.customer");return K.zlLoaded||K.debug("zlbolt not yet loaded"),K.debug("zlbolt customer = "+t),t},K.zlGetEnv=function(){var t=SETUPS.get("ave3d.env");return K.zlLoaded||K.debug("zlbolt not yet loaded"),K.debug("zlbolt env = "+t),t},K.zlValidate=function(){if("undefined"!=typeof zlbolt&&!1===K.zlValidated){var t=K.buildUpValidateObject();zlbolt.validate(t,(function(t,e){e&&"valid"===e.status?(K.zlValidated=!0,K.eventBus.emit(r.appEvents.AVE_AVAILABLE)):e&&e.reason?K.debug("zl validation failed: "+e.reason):K.debug("zl validation failed")}))}else K.debug("failed zlbolt.validate")},K.zlSetReady=function(){K.debug("zlbolt loaded"),K.zlLoaded=!0,K.zlValidate()},K.prepareZLboltURL=function(){var t=SETUPS.get("ave3d.url");K.debug("zlbolt url = "+t),K.zlboltURL=t},K.zlSetAveString=function(t){K.zlLoaded?zlbolt.setPrCodes(t,(function(t){K.debug("set prcodes with msg: ",t)})):K.debug("zlbolt not yet loaded")},K.zlDisconnect=function(t,e){if(K.zlLoaded&&"undefined"!=typeof zlbolt&&!0===K.isConnected){K.debug("disconnect from zlbolt");try{zlbolt.disconnect((function(){t(e)}))}catch(n){K.debug("zl exception on disconnect: "+n),t(e)}K.isConnected=!1}else t(e)},K.zlActivateCamera=function(t){var e=K.cameraMappings[t];zlbolt.switchCamera(e,(function(t){K.debug("switched camera to "+e+" with result",t)}))},K.zlSetConnectCallbacks=function(t,e){zlbolt.isSupported((function(n,r){if(n||!r)return K.debug("zl this browser is not supported"),!1;zlbolt.connect(K.buildUpConnectObject(t,e),(function(t){t?(K.debug("zlbolt connect exited in error state: ",t),K.isConnected=!1):(K.debug("zlbolt connected"),K.isConnected=!0)}))})),zlbolt.onStreamReady=function(){!0===K.streamActive&&K.debug("stream already active - possible side effect"),K.streamActive=!0,K.isConnected=!0,K.eventBus.on(r.appEvents.CONFIG_UPDATE,K.handlerConfigUpdated),K.zlBuildOptionsControl(),zlbolt.enableMouseTracking(),window.addEventListener("resize",Y.resizeStreamWrapper),K.dispatchStreamReadyEvent(),Y.resizeStreamWrapper()},zlbolt.onMouseUp=function(t){K.debug("mouse up with x:"+t.x+" and y:"+t.y)},zlbolt.onError=function(t){K.debug("zlbolt Error: ",t)},zlbolt.onStreamDisconnect=function(){K.debug("zlbolt StreamDisconnect"),K.eventBus.off(r.appEvents.CONFIG_UPDATE,K.handlerConfigUpdated),window.removeEventListener("resize",Y.resizeStreamWrapper),K.streamActive=!1},zlbolt.onClose=function(){K.debug("zlbolt stream close"),K.streamActive=!1}},K.zlConnect=function(t,e){return K.zlLoaded?"undefined"==typeof zlbolt?(K.debug("failed zlConnect"),!1):(K.debug("zlbolt StreamReady"),void K.zlSetConnectCallbacks(t,e)):(K.debug("zlbolt not yet loaded"),!1)},K.zlBuildOptionsControl=function(){K.debug("build options control"),zlbolt.enumerateAnimations((function(t){var e=u.dom.getElement(K.oDefaults.sSelectorAnimationListSelector),n=document.createElement("div");if(u.dom.isElement(e))for(n.innerHTML=Y.renderAnimationControls(t.animations);n.firstChild;)e.appendChild(n.firstChild);u.dom.getEventDelegate("body").on("click",".nm-avectrl-animation",K.zlTriggerAnimation)})),zlbolt.enumerateEnvironments((function(t){var e=u.dom.getElement(K.oDefaults.sSelectorAnimationListSelector),n=document.createElement("div");if(u.dom.isElement(e)&&t.environments.length>1){for(n.innerHTML=Y.renderEnvironmentControls(t.environments);n.firstChild;)e.appendChild(n.firstChild);u.dom.getEventDelegate("body").on("click",".nm-avectrl-environment",K.zlTriggerEnvironmentChange)}})),Y.enableOptions()},K.zlTriggerAnimation=function(t){var e=u.dom.closest(t.target,".nm-avectrl-animation").getAttribute("data-animation");K.debug("trigger animation "+e),zlbolt.triggerAnimation(e,(function(t){K.debug("triggered "+e+" with result",t)}))},K.zlTriggerEnvironmentChange=function(t){var e=u.dom.closest(t.target,".nm-avectrl-environment").getAttribute("data-environment");K.debug("trigger environment change "+e),zlbolt.switchEnvironment(e,(function(t){K.debug("triggered "+e+" with result",t)}))},K.handlerConfigUpdated=function(){K.zlSetAveString(d.a.getAveString().split(","))},K.mapViewPerspeciveToCamera=function(t){return t in K.cameraMappings?K.cameraMappings[t]:(K.debug("falling back to default camera from "+t),K.defaultCamera)},K.getActiveProtocol=function(){return document.location.protocol.indexOf("https")>-1?"https":"http"},K.buildUpValidateObject=function(){return{connectionParameters:{protocol:K.getActiveProtocol(),customer:K.zlGetCustomer(),environment:K.zlGetEnv()},car:{manufacturer:"audi",model:d.a.getCarline(),year:d.a.getModelYear()},consumeMouseScrollEvents:!0}},K.buildUpConnectObject=function(t,e){var n=d.a.getAveString(),r=K.buildUpValidateObject();return r.resolution={x:1112,y:668},r.parent=t,r.setupCamera=K.mapViewPerspeciveToCamera(e),n&&(r.setupPrCodes=n.split(",")),r},K.dispatchStreamReadyEvent=function(){K.eventBus.emit(r.appEvents.AVE_STREAM_READY);var t=new CustomEvent("ave-stream-ready-tracking",{});document.dispatchEvent(t)},K.debug=function(t){K.debugEnabled&&console.log("ave-api: "+t)},X.isActiveCarline=function(){return"1"===SETUPS.get("scope.ave3d")&&"true"===SETUPS.get("ave3d.aveEnabled")},X.showPerspective=function(t){K.zlActivateCamera(t)},X.isAveAvailable=function(){return K.zlValidated},X.deactivate=function(t){K.zlDisconnect(Y.deactivateAveCanvas,t)},X.activateAVE=function(t,e){Y.activateAveCanvas(t),K.zlConnect(t,e)},X.moveAVE=function(t,e,n){K.debug("moving from "+t+" to "+e),zlbolt.moveStream(e),Y.moveAveCanvas(t,e),void 0!==n&&!1!==n&&K.zlActivateCamera(n)},X.initialize=function(t){K.eventBus=t,X.isActiveCarline()&&(K.prepareZLboltURL(),u.jsLoader.loadURL(K.zlboltURL).then(K.zlSetReady))},Object.setPrototypeOf(Z.prototype,HTMLElement.prototype),Object.setPrototypeOf(Z,HTMLElement);var tt=function(t){T()(n,t);var e=J(n);function n(){return h()(this,n),e.call(this)}return S()(n,[{key:"connectedCallback",value:function(){this.basketContainer=this.querySelector(".nm-basket-container"),this.footerCheck=this.parentNode.querySelector(".nm-basket-scroll-check-bottom"),this.topCheck=x()(document.querySelectorAll(".nm-navigation-scroll-check")).pop(),this.contentContainer=this.parentNode.querySelector(".nm-content"),this.isStickyBottom=!1,this.addEvents(),this.setupPageForBasket(),this.observerTopScrollPosition=this.observeTopScrollPosition(),this.observerBottomScrollPosition=this.observeBottomScrollPosition(),this.observerMatchingWidget=this.observeMatchingWidget()}},{key:"disconnectedCallback",value:function(){this.removeEvents(),this.observerTopScrollPosition.disconnect(),this.observerBottomScrollPosition.disconnect(),this.observerMatchingWidget.disconnect()}},{key:"addEvents",value:function(){var t=this;this.basketContainer.addEventListener("transitionend",u.dom.throttle((function(){return t.setupPageForBasket()}),500)),window.addEventListener("resize",(function(){return t.setupPageForBasket()}))}},{key:"removeEvents",value:function(){var t=this;this.basketContainer.removeEventListener("transitionend",u.dom.throttle((function(){return t.setupPageForBasket()}),500)),window.removeEventListener("resize",(function(){return t.setupPageForBasket()}))}},{key:"setupPageForBasket",value:function(){var t=this.getBasketHeight();this.contentContainer.style.minHeight=t+"px",this.footerCheck.style.bottom=t+"px",this.isStickable=window.innerHeight>t,this.checkBottomPosition()}},{key:"observeBottomScrollPosition",value:function(){var t=this,e=new IntersectionObserver((function(e){return e.forEach((function(e){return t.checkBottomPosition(e)}))}),{threshold:[0,1]});return e.observe(this.footerCheck),e}},{key:"observeTopScrollPosition",value:function(){var t=this,e=new IntersectionObserver((function(e){return e.forEach((function(e){return t.checkTopPosition(e)}))}),{threshold:[0,1]});return e.observe(this.topCheck),e}},{key:"observeMatchingWidget",value:function(){var t=this,e=new MutationObserver((function(){t.setupPageForBasket()}));return e.observe(this,{childList:!0,subtree:!0}),e}},{key:"checkTopPosition",value:function(t){var e=t||{boundingClientRect:this.topCheck.getBoundingClientRect(),isIntersecting:!1};this.isStickyTop=(this.isStickable||!this.isFullBasketShown)&&!e.isIntersecting&&e.boundingClientRect.top.toFixed(0)<=0}},{key:"checkBottomPosition",value:function(t){var e=t||{boundingClientRect:this.footerCheck.getBoundingClientRect(),isIntersecting:!1};this.isStickyBottom=this.isStickable&&this.isFullBasketShown&&!e.isIntersecting&&e.boundingClientRect.top.toFixed(0)<=0}},{key:"getBasketHeight",value:function(){this.classList.add("nm-basket-superwrap-hidden-measure");var t=this.basketContainer.clientHeight;return this.classList.remove("nm-basket-superwrap-hidden-measure"),t+this.getBasketOffset()}},{key:"getBasketOffset",value:function(){var t=this.isFullBasketShown?54:0,e=document.querySelector(".nm-nav-wrap"),n=e?e.clientHeight:0,r=document.querySelector(".nm-module-current-consumption");return t+n+(r?r.clientHeight:0)}},{key:"isStickyBottom",set:function(t){t?this.classList.add("nm-basket-sticky-bottom"):this.classList.remove("nm-basket-sticky-bottom")}},{key:"isStickyTop",get:function(){return this.classList.contains("nm-basket-sticky-top")},set:function(t){t?this.classList.add("nm-basket-sticky-top"):this.classList.remove("nm-basket-sticky-top"),t&&!this.isFullBasketShown?this.style.top=this.getBasketOffset()+"px":this.style.top=""}},{key:"isStickable",get:function(){return"true"===this.getAttribute("data-is-stickable")},set:function(t){this.setAttribute("data-is-stickable",t)}},{key:"isFullBasketShown",get:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)>=1100}}]),n}(Z);function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function nt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-basket")||window.customElements.define("audi-configurator-basket",tt),Object.setPrototypeOf(nt.prototype,HTMLElement.prototype),Object.setPrototypeOf(nt,HTMLElement);var rt=function(t){T()(n,t);var e=et(n);function n(){return h()(this,n),e.call(this)}return S()(n,[{key:"connectedCallback",value:function(){var t=this;this.isAudicodeParamInUrl()?this.injectCompareElement():D.loadAudiCode().then((function(e){t.updateURL(e)})).then((function(){t.injectCompareElement()}))}},{key:"isAudicodeParamInUrl",value:function(){return new URL(window.location.href).searchParams.has("ac")}},{key:"updateURL",value:function(t){var e=new URL(window.location.href);e.searchParams.set("ac",t),window.history.replaceState({path:e.href},"",e.href)}},{key:"injectCompareElement",value:function(){var t=document.createElement("car-compare");this.appendChild(t)}}]),n}(nt);void 0===window.customElements.get("audi-configurator-car-compare")&&window.customElements.define("audi-configurator-car-compare",rt);var it=n(108),ot={selectedItemID:null},at={__:ot};ot.oDefaults={selectorCarstoreDeleteSection:".nm-j-carstore-delete-section",selectorAbortButton:".nm-j-abort-button",selectorDeleteButton:".nm-j-delete-button",selectorCarDetails:".nm-j-carstore-item-details",selectorForm:".nm-j-carstore-modify",selectorCarstoreItem:".nm-module-carstore .nm-j-carstore-item",selectorCarstoreList:".nm-j-carstore-list"},ot.loadAgents=function(t){t.forEach((function(t){(new Image).src=t}))},ot.addEvents=function(){ot.legacyEventBus.on("submit",ot.oDefaults.selectorForm,ot.handleFormSubmit),ot.eventBus.on(r.appEvents.FORM_FINISHED,ot.handleFormFinished),ot.eventBus.on(r.appEvents.FORM_ERROR,ot.handlePossibleLoginStateChange),ot.eventBus.on(r.appEvents.MYAUDI_LOGIN,ot.list),ot.eventBus.on(r.appEvents.LAYER_LOADED,ot.list)},ot.triggerLoginStateEvent=function(t){if(t){var e=d.a.getVisitorId();e?ot.eventBus.emit(r.appEvents.MYAUDI_LOGIN,e):ot.eventBus.emit(r.appEvents.MYAUDI_LOGIN)}else ot.eventBus.emit(r.appEvents.MYAUDI_LOGOUT);ot.updateLoginState()},ot.handlePossibleLoginStateChange=function(t){t&&t.response&&t.response.header&&t.response.header["logged-in"]&&t.response.header.subsession&&d.a.setLogin(t.response.header["logged-in"],t.response.header.subsession).then(ot.triggerLoginStateEvent).catch((function(t){ot.triggerErrorLayer(t,"error.message.LOGIN_FAILED")}))},ot.updateLoginState=function(){var t=u.dom.getElement("body");d.a.isLoggedIn()?t.classList.add("nm-logged-in"):t.classList.remove("nm-logged-in")},ot.handleFormSubmit=function(t){t.preventDefault();ot.selectedItemID=this.getAttribute("data-form-id");var e=u.dom.getElement("#carstore-select-"+ot.selectedItemID),n=e&&e.options?e.options[e.selectedIndex].value:"none";"configuration-delete"===n?ot.deleteCarstoreItem():"configuration-load"===n&&ot.loadCarstoreItem()},ot.renderCarstoreList=function(t){var e=u.dom.getElement(ot.oDefaults.selectorCarstoreList);e.innerHTML=ot.renderListTemplate(t.carstore),e.classList.remove("nm-loader")},ot.renderListTemplate=function(t){return t.list?(t.altImage=d.a.getAltImagePath("selection-compare","none"),u.template.render('\n<div class="nm-module nm-module-carstore nm-carstore" data-module="carstore">\n\t<div class="nm-3col">\n\t\t<h2 class="nm-headline-medium nm-carstore-headline">{{=window.i18n[\'carstore-layer.saved-slots\']}}</h2>\n\t\t<p class="nm-text-large">{{=window.i18n[\'carstore-layer.manage-slots\']}}</p>\n\t\t<ul class="nm-carstore-saved-items">\n\t\t\t{{~ it.list :value }}\n\t\t\t\t<li class="nm-carstore-item nm-j-carstore-item" data-item-position="{{=value.position}}">\n\t\t\t\t\t<span class="nm-carstore-item-position nm-headline-teaser">{{=value.position}}</span>\n\t\t\t\t\t<img class="nm-carstore-item-image" src="{{? !!value[\'exterior-image\']}}{{=value[\'exterior-image\']}}?alt={{?}}{{=it.altImage}}" alt="{{=value.name}}" />\n\t\t\t\t\t<div class="nm-carstore-item-content">\n\t\t\t\t\t\t<div class="nm-carstore-item-details nm-j-carstore-item-details">\n\t\t\t\t\t\t\t{{? !!value.name}}\n\t\t\t\t\t\t\t\t<strong class="nm-carstore-detail nm-headline-teaser">{{=value.name}}</strong>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.shoppingCartName}}\n\t\t\t\t\t\t\t\t<p class="nm-carstore-detail nm-text-block">{{=value.shoppingCartName}}<br />\n\t\t\t\t\t\t\t\t\t{{? !!value.powersAndUnits}}\n\t\t\t\t\t\t\t\t\t\t{{=value.powersAndUnits}}\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.price && value.valid !== false}}\n\t\t\t\t\t\t\t\t<strong class="nm-carstore-detail nm-price nm-headline-teaser">{{=value.price}}</strong>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.audicode}}\n\t\t\t\t\t\t\t\t<p class="nm-carstore-detail nm-audicode nm-text-block">{{=window.i18n[\'audicode-label\']}}: {{=value.audicode}}</p>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<form class="nm-carstore-modify-section nm-j-carstore-modify" data-form-id="{{=value.position}}" action="#">\n\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t<select id="carstore-select-{{=value.position}}" class="nm-carstore-modify-select nm-j-carstore-modify-select">\n\t\t\t\t\t\t\t\t\t{{? value.valid !== false}}\n\t\t\t\t\t\t\t\t\t\t<option value="configuration-load">{{=window.i18n[\'carstore-layer.load-slot\']}}</option>\n\t\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t\t<option>{{=window.i18n[\'carstore-layer.invalid-slot\']}}</option>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t<option value="configuration-delete">{{=window.i18n[\'delete-configuration-label\']}}</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t<input type="hidden" name="carstore-position" value="{{=value.position}}">\n\t\t\t\t\t\t\t\t<button class="nm-el-btn nm-el-btn-04 nm-el-btn-ast nm-j-carstore-submit" type="submit">submit</button>\n\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t<div class="nm-carstore-delete-section nm-j-carstore-delete-section nm-hidden">\n\t\t\t\t\t\t\t<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'carstore-layer.delete-slot\']}}</strong>\n\t\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-03">{{=window.i18n[\'carstore-layer.delete-dialog\']}}</p>\n\t\t\t\t\t\t\t<div class="nm-modify-buttons">\n\t\t\t\t\t\t\t\t<a class="nm-carstore-button nm-el-btn nm-el-btn-01 nm-j-abort-button" href="#">{{=window.i18n[\'abort-label\']}}</a> \n\t\t\t\t\t\t\t\t<a class="nm-carstore-button nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-j-delete-button" href="#">{{=window.i18n[\'delete-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t</ul>\n\t</div>\n</div>',t)):t.statuscode&&800===t.statuscode?u.template.render("\n\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.error-loading-slots']}}</p>\n",{}):u.template.render("\n\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.no-slots-available']}}</p>\n",{})},ot.handleFormFinished=function(t){"login"===t.id?ot.handleLoginFormFinished(t):"carstore"===t.id&&ot.handleSaveFormFinished()},ot.handleLoginFormFinished=function(t){ot.loadAgents(t.response.login.agents.standard),ot.loadAgents(t.response.login.agents.secure),ot.handlePossibleLoginStateChange(t)},ot.handleSaveFormFinished=function(){var t=u.dom.getElement(".nm-carstore-save .nm-j-carstore-save");t.classList.remove("nm-j-carstore-save"),t.classList.add("nm-j-carstore-list"),t.innerHTML="",ot.list("carstore")},ot.list=function(t){ot.updateLoginState(),d.a.isLoggedIn()&&ot.isCarstoreListOpen()&&(ot.showLoader(),B.a.listCarstoreItems().then((function(e){if(ot.renderCarstoreList(e),t&&"carstore"===t){var n=u.dom.getElement(".nm-j-audicode").innerText;ot.eventBus.emit(r.appEvents.CONFIG_SAVED,n)}})).catch((function(t){ot.triggerErrorLayer(t,"carstore-layer.error-loading-slots")})).then((function(){ot.hideLoader()})))},ot.isCarstoreListOpen=function(){return u.dom.getElementsArray(ot.oDefaults.selectorCarstoreList).length>0},ot.showLoader=function(){u.dom.getElementsArray(ot.oDefaults.selectorCarstoreList).forEach((function(t){t.innerHTML="",t.classList.add("nm-loader")}))},ot.hideLoader=function(){u.dom.getElementsArray(ot.oDefaults.selectorCarstoreList).forEach((function(t){t.classList.remove("nm-loader")}))},ot.deleteCarstoreItem=function(){ot.toggleDeleteSectionVisibiblity(!0),ot.addDeleteButtonEvents()},ot.handleDeleteAbort=function(t){return t.preventDefault(),ot.toggleDeleteSectionVisibiblity(!1),ot.removeDeleteButtonEvents(),ot.selectedItemID=null,!1},ot.handleDeleteSubmit=function(t){return t.preventDefault(),ot.selectedItemID&&B.a.deleteCarstoreItem(ot.selectedItemID).then((function(t){ot.list(t)})).catch((function(t){ot.triggerErrorLayer(t,"carstore-layer.error-deleting-slot")})),ot.removeDeleteButtonEvents(),ot.selectedItemID=null,!1},ot.toggleDeleteSectionVisibiblity=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=ot.oDefaults.selectorCarstoreItem+"[data-item-position='"+ot.selectedItemID+"'] ";u.dom.getElement(e+ot.oDefaults.selectorCarstoreDeleteSection).classList.toggle("nm-hidden",!t),u.dom.getElement(e+ot.oDefaults.selectorForm).classList.toggle("nm-hidden",t),u.dom.getElement(e+ot.oDefaults.selectorCarDetails).classList.toggle("nm-hidden",t)},ot.addDeleteButtonEvents=function(){var t=ot.oDefaults.selectorCarstoreItem+"[data-item-position='"+ot.selectedItemID+"'] ";ot.legacyEventBus.on("click",t+ot.oDefaults.selectorAbortButton,ot.handleDeleteAbort),ot.legacyEventBus.on("click",t+ot.oDefaults.selectorDeleteButton,ot.handleDeleteSubmit)},ot.removeDeleteButtonEvents=function(){var t=ot.oDefaults.selectorCarstoreItem+"[data-item-position='"+ot.selectedItemID+"'] ";ot.legacyEventBus.off("click",t+ot.oDefaults.selectorAbortButton,ot.handleDeleteAbort),ot.legacyEventBus.off("click",t+ot.oDefaults.selectorDeleteButton,ot.handleDeleteSubmit)},ot.loadCarstoreItem=function(){return B.a.loadCarstoreItem(ot.selectedItemID).catch((function(t){ot.triggerErrorLayer(t,"carstore-layer.error-loading-car")})).then((function(){r.router.open("page",d.a.getCurrentCarlineUrl()),setTimeout((function(){var t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!1),u.dom.getElement(".nm-j-layer-close-button").dispatchEvent(t)}),100)})),!1},ot.triggerErrorLayer=function(t,e){console.error(e,t);var n=d.a.getErrorMessage(t);ot.eventBus.emit(r.appEvents.ERROR,[window.i18n[e],n])},at.initialize=function(t){ot.eventBus=t,ot.legacyEventBus=u.dom.getEventDelegate("body"),ot.addEvents()};var st=new(function(){function t(){return h()(this,t),t.instance||(this._init(),t.instance=this),t.instance}var e,n,r,i;return S()(t,[{key:"_init",value:function(){this.csrfToken=null,this._getCsrfToken=this._getCsrfToken.bind(this),this._requestAudicodeOperation=this._requestAudicodeOperation.bind(this),f.stateRegistry.subscribeToStore(b,this._getCsrfToken)}},{key:"_getCsrfToken",value:function(t){t&&t.csrfToken&&(this.csrfToken=t.csrfToken)}},{key:"_requestAudicodeOperation",value:(i=o()(s.a.mark((function t(e,n){var r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=SETUPS.get("myaudi.uds.url")+"carstore/"+n,i={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken},method:e},t.abrupt("return",fetch(r,i).then((function(t){if(t.ok)return t.json();throw new Error(t.statusText)})).then((function(t){f.stateRegistry.triggerAction(b,"update",{audicodes:t})})).catch((function(t){return console.log("CarstoreApi ERROR - audicode - ",t)})));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"deleteAudicode",value:(r=o()(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._requestAudicodeOperation("DELETE",e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"saveAudicode",value:(n=o()(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._requestAudicodeOperation("PATCH",e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getAudicodeList",value:(e=o()(s.a.mark((function t(){var e,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=SETUPS.get("myaudi.uds.url")+"carstore/listAudicodes",n={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken}},t.abrupt("return",fetch(e,n).then((function(t){if(t.ok)return t.json();throw new Error(t.statusText)})).then((function(t){f.stateRegistry.triggerAction(b,"update",{audicodes:t})})).catch((function(t){return console.log("CarstoreApi ERROR - listAudicodes - ",t)})));case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}());function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function lt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(lt.prototype,HTMLElement.prototype),Object.setPrototypeOf(lt,HTMLElement);var ut=function(t){T()(n,t);var e=ct(n);function n(){var t;return h()(this,n),(t=e.call(this)).audicode=null,t.handleDeleteClick=t.handleDeleteClick.bind(L()(t)),t}return S()(n,[{key:"connectedCallback",value:function(){this.audicode=this.getAttribute("data-audicode"),this.deleteButton=this.querySelector(".j-carstore-delete"),this.deleteButton.addEventListener("click",this.handleDeleteClick)}},{key:"disconnectedCallback",value:function(){this.deleteButton&&this.deleteButton.removeEventListener("click",this.handleSaveClick)}},{key:"handleDeleteClick",value:function(t){t.preventDefault(),st.deleteAudicode(this.audicode)}}]),n}(lt);void 0===window.customElements.get("audi-carstore-delete-audicode")&&window.customElements.define("audi-carstore-delete-audicode",ut);n(75),n(74),n(151),n(85),n(147),n(140),n(148),n(123),n(119);var dt=n(120);function ft(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function pt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(pt.prototype,HTMLElement.prototype),Object.setPrototypeOf(pt,HTMLElement);var vt=function(t){T()(a,t);var e,n,r,i=gt(a);function a(){var t;return h()(this,a),(t=i.call(this)).currentConfigurations={},t.audicodeList=null,t.stateController=t.stateController.bind(L()(t)),t.renderList=t.renderList.bind(L()(t)),t.hasAudicodeListChanged=t.hasAudicodeListChanged.bind(L()(t)),t.handleListAudicodesResponse=t.handleListAudicodesResponse.bind(L()(t)),t}return S()(a,[{key:"connectedCallback",value:function(){f.stateRegistry.subscribeToStore(b,this.stateController),this.isToBeInitialized=!0}},{key:"renderList",value:(r=o()(s.a.mark((function t(e){var n,r,i,o,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currentConfigurations=e.configurations,this.wrapper=this.querySelector(".carstore-list__wrapper"),this.wrapper){t.next=4;break}return t.abrupt("return");case 4:if(n=Object.keys(this.currentConfigurations),r="",0!==n.length){t.next=10;break}r+=u.template.render("\n\t<p class=\"audi-copy-m carstore-list__error-message\">{{=window.i18n['carstore-layer.no-slots-available']}}</p>\n"),t.next=29;break;case 10:i=ft(n),t.prev=11,i.s();case 13:if((o=i.n()).done){t.next=21;break}return a=o.value,t.t0=r,t.next=18,this.renderListItem(a);case 18:r=t.t0+=t.sent;case 19:t.next=13;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(11),i.e(t.t1);case 26:return t.prev=26,i.f(),t.finish(26);case 29:this.wrapper.innerHTML=r;case 30:case"end":return t.stop()}}),t,this,[[11,23,26,29]])}))),function(t){return r.apply(this,arguments)})},{key:"renderListItem",value:(n=o()(s.a.mark((function t(e){var n,r,i,o,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.currentConfigurations[e],t.next=3,Object(dt.a)(n.configuration).then((function(t){if(!t)throw new Error;return t}));case 3:return r=t.sent,t.next=6,r;case 6:return i=t.sent,o=Object.assign(n,{images:i},{mediaservice:SETUPS.get("nemo.url.mediaservice")}),a=n.error?'\n\t<div class="carstore-list-item carstore-list-item--fail">\n\t\t<div class="carstore-list-item__image-container">\n\t\t\t<img class="carstore-list-item__image carstore-list-item__image--fail" src={{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-carstore.png"}} alt="" />\n\t\t</div>\n\t\t<p class="audi-copy-m carstore-list__error-message">\n\t\t\t<span class="carstore-list__error-message-text">{{=it.error.message}}</span>\n\t\t\t<span class="carstore-list__error-message-text">{{=window.i18n[\'audicode-label\']}}: {{=it.audicode}}</span>\n\t\t</p>\n\t\t<form class="carstore-list-item__form">\n\t\t\t<legend class="carstore-list-item__legend">{{=window.i18n[\'delete-configuration-label\']}}</legend>\n\t\t\t<fieldset>\n\t\t\t\t<audi-carstore-delete-audicode data-audicode="{{=it.audicode}}">\n\t\t\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--delete j-carstore-delete" type="submit">\n\t\t\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'delete-label\']}}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</audi-carstore-delete-audicode>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n':'\n<audi-configurator-carstore-list-item class="carstore-list-item" data-module="carstore-list-item" data-audicode="{{=it.audicode.id}}">\n\t<div class="carstore-list-item__image-container">\n\t\t{{? !!it.images && !!it.images.exterior_front && !!it.images.exterior_front[\'flyout\']}}\n\t\t\t<img class="carstore-list-item__image" src="{{=it.mediaservice}}{{=it.images[\'exterior_front\'][\'flyout\']}}" alt="{{=it.configuration.carlineName}}" />\n\t\t{{??}}\n\t\t\t<img class="carstore-list-item__image carstore-list-item__image--fail" src={{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-carstore.png"}} alt="" />\n\t\t{{?}}\n\t</div>\n\t<div class="carstore-list-item__description">\n\t\t{{? !!it.configuration.carlineName}}\n\t\t\t<div class="audi-headline-order-3 carstore-list-item__carline">{{=it.configuration.carlineName}}</div>\n\t\t{{?}}\n\t\t{{? !!it.configuration.description}}\n\t\t\t<div class="audi-copy-s carstore-list-item__engine">{{=it.configuration.description}}</div>\n\t\t{{?}}\n\t\t{{? !!it.configuration.prices.total}}\n\t\t\t<div class="audi-copy-m carstore-list-item__price">{{=it.configuration.prices.total}}</div>\n\t\t{{?}}\n\t</div>\n\t<form action="#" class="carstore-list-item__form">\n\t\t<legend class="carstore-list-item__legend">{{=window.i18n[\'carstore-layer.manage-slots\']}}</legend>\n\t\t<fieldset class="carstore-list-item__form-administration">\n\t\t\t<div class="audi-dropdown carstore-list-item__form-select-wrapper">\n\t\t\t\t<select name="carstore-list-item__form-select" class="audi-dropdown-select carstore-list-item__form-select">\n\t\t\t\t\t<option value="configuration-load">{{=window.i18n[\'carstore-layer.load-slot\']}}</option>\n\t\t\t\t\t<option value="configuration-delete">{{=window.i18n[\'delete-configuration-label\']}}</option>\n\t\t\t\t</select>\n\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t{{? !!it.audicode.id}}\n\t\t\t\t<div class="audi-copy-s carstore-list-item__audicode">{{=window.i18n[\'audicode-label\']}}: {{=it.audicode.id}}</div>\n\t\t\t{{?}}\n\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--submit j-carstore-submit">\n\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'carstore-layer.continue-label\']}}</span>\n\t\t\t</button>\n\t\t</fieldset>\n\t\t<fieldset class="carstore-list-item__form-dialogue">\n\t\t\t<audi-carstore-delete-audicode data-audicode="{{=it.audicode.id}}">\n\t\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--delete j-carstore-delete" type="submit">\n\t\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'delete-label\']}}</span>\n\t\t\t\t</button>\n\t\t\t\t<button class="audi-button audi-button--ghost carstore-list-item__button carstore-list-item__button--cancel j-carstore-cancel" type="reset">\n\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'abort-label\']}}</span>\n\t\t\t</audi-carstore-delete-audicode>\n\t\t\t</button>\n\t\t</fieldset>\n\t</form>\n</audi-configurator-carstore-list-item>\n',t.abrupt("return",u.template.render(a,o));case 10:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"disconnectedCallback",value:function(){f.stateRegistry.unsubscribeFromStore(b,this.stateController)}},{key:"createHeadlines",value:function(){this.innerHTML=u.template.render('\n\t<h2 class="audi-headline-order-2 carstore-list__headline">{{=window.i18n[\'carstore-layer.saved-slots\']}}</h2>\n\t<p class="audi-copy-m carstore-list__intro-text">{{=window.i18n[\'carstore-layer.manage-slots\']}}</p>\n\t<div class="carstore-list__wrapper"></div>\n')}},{key:"stateController",value:function(t){if(!t.loggedIn)return this.innerHTML="",this.audicodeList=null,void(this.currentConfigurations={});t.loggedIn&&(this.isToBeInitialized||null===t.audicodes&&null===this.audicodeList)&&(this.createHeadlines(),st.getAudicodeList(),this.isToBeInitialized=!1),t.audicodes!==this.audicodeList&&this.handleListAudicodesResponse(t.audicodes),t.configurations&&t.configurations!==this.currentConfigurations&&this.renderList(t)}},{key:"handleListAudicodesResponse",value:(e=o()(s.a.mark((function t(e){var n,r,i,o,a,c,l,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.filterAudicodesToLoad(e),r={},!n){t.next=9;break}return i=n.map((function(t){return zt.a.loadConfigurationByAudiCodeStateless(t).catch((function(e){return{audicode:t,error:e}}))})),t.next=6,Promise.all(i);case 6:o=t.sent,a=ft(o);try{for(a.s();!(c=a.n()).done;)(l=c.value).error?r[l.audicode]={audicode:l.audicode,error:l.error}:r[l.audicode.id]={audicode:l.audicode,configuration:l.configuration}}catch(t){a.e(t)}finally{a.f()}case 9:this.audicodeList=e,u=this.mergeConfigurations(e,r,this.currentConfigurations),f.stateRegistry.triggerAction(b,"update",{configurations:u});case 12:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"mergeConfigurations",value:function(t,e,n){var r={};return t.forEach((function(t){r[t]=e[t]||n[t]})),r}},{key:"filterAudicodesToLoad",value:function(t){var e=this;return t?t.filter((function(t){return!e.currentConfigurations[t]})):null}},{key:"hasAudicodeListChanged",value:function(t,e){return!e||t.length!==e.length||!t.every((function(t){return e.includes(t)}))}}]),a}(pt);function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function yt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-carstore-list")&&window.customElements.define("audi-carstore-list",vt),Object.setPrototypeOf(yt.prototype,HTMLElement.prototype),Object.setPrototypeOf(yt,HTMLElement);var St=function(t){T()(n,t);var e=ht(n);function n(){var t;return h()(this,n),(t=e.call(this)).handleSubmitClick=t.handleSubmitClick.bind(L()(t)),t.handleCancelClick=t.handleCancelClick.bind(L()(t)),t}return S()(n,[{key:"connectedCallback",value:function(){this.audicode=this.getAttribute("data-audicode"),this.form=this.querySelector("form"),this.formSelect=this.querySelector(".carstore-list-item__form-select"),this.submitButton=this.querySelector(".j-carstore-submit"),this.cancelButton=this.querySelector(".j-carstore-cancel"),this.addEvents()}},{key:"addEvents",value:function(){this.submitButton&&this.submitButton.addEventListener("click",this.handleSubmitClick),this.cancelButton&&this.cancelButton.addEventListener("click",this.handleCancelClick)}},{key:"handleSubmitClick",value:function(t){t.preventDefault(),"configuration-delete"===this.formSelect.value?this.classList.toggle("carstore-list-item--show-dialogue"):"configuration-load"===this.formSelect.value&&(window.location.href=window.i18n["audicode.direct-url"]+this.audicode)}},{key:"handleCancelClick",value:function(){this.classList.remove("carstore-list-item--show-dialogue")}}]),n}(yt);function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function Ct(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-configurator-carstore-list-item")&&window.customElements.define("audi-configurator-carstore-list-item",St),Object.setPrototypeOf(Ct.prototype,HTMLElement.prototype),Object.setPrototypeOf(Ct,HTMLElement);var bt=function(t){T()(n,t);var e=Et(n);function n(){var t;return h()(this,n),(t=e.call(this)).updateVisibility=t.updateVisibility.bind(L()(t)),t.handleSaveClick=t.handleSaveClick.bind(L()(t)),t}return S()(n,[{key:"connectedCallback",value:function(){f.stateRegistry.subscribeToStore(b,this.updateVisibility),this.button=this.querySelector("button"),this.button.addEventListener("click",this.handleSaveClick)}},{key:"disconnectedCallback",value:function(){f.stateRegistry.unsubscribeFromStore(b,this.updateVisibility)}},{key:"updateVisibility",value:function(t){var e=t.currentAudicode;this.setAttribute("data-audicode",e),e&&null!==t.audicodes&&!t.audicodes.includes(e)?this.classList.remove("nm-hidden"):this.classList.add("nm-hidden")}},{key:"handleSaveClick",value:function(){var t=this.getAttribute("data-audicode");t&&st.saveAudicode(t)}}]),n}(Ct);void 0===window.customElements.get("audi-carstore-save-audicode")&&window.customElements.define("audi-carstore-save-audicode",bt);n(57),n(112);var wt={},_t={__:wt},Dt=!1;wt.oDefaults={sSelectorCart:".nm-basket",sSelectorSnippetText:".nm-j-configurator-text-"},wt.updateAndAnimatePrice=function(t,e){t.stop(!0,!0).animate({opacity:"0.01"},250,"easeInSine",(function(){jQuery(this).text(e)})).delay(400).animate({opacity:"1"},300,"easeOutSine")},wt.hidePriceAndRate=function(t){var e,n,r={price:{},rate:{}};for(e in r)r.hasOwnProperty(e)&&""===(n=t.find([wt.oDefaults.sSelectorSnippetText,e].join(""))).text()&&n.closest("div").addClass("nm-hidden")},wt.hideRateIfUnavailable=function(t){var e;t.prices&&(void 0===(e=t.prices.totalRateRaw)||0===parseFloat(e)?jQuery("body").addClass("nm-no-rate"):jQuery("body").removeClass("nm-no-rate"))},wt.updatePrice=function(t,e,n){var r,i,o=e.price;for(r in e)if(e.hasOwnProperty(r)){if(i=t.find([wt.oDefaults.sSelectorSnippetText,r].join("")),"price"===r&&o&&n&&n.data&&n.data.animate){wt.updateAndAnimatePrice(i,o);continue}i.text(e[r])}},wt.updateCartText=function(t){var e,n=jQuery(wt.oDefaults.sSelectorCart);if(d.a.isConfigurable()){if(!(e=d.a.getConfiguration()))return;wt.updatePrice(n,e,t),wt.hideRateIfUnavailable(e)}else wt.hidePriceAndRate(n)},wt.updateEngineLinks=function(){var t,e;d.a.isConfigurable()&&(t=jQuery("[data-link-pattern]"),e=d.a.getMotorcode(),t.each((function(){var t=jQuery(this),n=t.attr("data-link-pattern");n&&n.match(/{{=it.model}}/g)&&(n=n.replace(/{{=it.model}}/,e),t.attr("href",n))})))},wt.updateSummaryStatus=function(t){"summary"===t||"onepage_configurator"===t?jQuery("body").addClass("nm-is-summary"):jQuery("body").removeClass("nm-is-summary")},wt.updateBasketBodyClass=function(t,e){var n=jQuery(".nm-basket").length>0,r="nemo"===t.attr("data-type");n&&r&&!("home"===e)?jQuery("body").addClass("nm-has-basket"):jQuery("body").removeClass("nm-has-basket")},wt.updateClasses=function(t){var e,n;n=(e=void 0!==t&&void 0!==t.domElement?jQuery(t.domElement).find(".nm-content"):jQuery(".nm-content")).attr("data-template"),wt.updateSummaryStatus(n),wt.updateBasketBodyClass(e,n)},wt.handlerAnimated=function(){wt.updateCartText({data:{animate:!0}}),wt.updateEngineLinks()},wt.handlerNotAnimated=function(){wt.updateCartText({data:{animate:!1}}),wt.updateEngineLinks()},wt.addEvents=function(){wt.eventBus.on(r.appEvents.CONFIG_UPDATE,wt.handlerAnimated),wt.eventBus.on(r.appEvents.LAYER_LOADED,wt.handlerNotAnimated),wt.eventBus.on(r.appEvents.CONFIG_START,wt.handlerNotAnimated),wt.eventBus.on(r.appEvents.PAGE_LOADED,wt.handlerNotAnimated),wt.eventBus.on(r.appEvents.PAGE_LOADED,wt.updateEngineLinks),wt.eventBus.on(r.appEvents.PAGE_LOADED,wt.updateClasses)},_t.dispose=function(){wt.eventBus.off(r.appEvents.CONFIG_UPDATE,wt.handlerAnimated),wt.eventBus.off(r.appEvents.LAYER_LOADED,wt.handlerNotAnimated),wt.eventBus.off(r.appEvents.CONFIG_START,wt.handlerNotAnimated),wt.eventBus.off(r.appEvents.PAGE_LOADED,wt.updateEngineLinks),wt.eventBus.off(r.appEvents.PAGE_LOADED,wt.updateClasses)},wt.initialize=function(){Dt||(wt.addEvents(),Dt=!0,wt.updateClasses())},_t.initialize=function(t){wt.eventBus=t,wt.initialize()};n(149);var kt=n(96);function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function At(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(At.prototype,HTMLElement.prototype),Object.setPrototypeOf(At,HTMLElement);var Lt=function(t){T()(n,t);var e=xt(n);function n(){return h()(this,n),e.call(this)}return S()(n,[{key:"connectedCallback",value:function(){this.changeEngineButton=this.querySelector(".nm-engine-compare__button-change"),this.addEvents()}},{key:"disconnectedCallback",value:function(){this.removeEvents()}},{key:"addEvents",value:function(){var t=this;this.changeEngineButton.addEventListener("click",(function(e){return t.showSearchWidget(e)}))}},{key:"removeEvents",value:function(){var t=this;this.changeEngineButton.removeEventListener("click",(function(e){return t.showSearchWidget(e)}))}},{key:"showSearchWidget",value:function(t){var e=this;t.preventDefault();var n=document.querySelectorAll(".nm-engine-compare__widget");x()(n).forEach((function(t){t.contains(e)&&t.classList.add("nm-engine-compare__widget--show-search")}))}}]),n}(At);function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function Tt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-enginecompare-controls")||window.customElements.define("audi-configurator-enginecompare-controls",Lt),Object.setPrototypeOf(Tt.prototype,HTMLElement.prototype),Object.setPrototypeOf(Tt,HTMLElement);var Ot=function(t){T()(n,t);var e=It(n);function n(){return h()(this,n),e.call(this)}return S()(n,[{key:"connectedCallback",value:function(){this.fuelDropdown=this.querySelector('.nm-engine-compare__dropdown[data-compare-type="fuel"]'),this.engineDropdown=this.querySelector('.nm-engine-compare__dropdown[data-compare-type="engine"]'),this.trimlineSelect=this.querySelector('.nm-engine-compare__select[data-compare-type="trimline"]'),this.fuelSelect=this.querySelector('.nm-engine-compare__select[data-compare-type="fuel"]'),this.engineSelect=this.querySelector(".nm-engine-compare__select[data-compare-type=engine]"),this.fuelOptions=this.querySelectorAll('.nm-engine-compare__select[data-compare-type="fuel"] option'),this.engineOptions=this.querySelectorAll('.nm-engine-compare__select[data-compare-type="engine"] option'),this.hasTrimline=null!==this.trimlineSelect,this.selectedFuel=this.fuelSelect.value,this.selectedEngine=this.engineSelect.value,this.updateFuelAndEngineOptions(),this.addEvents()}},{key:"disconnectedCallback",value:function(){this.removeEvents()}},{key:"addEvents",value:function(){var t=this;this.hasTrimline&&this.trimlineSelect.addEventListener("change",(function(){t.updateFuelAndEngineOptions()})),this.fuelSelect.addEventListener("change",(function(){t.updateEngineOptions()}))}},{key:"removeEvents",value:function(){var t=this;this.hasTrimline&&this.trimlineSelect.removeEventListener("change",(function(){t.updateFuelAndEngineOptions()})),this.fuelSelect.removeEventListener("change",(function(){t.updateEngineOptions()}))}},{key:"updateFuelAndEngineOptions",value:function(){this.updateFuelOptions(),this.updateEngineOptions()}},{key:"updateFuelOptions",value:function(){var t=this;this.hasTrimline&&(this.selectedTrimline=this.trimlineSelect.value,this.fuelSelect.innerHTML="",x()(this.fuelOptions).forEach((function(e){t.isValidOptionForSelectedTrimline(e)&&(e.selected=e.value===t.selectedFuel,t.fuelSelect.add(e))})),this.setDropdownReadonly(this.fuelDropdown,1===this.fuelSelect.length))}},{key:"updateEngineOptions",value:function(){var t=this;this.hasTrimline&&(this.selectedTrimline=this.trimlineSelect.value),this.selectedFuel=this.fuelSelect.value,this.engineSelect.innerHTML="",x()(this.engineOptions).forEach((function(e){t.isValidOptionForSelectedTrimlineAndFuel(e)&&(e.selected=e.value===t.selectedEngine,t.engineSelect.add(e))})),this.setDropdownReadonly(this.engineDropdown,1===this.engineSelect.length)}},{key:"isValidOptionForSelectedTrimlineAndFuel",value:function(t){return this.isValidOptionForSelectedTrimline(t)&&this.isValidOptionForSelectedFuel(t)}},{key:"isValidOptionForSelectedTrimline",value:function(t){return!this.hasTrimline||t.getAttribute("data-trimline")===this.selectedTrimline}},{key:"isValidOptionForSelectedFuel",value:function(t){return t.getAttribute("data-fuel")===this.selectedFuel}},{key:"setDropdownReadonly",value:function(t,e){e?t.classList.add("nm-form-readonly"):t.classList.remove("nm-form-readonly")}}]),n}(Tt);window.customElements.get("audi-configurator-enginecompare-filter")||window.customElements.define("audi-configurator-enginecompare-filter",Ot);var Pt=n(67);function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function Rt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(Rt.prototype,HTMLElement.prototype),Object.setPrototypeOf(Rt,HTMLElement);var Bt=function(t){T()(n,t);var e=jt(n);function n(){return h()(this,n),e.call(this)}return S()(n,[{key:"connectedCallback",value:function(){this.form=this.querySelector(".nm-engine-compare__form"),this.addEvents()}},{key:"disconnectedCallback",value:function(){this.removeEvents()}},{key:"addEvents",value:function(){var t=this;this.form.addEventListener("submit",(function(e){t.submitForm(e)}))}},{key:"removeEvents",value:function(){var t=this;this.form.removeEventListener("submit",(function(e){t.submitForm(e)}))}},{key:"submitForm",value:function(t){t.preventDefault();var e=this.form.getAttribute("data-link-pattern");if(e){var n=Pt.doT.template(e)({motorcodes:this.getSelectedEngines()});r.router.open("layer",n)}}},{key:"getSelectedEngines",value:function(){var t=this.querySelectorAll('.nm-engine-compare__select[data-compare-type="engine"]');return x()(t).map((function(t){return t.value}))}}]),n}(Rt);window.customElements.get("audi-configurator-enginecompare-form")||window.customElements.define("audi-configurator-enginecompare-form",Bt);var Mt=n(150),Ft=(n(139),{}),Ut={__:Ft};Ft.$stage=null,Ft.oDefaults={sStageID:"#nm-id-stage",sSelectorCarPriceRate:".nm-car-price-rate",sSelectorRenderImage:".nm-j-configurator-renderimage",sSelectorConfigurationSummary:".nm-j-configuration-summary",sSelectorQuantityPicker:".nm-quantity",sSelectorSnippetText:".nm-j-configurator-text-",sSelectorSnippetTextContainer:".nm-j-configurator-container-text-",sSelectorSnippetTextEec:".nm-j-configurator-text-eec-",selectorModelText:".js-configurator-model-text-",selectorModelImage:".js-configurator-model-image",selectorEecImage:".nm-j-configurator-image-eec",selectorTechdata:".nm-j-configurator-techdata-"},Ft.textReplaceKeys=["bpm","carlineName","count","description","eec-co2emission","eec-consumption","eec-consumptioninner","eec-efficiency","eec-electricitycost","eec-energycost","eec-yearlytaxcost","financeGlobalDisclaimer","financeParameters","financeProductDisclaimer","financeProductName","modelPrice","nettoBase","nettoOptions","optionsPrice","pa","packageDescription","price","pricenm-price","rate","rotrprice","rotrRate","servicePackage","subname","taxableBenefit1","taxableBenefit2","taxTotal","totalRate","totalWithCharges","vat"],Ft.addEvents=function(){Ft.eventBus.on(r.appEvents.UPDATE_VIEW_STATE,Ft.handleViewStateUpdates),Ft.eventBus.on(r.appEvents.CONFIG_UPDATE,Ft.updateAllDomItems),Ft.eventBus.on(r.appEvents.PAGE_LOADED,Ft.handlePageLoaded),Ft.eventBus.on(r.appEvents.LAYER_LOADED,Ft.updateAllDomItems),Ft.eventBus.on(r.appEvents.TRIGGER_DOM_UPDATE,Ft.handleConflictAndTransferResolves),Ft.eventBus.on(r.appEvents.CONFIG_SEND,Ft.hideRenderImages),document.addEventListener("FOOTNOTES_RENDERED",Ft.handleFootnotesRendered)},Ft.handleFootnotesRendered=function(){Ft.updateEffiencyClass(),Ft.updateTechdata(),Ft.updateFinancialFootnote()},Ft.updateFinancialFootnote=function(){var t=d.a.getConfiguration();t&&t.financeParameters&&Ft.setDOMText(jQuery(".audi-footnotes"),t)},Ft.removeEvents=function(){Ft.eventBus.off(r.appEvents.UPDATE_VIEW_STATE,Ft.handleViewStateUpdates),Ft.eventBus.off(r.appEvents.CONFIG_UPDATE,Ft.updateAllDomItems),Ft.eventBus.off(r.appEvents.PAGE_LOADED,Ft.handlePageLoaded),Ft.eventBus.off(r.appEvents.LAYER_LOADED,Ft.updateAllDomItems),Ft.eventBus.off(r.appEvents.TRIGGER_DOM_UPDATE,Ft.handleConflictAndTransferResolves),Ft.eventBus.off(r.appEvents.CONFIG_SEND,Ft.hideRenderImages)},Ft.updateDomStatusItems=function(t){(t||jQuery("body")).find(".nm-j-configurator-item").each((function(){var t=jQuery(this),e=t.attr("data-configurator-id"),n=d.a.getItem(e);if(t.hasClass("nm-j-configurator-no-update"))return!0;e&&n&&n.status&&(Ft.setDOMStatusCode(t,n.status),n.message&&n.message[0].text&&""!==n.message[0].text&&Ft.setDebugOutput(t,n.message[0].text))}))},Ft.handlePageLoaded=function(t){var e=jQuery("body");t&&"domElement"in t&&(e=jQuery(t.domElement)),Ft.updateDomStatusItems(e),Ft.updateDomTextItems(e),Ft.updateDomTextPrices(),Ft.updateDomTextSummary(),Ft.updateDomRenderImages(),Ft.updateModeChangeItems(),Ft.updateEffiencyClass(),Ft.updateTechdata(),Ft.updateFinancialFootnote(),Ft.updateEnergyEfficiencyImage(),Ft.eventBus.emit(r.appEvents.DOM_UPDATED)},Ft.setDOMStatusCode=function(t,e){var n,r;e&&(r=(n=t.get(0)).className)!==(r=r.replace(/nm-j-configurator-status_[01]{5}/,["nm-j-configurator-status_",e].join("")))&&(n.className=r)},Ft.setDebugOutput=function(t,e){var n=e;n&&(n=" ("+n+")",(1===t.find(".nm-debug-item").length?jQuery(t.find(".nm-debug-item")[0]):t).attr("data-message",n))},Ft.handleConflictAndTransferResolves=function(){Ft.updateAllDomItems()},Ft.handleViewStateUpdates=function(t){var e;t&&t.domElement&&t.domElement.length&&(e=t.domElement),Ft.updateDomRenderImages(e)},Ft.updateAllDomItems=function(){Ft.updateDomStatusItems(),Ft.updateDomTextItems(),Ft.updateDomTextPrices(),Ft.updateDomTextSummary(),Ft.updateDomRenderImages(),Ft.updateModeChangeItems(),Ft.updateEffiencyClass(),Ft.updateTechdata(),Ft.updateFinancialFootnote(),Ft.updateEnergyEfficiencyImage(),Ft.eventBus.emit(r.appEvents.DOM_UPDATED)},Ft.updateDomTextPrices=function(){var t=d.a.getConfiguration();if(t&&t.prices){var e=jQuery("body");Ft.setDOMText(e,t.prices),Ft.setConfigDataContainersVisibility(e,t.prices)}},Ft.updateModeChangeItems=function(){var t,e,n,r,i,o;e="nm-mode-"+(t=d.a.getPriceRateMode()),jQuery("body").removeClass("nm-mode-rate nm-mode-price"),jQuery("body").addClass(e),(o=jQuery(".nm-engine-list a[data-module-maw-criteria=price]")).length>0&&(n="rate"===t?"Preis":"Rate",r="rate"===t?"Rate":"Preis",i=o.html(),o.html(i.replace(n,r))),jQuery(".nm-price-rate-switch, .j-rate-switch").each((function(){this.checked="rate"===t}))},Ft.updateDomTextItems=function(t){(t||jQuery("body")).find(".nm-j-configurator-item").each((function(){var t=jQuery(this),e=t.attr("data-configurator-id"),n=d.a.getItem(e);n&&Ft.setDOMText(t,n)}))},Ft.setDOMText=function(t,e){Ft.textReplaceKeys.filter((function(t){return e.hasOwnProperty(t)})).forEach((function(n){t.find(Ft.oDefaults.sSelectorSnippetText+n).html(e[n])}))},Ft.setConfigDataContainersVisibility=function(t,e){Ft.textReplaceKeys.forEach((function(n){var r=t.find(Ft.oDefaults.sSelectorSnippetTextContainer+n);r&&(e.hasOwnProperty(n)&&""!==e[n]&&null!==e[n]?r.removeClass("nm-hidden"):r.addClass("nm-hidden"))}))},Ft.hideRenderImages=function(){jQuery(Ft.oDefaults.sSelectorRenderImage).each((function(){jQuery(this).addClass("nm-fade-out")}))},Ft.updateDomRenderImages=function(t){var e,n,r,i=d.a.getConfigurationAssets();i&&(e=t||jQuery("body"),jQuery(Ft.oDefaults.sSelectorRenderImage,e).each((function(){var t,e,o,a,s=jQuery(this);n=s.attr("data-renderimage-type"),r=s.attr("data-renderimage-view"),a=s.attr("data-resize-param"),n&&r&&(t=i[r])&&t[n]?(e=d.a.getRenderUrl()+t[n],0!==t[n].indexOf("/preview/")&&(o=d.a.getAltImagePath(r,n))&&(e+="?alt="+o),a&&(e+=-1!==e.indexOf("?")?"&":"?",e+=a),s.is("img")?e!==s.attr("src")?s.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-out").delay(300).on("load",(function(t){jQuery(t.target).removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")})).attr("src",e):s.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in"):s.is("source")?s.attr("srcset",e):s.attr("data-url")!==e&&(s.attr("data-url",e),s.css("backgroundImage","url("+e+")"))):s.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")})))},Ft.updateTechdata=function(){var t=d.a.getConfiguration();t&&t.techdata&&Object.entries(t.techdata).forEach((function(t){Ft.updateTechdataEntry(t[0],t[1])}))},Ft.updateTechdataEntry=function(t,e){x()(document.querySelectorAll(Ft.oDefaults.selectorTechdata+t)).forEach((function(t){t.innerHTML=e}))},Ft.updateEffiencyClass=function(){var t=d.a.getConfiguration(),e=document.querySelectorAll(".nm-j-configurator-techdata-efficiency-class");t&&t.eec&&t.eec.efficiency&&e.length>0&&x()(e).forEach((function(e){e.innerHTML=t.eec.efficiency,e.classList.remove("nm-hidden"),e.hasAttribute("data-has-techdata-container")&&Ft.updateTechdataContainerVisibility(e)}))},Ft.updateTechdataContainerVisibility=function(t){var e=u.dom.closest(t,".nm-j-configurator-techdata-container");e&&e.classList.remove("nm-hidden")},Ft.updateDomTextSummary=function(){var t=d.a.getMotorcode(),e=d.a.getItem(t),n=d.a.getModelsInfo(t),r=d.a.getConfiguration();r||console.warn("updateDomTextSummary: no configuration available!");var i,o,a=r&&r.eec?r.eec:{};r&&Ft.setDOMText(jQuery(Ft.oDefaults.sSelectorConfigurationSummary),r);var s=jQuery("[data-template='summary']");if(e=jQuery.extend(n,e),a&&!a.efficiency&&e&&e["energy-efficiency-category"]&&(a.efficiency=e["energy-efficiency-category"]),s.length){if(r&&r.description&&s.find(".nm-j-configurator-text-description").html(r.description),e)for(i in i="",e)e.hasOwnProperty(i)&&("image"===i?s.find(Ft.oDefaults.selectorModelImage).attr("src",e[i]):s.find([Ft.oDefaults.selectorModelText,i].join("")).html(e[i]));if(a){for(i in i="",a)a.hasOwnProperty(i)&&s.find([Ft.oDefaults.sSelectorSnippetTextEec,i].join("")).html(a[i]);a.efficiency&&a["efficiency-images"]&&(o=a["efficiency-images"].eec_image,s.find(Ft.oDefaults.selectorEecImage).attr("src",o))}}if(d.a.isConfigurable()){var c=x()(document.querySelectorAll(Ft.oDefaults.sSelectorCarPriceRate)),l=!!d.a.getConfigurationCarPriceRate();l?c.forEach((function(t){t.classList.remove("nm-hidden")})):c.forEach((function(t){t.classList.add("nm-hidden")})),Ft.toggleFinancingFootnoteVisibility(l)}},Ft.toggleFinancingFootnoteVisibility=function(t){var e=document.querySelector(".nm-footnote-finance"),n=SETUPS.get("nemo.footnote-engine.active");e&&!n&&(t?e.classList.remove("nm-hidden"):e.classList.add("nm-hidden"))},Ft.updateEnergyEfficiencyImage=function(){var t=d.a.getConfiguration();if(document.querySelector('[data-template="summary"]')&&t&&t.eec&&t.eec["efficiency-images"]&&t.eec["efficiency-images"].eec_character){var e=document.querySelectorAll(".nm-j-configurator-efficiency-class-image");x()(e).forEach((function(e){e.src=t.eec["efficiency-images"].eec_character}))}},Ut.initialize=function(t){Ft.eventBus=t,Ft.$stage=jQuery(Ft.oDefaults.sStageID),d.a.isConfigurable()&&Ft.addEvents(),document.cookie.indexOf("myAudi=")>-1&&jQuery("body").addClass("nm-logged-in")};var Nt=n(137),zt=n(9),Qt=(n(103),n(95),n(23)),Ht='<div class="nm-su-result">\n\t{{?!!it.audicode}}\n\t\t{{?!!it.configuration}}\n\t\t<div class="nm-su-result-wrap">\n\t\t\t<div class="nm-su-result-audicode clearfix">\n\t\t\t\t{{? SETUPS.get(\'scope.nemo.audicode.externallink\')}}\n\t\t\t\t\t{{var target = "target=\'blank\'";}}\n\t\t\t\t\t{{var link = \'/\' + it.audicode;}}\n\t\t\t\t{{??}}\n\t\t\t\t\t{{var target = "";}}\n\t\t\t\t\t{{var link = "#";}}\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.success===false}}\n\t\t\t\t\t{{?it[\'vtp-audicode\'] && it[\'other-url\']}}\n\t\t\t\t\t<div class="nm-su-vtp">\n\t\t\t\t\t\t<a href="{{=it[\'other-url\']}}" class="nm-link-cta audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t\t<span class="nm-su-result-audicode-label">{{=window.i18n[\'search-layer.your-audicode\']}}</span>&nbsp;\n\t\t\t\t\t\t\t <strong>{{=it.audicode}}</strong>\n\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="nm-su-vtp-image"></div>\n\t\t\t\t\t\t<div class="nm-su-vtp-description">\n\t\t\t\t\t\t\t<span class="nm-headline-teaser">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.available-cars\']}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div class="nm-description nm-label-info">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.available-cars-info\']}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a href="{{=it[\'other-url\']}}" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t\t\t<span>{{=window.i18n[\'search-layer.your-car\']}}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div class="nm-text-list">\n\t\t\t\t\t\t\t\t<span class="nm-text-list-bold">\n\t\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.label.disclaimer\']}}:\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.vtp-warning\']}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{??}}\n\t\t\t\t\t\t<strong class="nm-headline-teaser">{{=it.message}}</strong>\n\t\t\t\t\t{{?}}\n\t\t\t\t{{??}}\n\t\t\t\t\t<a href="{{=link}}" class="nm-link-cta nm-j-audicode-accept audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t<span class="nm-su-result-audicode-label">{{=window.i18n[\'search-layer.your-audicode\']}}</span>&nbsp;\n\t\t\t\t\t\t<strong>{{=it.audicode}}</strong>\n\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<img class="nm-su-result-audicode-image" src="{{=it.mediaservice}}{{=it.configuration.images[\'exterior_front\'][\'flyout\']}}"/>\n\t\t\t\t\t<div class="nm-su-result-audicode-description">\n\t\t\t\t\t\t<span class="nm-headline-teaser">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.carlineName}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class="nm-description nm-label-info">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.description}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<strong class="nm-headline-teaser nm-su-result-audicode-price">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.price}}\n\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t<a href="{{=link}}" {{=target}} class="nm-j-audicode-accept nm-el-btn nm-el-btn-01 nm-el-btn-ast audi-j-quick-search-result-tracking">{{=window.i18n[\'search-layer.load-configuration\']}}</a>\n\t\t\t\t\t\t<div class="nm-text-list">\n\t\t\t\t\t\t\t<span class="nm-text-list-bold">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.label.disclaimer\']}}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.configuration-overwrite-warning\']}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.consumption-entries\')}}\n\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata && (it.configuration.configuration.techdata[\'consumption-combined\'] || it.configuration.configuration.techdata[\'carbon-dioxide-emissions\'] || it.configuration.configuration.techdata[\'efficiency-class\'])}}\n\t\t\t\t\t\t\t\t<dl class="nm-su-result-audicode-consumption-entries clearfix audi-copy-s">\n\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'consumption-combined\']}}\n\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.consumption-combined\']}}*:</dt>\n\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'consumption-combined\']}}</dd>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'carbon-dioxide-emissions\']}}\n\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.emission-combined\']}}*:</dt>\n\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'carbon-dioxide-emissions\']}}</dd>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.eec-entry\')}}\n\t\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'efficiency-class\']}}\n\t\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.efficiency-class\']}}:</dt>\n\t\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'efficiency-class\']}}</dd>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t</div>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t</div>\n\t\t{{??}}\n\t\t\t<div class="nm-su-result-audicode">\n\t\t\t\t<strong class="nm-headline-teaser">\n\t\t\t\t\t{{=window.i18n[\'search-layer.audicode-loading\']}}\n\t\t\t\t</strong>\n\t\t\t\t<div class="nm-j-audicode-loading nm-loading">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{{?}}\n\t{{?}}\n\t{{?!it.audicode}}\n\t\t<div class="nm-su-result-wrap">\n\t\t\t{{?it.search.length}}\n\t\t\t\t<ul class="nm-su-result-list-group">\n\t\t\t\t\t{{~ it.search :entry }}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<h2 class="nm-su-result-list-item-headline">\n\t\t\t\t\t\t\t\t<span class="nm-label-text-bold">{{=entry.value.carlineName}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="nm-label-text-bold">{{=entry.key}}</span>\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<ul class="nm-su-result-list">\n\t\t\t\t\t\t\t\t{{~ entry.value.items :item }}\n\t\t\t\t\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix"\n\t\t\t\t\t\t\t\t\tdata-configurator-id="{{=item.id}}">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-image">\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.image}}\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="{{=item.image}}" alt="{{=item.name}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-content">\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-j-configurator-name nm-text-list-bold">\n\t\t\t\t\t\t\t\t\t\t\t\t{{=item.name}}\n\t\t\t\t\t\t\t\t\t\t\t\t{{? !!item.nonrenderable && item.nonrenderable == true }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-text-list"><br />{{=window.i18n[\'configuration.not-rendable-message\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.description}}\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-description nm-text-list">\n\t\t\t\t\t\t\t\t\t\t\t\t{{= item.description || \'\'}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-info">\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-add clearfix">\n\t\t\t\t\t\t\t\t\t\t\t\t{{?!!item.url}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=item.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-conflict-icon" title="#I18N("nemo.ui.common.conflict" "Konflikt")"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-price nm-text-list">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{? !!item.price}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-j-configurator-text-price">{{=item.price}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-add-btn">\n\t\t\t\t\t\t\t\t\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state01">{{=window.i18n[\'search-layer.add-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state02">{{=window.i18n[\'search-layer.item-included\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state03">{{=window.i18n[\'search-layer.remove-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{~}}\n\t\t\t\t</ul>\n\t\t\t{{?}}\n\t\t\t<div class="nm-su-sitesearch-list">\n\t\t\t\t{{?it.modelSearch.length}}\n\t\t\t\t\t<ul class="nm-su-modelsearch-group">\n\t\t\t\t\t\t{{~it.modelSearch :modelItem}}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=modelItem.url}}">\n\t\t\t\t\t\t\t\t<span>{{=modelItem.name}}</span>\n\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.siteMapSearch.length}}\n\t\t\t\t\t<ul class="nm-su-sitemapsearch-group">\n\t\t\t\t\t\t{{~it.siteMapSearch :siteMapItem}}\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tvar itemName = siteMapItem.name;\n\t\t\t\t\t\t\t\tvar replacedName = itemName.replace( \'[rhombus]\', \'<span class="nm-icon-rhombus"></span>\' );\n\t\t\t\t\t\t\t\treplacedName = replacedName.replace( \':plus\', \'<span class="nm-brand-plus">:plus</span>\' );\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=siteMapItem.url}}">\n\t\t\t\t\t\t\t\t\t<span>{{=replacedName}}</span>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.footerSearch.length}}\n\t\t\t\t\t<ul class="nm-su-footersearch-group">\n\t\t\t\t\t\t{{~it.footerSearch :footerItem}}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=footerItem.url}}">\n\t\t\t\t\t\t\t\t<span>{{=footerItem.name}}</span>\n\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t\t/*Proposals*/\n\t\t\t<ul class="nm-su-result-list-group">\n\t\t\t\t{{?it.searchListProposals.length}}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<ul class="nm-su-result-list nm-su-proposal-list">\n\t\t\t\t\t\t\t{{~it.searchListProposals :proposalItem}}\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="{{=proposalItem.Url}}" x-cq-linkchecker="valid" class="nm-su-proposol-item{{?proposalItem.Type=="Layer"}} nm-layerLink{{?}} audi-j-quick-search-result-tracking">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-image">\n\t\t\t\t\t\t\t\t\t\t\t{{? !!proposalItem.ImageUrl}}\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="{{=proposalItem.ImageUrl}}" alt="{{=proposalItem.Headline}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-proposal-list-content">\n\t\t\t\t\t\t\t\t\t\t\t<strong class="nm-text-list-bold">{{=proposalItem.Headline}}</strong>\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-description nm-text-list">{{=proposalItem.Description}}</div>\n\t\t\t\t\t\t\t\t\t\t\t<span class="nm-link-basic" >\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{{=window.i18n[\'discover-now\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t{{?}}\n\t\t\t</ul>\n\t\t</div>\n\t\t{{?!!it.gsaSearchUrl}}\n\t\t\t<div class="nm-su-gsa">\n\t\t\t\t<a class="nm-j-tracking-search-submit nm-link-basic" href="{{=it.gsaSearchUrl}}">\n\t\t\t\t\t<span>{{=window.i18n[\'search-layer.search-audi-web\']}} &quot;<span class="nm-highlight">{{=it.searchString}}</span>&quot; {{=window.i18n[\'search-layer.search-for\']}}</span>\n\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t{{?}}\n\t{{?}}\n</div>';function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wt=".nm-header-overlay-container .nm-navigation-header-search-overlay.nm-header-overlay-is-open",Gt={},Yt={__:Gt};Gt.mobileBreakpoint=750,Gt.searchLayerOpen=!1,Gt.searcListProposalsArr=null,Gt.audicodeActivated=!1,Gt.oDefaults={sAcceptAudicodeButton:".nm-j-audicode-accept"},Gt.loadSearchListProposals=o()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=SETUPS.get("nemo.url.searchproposals"),t.abrupt("return",fetch(e,{credentials:"include"}).then((function(t){if(t.ok)return t.json();throw new Error(t.statusText)})).then((function(t){Gt.searcListProposalsArr=t&&t.Proposals?t.Proposals:[]})).catch((function(t){return console.log("Error fetching search proposals - server responded with: ",t)})));case 2:case"end":return t.stop()}}),t)}))),Gt.searchResultListProposals=function(t){var e,n=[];return t&&(e=t.toLowerCase(),Gt.searcListProposalsArr&&Gt.searcListProposalsArr.length&&jQuery.each(Gt.searcListProposalsArr,(function(t,r){if(!r.Search)return!0;r.Search.indexOf(e)>-1&&n.push(r)}))),n},Gt.addEvents=function(){var t="click";Gt.legacyEventBus.on("keyup",".nm-su .nm-su-input",Gt.onOpenSearchLayer),Gt.legacyEventBus.on("paste",".nm-su .nm-su-input",Gt.onOpenSearchLayerDelayed),Gt.legacyEventBus.on("click",".nm-su .nm-su-input",Gt.onOpenSearchLayer),Gt.legacyEventBus.on("click",".nm-su .nm-su-submit",Gt.onOpenSearchLayer),Gt.legacyEventBus.on("click",".nm-su .nm-su-reset",Gt.resetSearch),Gt.legacyEventBus.on("submit",".nm-su form",Gt.formSubmit),Gt.eventBus.on(r.appEvents.MENUFLYOUT_OPEN,Gt.clearSearch),Gt.eventBus.on(r.appEvents.MENUFLYOUT_CLOSE,Gt.emptySearchResults),void 0!==document.documentElement.ontouchstart&&(t="touchstart"),Gt.legacyEventBus.on(t,Gt.onClickOutsideOfSearchLayer)},Gt.removeEvents=function(){var t="click";Gt.legacyEventBus.off("keyup",".nm-su .nm-su-input",Gt.onOpenSearchLayer),Gt.legacyEventBus.off("paste",".nm-su .nm-su-input",Gt.onOpenSearchLayerDelayed),Gt.legacyEventBus.off("click",".nm-su .nm-su-input",Gt.onOpenSearchLayer),Gt.legacyEventBus.off("click",".nm-su .nm-su-submit",Gt.onOpenSearchLayer),Gt.legacyEventBus.off("click",".nm-su .nm-su-reset",Gt.resetSearch),Gt.legacyEventBus.off("submit",".nm-su form",Gt.formSubmit),Gt.eventBus.off(r.appEvents.MENUFLYOUT_OPEN,Gt.clearSearch),Gt.eventBus.off(r.appEvents.MENUFLYOUT_CLOSE,Gt.emptySearchResults),void 0!==document.documentElement.ontouchstart&&(t="touchstart"),Gt.legacyEventBus.off(t,Gt.onClickOutsideOfSearchLayer)},Gt.emptySearchResults=function(){jQuery(".nm-su-result-container").empty()},Gt.resetSearch=function(){jQuery(Wt).find("input.nm-su-input").focus(),Gt.emptySearchResults(),jQuery(Wt).find("input.nm-su-input").keyup()},Gt.clearSearch=function(t){void 0!==t.item&&(jQuery(Wt).find("input.nm-su-input").val(""),jQuery(Wt).find("input.nm-su-input").focus())},Gt.formSubmit=function(t){var e,n;return t&&"function"==typeof t.preventDefault&&t.preventDefault(),Gt.loadedConfiguration?(Gt.acceptLoadedConfiguration(),!1):(jQuery(".nm-j-audicode-loading").length||(e=Gt.readSearchStringFromInput()).length<=0||(n=Gt.buildSearchResultsPageUrl(e))&&Gt.performSearch(n,e),!1)},Gt.performSearch=function(t,e){var n=Gt.generateTrackingPayload(t,e),r=new CustomEvent("CUSTOM_TRACKING_EVENT",n);document.dispatchEvent(r),document.location=t},Gt.generateTrackingPayload=function(t,e){var n="button";return document.activeElement.classList.contains("nm-su-input")&&(n="other"),{detail:{eventInfo:{eventAction:"internal_link",eventName:"main search - submit"},attributes:{componentName:"main search",label:"",currentURL:window.location.href,targetURL:t,clickID:"",elementName:n,value:e,pos:""}}}},Gt.readSearchStringFromInput=function(){var t=jQuery(".nm-su .nm-su-input").val();return t=t.replace(/^\s+/g,"").replace(/</g,"").replace(/>/g,"")},Gt.onOpenSearchLayerDelayed=function(){var t=this;setTimeout((function(){jQuery(t).keyup()}),50)},Gt.preventEvent=function(){return!1},Gt.removeStopWordsFromSearchString=function(t){var e,n=t;return d.a.getSearchStopWords()&&(e=new RegExp("\\b(?:i|"+d.a.getSearchStopWords()+")\\b\\s*","gi"),n=n.replace(e,"")),n},Gt.detectAndStoreAudiCode=function(t,e){return 8===e.length&&-1!==e.search(/[Aa]{1}[a-zA-Z0-9]{7}/)?(t.audicode=e.toUpperCase(),Gt.legacyEventBus.off("submit",".nm-su form",Gt.formSubmit),Gt.legacyEventBus.off("submit",".nm-su form",Gt.preventEvent),Gt.legacyEventBus.on("submit",".nm-su form",Gt.preventEvent)):(Gt.legacyEventBus.off("submit",".nm-su form",Gt.preventEvent),Gt.legacyEventBus.off("submit",".nm-su form",Gt.formSubmit),Gt.legacyEventBus.on("submit",".nm-su form",Gt.formSubmit)),t},Gt.handleAudiCodeInput=function(t,e){var n=SETUPS.get("nemo.search.audicodestopwords");return e.audicode&&!e.search.length&&n&&-1===n.indexOf(t)?Gt.triggerAudicodeLoad(e.audicode):e.audicode=null,e.searchString=t||Gt.readSearchStringFromInput(),e.siteMapSearch=d.a.searchNavigation(t,"siteMap"),e.modelSearch=d.a.searchNavigation(t,"model"),e.footerSearch=d.a.searchNavigation(t,"footer"),e.gsaSearchUrl=Gt.buildSearchResultsPageUrl(t),e.searchListProposals=Gt.searchResultListProposals(t),e},Gt.generateResultList=function(t){var e,n={},r=t;return Gt.searchLayerOpen=!0,n=Gt.detectAndStoreAudiCode(n,r),-1!==r.indexOf("|")&&(n.prstring=r),-1!==r.search(/^([a-z0-9]+)=((true)|(false))$/)&&(e=/^([a-z0-9]+)=((true)|(false))$/.exec(r),Qt.state.triggerModeChange(e[1],e[2])),-1!==r.search(/dpu_extra=(.*)/)&&(e=/^dpu_extra=(.*)/.exec(r),B.a.setDpuExtra(e[1])),r=Gt.removeStopWordsFromSearchString(r),n.search=SETUPS.get("showEquipmentsWithinSearchLayerContext")&&r&&r.length>1?d.a.search(r,!0):[],n=Gt.handleAudiCodeInput(r,n)},Gt.handleSearch=function(t,e,n,i){var o,a=Gt.generateResultList(n),s=e!==n||"click"===t.type;n.length>1&&s?(o=u.template.render(Ht,a),i.empty().html(o),Gt.eventBus.emit(r.appEvents.SEARCH_OPEN,a)):n.length<=1&&Gt.closeSearchLayer()},Gt.handleSmallViewportSubmit=function(t,e){var n,r=e;jQuery(window).width()<Gt.mobileBreakpoint&&jQuery(t.target).hasClass("nm-su-submit")&&(jQuery(".nm-j-audicode-loading").length?Gt.audicodeActivated&&Gt.acceptLoadedConfiguration():(r=Gt.readSearchStringFromInput(),null!==(n=Gt.buildSearchResultsPageUrl(r))&&(document.location=n)))},Gt.isExitConditionFulfilled=function(t){if(Gt.audicodeActivated){if(13===t.keyCode&&jQuery(".nm-j-audicode-accept").is(":visible"))return Gt.acceptLoadedConfiguration(),!0}else Gt.loadedConfiguration=null;return 16===t.keyCode||13===t.keyCode},Gt.onOpenSearchLayer=function(t){var e,n,r,i;Gt.isExitConditionFulfilled(t)||(Gt.searchForm=jQuery(t.target).parents("form"),n=(e=jQuery(this).closest(".nm-su")).find(".nm-su-result-container"),r=Gt.readSearchStringFromInput(),(i=e.data("current")||"")!==r&&(Gt.audicodeActivated=!1,Gt.loadedConfiguration=null),e.data("current",r),Gt.handleSearch(t,i,r,n),Gt.setFlyoutHeight(n),Gt.handleSmallViewportSubmit(t,r))},Gt.buildSearchResultsPageUrl=function(t){var e=d.a.getSearchResultsPageUrl(),n=SETUPS.get("nemo.newSiteSearch.enabled")?"?q=":"#search=";return e?e+=n+encodeURIComponent(t.toLowerCase()):null},Gt.onClickOutsideOfSearchLayer=function(t){var e=t.target;Gt.searchLayerOpen&&Gt.isClickedTargetOutsideSearchLayer(e)&&Gt.isClickedTargetOutsideSearchSearchInputField(e)&&Gt.isClickedTargetOutsideAnyOtherLayer(e)&&Gt.closeSearchLayer()},Gt.isClickedTargetOutsideSearchLayer=function(t){return u.dom.isElementOutsideOfElementWithSelector(t,".nm-su-result-container")},Gt.isClickedTargetOutsideSearchSearchInputField=function(t){return u.dom.isElementOutsideOfElementWithSelector(t,"div.nm-su")},Gt.isClickedTargetOutsideAnyOtherLayer=function(t){return u.dom.isElementOutsideOfElementWithSelector(t,".nm-layer-wrapper")},Gt.closeSearchLayer=function(){setTimeout((function(){Gt.searchLayerOpen=!1,jQuery(".nm-su-result-container").empty(),Gt.eventBus.emit(r.appEvents.SEARCH_CLOSE)}),100)},Gt.triggerAudicodeLoad=function(){var t=o()(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B.a.loadConfigurationByAudiCode(e).then((function(t){zt.a.adoptConfiguration(t).then((function(){var e=d.a.getCarImages();Gt.onAudiCodeLoaded(qt(qt({},t),{},{images:e}))}))}),(function(t){t.message=t.message||window.i18n["standard-audicode-error"],t.audicode=e,Gt.showAudiCodeLoadError(t)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Gt.showAudiCodeLoadError=function(t){var e,n=jQuery(".nm-su-result-container");if(t.message=d.a.getErrorMessage(t),"AUDICODE_CONF_NOT_VALID"===t.id&&SETUPS.get("scope.nemo.audicode.not_valid_pdflink")){t.pdflink=SETUPS.get("nemo.pdf.url")+"/audicode/"+t.audicode;var r="search-layer.audicode-pdf";t.pdflabel=window.i18n&&window.i18n[r]?window.i18n[r]:"PDF anzeigen"}e=u.template.render('<div class="nm-su-result-audicode-wrap">\n\t<div class="nm-su-result-audicode">\n\t\t<h2 class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b">{{=window.i18n[\'search-layer.audicode.error\']}}: </h2>\n\t\t<div class="nm-error">\n\t\t\t<p class="nm-error-layer-message nm-el-pg nm-el-pg-03 nm-at-pg-indicator">{{=it.message}}</p>\n\t\t</div>\n\t\t{{?it.pdflink}}\n\t\t\t<a class="audi-link-s audi-link-s--arrow-front" href="{{=it.pdflink}}" target="_blank">\n\t\t\t\t<span class="audi-link-s__text">{{=it.pdflabel}}</span>\n\t\t\t\t<svg class="audi-link-s__icon">\n\t\t\t\t\t<use xlink:href="{{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/print-small.svg#nm-icon-print-small"}}"></use>\n\t\t\t\t</svg>\n\t\t\t</a>\n\t\t{{?}}\n\t</div>\n</div>',t),console.error(t),Gt.legacyEventBus.off("submit",".nm-su form",Gt.preventEvent),Gt.legacyEventBus.on("submit",".nm-su form",Gt.formSubmit),n.empty().html(e),Gt.setFlyoutHeight(n)},Gt.handleAudiCodeError=function(t){var e={};t&&(e.message=t),Gt.audicodeActivated=!1,Gt.loadedConfiguration=void 0,Gt.showAudiCodeLoadError(e)},Gt.onAudiCodeLoaded=function(t){var e,n;Gt.loadedConfiguration=t,Gt.loadedConfiguration&&t.audicode&&Gt.loadedConfiguration.audicode.id?(e=Gt.loadedConfiguration.audicode.id.toUpperCase(),(n=jQuery(".nm-su-input").filter((function(){return jQuery(this).val().toUpperCase()===e})))&&1===n.length?(Gt.audicodeActivated=!0,Gt.showLoadedConfiguration(n)):Gt.handleAudiCodeError()):Gt.handleAudiCodeError(window.i18n["standard-audicode-error"],"ERROR loading Audicode")},Gt.showLoadedConfiguration=function(t){var e=t.closest(".nm-su").find(".nm-su-result-container"),n={search:{},audicode:Gt.loadedConfiguration.audicode.id,configuration:Gt.loadedConfiguration,mediaservice:d.a.getRenderUrl(),success:!!Gt.loadedConfiguration.audicode.success,"vtp-audicode":!!Gt.loadedConfiguration.audicode["other-url"],"other-url":Gt.loadedConfiguration.audicode["other-url"]?Gt.loadedConfiguration.audicode["other-url"]:null,message:Gt.loadedConfiguration.audicode.message},r=u.template.render(Ht,n);e.one("click.accept.loaded.audicode",Gt.oDefaults.sAcceptAudicodeButton,Gt.acceptLoadedConfiguration),e.empty().html(r),Gt.setFlyoutHeight(e)},Gt.acceptLoadedConfiguration=function(t){var e=Gt.loadedConfiguration&&Gt.loadedConfiguration.audicode?Gt.loadedConfiguration.audicode:null;if(t&&!SETUPS.get("scope.nemo.audicode.externallink")&&"function"==typeof t.preventDefault&&t.preventDefault(),t&&SETUPS.get("scope.nemo.audicode.externallink"))return!0;if(Gt.eventBus.emit(r.appEvents.SEARCH_LOAD_AUDICODE,{audicode:e}),Gt.loadedConfiguration.audicode["other-url"]){if(""!==Gt.loadedConfiguration.audicode["other-url"]){if(SETUPS.get("scope.nemo.audicode.externallink"))return t.target.href=Gt.loadedConfiguration.audicode["other-url"],!0;window.location=Gt.loadedConfiguration.audicode["other-url"]}}else B.a.handleExternalConfiguration(Gt.loadedConfiguration,{startType:"audicode-search"}),r.router.open("page",d.a.getCurrentCarlineUrl());Gt.closeSearchLayer()},Gt.setFlyoutHeight=function(t){jQuery(".nm-su").removeClass("noSrcollbars"),t.height()<410&&jQuery(".nm-su").addClass("noSrcollbars");var e=t.height()+150;jQuery(".nm-has-additional-logo").length>0&&(e+=30),jQuery(Wt).height(e)},Yt.initialize=function(t){Gt.eventBus=t,Gt.legacyEventBus=jQuery("body"),Gt.addEvents(),Gt.loadSearchListProposals()};var Kt=n(136);function Xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function $t(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf($t.prototype,HTMLElement.prototype),Object.setPrototypeOf($t,HTMLElement);var Jt=function(t){T()(n,t);var e=Xt(n);function n(){var t;return h()(this,n),(t=e.call(this)).eventBus=r.signal.getEmitter(),Qt.entryScroll.register("recommendations","summary-dynamic-recommendation"),t}return S()(n,[{key:"connectedCallback",value:function(){this.moduleContainer=this.querySelector(n.selectors.container),this.addEvents(),this.renderRecommendations()}},{key:"disconnectedCallback",value:function(){this.removeEvents()}},{key:"addEvents",value:function(){var t=this;this.eventBus.on(r.appEvents.CONFIG_UPDATE,(function(){t.renderRecommendations()}))}},{key:"removeEvents",value:function(){var t=this;this.eventBus.off(r.appEvents.CONFIG_UPDATE,(function(){t.renderRecommendations()}))}},{key:"renderRecommendations",value:function(){var t=this.getRecommendations();t.length>0?this.updateContent(this.renderTemplate(t),!0):this.updateContent()}},{key:"getRecommendations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=d.a.getDynamicRecommendations();return e.slice(0,t).map((function(t){return Object.assign({},t,d.a.getItem(t.id))}))}},{key:"renderTemplate",value:function(t){return u.template.render('\n<div class="audi-headline-order-3 nm-module-summary-dynamic-recommendation-headline-main">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose-headline\']}}\n</div>\n<p class="audi-copy-s nm-module-summary-dynamic-recommendation-paragraph">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose\']}}\n</p>\n\n\x3c!-- list --\x3e\n<div class="nm-module-summary-dynamic-recommendation-itemlist">\n\t\x3c!-- configurator item --\x3e\n\t{{~it :value}}\n\t\t{{##def.dataConfiguratorId :\n\t\t\t{{? value.id}}\n\t\t\t\tdata-configurator-id="{{=value.id}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t{{##def.dataConfiguratorGroup :\n\t\t\t{{? value.RadioGroup}}\n\t\t\t\tdata-configurator-group="{{=value.RadioGroup}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t<div class="nm-j-configurator-item nm-j-configurator-status_{{=value.status}}" {{#def.dataConfiguratorId}} {{#def.dataConfiguratorGroup}}>\n\t\t\t<div class="nm-module-summary-dynamic-recommendation-item">\n\n\t\t\t\t\x3c!-- checkbox --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-checkbox audi-checkbox nm-j-configurator-delegate-click">\n\t\t\t\t\t<span class="audi-checkbox">\n\t\t\t\t\t\t<span class="audi-checkbox-symbol nm-module-summary-dynamic-recommendation-checkbox-symbol">\n\t\t\t\t\t\t\t<svg class="nm-icon-select-small nm-module-summary-dynamic-recommendation-symbol">\n\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/select-small.svg#nm-icon-select-small"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- item text --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-itemtext">\n\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-itemname-text">{{=value.name}}</p>\n\t\t\t\t\t\x3c!-- non renderable sets a remark text --\x3e\n\t\t\t\t\t{{? value.nonrenderable}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text">\n\t\t\t\t\t\t\t{{=window.i18n[\'nemo.ui.common.note\']}}:\n\t\t\t\t\t\t\t{{=window.i18n[\'configuration.not-rendable-message\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !value.RadioGroup}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text nm-j-configurator-text-packageDescription"></p>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image-offerrate-wrapper">\n\t\t\t\t\t\x3c!-- image or video --\x3e\n\t\t\t\t\t{{##def.videoClass :\n\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\tnm-module-summary-dynamic-recommendation-video\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t#}}\n\n\t\t\t\t\t{{? value.image}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image {{#def.videoClass}}">\n\t\t\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t\t\t<a class="nm-layerLink" href="{{=value.url}}">\n\t\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-offerrate-wrapper">\n\t\t\t\t\t\t<audi-configurator-offerrate data-rate="{{=parseInt(parseFloat(value.einbaurate) * 100, 10)}}" class="nm-offer-rate">\n\t\t\t\t\t\t\t<div class="nm-offer-rate-container">\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-text audi-copy-s"><span class="nm-offer-rate-value">0</span>%</div>\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-image">\n\t\t\t\t\t\t\t\t\t<svg class="nm-offer-rate-icon" viewbox="0 0 48 48">\n\t\t\t\t\t\t\t\t\t\t<path d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke-opacity="0.6" stroke="#333" fill="none" />\n\t\t\t\t\t\t\t\t\t\t<path class="nm-offer-rate-path" d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke="#f50537" stroke-width="3" fill="none" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</audi-configurator-offerrate>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-price-icons">\n\t\t\t\t\t\x3c!-- price --\x3e\n\t\t\t\t\t{{? value.Series || value.price}}\n\t\t\t\t\t\t<div class="audi-copy-m nm-module-summary-dynamic-recommendation-price nm-j-configurator-text-price">\n\t\t\t\t\t\t\t{{? value.Series}}\n\t\t\t\t\t\t\t\t{{=window.i18n[\'nemo.common.serie\']}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? value.price}}\n\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\x3c!-- infolayer --\x3e\n\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-iconwrapper">\n\t\t\t\t\t\t\t<a class="nm-module-summary-dynamic-recommendation-iconlink nm-layerLink" href="{{=value.url}}" title="{{=window.i18n[\'more-information\']}}">\n\t\t\t\t\t\t\t\t<svg class="nm-icon-system-info-small nm-module-summary-dynamic-recommendation-icon-system-info-small">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-info-small.svg#nm-icon-system-info-small"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{~}}\n</div>\n\n\x3c!-- legend --\x3e\n<div class="audi-copy-m nm-module-summary-dynamic-recommendation-legend-headline">\n\t{{=window.i18n[\'dynamic-recommendations.legend-headline\']}}\n</div>\n<div class="nm-module-summary-dynamic-recommendation-legend-wrapper">\n\t<svg class="nm-icon-offer-rate-small nm-module-summary-dynamic-recommendation-icon-offer-rate-small">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/offer-rate-small.svg#nm-icon-offer-rate-small"}}></use>\n\t</svg>\n\t<p class="audi-copy-s">\n\t\t{{=window.i18n[\'dynamic-recommendations.legend-info\']}}\n\t</p>\n</div>',t)}},{key:"updateContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.moduleContainer.innerHTML=t,e?this.classList.remove(n.selectors.hidden):this.classList.add(n.selectors.hidden)}}],[{key:"selectors",get:function(){return{container:".nm-module-summary-dynamic-recommendation",hidden:"nm-hidden"}}}]),n}($t);window.customElements.get("audi-configurator-dynamic-recommendation")||window.customElements.define("audi-configurator-dynamic-recommendation",Jt);n(116);function Zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function ne(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(ne.prototype,HTMLElement.prototype),Object.setPrototypeOf(ne,HTMLElement);var re=function(t){T()(c,t);var e,n,i,a=ee(c);function c(){var t;return h()(this,c),(t=a.call(this)).eventBus=r.signal.getEmitter(),Qt.entryScroll.register("recommendations","summary-dynamic-recommendation"),t}return S()(c,[{key:"connectedCallback",value:function(){this.moduleContainer=this.querySelector(c.selectors.container),this.addEvents(),this.renderRecommendations()}},{key:"disconnectedCallback",value:function(){this.removeEvents()}},{key:"addEvents",value:function(){var t=this;this.eventBus.on(r.appEvents.CONFIG_UPDATE,(function(){t.renderRecommendations()}))}},{key:"removeEvents",value:function(){var t=this;this.eventBus.off(r.appEvents.CONFIG_UPDATE,(function(){t.renderRecommendations()}))}},{key:"renderRecommendations",value:(i=o()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getRecommendations();case 2:(e=t.sent).length>0?this.updateContent(this.renderTemplate(e),!0):this.updateContent();case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getQueryParams",value:function(){var t=d.a.getContext(),e=d.a.getPrString(),n=this.getItemsToIgnore().join("");return t&&e?(e=d.a.replacePackagesInPrString(e),e=d.a.resolvePackagesInPrString(e),new URLSearchParams({context:t,ids:e,ignore:n})):null}},{key:"getItemsFromData",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return t.map((function(t){var n=d.a.getItem(t.id);return!n||e.shouldBeIgnored(n.status)?null:te(te({},t),n)})).filter((function(t){return null!==t})).slice(0,n)}},{key:"shouldBeIgnored",value:function(t){return["00000","00001","00010","00011","00100","00101","00110","00111","01000","01001","01010","01011","01100","01101","01110","01111","10000"].includes(t)}},{key:"getItemsToIgnore",value:function(){var t=this,e=d.a.getItems();return e?Object.values(e).filter((function(e){return t.shouldBeIgnored(e.status)&&3===e.id.length})).map((function(t){return t.id})):[]}},{key:"getRecommendationsBackendUrl",value:function(){var t=SETUPS.get("nemo.recommendationsBackendUrl"),e=this.getQueryParams();return e&&t?t+"?"+e.toString():null}},{key:"getRecommendations",value:(n=o()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.polling.wait(d.a.isInitialized,5e3);case 2:return t.next=4,this.fetchRecommendations();case 4:if(!((e=t.sent)&&e.configuration&&e.configuration.recommendations)){t.next=7;break}return t.abrupt("return",this.getItemsFromData(e.configuration.recommendations));case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"fetchRecommendations",value:(e=o()(s.a.mark((function t(){var e,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.getRecommendationsBackendUrl()){t.next=3;break}return t.abrupt("return",null);case 3:return n={method:"GET"},t.abrupt("return",fetch(e,n).then((function(t){return t.json()})).catch((function(t){return console.error("Error:",t),null})));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"renderTemplate",value:function(t){return u.template.render('\n<div class="audi-headline-order-3 nm-module-summary-dynamic-recommendation-headline-main">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose-headline\']}}\n</div>\n<p class="audi-copy-s nm-module-summary-dynamic-recommendation-paragraph">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose\']}}\n</p>\n\n\x3c!-- list --\x3e\n<div class="nm-module-summary-dynamic-recommendation-itemlist">\n\t\x3c!-- configurator item --\x3e\n\t{{~it :value}}\n\t\t{{##def.dataConfiguratorId :\n\t\t\t{{? value.id}}\n\t\t\t\tdata-configurator-id="{{=value.id}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t{{##def.dataConfiguratorGroup :\n\t\t\t{{? value.RadioGroup}}\n\t\t\t\tdata-configurator-group="{{=value.RadioGroup}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t<div class="nm-j-configurator-item nm-j-configurator-status_{{=value.status}}" {{#def.dataConfiguratorId}} {{#def.dataConfiguratorGroup}}>\n\t\t\t<div class="nm-module-summary-dynamic-recommendation-item">\n\n\t\t\t\t\x3c!-- checkbox --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-checkbox audi-checkbox nm-j-configurator-delegate-click">\n\t\t\t\t\t<span class="audi-checkbox">\n\t\t\t\t\t\t<span class="audi-checkbox-symbol nm-module-summary-dynamic-recommendation-checkbox-symbol">\n\t\t\t\t\t\t\t<svg class="nm-icon-select-small nm-module-summary-dynamic-recommendation-symbol">\n\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/select-small.svg#nm-icon-select-small"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- item text --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-itemtext">\n\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-itemname-text">{{=value.name}}</p>\n\t\t\t\t\t\x3c!-- non renderable sets a remark text --\x3e\n\t\t\t\t\t{{? value.nonrenderable}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text">\n\t\t\t\t\t\t\t{{=window.i18n[\'nemo.ui.common.note\']}}:\n\t\t\t\t\t\t\t{{=window.i18n[\'configuration.not-rendable-message\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !value.RadioGroup}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text nm-j-configurator-text-packageDescription"></p>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image-offerrate-wrapper">\n\t\t\t\t\t\x3c!-- image or video --\x3e\n\t\t\t\t\t{{##def.videoClass :\n\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\tnm-module-summary-dynamic-recommendation-video\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t#}}\n\n\t\t\t\t\t{{? value.image}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image {{#def.videoClass}}">\n\t\t\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t\t\t<a class="nm-layerLink" href="{{=value.url}}">\n\t\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-offerrate-wrapper">\n\t\t\t\t\t\t<audi-configurator-offerrate data-rate="{{=parseInt(parseFloat(value.einbaurate) * 100, 10)}}" class="nm-offer-rate">\n\t\t\t\t\t\t\t<div class="nm-offer-rate-container">\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-text audi-copy-s"><span class="nm-offer-rate-value">0</span>%</div>\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-image">\n\t\t\t\t\t\t\t\t\t<svg class="nm-offer-rate-icon" viewbox="0 0 48 48">\n\t\t\t\t\t\t\t\t\t\t<path d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke-opacity="0.6" stroke="#333" fill="none" />\n\t\t\t\t\t\t\t\t\t\t<path class="nm-offer-rate-path" d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke="#f50537" stroke-width="3" fill="none" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</audi-configurator-offerrate>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-price-icons">\n\t\t\t\t\t\x3c!-- price --\x3e\n\t\t\t\t\t{{? value.Series || value.price}}\n\t\t\t\t\t\t<div class="audi-copy-m nm-module-summary-dynamic-recommendation-price nm-j-configurator-text-price">\n\t\t\t\t\t\t\t{{? value.Series}}\n\t\t\t\t\t\t\t\t{{=window.i18n[\'nemo.common.serie\']}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? value.price}}\n\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\x3c!-- infolayer --\x3e\n\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-iconwrapper">\n\t\t\t\t\t\t\t<a class="nm-module-summary-dynamic-recommendation-iconlink nm-layerLink" href="{{=value.url}}" title="{{=window.i18n[\'more-information\']}}">\n\t\t\t\t\t\t\t\t<svg class="nm-icon-system-info-small nm-module-summary-dynamic-recommendation-icon-system-info-small">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-info-small.svg#nm-icon-system-info-small"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{~}}\n</div>\n\n\x3c!-- legend --\x3e\n<div class="audi-copy-m nm-module-summary-dynamic-recommendation-legend-headline">\n\t{{=window.i18n[\'dynamic-recommendations.legend-headline\']}}\n</div>\n<div class="nm-module-summary-dynamic-recommendation-legend-wrapper">\n\t<svg class="nm-icon-offer-rate-small nm-module-summary-dynamic-recommendation-icon-offer-rate-small">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/offer-rate-small.svg#nm-icon-offer-rate-small"}}></use>\n\t</svg>\n\t<p class="audi-copy-s">\n\t\t{{=window.i18n[\'dynamic-recommendations.legend-info\']}}\n\t</p>\n</div>',t)}},{key:"updateContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.moduleContainer.innerHTML=t,e?this.classList.remove(c.selectors.hidden):this.classList.add(c.selectors.hidden)}}],[{key:"selectors",get:function(){return{container:".nm-module-summary-dynamic-recommendation",hidden:"nm-hidden"}}}]),c}(ne);function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function oe(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-dynamic-recommendation-bff")||window.customElements.define("audi-configurator-dynamic-recommendation-bff",re),Object.setPrototypeOf(oe.prototype,HTMLElement.prototype),Object.setPrototypeOf(oe,HTMLElement);var ae=function(t){T()(n,t);var e=ie(n);function n(){return h()(this,n),e.apply(this,arguments)}return S()(n,[{key:"isInitialFiltersReset",get:function(){return"true"===this.dataset.resetFilters}},{key:"isConfigurationObserver",get:function(){return"false"===this.dataset.resetFilters}},{key:"connectedCallback",value:function(){this.initElements(),this.addEvents(),this.initTrimlineFilter=this.initTrimlineFilter.bind(this),this.isConfigurationObserver&&f.stateRegistry.subscribeToStore(kt.a,this.initTrimlineFilter)}},{key:"disconnectedCallback",value:function(){this.removeEvents(),this.isConfigurationObserver&&f.stateRegistry.unsubscribeFromStore(kt.a,this.initTrimlineFilter)}},{key:"addEvents",value:function(){var t=this;this.resetButton.addEventListener("click",(function(){return t.resetFilters()})),x()(this.radioFilters).forEach((function(e){e.addEventListener("change",(function(){return t.updateRadioFilterSelection(e)}))})),x()(this.selectFilters).forEach((function(e){e.addEventListener("change",(function(){return t.updateFilters()}))}))}},{key:"removeEvents",value:function(){var t=this;this.resetButton.removeEventListener("click",(function(){return t.resetFilters()})),x()(this.radioFilters).forEach((function(e){e.removeEventListener("change",(function(){return t.updateRadioFilterSelection(e)}))})),x()(this.selectFilters).forEach((function(e){e.removeEventListener("change",(function(){return t.updateFilters()}))}))}},{key:"initElements",value:function(){this.engineEntries=this.querySelectorAll(n.selectors.engineEntry),this.selectFilters=this.querySelectorAll(n.selectors.selectFilter),this.radioFilters=this.querySelectorAll(n.selectors.radioFilter),this.visibleCounter=this.querySelector(n.selectors.enginesVisibleCount),this.noResultsBox=this.querySelector(n.selectors.noResults),this.resetButton=this.querySelector(n.selectors.resetButton),this.isInitialFiltersReset&&this.resetFilters()}},{key:"resetFilters",value:function(){x()(this.selectFilters).forEach((function(t){return t.value=""})),x()(this.radioFilters).forEach((function(t){return t.checked=!1})),this.updateFilters()}},{key:"initTrimlineFilter",value:function(t){var e=t.selectedTrimline;e&&(x()(this.selectFilters).forEach((function(t){t.value=e})),this.updateFilters())}},{key:"updateRadioFilterSelection",value:function(t){var e=t.getAttribute("name");x()(this.querySelectorAll("".concat(n.selectors.radioFilter,'[name="').concat(e,'"]'))).filter((function(e){return e!==t})).forEach((function(t){return t.checked=!1})),this.updateFilters()}},{key:"updateFilters",value:function(){var t=this.getRadioFiltersValues().concat(this.getSelectFiltersValues());this.updateTrimlineDetailLink(t),this.filterEngineList(t)}},{key:"updateTrimlineDetailLink",value:function(t){var e=t.filter((function(t){return"trimline"===t.name}));if(x()(this.querySelectorAll(n.selectors.trimlineDetailLinks)).forEach((function(t){return t.classList.add(n.selectors.hidden)})),e.length>0){var r=this.querySelector("".concat(n.selectors.trimlineDetailLinks,'[data-trimline="').concat(e[0].value,'"]'));r&&r.classList.remove(n.selectors.hidden)}}},{key:"getRadioFiltersValues",value:function(){var t=this;return x()(this.radioFilters).filter((function(t){return!0===t.checked})).map((function(e){return t.getFilter(e)}))}},{key:"getSelectFiltersValues",value:function(){var t=this;return x()(this.selectFilters).filter((function(t){return""!==t.value})).map((function(e){return t.getFilter(e)}))}},{key:"getFilter",value:function(t){return{name:t.getAttribute("name"),value:t.value}}},{key:"filterEngineList",value:function(t){var e=t.reduce((function(t,e){return"".concat(t,"[data-filter-").concat(e.name,'~="').concat(e.value,'"]')}),n.selectors.engineEntry);x()(this.engineEntries).forEach((function(t){return t.classList.add(n.selectors.hidden)})),x()(this.querySelectorAll(e)).forEach((function(t){return t.classList.remove(n.selectors.hidden)})),this.hideEmptyContainer(),this.updateVisibleEngineCounter()}},{key:"hideEmptyContainer",value:function(){x()(this.querySelectorAll(n.selectors.engineSubList)).forEach((function(t){0===t.querySelectorAll(n.selectors.engineEntry+n.selectors.notHidden).length?t.classList.add(n.selectors.hidden):t.classList.remove(n.selectors.hidden)}))}},{key:"updateVisibleEngineCounter",value:function(){var t=this.querySelectorAll(n.selectors.engineEntry+n.selectors.notHidden).length;this.visibleCounter.innerHTML=t,0!==t?this.noResultsBox.classList.add(n.selectors.hidden):this.noResultsBox.classList.remove(n.selectors.hidden)}}],[{key:"selectors",get:function(){return{radioFilter:".nm-module-engine-selection-filter-radio",selectFilter:".nm-module-engine-selection-filter-select",engineEntry:".nm-module-engine-selection-engine",engineSubList:".nm-module-engine-selection-engine-list",trimlineDetailLinks:".nm-module-engine-selection-trimline-layerlink-icon",enginesVisibleCount:".nm-j-enginesVisible",noResults:".nm-module-engine-selection-no-results",resetButton:".nm-module-engine-selection-no-results-reset",notHidden:":not(.nm-hidden)",hidden:"nm-hidden"}}}]),n}(oe);function se(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function ce(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-engine-selection")||window.customElements.define("audi-configurator-engine-selection",ae),Object.setPrototypeOf(ce.prototype,HTMLElement.prototype),Object.setPrototypeOf(ce,HTMLElement);var le=function(t){T()(n,t);var e=se(n);function n(){return h()(this,n),e.call(this)}return S()(n,[{key:"connectedCallback",value:function(){document.body.classList.add("nm-has-current-consumption")}},{key:"disconnectedCallback",value:function(){document.body.classList.remove("nm-has-current-consumption")}}]),n}(ce);window.customElements.get("audi-configurator-current-consumption")||window.customElements.define("audi-configurator-current-consumption",le);var ue={},de={__:ue,initialized:!1};ue.oDefaults={sSelectorLayerOuter:".nm-layer-equipment-search-layer",sSelectorSnippetText:".nm-j-configurator-text-",sSelectorFooter:".nm-equipment-search-footer__inner-wrapper",sSelectorResultsWrap:".nm-equipment-search-result-container",sSelectorSearchInput:".nm-equipment-search-input",sSelectorSearchForm:".nm-equipment-search-form form"},ue.searchListArr=[],ue.getAllItems=function(){var t,e,n,r,i,o=d.a.getFamilies();if(ue.searchListArr=[],o)for(t in o)if(t&&"equipment"===o[t].type&&(r={family:o[t]},e=d.a.getItemsByFamily(t))){for(n in r.items=[],e)n&&(i=d.a.getItem(n),r.items.push(i));ue.searchListArr.push(r)}return ue.searchListArr},ue.handleConfigUpdate=function(){var t,e,n,r,i=ue.getLayer();i&&(ue.updateFooterText(i),(t=ue.getAllItems())&&((e=ue.getSearchString()).length>1?(n=ue.validateSearchString(e),r=ue.parseResults(n.search),ue.populateResultList(r)):ue.populateResultList(t)))},ue.parseResults=function(t){var e,n=[];if(t)for(e in t)e&&t[e].value&&n.push(t[e].value);return n},ue.populateResultList=function(t){var e,n=ue.getResultsWrapContainer();if(t&&n){e=u.template.render('{{?it.length}}\n\t{{~ it :group }}\n\t\t{{? !!group.family}}\n\t\t\t{{? !!group.items}}\n\n\n\t\t\t/*hide groups where all elements have hidden status*/\n\t\t\t{{var $hideGroup = false;}}\n\t\t\t{{~ group.items :itemcheck }}\n\t\t\t\t{{? !!itemcheck.status && itemcheck.status == "00000"}}\n\t\t\t\t\t{{$hideGroup = true;}}\n\t\t\t\t{{?}}\n\t\t\t{{~}}\n\n\t\t\t{{? !$hideGroup}}\n\t\t\t<ul class="nm-equipment-search-result-group">\n\t\t\t\t<li>\n\t\t\t\t\t<div class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=group.family.name}}</div>\n\t\t\t\t\t<ul class="nm-equipment-search-result-list">\n\t\t\t\t\t{{~ group.items :item }}\n\t\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix"\n\t\t\t\t\t\tdata-configurator-id="{{=item.id}}">\n\t\t\t\t\t\t\t<div class="nm-equipment-search-result-item-wrap">\n\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-image">\n\t\t\t\t\t\t\t\t\t{{? !!item.image}}\n\t\t\t\t\t\t\t\t\t<img src="{{=item.image}}" alt="{{=item.name}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-content-wrap">\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-desc">\n\t\t\t\t\t\t\t\t\t\t<p class="nm-j-configurator-name nm-el-lbl nm-el-lbl-01 nm-at-lbl-b">\n\t\t\t\t\t\t\t\t\t\t\t{{=item.name}}\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.nonrenderable && item.nonrenderable == true }}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-el-pg nm-el-pg-04"><br />{{=window.i18n[\'configuration.not-rendable-message\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{{? !!item.description}}\n\t\t\t\t\t\t\t\t\t\t<p class="nm-equipment-search-result-description nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t\t{{= item.description || \'\'}}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t{{? SETUPS.get(\'scopes.nemo.SHOW_EU_TYRE_LABEL\') && item.family.includes(\'Raeder_Reifen\')}}\n\t\t\t\t\t\t\t\t\t\t\t{{ var randomId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15); }}\n\t\t\t\t\t\t\t\t\t\t\t<feature-app id="tyre-label-link:equipment-search:{{=randomId}}" base-url="https://featureapps.audi.com/audi-feature-app-tyre-label-link/1/" src="audi-feature-app-tyre-label-link.js" server-src="audi-feature-app-tyre-label-link.commonjs.js" config=\'{"optionId": "{{=item.id}}"}\'></feature-app>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-icons">\n\t\t\t\t\t\t\t\t\t\t{{?!!item.url}}\n\t\t\t\t\t\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=item.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t<span class="nm-conflict-icon" title="#I18N("nemo.ui.common.conflict" "Konflikt")"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-price nm-el-lbl nm-el-lbl-01">\n\t\t\t\t\t\t\t\t\t\t{{? !!item.price}}\n\t\t\t\t\t\t\t\t\t\t<span class="nm-j-configurator-text-price">{{=item.price}}</span>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-add-btn">\n\t\t\t\t\t\t\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state01">{{=window.i18n[\'search-layer.add-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state02">{{=window.i18n[\'search-layer.item-included\']}}</span>\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state03">{{=window.i18n[\'search-layer.remove-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t{{?}}\n\t\t\t{{?}}\n\t\t{{?}}\n\t{{~}}\n{{?}}',t),n.innerHTML=e;var r=new CustomEvent("content:rendered",{detail:{element:n}});document.dispatchEvent(r)}},ue.getLayer=function(){return!!document.querySelector(ue.oDefaults.sSelectorLayerOuter)&&document.querySelector(ue.oDefaults.sSelectorLayerOuter)},ue.getResultsWrapContainer=function(){var t=document.querySelector(ue.oDefaults.sSelectorResultsWrap);if(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}return!1},ue.updateFooterText=function(t){var e=!1,n=SETUPS.get("scope.nemo.hide_financing_rate")||!1;if(t)if(d.a.isConfigurable()&&d.a.getConfiguration()){var r=d.a.getConfiguration();for(var i in r)if(r[i]){"rate"===i&&(e=!0);var o=t.querySelector(ue.oDefaults.sSelectorFooter+" "+ue.oDefaults.sSelectorSnippetText+i);o&&(o.textContent=r[i])}t.querySelector(ue.oDefaults.sSelectorFooter+" > span").classList.remove("nm-hidden"),n||!e?t.querySelector(".nm-equipment-search-rate").classList.add("nm-hidden"):t.querySelector(".nm-equipment-search-rate").classList.remove("nm-hidden")}else t.querySelector(ue.oDefaults.sSelectorFooter+" > span").classList.add("nm-hidden")},ue.getSearchString=function(){var t=document.querySelector(ue.oDefaults.sSelectorSearchInput);return(t?t.value:"").replace(/^\s+/g,"").replace(/</g,"").replace(/>/g,"")},ue.handleSearch=function(t){var e,n,r=ue.getSearchString(),i={},o=document.querySelector(ue.oDefaults.sSelectorSearchForm);if(o){if(n=(o.getAttribute("data-current")||"")!==r||"click"===t.type,t.preventDefault(),t.stopImmediatePropagation(),16===t.keyCode||13===t.keyCode)return;o.setAttribute("data-current",r),r.length>=2&&n?(i=ue.validateSearchString(r),e=ue.parseResults(i.search),ue.populateResultList(e)):0===r.length&&n&&ue.resetSearch()}},ue.searchDebounceHandler=u.dom.debounce(ue.handleSearch,300),ue.validateSearchString=function(t){var e,n=t,r={};return n&&0!==n.length?(-1!==n.indexOf("|")&&(r.prstring=n),d.a.getSearchStopWords()&&(e=new RegExp("\\b(?:i|"+d.a.getSearchStopWords()+")\\b\\s*","gi"),n=n.replace(e,"")),r.search=(!!n&&n.length)>1?d.a.search(n,!0):[],r.searchString=n||ue.getSearchString(),r):[]},ue.resetSearch=function(){ue.searchListArr&&ue.searchListArr.length&&ue.populateResultList(ue.searchListArr)},ue.generateLayerHtml=function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-equipment-search-layer"><div class="nm-layer-equipment-search-layer nm-j-jslayer nm-layer nm-default-layer"></div></div>'},ue.handleLayerLoaded=function(){var t=u.template.render('\n<div class="nm-layer-toolbar">\n\t<div class="nm-layer__close-button nm-j-layer-close-button">\n\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"}}></use>\n\t\t</svg>\n\t</div>\n</div>\n<div class="nm-layer-inner nm-equipment-search-layer-wrapper">\n\t<div class="nm-md-equipment-search">\n\t\t<header class="nm-equipment-search-header">\n\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02">{{=window.i18n[\'nemo.ui.equipment-search.headline\']}}</h2>\n\n\t\t\t<div class="nm-equipment-search-form">\n\t\t\t\t<form action="#" method="GET">\n\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t<input name="q" class="nm-equipment-search-input" type="text" placeholder=\'{{=window.i18n["search-layer.equipment-search-input-placeholder"]}}\'/>\n\t\t\t\t\t\t<input type="reset" class="nm-equipment-search-reset" value="X" />\n\t\t\t\t\t</fieldset>\n\t\t\t\t</form>\n\t\t\t\t<div class="nm-equipment-search-result-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t\t<footer class="nm-equipment-search-footer">\n\t\t\t<div class="nm-equipment-search-footer__inner-wrapper">\n\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b"><span class="nm-j-configurator-text-carlineName"></span> <span class="nm-j-configurator-text-description nm-el-lbl nm-el-lbl-01"></span></span>\n\t\t\t\t<span class="nm-equipment-search-footer__text-price-rate"><span class="nm-j-configurator-text-price nm-el-hdl nm-el-hdl-04 nm-at-hdl-b"></span> <span class="nm-el-lbl nm-el-lbl-01 nm-equipment-search-rate">({{=window.i18n["nemo.ui.equipment-search.rate"]}} <span class="nm-j-configurator-text-rate"></span>)</span></span>\n\t\t\t</div>\n\t\t</footer>\n\t\t<main class="nm-equipment-search-main">\n\t\t</main>\n\t</div>\n</div>',null),e=(document.querySelector(".nm-layer-wrapper-equipment-search-layer"),document.querySelector(ue.oDefaults.sSelectorLayerOuter));e&&(e.innerHTML=t,ue.legacyEventBus.on("keyup",".nm-equipment-search-input",ue.searchDebounceHandler),ue.legacyEventBus.on("paste",".nm-equipment-search-input",ue.handleSearch),ue.legacyEventBus.on("click",".nm-equipment-search-submit",ue.searchDebounceHandler),ue.legacyEventBus.on("click",".nm-equipment-search-reset",ue.resetSearch),ue.legacyEventBus.on("submit",".nm-equipment-search-form form",ue.searchDebounceHandler)),ue.handleConfigUpdate()},ue.addEvents=function(){r.clientLayer.register("equipmentSearchlayer",ue.generateLayerHtml),ue.eventBus.on(r.appEvents.LAYER_LOADED,ue.handleLayerLoaded),ue.eventBus.on(r.appEvents.CONFIG_UPDATE,ue.handleConfigUpdate),de.initialized=!0},de.dispose=function(){var t=document.querySelector(".nm-layer-wrapper-equipment-search-layer");console.log("dispose esmd"),ue.legacyEventBus.off("keyup",".nm-equipment-search-input",ue.searchDebounceHandler),ue.legacyEventBus.off("paste",".nm-equipment-search-input",ue.handleSearch),ue.legacyEventBus.off("click",".nm-equipment-search-submit",ue.searchDebounceHandler),ue.legacyEventBus.off("click",".nm-equipment-search-reset",ue.resetSearch),ue.legacyEventBus.off("submit",".nm-equipment-search-form form",ue.searchDebounceHandler),ue.eventBus.off(r.appEvents.LAYER_LOADED,ue.handleLayerLoaded),ue.eventBus.off(r.appEvents.CONFIG_UPDATE,ue.handleConfigUpdate),t&&t.removeEventListener("scroll")},de.initialize=function(t){ue.eventBus=t,ue.legacyEventBus=jQuery("body"),ue.addEvents()};var fe={},me={__:fe};fe.defaults={expertContainerSelector:".nm-mode-expert",selectorDelegateClick:"nm-toggle",toggleClass:"nm-toggle-open",optionsListHeadSelector:".nm-options-list-head, .nm-module-options-container-headline",optionsGroupListWrapperSelector:".nm-mode-expert-group-list-wrap",optionsGroupWrap:".nm-mode-expert-group-wrap",statusClassPrefix:"nm-j-configurator-status_",listClosedClass:"nm-closed",configurationItemSelector:'[class*="nm-j-configurator-status_"]',hiddenClass:"nm-hidden",counterWrapperSelector:".nm-module-options-container-selected-items",counterSelector:".nm-selected-items"},fe.handleToggleClick=function(t){var e=u.dom.closest(t.target,"."+fe.defaults.selectorDelegateClick),n=u.dom.closest(e,fe.defaults.optionsGroupWrap),i=u.dom.getElementsArray(fe.defaults.optionsGroupListWrapperSelector,n);e.classList.contains(fe.defaults.toggleClass)?e.classList.remove(fe.defaults.toggleClass):e.classList.add(fe.defaults.toggleClass),i.forEach(fe.toggleGroupList),fe.eventBus.emit(r.appEvents.CONTENT_RESIZE)},fe.toggleGroupList=function(t){t.classList.contains(fe.defaults.listClosedClass)?t.classList.remove(fe.defaults.listClosedClass):t.classList.add(fe.defaults.listClosedClass)},fe.getStatusCodeForItem=function(t){return t.className.indexOf(fe.defaults.statusClassPrefix)<0?"":t.className.split(fe.defaults.statusClassPrefix)[1].split(" ")[0]},fe.isItemSelected=function(t){var e=fe.getStatusCodeForItem(t);return/[0,1]{3}1[0,1]/.test(e)},fe.isItemSelectedStandard=function(t){var e=fe.getStatusCodeForItem(t);return/1001[0,1]/.test(e)},fe.isItemSelectedAndNotStandard=function(t){var e=fe.isItemSelected(t),n=fe.isItemSelectedStandard(t);return e&&!n},fe.getSelectedItemsCountFromList=function(t){return u.dom.getElementsArray(fe.defaults.configurationItemSelector,t).reduce((function(t,e){return fe.isItemSelectedAndNotStandard(e)?t+1:t}),0)},fe.updateListCounter=function(t){var e=u.dom.getElement(fe.defaults.counterSelector,t);if(u.dom.isElement(e)){var n=u.dom.closest(t,fe.defaults.optionsGroupWrap),r=u.dom.closest(e,fe.defaults.counterWrapperSelector),i=fe.getSelectedItemsCountFromList(n);e.textContent=i,fe.setTitleForCounter(r,e,i),fe.toggleCounterVisibility(r,i)}},fe.toggleCounterVisibility=function(t,e){e>0?t.classList.remove(fe.defaults.hiddenClass):t.classList.add(fe.defaults.hiddenClass)},fe.setTitleForCounter=function(t,e,n){var r="";n>0&&(r=n+" ",r+=1===n?e.getAttribute("data-text-selected-single"):e.getAttribute("data-text-selected-multi")),t.setAttribute("title",r)},fe.updateLists=function(){var t=u.dom.getElementsArray(fe.defaults.expertContainerSelector),e=u.dom.getElementsArray(fe.defaults.optionsListHeadSelector);t.length<1||e.forEach(fe.updateListCounter)},fe.addEvents=function(){fe.domEventDelegate.on("click",fe.defaults.optionsListHeadSelector,fe.handleToggleClick),fe.eventBus.on(r.appEvents.DOM_UPDATED,fe.updateLists),fe.eventBus.on(r.appEvents.PAGE_LOADED,fe.updateLists)},me.initialize=function(t){fe.eventBus=t,fe.domEventDelegate=u.dom.getEventDelegate("body"),fe.addEvents(),fe.updateLists()};var ge=n(73),pe=n.n(ge),ve=n(100),he=n.n(ve),ye={},Se={},Ee={getTemplateFuncAsync:function(){var t,e,n=this.templateKey||null,i=function(){return""};if(null===n)return Promise.resolve(i);if(t=Ee.getTemplateId(this,n),void 0===Se[t]){if(r.dynamicDot.requiresDynamicDot())return new Promise((function(e,n){r.dynamicDot.getTemplateFromBackend(t).then((function(n){Se[t]=Pt.doT.template(n),e(Se[t])})).catch((function(n){console.warn("Error reading dot-template with id: "+t,n),e(i)}))}));if(!(e=document.querySelector("#"+t))||!e.innerHTML)return Promise.resolve(i);Se[t]=Pt.doT.template(e.innerHTML.trim())}return Promise.resolve(Se[t])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){var n,r,i="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};if(e=e.toLowerCase(),void 0!==t.id){if(n=Ee.sanitizeId(t.id),void 0!==(r=ye[o.id+"-"+n]))return r;if(void 0!==a[r=i+o.id+"-"+o.pageId+"-"+n+"-tpl"])return r;if(void 0!==a[r=i+o.id+"-"+n+"-tpl"])return r}return"Form"===t.formConstructorName&&void 0!==(r=ye[o.id+"-"+o.pageId])?r:(r=i+o.id+"-"+e+"-tpl",void 0!==ye[o.id+"-"+e]||void 0!==a[r=i+o.id+"-"+o.pageId+"-"+e+"-tpl"]||void 0!==a[r=i+o.id+"-"+e+"-tpl"]?r:r=i+e+"-tpl")},FormField:function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);return this.formConstructorName="FormField",this.domId=Ee.sanitizeId(this.id),void 0===this.name&&(this.name=this.id),this.form=e,this.templateKey=this.type,this}};Ee.FormField.prototype.initializeTemplatesAsync=function(){var t=this;return new Promise((function(e){t.getTemplateFuncAsync().then((function(n){t.getString=n,t.registerChange(),e(n)}))}))},Ee.FormField.prototype.getTemplateFuncAsync=Ee.getTemplateFuncAsync,Ee.FormField.prototype.registerChange=function(){var t,e,n=this,r=this.type.toLowerCase();if("radio"===r){t="#"+this.form.id,e='input[type="radio"][name="'+this.domId+'"]';var i='input[type="hidden"][name="'+this.domId+'"]';jQuery(t).on("change",e,(function(){jQuery(i).remove(),(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])}))}else"select"===r||"checkbox"===r?(t="#"+this.form.id,e="#"+this.domId,jQuery(t).on("change",e,(function(){(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])}))):(t="#"+this.form.id,e="#"+this.domId,jQuery(t).on("blur",e,(function(){(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])})))},Ee.FormField.prototype.toString=function(){return this.getString(this)};var Ce=Ee.FormField,be={},we={},_e={getTemplateFuncAsync:function(){var t,e,n=this.templateKey||null,i=function(){return""};if(null===n)return Promise.resolve(i);if(t=_e.getTemplateId(this,n),void 0===we[t]){if(r.dynamicDot.requiresDynamicDot())return new Promise((function(e,n){r.dynamicDot.getTemplateFromBackend(t).then((function(n){we[t]=Pt.doT.template(n),e(we[t])})).catch((function(n){console.warn("Error reading dot-template with id: "+t,n),e(i)}))}));if(!(e=document.querySelector("#"+t))||!e.innerHTML)return Promise.resolve(i);we[t]=Pt.doT.template(e.innerHTML.trim())}return Promise.resolve(we[t])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){var n,r,i="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};o.pageId;if(e=e.toLowerCase(),void 0!==t.id){if(n=_e.sanitizeId(t.id),void 0!==(r=be[o.id+"-"+n]))return r;if(void 0!==a[r=i+o.id+"-"+o.pageId+"-"+n+"-tpl"])return r;if(void 0!==a[r=i+o.id+"-"+n+"-tpl"])return r}return"Form"===t.formConstructorName&&void 0!==(r=be[o.id+"-"+o.pageId])?r:(r=i+o.id+"-"+e+"-tpl",void 0!==be[o.id+"-"+e]||void 0!==a[r=i+o.id+"-"+o.pageId+"-"+e+"-tpl"]||void 0!==a[r=i+o.id+"-"+e+"-tpl"]?r:r=i+e+"-tpl")}};_e.FormItem=function(t,e){return function(t,e){if(!t||!e)return!1;var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(t,this),this.formConstructorName="FormItem",this.domId=_e.sanitizeId(this.id),this.dataFields=t&&"fields"in t?t.fields:[],this.form=e,this.templateKey="item",this.fields=[],this.namedFields={},this},_e.FormItem.prototype.initializeTemplatesAndFieldsAsync=function(){var t=this;return new Promise((function(e){t.getTemplateFuncAsync().then((function(n){t.getString=n,t.processFieldsAsync().then((function(t){e(t)}))}))}))},_e.FormItem.prototype.getTemplateFuncAsync=_e.getTemplateFuncAsync,_e.FormItem.prototype.processFieldsAsync=function(){var t=this;return new Promise((function(e){var n,r,i;if(void 0!==t.dataFields){1===t.dataFields.length&&void 0===t.dataFields[0].label&&(t.dataFields[0].label=t.name,delete t.name,t.info&&(t.dataFields[0].info=t.info,delete t.info));var o=[];for(n=0,r=t.dataFields.length;n<r;n++)i=new Ce(t.dataFields[n],t.form),o.push(i.initializeTemplatesAsync()),t.fields.push(i),t.namedFields[i.id]=i;Promise.allSettled(o).then((function(){e(t.fields)}))}else e(t.fields)}))},_e.FormItem.prototype.toString=function(){return this.getString(this)};var De=_e.FormItem,ke={},xe={},Ae={getTemplateFuncAsync:function(){var t,e=this.templateKey||null,n=function(){return""};if(null===e)return Promise.resolve(n);var i=Ae.getTemplateId(this,e);if(void 0===xe[i]){if(r.dynamicDot.requiresDynamicDot())return new Promise((function(t,e){r.dynamicDot.getTemplateFromBackend(i).then((function(e){xe[i]=Pt.doT.template(e),t(xe[i])})).catch((function(e){console.error("Error reading dot-template with id: "+i,e),t(n)}))}));if(!(t=document.querySelector("#"+i))||!t.innerHTML)return Promise.resolve(n);xe[i]=Pt.doT.template(t.innerHTML.trim())}return Promise.resolve(xe[i])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){var n,r,i="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};o.pageId;if(e=e.toLowerCase(),void 0!==t.id){if(n=Ae.sanitizeId(t.id),void 0!==(r=ke[o.id+"-"+n]))return r;if(void 0!==a[r=i+o.id+"-"+o.pageId+"-"+n+"-tpl"])return r;if(void 0!==a[r=i+o.id+"-"+n+"-tpl"])return r}return"Form"===t.formConstructorName&&void 0!==(r=ke[o.id+"-"+o.pageId])?r:(r=i+o.id+"-"+e+"-tpl",void 0!==ke[o.id+"-"+e]||void 0!==a[r=i+o.id+"-"+o.pageId+"-"+e+"-tpl"]||void 0!==a[r=i+o.id+"-"+e+"-tpl"]?r:r=i+e+"-tpl")},FormGroup:function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);return this.formConstructorName="FormGroup",this.form=e,this.domId=Ae.sanitizeId(this.id),this.templateKey="group",this.dataItems=t.items,this.items=[],this.namedItems={},this}};Ae.FormGroup.prototype.initializeGroupAsync=function(){var t=this;return new Promise((function(e){t.processItemsAsync().then((function(n){t.getTemplateFuncAsync().then((function(n){t.getString=n,e(t.formGroup)}))}))}))},Ae.FormGroup.prototype.getTemplateFuncAsync=Ae.getTemplateFuncAsync,Ae.FormGroup.prototype.processItemsAsync=function(){var t=this;return new Promise((function(e){var n,r,i;if(t.dataItems){var o=[];for(n=0,r=t.dataItems.length;n<r;n++)i=new De(t.dataItems[n],t.form),o.push(i.initializeTemplatesAndFieldsAsync()),t.items.push(i),t.namedItems[i.id]=i;Promise.allSettled(o).then((function(){e(t.items)}))}else e(t.items)}))},Ae.FormGroup.prototype.toString=function(){return this.getString(this)};var Le,Ie=Ae.FormGroup,Te={},Oe={},Pe={},je={},Re={},Be={},Me={__:Be};Be.initFormAsync=function(t){return new Promise((function(e,n){var r=t.attr("id"),i=Be.getUrl("start",r);void 0!==Re[r]?(Te[r]=new Be.Form(Re[r],je),Te[r].initializeFormAsync().then((function(){Te[r].el.appendTo(t),e(Te[r])}))):fetch(i,{credentials:"include"}).then((function(t){if(t.ok)return t.json();throw new Error(t.statusText)})).then((function(n){var i=Me.responseToObj(n);!1===i?(Be.displayStandardError(r),e(r)):i.form?(Te[r]=new Be.Form(i,je),Te[r].initializeFormAsync().then((function(){Te[r].el.appendTo(t),e(Te[r]),i.header&&i.header.subsession&&B.a.setSubsessionID(i.header.subsession)}))):(Be.displayStandardError(r),e(r))})).catch((function(t){Be.displayStandardError(r),n(t)}))}))},Be.bindEnablers=function(){jQuery("body .nm-form input[data-enables]").on("change",(function(t){var e,n,r,i,o;for(i=(e=(n=jQuery(t.target)).attr("data-enables").split(";")).length;i>-1;i--)e[i]=Be.sanitizeId(e[i]);for(r="off"===(r=n.attr("data-active")||"off")?"on":"off",n.attr("data-active",r),i=e.length;i>-1;i--)e[i]&&(o="off"===r&&"disabled",jQuery("#nm-id-form-field-"+e[i]+" input").attr("disabled",o))}))},Be.getCustomTemplateIds=function(t){var e={};return r.dynamicDot.requiresDynamicDot()?(e["nm-id-form-or_nls-vvega-nls-page-vvega-nls-foreword-tpl"]=!0,e["nm-id-form-tdrdeal-vvega-enquiry-dealer-page-form-tpl"]=!0,e["nm-id-form-or_nls-vvega-nls-page-vvega-nls-foreword-tpl"]=!0,e["nm-id-form-tdrdealerreq-vvega-probe-request-page-Item-VehicleConfigurationInterest-VehicleCarlineInterest-tpl"]=!0):jQuery(t).each((function(){e[jQuery(this).attr("id")]=!0})),e},Be.blockForm=function(t){var e=jQuery("#"+t.id);e.find(".nm-form-shader").height(e.height()+"px").show()},Be.handleFormAsync=function(t,e){return new Promise((function(n){var i={},o=!0;!1===(t=Me.responseToObj(t))?Be.displayStandardError(e.id):t.form?(jQuery("#"+e.id).off("blur, click, change"),jQuery("#"+e.id+" button[data-button-action]").off("click"),o=!1,Te[e.id]=new Be.Form(t,je),Te[e.id].initializeFormAsync().then((function(){jQuery("#"+t.form.id).html("").append(Te[e.id].el),Be.scrollToTop(e.id),n(Te[e.id])}))):t.success?(i.formHeadline=e.data.form.name,i.message=t.message,jQuery("#"+e.id).html(e.getSuccessString(i)),jQuery("#"+e.id).attr("data-form-is-finished",1),Be.eventBus.emit(r.appEvents.FORM_FINISHED,{id:e.id}),t.configuration&&B.a.handleExternalConfiguration(t,{startType:null}),delete Te[e.id]):(Be.displayStandardError(e.id),delete Te[e.id]),o&&(Be.scrollToTop(e.id),n(e.id))}))},Be.scrollToTop=function(t){jQuery("#"+t).closest(".nm-layer-wrapper").length?jQuery(".nm-layer-wrapper").scrollTop(0):jQuery("body").scrollTop(0)},Be.displayStandardError=function(t){var e=jQuery("#"+t),n=e.find(".nm-form-shader"),r=e.find(".nm-form-standard-error");n.hide(),e.html(r.html())},Be.getUrl=function(t,e){var n=d.a.getPrString(),r=d.a.getContext(),i=d.a.getSubsessionID(),o=!!d.a.getCarline(),a=[];return r&&a.push("context="+r),i&&a.push("subsession="+i),("tdrdealerreq"===e&&o&&n||"tdrdealerreq"!==e&&n)&&a.push("ids="+encodeURIComponent(n)),a.push("action="+encodeURIComponent(t)),a.push("id="+encodeURIComponent(e)),Le+"?"+a.join("&")},Be.parseData=function(t){var e;try{e=JSON.parse(t)}catch(t){return!1}return e},Be.getTemplateFuncAsync=function(){var t,e,n=this.templateKey||null,i=function(){return""};if(null===n)return Promise.resolve(i);if(t=Be.getTemplateId(this,n),void 0===Pe[t]){if(r.dynamicDot.requiresDynamicDot())return new Promise((function(e,n){r.dynamicDot.getTemplateFromBackend(t).then((function(n){Pe[t]=Pt.doT.template(n),e(Pe[t])})).catch((function(e){console.error("Error reading dot-template with id: "+t,e),n(e)}))}));if(!(e=document.querySelector("#"+t))||!e.innerHTML)return Promise.resolve(i);Pe[t]=Pt.doT.template(e.innerHTML.trim())}return Promise.resolve(Pe[t])},Be.sanitizeId=function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},Be.getTemplateId=function(t,e){var n,r,i="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};if(e=e.toLowerCase(),void 0!==t.id){if(n=Be.sanitizeId(t.id),void 0!==(r=Oe[o.id+"-"+n]))return r;if(void 0!==a[r=i+o.id+"-"+o.pageId+"-"+n+"-tpl"])return r;if(void 0!==a[r=i+o.id+"-"+n+"-tpl"])return r}return"Form"===t.formConstructorName&&void 0!==(r=Oe[o.id+"-"+o.pageId])?r:(r=i+o.id+"-"+e+"-tpl",void 0!==Oe[o.id+"-"+e]||void 0!==a[r=i+o.id+"-"+o.pageId+"-"+e+"-tpl"]||void 0!==a[r=i+o.id+"-"+e+"-tpl"]?r:r=i+e+"-tpl")},Be.Form=function(t,e){return this.formConstructorName="Form",this.data=t,this.id=t.form?t.form.id:void 0,this.domId=Be.sanitizeId(this.id),this.customTemplateIds=e||{},this.templateKey="form",this.groups=[],this.fields=[],this.pageId=this.getPageId(),this.processSteps=this.getProcessSteps(),this.processStepName=this.getStepHeadline(),this},Be.Form.prototype.initializeFormAsync=function(){var t=this;return new Promise((function(e,n){var r=[];r.push(t.processGroupsAsync()),r.push(t.getTemplateFuncAsync()),r.push(t.getSuccessTemplateFuncAsync()),Promise.all(r).then((function(n){var r=he()(n,3),i=(r[0],r[1]),o=r[2];t.getString=i,t.getSuccessString=o,t.load(),e()})).catch((function(t){console.error("Error initializing form",t),n(t)}))}))},Be.Form.prototype.getPageId=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return this.data.pages[t].id;return null},Be.Form.prototype.getStepHeadline=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return this.data.pages[t].name;return null},Be.Form.prototype.getProcessSteps=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return{step:t+1,maxSteps:this.data.pages.length};return null},Be.Form.prototype.getSuccessTemplateFuncAsync=function(){var t,e="nm-id-form-success-tpl";if(void 0===Pe[e]){if(r.dynamicDot.requiresDynamicDot())return new Promise((function(t,n){r.dynamicDot.getTemplateFromBackend(e).then((function(n){Pe[e]=Pt.doT.template(n),t(Pe[e])})).catch((function(t){console.error("Error reading dot-template with id: "+e,t),n(t)}))}));if(!(t=document.querySelector("#"+e))||!t.innerHTML)return Promise.resolve((function(){return""}));Pe[e]=Pt.doT.template(t.innerHTML.trim())}return Promise.resolve(Pe[e])},Be.Form.prototype.getTemplateFuncAsync=Be.getTemplateFuncAsync,Be.Form.prototype.processGroupsAsync=function(){var t,e,n,r=this;return new Promise((function(i){if(r.data.form&&r.data.form.groups){var o=[];for(t=0,e=r.data.form.groups.length;t<e;t++)n=new Ie(r.data.form.groups[t],r),o.push(n.initializeGroupAsync()),r.groups.push(n);Promise.allSettled(o).then((function(){i(r.groups)}))}else i(r.groups)}))},Be.Form.prototype.load=function(){var t,e;e={formHeadline:this.data.form.name,pageDisclaimers:this.data.form.disclaimers,pageHeadline:this.data.form.headline,pageDescription:this.data.form.description,pageError:this.data.form.error,groups:this.groups,pages:this.data.pages,id:this.data.form.id,actions:this.data.form.actions},void 0===(t=jQuery("#"+this.data.form.id)).attr("data-form-is-first-view")?t.attr("data-form-is-first-view",1):t.attr("data-form-is-first-view",0),void 0!==this.data.form.footnote&&(e.footnote=this.data.form.footnote),this.processSteps&&(t.attr("data-form-process-step",this.processSteps.step),t.attr("data-form-process-max",this.processSteps.maxSteps)),this.processStepName&&t.attr("data-form-process-name",this.processStepName),this.el=jQuery(this.getString(e));var n=this;window.setTimeout((function(){n.bindActions(),n.bindActionLinks(),n.preventSubmit(),Be.eventBus.emit(r.appEvents.FORM_LOADED,{id:n.id,form:n})}),100)},Be.Form.prototype.preventSubmit=function(){jQuery("#"+this.id+" form").on("submit",(function(t){return t.preventDefault(),!1}))},Be.Form.prototype.bindActions=function(){var t=this;jQuery("#"+this.id+" button[data-button-action]").on("click",(function(e){var n,r,i;e.preventDefault(),r=(n=jQuery(e.target)).attr("data-button-action"),i=n.attr("data-form-id"),"cancel"===r&&n.addClass("nm-button-cancel"),i===t.id&&r&&(Be.blockForm(t),t.serializeAndSend(r,t.id))}))},Be.Form.prototype.bindActionLinks=function(){var t=this;jQuery("#"+this.id+" .nm-form-action-link").on("click",".nm-form-action-link",(function(e){e.preventDefault(),t.serializeAndSend(jQuery(this).attr("data-form-action"),t.id)}))},Be.Form.prototype.disableButtons=function(){var t,e,n;if(this.data&&this.data.form&&this.data.form.actions)for(t=0,e=this.data.form.actions.length;t<e;t++)!0===(n=this.data.form.actions[t]).disable_on_change&&jQuery('button[data-button-action="'+n.action+'"]').hide()},Be.Form.prototype.changed=function(){this.disableButtons()},Be.Form.prototype.autoSubmit=function(t){var e=t||"submit";Be.blockForm(this),this.serializeAndSend(e,this.id)},Be.Form.prototype.serializeAndSend=function(t,e){var n,r,i=jQuery("#"+e+" form"),o=Be.getUrl(t,e),a=i.serializeArray(),s=a.length,c=[],l=this,u=[];for(r=0;r<s;r+=1)-1!==a[r].name.indexOf("DateTime-")?(void 0===u[n=a[r].name.slice(9,a[r].name.length-2)]&&(u[n]=[]),u[n].push(a[r].value)):c.push(a[r]);for(var d in u)u.hasOwnProperty(d)&&"0"!==u[n][0]&&"0"!==u[n][1]&&"0"!==u[n][2]&&(n=u[n].reverse().join("-"),c.push({name:d,value:n}));var f=c.reduce((function(t,e,n){return t+(n>0?"&":"")+e.name+"="+e.value}),"");return fetch(o,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:f,credentials:"include"}).then((function(t){if(t.ok)return t.json();throw new Error(t.statusText)})).then((function(t){return Be.handleFormAsync(t,l)})).catch((function(){Be.displayStandardError(l)}))},Me.responseToObj=function(t){if(!t)return!1;if("object"===pe()(t))return t;try{return JSON.parse(t)}catch(t){return!1}},Me.layerLoadHandler=function(t){jQuery(t).find(".nm-form").each((function(){Be.initFormAsync(jQuery(this))}))},Me.processNavHandler=function(t){var e,n=jQuery(t.target);t.preventDefault(),"true"===n.attr("data-selectable")&&(e=n.parents(".nm-form").attr("id"),Me.getForm(e).serializeAndSend(n.attr("data-action"),e))},Me.addInitData=function(t,e){Re[t]=e},Me.getForm=function(t){return Te[t]},Be.initialize=function(){var t;Le=SETUPS.get("nemo.url.formapi"),Oe=SETUPS.get("nemo.form.templatemap"),je=Be.getCustomTemplateIds(".nm-custom-form-tpl"),Be.eventBus.on(r.appEvents.LAYER_LOADED,(function(t){t&&t.element&&Me.layerLoadHandler(t.element)})),jQuery("body .nm-process-navigation a").on("click",Me.processNavHandler),Be.bindEnablers(),(t=jQuery(".nm-layer-wrapper")).length&&Me.layerLoadHandler(t)},Me.initialize=function(t){Be.eventBus=t,Be.legacyEventBus=jQuery("body"),Be.initialize()};var Fe={},Ue={__:Fe};Fe.instance=!1,Fe.oDefaults={sDropdownSelectionClass:"nm-at-select-default-val"},Fe.addEvents=function(){Fe.eventBus.on(r.appEvents.PAGE_LOADED,Fe.onPageLoaded),Fe.eventBus.on(r.appEvents.FORM_LOADED,Fe.onFormLoaded),Fe.handleSelectChanges()},Fe.onPageLoaded=function(){Fe.handleSelectChanges()},Fe.onFormLoaded=function(){Fe.handleSelectChanges()},Fe.handleSelectChanges=function(t){var e=jQuery("select");jQuery.each(e,(function(){var t=jQuery(this);Fe.legacyEventBus.on("change.select",Fe.updateSelect),Fe.setSelectState(t)}))},Fe.updateSelect=function(t){var e=jQuery(t.target);Fe.setSelectState(e)},Fe.setSelectState=function(t){var e,n,r,i=t.find("option:selected");jQuery.each(i,(function(){n=jQuery(this),e=n.val(),r=void 0!==n.attr("data-is-default"),n.parent().toggleClass(Fe.oDefaults.sDropdownSelectionClass,e&&"*"===e||r)}))},Fe.initialize=function(){Fe.addEvents(),Fe.handleSelectChanges()},Ue.initialize=function(t){Fe.eventBus=t,Fe.legacyEventBus=jQuery("body"),Fe.initialize()};var Ne=".nm-j-simpleform",ze={},Qe={__:ze};ze.scanSource=function(t){x()(t.querySelectorAll(Ne)).forEach((function(t){return ze.initForm(t)}))},ze.initForm=function(t){var e=t.getAttribute("id"),n=t.querySelector("form");n.addEventListener("submit",(function(t){t.preventDefault(),ze.onSubmit(e,n)}))},ze.onSubmit=function(t,e){var n=ze.serializeForm(e);"audicode-input"===t&&(n.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i)&&(n="audicode="+n.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i)[1].toUpperCase()));ze.call(t,n)},ze.serializeForm=function(t){var e=new FormData(t);return x()(e).reduce((function(t,e){return(t?t+"&":"")+e[0]+"="+e[1]}),"")},ze.getUrl=function(t){var e=[],n=d.a.getContext();n&&e.push("context="+n);var r=d.a.getSubsessionID();r&&e.push("subsession="+r);var i=d.a.getPrString();i&&e.push("ids="+encodeURIComponent(i));var o=SETUPS.get("nemo.url.form."+t);return(o+=-1===o.indexOf("?")?"?":"&")+e.join("&")},ze.call=function(){var t=o()(s.a.mark((function t(e,n){var r,i,o,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=document.getElementById(e)).classList.add("nm-j-simpleform-loading"),r.classList.remove("nm-j-simpleform-error","nm-j-simpleform-success"),i=r.getAttribute("data-dpu-form-id")||e,o=ze.getUrl(i),a=o+(o.indexOf("?")<0?"?":"&")+n,t.next=8,fetch(a,{credentials:"include"}).then((function(t){if(t.ok)return t.json();throw new Error(t.statusText)})).then((function(t){ze.handleSuccess(t,e,i)})).catch((function(t){return console.log("Error fetching simple-form request - server responded with: ",t)}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ze.handleSuccess=function(t,e,n){var i=document.getElementById(e),o=Me.responseToObj(t);if(!o||!o[n])return ze.handleFail(o,e,n);2===Math.floor(o[n].statuscode/100)?(x()(i.querySelectorAll(".nm-error")).forEach((function(t){return t.innerHTML=""})),o[n].message&&x()(i.querySelectorAll(".nm-success")).forEach((function(t){return t.innerHTML=o[n].message})),i.classList.remove("nm-j-simpleform-error"),i.classList.add("nm-j-simpleform-success"),ze.eventBus.trigger(r.appEvents.FORM_FINISHED,{id:e,response:o}),i.setAttribute("data-form-is-finished","1"),"audicode-input"===e&&(r.router.open("page",d.a.getCurrentCarlineUrl()),document.querySelector(".nm-j-layer-close-button").click())):(ze.handleFail(o,e,n),ze.eventBus.emit(r.appEvents.FORM_ERROR,{id:e,response:o})),i.classList.remove("nm-j-simpleform-loading")},ze.handleFail=function(t,e,n){var r=document.getElementById(e),i=ze.isDefaultErrorWithDpuMessage(t,e,n)?t[n].message:ze.getFormErrorMessage(t),o=r.querySelectorAll(".nm-error");o&&x()(o).forEach((function(t){return t.innerHTML=i})),r.classList.add("nm-j-simpleform-error"),r.classList.remove("nm-j-simpleform-success","nm-j-simpleform-loading"),console.log("form/simple.handleFail",i)},ze.isDefaultErrorWithDpuMessage=function(t,e,n){return!!(t&&t.header.error&&"DEFAULT"===t.header.error.id&&n&&t[n]&&t[n].message)},ze.getFormErrorMessage=function(t){return t.login&&!t.login.success?d.a.getErrorMessage("LOGIN_FAILED"):d.a.getErrorMessage(t.header.error)},ze.addEvents=function(){ze.eventBus.on(r.appEvents.LAYER_LOADED,(function(t){t&&t.element&&ze.scanSource(t.element)})),ze.scanSource(document)},Qe.initialize=function(t){ze.eventBus=t,ze.addEvents()};var He={},Ve={__:He};He.addEvents=function(){He.eventBus.on(r.appEvents.VERSION_LOAD_COMPLETE,He.setHiddenItemsFromVersionResponse),He.eventBus.on(r.appEvents.PAGE_LOADED,He.setHiddenItemsFromVersionResponse),He.eventBus.on(r.appEvents.LAYER_LOADED,He.setHiddenItemsFromVersionResponse)},He.setHiddenItemsFromVersionResponse=function(t){var e,n,r=t&&t.domElement?t.domElement:document,i=u.dom.getElementsArray(".nm-j-configurator-item",r),o=d.a.getHiddenItemIDsFromVersion();if(o&&null!==o)for(e=0;e<o.length;e++)for(n=0;n<i.length;n++)o[e]===i[n].getAttribute("data-configurator-id")&&i[n].setAttribute("data-visibility","hidden")},Ve.initialize=function(t){He.eventBus=t,He.addEvents()};var qe={},We={__:qe};qe.oDefaults={sSelectorDelegateClick:".nm-infobox",sSelectorInfoboxContainer:".nm-infobox-container",sToggleClass:"nm-infobox-show"},qe.clickedElement=null,qe.handleOutsideClick=function(t){var e=u.dom.getElement(qe.oDefaults.sSelectorInfoboxContainer,qe.clickedElement);e.classList.contains(qe.oDefaults.sToggleClass)&&u.dom.isElementOutsideOfElementWithSelector(t.target,qe.oDefaults.sSelectorDelegateClick)&&(qe.domEventDelegate.off("click",qe.handleOutsideClick),qe.closeInfoBox(e),qe.clickedElement=null)},qe.handleToggleClick=function(){var t=u.dom.getElement(qe.oDefaults.sSelectorInfoboxContainer,this);qe.clickedElement=this,t.classList.contains(qe.oDefaults.sToggleClass)?qe.closeInfoBox(t):(t.classList.add(qe.oDefaults.sToggleClass),qe.registerOutsideClickEvent())},qe.registerOutsideClickEvent=function(){qe.domEventDelegate.on("click","*",qe.handleOutsideClick)},qe.closeInfoBox=function(t){t.classList.remove(qe.oDefaults.sToggleClass)},qe.addEvents=function(){qe.domEventDelegate.on("click",qe.oDefaults.sSelectorDelegateClick,qe.handleToggleClick)},qe.initialize=function(){qe.init||qe.addEvents(),qe.init=!0},We.initialize=function(t){qe.eventBus=t,qe.domEventDelegate=u.dom.getEventDelegate("body"),qe.initialize()};var Ge={},Ye={__:Ge};Ge.oDefaults={sAttributeInitialCaption:"data-initialcaption",sAttributePrNumber:"data-partprnumber",sClassAozActive:"nm-aoz-active",sClassAozButton:"nm-aoz-btn",sClassAozDescription:"nm-aoz-description",sClassAozTyreLabel:"nm-aoz-tyre-label",sClassAozHintText:"nm-aoz-hinttext",sClassAozInvisible:"nm-aoz-invisible",sClassAozItem:"nm-aoz-item",sClassAozModule:"nm-md-aoz",sClassAozPrice:"nm-aoz-price",sSelectorAozButton:".nm-aoz-btn a",sSelectorAozItem:".nm-aoz-item",selectorModul:".nm-md-aoz",selectorStripe:".nm-aoz-stripe",classShowPrevArrow:"nm-j-aoz-show-prev-arrow",classShowNextArrow:"nm-j-aoz-show-next-arrow",classPrevButton:"nm-aoz-stripe-prev",selectorArrowButton:".nm-aoz-stripe-navigation-item",selectorPrevButton:".nm-aoz-stripe-prev",selectorNextButton:".nm-aoz-stripe-next",selectorStripeContainer:".nm-aoz-stripe-container",selectorStripeWrap:".nm-aoz-stripe-wrap",selectorStripeList:".nm-aoz-stripe > ul",selectorStripeItem:".nm-aoz-item"},Ge.scrollDuration=500,Ge.addEvents=function(){Ge.eventBus.on(r.appEvents.PAGE_LOADED,Ge.handleSelectionUpdated),Ge.eventBus.on(r.appEvents.CONFIG_UPDATE,Ge.handleSelectionUpdated),Ge.domEventDelegate.on("scroll",Ge.oDefaults.selectorStripe,Ge.stripeScrollHandler),Ge.domEventDelegate.on("click",Ge.oDefaults.sSelectorAozItem,Ge.toggleItem),Ge.domEventDelegate.on("click",Ge.oDefaults.sSelectorAozButton,Ge.toggleConfigItem),Ge.domEventDelegate.on("click",Ge.oDefaults.selectorPrevButton,Ge.handlePrevNextClick),Ge.domEventDelegate.on("click",Ge.oDefaults.selectorNextButton,Ge.handlePrevNextClick),window.addEventListener("resize",Ge.resizeModule)},Ge.resizeModule=function(){var t,e;u.dom.getElementsArray(Ge.oDefaults.selectorModul).forEach((function(n){u.dom.getElement(Ge.oDefaults.selectorStripeContainer,n),(t=u.dom.getElement(Ge.oDefaults.selectorStripe,n))&&(e=u.dom.closest(t,Ge.oDefaults.selectorStripeWrap),Ge.hideNavigationArrows(e))}))},Ge.handlePrevNextClick=function(t){var e="next",n=u.dom.closest(t.target,Ge.oDefaults.selectorArrowButton);n&&(n.classList.contains(Ge.oDefaults.classPrevButton)&&(e="prev"),Ge.translateStripe(n,e))},Ge.translateStripe=function(t,e){var n,r,i=u.dom.getElement(Ge.oDefaults.selectorStripeContainer,Ge.getCurrentModule(t)),o=u.dom.closest(t,Ge.oDefaults.selectorStripeWrap),a=u.dom.getElement(Ge.oDefaults.selectorStripe,o),s=u.dom.getElement(Ge.oDefaults.selectorStripeList,o);s.clientWidth>i.clientWidth&&(o.classList.remove(Ge.oDefaults.classShowPrevArrow),o.classList.remove(Ge.oDefaults.classShowNextArrow),n=Ge.calculateNewScrollPosition(i,a.scrollLeft,e,s.clientWidth),r=Ge.calculateScrollDuration(i,a.scrollLeft,n),u.dom.animateElementX(n,a,r).then((function(){Ge.hideNavigationArrows(o)})))},Ge.getCurrentModule=function(t){return t?u.dom.closest(t,Ge.oDefaults.selectorModul):null},Ge.calculateScrollDuration=function(t,e,n){return Ge.scrollDuration*(Math.abs(e-n)/t.clientWidth)},Ge.calculateNewScrollPosition=function(t,e,n,r){var i=t.clientWidth;return"next"===n?Math.min(e+i,r-i):Math.max(0,e-i)},Ge.hideNavigationArrows=function(t){var e=t,n=u.dom.getElement(Ge.oDefaults.selectorStripe,e),r=u.dom.getElementsArray(Ge.oDefaults.selectorStripeItem,e),i=u.dom.getElement(Ge.oDefaults.selectorStripeList,e);0!==r.length&&(n.scrollLeft>10?e.classList.add(Ge.oDefaults.classShowPrevArrow):e.classList.remove(Ge.oDefaults.classShowPrevArrow),e.clientWidth+n.scrollLeft<i.clientWidth-10?e.classList.add(Ge.oDefaults.classShowNextArrow):e.classList.remove(Ge.oDefaults.classShowNextArrow))},Ge.stripeScrollHandler=function(t){var e=t.target,n=u.dom.closest(e,Ge.oDefaults.selectorStripeWrap);n&&Ge.hideNavigationArrows(n)},Ge.toggleItem=function(t){var e=Ge.getClosestElementWithClass(t.target,Ge.oDefaults.sClassAozModule),n=Ge.getClosestElementWithClass(t.target,Ge.oDefaults.sClassAozItem);t.preventDefault(),t.stopPropagation(),e&&n&&(n.classList.contains(Ge.oDefaults.sClassAozActive)?Ge.unsetSelection(e):Ge.setNewSelection(e,n)),Ge.handleSelectionUpdated()},Ge.toggleConfigItem=function(t){var e=Ge.getClosestElementWithClass(t.target,Ge.oDefaults.sClassAozModule),n=e.getElementsByClassName(Ge.oDefaults.sClassAozActive)[0];n.getAttribute(Ge.oDefaults.sAttributePrNumber).split(" ").join("_");t.preventDefault(),Ge.updateButtonWrapperClass(e,n)},Ge.retrievePrNumbersToFilter=function(t){var e,n,r=t.getElementsByClassName(Ge.oDefaults.sClassAozItem),i=[];for(e=0,n=r.length;e<n;e++)i.push(r[e].getAttribute("data-configurator-id"));return i},Ge.updateRenderImage=function(t,e){var n,r,i,o,a,s=[],c=[],l=t.getElementsByClassName("nm-j-configurator-renderimage"),u=Ge.retrievePrNumbersToFilter(t);for(n=0,r=l.length;n<r;n++)c.push(l[n].getAttribute("data-renderimage-type")),i=l[n].getAttribute("data-renderimage-view"),s.indexOf(i)<=-1&&s.push(i);d.a.sendRenderServiceRequest(u,e,s.join(","),c.join(",")).then((function(t){for(n=0,r=l.length;n<r;n++)o=l[n].getAttribute("data-renderimage-type"),i=l[n].getAttribute("data-renderimage-view"),a=t["render-results"][e][i][o],l[n].setAttribute("style","background-image: url("+a+")")}))},Ge.resetRenderImage=function(t){var e,n,r,i=t.getElementsByClassName("nm-j-configurator-renderimage");for(e=0,n=i.length;e<n;e++)r=i[e].getAttribute("data-url"),i[e].setAttribute("style","background-image: url("+r+")")},Ge.getClassBySubstring=function(t,e){var n,r,i=!1;for(n=0,r=t.classList.length;n<r;n++)if(t.classList[n].indexOf(e)>-1){i=t.classList[n];break}return i},Ge.updateButtonWrapperClass=function(t,e){var n=t.getElementsByClassName(Ge.oDefaults.sClassAozButton)[0],r=Ge.getClassBySubstring(e,"nm-j-configurator-status_"),i=Ge.getClassBySubstring(n,"nm-j-configurator-status_");i&&n.classList.remove(i),r&&n.classList.add(r),Ge.updateButtonTrackingAttributes(t,e)},Ge.updateButtonTrackingAttributes=function(t,e){var n=t.getElementsByClassName("nm-el-btn")[0],r=e.getAttribute("data-name"),i=e.getAttribute("data-familygroup"),o=e.getAttribute("data-family");r=""!==o?o+":"+r:r,r=(r=""!==i?i+":"+r:r).replace(/"/g,'\\"'),n.parentNode.setAttribute("data-configurator-id",e.getAttribute("data-configurator-id"))},Ge.updateDescription=function(t,e){var n=t.getElementsByClassName(Ge.oDefaults.sClassAozDescription)[0];n.innerHTML=!1===e?n.getAttribute(Ge.oDefaults.sAttributeInitialCaption):e},Ge.updateTyreLabel=function(t,e){var n=t.getElementsByClassName(Ge.oDefaults.sClassAozTyreLabel)[0];if(e){n.innerHTML='<feature-app\n\t\t\tid="tyre-label-link:aoz-inlinerendering:'.concat(e,'"\n\t\t\tbase-url="https://featureapps.audi.com/audi-feature-app-tyre-label-link/1/"\n\t\t\tsrc="audi-feature-app-tyre-label-link.js"\n\t\t\tserver-src="audi-feature-app-tyre-label-link.commonjs.js"\n\t\t\tconfig=\'{"optionId": "').concat(e,"\"}'>\n\t\t</feature-app>");var r=new CustomEvent("content:rendered",{detail:{element:n}});document.dispatchEvent(r)}else n.innerHTML=""},Ge.updatePrice=function(t,e){t.getElementsByClassName(Ge.oDefaults.sClassAozPrice)[0].innerHTML=e},Ge.updateHintText=function(t,e){t.getElementsByClassName(Ge.oDefaults.sClassAozHintText)[0].innerHTML=e},Ge.unsetSelection=function(t){Ge.removeClassFromElementsWithClassWithinDomFragment(t,Ge.oDefaults.sClassAozItem,Ge.oDefaults.sClassAozActive),Ge.updateDescription(t,!1),Ge.updateTyreLabel(t,!1),Ge.updatePrice(t,"&nbsp;"),Ge.updateHintText(t,"&nbsp;"),Ge.addClassToElementsWithClassWithinDomFragment(t,Ge.oDefaults.sClassAozButton,Ge.oDefaults.sClassAozInvisible),Ge.resetRenderImage(t)},Ge.setNewSelection=function(t,e){Ge.updateDescription(t,e.getAttribute("data-name")),Ge.updateTyreLabel(t,e.getAttribute("data-configurator-id")),Ge.updatePrice(t,e.getAttribute("data-price")),Ge.updateHintText(t,e.getAttribute("data-hinttext")),Ge.removeClassFromElementsWithClassWithinDomFragment(t,Ge.oDefaults.sClassAozItem,Ge.oDefaults.sClassAozActive),e.classList.add(Ge.oDefaults.sClassAozActive),Ge.removeClassFromElementsWithClassWithinDomFragment(t,Ge.oDefaults.sClassAozButton,Ge.oDefaults.sClassAozInvisible),Ge.updateButtonWrapperClass(t,e)},Ge.getClosestElementWithClass=function(t,e){for(var n=t;n.classList&&!n.classList.contains(e);){if(!n.parentNode)return!1;n=n.parentNode}return!!n.parentNode&&n},Ge.removeClassFromElementsWithClassWithinDomFragment=function(t,e,n){var r,i,o=t.getElementsByClassName(e);for(r=0,i=o.length;r<i;r++)o[r].classList.remove(n)},Ge.addClassToElementsWithClassWithinDomFragment=function(t,e,n){var r,i,o=t.getElementsByClassName(e);for(r=0,i=o.length;r<i;r++)o[r].classList.add(n)},Ge.updateStatusClass=function(t,e){var n=Ge.getClassBySubstring(t,"nm-j-configurator-status_");t.classList.remove(n),t.classList.add("nm-j-configurator-status_"+e)},Ge.handleSelectionUpdated=function(){var t,e,n,r,i,o=document.body.getElementsByClassName(Ge.oDefaults.sClassAozItem);for(t=0,e=o.length;t<e;t++)r=o[t].getAttribute(Ge.oDefaults.sAttributePrNumber).split(" ").join("_"),(n=d.a.getItem(r)).status&&Ge.updateStatusClass(o[t],n.status),o[t].classList.contains(Ge.oDefaults.sClassAozActive)&&(i=Ge.getClosestElementWithClass(o[t],Ge.oDefaults.sClassAozModule),Ge.updateRenderImage(i,r))},Ye.initialize=function(t){Ge.eventBus=t,Ge.domEventDelegate=u.dom.getEventDelegate("body"),Ge.addEvents(),Ge.handleSelectionUpdated()};var Ke={},Xe={__:Ke};Ke.oDefaults={sIdCanvas:"nm-ave-canvas",sClassActive:"nm-active",sClassLoading:"nm-3d-loading",sClassUnLoading:"nm-3d-unloading",sClassAVECandidate:"nm-ave-candidate",sClassModeAuto:"nm-md-in-mode-automatic",sClassLandscapeWrapper:"nm-md-in-landscape-wrapper",sClassPortraitWrapper:"nm-md-in-portrait-wrapper",sSelectorInlineRenderingModule:".nm-md-inline-rendering",sSelectorAVEContainer:".nm-md-ave-container",sSelectorAVEContainerActive:".nm-md-ave-container.nm-active",sSelectorInlineRendering:".nm-j-configurator-renderimage",sSelectorInlineRenderingButton360:".nm-md-inline-rendering .nm-icon-360-view",sSelectorInlineRenderingButton2d:".nm-md-inline-rendering .nm-icon-2d-view",sSelectorButton360:".nm-icon-360-view",sSelectorButton2d:".nm-icon-2d-view",sSelectorAVECandidate:".nm-ave-candidate",sSelectorLandscapeWrapper:".nm-md-in-landscape-wrapper",sSelectorPortraitWrapper:".nm-md-in-portrait-wrapper",sSelectorLoading:".nm-3d-loading"},Ke.addEvents=function(){Ke.eventBus.on(r.appEvents.AVE_AVAILABLE,Ke.handlerEnable360),Ke.eventBus.on(r.appEvents.PAGE_LOADED,Ke.handlerPageLoaded),Ke.eventBus.on(r.appEvents.AVE_STREAM_READY,Ke.aveStreamReadyHandler),Ke.eventBus.on(r.appEvents.PAGE_OPEN,Ke.handlerPageOpen)},Ke.handlerPageLoaded=function(t){var e;!0===X.isAveAvailable()&&((e=jQuery(t.domElement)).find(Ke.oDefaults.sSelectorInlineRenderingButton360).is(":visible")||(e.find(Ke.oDefaults.sSelectorInlineRenderingButton360).show(),e.find(Ke.oDefaults.sSelectorInlineRenderingButton360).off("click",Ke.handlerActivate3d),e.find(Ke.oDefaults.sSelectorInlineRenderingButton2d).off("click",Ke.handlerActivate2d),e.find(Ke.oDefaults.sSelectorInlineRenderingButton360).on("click",Ke.handlerActivate3d),e.find(Ke.oDefaults.sSelectorInlineRenderingButton2d).on("click",Ke.handlerActivate2d)))},Ke.handlerEnable360=function(){!0===X.isAveAvailable()&&(jQuery(Ke.oDefaults.sSelectorInlineRenderingButton360).is(":visible")||(jQuery(Ke.oDefaults.sSelectorInlineRenderingButton360).show(),jQuery(Ke.oDefaults.sSelectorInlineRenderingButton360).off("click",Ke.handlerActivate3d),jQuery(Ke.oDefaults.sSelectorInlineRenderingButton2d).off("click",Ke.handlerActivate2d),jQuery(Ke.oDefaults.sSelectorInlineRenderingButton360).on("click",Ke.handlerActivate3d),jQuery(Ke.oDefaults.sSelectorInlineRenderingButton2d).on("click",Ke.handlerActivate2d)))},Ke.handlerPageOpen=function(){var t=jQuery(Ke.oDefaults.sSelectorAVEContainerActive);t.length>0&&(Ke.setContainerTo2d(t),X.deactivate(t.attr("id")))},Ke.handlerActivate3d=function(t){var e=jQuery(t.currentTarget),n=jQuery(Ke.oDefaults.sSelectorAVEContainerActive),r=e.parent().parent();t.preventDefault(),Ke.activate3dForContainer(r,n),Ke.enableResizeHandler()},Ke.activate3dForContainer=function(t,e){var n=t.find(Ke.oDefaults.sSelectorInlineRendering),r=t.children(Ke.oDefaults.sSelectorAVEContainer).attr("id"),i=n.attr("data-renderimage-view");Ke.setContainerTo2d(e),Ke.setContainerTo3d(t,e),e.length>0?(X.moveAVE(e.attr("id"),r,i),Ke.removeLoadingImg(jQuery(Ke.oDefaults.sSelectorAVECandidate))):X.activateAVE(r,i)},Ke.setContainerTo3d=function(t){var e=t.find(Ke.oDefaults.sSelectorInlineRendering),n=t.children(Ke.oDefaults.sSelectorAVEContainer);t.find(Ke.oDefaults.sSelectorButton360).hide(),t.find(Ke.oDefaults.sSelectorButton2d).show(),e.addClass(Ke.oDefaults.sClassLoading),e.addClass(Ke.oDefaults.sClassAVECandidate),n.addClass(Ke.oDefaults.sClassActive)},Ke.handlerActivate2d=function(t){var e=jQuery(Ke.oDefaults.sSelectorAVEContainerActive);t.preventDefault(),Ke.setContainerTo2d(e),X.deactivate(e.attr("id"))},Ke.setContainerTo2d=function(t){t.length>0&&(t.parent().find(Ke.oDefaults.sSelectorButton2d).hide(),t.parent().find(Ke.oDefaults.sSelectorButton360).show(),setTimeout((function(){t.next().removeClass(Ke.oDefaults.sClassUnLoading)}),1e3),t.parent().find(Ke.oDefaults.sSelectorInlineRendering).removeClass(Ke.oDefaults.sClassLoading),t.parent().find(Ke.oDefaults.sSelectorInlineRendering).removeClass(Ke.oDefaults.sClassAVECandidate),t.removeClass(Ke.oDefaults.sClassActive))},Ke.removeLoadingImg=function(t){console.log("removeLoadingImg"),t.addClass(Ke.oDefaults.sClassUnLoading),t.removeClass(Ke.oDefaults.sClassLoading)},Ke.triggerSwipeTracker=function(t){t.target.closest(".nm-ave-animation-selector-wrapper")},Ke.aveStreamReadyHandler=function(){var t=jQuery(Ke.oDefaults.sSelectorAVEContainerActive);Ke.removeLoadingImg(jQuery(Ke.oDefaults.sSelectorLoading)),t.length>0&&(t.off("mousedown",Ke.triggerSwipeTracker),t.off("touchstart",Ke.triggerSwipeTracker),t.on("mousedown",Ke.triggerSwipeTracker),t.on("touchstart",Ke.triggerSwipeTracker))},Ke.enableResizeHandler=function(){jQuery(window).off("resize",Ke.handlerResize),jQuery(window).on("resize",Ke.handlerResize)},Ke.handlerResize=function(){var t,e=jQuery(Ke.oDefaults.sSelectorAVEContainerActive),n=e.parent().hasClass(Ke.oDefaults.sClassLandscapeWrapper),r=e.parent().hasClass(Ke.oDefaults.sClassPortraitWrapper);jQuery(window).width()<jQuery(window).height()&&n?t=e.closest(Ke.oDefaults.sSelectorInlineRenderingModule).find(Ke.oDefaults.sSelectorPortraitWrapper):jQuery(window).width()>=jQuery(window).height()&&r&&(t=e.closest(Ke.oDefaults.sSelectorInlineRenderingModule).find(Ke.oDefaults.sSelectorLandscapeWrapper)),t&&Ke.activate3dForContainer(t,e)},Xe.initialize=function(t){Ke.eventBus=t,Ke.addEvents()};var $e={},Je={__:$e};$e.globalEventBus=null,$e.EXPIRED_THRESHOLD=72,window.audi=window.audi||{},window.audi.api=window.audi.api||{},$e.isExpired=function(t){return(new Date).getTime()/216e3-t>=$e.EXPIRED_THRESHOLD},$e.addEvents=function(){$e.globalEventBus&&$e.globalEventBus.on(r.appEvents.CONFIG_UPDATE,$e.handleConfigurationUpdate)},$e.getLastConfiguration=function(){var t=$e.getStoredConfiguration();return!(!t||!t.lastChanged)&&(!$e.isExpired(t.lastChanged)&&t)},window.audi.api.lastConfiguration=$e.getLastConfiguration,$e.handleConfigurationUpdate=function(){var t=$e.getConfigurationObject();$e.hasSorage()&&t&&$e.writeEntry(t)},$e.hasSorage=function(){return!!$e.getStorage()},$e.getStorage=function(){return window.localStorage||null},$e.writeEntry=function(t){var e;try{e=JSON.stringify(t),$e.getStorage().setItem("lastConfiguration",e)}catch(t){console.warn(t)}},$e.getConfigurationObject=function(){var t,e=d.a.getConfiguration(),n={assets:{},assetsMobile:{}},r=d.a.getConfigurationAssets();return t=d.a.getRenderUrl(),e&&!d.a.getConflicts()&&r&&0!==Object.keys(r).length?(n.assets.exterior_front=r.exterior_front&&r.exterior_front["stage.hd"]?t+r.exterior_front["stage.hd"]:"",n.assets.closeup_lights=r.closeup_lights&&r.closeup_lights["stage.hd"]?t+r.closeup_lights["stage.hd"]:"",n.assets.exterior=r.exterior&&r.exterior["stage.hd"]?t+r.exterior["stage.hd"]:"",n.assetsMobile.exterior_front=r.exterior_front&&r.exterior_front["stage.hdx"]?t+r.exterior_front["stage.hdx"]:"",n.assetsMobile.closeup_lights=r.closeup_lights&&r.closeup_lights["stage.hdx"]?t+r.closeup_lights["stage.hdx"]:"",n.assetsMobile.exterior=r.exterior&&r.exterior["stage.hdx"]?t+r.exterior["stage.hdx"]:"",n.price=e.price,n.carline=e.carline,n.carlineName=e.carlineName,n.eec=e.eec,n.lastChanged=(new Date).getTime(),n["mv-version"]=d.a.getMarketVersion(),n.context=d.a.getContext(),n.url=$e.getEntryUrl(e.prstring),n):null},$e.getStoredConfiguration=function(){var t=$e.getStorage();if(!t||!t.lastConfiguration)return null;try{return JSON.parse(t.lastConfiguration)}catch(t){return console.warn(t),null}},$e.getEntryUrl=function(t){var e;return e=window.location.href.split("#")[0],e+=e.indexOf("?")>0?"&":"?",e+="pr="+t},Je.initialize=function(t){var e;return new Promise((function(n){$e.globalEventBus=t,$e.addEvents(),(e=parseInt(SETUPS.get("nemo.last_config.expires"),10))>0&&($e.EXPIRED_THRESHOLD=e),n("configurator/last-configuration.js")}))};var Ze={},tn={__:Ze};Ze.handleLayerLoaded=function(){var t=document.querySelector(".nm-md-media-library-configuration-buttons");if(t){var e=t.querySelector(".nm-md-media-library-configuration-button"),n=t.getAttribute("data-configurator-id");if(zt.a.getModelsInfo(n)){var r=d.a.getItem(n);"11010"===(null==r?void 0:r.status)&&e.classList.add("nm-md-media-library-configuration-button--inactive")}}},Ze.addEvents=function(){Ze.eventBus.on(r.appEvents.PAGE_LOADED,Ze.handleLayerLoaded),Ze.eventBus.on(r.appEvents.LAYER_LOADED,Ze.handleLayerLoaded),Ze.eventBus.on(r.appEvents.MODELSINFO_LOAD_COMPLETE,Ze.handleLayerLoaded),Ze.eventBus.on(r.appEvents.CONFIG_UPDATE,Ze.handleLayerLoaded)},tn.initialize=function(t){Ze.eventBus=t,Ze.addEvents()};n(162);function en(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function nn(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(nn.prototype,HTMLElement.prototype),Object.setPrototypeOf(nn,HTMLElement);var rn=function(t){T()(n,t);var e=en(n);function n(){var t;return h()(this,n),(t=e.call(this)).eventBus=r.signal.getEmitter(),t.configuration=null,t.loadConfiguration=t.loadConfiguration.bind(L()(t)),t.isExternalLink=SETUPS.get("scope.nemo.audicode.externallink"),f.stateRegistry.subscribeToStore(m.a,(function(e){return t.getConfigurationFromState(e)})),t}return S()(n,[{key:"connectedCallback",value:function(){this.link=this.querySelector(".nm-j-audicode-accept"),this.link.addEventListener("click",this.loadConfiguration)}},{key:"disconnectedCallback",value:function(){this.link.removeEventListener("click",this.loadConfiguration)}},{key:"loadConfiguration",value:function(t){if(this.configuration){if(this.emitLoadAudicodeEvent(),this.isExternalLink)return this.hasOtherUrl()&&(this.link.href=this.configuration.audicode["other-url"]),!0;t.preventDefault(),this.hasOtherUrl()&&(window.location=this.configuration.audicode["other-url"]),this.handleExternalConfiguration(),this.closeHeaderService()}else t.preventDefault()}},{key:"handleExternalConfiguration",value:function(){B.a.handleExternalConfiguration(this.configuration,{startType:"audicode-search"}).then((function(){r.router.open("page",d.a.getCurrentCarlineUrl())}))}},{key:"getConfigurationFromState",value:function(t){t&&t.configuration&&(this.configuration=t.configuration)}},{key:"hasOtherUrl",value:function(){return!!this.configuration&&this.configuration.audicode&&this.configuration.audicode["other-url"]&&""!==this.configuration.audicode["other-url"]}},{key:"emitLoadAudicodeEvent",value:function(){this.eventBus.emit(r.appEvents.SEARCH_LOAD_AUDICODE,{audicode:this.configuration.audicode.id})}},{key:"closeHeaderService",value:function(){var t=document.querySelector("header-service");t&&t.click()}}]),n}(nn);function on(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function an(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-load-audicode-link")||window.customElements.define("audi-configurator-load-audicode-link",rn),Object.setPrototypeOf(an.prototype,HTMLElement.prototype),Object.setPrototypeOf(an,HTMLElement);var sn=function(t){T()(n,t);var e=on(n);function n(){var t;return h()(this,n),(t=e.call(this)).updateTargetParam=t.updateTargetParam.bind(L()(t)),t.handleLoginStatus=t.handleLoginStatus.bind(L()(t)),t.handleLogoutStatus=t.handleLogoutStatus.bind(L()(t)),t.logoutHandler=t.logoutHandler.bind(L()(t)),t.showLoginLink=t.showLoginLink.bind(L()(t)),t.showLogoutLink=t.showLogoutLink.bind(L()(t)),t.hideHeader=t.hideHeader.bind(L()(t)),t.showHeader=t.showHeader.bind(L()(t)),t.csrfToken=null,t}return S()(n,[{key:"connectedCallback",value:function(){this.loginLinkElement=this.querySelector(".myaudi-login__link"),this.logoutLinkElement=this.querySelector(".myaudi-logout__link"),this.logoutLinkElement.addEventListener("click",this.logoutHandler),f.stateRegistry.subscribeToStore(m.a,this.updateTargetParam),this.getLoginStatus(),this.updateTargetParam(),this.loginHeadline=document.querySelector(".audi-login-headline-container")}},{key:"disconnectedCallback",value:function(){this.logoutLinkElement.removeEventListener("click",this.logoutHandler)}},{key:"updateTargetParam",value:function(t){var e=this.querySelector(".myaudi-login__link"),n=new URL(e.getAttribute("href")),r=new URL(window.location.href);t&&t.audicode&&r.searchParams.set("audicode",t.audicode),n.searchParams.set("target_url",r.href),e.setAttribute("href",n.href)}},{key:"handleLoginStatus",value:function(t){t.loggedIn?(this.csrfToken=t.csrfToken,f.stateRegistry.triggerAction(b,"update",t),this.showLogoutLink()):this.showLoginLink()}},{key:"handleLogoutStatus",value:function(t){t.logoutDone?(this.csrfToken=null,f.stateRegistry.triggerAction(b,"logout"),this.showLoginLink()):this.showLogoutLink()}},{key:"getLoginStatus",value:function(){var t=SETUPS.get("myaudi.uds.url")+"loginStatus";fetch(t,{credentials:"include"}).then((function(t){if(t.ok)return t.json();throw new Error(t.statusText)})).then(this.handleLoginStatus).then(this.updateTargetParam).catch((function(t){return console.log("netzwerk problem/performance problem: ",t)}))}},{key:"logoutHandler",value:function(t){t.preventDefault();var e=SETUPS.get("myaudi.uds.url")+"logout",n={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken}};fetch(e,n).then((function(t){if(t.ok)return t.json()})).then(this.handleLogoutStatus)}},{key:"showLoginLink",value:function(){this.loginLinkElement.classList.remove("nm-hidden"),this.logoutLinkElement.classList.add("nm-hidden"),this.showHeader()}},{key:"showLogoutLink",value:function(){this.loginLinkElement.classList.add("nm-hidden"),this.logoutLinkElement.classList.remove("nm-hidden"),this.hideHeader()}},{key:"showHeader",value:function(){this.loginHeadline&&this.loginHeadline.classList.remove("nm-hidden")}},{key:"hideHeader",value:function(){this.loginHeadline&&this.loginHeadline.classList.add("nm-hidden")}}]),n}(an);function cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function ln(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-login")&&window.customElements.define("audi-login",sn),Object.setPrototypeOf(ln.prototype,HTMLElement.prototype),Object.setPrototypeOf(ln,HTMLElement);var un=function(t){T()(n,t);var e=cn(n);function n(){var t;return h()(this,n),(t=e.call(this)).eventBus=r.signal.getEmitter(),t.setViewportWidth_=t.setViewportWidth.bind(L()(t)),t}return S()(n,[{key:"connectedCallback",value:function(){this.visibleSelector=n.selectors.visible.join(""),this.itemsPerRow=1,this.addEvents(),this.setViewportWidth()}},{key:"disconnectedCallback",value:function(){this.removeEvents()}},{key:"addEvents",value:function(){var t=this;this.eventBus.on(r.appEvents.DOM_UPDATED,(function(){t.updateElements()})),this.onResizeHandler=u.dom.throttle(this.setViewportWidth.bind(this),100),window.addEventListener("resize",this.onResizeHandler)}},{key:"removeEvents",value:function(){var t=this;this.eventBus.off(r.appEvents.DOM_UPDATED,(function(){t.updateElements()})),window.removeEventListener("resize",this.onResizeHandler)}},{key:"getItemsPerRow",value:function(){return this.viewportWidth<768?1:this.viewportWidth>=768&&this.viewportWidth<1280?2:this.viewportWidth>=1280&&this.viewportWidth<1440?3:4}},{key:"setViewportWidth",value:function(){this.viewportWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0);var t=this.itemsPerRow;this.itemsPerRow=this.getItemsPerRow(),t!==this.itemsPerRow&&this.updateElements()}},{key:"updateElements",value:function(){var t=this,e=x()(this.querySelectorAll(n.selectors.containers)),r=n.selectors.items+this.visibleSelector;e.forEach((function(e){x()(e.querySelectorAll(r)).forEach((function(e,r,i){e.classList.remove(n.selectors.counter+"last"),r%t.itemsPerRow!=t.itemsPerRow-1&&r!==i.length-1||e.classList.add(n.selectors.counter+"last")}))}))}}],[{key:"selectors",get:function(){return{counter:"nm-light-experience-list__item_",containers:".nm-light-experience-list__item-container",items:".nm-light-experience-list__item",visible:[":not(.nm-j-configurator-container-hide)",":not(.nm-j-configurator-status_00000)",":not(.nm-j-configurator-status_00001)",":not(.nm-j-configurator-status_00010)",":not(.nm-j-configurator-status_00011)",":not(.nm-j-configurator-status_00100)",":not(.nm-j-configurator-status_00101)",":not(.nm-j-configurator-status_00110)",":not(.nm-j-configurator-status_00111)",":not(.nm-j-configurator-status_01000)",":not(.nm-j-configurator-status_01001)",":not(.nm-j-configurator-status_01010)",":not(.nm-j-configurator-status_01011)",":not(.nm-j-configurator-status_01100)",":not(.nm-j-configurator-status_01101)",":not(.nm-j-configurator-status_01110)",":not(.nm-j-configurator-status_01111)",":not(.nm-j-configurator-status_10000)"]}}}]),n}(ln);window.customElements.get("audi-configurator-light-experience")||window.customElements.define("audi-configurator-light-experience",un);var dn={},fn={__:dn};function mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function gn(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}dn.oDefaults={sSelectorItemLoading:".nm-j-configurator-item-loading",sItemLoadingClass:"nm-j-configurator-item-loading"},dn.showLoadingIndicator=function(t){var e=t.$element;e&&e.length&&e.addClass(dn.oDefaults.sItemLoadingClass)},dn.hideLoadingIndicator=function(){jQuery(dn.oDefaults.sSelectorItemLoading).removeClass(dn.oDefaults.sItemLoadingClass)},dn.addEvents=function(){dn.eventBus.on(r.appEvents.CONFIG_CHANGEREQUEST_START,dn.showLoadingIndicator),dn.eventBus.on(r.appEvents.CONFIG_CHANGEREQUEST_END,dn.hideLoadingIndicator)},fn.initialize=function(t){dn.eventBus=t,dn.addEvents()},Object.setPrototypeOf(gn.prototype,HTMLElement.prototype),Object.setPrototypeOf(gn,HTMLElement);var pn=function(t){T()(n,t);var e=mn(n);function n(){return h()(this,n),e.call(this)}return S()(n,[{key:"connectedCallback",value:function(){this.initElements(),this.setInitialValues(),this.isIntersectionOberserverAvailable()?this.setupIntersectionObserver():this.startAnimations()}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"data-rate":this.updateRate(e,n)}}},{key:"updateRate",value:function(t,e){null!==t&&t!==e&&(this.initRate(),this.startAnimations())}},{key:"isIntersectionOberserverAvailable",value:function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}},{key:"setupIntersectionObserver",value:function(){var t=this;new IntersectionObserver((function(e){e.filter((function(t){return t.intersectionRatio>=n.options.observer.threshold})).forEach((function(){return t.startAnimations()}))}),n.options.observer).observe(this)}},{key:"initElements",value:function(){this.circle=this.querySelector(n.selectors.circle),this.text=this.querySelector(n.selectors.text),this.pathLength="function"==typeof this.circle.getTotalLength?this.circle.getTotalLength():0,this.initRate()}},{key:"initRate",value:function(){this.rate=parseInt(this.getAttribute("data-rate"),10),this.rate=this.rate>100?100:this.rate}},{key:"setInitialValues",value:function(){this.circle.style.strokeDasharray=this.pathLength,this.circle.style.strokeDashoffset=this.pathLength}},{key:"startAnimations",value:function(){var t=this.pathLength*(1-this.rate/100);u.animate.animateElementStyleProperty(t,this.circle,n.options.circle),this.text&&u.animate.animateElementProperty(this.rate,this.text,n.options.text)}}],[{key:"observedAttributes",get:function(){return["data-rate"]}},{key:"selectors",get:function(){return{circle:".nm-offer-rate-path",text:".nm-offer-rate-value"}}},{key:"options",get:function(){return{circle:{duration:2e3,property:"strokeDashoffset",easing:"easeInOutSine"},text:{duration:2e3,property:"innerHTML",easing:"noEasingInt"},observer:{threshold:1}}}}]),n}(gn);window.customElements.get("audi-configurator-offerrate")||window.customElements.define("audi-configurator-offerrate",pn);var vn={},hn={__:vn};vn.oDefaults={},vn.pendingPromise=null,vn.resolved=!1,vn.eventBus=null,vn.register=function(){Qt.patternMatching.register("audicode",vn.getAudiCode),Qt.patternMatching.register("conf_audicode",vn.getAudiCode)},vn.getAudiCode=function(){return!vn.resolved&&vn.pendingPromise||(vn.pendingPromise=vn.fetchAudiCode().catch((function(t){return vn.resolved=!0,vn.pendingPromise=null,t})).then((function(t){return vn.resolved=!0,vn.pendingPromise=null,t}))),vn.pendingPromise},vn.fetchAudiCode=function(){return new Promise((function(t,e){D.loadAudiCode().then((function(e){t(e)}),(function(t){e(t),console.error(t)}))}))},hn.initialize=function(){vn.register()};var yn={},Sn={__:yn};yn.oDefaults={},yn.register=function(){Qt.patternMatching.register("carlineID",yn.getCarlineId)},yn.getCarlineId=function(){var t;return new Promise((function(e,n){(t=d.a.getCarline())?e(t):n(new TypeError("load pattern -carlineID- failed"))}))},Sn.initialize=function(){yn.register()};var En={},Cn={__:En};En.oDefaults={},En.register=function(){Qt.patternMatching.register("conf_finance",En.getConfigurationAttribute("financeProductName")),Qt.patternMatching.register("conf_name",En.getConfigurationAttribute("carlineName")),Qt.patternMatching.register("conf_id",En.getConfigurationAttribute("carline")),Qt.patternMatching.register("conf_description",En.getConfigurationAttribute("description")),Qt.patternMatching.register("conf_modelyear",En.getConfigurationAttribute("modelyear")),Qt.patternMatching.register("conf_power_primary",En.getModelInfoAttribute("power-primary")),Qt.patternMatching.register("conf_power_secondary",En.getModelInfoAttribute("power-secondary"))},En.getConfigurationAttribute=function(t){return function(){var e=d.a.getConfiguration();return new Promise((function(n,r){e&&e[t]?n(e[t]):r(t+" was not found within the configuration")}))}},En.getModelInfoAttribute=function(t){return function(){var e=d.a.getCurrentModelInfo();return new Promise((function(n,r){e&&e[t]?n(e[t]):r(t+" was not found within the model Info")}))}},Cn.initialize=function(){En.register()};var bn={},wn={__:bn};bn.oDefaults={},bn.eventBus=null,bn.register=function(){Qt.patternMatching.register("language",bn.getLanguage)},bn.getLanguage=function(){var t;return new Promise((function(e,n){(t=SETUPS.get("nemo.locale.language"))?e(t):n(new TypeError("load pattern -language- failed"))}))},wn.initialize=function(){bn.register()};var _n={},Dn={__:_n};_n.oDefaults={sourceName:"IPH"},_n.eventBus=null,_n.register=function(){Qt.patternMatching.register("lead_source",_n.getLeadSource)},_n.getLeadSource=function(){return new Promise((function(t,e){Qt.iph.inIPHMode()?t(_n.oDefaults.sourceName):e(new TypeError("load pattern -leadsource- failed"))}))},Dn.initialize=function(){_n.register()};var kn={},xn={__:kn};kn.oDefaults={},kn.eventBus=null,kn.register=function(){Qt.patternMatching.register("partnerid",kn.getPartnerId)},kn.getPartnerId=function(){var t;return new Promise((function(e,n){(t=Qt.iph.inIPHMode())?e(t):n(new TypeError("load pattern -partnerid- failed"))}))},xn.initialize=function(){kn.register()};var An=new(function(){function t(){h()(this,t)}return S()(t,[{key:"initialize",value:function(){Qt.patternMatching.register("prstring",this._getPrString)}},{key:"_getPrString",value:function(){return new Promise((function(t){return t(d.a.getPrString())}))}}]),t}()),Ln={},In={__:Ln};Ln.oDefaults={},Ln.register=function(){Qt.patternMatching.register("vehicle_id",Ln.getVehicleId)},Ln.getVehicleId=function(){return new Promise((function(t,e){var n=Ln.getUrlParameterByName("vehicleid",location.href);n?t(n):e(new TypeError("load pattern -vehicleid- failed"))}))},Ln.getUrlParameterByName=function(t,e){var n,r,i;return i=e||window.location.href,r=(t||"").replace(/[[\]]/g,"\\$&"),(n=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)").exec(i))?n[2]?decodeURIComponent((n[2]||"").replace(/\+/g," ")):"":null},In.initialize=function(){Ln.register()};n(164);var Tn={},On={__:Tn},Pn="",jn="";Tn.setGroupPrice=function(){u.dom.getElementsArray(".js-configurator-group").forEach((function(t){var e,n=t,r=u.dom.closest(n,".nm-pattern-block, .nm-pattern-block-dynamic, .nm-tile-block"),i=u.dom.getElementsArray(".nm-j-configurator-item:not(.nm-j-configurator-status_00000)",r),o=Number.MAX_VALUE,a=!0;i.forEach((function(t){var n,r,i;r=(n=d.a.getItem(t.getAttribute("data-configurator-id")))&&n.price?n.price:"",1*(i=(i=On.getRawPrice(r,!1)).toFixed(2))==0&&(e=jn),1*o>1*i&&(e=r,o=i),a&&o!==i&&(a=!1)})),a||(e=Pn+" "+e),u.dom.getElement(".nm-price",n).textContent=e}))},On.getRawPrice=function(t,e){var n,r;return r=0===SETUPS.get("scope.commaseparator")||"0"===SETUPS.get("scope.commaseparator")?/[^0-9,]/g:/[^0-9.]/g,(n=t.replace(r,"")).replace(/[,]/g,"."),n=!0===e?parseInt(n,10):parseFloat(n),isNaN(n)&&(n=0),n},Tn.setSelectedGroup=function(){u.dom.getElementsArray(".nm-pattern-list-dynamic").forEach((function(t){var e=u.dom.getElementsArray("li.nm-j-configurator-status_11010, li.nm-j-configurator-status_10011",t).length;t.classList.remove("nm-pattern-selected"),e&&t.classList.add("nm-pattern-selected")}))},Tn.handleUpdates=function(){u.polling.wait((function(){return d.a.isInitialized()||!d.a.getCarline()}),5e3,250).then((function(){Tn.setSelectedGroup(),Tn.setGroupPrice()})).catch((function(t){return console.warn("pattern: could not update groups and prices",t)}))},Tn.subscribe=function(){Tn.eventBus.on(r.appEvents.CONFIG_UPDATE,Tn.handleUpdates),Tn.eventBus.on(r.appEvents.PAGE_LOADED,Tn.handleUpdates),Tn.eventBus.on(r.appEvents.LAYER_LOADED,Tn.handleUpdates)},Tn.initialize=function(){Pn=window.i18n.from,jn=window.i18n["standard-group-price"],Tn.subscribe()},On.initialize=function(t){Tn.eventBus=t,Tn.initialize()};var Rn={},Bn={__:Rn};Rn.oDefaults={sSelectorModule:".j-pdf-configuration"},Rn.addEvents=function(){u.dom.getEventDelegate("body").on("click",Rn.oDefaults.sSelectorModule,Rn.callPDFServiceWithAudicode)},Rn.callPDFServiceWithAudicode=function(t){var e,n;e=SETUPS.get("nemo.pdf.url"),console.log("PDFURl: ",e),e&&(n=window.open(),Qt.patternMatching.getReplacedUrl(e+"/audicode/{{audicode}}","audi.de").then((function(t){n.location=t})).catch((function(t){console.warn("PDF SERVICE LINK ERROR: something went wrong in pattern matching: ",t)})))},Bn.initialize=function(t){Rn.addEvents()};var Mn={},Fn={__:Mn};Mn.oDefaults={sPreconfTeaserSelector:".nm-module-preconfiguration-teaser",spreconfigSlide:".nm-md-preconfig-teaser-slide",sButtonSelector:".j-preconfig-submit",sButtonConfigurationClass:"nm-md-preconfig-teaser-custom-configuration",sSelectorTabsNavi:"ul.nm-preconfiguration-teaser-thumbs",sSelectorTeaserTemplates:"j-preconfig-teaser-tpl-",sTabsSelectorDelegateClick:"li.nm-preconfiguration-teaser-thumbnail",sMenuSelectedClass:"nm-selected",sSelectorTeaserContainer:".nm-preconfig-teaser-peephole",selectorArrow:".nm-preconfiguration-teaser-slide-arrows a",selectorArrowPrev:".nm-preconfiguration-teaser-slide-prev",selectorArrowNext:".nm-preconfiguration-teaser-slide-next",classHidden:"nm-hidden"},Mn.selectedIndex=0,Mn.maxIndex=0,Mn.startPos={x:0,y:0},Mn.PREV="prev",Mn.sensitivity=40,Mn.direction="left",Mn.isAnimating=!1,Mn.xDirection="none",Mn.yDirection="none",Mn.deltaX=0,Mn.deltaY=0,Mn.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},Mn.isDown=!1,Mn.deviceType="desktopdevice",Mn.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},Mn.handlePageLoaded=function(){if(Mn.$preconfigTeaserContainer&&jQuery.contains(document,Mn.$preconfigTeaserContainer[0]))return!1;if(Mn.$preconfigTeaserContainer=jQuery(Mn.oDefaults.sPreconfTeaserSelector),Mn.$preconfigTeaserContainer.length){var t=jQuery("script[id^='"+Mn.oDefaults.sSelectorTeaserTemplates+"']");Mn.maxIndex=t.length-1,Mn.isTouchDevice()&&(Mn.deviceType="touchdevice"),Mn.maxIndex>0&&(Mn.addSwipeEvents(),Mn.$preconfigTeaserContainer.on("click.tabs touchend.tabs",Mn.oDefaults.sTabsSelectorDelegateClick,Mn.handleTabClick)),Mn.$preconfigTeaserContainer.on("click.configuration.start touchend.configuration.start",Mn.oDefaults.sButtonSelector,Mn.handleConfigurationStartClick),Mn.eventBus.on(r.appEvents.CONFIG_UPDATE,Mn.updateButtonLabel),Mn.updateButtonLabel(),Mn.updateArrows(0)}},Mn.addSwipeEvents=function(){Mn.removeSwipeEvents(),Mn.$preconfigTeaserContainer.off(Mn.eventLookup[Mn.deviceType].down,Mn.handleMouseDown).on(Mn.eventLookup[Mn.deviceType].down,Mn.handleMouseDown)},Mn.removeSwipeEvents=function(){Mn.$preconfigTeaserContainer.off(Mn.eventLookup[Mn.deviceType].up,Mn.handleMouseUp),Mn.$preconfigTeaserContainer.off(Mn.eventLookup[Mn.deviceType].move,Mn.handleMouseMove)},Mn.handleMouseDown=function(t){Mn.isDown=!1,"select"!==t.target.nodeName.toLowerCase()&&"input"!==t.target.nodeName.toLowerCase()&&"option"!==t.target.nodeName.toLowerCase()&&(Mn.isDown=!0,Mn.deltaX=0,Mn.deltaY=0,Mn.startPos.x=t.pageX||t.originalEvent.changedTouches[0].pageX,Mn.startPos.y=t.pageY||t.originalEvent.changedTouches[0].pageY,Mn.$preconfigTeaserContainer.off(Mn.eventLookup[Mn.deviceType].up,Mn.handleMouseUp).on(Mn.eventLookup[Mn.deviceType].up,Mn.handleMouseUp),Mn.isTouchDevice()||Mn.$preconfigTeaserContainer.on(Mn.eventLookup[Mn.deviceType].move,Mn.handleMouseMove))},Mn.getXDirection=function(t){return t>0?"left":"right"},Mn.getYDirection=function(t){return t>0?"up":"down"},Mn.handleMouseUp=function(t){Mn.down=!1,Mn.removeSwipeEvents(),Mn.deltaX=Mn.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),Mn.deltaY=Mn.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),Mn.xDirection=Mn.getXDirection(Mn.deltaX),Mn.yDirection=Mn.getYDirection(Mn.deltyY),Math.abs(Mn.deltaX)>Mn.sensitivity&&Math.abs(Mn.deltaY)<Mn.sensitivity&&Mn.triggerViewChange(Mn.xDirection)},Mn.handleMouseMove=function(t){Mn.isDown&&(Mn.deltaX=Mn.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),Mn.deltaY=Mn.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),Mn.xDirection=Mn.getXDirection(Mn.deltaX),Mn.yDirection=Mn.getYDirection(Mn.deltyY),Math.abs(Mn.deltaX)>Mn.sensitivity&&Math.abs(Mn.deltaY)<Mn.sensitivity&&(Mn.removeSwipeEvents(),Mn.isDown=!1,Mn.triggerViewChange(Mn.xDirection)))},Mn.removeEvents=function(){Mn.$preconfigTeaserContainer=jQuery(Mn.oDefaults.sPreconfTeaserSelector),Mn.$preconfigTeaserContainer.length&&(Mn.removeSwipeEvents(),Mn.$preconfigTeaserContainer.off("click.tabs touchend.tabs",Mn.handleTabClick),Mn.$preconfigTeaserContainer.off("click.configuration.start touchend.configuration.start",Mn.handleConfigurationStartClick),jQuery("body").off(r.appEvents.CONFIG_UPDATE,Mn.updateButtonLabel))},Mn.handleConfigurationStartClick=function(t){Mn.cancelEvent(t);var e=jQuery(this),n=e.data("prstring"),i=e.data("audicode");return jQuery(t.target).closest("a").trigger("click.link-tracking"),i?(B.a.loadConfigurationFromTeaser({audicode:i,prstring:null},"audicode.preconfig-teaser").then((function(){r.router.open("page",d.a.getCurrentCarlineUrl())})),!1):n?(B.a.loadConfigurationFromTeaser({prstring:n,audicode:null},"prstring.preconfig-teaser").then((function(){r.router.open("page",d.a.getCurrentCarlineUrl())})),!1):(r.router.open("page",d.a.getCurrentCarlineUrl()),void jQuery("a.nm-configuration-new").trigger("click.configuration.new"))},Mn.handleTabClick=function(t){t&&t.preventDefault&&t.preventDefault();var e,n=Mn.selectedIndex;this.hasAttribute("data-direction")?e=this.getAttribute("data-direction")===Mn.PREV?n-1:n+1:e=$(this).index();return Mn.cancelEvent(t),Mn.isAnimating?null:e!==n&&(Mn.direction=e>n?"left":"right",Mn.selectedIndex=e,void Mn.updateContent(Mn.selectedIndex,Mn.direction))},Mn.updateArrows=function(t){if(0!=Mn.maxIndex){var e=u.dom.getElement(Mn.oDefaults.selectorArrowPrev),n=u.dom.getElement(Mn.oDefaults.selectorArrowNext);0==t?e.classList.add(Mn.oDefaults.classHidden):e.classList.remove(Mn.oDefaults.classHidden),t==Mn.maxIndex?n.classList.add(Mn.oDefaults.classHidden):n.classList.remove(Mn.oDefaults.classHidden)}},Mn.getNextIndex=function(t){return(t+1)%(Mn.maxIndex+1)},Mn.getPreviousIndex=function(t){var e=t-1;return e<0&&(e=Mn.maxIndex),e},Mn.updateContent=function(t,e){Mn.insertTeaser(t,e),Mn.updateSelection(t)},Mn.triggerViewChange=function(t){var e=Mn.selectedIndex;if(Mn.isAnimating)return null;Mn.legacyEventBus.trigger("swipe.preconfiguration",{prop16:"<prefix>:"+d.a.getCarlineName(),eVar39:"Pre-Config Switch",prop39:"Pre-Config Switch",eVar44:"Pre-Config Switch",prop44:"Pre-Config Switch",eVar46:"<pagename>:Pre-Config Switch:Swipe",prop46:"<pagename>:Pre-Config Switch:Swipe",prop67:"<pagename>"}),Mn.direction=t,e="right"===t?Mn.getPreviousIndex(e):Mn.getNextIndex(e),Mn.selectedIndex=e,Mn.updateContent(Mn.selectedIndex,Mn.direction)},Mn.handlePageLeave=function(){Mn.removeEvents()},Mn.animateStage=function(t,e,n,r){var i="-"+.5*e.width()+"px";Mn.isAnimating=!0,"left"===t?e.css("height",n).animate({"margin-left":i,height:r},500,"easeOutSine",Mn.animationEnded):e.css("margin-left",i).animate({"margin-left":0,height:r},500,"easeOutSine",Mn.animationEnded)},Mn.insertTeaser=function(t,e){var n,r,i,o,a=jQuery(Mn.oDefaults.sSelectorTeaserContainer);a.addClass("nm-slide-animation-start-"+e),n=Mn.getTemplateByIndex(t),r=jQuery(n),i=jQuery(Mn.oDefaults.spreconfigSlide).height()+"px",r.appendTo(a),o=r.height()+"px",Mn.animateStage(e,a,i,o);var s=document.querySelector(Mn.oDefaults.sSelectorTeaserContainer),c=new CustomEvent("content:rendered",{detail:{element:s}});document.dispatchEvent(c)},Mn.animationEnded=function(){$(this).removeClass(["nm-slide-animation-start-",Mn.direction].join("")).removeAttr("style").find(Mn.oDefaults.spreconfigSlide).first().remove(),Mn.isAnimating=!1,Mn.updateArrows(Mn.selectedIndex)},Mn.updateButtonLabel=function(){d.a.hasCustomConfiguration()?$(Mn.oDefaults.sSelectorTeaserContainer).addClass(Mn.oDefaults.sButtonConfigurationClass):$(Mn.oDefaults.sSelectorTeaserContainer).removeClass(Mn.oDefaults.sButtonConfigurationClass)},Mn.updateSelection=function(t){var e=Mn.$preconfigTeaserContainer.find(Mn.oDefaults.sSelectorTabsNavi).find(Mn.oDefaults.sTabsSelectorDelegateClick);e.removeClass(Mn.oDefaults.sMenuSelectedClass),jQuery(e[t]).addClass(Mn.oDefaults.sMenuSelectedClass)},Mn.getTemplateByIndex=function(t){var e=jQuery(["#",Mn.oDefaults.sSelectorTeaserTemplates,t].join("")).html()||"";return e=e.trim()},Mn.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},Mn.addEvents=function(){Mn.eventBus.on(r.appEvents.PAGE_LOADED,Mn.handlePageLoaded),Mn.eventBus.on(r.appEvents.LAYER_LOADED,Mn.handlePageLoaded),Mn.domEventDelegate.on("click",Mn.oDefaults.selectorArrow,Mn.handleTabClick)},Fn.initialize=function(t){Mn.eventBus=t,Mn.domEventDelegate=u.dom.getEventDelegate("body"),Mn.addEvents(),Mn.handlePageLoaded()};var Un={},Nn={__:Un};Un.oDefaults={sPreconfTeaserSelector:".nm-md-preconfs-teaser",sPreconfsSlide:".nm-md-preconfs-teaser-slide",sButtonSelector:".j-preconfs-submit",sButtonConfigurationClass:"nm-md-preconfs-teaser-custom-configuration",sSelectorDotsNavi:"ul.nm-dots-navi",sSelectorTeaserTemplates:"j-preconfs-teaser-tpl-",sDotsSelectorDelegateClick:"li.nm-dot",sMenuSelectedClass:"nm-selected",sSelectorTeaserContainer:".nm-peephole"},Un.selectedIndex=0,Un.maxIndex=0,Un.startPos={x:0,y:0},Un.sensitivity=40,Un.direction="left",Un.isAnimating=!1,Un.xDirection="none",Un.yDirection="none",Un.deltaX=0,Un.deltaY=0,Un.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},Un.isDown=!1,Un.deviceType="desktopdevice",Un.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},Un.handlePageLoaded=function(){if(Un.$preconfsTeaserContainer=jQuery(Un.oDefaults.sPreconfTeaserSelector),Un.$preconfsTeaserContainer.length){var t=jQuery("script[id^='"+Un.oDefaults.sSelectorTeaserTemplates+"']");Un.maxIndex=t.length-1,Un.isTouchDevice()&&(Un.deviceType="touchdevice"),Un.maxIndex>0&&(Un.addSwipeEvents(),Un.$preconfsTeaserContainer.on("click.dots touchend.dots",Un.oDefaults.sDotsSelectorDelegateClick,Un.handleDotClick)),Un.$preconfsTeaserContainer.on("click.configuration.start touchend.configuration.start",Un.oDefaults.sButtonSelector,Un.handleConfigurationStartClick),Un.eventBus.on(r.appEvents.CONFIG_UPDATE,Un.updateButtonLabel),Un.updateButtonLabel()}},Un.addSwipeEvents=function(){Un.removeSwipeEvents(),Un.$preconfsTeaserContainer.off(Un.eventLookup[Un.deviceType].down,Un.handleMouseDown).on(Un.eventLookup[Un.deviceType].down,Un.handleMouseDown)},Un.removeSwipeEvents=function(){Un.$preconfsTeaserContainer.off(Un.eventLookup[Un.deviceType].up,Un.handleMouseUp),Un.$preconfsTeaserContainer.off(Un.eventLookup[Un.deviceType].move,Un.handleMouseMove)},Un.handleMouseDown=function(t){Un.isDown=!1,"select"!==t.target.nodeName.toLowerCase()&&"input"!==t.target.nodeName.toLowerCase()&&"option"!==t.target.nodeName.toLowerCase()&&(Un.isDown=!0,Un.deltaX=0,Un.deltaY=0,Un.startPos.x=t.pageX||t.originalEvent.changedTouches[0].pageX,Un.startPos.y=t.pageY||t.originalEvent.changedTouches[0].pageY,Un.$preconfsTeaserContainer.off(Un.eventLookup[Un.deviceType].up,Un.handleMouseUp).on(Un.eventLookup[Un.deviceType].up,Un.handleMouseUp),Un.isTouchDevice()||Un.$preconfsTeaserContainer.on(Un.eventLookup[Un.deviceType].move,Un.handleMouseMove))},Un.handleMouseUp=function(t){Un.down=!1,Un.removeSwipeEvents(),Un.deltaX=Un.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),Un.deltaY=Un.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),Un.deltaX>0?Un.xDirection="left":Un.xDirection="right",Un.deltaY>0?Un.yDirection="up":Un.yDirection="down",Math.abs(Un.deltaX)>Un.sensitivity&&Math.abs(Un.deltaY)<Un.sensitivity&&Un.triggerViewChange(Un.xDirection)},Un.handleMouseMove=function(t){Un.isDown&&(Un.deltaX=Un.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),Un.deltaY=Un.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),Un.deltaX>0?Un.xDirection="left":Un.xDirection="right",Un.deltaY>0?Un.yDirection="up":Un.yDirection="down",Math.abs(Un.deltaX)>Un.sensitivity&&Math.abs(Un.deltaY)<Un.sensitivity&&(Un.removeSwipeEvents(),Un.isDown=!1,Un.triggerViewChange(Un.xDirection)))},Un.removeEvents=function(){Un.$preconfsTeaserContainer=jQuery(Un.oDefaults.sPreconfTeaserSelector),Un.$preconfsTeaserContainer.length&&(Un.removeSwipeEvents(),Un.$preconfsTeaserContainer.off("click.dots touchend.dots",Un.handleDotClick),Un.$preconfsTeaserContainer.off("click.configuration.start touchend.configuration.start",Un.handleConfigurationStartClick),jQuery("body").off(r.appEvents.CONFIG_UPDATE,Un.updateButtonLabel))},Un.handleConfigurationStartClick=function(t){Un.cancelEvent(t);var e=jQuery(this),n=e.data("prstring"),i=e.data("audicode");return i?(B.a.loadConfigurationFromTeaser({audicode:i,prstring:null},"audicode.preconfs-teaser").then((function(){r.router.open("page",d.a.getCurrentCarlineUrl())})),!1):n?(B.a.loadConfigurationFromTeaser({prstring:n,audicode:null},"prstring.preconfs-teaser").then((function(){r.router.open("page",d.a.getCurrentCarlineUrl())})),!1):(r.router.open("page",d.a.getCurrentCarlineUrl()),void jQuery("a.nm-configuration-new").trigger("click.configuration.new"))},Un.handleDotClick=function(t){if(Un.cancelEvent(t),Un.isAnimating)return null;var e=$(this).index(),n=Un.selectedIndex;if(e===n)return!1;Un.direction=e>n?"left":"right",Un.selectedIndex=e,Un.updateContent(Un.selectedIndex,Un.direction)},Un.getNextIndex=function(t){return(t+1)%(Un.maxIndex+1)},Un.getPreviousIndex=function(t){return(t-=1)<0&&(t=Un.maxIndex),t},Un.updateContent=function(t,e){Un.insertTeaser(t,e),Un.updateSelection(t)},Un.triggerViewChange=function(t){if(Un.isAnimating)return null;var e=Un.selectedIndex;"right"===t?(Un.direction="right",e=Un.getPreviousIndex(e)):(Un.direction="left",e=Un.getNextIndex(e)),Un.selectedIndex=e,Un.updateContent(Un.selectedIndex,Un.direction)},Un.handlePageLeave=function(){Un.removeEvents()},Un.insertTeaser=function(t,e){var n=jQuery(Un.oDefaults.sSelectorTeaserContainer);n.addClass("nm-slide-animation-start-"+e);var r=Un.getTemplateByIndex(t),i=jQuery(r),o=jQuery(Un.oDefaults.sPreconfsSlide).height()+"px";i.appendTo(n);var a=i.height()+"px",s="-"+.5*n.width()+"px";Un.isAnimating=!0,"left"===e?n.css("height",o).animate({"margin-left":s,height:a},500,"easeOutSine",Un.animationEnded):n.css("margin-left",s).animate({"margin-left":0,height:a},500,"easeOutSine",Un.animationEnded)},Un.animationEnded=function(){$(this).removeClass(["nm-slide-animation-start-",Un.direction].join("")).removeAttr("style").find(Un.oDefaults.sPreconfsSlide).first().remove(),Un.isAnimating=!1},Un.updateButtonLabel=function(){d.a.hasCustomConfiguration()?$(Un.oDefaults.sSelectorTeaserContainer).addClass(Un.oDefaults.sButtonConfigurationClass):$(Un.oDefaults.sSelectorTeaserContainer).removeClass(Un.oDefaults.sButtonConfigurationClass)},Un.updateSelection=function(t){var e=Un.$preconfsTeaserContainer.find(Un.oDefaults.sSelectorDotsNavi).find(Un.oDefaults.sDotsSelectorDelegateClick);e.removeClass(Un.oDefaults.sMenuSelectedClass),jQuery(e[t]).addClass(Un.oDefaults.sMenuSelectedClass)},Un.getTemplateByIndex=function(t){var e=jQuery(["#",Un.oDefaults.sSelectorTeaserTemplates,t].join("")).html()||"";return e=e.trim()},Un.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},Un.addEvents=function(){Un.eventBus.on(r.appEvents.PAGE_LOADED,Un.handlePageLoaded),Un.eventBus.on(r.appEvents.PAGE_LEAVE,Un.handlePageLeave),Un.eventBus.on(r.appEvents.LAYER_LOADED,Un.handlePageLoaded)},Nn.initialize=function(t){Un.eventBus=t,Un.addEvents(),Un.handlePageLoaded()};var zn='<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t{{=window.i18n[\'recommendations-layer.your-recommendations-for\']}}\n</h2>\n<p class="nm-el-pg nm-el-pg-03">\n\t{{=window.i18n[\'recommendations-layer.message\']}}\n</p>\n{{~it.recommendations :value :index}}\n<div class="nm-recommendation-container nm-recommendation-{{=index+1}}">\n\t<div class="nm-module nm-md-recommendations">\n\t\t<strong class="nm-el-hdl nm-el-hdl-04">\n\t\t\t{{=window.i18n[\'recommendations-layer.recommendation-index\']}} {{=index+1}}\n\t\t</strong>\n\t\t<p class="nm-recommendation-title nm-el-pg nm-el-pg-03">\n\t\t\t{{=value.explanation}}\n\t\t</p>\n\t\t{{~value.recommendation :r}}\n\t\t<div class="nm-module nm-md-teaser-equipment nm-md-teaser clearfix nm-j-configurator-item nm-j-configurator-status_{{=r.status}}"\n\t\tdata-configurator-id="{{=r.id}}">\n\t\t\t<div class="nm-md-teaser-img">\n\t\t\t\t<img src="{{=r.image}}" alt="" />\n\t\t\t</div>\n\t\t\t<div class="nm-md-teaser-copy">\n\t\t\t\t<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t{{=r.name}}\n\t\t\t\t</strong>\n\t\t\t\t<div class="nm-info-wrap">\n\t\t\t\t\t<a class="nm-info nm-image-replace nm-layerLink" href="{{=r.url}}">{{=window.i18n[\'more-information\']}}</a>\n\t\t\t\t</div>\n\t\t\t\t<span class="nm-price nm-el-hdl nm-el-hdl-04">\n\t\t\t\t\t{{=r.price}}\n\t\t\t\t</span>\n\t\t\t\t<div class="nm-el-pg nm-el-pg-02">\n\t\t\t\t\t{{=r.description || "No descriptive text found"}}\n\t\t\t\t</div>\n\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t    <span class="nm-at-btn-state01">{{=window.i18n[\'configuration.add-item\']}}</span>\n\t\t\t\t    <span class="nm-at-btn-state02">{{=window.i18n[\'configuration.item-included\']}}</span>\n\t\t\t\t    <span class="nm-at-btn-state03">{{=window.i18n[\'configuration.remove-item\']}}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t\t{{~}} {{? 0 !== value.chosen.length}}\n\t\t<p class="nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t{{=window.i18n[\'recommendations-layer.explanation\']}}:\n\t\t</p>\n\t\t{{~value.chosen :c}}\n\t\t<ul class="nm-options-list">\n\t\t\t<li class="clearfix">\n\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t<div class="nm-list-item-text nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t{{=c.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="nm-info-wrap">\n\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=c.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t</div>\n\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-04 clearfix">\n\t\t\t\t\t<span class="nm-price">\n\t\t\t\t\t\t{{=c.price}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t\t{{~}} {{?}}\n\t</div>\n</div>\n{{~}}',Qn={},Hn={__:Qn};Qn.oDefaults={sSelectorTemplateClass:".nm-recommendation",sSelectorTabClass:".nm-j-link-recommendations"},Qn.tplFunc=null,Qn.tplFuncNoRecs=function(){return""},Qn.getTplString=function(t){var e=$(t);return e.length>0?e.html():""},Qn.showTab=function(){jQuery("body").addClass("nm-has-recommendations")},Qn.hideTab=function(){jQuery("body").removeClass("nm-has-recommendations")},Qn.tabAvailable=function(){return jQuery(Qn.oDefaults.sSelectorTabClass).length>0},Qn.containerAvailable=function(){return jQuery(Qn.oDefaults.sSelectorTemplateClass).length>0},Qn.initialize=function(){Qn.addEvents()},Qn.dispose=function(){Qn.disposeEvents()},Qn.parse=function(t){var e,n=d.a.getItems()||{},r={recommendations:[]},i=JSON.parse(JSON.stringify(t)),o={};return jQuery.each(n,(function(t,e){o[e.mbvId]=e})),e=[],jQuery.each(i,(function(t,r){if(null===r)return!1;r.recommendation=jQuery.map(r.recommendation,(function(t){return!!o[t.id]?o[t.id]:d.a.getItem(t.id)})),r.chosen=jQuery.map(r.chosen,(function(t){return!!o[t.id]?o[t.id]:n[t.id]})),e.push(r)})),jQuery.each(e,(function(t,e){Array.prototype.push.call(r.recommendations,e)})),r.recommendations=e,r.carlineName=d.a.getCarlineName(),r},Qn.render=function(){var t=d.a.getRecommendations(),e=Qn.parse(t),n=u.template.render(zn,e);n=n.replace("{{=it.carlineName}}",e.carlineName.toUpperCase()),jQuery(Qn.oDefaults.sSelectorTemplateClass).html(n)},Qn.renderNoRecommendations=function(){var t=d.a.getConfiguration(),e=u.template.render(zn,t);e=e.replace("{{=it.carlineName}}",(d.a.getCarline()||"").toUpperCase()),jQuery(Qn.oDefaults.sSelectorTemplateClass).html(e),jQuery(Qn.oDefaults.sSelectorTemplateClass).html(Qn.tplFuncNoRecs(t))},Qn.addEvents=function(){Qn.eventBus.on(r.appEvents.CONFIG_UPDATE,Qn.handleConfigUpdate),Qn.eventBus.on(r.appEvents.PAGE_LOADED,Qn.handlePageLoaded),Qn.eventBus.on(r.appEvents.PAGE_LOADED,Qn.handleLayerLoaded),Qn.eventBus.on(r.appEvents.LAYER_LOADED,Qn.handleLayerLoaded),Qn.eventBus.on(r.appEvents.LAYER_CLOSED,Qn.handleLayerClosed)},Qn.disposeEvents=function(){Qn.eventBus.off(r.appEvents.CONFIG_UPDATE,Qn.handleConfigUpdate),Qn.eventBus.off(r.appEvents.PAGE_LOADED,Qn.handlePageLoaded),Qn.eventBus.off(r.appEvents.PAGE_LOADED,Qn.handleLayerLoaded),Qn.eventBus.off(r.appEvents.LAYER_LOADED,Qn.handleLayerLoaded),Qn.eventBus.off(r.appEvents.LAYER_CLOSED,Qn.handleLayerClosed)},Qn.recommendationsAvailable=function(){return d.a.isConfigurable()&&d.a.getRecommendations().length},Qn.updateView=function(){Qn.containerAvailable()||(Qn.recommendationsAvailable()?(Qn.showTab(),Qn.render()):Qn.hideTab())},Qn.handleConfigUpdate=function(){Qn.updateView()},Qn.handlePageLoaded=function(){Qn.updateView()},Qn.handleLayerClosed=function(){Qn.recommendationsAvailable()||Qn.hideTab()},Qn.handleLayerLoaded=function(){!Qn.recommendationsAvailable()&&Qn.containerAvailable()?(Qn.showTab(),Qn.renderNoRecommendations()):Qn.recommendationsAvailable()&&Qn.containerAvailable()?(Qn.showTab(),Qn.render()):Qn.recommendationsAvailable()&&Qn.tabAvailable()&&Qn.showTab()},Hn.initialize=function(t){Qn.eventBus=t,Qn.initialize()};var Vn={},qn={__:Vn,initialized:!1};Vn.activeImageSrc=!1,Vn.interiorImages=[],Vn.exteriorImages=[],Vn.exteriorOpenImages=[],Vn.min360ImgCount=6,Vn.oDefaults={sClassActive:"nm-active",sClassNoThumbnailAnimation:"nm-no-animation",sClassAnimate:"nm-animate",sClassCabrioOpen:"nm-cabrio-open",sClassSelectorClosed:"nm-icon-expand-white",sClassSelectorOpen:"nm-icon-collapse-white",sClassItemExterior:"nm-js-exterior",sClassItemExteriorOpen:"nm-js-exterior-open",sClassItemInterior:"nm-js-interior",sAttrDisplayedRenderingView:"data-renderimage-view",sIdToggleExterior:"nm-renderinglayer-exteriortoggle",sIdToggleExteriorOpen:"nm-renderinglayer-exterioropentoggle",sIdToggleInterior:"nm-renderinglayer-interiortoggle",sSelectorColorItems:"#nm-renderinglayer-extcolor-selection-color li",sSelectorOpenButton:".nm-renderinglayer-open",sSelectorRenderingLayerOuter:".nm-layer-renderinglayer",sSelectorRenderingLayer:".nm-renderinglayer",sSelectorItemExterior:".nm-js-exterior",sSelectorItemExteriorOpen:".nm-js-exterior-open",sSelectorItemInterior:".nm-js-interior",sSelectorDisplayedRenderingImage:".nm-basket-image .nm-j-configurator-renderimage",sSelectorRenderingCounterCurrent:".nm-renderingcounter-current",sSelectorRenderingCounterTotal:".nm-renderingcounter-total",sSelectorBack:".nm-renderinglayer .nm-backarrow",sSelectorNext:".nm-renderinglayer .nm-nextarrow",sSelectorStageImage:".nm-renderinglayer-image",sSelectorStageImages:".nm-renderinglayer-stageimages",sSelectorActiveStageImageWrapper:".nm-renderinglayer-imagewrapper.nm-active",sSelectorFirstStageImageWrapper:".nm-renderinglayer-imagewrapper:first-child",sSelectorActiveStageImage:".nm-renderinglayer-imagewrapper.nm-active .nm-renderinglayer-image",sSelectorThumbnailArea:".nm-renderinglayer-thumbnails",sSelectorThumbnail:".nm-renderinglayer-item .nm-rl-placeholder",sSelectorPlusButton:".nm-renderinglayer-item .nm-icon-plus",sSelectorThumbnailActive:".nm-renderinglayer-item .nm-rl-placeholder.nm-active",sSelectorColorSelector:".nm-render-color-selector",sSelectorColorSelectorWrapper:".nm-render-color-selector-wrapper",sSelectorOptionsSelector:".nm-render-animation-selector",sSelectorCurrentColorIndicator:".selector-current-selected .nm-render-active-color"},Vn.isInteriorActive=function(t){var e=!1;return 0!==t.indexOf("interior")&&0!==t.indexOf("dashboard")&&0!==t.indexOf("rearseat")||(e=!0),e},Vn.isOpenActive=function(t){var e=!1;return t.indexOf("_open")>0&&(e=!0),e},Vn.getActiveImageSrc=function(t){t.interiorActive&&Vn.interiorImages.length>0?Vn.activeImageSrc=Vn.interiorImages[0].image:t.open&&Vn.exteriorOpenImages.length>0?Vn.activeImageSrc=Vn.exteriorOpenImages[0].image:Vn.exteriorImages.length>0?Vn.activeImageSrc=Vn.exteriorImages[0].image:Vn.activeImageSrc=""},Vn.getConfigurationAssets=function(){var t=d.a.getConfigurationAssets();(!t||Object.keys(t).length<=0)&&(t=SETUPS.get("nemo.default.data").configuration.assets),Vn.generateRenderingLayerInnerHtml(t),Vn.initListeners()},Vn.pollConfigurationAssets=function(){jQuery(Vn.oDefaults.sSelectorRenderingLayer).length>0?console.log("RL: abort poll request"):Vn.getConfigurationAssets()},Vn.parseRenderImageTypeFromHash=function(t){var e,n,r;return!!t&&(n=/(renderingLayer)(\.(\S)+)?/,(r=t.match(n))&&(e=2===(r=(r=r[0].split("&")[0]).split(".")).length&&r[1]),e)},Vn.setAllowedItems=function(t){var e,n=SETUPS.get("nemo.hiddenAssets")?SETUPS.get("nemo.hiddenAssets").replace(/"/g,""):"";for(e in Vn.activeRenderings=[],n=n.length>0?n.split(","):[],console.log("hiddenAssets: "+n),t)e&&-1===n.indexOf(e)&&Vn.activeRenderings.push(e)},Vn.generateRenderingLayerInnerHtml=function(t){var e=d.a.getCarline(),n=d.a.getExtColor(),r=d.a.getConfiguration(),i=Vn.parseRenderImageTypeFromHash(window.location.hash),o={};i||(i=jQuery(Vn.oDefaults.sSelectorDisplayedRenderingImage).attr(Vn.oDefaults.sAttrDisplayedRenderingView)),Vn.setAllowedItems(t),-1===Vn.activeRenderings.indexOf(i)&&(i="exterior_front"),o.interiorActive=Vn.isInteriorActive(i),o.open=Vn.isOpenActive(i),Vn.preloadImages=["exterior_straight_front","exterior_front","exterior","exterior_back","exterior_straight_back"],Vn.preloadImagesOpen=["exterior_straight_front_open","exterior_front_open","exterior_open","exterior_back_open","exterior_straight_back_open"],Vn.exteriorImages=Vn.extractAssets(e,t,i,"exterior"),Vn.exteriorImages=Vn.exteriorImages.concat(Vn.extractAssets(e,t,i,"closeup")),Vn.exteriorOpenImages=Vn.extractAssets(e,t,i,"exterior_open"),Vn.exteriorOpenImages=Vn.exteriorOpenImages.concat(Vn.extractAssets(e,t,i,"closeup_open")),o.openavailable=Vn.exteriorOpenImages.length>0,Vn.interiorImages=Vn.extractAssets(e,t,i,"interior"),Vn.interiorImages=Vn.interiorImages.concat(Vn.extractAssets(e,t,i,"dashboard")),Vn.interiorImages=Vn.interiorImages.concat(Vn.extractAssets(e,t,i,"rearseat")),Vn.activeImageSrc||Vn.getActiveImageSrc(o),i||(i="exterior_front"),o.exterior=Vn.exteriorImages,o.exterior_open=Vn.exteriorOpenImages,o.interior=Vn.interiorImages,o.active_image_src=Vn.activeImageSrc,o.currentRenderingView=i,o.config=r,o.activeColor=n;var a=u.template.render('\n\t<div class="nm-layer-toolbar">\n\t\t<div class="nm-renderingcounter">\n\t\t\t&nbsp;<span class="nm-renderingcounter-current">01</span>|\n\t\t\t<span class="nm-renderingcounter-total">--</span>&nbsp;\n\t\t</div>\n\t\t<div class="nm-layer__close-button nm-j-layer-close-button">\n\t\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"}}></use>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class="nm-layer-inner nm-renderinglayer-wrapper">\n\t\t<div class="nm-renderinglayer {{? it.open }} nm-cabrio-open{{ } }}" style="{{?it.native_width!=undefined}} width: {{=it.native_width}}px{{?}}">\n\t\t\t<input type="radio" id="nm-renderinglayer-exteriortoggle" name="nm-renderinglayer-toggle-radio" value="exterior" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}{{?? it.open }}{{??}}checked{{?}} >\n\t\t\t<input type="radio" id="nm-renderinglayer-exterioropentoggle" name="nm-renderinglayer-toggle-radio" value="exterioropen" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}{{?? it.open }}checked{{??}}{{?}} >\n\t\t\t<input type="radio" id="nm-renderinglayer-interiortoggle" name="nm-renderinglayer-toggle-radio" value="interior" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}checked{{?? it.open }}{{??}}{{?}} >\n\t\t\t\x3c!--\n\t\t\t<input type="checkbox" id="nm-renderinglayer-opentoggle" name="nm-rl-toggle-open" class="nm-rl-toggle-open" {{? it.open}}checked{{?}} >\n\t\t--\x3e\n\t\t\t<div class="nm-renderinglayer-stagewrapper {{? it.openavailable}} openavailable {{ } }}">\n\t\t\t\t<ul class="nm-renderinglayer-stagebrowse">\n\t\t\t\t\t<li class="nm-backarrow"><a href="" class="nm-b-icon nm-icon-back-arrow-l"></a></li>\n\t\t\t\t\t<li class="nm-nextarrow"><a href="" class="nm-b-icon nm-icon-next-arrow-l"></a></li>\n\t\t\t\t</ul>\n\t\t\t\t<a href="" class="nm-renderinglayer-open nm-el-btn nm-el-btn-01">{{? it.open}}{{=window.i18n[\'rendering-layer.cabrio-close\']}}{{??}}{{=window.i18n[\'rendering-layer.cabrio-open\']}}{{?}}</a>\n\n\t \t\t\t<div class="nm-renderinglayer-stage">\n\t \t\t\t\t<ul class="nm-renderinglayer-stageimages">{{~ it.exterior :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-view="{{=value.name}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}{{~ it.exterior_open :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}{{~ it.interior :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}</ul>\n\t \t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="nm-renderinglayer-thumbnails clearfix">\n\t\t\t\t<ul class="nm-renderinglayer-thumbs">\n{{~ it.exterior :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-toggle-exterior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-exteriortoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-item-exterior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n{{~ it.exterior_open :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-toggle-exterior-open">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-exterioropentoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-item-exterior-open">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n{{~ it.interior :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-js-toggle nm-rl-toggle-interior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-interiortoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-js-item nm-rl-item-interior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>',o);jQuery(Vn.oDefaults.sSelectorRenderingLayerOuter).html(a)},Vn.generateRenderingLayerHtml=function(){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e="";return 975>t&&(e=' style="width: '+t*(1400/975)+'px;"'),'<div class="nm-layer-wrapper nm-layer-wrapper-renderinglayer"><div class="nm-layer-renderinglayer nm-j-jslayer nm-layer"'+e+"></div></div>"},Vn.addEvents=function(){r.clientLayer.register("renderingLayer",Vn.generateRenderingLayerHtml),Vn.eventBus.on(r.appEvents.LAYER_LOADED,Vn.handler),qn.initialized=!0},qn.dispose=function(){Vn.eventBus.off(r.appEvents.LAYER_LOADED,Vn.handler)},qn.disableFor3D=function(){jQuery(Vn.oDefaults.sSelectorOpenButton).off("click",Vn.handlerOpenToggle),jQuery(Vn.oDefaults.sSelectorBack).off("click",Vn.handlerBackClick),jQuery(Vn.oDefaults.sSelectorNext).off("click",Vn.handlerNextClick),jQuery(Vn.oDefaults.sSelectorThumbnail).off("click",Vn.handlerThumbnailClick),jQuery(Vn.oDefaults.sSelectorStageImage).off("mousedown",Vn.activateSwipe),jQuery(Vn.oDefaults.sSelectorStageImage).off("touchstart",Vn.activateSwipe)},Vn.handler=function(){jQuery(Vn.oDefaults.sSelectorRenderingLayerOuter).length>0&&Vn.pollConfigurationAssets()},Vn.initListeners=function(){Vn.interiorToggle=document.getElementById(Vn.oDefaults.sIdToggleInterior),Vn.exteriorOpenToggle=document.getElementById(Vn.oDefaults.sIdToggleExteriorOpen),Vn.exteriorToggle=document.getElementById(Vn.oDefaults.sIdToggleExterior),jQuery(Vn.oDefaults.sSelectorOpenButton).off("click",Vn.handlerOpenToggle),jQuery(Vn.oDefaults.sSelectorBack).off("click",Vn.handlerBackClick),jQuery(Vn.oDefaults.sSelectorNext).off("click",Vn.handlerNextClick),jQuery(Vn.oDefaults.sSelectorThumbnail).off("click",Vn.handlerThumbnailClick),jQuery(Vn.oDefaults.sSelectorPlusButton).off("click",Vn.handlerPlusButtonClick),""===jQuery(Vn.oDefaults.sSelectorStageImage).first().attr("src")&&Vn.pollConfigurationAssets(),Vn.updateCounter(),jQuery(Vn.oDefaults.sSelectorOpenButton).on("click",Vn.handlerOpenToggle),jQuery(Vn.oDefaults.sSelectorBack).on("click",Vn.handlerBackClick),jQuery(Vn.oDefaults.sSelectorNext).on("click",Vn.handlerNextClick),jQuery(Vn.oDefaults.sSelectorThumbnail).on("click",Vn.handlerThumbnailClick),jQuery(Vn.oDefaults.sSelectorPlusButton).on("click",Vn.handlerPlusButtonClick),Vn.exteriorOpenToggle&&Vn.exteriorOpenToggle.checked&&Vn.preloadDefinedImages(Vn.preloadImagesOpen,"exterior_open"),Vn.exteriorToggle&&Vn.exteriorToggle.checked&&Vn.preloadDefinedImages(Vn.preloadImages,"exterior"),Vn.activateSwipeOrDrag(),jQuery(window).on("resize",Vn.resizeLayer),Vn.resizeLayer(),Vn.eventBus.emit(r.appEvents.RENDERINGLAYER_LOADED)},Vn.determineImageObjectsForArea=function(t){return"interior"===t?Vn.interiorImages:"exterior_open"===t?Vn.exteriorOpenImages:Vn.exteriorImages},Vn.preloadDefinedImages=function(t,e){var n,r,i=Vn.determineImageObjectsForArea(e);for(n=0,r=i.length;n<r;n++)t.indexOf(i[n].name)>=0&&((new Image).src=i[n].image)},Vn.activateSwipeOrDrag=function(){var t,e=document.getElementById(Vn.oDefaults.sIdToggleExterior),n=document.getElementById(Vn.oDefaults.sIdToggleExteriorOpen);jQuery(Vn.oDefaults.sSelectorStageImage).off("mousedown",Vn.activateSwipe),jQuery(Vn.oDefaults.sSelectorStageImage).off("touchstart",Vn.activateSwipe),jQuery(Vn.oDefaults.sSelectorStageImage).off("mousedown",Vn.activateDrag),jQuery(Vn.oDefaults.sSelectorStageImage).off("touchstart",Vn.activateDrag),jQuery(document).off("mouseup",Vn.deactivateDrag),jQuery(document).off("touchend",Vn.deactivateDrag),jQuery(document).off("mouseup",Vn.deactivateSwipe),jQuery(document).off("touchend",Vn.deactivateSwipe),t=n&&n.checked?jQuery(Vn.oDefaults.sSelectorItemExteriorOpen).length:jQuery(Vn.oDefaults.sSelectorItemExterior).length,(e&&e.checked||n&&n.checked)&&t>=Vn.min360ImgCount?(jQuery(Vn.oDefaults.sSelectorStageImage).on("mousedown",Vn.activateDrag),jQuery(Vn.oDefaults.sSelectorStageImage).on("touchstart",Vn.activateDrag),jQuery(document).on("mouseup",Vn.deactivateDrag),jQuery(document).on("touchend",Vn.deactivateDrag)):(jQuery(Vn.oDefaults.sSelectorStageImage).on("mousedown",Vn.activateSwipe),jQuery(Vn.oDefaults.sSelectorStageImage).on("touchstart",Vn.activateSwipe),jQuery(document).on("mouseup",Vn.deactivateSwipe),jQuery(document).on("touchend",Vn.deactivateSwipe))},Vn.getViewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},Vn.getViewportWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},Vn.fitToWidth=function(t,e,n,r){1400>t&&(r*e<=n?jQuery(Vn.oDefaults.sSelectorRenderingLayerOuter).outerWidth(r*e):jQuery(Vn.oDefaults.sSelectorRenderingLayerOuter).outerWidth(n))},Vn.resizeLayer=function(){var t=Vn.getViewportHeight(),e=jQuery(Vn.oDefaults.sSelectorRenderingLayerOuter).outerHeight(),n=jQuery(Vn.oDefaults.sSelectorRenderingLayerOuter).outerWidth(),i=n/e,o=Vn.getViewportWidth();e>t?jQuery(Vn.oDefaults.sSelectorRenderingLayerOuter).outerWidth(t*i):Vn.fitToWidth(n,i,o,t),Vn.eventBus.emit(r.appEvents.RENDERINGLAYER_RESIZED)},Vn.calculateTotalItems=function(){var t=document.getElementById(Vn.oDefaults.sIdToggleExteriorOpen),e=document.getElementById(Vn.oDefaults.sIdToggleInterior);return e&&e.checked?jQuery(Vn.oDefaults.sSelectorItemInterior).length:t&&t.checked?jQuery(Vn.oDefaults.sSelectorItemExteriorOpen).length:jQuery(Vn.oDefaults.sSelectorItemExterior).length},Vn.calculateCurrentItem=function(t){var e=document.getElementById(Vn.oDefaults.sIdToggleExteriorOpen),n=document.getElementById(Vn.oDefaults.sIdToggleInterior);return n&&n.checked?Vn.calculateCurrentPosition(Vn.oDefaults.sSelectorItemInterior,t):e&&e.checked?Vn.calculateCurrentPosition(Vn.oDefaults.sSelectorItemExteriorOpen,t):Vn.calculateCurrentPosition(Vn.oDefaults.sSelectorItemExterior,t)},Vn.updateCounter=function(){var t=Vn.calculateTotalItems(),e=Vn.calculateCurrentItem(t);void 0!==t&&(t=t<10?"0"+t:t,e=e<10?"0"+e:e,jQuery(Vn.oDefaults.sSelectorRenderingCounterTotal).html(t),jQuery(Vn.oDefaults.sSelectorRenderingCounterCurrent).html(e))},Vn.calculateCurrentPosition=function(t,e){var n,r=jQuery(t);for(n=0;n<e;n++)if(r.eq(n).hasClass(Vn.oDefaults.sClassActive))return n+1},Vn.activateDrag=function(t){jQuery(Vn.oDefaults.sSelectorStageImages).hasClass(Vn.oDefaults.sClassAnimate)||("touchstart"===t.type?Vn.swipeX=t.originalEvent.pageX:Vn.swipeX=t.pageX,jQuery(document).on("mousemove",Vn.drag),jQuery(document).on("touchmove",Vn.drag))},Vn.deactivateDrag=function(){var t=jQuery(Vn.oDefaults.sSelectorActiveStageImage).attr("data-renderimage-view");jQuery(document).off("mousemove",Vn.drag),jQuery(document).off("touchmove",Vn.drag),jQuery(Vn.oDefaults.sSelectorThumbnail).removeClass(Vn.oDefaults.sClassActive),jQuery(Vn.oDefaults.sSelectorThumbnail+"."+t).addClass(Vn.oDefaults.sClassActive)},Vn.activateSwipe=function(t){"touchstart"===t.type?Vn.swipeX=t.originalEvent.pageX:Vn.swipeX=t.pageX,jQuery(document).on("mousemove",Vn.swipe),jQuery(document).on("touchmove",Vn.swipe)},Vn.deactivateSwipe=function(){jQuery(document).off("mousemove",Vn.swipe),jQuery(document).off("touchmove",Vn.swipe)},Vn.retrieveCurrentPos=function(t){return"touchmove"===t.type?t.originalEvent.pageX:t.pageX},Vn.doLeftDragAction=function(t){t.removeClass(Vn.oDefaults.sClassActive),t.prev().attr("data-view")&&t.prev().attr("data-view").indexOf("exterior")>=0?t.prev().addClass(Vn.oDefaults.sClassActive):t.prev().prev().addClass(Vn.oDefaults.sClassActive)},Vn.doRightDragAction=function(t){t.next().length>0&&t.next().attr("data-view")&&t.next().attr("data-view").indexOf("exterior")>=0?(t.removeClass(Vn.oDefaults.sClassActive),t.next().addClass(Vn.oDefaults.sClassActive)):t.attr("data-view")&&t.attr("data-view").indexOf("closeup")>=0&&(t.removeClass(Vn.oDefaults.sClassActive),jQuery(Vn.oDefaults.sSelectorFirstStageImageWrapper).addClass(Vn.oDefaults.sClassActive))},Vn.doDragAction=function(t,e){var n=jQuery(Vn.oDefaults.sSelectorActiveStageImageWrapper);e&&n.prev().length>0?Vn.doLeftDragAction(n):t&&Vn.doRightDragAction(n)},Vn.drag=function(t){var e=!1,n=!1,r=!1,i=Vn.retrieveCurrentPos(t);i>=Vn.swipeX+55?(e=!0,n=!0,Vn.swipeX+=55):i<=Vn.swipeX-55&&(e=!0,r=!0,Vn.swipeX-=55),e&&Vn.doDragAction(r,n)},Vn.getEventPos=function(t){return"touchmove"===t.type?t.originalEvent.pageX:t.pageX},Vn.swipe=function(t){var e=Vn.getEventPos(t);e>=Vn.swipeX+5?(Vn.deactivateSwipe(t),Vn.handlerBackClick(t)):e<=Vn.swipeX-5&&(Vn.deactivateSwipe(t),Vn.handlerNextClick(t))},Vn.determineCarlineFallbackGroup=function(t){var e=t.charAt(0);return 0!==t.indexOf("rs")&&0!==t.indexOf("s")||(e="a"),0===t.indexOf("tt")&&(e="r"),e},Vn.getFallbackThumb=function(t,e){var n=window.location.href.split("/");return n[2].indexOf("audi.local")>=0?n[0]+"//"+n[2]+"/cms4i-nemo/fallback-renderings/"+t+"-thumbnail-"+e+".jpg":n[0]+"//"+n[2]+SETUPS.get("nemo.url.static")+"/cms4i-nemo/fallback-renderings/"+t+"-thumbnail-"+e+".jpg"},Vn.getFallbackImg=function(t,e){var n=window.location.href.split("/");return n[2].indexOf("audi.local")>=0?n[0]+"//"+n[2]+"/cms4i-nemo/fallback-renderings/"+t+"-fullscreen-"+e+".jpg":n[0]+"//"+n[2]+SETUPS.get("nemo.url.static")+"/cms4i-nemo/fallback-renderings/"+t+"-fullscreen-"+e+".jpg"},Vn.getRenderImageType=function(t,e){var n="thumbnail";return t[e].hasOwnProperty("thumbnail.16-9")?n="thumbnail.16-9":t[e].hasOwnProperty("thumbnail.new")&&(n="thumbnail.new"),n},Vn.getThumbnail=function(t,e,n,r){var i=t[e][r];return void 0!==i&&(i=-1===i.indexOf("?")?"http://mediaservice.audi.com/media"+i+"?alt="+n:"http://mediaservice.audi.com/media"+i),i},Vn.getFullImg=function(t,e,n){var r;return t&&e&&t.hasOwnProperty(e)&&t[e]?(r=t[e].hasOwnProperty("fullscreen.new")?t[e]["fullscreen.new"]:t[e].fullscreen||"")?((r="http://mediaservice.audi.com/media"+r)&&-1===r.indexOf("?")&&(r+="?alt="+n),r):null:""},Vn.checkForActiveImage=function(t,e,n){t===e&&(Vn.activeImageSrc=n)},Vn.compliesWithCondition=function(t,e,n,r){var i=!1;return 0===e.indexOf(n)&&t.hasOwnProperty(e)&&Vn.activeRenderings.indexOf(e)>=0&&(r&&e.indexOf("_open")>0||!r&&e.indexOf("_open")<0)&&(i=!0),i},Vn.determineAssetType=function(t){return t.indexOf("_open")>0?t.substring(0,t.indexOf("_open")):t},Vn.isOpen=function(t){var e=!1;return t.indexOf("_open")>=0&&(e=!0),e},Vn.extractAssets=function(t,e,n,r){var i,o,a,s,c,l,u=[],d=Vn.determineCarlineFallbackGroup(t),f=Vn.determineAssetType(r),m=Vn.isOpen(r);for(l in e)e[l]&&Vn.compliesWithCondition(e,l,f,m)&&(s=Vn.getFallbackThumb(d,l),a=Vn.getFallbackImg(d,l),c=Vn.getRenderImageType(e,l),o=Vn.getThumbnail(e,l,s,c),(i=Vn.getFullImg(e,l,a))&&(Vn.checkForActiveImage(l,n,i),u.push({name:l,image:i,thumbnail:o,type:c})));return Vn.sortThumbs(f,m,u)},Vn.customArraySort=function(t,e){var n=["exterior_straight_front","exterior_front","exterior","exterior_back","exterior_straight_back","closeup_lights","closeup_wheels","interior","dashboard","rearseat"];return e&&(n=["exterior_straight_front_open","exterior_front_open","exterior_open","exterior_back_open","exterior_straight_back_open","closeup_lights_open","closeup_wheels_open","interior","dashboard","rearseat"]),function(e,r){return n.indexOf(e[t])<n.indexOf(r[t])?-1:1}},Vn.sortThumbs=function(t,e,n){return n.sort(Vn.customArraySort("name",e))},Vn.toggleCheckAndPreload=function(){Vn.exteriorOpenToggle.checked?(Vn.exteriorToggle.checked=!0,Vn.preloadDefinedImages(Vn.preloadImages,"exterior")):(Vn.exteriorOpenToggle.checked=!0,Vn.preloadDefinedImages(Vn.preloadImagesOpen,"exterior_open"))},Vn.setDefaultActiveThumbnail=function(){jQuery(Vn.oDefaults.sSelectorRenderingLayer).hasClass(Vn.oDefaults.sClassCabrioOpen)?jQuery(Vn.oDefaults.sSelectorItemExteriorOpen).first().addClass(Vn.oDefaults.sClassActive):jQuery(Vn.oDefaults.sSelectorItemExterior).first().addClass(Vn.oDefaults.sClassActive)},Vn.retrieveCorrespondingCabrioKey=function(t){return t.indexOf("_open")>0?t.substring(0,t.indexOf("_open")):t+"_open"},Vn.handlerOpenToggle=function(t){var e,n,r=jQuery(Vn.oDefaults.sSelectorThumbnailActive),i=r.attr("data-key");t.preventDefault(),jQuery(Vn.oDefaults.sSelectorThumbnailArea).addClass(Vn.oDefaults.sClassNoThumbnailAnimation),Vn.toggleCheckAndPreload(),setTimeout((function(){jQuery(Vn.oDefaults.sSelectorThumbnailArea).removeClass(Vn.oDefaults.sClassNoThumbnailAnimation)}),50),0===r.length&&Vn.setDefaultActiveThumbnail(),jQuery(Vn.oDefaults.sSelectorRenderingLayer).hasClass(Vn.oDefaults.sClassCabrioOpen)?(jQuery(Vn.oDefaults.sSelectorRenderingLayer).removeClass(Vn.oDefaults.sClassCabrioOpen),jQuery(Vn.oDefaults.sSelectorOpenButton).html(window.i18n["rendering-layer.cabrio-open"])):(jQuery(Vn.oDefaults.sSelectorRenderingLayer).addClass(Vn.oDefaults.sClassCabrioOpen),jQuery(Vn.oDefaults.sSelectorOpenButton).html(window.i18n["rendering-layer.cabrio-close"])),i&&(e=Vn.retrieveCorrespondingCabrioKey(i),n=jQuery("."+e),Vn.activateImage(n,!1,!1))},qn.determinePrevFromActive=function(t){var e;return t.hasClass(Vn.oDefaults.sClassItemExterior)?e=jQuery(Vn.oDefaults.sSelectorThumbnailActive).parent().prev().children(Vn.oDefaults.sSelectorItemExterior).get(0):t.hasClass(Vn.oDefaults.sClassItemExteriorOpen)?e=jQuery(Vn.oDefaults.sSelectorThumbnailActive).parent().prev().children(Vn.oDefaults.sSelectorItemExteriorOpen).get(0):t.hasClass(Vn.oDefaults.sClassItemInterior)&&(e=jQuery(Vn.oDefaults.sSelectorThumbnailActive).parent().prev().children(Vn.oDefaults.sSelectorItemInterior).get(0)),e},qn.determineDefaultPrev=function(){return Vn.interiorToggle.checked?jQuery(Vn.oDefaults.sSelectorItemInterior).last().get(0):Vn.exteriorOpenToggle&&Vn.exteriorOpenToggle.checked?jQuery(Vn.oDefaults.sSelectorItemExteriorOpen).last().get(0):jQuery(Vn.oDefaults.sSelectorItemExterior).last().get(0)},Vn.handlerBackClick=function(t){var e,n=jQuery(Vn.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=qn.determinePrevFromActive(n)),void 0===e&&(e=qn.determineDefaultPrev()),Vn.activateImage(e,!0,"prev")},qn.determineNextFromActive=function(t){var e;return t.hasClass(Vn.oDefaults.sClassItemExterior)?e=jQuery(Vn.oDefaults.sSelectorThumbnailActive).parent().next().children(Vn.oDefaults.sSelectorItemExterior).get(0):t.hasClass(Vn.oDefaults.sClassItemExteriorOpen)?e=jQuery(Vn.oDefaults.sSelectorThumbnailActive).parent().next().children(Vn.oDefaults.sSelectorItemExteriorOpen).get(0):t.hasClass(Vn.oDefaults.sClassItemInterior)&&(e=jQuery(Vn.oDefaults.sSelectorThumbnailActive).parent().next().children(Vn.oDefaults.sSelectorItemInterior).get(0)),e},qn.determineDefaultNext=function(){return Vn.interiorToggle.checked?jQuery(Vn.oDefaults.sSelectorItemInterior).first().get(0):Vn.exteriorOpenToggle&&Vn.exteriorOpenToggle.checked?jQuery(Vn.oDefaults.sSelectorItemExteriorOpen).first().get(0):jQuery(Vn.oDefaults.sSelectorItemExterior).first().get(0)},Vn.handlerNextClick=function(t){var e,n=jQuery(Vn.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=qn.determineNextFromActive(n)),void 0===e&&(e=qn.determineDefaultNext()),Vn.activateImage(e,!0,"next")},Vn.handlerThumbnailClick=function(){jQuery(this).hasClass(Vn.oDefaults.sClassActive)||Vn.activateImage(this,!0,!1)},Vn.handlerPlusButtonClick=function(t){var e=jQuery(this).parent().parent().find(".nm-rl-placeholder"),n=jQuery(this).parent().parent().find(".nm-renderinglayer-expander");t.preventDefault(),e.trigger("click"),n.trigger("click")},Vn.doStageAnimation=function(t){var e=jQuery(".ie8").length>0,n=jQuery(".ie9").length>0;e||n?jQuery(Vn.oDefaults.sSelectorStageImages).animate({left:t},500):jQuery(Vn.oDefaults.sSelectorStageImages).css("left",t)},Vn.determineAnimationDirection=function(t,e,n){var r=!1;return!1===e?n.parent().prevAll().find(t).length>0&&(r=!0):"prev"===e&&(r=!0),r},Vn.activateImage=function(t,e,n){var r=jQuery(Vn.oDefaults.sSelectorThumbnailActive),i=jQuery(t).attr("data-key"),o=jQuery(".nm-rendersource-"+i),a=jQuery(".nm-rendersource-"+r.attr("data-key")).closest(".nm-renderinglayer-imagewrapper"),s=o.closest(".nm-renderinglayer-imagewrapper"),c=!1;jQuery(Vn.oDefaults.sSelectorStageImages).hasClass(Vn.oDefaults.sClassAnimate)||(jQuery(Vn.oDefaults.sSelectorThumbnail).removeClass(Vn.oDefaults.sClassActive),jQuery(t).addClass(Vn.oDefaults.sClassActive),!0===e?((c=Vn.determineAnimationDirection(t,n,r))?(jQuery(Vn.oDefaults.sSelectorStageImages).css("left","-100%"),a.css("left","50%"),s.css("left","0")):(jQuery(Vn.oDefaults.sSelectorStageImages).css("left","0"),a.css("left","0"),s.css("left","50%")),s.addClass(Vn.oDefaults.sClassActive),setTimeout((function(){jQuery(Vn.oDefaults.sSelectorStageImages).addClass(Vn.oDefaults.sClassAnimate),c?Vn.doStageAnimation("0"):Vn.doStageAnimation("-100%"),setTimeout((function(){a.css("left","0"),a.removeClass(Vn.oDefaults.sClassActive),jQuery(Vn.oDefaults.sSelectorStageImages).css("left","0"),s.css("left","0"),Vn.activateSwipeOrDrag(),jQuery(Vn.oDefaults.sSelectorStageImages).removeClass(Vn.oDefaults.sClassAnimate)}),500)}),10)):(s.addClass(Vn.oDefaults.sClassActive),a.removeClass(Vn.oDefaults.sClassActive),Vn.activateSwipeOrDrag()),setTimeout((function(){Vn.updateCounter()}),50))},qn.initialize=function(t){Vn.eventBus=t,Vn.addEvents()};var Wn={},Gn={__:Wn};Wn.oDefaults={sIdCanvas:"avecanvas",sClassActive:"nm-active",sClassAVE:"ave-layer",sSelectorOptionsWrapper:".nm-ave-animation-selector-wrapper",sSelectorStageWrapper:".nm-renderinglayer-stagewrapper",sSelectorBack:".nm-renderinglayer .nm-backarrow",sSelectorNext:".nm-renderinglayer .nm-nextarrow",sSelectorOuterRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingStageWrapper:".nm-renderinglayer-stagewrapper",sSelectorThumbnail:".nm-renderinglayer-item .nm-rl-placeholder",sSelectorThumbnailActive:".nm-renderinglayer-item .nm-rl-placeholder.nm-active",sSelectorAVEContainerActive:".nm-md-ave-container.nm-active",sSelectorActiveStageImageWrapper:".nm-renderinglayer-imagewrapper.nm-active"},Wn.disableStreamReadyEvent=function(){Wn.eventBus.off(r.appEvents.AVE_STREAM_READY,qn.disableFor3D)},Wn.handlerLayerClosed=function(){var t,e;jQuery(Wn.oDefaults.sSelectorRenderingLayer).length>0&&jQuery(Wn.oDefaults.sSelectorRenderingLayer).first().hasClass(Wn.oDefaults.sClassAVE)&&(jQuery(".nm-3d-unloading").length>0?(e=(t=jQuery(".nm-3d-unloading").prev()).attr("id"),Wn.moveOptionsIntoCanvas(),X.moveAVE(Wn.oDefaults.sIdCanvas,e),t.addClass(Wn.oDefaults.sClassActive)):(X.deactivate(Wn.oDefaults.sIdCanvas),jQuery(Wn.oDefaults.sSelectorOptionsWrapper).remove()))},Wn.handlerThumbnailClick=function(){jQuery(this).hasClass(Wn.oDefaults.sClassActive)||Wn.activateView(this)},Wn.handlerBackClick=function(t){var e,n=jQuery(Wn.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=qn.determinePrevFromActive(n)),void 0===e&&(e=qn.determineDefaultPrev()),Wn.activateView(e)},Wn.handlerNextClick=function(t){var e,n=jQuery(Wn.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=qn.determineNextFromActive(n)),void 0===e&&(e=qn.determineDefaultNext()),Wn.activateView(e)},Wn.activateView=function(t){var e=jQuery(Wn.oDefaults.sSelectorThumbnailActive).attr("data-key"),n=jQuery(t).attr("data-key");jQuery(Wn.oDefaults.sSelectorThumbnail).removeClass(Wn.oDefaults.sClassActive),jQuery(t).addClass(Wn.oDefaults.sClassActive),n!==e&&X.showPerspective(n)},Wn.captureAVEDrag=function(t){jQuery("body").off("click",".nm-layer-wrapper",r.layerApi.wrapperClickHandler),jQuery(".nm-layer-wrapper").off("mousedown",Wn.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").on("mousedown",Wn.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").off("touchstart",Wn.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").on("touchstart",Wn.handlerAVEWrapperClick)},Wn.activateThumbListeners=function(){jQuery(Wn.oDefaults.sSelectorThumbnail).on("click",Wn.handlerThumbnailClick),jQuery(Wn.oDefaults.sSelectorBack).on("click",Wn.handlerBackClick),jQuery(Wn.oDefaults.sSelectorNext).on("click",Wn.handlerNextClick),jQuery("#"+Wn.oDefaults.sIdCanvas).off("mousedown",Wn.captureAVEDrag),jQuery("#"+Wn.oDefaults.sIdCanvas).off("touchstart",Wn.captureAVEDrag),jQuery("#"+Wn.oDefaults.sIdCanvas).on("mousedown",Wn.captureAVEDrag),jQuery("#"+Wn.oDefaults.sIdCanvas).on("touchstart",Wn.captureAVEDrag)},Wn.handlerAVEWrapperClick=function(){jQuery("body").off("mousedown",".nm-layer-wrapper",r.layerApi.wrapperClickHandler),jQuery("body").on("mousedown",".nm-layer-wrapper",r.layerApi.wrapperClickHandler),jQuery("body").off("touchstart",".nm-layer-wrapper",r.layerApi.wrapperClickHandler),jQuery("body").on("touchstart",".nm-layer-wrapper",r.layerApi.wrapperClickHandler)},Wn.moveOptionsOutOfCanvas=function(){jQuery(Wn.oDefaults.sSelectorOptionsWrapper).prependTo(jQuery(Wn.oDefaults.sSelectorStageWrapper))},Wn.moveOptionsIntoCanvas=function(){jQuery(Wn.oDefaults.sSelectorOptionsWrapper).prependTo(jQuery("#"+Wn.oDefaults.sIdCanvas))},Wn.retrieveActiveViewPerspective=function(){var t=jQuery(Wn.oDefaults.sSelectorActiveStageImageWrapper);return t&&t.attr("data-view")?t.attr("data-view"):"exterior_front"},Wn.prepareDomForAVE=function(){null===document.getElementById(Wn.oDefaults.sIdCanvas)&&jQuery(Wn.oDefaults.sSelectorRenderingStageWrapper).prepend('<div id="'+Wn.oDefaults.sIdCanvas+'" class="nm-md-ave-container"></div>'),Wn.eventBus.on(r.appEvents.AVE_STREAM_READY,qn.disableFor3D),jQuery(Wn.oDefaults.sSelectorOuterRenderingLayer).addClass(Wn.oDefaults.sClassAVE)},Wn.handlerInjectAVE=function(){var t=jQuery(Wn.oDefaults.sSelectorAVEContainerActive);X.isAveAvailable()?(console.log("AVE - prepare dom"),Wn.prepareDomForAVE(),t.length>0?(X.moveAVE(t.attr("id"),Wn.oDefaults.sIdCanvas,!1),qn.disableFor3D()):X.activateAVE(Wn.oDefaults.sIdCanvas,Wn.retrieveActiveViewPerspective()),Wn.handlerFollowupInjection()):console.log("renderinginjector - no matching carline")},Wn.handlerFollowupInjection=function(){Wn.activateThumbListeners(),Wn.moveOptionsOutOfCanvas()},Wn.handlerLayerOpened=function(){jQuery(Wn.oDefaults.sSelectorRenderingLayer).length>0?N.isAve2CloudAvailable()?(Wn.prepareDomForAVE(),Wn.eventBus.emit("AVE2CLOUD.CONTAINER.READY")):X.isActiveCarline()?!0===X.isAveAvailable()?Wn.handlerInjectAVE():Wn.eventBus.on(r.appEvents.AVE_AVAILABLE,Wn.handlerInjectAVE):(jQuery(Wn.oDefaults.sSelectorOuterRenderingLayer).removeClass(Wn.oDefaults.sClassAVE),jQuery("#"+Wn.oDefaults.sIdCanvas).remove()):console.log("renderinginjector - no matching dom element")},Wn.addEvents=function(){Wn.eventBus.on(r.appEvents.RENDERINGLAYER_LOADED,Wn.handlerLayerOpened),Wn.eventBus.on("jslayer.close",Wn.handlerLayerClosed),Wn.eventBus.on("jslayer.close",Wn.disableStreamReadyEvent)},Gn.initialize=function(t){Wn.eventBus=t,Wn.addEvents()};var Yn=new(function(){function t(){h()(this,t),1===SETUPS.get("scope.nemo.configuration.force.initial.request")&&(this._alreadyCalled=!1,this._makeInitialCallForScsAttributesIfNecessary=this._makeInitialCallForScsAttributesIfNecessary.bind(this),f.stateRegistry.subscribeToStore(kt.a,this._makeInitialCallForScsAttributesIfNecessary))}var e;return S()(t,[{key:"_makeInitialCallForScsAttributesIfNecessary",value:(e=o()(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.configuration||n.configuration["stock-car-attrs"]||!1!==this._alreadyCalled){e.next=14;break}return f.stateRegistry.unsubscribeFromStore(kt.a,this._makeInitialCallForScsAttributesIfNecessary),this._alreadyCalled=!0,e.prev=3,e.next=6,u.polling.wait(B.a.isDataInitialized,t.pollTime);case 6:zt.a.getConfiguration()["stock-car-attrs"]||B.a.loadConfigurationByPrString(zt.a.getPrString(),zt.a.getSubsessionID()).then((function(t){zt.a.adoptConfiguration(t)})),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(3),console.log("scs initial attribute loading timeout"),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(t){return e.apply(this,arguments)})}],[{key:"pollTime",get:function(){return 3e4}}]),t}()),Kn={},Xn={__:Kn};Kn.oDefaults={classBasketMatchingContainer:".nm-basket-matching",classBasketMatchingCarousel:".nm-basket-matching-car-slider",classBasketMatchingListSlider:".nm-basket-matching-list-slider",classBasketArrowLeft:".nm-basket-matching-prev",classBasketArrowRight:".nm-basket-matching-next",classBasketThumb:".nm-basket-matching-list-small ul li label"},Kn.currentMatchingVehicles=null,Kn.eventBus=null,Kn.scDetailLinkPattern=null,Kn.carouselItemCount=null,Kn.carouselItemWidth=null,Kn.carouselItemHeight=null,Kn.carouselWidth=null,Kn.carouselIndex=0,Kn.carouselLabelStep=!1,Kn.carouselItemWidthTransform=null,Kn.addEvents=function(){Kn.eventBus.on(r.appEvents.STOCKCAR_UPDATE,Kn.handleStockcarResults),Kn.addClickEvents()},Kn.addClickEvents=function(){var t=u.dom.getEventDelegate("body");t.on("click",Kn.oDefaults.classBasketArrowLeft,Kn.prevArrowClickHandler),t.on("click",Kn.oDefaults.classBasketArrowRight,Kn.nextArrowClickHandler),t.on("click",Kn.oDefaults.classBasketThumb,Kn.thumbClickHandler)},Kn.removeClickEvents=function(){var t=u.dom.getEventDelegate("body");t.off("click",Kn.oDefaults.classBasketArrowLeft,Kn.prevArrowClickHandler),t.off("click",Kn.oDefaults.classBasketArrowRight,Kn.nextArrowClickHandler),t.off("click",Kn.oDefaults.classBasketThumb,Kn.thumbClickHandler)},Kn.handlePageLoaded=function(){Kn.currentMatching&&document.querySelector(Kn.oDefaults.selectorModuleContainer)&&Kn.handleStockcarResults(Kn.currentMatching)},Kn.handleStockcarResults=function(t){var e;t&&(Kn.currentMatchingVehicles=t.vehicleBasic?t.vehicleBasic:[],e=Kn.parseResonse(t),Kn.renderTemplate(e))},Kn.parseResonse=function(t){var e,n,r,i,o={cars:[]},a=t.vehicleBasic.length;for(e=0,n=a;e<n;e++)(r=t.vehicleBasic[e])&&(i={id:r.id,model:r.symbolicCarline.description,engine:r.modelCode.description,image:Kn.setImageSrc(r),price:Kn.getFormattedPrice(r.typedPrices,"retail"),link:Kn.setDetailsURL(r.id),svdVersion:r.svdVersion,percentage:Math.round(r.percentage||r.displayPercentage)},o.cars.push(i));return o.result_link=Kn.setResultsURL(t.filterExpression),o.totalCount=a,o},Kn.setImageSrc=function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.pictures&&r.pictures.length&&(e=r.pictures.find((function(t){return"n5c01"===t.key})))?t=e.url:r.fallbackPictures&&r.fallbackPictures.length&&(n=r.fallbackPictures.find((function(t){return"render_16x96"===t.key})))&&(t=n.url),t},Kn.setResultsURL=function(t){var e=Kn.getResultsLinkUrl()||"";return e=e.replace(/SC_ATTR_FILTERS/i,t)},Kn.getResultsLinkUrl=function(){var t=document.querySelector(Kn.oDefaults.classBasketMatchingContainer);return t?t.getAttribute("data-result-url"):null},Kn.setDetailsURL=function(t){var e=Kn.getDetailsLinkUrl()||"";return e=e.replace(/SC_VEHICLE_ID/i,t)},Kn.getDetailsLinkUrl=function(){var t=document.querySelector(Kn.oDefaults.classBasketMatchingContainer);return t?t.getAttribute("data-detail-url"):null},Kn.getFormattedPrice=function(t,e){for(var n=t.length;n--;)if(t[n].type===e)return t[n].formatted;return null},Kn.renderTemplate=function(t){var e,n=document.querySelector(Kn.oDefaults.classBasketMatchingContainer);n&&(n.innerHTML="",t.cars.length>1&&(e=u.template.render('{{~ it.cars :car :index }}\n<input type="radio" id="nm-basket-matching-list-car{{=index+1}}" name="nm-basket-matching-list-slider" class="nm-basket-matching-list-slider" data-index="{{=index}}" {{? index === 0}}checked="checked" {{?}} />\n{{~}}\n<label class="nm-basket-toggle-widgets-label-fullarea" for="nm-basket-toggle-widgets"></label>\n<label class="nm-basket-toggle-widgets-label" for="nm-basket-toggle-widgets">\n\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'basket.matching.headline\'] || "Verfügbare Neuwagen"}}</span>\n\t<svg class="nm-icon-arrow">\n\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t</svg>\n</label>\n<div class="nm-basket-matching-wrap">\n\t<div class="nm-basket-matching-car-slider">\n\n\t\t<div class="nm-basket-matching-next"></div>\n\t\t<div class="nm-basket-matching-prev"></div>\n\t\t<div class="nm-basket-matching-counter nm-el-lbl nm-el-lbl-01">\n\t\t\t<span class="nm-basket-matching-counter-current">1</span>/<span class="nm-basket-matching-counter-total">{{=it.totalCount}}</span>\n\t\t</div>\n\t\t<ul>\n\t\t\t{{~ it.cars :car :index }}\n\t\t\t\t<li data-index="{{=index}}">\n\t\t\t\t\t<div class="nm-basket-matching-car-container">\n\t\t\t\t\t\t<a class="nm-layerLink" href="{{=car.link}}">\n\t\t\t\t\t\t\t<div {{? car.image !== \'undefined\' && car.image !== \'\' }} style="background-image: url({{=car.image}});" class="nm-basket-matching-car-image" {{??}} class="nm-basket-matching-car-image nm-basket-matching-car-fallback" {{?}} ></div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a class="nm-layerLink" href="{{=car.link}}">\n\t\t\t\t\t\t<div class="nm-basket-matching-car-info">\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-model nm-el-lbl nm-el-lbl-01 nm-at-lbl-b">{{=car.model}}</span>\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-description nm-el-lbl nm-el-lbl-01">{{=car.engine}}</span>\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-price nm-el-lbl nm-el-lbl-01">{{=car.price}}</span>\n\n\t\t\t\t\t\t\t<div class="nm-basket-matching-circle" data-progress="{{=car.percentage}}">\n\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t{{var circle_degree = parseInt(car.percentage * 1.8);}}\n\t\t\t\t\t\t\t\t{{var circle_degree_fix = parseInt(circle_degree * 2);}}\n\t\t\t\t\t\t\t\t{{var full_percentage = car.percentage<50 ? 0 : car.percentage;}}\n\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full .fill {\n\t\t\t\t\t\t\t\t\t\tclip: rect(0px, 25px, {{=full_percentage}}px, 0px);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full, .nm-basket-matching-circle .circle-{{=index}} .mask .fill {\n\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    animation: fill-{{=index}}  ease-in-out 3s;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask .fill.fix {\n\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    animation: fill-fix-{{=index}} ease-in-out 3s;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full, .nm-basket-matching-circle .circle-{{=index}} .mask.full .fill {\n\t\t\t\t\t\t\t\t\t\tborder-radius: 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t@keyframes fill-{{=index}}  {\n\t\t\t\t\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t@keyframes fill-fix-{{=index}}  {\n\t\t\t\t\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t<div class="outer-circle"></div>\n\t\t\t\t\t\t\t\t<div class="circle-{{=index}}">\n\t\t\t\t\t\t\t\t\t<div class="mask full">\n\t\t\t\t\t\t\t\t\t\t<div class="fill"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="mask half">\n\t\t\t\t\t\t\t\t\t\t<div class="fill"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="fill fix"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="inner-circle">{{=car.percentage}}%</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t</ul>\n\t</div>\n\t<div class="nm-basket-matching-list-small-wrap">\n\t\t<div class="nm-basket-matching-list-small">\n\t\t\t<ul>\n\t\t\t\t{{~ it.cars :car :index }}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<label for="nm-basket-matching-list-car{{=index+1}}" {{? !!car.image }} style="background-image: url({{=car.image}});" {{??}} class="nm-basket-matching-car-fallback" {{?}} data-index="{{=index}}"></label>\n\t\t\t\t\t</li>\n\t\t\t\t{{~}}\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="nm-basket-matching-more-btn">\n\t\t<a href="{{=it.result_link}}" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-at-btn-inv"><span>{{=window.i18n[\'basket.matching.button.label\'] || "Weitere Neuwagen"}}</span></a>\n\t</div>\n</div>',t),n.innerHTML=e,Kn.initCarousel()))},Kn.initCarousel=function(){var t=document.querySelector(Kn.oDefaults.classBasketMatchingCarousel+" ul"),e=document.querySelector(Kn.oDefaults.classBasketMatchingCarousel+" ul li:last-child");Kn.carouselItemCount=parseInt(t.childNodes.length,10),Kn.carouselItemWidthTransform=100/Kn.carouselItemCount,Kn.carouselItemWidth="100",Kn.carouselWidth=100*Kn.carouselItemCount+"%",t.setAttribute("style","width:"+Kn.carouselWidth+";transform: translate(-"+Kn.carouselItemWidthTransform+"%);"),t.insertBefore(e,t.firstChild),u.swipe.register(Kn.onSwipeFinishHandler,Kn.oDefaults.classBasketMatchingCarousel,{swipedistance:50})},Kn.getCurrentIndex=function(){var t=u.dom.getElementsArray(Kn.oDefaults.classBasketMatchingListSlider),e=0;return t.forEach((function(t,n){t.checked&&(e=n)})),e},Kn.setCurrentIndex=function(t){var e=Kn.getCurrentIndex();t!==e&&(Kn.updateThumbPosition(t),Kn.updateCounter(t+1),Kn.animation(e,t))},Kn.nextArrowClickHandler=function(){var t=Kn.getCurrentIndex();t=++t%Kn.carouselItemCount,Kn.setCurrentIndex(t)},Kn.prevArrowClickHandler=function(){var t=Kn.getCurrentIndex();(t=--t)<0&&(t=Kn.carouselItemCount-1),Kn.setCurrentIndex(t)},Kn.onSwipeFinishHandler=function(t){if(t.direction&&0!==t.move)switch(t.direction.horizontal){case u.swipe.LEFT:Kn.nextArrowClickHandler();break;default:Kn.prevArrowClickHandler()}},Kn.animation=function(t,e){var n;Kn.removeClickEvents(),t<e?(n="next",0===t&&e===Kn.carouselItemCount-1&&(n="prev")):(n="prev",t===Kn.carouselItemCount-1&&0===e&&(n="next")),"prev"===n?Kn.animatePrev(t,e):Kn.animateNext(t,e)},Kn.animatePrev=function(t,e){var n=document.querySelector(Kn.oDefaults.classBasketMatchingCarousel+" ul"),r=document.querySelector(Kn.oDefaults.classBasketMatchingCarousel+" ul li:last-child");u.dom.handleTransition(n).then((function(i){i.classList.remove("slide-transition"),t-e>1&&(r=document.querySelector(Kn.oDefaults.classBasketMatchingCarousel+" ul li:last-child")),n.insertBefore(r,n.firstChild),n.setAttribute("style","width:"+Kn.carouselWidth+";transform: translate(-"+Kn.carouselItemWidthTransform+"%);"),Kn.addClickEvents()})),t-e>1?(n.insertBefore(r,n.firstChild),n.setAttribute("style","width:"+Kn.carouselWidth+";transform: translate(-"+2*Kn.carouselItemWidthTransform+"%);"),n.classList.add("slide-transition"),n.setAttribute("style","width:"+Kn.carouselWidth+";transform: translate(0)")):(n.classList.add("slide-transition"),n.setAttribute("style","width:"+Kn.carouselWidth+";transform: translate(0)"))},Kn.animateNext=function(t,e){var n=document.querySelector(Kn.oDefaults.classBasketMatchingCarousel+" ul"),r=document.querySelector(Kn.oDefaults.classBasketMatchingCarousel+" ul li:first-child");u.dom.handleTransition(n).then((function(n){n.classList.remove("slide-transition"),n.appendChild(r,n.firstChild),e-t>1&&(r=document.querySelector(Kn.oDefaults.classBasketMatchingCarousel+" ul li:first-child"),n.appendChild(r,n.firstChild)),n.setAttribute("style","width:"+Kn.carouselWidth+";transform: translate(-"+Kn.carouselItemWidthTransform+"%);"),Kn.addClickEvents()})).catch((function(t){console.log("Promise not completed ",t)})),n.classList.add("slide-transition"),n.setAttribute("style","width:"+Kn.carouselWidth+";transform: translate(-"+Kn.carouselItemWidthTransform*(e-t<0?2:e-t+1)+"%);")},Kn.thumbClickHandler=function(t){var e=parseInt(t.target.getAttribute("data-index"),10);Kn.setCurrentIndex(e)},Kn.updateThumbPosition=function(t){var e=u.dom.getElementsArray(".nm-basket-matching-list-slider");e.map((function(t){t.checked=!1})),e[t].checked=!0},Kn.updateCounter=function(t){document.querySelector(".nm-basket-matching-counter-current").innerHTML=t},Xn.initialize=function(t){Kn.eventBus=t,Kn.addEvents()};var $n,Jn={},Zn={__:Jn};Jn.oDefaults={classBasketMatchingContainer:".nm-basket-matching"},Jn.eventBus=null,Jn.matchingSize=6,Jn.svdVersion=null,Jn.stckSetups=null,Jn.addEvents=function(){Jn.eventBus.on(r.appEvents.CONFIG_UPDATE,Jn.triggerStckRequest),Jn.eventBus.on(r.appEvents.PAGE_READY,Jn.triggerStckRequest)},Jn.isMatchingActive=function(){var t=!!SETUPS.get("scope.nemo.scs-matching"),e=SETUPS.get("stockcar.context"),n=!!SETUPS.get("stockcar.scs.base.url"),r=!!SETUPS.get("stockcar.scs.market.path");return t&&!e&&n&&r},Jn.initialize=function(){!0===Jn.isMatchingActive()&&Jn.getSVDVersion().then((function(){Jn.triggerStckRequest(),Jn.addEvents()}))},Jn.getStckUrlSetup=function(t){return Jn.stckSetups={},Jn.stckSetups.baseUrl=SETUPS.get("stockcar.scs.base.url"),Jn.stckSetups.market=SETUPS.get("stockcar.scs.market.path"),Jn.stckSetups.versionId=Jn.getStckVersionString(t),Jn.stckSetups},Jn.getStckVersionString=function(t){var e=SETUPS.get("stockcar.scs.default.version")?SETUPS.get("stockcar.scs.default.version")+"/":"",n=SETUPS.get("stockcar.scs.version.mapping");return n&&Object.keys(n).length>0&&(e="string"==typeof n[t]?n[t]+"/":e),e},Jn.triggerStckRequest=function(){if(!0===Jn.isMatchingActive())return Jn.startStckRequests().then((function(t){return Jn.svdVersion=t&&t.header&&t.header.dataVersion?t.header.dataVersion:Jn.svdVersion,Jn.broadcastStckMatching(t)})).catch((function(t){return console.log(t)}))},Jn.startStckRequests=o()(s.a.mark((function t(){var e,n,r,i,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=Jn.getMatchingUrl())){t.next=13;break}return t.next=4,Jn.getSVDVersion();case 4:if(r=t.sent,n=Jn.getRequestParams(r)){t.next=8;break}return t.abrupt("return",Promise.reject("missing SCS Attributes…"));case 8:return i=new URLSearchParams(n),o=e+(e.indexOf("?")<0?"?":"&")+i.toString(),t.abrupt("return",fetch(o,{credentials:"omit"}).then((function(t){if(t.ok)return t.json();throw new Error(t.statusText)})));case 13:return t.abrupt("return",Promise.reject("no version and matchUrl…"));case 14:case"end":return t.stop()}}),t)}))),Jn.getBasketContainer=function(){return document.querySelector(Jn.oDefaults.classBasketMatchingContainer)},Jn.getMatchingAttributes=function(){var t,e=Jn.getBasketContainer();return(t=d.a.getSCSmatchingAttributes())&&t.length>0?t.join(","):e&&e.getAttribute("data-attributes").replace(/[[\s\]']+/g,"")||null},Jn.getRequestParams=function(t){var e=[],n=Jn.getMatchingAttributes();return n&&n.length&&t?(e.push("svd="+t),e.push("size="+Jn.matchingSize),e.push("attributes="+n),e=e.join("&")):null},Jn.broadcastStckMatching=function(t){return Jn.eventBus.emit(r.appEvents.STOCKCAR_UPDATE,t),t},Jn.getVersionUrl=function(){var t,e=Jn.stckSetups?Jn.stckSetups:Jn.getStckUrlSetup("version");return e.baseUrl&&e.versionId&&e.market&&(t=e.baseUrl+e.versionId+"version/"+e.market),t},Jn.getMatchingUrl=function(){var t,e=Jn.stckSetups?Jn.stckSetups:Jn.getStckUrlSetup("search");return e.baseUrl&&e.versionId&&e.market&&(t=e.baseUrl+e.versionId+"search/match/"+e.market),t},Jn.getSVDVersion=function(){return $n?Jn.svdVersion&&($n=Promise.resolve(Jn.svdVersion)):$n=Jn.svdVersion?Promise.resolve(Jn.svdVersion):Jn.fetchSVDVersion(),$n},Jn.fetchSVDVersion=function(){var t=Jn.getVersionUrl();return Jn.svdVersion=null,fetch(t,{credentials:"omit"}).then((function(t){if(t.ok)return t.json();throw new Error(t.statusText)})).then((function(t){if(Jn.svdVersion=t&&t.header&&t.header.dataVersion?t.header.dataVersion:null,!Jn.svdVersion)throw new TypeError("could not load svd-version");return Jn.svdVersion})).catch((function(t){console.error("SVD Version error. Using stockcar.static.svd ",t)})).then((function(){return Jn.svdVersion}))},Zn.initialize=function(t){Jn.eventBus=t,Jn.initialize()};var tr=n(124);function er(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}var nr=new(function(t){T()(n,t);var e=er(n);function n(){return h()(this,n),e.apply(this,arguments)}return S()(n,[{key:"performSearch",value:function(t){t&&(this.setApplicationFlags(t),this.setDpuFlags(t))}},{key:"setApplicationFlags",value:function(t){if(-1!==t.search(/^([a-z0-9]+)=((true)|(false))$/)){var e=/^([a-z0-9]+)=((true)|(false))$/.exec(t);Qt.state.triggerModeChange(e[1],e[2])}}},{key:"setDpuFlags",value:function(t){if(-1!==t.search(/dpu_extra=(.*)/)){var e=/^dpu_extra=(.*)/.exec(t);B.a.setDpuExtra(e[1])}}}]),n}(n(135).a)),rr={},ir={__:rr};function or(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ar(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function cr(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}rr.oDefaults={ssButtonCompactMode:".nm-summary-list-toggle-btn",sSelectorSummaryTechDataContainer:".nm-summary-list-techdata-container",sSelectorSummaryTechDataMultiContainer:".nm-mediathek-description",sSelectorSummaryContainer:".nm-module-summary-engine",sSelectorSummaryContainerEngineIcons:".nm-summary-tech-icons",sSelectorSummaryListContainer:".nm-summary-list-container.nm-techdata-container",sSelectorSummaryWltpLink:".nm-module-summary-techdata-list .nm-wltp-link",sSelectorTechRow:".nm-techrow, .nm-j-techrow-data-entry",sSelectorCompactMode:"nm-is-compact-mode",hiddenClass:"nm-hidden",maxModelsinfoWaitTime:3e4,sButtonFullTechData:".nm-foldout-techdata-list-button-full-techdata",sButtonEngineCompare:".nm-foldout-techdata-list-button-engine-compare"},rr.handlePageLoaded=function(t){var e=t&&t.domElement?t.domElement:document;rr.bindClicks(e),rr.patchMotorInfo(e)},rr.bindClicks=function(t){rr.summaryTechDataContainer=u.dom.getElementsArray(rr.oDefaults.sSelectorSummaryTechDataContainer,t),rr.buttonCompactMode=u.dom.getElementsArray(rr.oDefaults.ssButtonCompactMode,t),rr.summaryTechDataContainer.length>0&&rr.buttonCompactMode.length>0&&(rr.domDelegate.off("click",rr.oDefaults.ssButtonCompactMode,rr.handleToggleBtnClick),rr.domDelegate.on("click",rr.oDefaults.ssButtonCompactMode,rr.handleToggleBtnClick))},rr.handleLayerLoaded=function(t){var e=t&&t.element?t.element:document;rr.bindClicks(e),rr.patchMotorInfo(e)},rr.handleConfigurationUpdates=function(){ir.wait(d.a.isInitialized,rr.oDefaults.maxModelsinfoWaitTime).then((function(){rr.patchMotorInfo(document)}))},rr.run=function(t,e,n,r,i){var o,a,s;a=0,(s=t())?r(s):o=setInterval((function(){(s=t())?(clearInterval(o),r(s)):a>e&&(clearInterval(o),i(new Error)),a+=n}),n)},ir.wait=function(t,e,n){var r=n||50;return new Promise((function(n,i){rr.run(t,e,r,n,i)}))},rr.initialize=function(){rr.addEvents()},rr.addEvents=function(){rr.eventBus.on(r.appEvents.PAGE_LOADED,rr.handlePageLoaded),rr.eventBus.on(r.appEvents.LAYER_LOADED,rr.handleLayerLoaded),rr.eventBus.on(r.appEvents.CONFIG_UPDATE,rr.handleConfigurationUpdates),rr.eventBus.on(r.appEvents.MODELSINFO_LOAD_COMPLETE,rr.handlePageLoaded)},rr.handleToggleBtnClick=function(t){t.preventDefault();var e=t.target,n=u.dom.closest(e,rr.oDefaults.sSelectorSummaryTechDataMultiContainer);x()(n.querySelectorAll(rr.oDefaults.sSelectorSummaryTechDataContainer)).forEach((function(t){u.dom.isElement(t)&&(t.classList.contains(rr.oDefaults.sSelectorCompactMode)?t.classList.remove(rr.oDefaults.sSelectorCompactMode):t.classList.add(rr.oDefaults.sSelectorCompactMode))}))},rr.patchMotorInfo=function(t){var e,n,r,i,o,a,s,c=t,l=u.dom.getElement('[data-template="summary"]',c),f=d.a.getEngine(),m=rr.getMotorTechdata(f);if(u.dom.isElement(l)&&m){for(i in m)for(e=m[i],r=u.dom.getElementsArray(".nm-j-summary-text-"+i+", .nm-j-configurator-techdata-"+i,l),n=0;n<r.length;n++)u.dom.isElement(r[n])&&rr.patchDOMfragment(r[n],e);rr.updateVisibilityWltpLinks(m),rr.patchModelFootnotes(f,t)}rr.hideInvisibleCategories(),o=u.dom.getElement(rr.oDefaults.sButtonFullTechData,c),a=u.dom.getElement(rr.oDefaults.sButtonEngineCompare,c),s=zt.a.getModelsInfo(),u.dom.isElement(o)&&u.dom.isElement(a)&&s&&Object.keys(s).length>1&&(o.classList.add(rr.oDefaults.hiddenClass),a.classList.remove(rr.oDefaults.hiddenClass))},rr.patchModelFootnotes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=zt.a.getModelsInfoFootnotes(t),r=zt.a.getModelsInfoSectionFootnotes(t),i=u.dom.getElementsArray(".nm-j-summary-footnote-text",e);i.forEach((function(t){var e=t.getAttribute("data-key");""!==e&&(n&&n[e]?t.innerHTML=n[e]:r&&r[e]&&(t.innerHTML=r[e]))}))},rr.updateVisibilityWltpLinks=function(t){var e=u.dom.getElementsArray(rr.oDefaults.sSelectorSummaryWltpLink);if(e.length>0){var n=Object.keys(t).filter((function(t){return-1!=t.indexOf("wltp-")}));if(n.length>0)n.map((function(e){return t[e]})).some((function(t){return""!=t&&null!=t}))?e.forEach((function(t){return t.classList.remove("nm-hidden")})):e.forEach((function(t){return t.classList.add("nm-hidden")}))}},rr.getMotorTechdata=function(t){var e=d.a.getModelsInfo(t),n=d.a.getTechdata();return Object.assign({},e,n)},rr.patchDOMfragment=function(t,e){var n=u.dom.closest(t,rr.oDefaults.sSelectorTechRow);u.dom.isElement(t)&&(e?(n&&n.classList&&n.classList.remove(rr.oDefaults.hiddenClass),t.innerHTML=e):n&&n.classList&&n.classList.add(rr.oDefaults.hiddenClass))},rr.hideInvisibleCategories=function(){var t,e,n,r,i,o=u.dom.getElementsArray(rr.oDefaults.sSelectorSummaryListContainer+", "+rr.oDefaults.sSelectorSummaryContainer);if(o.length>0)for(e=0;e<o.length;e++){for(r=0,t=u.dom.getElementsArray(rr.oDefaults.sSelectorTechRow,o[e]),n=0;n<t.length;n++)t[n].classList.contains(rr.oDefaults.hiddenClass)&&r++;if(t.length!==r)o[e].classList.remove(rr.oDefaults.hiddenClass);else{if(o[e].classList.contains("nm-module-summary-engine")&&(i=u.dom.getElement(rr.oDefaults.sSelectorSummaryContainerEngineIcons,o[e]),u.dom.isElement(i)))continue;o[e].classList.add(rr.oDefaults.hiddenClass)}}},ir.initialize=function(t){rr.eventBus=t,rr.domDelegate=u.dom.getEventDelegate("body"),rr.initialize()},Object.setPrototypeOf(cr.prototype,HTMLElement.prototype),Object.setPrototypeOf(cr,HTMLElement);var lr={categorizedWrapper:".nm-module-tiles-categorized-tilelist-container",uncategorizedWrapper:".nm-module-tiles-uncategorized-tilelist-container",categorizedHeadlineWrapper:"div.nm-module-tiles-categorized-group-headline-wrapper",uncategorizedHeadline:".nm-module-tiles-uncategorized-headline",categorizedTile:".nm-module-tiles-categorized-tile",categorizedGroupInfo:"div.nm-module-tiles-categorized-groupinfo",tile:".nm-module-tiles-uncategorized-tile, .nm-module-tiles-categorized-tile",categorizedTileInfo:".nm-module-tiles-categorized-tileinfo",uncategorizedTileInfo:".nm-module-tiles-uncategorized-tileinfo",configuratorItems:".nm-j-configurator-item",configuratorItemsList:".nm-module-tiles-categorized-tilelist, .nm-module-tiles-uncategorized-tilelist",categorizedConfiguratorItemsList:".nm-module-tiles-categorized-tilelist",uncategorizedConfiguratorItemsList:".nm-module-tiles-uncategorized-tilelist",categorizedTickMark:"svg.nm-module-tiles-categorized-icon-selected",uncategorizedTickMark:"svg.nm-module-tiles-uncategorized-icon-selected",fadeOutClass:"nm-tile-fadeout",groupMinPrice:".js-configurator-group .nm-j-configurator-text-price"},ur=["00000","00001","00010","00011","00100","00101","00110","00111","01000","01001","01010","01011","01100","01101","01110","01111","10000"],dr=function(t){T()(n,t);var e=sr(n);function n(){return h()(this,n),e.call(this)}return S()(n,[{key:"allConfiguratorItems",get:function(){return x()(this.querySelectorAll(lr.configuratorItems))}},{key:"allTiles",get:function(){return x()(this.querySelectorAll(lr.tile))}},{key:"isSortingEnabled",get:function(){return!!this.sortOrder&&!!this.sortType&&"default"!==this.sortType}},{key:"connectedCallback",value:function(){this.initElements(),this.addEvents()}},{key:"disconnectedCallback",value:function(){this.removeEvents()}},{key:"initElements",value:function(){var t=this;this.groupMinPrice=this.querySelector(lr.groupMinPrice),this.sortOrder=this.getAttribute("data-sort-order"),this.sortType=this.getAttribute("data-sort-type"),d.a.isConfigurationStarted()&&this.handlePriceUpdate(),this.updateHeight(),this.allTiles&&this.allTiles.length>0&&[this.allTiles[0].querySelector("img"),this.allTiles[this.allTiles.length-1].querySelector("img")].forEach((function(e){return e.addEventListener("load",(function(){return t.updateHeight()}))}))}},{key:"addEvents",value:function(){var t=this;this.allTiles.forEach((function(e){e.addEventListener("mouseover",(function(e){return t.handleTileMouseOver(e)})),e.addEventListener("mouseout",(function(){return t.handleTileMouseOut()}))}));var e=r.signal.getEmitter();e.addListener(r.appEvents.CARINFO_LOAD_COMPLETE,(function(){return t.handlePriceUpdate()})),e.addListener(r.appEvents.CONFIG_UPDATE,(function(){t.updateHeightAndPrice(),t.applyStylesToTiles()})),e.addListener(r.appEvents.LAYER_CLOSED,(function(){t.updateHeight(),t.applyStylesToTiles()})),e.addListener(r.appEvents.PAGE_READY,(function(){t.updateHeight()})),window.addEventListener("resize",(function(){return t.updateHeight()})),window.addEventListener("load",(function(){return t.updateHeight()}))}},{key:"removeEvents",value:function(){var t=this;this.allTiles.forEach((function(e){e.removeEventListener("mouseover",(function(e){return t.handleTileMouseOver(e)})),e.removeEventListener("mouseout",(function(){return t.handleTileMouseOut()}))}));var e=r.signal.getEmitter();e.removeListener(r.appEvents.CARINFO_LOAD_COMPLETE,(function(){return t.updateHeightAndPrice()})),e.removeListener(r.appEvents.CONFIG_UPDATE,(function(){return t.updateHeightAndPrice()})),e.removeListener(r.appEvents.LAYER_CLOSED,(function(){return t.updateHeight()})),e.removeListener(r.appEvents.PAGE_READY,(function(){return t.updateHeight()})),window.removeEventListener("resize",(function(){return t.updateHeight()})),window.removeEventListener("load",(function(){return t.updateHeight()})),this.allTiles&&this.allTiles.length>0&&[this.allTiles[0].querySelector("img"),this.allTiles[this.allTiles.length-1].querySelector("img")].forEach((function(e){return e.removeEventListener("load",(function(){return t.updateHeight()}))}))}},{key:"handleTileMouseOver",value:function(t){var e=this,n=t.currentTarget;this.updateHeight(),this.allTiles.forEach((function(t){t!==n?(e.fadeOutTile(t),t.nextElementSibling.style.display="none"):t.nextElementSibling.style.display="flex"}))}},{key:"checkIfUncategorized",value:function(t){return t.includes("uncategorized")}},{key:"showOrHideTile",value:function(t){var e=this.checkIfUncategorized(t.className)?lr.uncategorizedTickMark:lr.categorizedTickMark,n=getComputedStyle(t.querySelector(e)).display;t.nextElementSibling.style.display="none"!==n&&n?"flex":"none"}},{key:"applyStylesToTiles",value:function(){var t=this;this.allTiles.forEach((function(e){t.fadeInTile(e),t.showOrHideTile(e)}))}},{key:"handleTileMouseOut",value:function(){this.applyStylesToTiles()}},{key:"fadeInTile",value:function(t){t.classList.remove(lr.fadeOutClass)}},{key:"fadeOutTile",value:function(t){t.classList.add(lr.fadeOutClass)}},{key:"updateHeightAndPrice",value:function(){this.handlePriceUpdate(),this.updateHeight()}},{key:"handlePriceUpdate",value:function(){if(this.isSortingEnabled){var t=this.getSortedItems();this.replaceItems(t)}this.groupMinPrice&&this.updateGroupMinPrice()}},{key:"updateTileHeights",value:function(t){var e,n=t.isUncategorized,r=t.wrapper,i=t.configuratorItemsList,o=t.groupInfo,a=t.headline,s=t.tileInfo,c=120,l=this.querySelector("".concat(r,">ul")).offsetHeight,u=this.querySelector(a).offsetHeight,d=or(this.querySelectorAll("".concat(i,">li ").concat(s)));try{for(d.s();!(e=d.n()).done;){var f=e.value;f.offsetHeight>c&&(c=f.offsetHeight),f.style.top="".concat((!n&&u)+l,"px")}}catch(t){d.e(t)}finally{d.f()}var m=c+(!n&&u)+l;this.querySelector(r).style.height="".concat(m,"px"),this.querySelector(r).style.marginBottom="16px",null!==o&&(this.querySelector("".concat(r,">").concat(o)).style.height="".concat(c,"px"))}},{key:"updateHeight",value:function(){var t=lr,e=this.checkIfUncategorized(this.firstElementChild.className),n={isUncategorized:e,wrapper:e?t.uncategorizedWrapper:t.categorizedWrapper,configuratorItemsList:e?t.uncategorizedConfiguratorItemsList:t.categorizedConfiguratorItemsList,groupInfo:e?null:t.categorizedGroupInfo,headline:e?t.uncategorizedHeadline:"".concat(t.categorizedWrapper,">").concat(t.categorizedHeadlineWrapper),tileInfo:e?t.uncategorizedTileInfo:t.categorizedTileInfo};this.updateTileHeights(n)}},{key:"updateGroupMinPrice",value:function(){var t=this.getVisibleConfiguratorItemIds();if(t.length>0){var e=d.a.getMinPriceForItemIds(t);this.groupMinPrice.innerHTML=e?"".concat(window.i18n.from," ").concat(e):"".concat(window.i18n.from," ").concat(window.i18n["standard-group-price"])}}},{key:"getSortedItems",value:function(){var t=this.allConfiguratorItems;if("price"===this.sortType){var e=this.getSortedItemsByPrice(t);return this.getItemsWithStandardToFront(e)}return t}},{key:"replaceItems",value:function(t){var e=this.querySelector(lr.configuratorItemsList),n=document.createDocumentFragment();t.forEach((function(t){n.appendChild(t)})),e.innerHTML="",e.appendChild(n)}},{key:"getSortedItemsByPrice",value:function(t){var e=this;return t.sort((function(t,r){var i=d.a.getItem(t.getAttribute("data-configurator-id")),o=d.a.getItem(r.getAttribute("data-configurator-id"));if(!i||!o)return 0;var a=n.getPriceValue(i),s=n.getPriceValue(o);return"ascending"===e.sortOrder?a<s?-1:1:"descending"===e.sortOrder?a>s?-1:1:void 0}))}},{key:"getItemsWithStandardToFront",value:function(t){return t.sort((function(t,e){var r=d.a.getItem(t.getAttribute("data-configurator-id")),i=d.a.getItem(e.getAttribute("data-configurator-id"));return r&&i?n.isStatusStandardFlagSet(r)?-1:n.isStatusStandardFlagSet(i)?1:0:0}))}},{key:"getVisibleConfiguratorItemIds",value:function(){return this.allConfiguratorItems.map((function(t){return t.getAttribute("data-configurator-id")})).filter((function(t){var e=d.a.getItem(t);return e&&-1===ur.indexOf(e.status)}))}}],[{key:"isStatusStandardFlagSet",value:function(t){return t.status.match(/1$/)}},{key:"getPriceValue",value:function(t){return t.priceValue?t.priceValue:0}}]),n}(cr);function fr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}function mr(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-configurator-tile-list")&&window.customElements.define("audi-configurator-tile-list",dr),Object.setPrototypeOf(mr.prototype,HTMLElement.prototype),Object.setPrototypeOf(mr,HTMLElement);var gr=function(t){T()(n,t);var e=fr(n);function n(){return h()(this,n),e.call(this)}return S()(n,[{key:"connectedCallback",value:function(){this.popup=this.querySelector(n.selectors.popup),this.hideButton=this.querySelector(n.selectors.hideButton),this.addEvents()}},{key:"disconnectedCallback",value:function(){this.removeEvents()}},{key:"addEvents",value:function(){this.addEventListener("click",this.handleTooltipClick.bind(this)),this.addEventListener("mouseover",this.setPosition.bind(this)),this.hideButton&&this.hideButton.addEventListener("click",this.closeTooltip.bind(this))}},{key:"removeEvents",value:function(){this.removeEventListener("click",this.handleTooltipClick.bind(this)),this.removeEventListener("mouseover",this.setPosition.bind(this)),this.hideButton&&this.hideButton.removeEventListener("click",this.closeTooltip.bind(this))}},{key:"handleTooltipClick",value:function(t){this.isCloseButton(t.target)||this.openTooltip()}},{key:"isCloseButton",value:function(t){return t===this.hideButton}},{key:"openTooltip",value:function(){this.popup.classList.add(n.classes.visible)}},{key:"closeTooltip",value:function(){this.popup.classList.remove(n.classes.visible)}},{key:"setPosition",value:function(){this.removePositionClass();var t=this.popup.getBoundingClientRect();t.left<0?this.classList.add(n.classes.tipLeft):t.left+t.width>window.innerWidth&&this.classList.add(n.classes.tipRight)}},{key:"removePositionClass",value:function(){this.classList.remove(n.classes.tipRight,n.classes.tipLeft)}}],[{key:"selectors",get:function(){return{hideButton:".nm-tooltip-hide",popup:".nm-tooltip-popup"}}},{key:"classes",get:function(){return{visible:"nm-j-tooltip-visible",tipLeft:"nm-tip-left",tipRight:"nm-tip-right"}}}]),n}(mr);window.customElements.get("audi-configurator-tooltip")||window.customElements.define("audi-configurator-tooltip",gr);var pr={closeAllTooltips:function(){var t=document.querySelectorAll("."+gr.classes.visible);x()(t).forEach((function(t){t.classList.remove(gr.classes.visible)}))},handleTooltipOutsideClick:function(t){u.dom.isElementOutsideOfElementWithSelector(t.target,"audi-configurator-tooltip")&&this.closeAllTooltips()},initialize:function(){u.dom.getEventDelegate("body").on("click",this.handleTooltipOutsideClick.bind(this))}},vr=n(134),hr={},yr={__:hr};hr.oDefaults={sColors:"nm-j-visualizer-tiles-color",sRims:"nm-j-visualizer-tiles-rim",sCombiItem:".nm-j-visualizer-slide",sSelectorCombiContainer:".nm-j-visualizer-slides",sTilesSelector:".nm-j-visualizer-item",sTilesblockSelector:".nm-j-visualizer-tiles-block",sMenuSelectedClass:"nm-selected",sButtonSelector:".nm-j-preconfig-submit",sSlideActiveClass:"active",sSlideHiddenClass:"hidden"},hr.timeoutID=null,hr.timeoutDelay=1e3,hr.handleConfigurationStartClick=function(t){var e,n,i,o=u.dom.getElement(hr.oDefaults.sCombiItem+".active");hr.cancelEvent(t),n=u.dom.getDataAttribute(o,"audicode"),i=u.dom.getDataAttribute(o,"prstring"),(n||i)&&(e={},n?e.audicode=n:e.prstring=i,B.a.loadConfigurationFromTeaser(e,"audicode.visualizer").then((function(){r.router.open("page",d.a.getCurrentCarlineUrl())})))},hr.handleTileClick=function(t){var e,n,r,i,o;hr.cancelEvent(t),n=(e=u.dom.closest(t.target,hr.oDefaults.sTilesSelector)).getAttribute("data-color-index")||e.getAttribute("data-rim-index"),hr.updateTileSelection(e),o=hr.getSelectedColorAndRimIndex(e),r=u.dom.getElement(".nm-visualizer-slide.active"),i=u.dom.getElement('.nm-visualizer-slide[data-matrix-index="'+o+'"]'),hr.hideSlide(r),hr.resetActiveVideo(r),hr.showSlide(i),hr.updateActiveTileBar(e,73,55*(n-1))},hr.showSlide=function(t){t.classList.remove("hidden"),t.classList.add("active")},hr.hideSlide=function(t){t.classList.remove("active"),t.classList.add("hidden")},hr.resetActiveVideo=function(t){var e=u.dom.getElement("video",t);u.dom.isElement(e)&&e.currentTime>0&&(e.load(),u.dom.getElement(".nm-mediaplayer",t).classList.remove("nm-video-playing"))},hr.updateTileSelection=function(t){var e=u.dom.closest(t,hr.oDefaults.sTilesblockSelector);u.dom.getElement("."+hr.oDefaults.sMenuSelectedClass,e).classList.remove(hr.oDefaults.sMenuSelectedClass),t.classList.add(hr.oDefaults.sMenuSelectedClass)},hr.getSelectedColorAndRimIndex=function(){return u.dom.getElement(".nm-j-visualizer-tiles-color ."+hr.oDefaults.sMenuSelectedClass).getAttribute("data-color-index")+"-"+u.dom.getElement(".nm-j-visualizer-tiles-rim ."+hr.oDefaults.sMenuSelectedClass).getAttribute("data-rim-index")},hr.handleTileHover=function(t){var e=u.dom.closest(t.target,hr.oDefaults.sTilesSelector);hr.updateActiveTileBar(e,e.clientWidth,e.offsetLeft),clearTimeout(hr.timeoutID)},hr.handleTileblockLeave=function(){clearTimeout(hr.timeoutID),hr.timeoutID=setTimeout((function(){u.dom.getElementsArray(hr.oDefaults.sTilesSelector+"."+hr.oDefaults.sMenuSelectedClass).forEach((function(t){hr.updateActiveTileBar(t,t.clientWidth,t.offsetLeft)}))}),hr.timeoutDelay)},hr.updateActiveTileBar=function(t,e,n){var r=u.dom.closest(t,hr.oDefaults.sTilesblockSelector),i=u.dom.getElement(".nm-visualizer-tile-active-bar",r);i.style.left=n+"px",i.style.width=e+"px"},hr.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},hr.addEvents=function(){hr.domEventDelegate.on("click",hr.oDefaults.sTilesSelector,hr.handleTileClick),hr.domEventDelegate.on("click",hr.oDefaults.sButtonSelector,hr.handleConfigurationStartClick),hr.domEventDelegate.on("mouseover",hr.oDefaults.sTilesSelector,hr.handleTileHover),hr.domEventDelegate.on("mouseout",hr.oDefaults.sTilesblockSelector,hr.handleTileblockLeave)},hr.removeEvents=function(){hr.domEventDelegate.off("click",hr.oDefaults.sTilesSelector,hr.handleTileClick),hr.domEventDelegate.off("click",hr.oDefaults.sButtonSelector,hr.handleConfigurationStartClick)},yr.initialize=function(){hr.domEventDelegate=u.dom.getEventDelegate("body"),hr.init||hr.addEvents(),hr.init=!0};var Sr,Er,Cr,br={},wr={__:br},_r=[];br.oDefaults={sSelectorVTPlink:".nm-j-vtp-link"},br.handleJSONresponse=function(t){var e,n,r,i=Sr;e="",t&&t.num&&t.num>0?(i=Er,e=" ("+t.num+")"):i=!1,(_r=_r||[]).forEach((function(t){Cr=t,i||(i=Cr.getAttribute("data-vtp-original")),Cr.setAttribute("href",i),n=Cr.textContent.split(" (")[0],r=n+e,br.replaceVtpLinkText(Cr,r)}))},br.replaceVtpLinkText=function(t,e){var n=t,r=!1;x()(n.children).filter((function(t){return t.classList.contains("audi-link-s__text")||t.classList.contains("audi-link-m__text")})).every((function(t){return t.textContent=e,r=!0,!1})),r||(n.textContent=e)},br.sendJSONPrequest=function(t){var e=t.replace(/&callback=\?$/,"");br.getJSONP(e).then((function(t){br.handleJSONresponse(t)}),(function(t){console.log("VTP JSON request failed! ",t.message),br.handleJSONresponse(null)}))},br.getJSONP=function(t){return new Promise((function(e,n){var r,i,o,a=br.oDefaults.xhrTimeout,s=window.setTimeout((function(){window.jsonp_callback=function(){},n("JSONP Error")}),a);window.jsonp_callback=function(t){window.clearTimeout(s),e(t)},t.indexOf("jsonp_callback")<0&&(i=t.indexOf("?")<0?"?":"&",r=t+i+"callback=jsonp_callback"),(o=document.createElement("script")).type="text/javascript",o.async=!0,o.src=r||t,document.getElementsByTagName("head")[0].appendChild(o)}))},br.checkForIPHDealerLink=function(t){var e=t;return Qt.iph.inIPHMode()&&(e=Qt.iph.addPartnerId(e),e=Qt.iph.updateNWB(e)),e},br.handleUpdates=function(){var t=d.a.getNwbLink(),e="";(_r=u.dom.getElementsArray(br.oDefaults.sSelectorVTPlink)).length&&(_r.forEach((function(t){(Cr=t).getAttribute("data-vtp-original")||(e=Cr.getAttribute("href"),Cr.setAttribute("data-vtp-original",e))})),t&&(Sr=br.checkForIPHDealerLink(t.plainLink),Er=br.checkForIPHDealerLink(t.entryLink),br.sendJSONPrequest(br.checkForIPHDealerLink(t.queryLink))))},br.addEvents=function(){br.eventBus.on(r.appEvents.CONFIG_UPDATE,br.handleUpdates),br.eventBus.on(r.appEvents.LAYER_LOADED,br.handleUpdates),br.eventBus.on(r.appEvents.PAGE_LOADED,br.handleUpdates)},br.initialize=function(){br.instance||(br.addEvents(),br.instance=!0)},wr.initialize=function(t){br.eventBus=t,br.initialize()};var Dr={},kr={__:Dr};function xr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var i=R()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P()(this,n)}}Dr.device=u.device,Dr.oDefaults={classIsWallet:"nm-agent-is-wallet"},Dr.eventBus=null,Dr.addEvents=function(){Dr.eventBus.on(r.appEvents.PAGE_LOADED,Dr.handlePageLoaded)},Dr.handlePageLoaded=function(){Dr.isWalletEnabled()&&document.querySelector("body").classList.add(Dr.oDefaults.classIsWallet)},Dr.isWalletEnabled=function(){return Dr.device.isiPad()||Dr.device.isiPhone()},kr.initialize=function(t){Dr.eventBus=t,Dr.addEvents(),Dr.handlePageLoaded()};var Ar=function(t){T()(r,t);var e,n=xr(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h()(this,r),(t=n.call(this))._closeLayer=t._closeLayer.bind(L()(t)),t.data=Object.assign({},e.dataset),t}return S()(r,[{key:"connectedCallback",value:function(){this._render(),this.addEvents()}},{key:"addEvents",value:function(){this.querySelector(".j-close").addEventListener("click",this._closeLayer)}},{key:"_closeLayer",value:function(t){t.preventDefault(),t.stopPropagation(),this._triggerClose()}},{key:"_render",value:function(){var t=this.data,e=t.headline,n=t.message,i=r.buttonText;this.innerHTML='<div class="modal-layer__inner nm-modal-layer__inner" role="alert">\n\t\t\t\t\t\t\t<div class="nm-modal-layer__header">\n\t\t\t\t\t\t\t\t<div class="nm-modal-layer__headline-wrap">\n\t\t\t\t\t\t\t\t\t<h2 class="nm-modal-layer__headline audi-headline-order-2">'.concat(e,'</h2>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-modal-layer__inner-content">\n\t\t\t\t\t\t\t\t<p class="nm-modal-layer__message audi-copy-m">').concat(n,'</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-modal-layer__footer">\n\t\t\t\t\t\t\t\t<button class="audi-button nm-modal-layer__confirm-button j-close">\n\t\t\t\t\t\t\t\t\t<span class="audi-button__text">').concat(i,"</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>")}}],[{key:"type",get:function(){return"EngineDisclaimerLayerElement"}},{key:"getContent",value:(e=o()(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new r(e));case 1:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"buttonText",get:function(){return window.i18n["engine_disclaimer_layer.button.text"]}}]),r}(r.ModalLayerContentBase);r.modalLayer.registerLayerType(Ar),void 0===window.customElements.get("audi-engine-disclaimer-layer-element")&&window.customElements.define("audi-engine-disclaimer-layer-element",Ar);var Lr={},Ir={__:Lr};Lr.oDefaults={sSelectorModule:".nm-md-yourpayment",sSelectorRateSwitchCart:"#nm-price-rate-switch",sSelectorRateSwitchYP:"#nm-price-rate-switch-yp",sSelectorTable:".nm-yourpayment-costs-list",sSelectorSnippetText:".nm-j-configurator-text-",sShowErrorClass:"nm-j-yourpayment-show-error"},Lr.eventBus=null,Lr.addEvents=function(){Lr.eventBus.on(r.appEvents.PAGE_LOADED,Lr.handleConfigUpdate),Lr.eventBus.on(r.appEvents.CONFIG_UPDATE,Lr.handleConfigUpdate)},Lr.handleConfigUpdate=function(){var t;if(document.querySelector(Lr.oDefaults.sSelectorModule)&&d.a.isConfigurable()){if(!(t=d.a.getConfiguration()))return;""===t.rate?document.querySelector(Lr.oDefaults.sSelectorModule).classList.add(Lr.oDefaults.sShowErrorClass):(document.querySelector(Lr.oDefaults.sSelectorModule).classList.remove(Lr.oDefaults.sShowErrorClass),Lr.updatePriceMode(t))}},Lr.updatePriceMode=function(t){var e,n=document.querySelector(Lr.oDefaults.sSelectorRateSwitchYP),r=document.querySelector(Lr.oDefaults.sSelectorRateSwitchCart);n&&r&&(r.getAttribute("checked")!==n.getAttribute("checked")&&n.setAttribute("checked",r.getAttribute("checked")),e=t.financeParameterList?t.financeParameterList:null,Lr.popuplatePricesByRate(e))},Lr.popuplatePricesByRate=function(t){var e,n,r,i=0,o=document.querySelector(Lr.oDefaults.sSelectorTable);if(o&&t)for(e=t.length;i<e;)n=t[i].id,r=t[i].textAndUnit,n&&r&&u.dom.getElement(Lr.oDefaults.sSelectorSnippetText+n,o).text(r),i++},Ir.initialize=function(t){Lr.eventBus=t,Lr.addEvents(),Lr.handleConfigUpdate()};var Tr={},Or={__:Tr};Tr.handleClickDownloadLink=function(t){t.preventDefault();var e=SETUPS.get("nemo.url.dpu")+"media-zip",n=d.a.getCarline()+".zip",r=Tr.getFetchOptions(n);return fetch(e,r).then((function(t){if(t.ok)return t.blob()})).then((function(t){var e=Tr.createFakeLink(n);e.href=window.URL.createObjectURL(t),e.click()})).catch((function(t){console.error(t)})),!0},Tr.getFetchOptions=function(t){var e=new URLSearchParams;return e.append("carline",d.a.getCarlineName()),e.append("images",Tr.getImageListFromConfigurationObject().join("\n")),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Disposition":"attachment; filename=".concat(t)},body:e}},Tr.createFakeLink=function(t){var e=document.createElement("a");return e.download=t,e.style.display="none",e.setAttribute("data-tracking-exclude",!0),document.body.appendChild(e),e},Tr.addEvents=function(){Tr.domEventDelegate.on("click",".nm-j-zip-download-delegate-click",Tr.handleClickDownloadLink)},Tr.getImageListFromConfigurationObject=function(){for(var t=d.a.getConfigurationAssets()||[],e=d.a.getRenderUrl(),n=[],r=0,i=Object.keys(t);r<i.length;r++){var o=i[r],a="https:"+e+(t[o].fullscreen||t[o]["fullscreen.new"]||t[o]["stage.new"]);n.push(a)}return n},Or.initialize=function(t){Tr.eventBus=t,Tr.domEventDelegate=u.dom.getEventDelegate("body"),Tr.addEvents()},window.nemo=window.nemo||{},window.nemo.configurator=window.nemo.configurator||{},window.nemo.configurator.api=d.a,SETUPS&&(window.nemo.setups=SETUPS.__.stored);var Pr=[D,N,X,at,_t,Mt.a,Ut,Nt.a,B.a,zt.a,Yt,Kt.a,de,me,Me,Ue,Qe,Ve,We,Xe,Ye,Je,fn,tn,On,hn,Sn,Cn,wn,Dn,xn,An,In,Bn,Fn,Nn,Hn,Gn,qn,Zn,Xn,tr.a,ir,pr,vr.a,yr,wr,kr,Ir,Or],jr=r.signal.getEmitter();Pr.forEach((function(t){try{t.initialize(jr)}catch(t){console.error(t)}}))}])}));
//# sourceMappingURL=bundle.configurator.legacy.js.map