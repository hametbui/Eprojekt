/*! For license information please see bundle.editorial.js.LICENSE.txt */
/* nemo v148.0.0 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("core-application"),require("core-utils"),require("microkernel"),require("core-global"),require("core-vendor")):"function"==typeof define&&define.amd?define("editorial",["core-application","core-utils","microkernel","core-global","core-vendor"],t):"object"==typeof exports?exports.editorial=t(require("core-application"),require("core-utils"),require("microkernel"),require("core-global"),require("core-vendor")):e.editorial=t(e["core-application"],e["core-utils"],e.microkernel,e["core-global"],e["core-vendor"])}(window,(function(e,t,n,a,i){return function(e){function t(t){for(var n,i,o=t[0],r=t[1],l=0,d=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);for(s&&s(t);d.length;)d.shift()()}var n={},a={3:0};function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,i){n=a[e]=[t,i]}));t.push(n[2]=o);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=function(e){return i.p+"bundle."+({9:"panorama-three",12:"vendors~panorama-three"}[e]||e)+".js"}(e);var s=new Error;r=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,n[1](s)}a[e]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:l})}),12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp_name_=window.webpackJsonp_name_||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var s=r;return i(i.s=77)}({0:function(t,n){t.exports=e},1:function(e,n){e.exports=t},4:function(e,t){e.exports=n},5:function(e,t){e.exports=a},71:function(e,t,n){let a="";SETUPS.get("nemo.url.static")&&SETUPS.get("nemo.staticversion")&&(a=`${location.origin}${SETUPS.get("nemo.url.static")}.${SETUPS.get("nemo.staticversion")}`),n.p=a+"/cms4i-nemo/build/"},77:function(e,t,n){"use strict";n.r(t),n.d(t,"cookieModal",(function(){return a})),n.d(t,"footnote",(function(){return r})),n.d(t,"gsaSearch",(function(){return s})),n.d(t,"iframe",(function(){return m})),n.d(t,"iframeHeight",(function(){return h})),n.d(t,"inlineMediagallery",(function(){return T})),n.d(t,"InteractiveImageRotation",(function(){return j})),n.d(t,"interactiveImageSlider",(function(){return V})),n.d(t,"interstitialLayer",(function(){return B})),n.d(t,"layerMultiStage",(function(){return ge})),n.d(t,"mediagalleryController",(function(){return Q})),n.d(t,"mediagalleryCounter",(function(){return z})),n.d(t,"mediagalleryDownload",(function(){return W})),n.d(t,"mediagalleryModel",(function(){return R})),n.d(t,"mediagalleryStage",(function(){return X})),n.d(t,"mediagalleryThumbnailSlider",(function(){return K})),n.d(t,"MessageLayerElement",(function(){return Z})),n.d(t,"ModalLayerInterstitialElement",(function(){return te})),n.d(t,"notificationBar",(function(){return ae})),n.d(t,"navigation",(function(){return je})),n.d(t,"panorama",(function(){return oe})),n.d(t,"pageService",(function(){return le})),n.d(t,"patchDealerLinks",(function(){return se})),n.d(t,"renderStage",(function(){return ue})),n.d(t,"stage",(function(){return ve})),n.d(t,"swipeStage",(function(){return p})),n.d(t,"videoControlsTemplate",(function(){return U})),n.d(t,"videoNew",(function(){return A}));const a=new class{constructor(){window.Bootstrapper&&this._initialize()}_initialize(){this._handleClick=this._handleClick.bind(this),this._bindListenerToCookieLinks()}_bindListenerToCookieLinks(){[...document.querySelectorAll(".audi-cookie-modal-link")].forEach(e=>{e.addEventListener("click",this._handleClick)})}_handleClick(e){e.preventDefault(),window.Bootstrapper&&null!==window.Bootstrapper&&(Bootstrapper.gateway&&Bootstrapper.gateway.openModal?(Bootstrapper.gateway.openModal(),document.body.scrollTop=0):console.error("Unable to call Bootstrapper.gateway.openModal"))}};var i=n(4);class o{constructor(){if(o._instance)return o._instance;SETUPS.get("nemo.footnote-engine.active")||(this._hideOrShowFootnote=this._hideOrShowFootnote.bind(this),i.stateRegistry.subscribeToStore("dbadPageStoreFootnotes",this._hideOrShowFootnote)),o._instance=this}_bindElements(){this.footnoteElements=document.getElementsByClassName("audi-footnotes")}_hideOrShowFootnote(e){this._bindElements();let t=this.footnoteElements.length;for(let n=0;n<t;n+=1){let t=this.footnoteElements[n];e.isNemoHome?t.classList.add("nm-hidden"):t.classList.remove("nm-hidden")}}}const r=new o;var l,s,d=n(0);s={__:l={}},l.pending=!1,l.initialize=function(){l.addEvents(),l.$SearchResultEl=jQuery(".gsa-search-result"),l.$SearchResultEl.length>0&&(l.baseSearchURL=l.$SearchResultEl.attr("data-searchurl"),l.onHashChange())},l.processReturnedData=function(e){const t=document.querySelector("body"),n=s.getSearchQueryString(),a=jQuery(jQuery.parseHTML(e));let i=0;const o=parseInt(a.find(".lists-pagination .is-selected").text(),10);a.find(".dropdown-search-sort").hide(),a.find("a[data-tracking]").each((function(){i++;let e=jQuery(this);e.attr("data-tracking-pos",10*(o-1)+i),e.addClass("audi-j-search-result"),e.removeAttr("data-tracking")})),t.classList.add("audi-j-tracking-search"),t.setAttribute("data-search-name","primary main searchfield"),t.setAttribute("data-search-term",n),t.setAttribute("data-search-results",a.find(".search-results-count b").text()),l.$SearchResultEl.html(a)},l.search=async function(e){l.pending=!0;try{const t=await fetch(e),n=await t.text();l.processReturnedData(n)}catch(e){console.log("GSA Error:"+e.message),l.$SearchResultEl.html('<div class="nm-error">'+l.$SearchResultEl.attr("data-errormessage")+"</div>")}l.pending=!1,l.eventBus.emit(d.appEvents.SEARCH_LOADED)},l.addEvents=function(){l.legacyEventBus.on("click","a[data-gsa]",l.handleNewSearchClick),l.eventBus.on(d.appEvents.HASH_CHANGE,l.onHashChange)},l.handleNewSearchClick=function(e){e.preventDefault();const t=jQuery(this).attr("data-gsa"),n=l.baseSearchURL+t;l.search(n)},l.onHashChange=function(){var e=s.getSearchQueryString(),t=l.baseSearchURL+"&q="+e;e&&l.search(t)},s.getSearchQueryString=function(e){var t=(e||window).location.hash.replace("#","").replace(/</g,"").replace(/>/g,"").split("&"),n=null;for(let e=0;e<t.length;e++)0===t[e].search("search=")&&(n=t[e].replace("search=",""));return n},s.hasPendingResults=function(){return l.pending},s.initialize=function(e){l.eventBus=e,l.legacyEventBus=jQuery("body"),l.initialize()};var c=n(5),u={},m={__:u};u.oDefaults={module:".nm-j-iframe"},u.eventBus=null,u.addEvents=function(){u.eventBus.on(d.appEvents.PAGE_LOADED,u.setIframeUrl),u.eventBus.on(d.appEvents.LAYER_LOADED,u.setIframeUrl),u.eventBus.on(d.appEvents.CONFIG_UPDATE,u.setIframeUrl)},u.getIframeContainer=function(e){return!!e&&[].slice.call(e.querySelectorAll(u.oDefaults.module))},u.getContext=function(e){return e&&!e.context?e.domElement||e.element:document},u.setIframeUrl=function(e){var t,n=u.getContext(e);(t=u.getIframeContainer(n))&&t.length>0&&t.forEach((function(e){var t,n,a;t=e.getAttribute("data-pattern")||"",n=e.getAttribute("data-src")||"",a=e.getAttribute("data-height")||"0";let i=e.getElementsByTagName("script");t&&n&&c.patternMatching.getReplacedUrl(t,n).then((function(t){const n=document.createElement("iframe");n.setAttribute("src",t),n.setAttribute("height",a),n.setAttribute("frameborder","0"),i.length>0?e.insertBefore(n,i[0]):e.innerHTML='<iframe src="'+t+'" height="'+a+'" frameborder="0" ></iframe>'})).catch((function(e){console.error(e)}))}))},m.initialize=function(e){u.eventBus=e,u.addEvents(),setTimeout(u.setIframeUrl,250)};var g={},h={__:g};g.getIframeForUrl=function(e){var t,n,a=document.querySelector('iframe[src*="'+e+'"]');return null===a&&((t=document.createElement("a")).href=e,n=t.pathname,a=document.querySelector('iframe[src*="'+n+'"]')),jQuery(a)},g.toggleShader=function(e,t){var n=g.getIframeForUrl(t),a=jQuery(".nm-header").height(),i=window.document.body.offsetHeight,o=n.height();e?(n.css({zIndex:101,position:"relative"}),(window.document.body.offsetWidth<=479||i-70<=o)&&n.css({top:-a}),jQuery("body").addClass("nm-carpark-shader-visible"),d.layerAnimation.showShader()):(jQuery("body").removeClass("nm-carpark-shader-visible"),d.layerAnimation.hideShader(),n.css({position:"static",top:0}))},g.parseJsonDataFromEvent=function(e={}){let t=e.data;if("string"==typeof t)try{t=window.JSON.parse(e.data)}catch(e){console.warn(e)}return t},g.removeClassFromModule=function(e){var t,n,a;e&&(t=e.closest(".nm-md-iframe")[0])&&(n=t.classList,[].slice.call(n).forEach((function(e,t){e.indexOf("nm-md-iframe-pageformat-")>=0&&(a=n[t],n.remove(a))})))},g.setAndAnimateIframeHeight=function(e,t){var n,a=g.getIframeForUrl(e);g.removeClassFromModule(a),n=parseInt(t,10)+"px",a.animate({height:n},400,"swing",(function(){a.animate({opacity:1})}))},g.setIframeHeight=function(e,t,n){var a,i=g.getIframeForUrl(n);g.removeClassFromModule(i),a=parseInt(t,10)+"px",i.height(a)},g.handler=function(e){var t;void 0!==e&&void 0!==e.data&&(t=g.parseJsonDataFromEvent(e))&&(t.originurl&&t.layerExternalizerBridgeSetHeight?g.setAndAnimateIframeHeight(t.originurl,t.layerExternalizerBridgeSetHeight):t.height?g.setIframeHeight(e.origin,t.height,t.url):t.shader&&g.toggleShader("show"===t.shader,t.url))},g.addEvents=function(){window.addEventListener?window.addEventListener("message",g.handler,!1):window.attachEvent("onmessage",g.handler)},h.initialize=function(){g.addEvents()};var v=n(1);const f={},p={__:f};let y,S={x:0,y:0},E="none",C=0,D=0,w={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},b=!1,L="desktopdevice";f.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},f.handleMouseDown=function(e){b=!1,"select"!==e.target.nodeName.toLowerCase()&&"input"!==e.target.nodeName.toLowerCase()&&"option"!==e.target.nodeName.toLowerCase()&&(b=!0),D=0,C=0,S.x=e.pageX||e.originalEvent.changedTouches[0].pageX,S.y=e.pageY||e.originalEvent.changedTouches[0].pageY,y.off(w[L].up,f.handleMouseUp).on(w[L].up,f.handleMouseUp),f.isTouchDevice()||y.off(w[L].move,f.handleMouseMove).on(w[L].move,f.handleMouseMove)},f.triggerStageViewChange=function(e){"right"===e?jQuery("li.nm-backarrow").trigger("click.stage.remote"):jQuery("li.nm-nextarrow").trigger("click.stage.remote")},f.handleMouseUp=function(e){b=!1,C=S.x-(e.pageX||e.originalEvent.changedTouches[0].pageX),D=S.y-(e.pageY||e.originalEvent.changedTouches[0].pageY),E=C>0?"left":"right",Math.abs(C)>25&&Math.abs(D)<25&&f.triggerStageViewChange(E)},f.handleMouseMove=function(e){b&&(C=S.x-(e.pageX||e.originalEvent.changedTouches[0].pageX),D=S.y-(e.pageY||e.originalEvent.changedTouches[0].pageY),E=C>0?"left":"right",Math.abs(C)>25&&Math.abs(D)<25&&(f.removeSwipeEvents(),b=!1,f.triggerStageViewChange(E)))},f.removeSwipeEvents=function(){y.off(w[L].move,f.handleMouseMove),y.off(w[L].up,f.handleMouseUp)},p.disableSwipe=function(){y.off(w[L].move,f.handleMouseMove),y.off(w[L].up,f.handleMouseUp),y.off(w[L].down,f.handleMouseDown)},p.enableSwipe=function(){y.off(w[L].down,f.handleMouseDown).on(w[L].down,f.handleMouseDown)},f.addEvents=function(){y=jQuery(".nm-stage"),f.isTouchDevice()&&(L="touchdevice"),y.find("img").on("dragstart",(function(e){e.preventDefault()})),y.off(w[L].down,f.handleMouseDown).on(w[L].down,f.handleMouseDown)},p.initialize=function(e){f.eventBus=e,f.addEvents(),f.eventBus.on(d.appEvents.PAGE_LOADED,f.addEvents),f.eventBus.on(d.appEvents.UPDATE_VIEW_STATE,f.addEvents)};const I={delayIntervallId:"",aAllAutoplayVideos:[],aPlayedVideos:[]},A={__:I};I.getCurrentVideoContainer=function(e){var t,n,a=v.dom.getElementsArray(".nm-video");if(a&&e&&e.nodeType)for(n=a.length,t=0;t<n;t++)if(a[t].contains(e))return a[t];return null},I.getVideo=function(e){return e?e.querySelector("video"):null},I.getLayerHead=function(e){return I.findClosest(e,".nm-layer-head")},I.setDataVideoState=function(e,t){t&&t.setAttribute("data-video-state",e)},I.handlerPlayButton=function(){var e=I.getCurrentVideoContainer(this),t=I.getVideo(e),n=I.getLayerHead(e);t&&(t.addEventListener("playing",I.handlerVideoPlaying),t.play()),n&&I.setDataVideoState("playing",n)},I.handlerPauseButton=function(){var e,t,n=I.getCurrentVideoContainer(this);n&&(e=I.getVideo(n),t=I.getLayerHead(n)),e&&(e.addEventListener("pause",I.handlerVideoPause),e.pause(),t&&I.setDataVideoState("paused",t))},I.handlerVideoPause=function(){var e=I.getCurrentVideoContainer(this);this&&(this.removeEventListener("pause",I.handlerVideoPause),this.removeEventListener("timeupdate",I.updateTimeInfo)),I.removeClassName(e,"nm-video-playing")},I.handlerVideoPlaying=function(){var e=I.getCurrentVideoContainer(this);this.removeEventListener("playing",I.handlerVideoPlaying),this.addEventListener("timeupdate",I.updateTimeInfo),this.addEventListener("ended",I.handlerVideoEnded),this.addEventListener("progress",I.handleVideoProgress),I.addClassName(e,"nm-video-playing")},I.handleVideoProgress=function(){var e,t,n,a=I.getCurrentVideoContainer(this);a&&this&&(e=a.querySelector(".nm-loader-loaded"),t=this.buffered.end(0),n=100*parseFloat(t/this.duration),e&&(e.style.width=n+"%"))},I.handlerVideoEnded=function(){let e,t=this,n=I.getCurrentVideoContainer(t),a=!!document.querySelector(".active-fs"),i=I.getLayerHead(n);if(I.handleVideoEndEvents(t),I.removeClassName(n,"nm-video-playing"),I.displayTimeInfos(n,0,t.duration),e=t.currentSrc,t.src=e,a&&I.leaveFullScreen(n.querySelector(".nm-minimize")),t){"false"===t.getAttribute("data-nativectrls")&&n&&n.classList.remove("nm-hide-controls")}I.setDataVideoState("ended",i)},I.handleVideoEndEvents=function(e){e&&(e.removeEventListener("ended",I.handlerVideoEnded),e.removeEventListener("timeupdate",I.updateTimeInfo),e.removeEventListener("progress",I.handleVideoProgress))},I.updateTimeInfo=function(){var e=I.getCurrentVideoContainer(this);e&&I.displayTimeInfos(e,this.currentTime,this.duration)},I.displayTimeInfos=function(e,t,n){var a,i,o,r,l,s=0===t&&0===n;e&&(e.querySelector("video[data-autoplay-in-viewport]")||(a=e.querySelector(".nm-time-played"),i=e.querySelector(".nm-time-duration"),a.innerHTML=I.getTime(t),i.innerHTML=I.getTime(n)),o=e.querySelector(".nm-loader-played"),l=e.querySelector(".nm-loader-loaded"),r=s?0:100*parseFloat(t/n),o&&l&&(s&&(l.style.width="0%"),o.style.width=r+"%"))},I.handlerMuteButton=function(){var e=I.getCurrentVideoContainer(this),t=I.getVideo(e);t&&(!1===t.muted?(t.muted=!0,I.removeClassName(this,"nm-mute"),I.addClassName(this,"nm-unmute")):(t.muted=!1,I.removeClassName(this,"nm-unmute"),I.addClassName(this,"nm-mute")))},I.handlerSeekBar=function(e){var t=I.getCurrentVideoContainer(this),n=I.getVideo(t),a=this.clientWidth,i=e.offsetX/a*100;n&&t&&(n.currentTime=n.duration*(i/100),I.displayTimeInfos(t,n.currentTime,n.duration))},I.showHideControls=function(){var e,t=document.querySelector(".active-fs");t&&(e=t.querySelector(".nm-controls-wrap-video"),I.addClassName(e,"nm-controls-wrap-video-full"),clearTimeout(I.delayIntervallId),I.delayIntervallId=setTimeout((function(){I.removeClassName(e,"nm-controls-wrap-video-full")}),3e3))},I.isFullScreen=function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},I.enterFullScreen=function(e){e.requestFullScreen||(e.requestFullScreen=e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen),e.requestFullScreen()},I.isfullScreenClosed=function(){I.isFullScreen()||I.leaveFullScreen()},A.exitFullScreen=function(){document.exitFullScreen||(document.exitFullScreen=document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen),document.exitFullScreen(),document.removeEventListener("mousemove",I.showHideControls),I.handleFullscreenEvents(!1)},I.switchToFullScreen=function(e){var t=I.getCurrentVideoContainer(e);t&&(I.addClassName(t,"active-fs"),I.addClassName(e,"nm-minimize"),I.handleFullscreenEvents(!0),document.addEventListener("mousemove",I.showHideControls),I.enterFullScreen(t))},I.leaveFullScreen=function(e){var t,n=I.getCurrentVideoContainer(e);e?((n=I.getCurrentVideoContainer(e)).className.indexOf("active-fs")>-1&&I.removeClassName(n,"active-fs"),I.removeClassName(e,"nm-minimize")):(t=document.querySelector(".active-fs"))&&(I.removeClassName(t,"active-fs"),I.removeClassName(t.querySelector(".nm-minimize"),"nm-minimize")),A.exitFullScreen()},I.handleFullscreenEvents=function(e){e?(document.addEventListener("webkitfullscreenchange",I.isfullScreenClosed,!1),document.addEventListener("mozfullscreenchange",I.isfullScreenClosed,!1),document.addEventListener("fullscreenchange",I.isfullScreenClosed,!1),document.addEventListener("MSFullscreenChange",I.isfullScreenClosed,!1)):(document.removeEventListener("webkitfullscreenchange",I.isfullScreenClosed,!1),document.removeEventListener("mozfullscreenchange",I.isfullScreenClosed,!1),document.removeEventListener("fullscreenchange",I.isfullScreenClosed,!1),document.removeEventListener("MSFullscreenChange",I.isfullScreenClosed,!1))},I.handlerFullScreenButton=function(){I.isFullScreen()?I.leaveFullScreen(this):I.switchToFullScreen(this)},I.addClassName=function(e,t){e&&e.classList&&e.classList.add(t)},I.removeClassName=function(e,t){e&&e.classList&&e.classList.remove(t)},I.getTime=function(e){var t=Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60);return t+":"+(Math.floor(e-60*t)<10?"0"+Math.floor(e-60*t):Math.floor(e-60*t))},I.findClosest=function(e,t){var n,a="",i=e;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(a=e,!0)}));i;){if((n=i.parentElement)&&n[a](t))return n;i=n}return null},I.handlerNativeControls=function(e){var t,n,a;for(t=e&&e.domElement?e.domElement.querySelectorAll(".nm-video"):document.querySelectorAll(".nm-video"),a=0;a<t.length;a++)if(I.addClassName(t[a],"nm-hide-controls"),n=I.getVideo(t[a])){"false"!==n.getAttribute("data-nativectrls")&&n.setAttribute("controls","")}},I.enableVideoFullStageMode=function(){document.querySelector("body").classList.add("nm-stage-full")},I.disableVideoFullStageMode=function(){document.querySelector("body").classList.remove("nm-stage-full")},I.handlerStagePlayButton=function(){var e,t=I.getCurrentVideoContainer(this),n=I.getVideo(t);n&&(n.classList.remove("nm-hidden"),n.play(),n.addEventListener("ended",I.handlerStageSkipButton)),this&&this.classList.add("nm-hidden"),I.enableVideoFullStageMode(),t&&(e=t.querySelector(".nm-introvideo"))&&e.classList.remove("nm-hidden"),p.disableSwipe()},I.handlerStageSkipButton=function(e){var t=I.getCurrentVideoContainer(this),n=I.getVideo(t),a=t?t.querySelector(".nm-introvideo"):null,i=t?t.querySelector(".nm-j-play-btn-stage"):null;e.preventDefault(),n&&(n.classList.add("nm-hidden"),n.pause()),I.disableVideoFullStageMode(),a&&a.classList.add("nm-hidden"),i&&i.classList.remove("nm-hidden"),p.enableSwipe()},I.handlerVideoClick=function(){var e=I.getCurrentVideoContainer(this),t=I.getVideo(e);t&&(t.paused?(t.addEventListener("playing",I.handlerVideoPlaying),t.play()):(t.addEventListener("pause",I.handlerVideoPause),t.pause()))},I.addStageAutoPlayEvent=function(){var e,t,n,a=document.querySelector(".nm-stage-container .nm-stage-media.nm-video");if(a&&("true"===a.getAttribute("data-autoplay")||!0===a.getAttribute("data-autoplay"))){if(t=(e=I.getVideo(a)).querySelectorAll("source"),!(navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0))for(n=0;n<t.length;n++)t[n].media=t[n].getAttribute("data-media");e.classList.remove("nm-hidden"),e.addEventListener("canplay",I.handleStageAutoPlay),e.load()}},I.handleStageAutoPlay=function(){var e=document.querySelector(".nm-stage-container .nm-stage-media .nm-j-play-btn-stage"),t=I.getCurrentVideoContainer(e),n=I.getVideo(t);n.removeEventListener("canplay",I.handleStageAutoPlay),e&&e.classList.add("nm-hidden"),v.device.isMobile()&&(n.controls=!1),I.enableVideoFullStageMode(),p.disableSwipe(),n&&(n.classList.remove("nm-hidden"),n.muted=!0,n.play().catch((function(){})),n.addEventListener("ended",(function(){n.play().catch((function(){}))})))},I.addAutoplayOnceEvent=function(){I.aAllAutoplayVideos=[].slice.call(document.querySelectorAll("video[data-autoplay-in-viewport]")),I.aAllAutoplayVideos.length>0&&document.addEventListener("scroll",I.handleVideoInViewport)},I.handleVideoInViewport=function(){I.aAllAutoplayVideos.forEach((function(e,t){v.dom.isInViewport(e)&&(e.addEventListener("playing",I.handlerVideoPlaying),e.muted=!0,e.play().catch((function(){})),I.aAllAutoplayVideos.splice(t,1))}))},I.handlePageLoaded=function(){I.disableVideoFullStageMode(),v.device.isMobile()&&I.initializeNativeControls()},I.handlePageLeave=function(){I.removeEvents()},A.resetVideoPlayer=function(e,t,n){let a=e.querySelector("video");a&&(t?(a.src=t,a.load()):a.removeAttribute("src"),n&&(a.poster=n),I.handleVideoEndEvents(a),I.removeClassName(e,"nm-video-playing"),I.displayTimeInfos(e,0,0))},A.enterFullscreen=function(e){I.enterFullScreen(e)},I.addEvents=function(){I.eventBus.on(d.appEvents.PAGE_READY,I.handlePageLoaded),I.eventBus.on(d.appEvents.PAGE_LEAVE,I.handlePageLeave),I.domEventDelegate.on("click",".nm-video .nm-j-play-btn .nm-video-button-play",I.handlerPlayButton),I.domEventDelegate.on("click",".nm-video .nm-j-play-btn .nm-video-button-pause",I.handlerPauseButton),I.domEventDelegate.on("click",".nm-video .nm-j-mute-btn",I.handlerMuteButton),I.domEventDelegate.on("click",".nm-video .nm-video-loader",I.handlerSeekBar),I.domEventDelegate.on("click",".nm-video .nm-j-fullscreen-btn",I.handlerFullScreenButton),I.domEventDelegate.on("click",".nm-video .nm-j-play-btn-stage",I.handlerStagePlayButton),I.domEventDelegate.on("click",".nm-video .nm-j-skip-btn-stage",I.handlerStageSkipButton),I.domEventDelegate.on("click",".nm-prevent-video-click-visualizer",I.handlerVideoClick),I.addStageAutoPlayEvent(),I.addAutoplayOnceEvent()},I.removeEvents=function(){I.eventBus.off(d.appEvents.PAGE_READY,I.handlePageLoaded),document.removeEventListener("scroll",I.handleVideoInViewport);[...document.querySelectorAll("video")].forEach(e=>{e.pause(),e.removeEventListener("pause",I.handlerVideoPlaying),e.removeEventListener("playing",I.handlerVideoPlaying),e.removeEventListener("timeupdate",I.updateTimeInfo),e.removeEventListener("ended",I.handlerVideoEnded),e.removeEventListener("progress",I.handleVideoProgress),e.removeEventListener("canplay",I.handleStageAutoPlay)})},I.initializeNativeControls=function(){I.eventBus.on(d.appEvents.PAGE_LOADED,I.handlerNativeControls),I.eventBus.on(d.appEvents.LAYER_LOADED,I.handlerNativeControls),I.handlerNativeControls()},A.handlerLayer=function(e){v.device.isMobile()&&I.handlerNativeControls(e)},A.initialize=function(e){I.eventBus=e,I.domEventDelegate=v.dom.getEventDelegate("body"),I.removeEvents(),I.addEvents(),I.handlePageLoaded()};var k,M,P,_={},T={__:_};function x(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}_.NEXT="next",_.PREV="prev",_.itemPadding=6,_.mobile=!1,_.swipeStarted=!1,_.clickTimer=null,_.eventBus=null,_.galleries={},_.oDefaults={module:".nm-md-inline-mediagallery",arrowNext:".nm-inline-mediagallery-next",arrowPrev:".nm-inline-mediagallery-prev",disclaimer:".nm-inline-mediagallery__asset-disclaimer",imageContainer:".nm-inline-mediagallery-image-container",imageWrap:".nm-inline-mediagallery-big-image-wrap",image:".nm-inline-mediagallery-image-wrap",innerImage:".nm-inline-mediagallery-image",closeFullscreenBtn:".nm-inline-mediagallery-fullscreen-close-btn",classFullscreen:"nm-md-mediagallery-fullscreen-mode",thumbnails:".nm-inline-mediagallery-slider-item",sliderList:".nm-inline-mediagallery-image-list",thumbSliderList:".nm-inline-mediagallery-slider-list",sliderWrap:".nm-inline-mediagallery-slider-list-wrap",sliderPrev:".nm-inline-mediagallery-slider-prev",sliderNext:".nm-inline-mediagallery-slider-next",videoPlayerPlay:".nm-md-inline-mediagallery .nm-video .nm-j-play-btn",videoPlayerPause:".nm-md-inline-mediagallery .nm-video .nm-j-play-btn .nm-video-button-pause",videoTarget:".nm-prevent-video-click"},_.setCurrentGallery=function(e){_.currentGallery=v.dom.closest(e,_.oDefaults.module)},_.nextArrowClickHandler=function(e){e&&e.preventDefault&&e.preventDefault(),_.setCurrentGallery(e.target),_.setCurrentIndex(_.NEXT)},_.prevArrowClickHandler=function(e){e&&e.preventDefault&&e.preventDefault(),_.setCurrentGallery(e.target),_.setCurrentIndex(_.PREV)},_.getCurrentIndex=function(){var e;return v.dom.getElementsArray(_.oDefaults.sliderList,_.currentGallery).forEach((function(t,n){t.checked&&(e=n)})),e},_.getInputsCount=function(){return v.dom.getElementsArray(_.oDefaults.sliderList,_.currentGallery).length},_.changeInputPos=function(e){var t=v.dom.getElementsArray(_.oDefaults.sliderList,_.currentGallery);t.map((function(e){e.checked=!1})),t[e].checked=!0},_.setCurrentIndex=function(e){var t=_.getCurrentIndex(),n=_.getInputsCount(),a=-1,i=v.dom.getElementsArray(_.oDefaults.thumbnails,_.currentGallery);e===_.NEXT?a=t<n?t+1:t:e===_.PREV&&(a=t>0?t-1:t),a<0||a===n||_.makeAnimation(i,a,e)},_.swapImages=function(e,t){var n=v.dom.getElementsArray(_.oDefaults.image,_.currentGallery),a=_.getThumbUrls(e),i=a.imageUrl,o=a.posterUrl,r=v.dom.getElement("picture",n[t]);_.setArrowStyle(e),_.updatePictureUrls(r,o||i),o?_.addVideoClassToGalleryImages():_.removeVideoClassFromGalleryImages()},_.swapAssetDisclaimer=function(e){const t=_.currentGallery.querySelectorAll(_.oDefaults.disclaimer),n=_.getCurrentDisclaimer(e);[...t].forEach(e=>{e.innerHTML=n})},_.updatePictureUrls=function(e,t){let n=e.querySelector("img").getAttribute("src"),a=e.querySelectorAll("source"),i=_.replaceStringBeforeQuestionMark(n,t);e.querySelector("img").setAttribute("src",i),[...a].forEach((function(e){let n=_.replaceStringBeforeQuestionMark(e.getAttribute("srcset"),t);e.setAttribute("srcset",n)}))},_.replaceStringBeforeQuestionMark=function(e,t){let n=e.split("?");return n[0]=t,n.join("?")},_.setArrowStyle=function(e){var t=v.dom.getElement(".nm-inline-mediagallery-navigation",_.currentGallery);"light"===v.dom.getElementsArray(_.oDefaults.thumbnails,_.currentGallery)[e].getAttribute("data-arrow-style")?t.classList.add("nm-inline-mediagallery-arrow-dark"):t.classList.remove("nm-inline-mediagallery-arrow-dark")},_.hideVideoPlayer=function(){var e=_.getVideoPlayer();e&&(e.style.display="none")},_.handleTransition=function(e,t){var n=v.dom.getElement(_.oDefaults.imageWrap,_.currentGallery),a="nm-inline-mediagallery-animate-"+e;v.dom.handleTransition(n,a).then((function(){_.hideVideoPlayer(),_.swapImages(t,0),_.swapAssetDisclaimer(t),_.showVideoPlayer(t)})).catch((function(e){console.log("Promise not completed ",e)}))},_.getThumbUrls=function(e){var t=v.dom.getElementsArray(_.oDefaults.thumbnails,_.currentGallery),n={};return n.imageUrl=t[e].getAttribute("data-full-image-url"),n.posterUrl=t[e].getAttribute("data-video-poster"),n.videoUrl=t[e].getAttribute("data-video-slide"),n.vmsUrl=t[e].getAttribute("data-video-vms-slide"),n},_.getCurrentDisclaimer=function(e){return v.dom.getElementsArray(_.oDefaults.thumbnails,_.currentGallery)[e].getAttribute("data-asset-disclaimer")},_.showVideoPlayer=function(e){var t,n=_.getThumbUrls(e),a=n.videoUrl,i=n.vmsUrl,o=n.posterUrl,r=_.getVideoPlayer(),l=r.querySelector("video");a?(l.pause(),A.resetVideoPlayer(r,a,o),r.style.display="block"):i?(t=_.getVmsExtension(screen.width),l.pause(),A.resetVideoPlayer(r,i+t,o),r.style.display="block"):(l.pause(),A.resetVideoPlayer(r),r.style.display="none")},_.getVmsExtension=function(e){var t="_Content270p-Web.mp4";return e>1281?t="_Content1080p-Web.mp4":e>=890&&e<=1280?t="_Content720p-Web.mp4":e>=705&&e<=889?t="_Content500p-Web.mp4":e>=481&&e<=704&&(t="_Content396p-Web.mp4"),t},_.addVideoClassToGalleryImages=function(){var e=v.dom.getElementsArray(".nm-inline-mediagallery-image",_.currentGallery),t=v.dom.getElement(".nm-inline-mediagallery-big-image-wrap",_.currentGallery);e.forEach((function(e){e.classList.add("nm-inline-mediagallery-video")})),t.classList.add("nm-inline-mediagallery-video-hover")},_.removeVideoClassFromGalleryImages=function(){var e=v.dom.getElementsArray(".nm-inline-mediagallery-image",_.currentGallery),t=v.dom.getElement(".nm-inline-mediagallery-big-image-wrap",_.currentGallery);e.forEach((function(e){e.classList.remove("nm-inline-mediagallery-video")})),t.classList.remove("nm-inline-mediagallery-video-hover")},_.getVideoPlayer=function(){return v.dom.getElement(".nm-inline-mediagallery-image-container .nm-mediaplayer.nm-video",_.currentGallery)},_.onSwipeStart=function(e){_.swipeStarted=!0,_.setCurrentGallery(e.target);let t=_.getEventPos(e),n=v.dom.getElement(".nm-inline-mediagallery-image .nm-controls-wrap-video",_.currentGallery),a=v.dom.getElement("nm-inline-mediagallery-image .nm-video-button-play",_.currentGallery),i="touchstart"===e.type?"touchend":"mouseup",o=e.target;o===n||n.contains(o)||o===a||_.domEventDelegate.on(i,_.oDefaults.imageContainer,(function e(n){_.swipeStarted&&(_.swipeStarted=!1,_.domEventDelegate.off(i,_.oDefaults.imageContainer,e),_.onSwipeEnd(i,o,n,t))}))},_.onSwipeEnd=function(e,t,n,a){var i,o,r,l;i=_.getEventPos(n),o=_.calculateSwipeDirection(a.x,i.x),r=a.x>i.x?a.x-i.x:i.x-a.x,l=a.y>i.y?a.y-i.y:i.y-a.y,r>50&&l<=50?_.setCurrentIndex(o):0===r&&"touchend"===e&&(null===_.clickTimer?_.clickTimer=setTimeout((function(){_.clickTimer=null,_.openFullscreen(t)}),500):(clearTimeout(_.clickTimer),_.clickTimer=null))},_.calculateSwipeDirection=function(e,t){var n,a=_.getCurrentIndex(),i=_.getInputsCount();if(t>e){if(n=_.PREV,0===a)return}else if(n=_.NEXT,a===i-1)return;return n},_.getEventPos=function(e){var t={};return"touchmove"===e.type||"touchend"===e.type?e.originalEvent?(t.x=e.originalEvent.pageX,t.y=e.originalEvent.pageY):e.changedTouches&&(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY):"touchstart"===e.type?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.clientY),t},_.openFullscreen=function(e){var t,n=e.target||e;_.setCurrentGallery(n),_.isFullScreen()||(t=v.dom.getElement(_.oDefaults.imageWrap,_.currentGallery),document.addEventListener("webkitfullscreenchange",_.toggleFullscreenClass,!1),document.addEventListener("mozfullscreenchange",_.toggleFullscreenClass,!1),document.addEventListener("fullscreenchange",_.toggleFullscreenClass,!1),document.addEventListener("MSFullscreenChange",_.toggleFullscreenClass,!1),t.requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen())},_.closeFullscreen=function(){_.isFullScreen()&&document.exitFullscreen()},_.isFullScreen=function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullScreen||document.mozFullScreen)},_.toggleFullscreenClass=function(){var e=v.dom.closest(event.target,_.oDefaults.module);_.isFullScreen()?e.classList.add(_.oDefaults.classFullscreen):_.isFullScreen()||(e.classList.remove(_.oDefaults.classFullscreen),document.removeEventListener("webkitfullscreenchange",_.toggleFullscreenClass,!1),document.removeEventListener("mozfullscreenchange",_.toggleFullscreenClass,!1),document.removeEventListener("fullscreenchange",_.toggleFullscreenClass,!1),document.removeEventListener("MSFullscreenChange",_.toggleFullscreenClass,!1))},_.thumbClickHandler=function(e){let t,n,a,i,o=e.target;o.classList.contains("nm-image")&&(o=o.parentElement),_.setCurrentGallery(o),t=v.dom.getElementsArray(_.oDefaults.thumbnails,_.currentGallery),n=_.getCurrentIndex(),t.forEach((function(e,t){e===o.parentElement&&(a=t)})),n!==a&&(i=n<a?_.NEXT:_.PREV,_.makeAnimation(t,a,i))},_.makeAnimation=function(e,t,n){_.isVisible(e[t],!0)||_.centerHiddenThumb(e,t),_.changeInputPos(t),_.swapImages(t,1),_.swapAssetDisclaimer(t),_.handleTransition(n,t)},_.centerHiddenThumb=function(e,t){var n=e[t],a=v.dom.getElement(_.oDefaults.thumbSliderList,_.currentGallery),i=v.dom.getElement(_.oDefaults.sliderWrap,_.currentGallery),o=_.getSliderNavigation(_.currentGallery),r=n.offsetLeft-(i.clientWidth-n.clientWidth)/2,l=a.clientWidth-i.clientWidth;r>l&&(r=l),_.scrollElementToX(i,r,300).then((function(){_.hideSliderNavigation(e,o)}))},_.scrollElementToX=function(e,t,n){return P=t,new Promise((function(t){P<0&&(P=0),k&&(cancelAnimationFrame(k),k=void 0),M&&(cancelAnimationFrame(M),M=void 0);var a,i,o=e.scrollLeft,r=Math.PI/(n/15),l=o/2,s=0;P<e.scrollLeft?k=window.requestAnimationFrame((function n(){setTimeout((function(){e.scrollLeft>Math.round(P)?(k=window.requestAnimationFrame(n),s+=1,i=l-l*Math.cos(s*r),(a=o-i)<P&&(a=P),e.scrollLeft=a):(cancelAnimationFrame(k),t())}),15)})):(l=P/2,M=window.requestAnimationFrame((function n(){setTimeout((function(){Math.round(e.scrollLeft)<Math.round(P)-1?(k=window.requestAnimationFrame(n),s+=1,i=l-l*Math.cos(s*r),(a=o+i)>P&&(a=P),e.scrollLeft=a):(cancelAnimationFrame(k),t())}),15)})))}))},_.isVisible=function(e,t){var n=e.parentNode.parentNode.getBoundingClientRect(),a=e.getBoundingClientRect(),i=parseInt(a.right,10)<=parseInt(n.right,10)+2&&parseInt(a.right,10)>=parseInt(n.left,10),o=parseInt(a.left,10)>=parseInt(n.left,10)&&parseInt(a.left,10)<=parseInt(n.right,10);return t?i&&o:i||o},_.sliderArrowClickHandler=function(e){e.preventDefault(),_.setCurrentGallery(this);let t,n=0,a=0,i=this.getAttribute("data-direction"),o=v.dom.getElement(_.oDefaults.thumbSliderList,_.currentGallery),r=v.dom.getElementsArray(_.oDefaults.thumbnails,_.currentGallery),l=v.dom.getElement(_.oDefaults.sliderWrap,_.currentGallery),s=v.dom.getElement(".nm-inline-mediagallery-slider-item.nm-inline-mediagallery-slider-item-active",_.currentGallery),d=l.scrollLeft;_.sliderWrapWidth=_.getClientWidth(l),_.sliderWidth=_.getClientWidth(o),t=_.sliderWidth-_.sliderWrapWidth+2,r.forEach((function(e){_.isVisible(e,!0)&&e!==s&&(n=n+e.clientWidth+_.itemPadding)})),a=i===_.PREV?d-n>0?d-n:0:d+n>t?t:d+n,_.scrollElementToX(l,a-2,300)},_.scrollHandler=function(e){_.setCurrentGallery(this);let t=_.getSliderNavigation(_.currentGallery),n=v.dom.getElementsArray(_.oDefaults.thumbnails,_.currentGallery);_.hideSliderNavigation(n,t),_.setGalleryCenterMostElement(e.target)},_.hideSliderNavigation=function(e,t){_.isVisible(e[0],!0)?t.prev.style.display="none":t.prev.style.display="block",_.isVisible(e[e.length-2],!0)?t.next.style.display="none":t.next.style.display="block"},_.getSliderNavigation=function(e){var t={};return t.prev=v.dom.getElement(_.oDefaults.sliderPrev,e),t.next=v.dom.getElement(_.oDefaults.sliderNext,e),t},_.getClientWidth=function(e){return e.clientWidth},_.addPreventDefault=function(e){_.mobile||e.preventDefault()},_.addGalleryVideoEvents=function(){v.dom.getElementsArray(".nm-inline-mediagallery-image video").forEach((function(e){e.addEventListener("playing",_.addPlayingClass)}))},_.addPlayingClass=function(e){_.setCurrentGallery(e.target);let t=v.dom.getElement(".nm-inline-mediagallery-image-container",_.currentGallery),n=e.target;t.classList.add("nm-inline-mediagallery-video-playing"),_.hideNavigation(),n.addEventListener("pause",_.removePlayingClass),n.addEventListener("ended",_.removePlayingClass)},_.removePlayingClass=function(e){var t=v.dom.getElement(".nm-inline-mediagallery-image-container",_.currentGallery),n=e.target;t.classList.remove("nm-inline-mediagallery-video-playing"),_.showNavigation(),n.removeEventListener("pause",_.removePlayingClass),n.removeEventListener("ended",_.removePlayingClass)},_.showNavigation=function(){var e=v.dom.getElement(".nm-inline-mediagallery-navigation-gradients",_.currentGallery),t=v.dom.getElement(".nm-inline-mediagallery-navigation",_.currentGallery);e.classList.remove("nm-hidden"),t.classList.remove("nm-hidden")},_.hideNavigation=function(){var e=v.dom.getElement(".nm-inline-mediagallery-navigation-gradients",_.currentGallery),t=v.dom.getElement(".nm-inline-mediagallery-navigation",_.currentGallery);e.classList.add("nm-hidden"),t.classList.add("nm-hidden")},_.preventImgDrag=function(){return!1},_.orientationChangeHandler=function(){_.centerAllGalleryThumbs()},_.setGalleryCenterMostElement=function(e){var t=_.getCenterMostElementOfParent(e),n=_.currentGallery.getAttribute("data-gallery-id");_.galleries[n]=t},_.getCenterMostElementOfParent=function(e){var t,n,a,i=v.dom.getElementsArray(".nm-inline-mediagallery-slider-item",e),o=e.getBoundingClientRect().right-e.clientWidth/2;return i.forEach((function(e){_.isVisible(e,!0)&&(n=e.getBoundingClientRect().right-e.clientWidth/2,a=Math.abs(o-n),t?a<t.abstand&&(t.abstand=a,t.element=e):((t={}).abstand=a,t.element=e))})),t.element},_.centerAllGalleryThumbs=function(){var e;Object.keys(_.galleries).forEach((function(t){e=v.dom.closest(_.galleries[t],_.oDefaults.sliderWrap),_.centerThumb(e,_.galleries[t])}))},_.centerThumb=function(e,t){var n=t.offsetLeft-(e.clientWidth-t.clientWidth)/2;e.scrollLeft=n},_.saveAllGalleryInstancesToGlobalObject=function(){var e;v.dom.getElementsArray(_.oDefaults.module).forEach((function(t){e=v.dom.getElement(_.oDefaults.sliderWrap,t),_.galleries[t.getAttribute("data-gallery-id")]=_.getCenterMostElementOfParent(e)}))},_.stopVideoOnScrollOut=function(e){var t=v.dom.closest(e.target,".nm-video"),n=v.dom.getElement("video",t);_.videoScrollHandler=v.dom.throttle(_.handleScrollVideo.bind(n),15),document.addEventListener("scroll",_.videoScrollHandler)},_.handleScrollVideo=function(){var e,t;0===v.dom.getVisibleVerticalPercentageInViewport(this)&&(e=v.dom.closest(this,".nm-video"),t=v.dom.closest(e,".nm-inline-mediagallery-image-container.nm-inline-mediagallery-video-playing"),this.pause(),e&&t&&(e.classList.remove("nm-video-playing"),t.classList.remove("nm-inline-mediagallery-video-playing")),document.removeEventListener("scroll",_.videoScrollHandler))},_.addEvents=function(){_.domEventDelegate.on("click",_.oDefaults.arrowNext,_.nextArrowClickHandler),_.domEventDelegate.on("click",_.oDefaults.arrowPrev,_.prevArrowClickHandler),_.domEventDelegate.on("click",_.oDefaults.thumbnails,_.thumbClickHandler),_.domEventDelegate.on("mousedown",_.oDefaults.imageContainer,_.onSwipeStart),_.domEventDelegate.on("touchstart",_.oDefaults.imageContainer,_.onSwipeStart),_.domEventDelegate.on("dblclick",".nm-inline-mediagallery-image",_.openFullscreen),_.domEventDelegate.on("keyup","body",_.closeFullscreen),_.domEventDelegate.on("click",_.oDefaults.closeFullscreenBtn,_.closeFullscreen),_.domEventDelegate.on("click",_.oDefaults.sliderPrev,_.sliderArrowClickHandler),_.domEventDelegate.on("click",_.oDefaults.sliderNext,_.sliderArrowClickHandler),_.domEventDelegate.on("scroll",_.oDefaults.sliderWrap,v.dom.throttle(_.scrollHandler,15)),_.domEventDelegate.on("dragstart",".nm-inline-mediagallery-image img",_.preventImgDrag),_.domEventDelegate.on("click",_.oDefaults.videoPlayerPlay,_.stopVideoOnScrollOut),_.eventBus.on(d.appEvents.LAYER_LOADED,_.addGalleryVideoEvents),_.eventBus.on(d.appEvents.LAYER_LOADED,_.saveAllGalleryInstancesToGlobalObject),_.eventBus.on(d.appEvents.LAYER_LOADED,_.resizeHandler),window.addEventListener("resize",_.resizeHandler),window.addEventListener("orientationchange",_.orientationChangeHandler)},_.resizeHandler=function(){v.dom.getElementsArray(_.oDefaults.module).forEach((function(e){var t=_.getSliderNavigation(e),n=v.dom.getElementsArray(_.oDefaults.thumbnails,e);_.hideSliderNavigation(n,t)}))},T.initialize=function(e){_.eventBus=e,_.domEventDelegate=v.dom.getEventDelegate("body"),_.addEvents(),_.addGalleryVideoEvents(),_.saveAllGalleryInstancesToGlobalObject(),_.resizeHandler()},Object.setPrototypeOf(x.prototype,HTMLElement.prototype),Object.setPrototypeOf(x,HTMLElement);class j extends x{static get SELECTOR_ROTATION_IMAGE(){return".nm-rotation-image-container"}static get CLASS_ROTATION_IMAGE_ACTIVE(){return"nm-rotation-image-container-is-active"}constructor(){super(),this.numOfImages=0,this.sliderControl=null,this.sliderContainer=null,this.controlContainer=null,this.sliderPastLine=null,this.clickOffset=0,this._activateDragging=this._activateDragging.bind(this),this._dragSliderControls=this._dragSliderControls.bind(this),this._deactivateDragging=this._deactivateDragging.bind(this)}connectedCallback(){this._initializeModule()}_initializeModule(){this._initializeElements(),this._bindControlEvents(),this._isCircularControl()&&this._initCircularControl()}_initializeElements(){this.numOfImages=this.querySelectorAll(j.SELECTOR_ROTATION_IMAGE).length,this.sliderControl=this.querySelector(".nm-rotation-control"),this.sliderContainer=this.querySelector(".nm-slider-container"),this.controlContainer=this.querySelector(".nm-rotation-control-container"),this.sliderPastLine=this.querySelector(".nm-rotation-control-past-line")}_isCircularControl(){return this.sliderControl.classList.contains("nm-rotation-control-is-circular")}_initCircularControl(){let e=this._calculateInitialPastLineWidth();this.sliderPastLine.style.width=e+"px"}_calculateInitialPastLineWidth(){return this.controlContainer.clientWidth/2-this.sliderControl.clientWidth/2}_bindControlEvents(){this.sliderControl.addEventListener("mousedown",this._activateDragging),this.sliderControl.addEventListener("touchstart",this._activateDragging)}_activateDragging(e){let t=this._calculateClickPosX(e),n=this._offsetOfElement(this.sliderControl).left;this.clickOffset=t-n,this._setEventListenersForStartDragging()}_calculateClickPosX(e){let t;return t="touchstart"===e.type?e.touches[0].pageX:e.pageX,t}_offsetOfElement(e){let t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}}_setEventListenersForStartDragging(){this.sliderControl.removeEventListener("mousedown",this._activateDragging),this.sliderControl.removeEventListener("touchstart",this._activateDragging),this.sliderContainer.addEventListener("mousemove",this._dragSliderControls),this.sliderContainer.addEventListener("touchmove",this._dragSliderControls),this.addEventListener("mouseup",this._deactivateDragging),this.addEventListener("touchend",this._deactivateDragging)}_setEventListenersForStopDragging(){this.sliderControl.addEventListener("mousedown",this._activateDragging),this.sliderControl.addEventListener("touchstart",this._activateDragging),this.sliderContainer.removeEventListener("mousemove",this._dragSliderControls),this.sliderContainer.removeEventListener("touchmove",this._dragSliderControls),this.removeEventListener("mouseup",this._deactivateDragging),this.removeEventListener("touchend",this._deactivateDragging)}_dragSliderControls(e){let t=this._calculateSliderPositionX(e);this._rotateImageBySliderPosition(t),this._moveControlsBySliderPosition(t)}_calculateSliderPositionX(e){let t=this._offsetOfElement(this.controlContainer).left,n=0;return n="touchmove"===e.type?e.touches[0].pageX-t-this.clickOffset:e.pageX-t-this.clickOffset,n}_rotateImageBySliderPosition(e){let t=this._calculatePercentagePositionOfSliderByPositionX(e),n=this._calculateActiveImageIndexByPercentage(t);this._setActiveImageByIndex(n)}_moveControlsBySliderPosition(e){this._isSliderControlOverMinimum(e)&&this._isSliderControlUnderMaximum(e)&&this._updateSliderForSliderPosition(e)}_updateSliderForSliderPosition(e){this.sliderControl.style.left=e+"px",this.sliderPastLine.style.width=e+"px"}_isSliderControlOverMinimum(e){return e>=-this.sliderControl.clientWidth/2}_isSliderControlUnderMaximum(e){return e<=this.controlContainer.clientWidth-this.sliderControl.clientWidth/2}_calculatePercentagePositionOfSliderByPositionX(e){return(e+this.sliderControl.clientWidth/2)/this.controlContainer.clientWidth*100}_calculateActiveImageIndexByPercentage(e){return Math.min(this.numOfImages-1,Math.max(0,Math.floor(e/(100/this.numOfImages))))}_setActiveImageByIndex(e){let t=this.querySelector("."+j.CLASS_ROTATION_IMAGE_ACTIVE);t&&t.classList.remove(j.CLASS_ROTATION_IMAGE_ACTIVE),this.querySelectorAll(j.SELECTOR_ROTATION_IMAGE)[e].classList.add(j.CLASS_ROTATION_IMAGE_ACTIVE)}_deactivateDragging(){this._setEventListenersForStopDragging()}disconnectedCallback(){this._removeAllEventListeners()}_removeAllEventListeners(){this.sliderControl.removeEventListener("mousedown",this._activateDragging),this.sliderControl.removeEventListener("touchstart",this._activateDragging),this.sliderContainer.removeEventListener("mousemove",this._dragSliderControls),this.sliderContainer.removeEventListener("touchmove",this._dragSliderControls),this.removeEventListener("mouseup",this._deactivateDragging),this.removeEventListener("touchend",this._deactivateDragging),this.sliderControl.removeEventListener("mousedown",this._activateDragging),this.sliderControl.removeEventListener("touchstart",this._activateDragging)}}customElements.define("audi-interactive-image-rotation",j);const N={},V={__:N};N.oDefaults={sSelectorSliderContainer:".nm-interactive-image-slider__image-container",sSelectorSliderMainImage:".nm-interactive-image-slider__first-image",sSelectorSliderOverlayImage:".nm-interactive-image-slider__second-image",sSelectorSliderControl:".nm-interactive-image-slider__control"},N.addEvents=function(){N.eventBus.on(d.appEvents.PAGE_LOADED,V.handler),N.eventBus.on(d.appEvents.LAYER_LOADED,V.handler),V.handler()},V.dispose=function(){N.eventBus.off(d.appEvents.PAGE_LOADED,V.handler),N.eventBus.off(d.appEvents.LAYER_LOADED,V.handler)},V.handler=function(){N.domEventDelegate.on("click",N.oDefaults.sSelectorSliderMainImage,N.clickMainImageEventHandler),N.domEventDelegate.on("click",N.oDefaults.sSelectorSliderOverlayImage,N.clickOverlayImageEventHandler),N.domEventDelegate.on("mousedown",N.oDefaults.sSelectorSliderControl,N.activateDragEventHandler),N.domEventDelegate.on("touchstart",N.oDefaults.sSelectorSliderControl,N.activateDragEventHandler)},N.clickMainImageEventHandler=function(){var e,t=v.dom.closest(this,N.oDefaults.sSelectorSliderContainer);e=v.dom.siblings(this,N.oDefaults.sSelectorSliderOverlayImage)[0],N.changeSliderControlPosition(e,t.offsetWidth-1)},N.clickOverlayImageEventHandler=function(){N.changeSliderControlPosition(this,0)},N.changeSliderControlPosition=function(e,t){var n,a=v.dom.closest(e,N.oDefaults.sSelectorSliderContainer).offsetWidth;n=v.dom.siblings(e,N.oDefaults.sSelectorSliderControl)[0],jQuery(n).animate({left:t},300,!1),jQuery(e).animate({width:a-t})},N.activateDragEventHandler=function(){this.removeEventListener("mousedown",N.activateDragEventHandler,!0),this.removeEventListener("touchstart",N.activateDragEventHandler,!0),N.domEventDelegate.off("mousemove",N.oDefaults.sSelectorSliderContainer,N.dragMovement),N.domEventDelegate.off("touchmove",N.oDefaults.sSelectorSliderContainer,N.dragMovement),N.domEventDelegate.on("mousemove",N.oDefaults.sSelectorSliderContainer,N.dragMovement),N.domEventDelegate.on("touchmove",N.oDefaults.sSelectorSliderContainer,N.dragMovement),N.domEventDelegate.off("mouseup",N.deactivateDragEventHandler),N.domEventDelegate.on("mouseup",N.deactivateDragEventHandler),N.domEventDelegate.off("touchend",N.deactivateDragEventHandler),N.domEventDelegate.on("touchend",N.deactivateDragEventHandler)},N.getSliderPositionX=function(e,t){return"touchmove"===e.type?e.touches[0].pageX-t.getBoundingClientRect().left:e.pageX-t.getBoundingClientRect().left},N.dragMovement=function(e){var t,n,a=N.getSliderPositionX(e,this);a<=20&&(a=0),this.clientWidth-a<=20&&(a=this.clientWidth-1),t=this.clientWidth-a,n=v.dom.closest(this,N.oDefaults.sSelectorSliderContainer).clientWidth,t>=0&&t<=n?(v.dom.getElement(N.oDefaults.sSelectorSliderControl,this).style.left=a+"px",v.dom.getElement(N.oDefaults.sSelectorSliderOverlayImage,this).style.width=t+"px"):N.deactivatedDrag(this)},N.deactivateDragEventHandler=function(){N.deactivatedDrag(this)},N.deactivatedDrag=function(){N.domEventDelegate.off("mousedown",N.oDefaults.sSelectorSliderControl,N.activateDragEventHandler),N.domEventDelegate.off("touchstart",N.oDefaults.sSelectorSliderControl,N.activateDragEventHandler),N.domEventDelegate.on("mousedown",N.oDefaults.sSelectorSliderControl,N.activateDragEventHandler),N.domEventDelegate.on("touchstart",N.oDefaults.sSelectorSliderControl,N.activateDragEventHandler),N.domEventDelegate.off("mousemove",N.oDefaults.sSelectorSliderContainer,N.dragMovement),N.domEventDelegate.off("touchmove",N.oDefaults.sSelectorSliderContainer,N.dragMovement),N.domEventDelegate.off("mouseup",N.deactivateDragEventHandler),N.domEventDelegate.off("touchend",N.deactivateDragEventHandler)},V.initialize=function(e){N.eventBus=e,N.domEventDelegate=v.dom.getEventDelegate("body"),N.addEvents()};const B=new class{initialize(){const e=SETUPS?SETUPS.get("nemo.InterstitialLayerLink"):null,t=this._getCurrentCarline();this._writeLayerHasBeenShown=this._writeLayerHasBeenShown.bind(this),e&&t&&(this.storageKey=this._getStorageKeyForCarline(t),document.addEventListener("interstitial-layer.close",this._writeLayerHasBeenShown),this.globalEventEmitter=d.signal.getEmitter(),this._processInterstitialLayer(e))}_getCurrentCarline(){let e=document.querySelector("meta[name=carline]");return e?e.getAttribute("content"):""}_processInterstitialLayer(e){this._readLayerHasBeenShown()||this._openInterstitialLayer(e)}_getStorageKeyForCarline(e){return"audi-interstitial-layer-"+e}_readLayerHasBeenShown(){return this.sessionStorageAlternative?this.sessionStorageAlternative[this.storageKey]:sessionStorage.getItem(this.storageKey)}_openInterstitialLayer(e){const t={layerType:"ModalLayerInterstitialElement",clickOnShaderClosesModal:!1,isLayerClosable:!1,dataset:{linkUrl:e},options:{onEscClick:!1,onShaderClick:!1,centerVertically:!0,addCssClass:"nm-module-interstitial-layer"}};this.globalEventEmitter.emit(d.modalLayer.constructor.MODAL_LAYER_OPEN_EVENT,t)}_writeLayerHasBeenShown(){try{sessionStorage.setItem(this.storageKey,!0)}catch(e){this.sessionStorageAlternative=this.sessionStorageAlternative?this.sessionStorageAlternative:{},this.sessionStorageAlternative[this.storageKey]=!0}}},H={},R={__:H};H.categories=[],H.items=[],H.selectedItem=null,H.selectedCategory="",H.getCurrentItems=function(){if("all"===H.selectedCategory)return H.items;let e=[];for(let t=0,n=H.items.length;t<n;t++)H.items[t].category===H.selectedCategory&&e.push(H.items[t]);return e},R.setAllCategories=function(e){H.selectedCategory="",H.categories=e},R.getCategories=function(){return H.categories},R.setAllItems=function(e){H.selectedItem=null,H.items=e},R.getAllItems=function(){return H.items},R.getSelectedCategory=function(){return H.selectedCategory},R.setSelectedCategory=function(e){let t=!1,n=H.selectedCategory;e===H.selectedCategory?t=!1:(H.selectedCategory=e,t=!0),n||(t=!1),H.eventBus.emit(d.appEvents.MEDIAGALLERY_CATEGORY_CHANGED,{category:e,changed:t})},R.getSelectedItem=function(){return H.selectedItem},R.setSelectedItem=function(e){let t=!1,n=H.selectedItem;e===H.selectedItem?t=!1:(H.selectedItem=e,t=!0),n||(t=!1);let a=R.getItemIndex(),i=n?R.getItemIndex(n):a,o=R.getMaxIndex(),r=i<a?"next":"back";t&&a!==i||(r="none"),H.eventBus.emit(d.appEvents.MEDIAGALLERY_ITEM_CHANGED,{item:e,index:a,maxIndex:o,direction:r,changed:t})},R.getMaxIndex=function(){return H.getCurrentItems().length-1},R.getItemById=function(e){return H.getItemByAttributeValue("id",e)},R.getItemByImageurl=function(e){return H.getItemByAttributeValue("imageurl",e)},H.getItemByAttributeValue=function(e,t){for(let n=0,a=H.items.length;n<a;n++)if(H.items[n][e]===t)return H.items[n];return null},R.getNextItem=function(e){let t=e;return t<R.getMaxIndex()?t++:t=0,R.getItemByIndex(t)},R.getPreviousItem=function(e){var t=R.getMaxIndex();let n=e;return e>0?n--:n=t,R.getItemByIndex(n)},R.getItemByIndex=function(e){var t=H.getCurrentItems();return!t||t.length<1||t.length<e?null:t[e]||null},R.getItemIndex=function(e){var t=e||H.selectedItem,n=-1,a=H.getCurrentItems();for(let e=0,i=a.length;e<i;e++)if(a[e].id===t.id)return n=e;return n},R.initialize=function(e){H.eventBus=e};const O={},Q={__:O};O.oDefaults={sSelectorNextBtn:".nm-mediagallery-browse .nm-nextarrow",sSelectorPrevBtn:".nm-mediagallery-browse .nm-backarrow",sSelectorSliderItemLink:".nm-mediagallery-item a",sSelectorSliderItem:".nm-mediagallery-item",sSelectorDataCatAttr:"data-category",sSelectorCategoryItem:".nm-mediagallery-categories li",sSelectorModule:".nm-md-mediagallery-media-list",sClassShowOverview:"nm-md-mediagallery-media-list-overview",sSelectorOverviewSwitch:".nm-mediagallery-categories-overview",sSelectorOverview:".nm-mediagallery-categories-overview",sSelectorDownloadbox:".nm-mediagallery-download-infobox",sSelectorDownloadIcon:".nm-mediagallery-download",sIdDropdownList:"#nm-mediagallery-category-list-select",sSelectorSlideContainer:".nm-mediagallery-detail-slide",sSelectorMediagalleryModule:".nm-md-mediagallery-media-list",sIDprefix:"mg_item_"},O.addEvents=function(){var e=jQuery("body");O.removeEvents(),O.eventBus.one(d.appEvents.LAYER_CLOSE,O.onLayerClosing),e.on("click.mg_prevnext",O.oDefaults.sSelectorPrevBtn,{direction:"back"},O.handlePagePrevNextClick),e.on("click.mg_prevnext",O.oDefaults.sSelectorNextBtn,{direction:"next"},O.handlePagePrevNextClick),e.on("mousedown.mg_stage",O.oDefaults.sSelectorSlideContainer,O.onMouseDown),e.on("click.mg_slider_item",O.oDefaults.sSelectorSliderItemLink,O.handleSliderItemClick),e.on("click.mg_category",O.oDefaults.sSelectorCategoryItem,O.handleCategoryChangeClick),e.on("keydown.mg_browse_arrows",O.handleKeyDown),e.on("change.mg_dropdown_select",O.oDefaults.sIdDropdownList,O.handleCategoryDropdownChanges),e.on("keyup.mediagallery",O.handleEscKey),e.on("click.mediagallery",".nm-layer-wrapper",O.handleShaderClick)},O.removeEvents=function(){var e=jQuery("body");e.off("click.mg_prevnext",O.oDefaults.sSelectorPrevBtn,O.handlePagePrevNextClick),e.off("click.mg_prevnext",O.oDefaults.sSelectorNextBtn,O.handlePagePrevNextClick),e.off("mousedown.mg_stage",O.oDefaults.sSelectorSlideContainer,O.onMouseDown),e.off("click.mg_slider_item",O.oDefaults.sSelectorSliderItemLink,O.handleSliderItemClick),e.off("click.mg_category",O.oDefaults.sSelectorCategoryItem,O.handleCategoryChangeClick),e.off("keydown.mg_browse_arrows",O.handleKeyDown),e.off("change.mg_dropdown_select",O.oDefaults.sIdDropdownList,O.handleCategoryDropdownChanges),e.off("keyup.mediagallery",O.handleEscKey),e.off("click.mediagallery",".nm-layer-wrapper",O.handleShaderClick)},O.onLayerClosing=function(){var e,t;O.removeEvents(),window.location.hash.indexOf("mediagallery=")>-1&&(e=document.body.scrollTop,t=document.documentElement.scrollTop,window.location.hash=window.location.hash.replace(/(mediagallery=){1}\w*(\|){1}\d*(&)?/,""),document.body.scrollTop=e,document.documentElement.scrollTop=t)},O.onMouseDown=function(e){O.mousePosX=e.pageX,jQuery("body").one("mouseup.mg_stage",O.oDefaults.sSelectorSlideContainer,O.onMouseUp)},O.onMouseUp=function(e){Math.abs(O.mousePosX-e.pageX)>25&&(O.mousePosX-e.pageX>0?O.triggerNextClick():O.triggerPrevClick())},O.handleEscKey=function(e){27===e.keyCode&&O.closeLayer()},O.galleryIsOpened=function(){return jQuery(O.oDefaults.sSelectorMediagalleryModule).length>0},O.closeLayer=function(){jQuery([O.oDefaults.sSelectorMediagalleryModule,".nm-button-close"].join(" ")).trigger("click")},O.handleShaderClick=function(e){if(O.galleryIsOpened()){v.dom.isElementOutsideOfElementWithSelector(e.target,O.oDefaults.sSelectorMediagalleryModule)&&!jQuery(e.target).hasClass("nm-mediagallery-image")&&(O.cancelEvent(e),O.closeLayer())}},O.isInOverviewMode=function(){return jQuery(O.oDefaults.sSelectorModule).hasClass(O.oDefaults.sClassShowOverview)},O.handleKeyDown=function(e){37===e.keyCode&&O.triggerPrevClick(),39===e.keyCode&&O.triggerNextClick()},O.triggerNextClick=function(){var e=jQuery(O.oDefaults.sSelectorNextBtn);e.hasClass("nm.hidden")||e.trigger("click")},O.triggerPrevClick=function(){var e=jQuery(O.oDefaults.sSelectorPrevBtn);e.hasClass("nm.hidden")||e.trigger("click")},O.handlePagePrevNextClick=function(e){if(O.isInOverviewMode())return!1;O.cancelEvent(e);const t=e.data.direction,n=R.getItemIndex(),a="next"===t?R.getNextItem(n):R.getPreviousItem(n);O.triggerItemSelectionUpdate(a)},O.handleSliderItemClick=function(e){O.cancelEvent(e);const t=jQuery(this).parent().attr("id");if(!t)return console.warn("item could not be found!"),!1;const n=R.getItemById(t);O.triggerItemSelectionUpdate(n)},O.showOverview=function(){var e=jQuery(O.oDefaults.sSelectorModule);jQuery(".nm-mediagallery-categories").find(".nm-active").removeClass("nm-active"),jQuery(O.oDefaults.sSelectorOverviewSwitch).addClass("nm-active"),e.addClass(O.oDefaults.sClassShowOverview)},O.hideOverview=function(){var e=jQuery(O.oDefaults.sSelectorModule),t=jQuery(".nm-mediagallery-categories");t.find(".nm-active").removeClass("nm-active"),e.removeClass(O.oDefaults.sClassShowOverview);const n=R.getSelectedCategory();t.find('[data-category="'+n+'"]').addClass("nm-active")},O.handleCategoryChangeClick=function(e){O.cancelEvent(e);const t=jQuery(this).attr(O.oDefaults.sSelectorDataCatAttr);"overview"===t?O.isInOverviewMode()?O.hideOverview():O.showOverview():(O.isInOverviewMode()&&O.hideOverview(),O.triggerCategoryUpdate(t))},O.handleCategoryDropdownChanges=function(e){O.cancelEvent(e);const t=this.value;"overview"===t?O.isInOverviewMode()?O.hideOverview():O.showOverview():(O.isInOverviewMode()&&O.hideOverview(),O.triggerCategoryUpdate(t))},O.triggerCategoryUpdate=function(e){R.setSelectedCategory(e);if(!R.getSelectedItem())return!1;R.getItemIndex()>-1?O.triggerItemSelectionUpdate(R.getSelectedItem()):O.triggerItemSelectionUpdate(R.getItemByIndex(0))},O.triggerItemSelectionUpdate=function(e){O.isInOverviewMode()&&(R.getItemIndex(e)<0&&R.setSelectedCategory("all"),O.hideOverview()),R.setSelectedItem(e),O.updateBrowseArrows()},O.updateBrowseArrows=function(){const e=R.getMaxIndex(),t=jQuery(O.oDefaults.sSelectorPrevBtn),n=jQuery(O.oDefaults.sSelectorNextBtn);e<1?(t.addClass("nm-hidden"),n.addClass("nm-hidden")):(t.removeClass("nm-hidden"),n.removeClass("nm-hidden"))},O.parseHash=function(e){const t={category:null,index:-1};if(e.indexOf("mediagallery=")>-1){let n=e.split("mediagallery=")[1];n=decodeURI(n),n=n.split("&")[0];const a=n.split("|");2===a.length&&(t.category=a[0],t.index=parseInt(a[1],10)),1!==a.length||isNaN(parseInt(a[0],10))||(t.category="all",t.index=parseInt(a[0],10)),parseInt(t.index,10)>0&&(t.index=t.index-1)}return t},O.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},O.initializeDataAndViews=function(){if(O.galleryIsOpened()){O.addEvents(),O.initializeModel();const e=O.parseHash(window.location.hash),t=R.getAllItems();if(!e.category||!t||!t.length||e.index>=t.length)return console.log("could not enter with preselection!"),!1;const n=t[e.index];O.triggerCategoryUpdate(e.category),O.triggerItemSelectionUpdate(n)}},O.initializeModel=function(){var e,t,n,a=jQuery(O.oDefaults.sSelectorModule).find(O.oDefaults.sSelectorSliderItem),i=[];let o;jQuery.each(a,(function(a,o){e=jQuery(o),(t={}).category=e.attr("data-category")?e.attr("data-category").toLowerCase():"all",t.description=e.attr("data-description")||"",t.contenttype=e.attr("data-content-type")?e.attr("data-content-type"):"image",t.imageurl=e.attr("data-image-url")||null,t.thumburl=e.attr("data-thumb-url"),t.posterurl=e.attr("data-poster-url")||null,t.videosrc=e.attr("data-video-src")||null,t.downloadlink=e.attr("data-download-link")||null,t.id=e.attr("id"),i.push(t),e.hasClass("nm-active")&&(n=t)})),n=n||i[0],R.setAllItems(i),a=jQuery(O.oDefaults.sSelectorCategoryItem),i=[],jQuery.each(a,(function(){e=jQuery(this),t=e.attr(O.oDefaults.sSelectorDataCatAttr),i.push(t),e.hasClass("nm-active")&&(o=t)})),R.setAllCategories(i),o=o||"all",R.setSelectedCategory(o),R.setSelectedItem(n)},Q.initialize=function(e){O.eventBus=e,O.eventBus.on(d.appEvents.LAYER_LOADED,O.initializeDataAndViews)};const F={},z={__:F};F.oDefaults={sSelectorCounterContainer:".nm-md-mediagallery-media-list .nm-counter",sSelectorActiveTxt:".nm-active",sSelectorTotalTxt:".nm-total"},F.addEvents=function(){F.eventBus.on(d.appEvents.MEDIAGALLERY_ITEM_CHANGED,F.handleUpdates)},F.handleUpdates=function(e){F.updateCounter(e.index,e.maxIndex)},F.updateCounter=function(e,t){var n=t+1,a=e+1,i=document.querySelector(F.oDefaults.sSelectorCounterContainer+" "+F.oDefaults.sSelectorActiveTxt),o=document.querySelector(F.oDefaults.sSelectorCounterContainer+" "+F.oDefaults.sSelectorTotalTxt);i&&(i.innerHTML=a),o&&(o.innerHTML=n)},z.initialize=function(e){F.eventBus=e,F.addEvents()};const G={},W={__:G};G.oDefaults={sSelectorCurrentDownloadBtn:".nm-mediagallery-download-current",sSelectorDownloadAllBtn:".nm-mediagallery-download-all",sIdCheckBox:"#nm-mediagallery-download-checkbox",sSelectorLinks:".nm-mediagallery-download a",sSelectorDownloadBox:".mediagallery-download-infobox"},G.addEvents=function(){G.eventBus.on(d.appEvents.MEDIAGALLERY_ITEM_CHANGED,G.handleUpdates),jQuery("body").on("click.mg_download_link",G.oDefaults.sSelectorLinks,G.closeDownloadBox)},G.handleUpdates=function(e){var t=jQuery([G.oDefaults.sSelectorCurrentDownloadBtn," a"].join("")),n=jQuery(".nm-mediagallery-download");e&&e.item?(e.item.downloadlink?t.attr("href",e.item.downloadlink).removeClass("nm-hidden"):(t.addClass("nm-hidden"),jQuery(G.oDefaults.sSelectorDownloadAllBtn).length<1?n.addClass("nm-hidden"):n.removeClass("nm-hidden")),"video"===e.item.contenttype?t.addClass("nm-hidden"):t.removeClass("nm-hidden")):console.warn("no link url to update!!")},G.closeDownloadBox=function(){jQuery(G.oDefaults.sIdCheckBox).prop("checked",!1),jQuery(G.oDefaults.sSelectorDownloadBox).removeClass("nm-checked")},W.initialize=function(e){G.eventBus=e,G.addEvents()};const U='<div class="nm-prevent-video-click"></div>\n<div class="nm-controls-wrap-video">\n\n\t<div class="nm-video-loader">\n\t\t<div class="nm-loader-played"></div>\n\t\t<div class="nm-loader-loaded"></div>\n\t</div>\n\t<div class="nm-controls-video clearfix">\n\t\t<div class="nm-button-play-pause nm-play nm-j-play-btn">\n\t\t\t<button class="nm-video-button-play" type="button" title="Play/Pause"></button>\n\t\t\t<button class="nm-video-button-pause" type="button" title="Play/Pause"></button>\n\t\t</div>\n\t\t<div class="nm-title-wrap">\n\t\t\t<div class="nm-title"><span class="nm-el-lbl nm-el-lbl-01 nm-at-lbl-inv"></span></div>\n\t\t\t<div class="nm-time">\n\t\t\t\t<span class="nm-time-played ">00:00</span>\n\t\t\t\t<span class="nm-time-break"> | </span>\n\t\t\t\t<span class="nm-time-duration">00:00</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="nm-button-fullscreen nm-j-fullscreen-btn">\n\t\t\t<button class="" type="button" title="Fullscreen"></button>\n\t\t</div>\n\n\t\t<div class="nm-button-mute nm-mute nm-j-mute-btn">\n\t\t\t<button class="" type="button" title="Mute"></button>\n\t\t</div>\n\t</div>\n</div>\n<div class="nm-button-play nm-button-overlay nm-j-play-btn">\n\t<button class="nm-video-button-play" type="button" title="Play"><span class="nm-image-replace">Play</span></button>\n</div>',q={},X={__:q};q.oDefaults={sSelectorStage:".nm-mediagallery-stage",sSelectorThumbsContainer:".nm-mediagallery-thumbs",animationDuration:250,sSelectorModule:".nm-md-mediagallery-media-list",sClassShowThumbs:"nm-md-mediagallery-media-list-detail",sSelectorSlideContainer:".nm-mediagallery-detail-slide",sSelectorVideoSlide:".nm-mediagallery-detail-video",sSelectorImageSlide:".nm-mediagallery-detail-img",imageTemplateString:'<div class="nm-mediagallery-detail-img">\x3c!--[if IE 8 ]><img src="" /><![endif]--\x3e</div>',videoTemplateString:'<div class="nm-mediagallery-detail-video"><div class="nm-mediaplayer nm-video"><video src="" title="" poster=""></video>\x3c!--[if IE 8 ]><img src="" /><![endif]--\x3e'+v.template.render(U,null)+"</div></div>"},q.defaultVideoWidth=1920,q.defaultVideoHeight=1080,q.nativeDimensions={width:0,height:0},q.mousePosX=0,q.resizeStage=function(){var e=jQuery(q.oDefaults.sSelectorThumbsContainer).height(),t=jQuery("body").innerHeight()-e;jQuery(q.oDefaults.sSelectorModule).hasClass(q.oDefaults.sClassShowThumbs)?jQuery(q.oDefaults.sSelectorSlideContainer).height(jQuery("body").innerHeight()):jQuery(q.oDefaults.sSelectorSlideContainer).height(t)},q.contentIsResized=function(){var e=jQuery(q.oDefaults.sSelectorStage).find(q.oDefaults.sSelectorSlideContainer).width(),t=q.getNewContentHeight();return!(q.nativeDimensions.width<e&&q.nativeDimensions.height<t)},q.addEvents=function(){q.eventBus.on(d.appEvents.MEDIAGALLERY_ITEM_CHANGED,q.handleItemSelectionChange),q.eventBus.on(d.appEvents.LAYER_LOADED,q.checkNativeContentSize),q.eventBus.on(d.appEvents.MEDIAGALLERY_RESIZED,q.checkNativeContentSize),jQuery(window).on("resize",q.checkNativeContentSize)},q.getImageInfoPromise=function(e){return new Promise((function(t,n){var a=new Image;a.onload=function(){var e=this.width,n=this.height;q.nativeDimensions.width=e,q.nativeDimensions.height=n,t({width:e,height:n})},a.onerror=function(){n("could not load image")},a.src=e}))},q.handleItemSelectionChange=function(e){if(console.log("data",e),!e.changed)return console.log("nothing changed"),!1;q.eventBus.once(d.appEvents.MEDIAGALLERY_SLIDED,(function(){q.waitForDescriptionTextboxResizing(e)}))},q.waitForDescriptionTextboxResizing=function(e){e.item&&e.item?q.removeOldSlide().then((function(){return q.getNewSlide(e.item)})).then((function(e){return q.appendNewSlide(e)})).then((function(){q.isVideoSlide()&&q.startVideoSlide()})).then(void 0,(function(e){console.log("Error appending new slide:",e)})):console.warn("data missing!!!!",e)},q.getNewSlide=function(e){return"video"===e.contenttype?q.createVideoSlide(e):q.createImageSlide(e)},q.isVideoSlide=function(){return 1===jQuery(q.oDefaults.sSelectorStage).find(q.oDefaults.sSelectorVideoSlide).length},q.stopVideoSlide=function(){jQuery(".nm-video video").each((function(){this.pause()}))},q.startVideoSlide=function(){A.handlerLayer({domElement:jQuery(q.oDefaults.sSelectorStage)})},q.removeOldSlide=function(){return new Promise((function(e){var t=jQuery(q.oDefaults.sSelectorStage).find(q.oDefaults.sSelectorSlideContainer);t.addClass("nm-animating"),q.isVideoSlide()&&q.stopVideoSlide(),t.animate({opacity:0},q.oDefaults.animationDuration,"easeOutSine"),setTimeout((function(){t.empty(),t.css("height",q.getNewContentHeight()),e(t)}),q.oDefaults.animationDuration)}))},q.appendNewSlide=function(e){return new Promise((function(t){var n=jQuery(q.oDefaults.sSelectorStage).find(q.oDefaults.sSelectorSlideContainer);n.css("opacity",0),e.appendTo(n),q.checkNativeContentSize(),n.removeClass("nm-animating"),n.animate({opacity:1},q.oDefaults.animationDuration,"easeOutSine"),setTimeout((function(){t(n)}),q.oDefaults.animationDuration)}))},q.createImageSlide=function(e){if(!e||!e.imageurl)return Promise.reject("image url missing!!!");const t=e.imageurl;return q.getImageInfoPromise(t).then((function(){var e=jQuery(q.oDefaults.imageTemplateString);return e.css("background-image","url("+t+")"),Promise.resolve(e)}))},q.getBackgroundImageURL=function(e){var t=e.css("background-image");return t=t?t.replace(/^url\(["']?/,"").replace(/["']?\)$/,""):e.find("image").attr("src")},q.checkNativeContentSize=function(){if(0===jQuery(q.oDefaults.sSelectorStage).length)return!0;if(this&&"resize"===this.type)return q.resizeIntervalID&&clearInterval(q.resizeIntervalID),q.resizeIntervalID=setInterval((function(){clearInterval(q.resizeIntervalID),q.resizeIntervalID=null,q.checkNativeContentSize()}),250),!1;let e;if(q.resizeStage(),0===q.nativeDimensions.width)if(q.isVideoSlide())q.nativeDimensions.width=q.defaultVideoWidth,q.nativeDimensions.height=q.defaultVideoHeight;else{let t=jQuery(q.oDefaults.sSelectorImageSlide),n=q.getBackgroundImageURL(t);e=q.getImageInfoPromise(n)}e||(e=Promise.resolve()),e.then((function(){var e=jQuery(q.oDefaults.sSelectorStage).find(q.oDefaults.sSelectorSlideContainer).find([q.oDefaults.sSelectorVideoSlide,q.oDefaults.sSelectorImageSlide].join(","));q.contentIsResized()?e.removeClass("nm-mediagallery-detail-img-native-size"):e.addClass("nm-mediagallery-detail-img-native-size"),q.isVideoSlide()&&q.resizeVideoSlideContainer()}))},q.createVideoSlide=function(e){return e&&e.videosrc?new Promise((function(t){var n=jQuery(q.oDefaults.sSelectorStage).find(q.oDefaults.sSelectorSlideContainer),a=jQuery(q.oDefaults.videoTemplateString),i=n.width();q.nativeDimensions.width=q.defaultVideoWidth,q.nativeDimensions.height=q.defaultVideoHeight,q.nativeDimensions.width<i&&a.addClass("nm-mediagallery-detail-img-native-size"),a.find("video").attr({src:e.videosrc,poster:e.posterurl}),q.resizeVideoSlideContainer(a),t(a)})):Promise.reject("invalid video slide")},q.resizeVideoSlideContainer=function(e){var t=jQuery(q.oDefaults.sSelectorStage).find(q.oDefaults.sSelectorSlideContainer),n=q.getNewContentHeight(),a=t.width(),i=q.nativeDimensions.width/q.nativeDimensions.height,o=0;let r=e||t.find(q.oDefaults.sSelectorVideoSlide);r.length&&(o=(o=a/q.nativeDimensions.width*q.nativeDimensions.height<n?a/q.nativeDimensions.width:n*i/q.nativeDimensions.width)*q.nativeDimensions.width/a*100,r.css("width",o+"%"))},q.getNewContentHeight=function(){var e=jQuery(q.oDefaults.sSelectorThumbsContainer).height(),t=jQuery("body").innerHeight()-e;return console.log("THUMBS: "+e+" - BROWSER: "+jQuery("body").innerHeight()+" - "+t),t},X.initialize=function(e){q.eventBus=e,q.addEvents()};const Y={},K={__:Y};Y.oDefaults={sSelectorModule:".nm-md-mediagallery-media-list",sSelectorCategoryItem:".nm-mediagallery-categories li",sSelectorDescription:".nm-mediagallery-thumbs-description p",sSelectorThumbs:".nm-mediagallery-show-thumbs",sClassShowThumbs:"nm-md-mediagallery-media-list-detail",sSelectorMediaItem:".nm-mediagallery-item",sSelectorThumbslider:".nm-mediagallery-thumbs-slider",sSelectorThumbList:".nm-mediagallery-thumbs-slider ul",animationDuration:800},Y.addEvents=function(){Y.eventBus.on(d.appEvents.MEDIAGALLERY_ITEM_CHANGED,Y.handleItemUpdates),Y.eventBus.on(d.appEvents.MEDIAGALLERY_CATEGORY_CHANGED,Y.handleCategoryUpdates),jQuery("body").on("click",Y.oDefaults.sSelectorThumbs,Y.handleShowThumbs)},Y.handleItemUpdates=function(e){if(Y.centerSelectedItem(e),!e.changed)return!1;let t=jQuery(Y.oDefaults.sSelectorMediaItem),n=e.item.id;t.removeClass("nm-active"),jQuery("#"+n).addClass("nm-active"),Y.updateDescriptionText(e.item.description)},Y.centerSelectedItem=function(e){if(e&&e.item&&e.item.id){let t=jQuery(Y.oDefaults.sSelectorThumbslider),n=jQuery(Y.oDefaults.sSelectorThumbList);if(t.width()<n.width()){let a=jQuery("#"+e.item.id),i=a.width(),o=a.offset().left+.5*i,r=.5*t.width()-o,l=parseInt(n.css("margin-left"),10)+r+.5*i,s=t.width()-n.width();l<0?(l=l<s?s:l,n.css({"margin-left":Math.round(l)+"px"})):n.removeAttr("style")}else n.removeAttr("style")}},Y.handleShowThumbs=function(e){Y.cancelEvent(e),jQuery(Y.oDefaults.sSelectorModule).toggleClass(Y.oDefaults.sClassShowThumbs);let t=Y.oDefaults.animationDuration;jQuery(Y.oDefaults.sSelectorModule).hasClass(Y.oDefaults.sClassShowThumbs)&&(t=0),setTimeout((function(){Y.eventBus.emit(d.appEvents.MEDIAGALLERY_RESIZED)}),t)},Y.handleCategoryUpdates=function(e){var t=jQuery(Y.oDefaults.sSelectorCategoryItem);t.removeClass("nm-active"),t.filter('[data-category="'+e.category+'"]').addClass("nm-active");let n=jQuery(Y.oDefaults.sSelectorMediaItem);"all"===e.category?n.addClass("nm-selected"):(n.removeClass("nm-selected"),n.filter('[data-category="'+e.category+'"]').addClass("nm-selected"))},Y.updateDescriptionText=function(e){jQuery(Y.oDefaults.sSelectorDescription).css("opacity","0"),setTimeout((function(){document.querySelectorAll(Y.oDefaults.sSelectorDescription)[0].innerHTML=e,Y.eventBus.emit(d.appEvents.MEDIAGALLERY_SLIDED)}),300),setTimeout((function(){jQuery(Y.oDefaults.sSelectorDescription).css("opacity","1")}),Y.oDefaults.animationDuration+300)},Y.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},K.initialize=function(e){Y.eventBus=e,Y.addEvents()};function J(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(J.prototype,HTMLElement.prototype),Object.setPrototypeOf(J,HTMLElement);class Z extends J{constructor(e={}){super(),this._bindContextToFunctions(),this.data=Object.assign({},e.dataset),this.data.useTextResourceKeys&&(this.data.message=window.i18n[this.data.message],this.data.headline=window.i18n[this.data.headline],this.data.actionButtonLinkText=window.i18n[this.data.actionButtonLinkText])}static get type(){return"MessageLayerElement"}static async getContent(e){return new Z(e)}connectedCallback(){this._render()}_bindContextToFunctions(){this._closeLayer=this._closeLayer.bind(this),this._render=this._render.bind(this)}_render(){this.innerHTML=v.template.render('\n\t<div class="modal-layer__inner nm-modal-layer__inner" role="alert">\n\t\t<div class="nm-modal-layer__header">\n\t\t\t<div class="nm-modal-layer__headline-wrap" data-type="{{=it.type}}">\n\t\t\t\t<h2 class="nm-modal-layer__headline audi-headline-order-2">{{=it.headline}}</h2>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="nm-modal-layer__inner-content">\n\t\t\t<div data-layer-options=\'{"onEscClick": false, "onShaderClick": false, "centerVertically": true, "addCssClass": "nm-module-message-layer"}\'>\n\t\t\t<p class="nm-modal-layer__message audi-copy-m">{{=it.message}}</p>\n\t\t</div>\n\t\t<div class="nm-modal-layer__footer">\n\t\t\t<a class="nm-modal-layer__confirm-button audi-button" href="{{=it.actionButtonLinkUrl}}">\n\t\t\t\t<span class="audi-button__text">\n\t\t\t\t\t{{=it.actionButtonLinkText}}\n\t\t\t\t</span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n',this.data)}_closeLayer(){this._triggerClose()}}d.modalLayer.registerLayerType(Z),void 0===window.customElements.get("audi-modal-layer-message-element")&&window.customElements.define("audi-modal-layer-message-element",Z);function ee(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(ee.prototype,HTMLElement.prototype),Object.setPrototypeOf(ee,HTMLElement);class te extends ee{constructor(e={}){super(),this._bindContextToFunctions(),this.data=Object.assign({},e.dataset)}static get type(){return"ModalLayerInterstitialElement"}static get defaults(){return{closeButton:".nm-button-cancel"}}static async getContent(e){return new te(e)}addEvents(){this.closeButton.addEventListener("click",this._closeLayer)}removeEvents(){this.closeButton.removeEventListener("click",this._closeLayer)}connectedCallback(){this._render().then(()=>this.addEvents())}_bindContextToFunctions(){this._closeLayer=this._closeLayer.bind(this),this._render=this._render.bind(this)}async _render(){const e=SETUPS.get("nemo.InterstitialLayerLink");this.data.body=await this._fetchContent(e),this.innerHTML=v.template.render('\n\t<div class="modal-layer__inner" role="alert">\n\t\t<div class="modal-layer__inner-header">\n\t\t</div>\n\t\t<div class="modal-layer__inner-content">\n\t\t\t<div data-layer-options=\'{"onEscClick": false, "onShaderClick": false, "centerVertically": true, "addCssClass": "nm-module-interstitial-layer"}\'>\n\t\t\t\t{{=it.body}}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n',this.data),this.closeButton=this.querySelector(te.defaults.closeButton)}async _fetchContent(e){try{return await d.content.getContent(e,!1)}catch(e){return e.message}}beforeClose(){this._dispatchCloseInterstitialEvent()}_closeLayer(e){e.preventDefault(),e.stopPropagation(),this._triggerClose();let t=e.target.getAttribute("href");t&&"#"!==t&&d.router.open("",t)}_dispatchCloseInterstitialEvent(){document.dispatchEvent(new CustomEvent(d.appEvents.INTERSTITIAL_LAYER_CLOSE))}async _triggerClose(e=!1){try{const t=this.closest("modal-layer-wrapper");await t.close(this,e)}catch(e){throw console.warn("_triggerClose - modal layer wrapper missing."),e}}}d.modalLayer.registerLayerType(te),void 0===window.customElements.get("modal-layer-interstitial-element")&&window.customElements.define("modal-layer-interstitial-element",te);var ne={},ae={__:ne};ne.oDefaults={sClassNotificationBar:"nm-md-notification-bar",sSelectorNotificationBarCancel:".nm-md-nb-cancel",sSelectorNotificationBarLink:".nm-md-nb-link",sValueNotificationCanceled:"nb-canceled"},ne.addEvents=function(){ne.eventBus.on(d.appEvents.PAGE_LOADED,ne.checkForNotificationBar),ne.domDelegate.on("click",ne.oDefaults.sSelectorNotificationBarCancel,ne.cancelNotificationbar),ne.domDelegate.on("click",ne.oDefaults.sSelectorNotificationBarLink,ne.cancelNotificationbar)},ne.readLocalStorageFlag=function(e){return ne.localStorageAlternative?ne.localStorageAlternative[e]:localStorage.getItem(e)},ne.writeLocalStorageFlag=function(e){try{localStorage.setItem(e,!0)}catch(t){ne.localStorageAlternative=ne.localStorageAlternative?ne.localStorageAlternative:{},ne.localStorageAlternative[e]=!0}},ne.checkForNotificationBar=function(){ne.readLocalStorageFlag(ne.oDefaults.sValueNotificationCanceled)||ne.showNotificationBar()},ne.showNotificationBar=function(){document.getElementsByClassName(ne.oDefaults.sClassNotificationBar)&&document.getElementsByClassName(ne.oDefaults.sClassNotificationBar).length>0&&document.getElementsByClassName(ne.oDefaults.sClassNotificationBar)[0].classList.add("nm-j-notification-foldout")},ne.hideNotificationBar=function(){document.getElementsByClassName(ne.oDefaults.sClassNotificationBar)&&document.getElementsByClassName(ne.oDefaults.sClassNotificationBar).length>0&&document.getElementsByClassName(ne.oDefaults.sClassNotificationBar)[0].classList.remove("nm-j-notification-foldout")},ne.cancelNotificationbar=function(){ne.writeLocalStorageFlag(ne.oDefaults.sValueNotificationCanceled),ne.hideNotificationBar()},ae.initialize=function(e){ne.eventBus=e,ne.domDelegate=v.dom.getEventDelegate("body"),ne.addEvents(),ne.checkForNotificationBar()};n(71);const ie={},oe={__:ie};ie.oDefaults={sSelectorPanoramaModule:".nm-module-panorama",sSelectorPanoramaWrapper:".nm-j-panorama",sSelectorPanoramaPoster:".nm-md-panorama-static",sSelectorPanoramaActivate:".nm-j-panorama-activate",sSelectorPanoramaCollapse:".nm-j-panorama-close-fullscreen"},ie.threejsURL=window.webpack_public_path+"bundle.panorama.js",ie.threejsLoaded=!1,ie.panoramaIsFullscreen=!1,ie.userInteraction=!1,ie.debugEnabled=!1,ie.gyroAvailable=void 0!==window.DeviceOrientationEvent,ie.iOS=v.device.isiOS(),ie.mobileDevice=v.device.isMobile(),ie.topRange=28,ie.bottomRange=-85,ie.animationID=null,ie.fullScreenElementID=null,ie.onMouseDownMouseX=0,ie.onMouseDownMouseY=0,ie.logitude=0,ie.onMouseDownLon=0,ie.latitude=0,ie.onMouseDownLat=0,ie.alpha=0,ie.beta=0,ie.gamma=0,ie.threeReady=function(e){ie.debug("threejs_loaded!"),ie.THREE=e.default,ie.threejsLoaded=!0,ie.addEvents(),ie.enableInteraction(),ie.addDeviceOrientationControls()},ie.enableInteraction=function(){v.dom.getElementsArray(ie.oDefaults.sSelectorPanoramaActivate).forEach((function(e){e.setAttribute("data-state","enabled"),ie.preloadTexture(e)}))},ie.preloadTexture=function(e){var t=new Image,n=v.dom.closest(e,ie.oDefaults.sSelectorPanoramaWrapper),a=v.dom.getDataAttribute(n,"texture-url");a=v.device.isMobile()?a+"?imwidth=4000":a,t.setAttribute("loading","lazy"),t.dataset.src=a},ie.activatePanoramaClickHandler=function(){var e,t=v.dom.closest(this,ie.oDefaults.sSelectorPanoramaModule);v.dom.isElement(t)&&(ie.initPanoramaViewer(t),ie.activateUserControls(t),ie.animatePanorama(),ie.isFullScreen()||(e=v.dom.getElement(ie.oDefaults.sSelectorPanoramaWrapper,t),ie.switchToFullScreen(e)))},ie.collapsePanoramaClickHandler=function(){var e=v.dom.closest(this,ie.oDefaults.sSelectorPanoramaModule);v.dom.isElement(e)&&(ie.deactivateUserControls(e),ie.closePanoramaViewer(e),ie.exitFullScreen())},ie.collapsePanoramaHandler=function(e){var t=v.dom.closest(e,ie.oDefaults.sSelectorPanoramaModule);v.dom.isElement(t)&&(ie.deactivateUserControls(t),ie.closePanoramaViewer(t))},ie.activateUserControls=function(e){var t=v.dom.getElement("canvas",e);ie.addWindowResizeEvent(),ie.addMouseInteractionEvents(t),ie.addTouchAndGesturesInteractionEvents(t),ie.addDeviceOrientationEvent()},ie.addWindowResizeEvent=function(){ie.throttleResizeHandler=v.dom.throttle(ie.panoramaResizeHandler,250),window.addEventListener("resize",ie.throttleResizeHandler)},ie.addMouseInteractionEvents=function(e){e.addEventListener("mousedown",ie.handlePanoramaMouseDown,!1),ie.throttlePanoramaMouseMove=v.dom.throttle(ie.handlePanoramaMouseMove,40),e.addEventListener("mousemove",ie.throttlePanoramaMouseMove,!1),e.addEventListener("mouseup",ie.handlePanoramaMouseUp,!1),ie.throttlePanoramaWheelAndMultitouchHandler=v.dom.throttle(ie.handlePanoramaWheelAndMultitouch,500),e.addEventListener("wheel",ie.throttlePanoramaWheelAndMultitouchHandler,!1),e.addEventListener("context",ie.handlePanoramaWheelAndMultitouch,!1)},ie.addTouchAndGesturesInteractionEvents=function(e){e.addEventListener("gesturestart",ie.handlePanoramaWheelAndMultitouch,!1),e.addEventListener("gesturechange",ie.throttlePanoramaWheelAndMultitouchHandler,!1),e.addEventListener("gestureend",ie.handlePanoramaWheelAndMultitouch,!1),e.addEventListener("touchstart",ie.handlePanoramaTouchStart,!1),ie.throttlePanoramaTouchMoveHandler=v.dom.throttle(ie.handlePanoramaTouchMove,20),e.addEventListener("touchmove",ie.throttlePanoramaTouchMoveHandler,!1),e.addEventListener("touchend",ie.handlePanoramaMouseUp,!1)},ie.addDeviceOrientationEvent=function(){ie.iOS?null!==window.DeviceMotionEvent&&(ie.throttleIOSMotionHandler=v.dom.throttle(ie.handleIOSMotion,20),window.addEventListener("devicemotion",ie.throttleIOSMotionHandler)):window.addEventListener("deviceorientation",ie.setAndroidOrientationControls,!0)},ie.deactivateUserControls=function(e){var t=v.dom.getElement("canvas",e);window.removeEventListener("resize",ie.throttleResizeHandler),t.removeEventListener("mousedown",ie.handlePanoramaMouseDown,!1),t.removeEventListener("mousemove",ie.throttlePanoramaMouseMove,!1),t.removeEventListener("mouseup",ie.handlePanoramaMouseUp,!1),t.removeEventListener("wheel",ie.throttlePanoramaWheelAndMultitouchHandler,!1),t.removeEventListener("context",ie.handlePanoramaWheelAndMultitouch,!1),t.removeEventListener("gesturestart",ie.handlePanoramaWheelAndMultitouch,!1),t.removeEventListener("gesturechange",ie.throttlePanoramaWheelAndMultitouchHandler,!1),t.removeEventListener("gestureend",ie.handlePanoramaWheelAndMultitouch,!1),t.removeEventListener("touchstart",ie.handlePanoramaTouchStart,!1),t.removeEventListener("touchmove",ie.throttlePanoramaTouchMoveHandler,!1),t.removeEventListener("touchend",ie.handlePanoramaMouseUp,!1),ie.iOS&&null!==window.DeviceMotionEvent&&window.removeEventListener("devicemotion",ie.throttleIOSMotionHandler)},ie.handleIOSMotion=function(e){var t=Math.round(e.rotationRate.alpha),n=Math.round(e.rotationRate.beta);switch(window.orientation){case 0:ie.latitude+=.02*t,ie.longitude-=.02*n;break;case-90:ie.latitude+=.02*n,ie.longitude+=.02*t;break;case 180:ie.latitude-=.02*t,ie.longitude+=.02*n;break;case 90:ie.latitude-=.02*n,ie.longitude-=.02*t}},ie.setAndroidOrientationControls=function(e){e.alpha&&(ie.camera.lookAt(new ie.THREE.Vector3(-1,0,0)),ie.sphereMesh.rotateY(ie.THREE.Math.degToRad(180)),ie.androidOrientationControls=new ie.THREE.DeviceOrientationControls(ie.camera,!0),ie.androidOrientationControls.connect(),ie.androidOrientationControls.update(),window.removeEventListener("deviceorientation",ie.setAndroidOrientationControls,!0))},ie.handlePanoramaMouseDown=function(e){e.preventDefault(),ie.userInteraction=!0,ie.onMouseDownMouseX=e.clientX,ie.onMouseDownMouseY=e.clientY,ie.onMouseDownLon=ie.longitude,ie.onMouseDownLat=ie.latitude},ie.handlePanoramaMouseMove=function(e){e.preventDefault(),ie.userInteraction&&(ie.latitude=.1*(e.clientY-ie.onMouseDownMouseY)+ie.onMouseDownLat,ie.longitude=.1*(ie.onMouseDownMouseX-e.clientX)+ie.onMouseDownLon)},ie.handlePanoramaMouseUp=function(e){ie.userInteraction=!1,e.preventDefault()},ie.handlePanoramaTouchStart=function(e){var t=e.changedTouches[0];e.preventDefault(),1===e.touches.length&&(ie.userInteraction=!0,ie.onMouseDownMouseX=t.clientX,ie.onMouseDownMouseY=t.clientY,ie.onMouseDownLon=ie.longitude,ie.onMouseDownLat=ie.latitude)},ie.handlePanoramaTouchMove=function(e){var t=e.changedTouches[0];e.preventDefault(),1===e.touches.length&&ie.userInteraction&&(ie.latitude=.2*(t.clientY-ie.onMouseDownMouseY)+ie.onMouseDownLat,ie.longitude=.2*(ie.onMouseDownMouseX-t.clientX)+ie.onMouseDownLon)},ie.handlePanoramaWheelAndMultitouch=function(e){e.preventDefault()},ie.closePanoramaViewer=function(e){var t=v.dom.getElement(ie.oDefaults.sSelectorPanoramaWrapper,e);ie.debug("collapsePano - close"),t.setAttribute("data-state",null),t.removeChild(ie.renderer.domElement),ie.androidOrientationControls&&ie.androidOrientationControls.dispose(),ie.remove3DEntity()},ie.panoramaResizeHandler=function(){let e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;ie.panoramaIsFullscreen&&(ie.camera.aspect=e/t,ie.camera.updateProjectionMatrix(),ie.renderer.setSize(e,t))},ie.isFullScreen=function(){return!!(document.fullscreenElement||document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)},ie.enterFullScreen=function(e){e.requestFullscreen||(e.requestFullscreen=e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen),e.requestFullscreen()},ie.isFullScreenClosed=function(){ie.isFullScreen()||(ie.fullScreenElement&&ie.collapsePanoramaHandler(ie.fullScreenElement),ie.exitFullScreen())},ie.exitFullScreen=function(){document.exitFullScreen||(document.exitFullScreen=document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen),document.exitFullScreen(),ie.handleFullscreenEvents(!1)},ie.switchToFullScreen=function(e){ie.handleFullscreenEvents(!0),ie.fullScreenElement=e,ie.enterFullScreen(e)},ie.handleFullscreenEvents=function(e){e?(document.addEventListener("webkitfullscreenchange",ie.isFullScreenClosed,!1),document.addEventListener("mozfullscreenchange",ie.isFullScreenClosed,!1),document.addEventListener("fullscreenchange",ie.isFullScreenClosed,!1),document.addEventListener("MSFullscreenChange",ie.isFullScreenClosed,!1)):(document.removeEventListener("webkitfullscreenchange",ie.isFullScreenClosed,!1),document.removeEventListener("mozfullscreenchange",ie.isFullScreenClosed,!1),document.removeEventListener("fullscreenchange",ie.isFullScreenClosed,!1),document.removeEventListener("MSFullscreenChange",ie.isFullScreenClosed,!1))},ie.initPanoramaViewer=function(e){var t=v.dom.getElement(ie.oDefaults.sSelectorPanoramaWrapper,e),n=v.dom.getDataAttribute(t,"texture-url"),a=window.innerWidth,i=window.innerHeight;n=ie.mobileDevice?n+"?imwidth=4000":n,ie.debug("initPanoView"),ie.longitude=0,ie.latitude=0,ie.setUpRenderer(a,i),ie.updateDOMWithRenderer(t),ie.createNewScene(),ie.createNewCamera(a/i),ie.createMeshAndAddPanoramaToScene(ie.createNewSphere(),ie.createSphereMaterial(n)),ie.animatePanorama()},ie.setUpRenderer=function(e,t){ie.renderer=new ie.THREE.WebGLRenderer,ie.renderer.setSize(e,t)},ie.updateDOMWithRenderer=function(e){e.setAttribute("data-state","active"),e.appendChild(ie.renderer.domElement),ie.panoramaIsFullscreen=!0},ie.createNewScene=function(){ie.scene=new ie.THREE.Scene},ie.createNewCamera=function(e){ie.camera=new ie.THREE.PerspectiveCamera(80,e,1,1e3),ie.camera.target=new ie.THREE.Vector3(0,0,0)},ie.createNewSphere=function(){var e=new ie.THREE.SphereGeometry(100,100,60,160);return e.applyMatrix((new ie.THREE.Matrix4).makeScale(-1,1,1)),e},ie.createSphereMaterial=function(e){var t=new ie.THREE.MeshBasicMaterial;return t.map=ie.THREE.ImageUtils.loadTexture(e),t},ie.createMeshAndAddPanoramaToScene=function(e,t){ie.sphereMesh=new ie.THREE.Mesh(e,t),ie.scene.add(ie.sphereMesh)},ie.remove3DEntity=function(){cancelAnimationFrame(ie.animationID),ie.panoramaIsFullscreen=!1,ie.scene=null,ie.camera=null,ie.renderer=null},ie.animatePanorama=function(){ie.panoramaIsFullscreen&&(ie.animationID=requestAnimationFrame(ie.animatePanorama),ie.updatePanoramaStage())},ie.updatePanoramaStage=function(){ie.androidOrientationControls?(ie.androidOrientationControls.alphaOffset=ie.THREE.Math.degToRad(-1*ie.longitude),ie.androidOrientationControls.update()):(ie.latitude=Math.max(ie.bottomRange,Math.min(ie.topRange,ie.latitude)),ie.camera.target.x=500*Math.sin(ie.THREE.Math.degToRad(90-ie.latitude))*Math.cos(ie.THREE.Math.degToRad(ie.longitude)),ie.camera.target.y=500*Math.cos(ie.THREE.Math.degToRad(90-ie.latitude)),ie.camera.target.z=500*Math.sin(ie.THREE.Math.degToRad(90-ie.latitude))*Math.sin(ie.THREE.Math.degToRad(ie.longitude)),ie.camera.lookAt(ie.camera.target)),ie.renderer.render(ie.scene,ie.camera)},ie.debug=function(e){ie.debugEnabled&&console.log("module_panorama: "+e)},ie.addEvents=function(){ie.domEventDelegate.on("click",ie.oDefaults.sSelectorPanoramaActivate,ie.activatePanoramaClickHandler),ie.domEventDelegate.on("click",ie.oDefaults.sSelectorPanoramaCollapse,ie.collapsePanoramaClickHandler)},ie.getContext=function(e){return e&&!e.context?e.domElement||e.element:document},ie.isPanoramaModuleInContext=function(e){var t=ie.getContext(e);return v.dom.getElementsArray(ie.oDefaults.sSelectorPanoramaModule,t).length>0},ie.loadThreeLibrary=function(e){ie.isPanoramaModuleInContext(e)&&Promise.all([n.e(12),n.e(9)]).then(n.bind(null,84)).then(ie.threeReady).catch(e=>{console.error(e)})},ie.initialize=function(){ie.eventBus.on(d.appEvents.PAGE_LOADED,ie.loadThreeLibrary),ie.eventBus.on(d.appEvents.LAYER_LOADED,ie.loadThreeLibrary),ie.loadThreeLibrary()},ie.addDeviceOrientationControls=function(){ie.THREE.DeviceOrientationControls=function(e){var t,n,a,i,o=this,r=function(e){o.deviceOrientation=e},l=function(){o.screenOrientation=window.orientation||0},s=(t=new ie.THREE.Vector3(0,0,1),n=new ie.THREE.Euler,a=new ie.THREE.Quaternion,i=new ie.THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(e,o,r,l,s){n.set(r,o,-l,"YXZ"),e.setFromEuler(n),e.multiply(i),e.multiply(a.setFromAxisAngle(t,-s))});this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0,this.connect=function(){l(),window.addEventListener("orientationchange",l,!1),window.addEventListener("deviceorientation",r,!1),o.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",l,!1),window.removeEventListener("deviceorientation",r,!1),o.enabled=!1},this.update=function(){var e,t,n,a,i=o.deviceOrientation;!1!==o.enabled&&i&&(e=i.alpha?ie.THREE.Math.degToRad(i.alpha)+o.alphaOffset:0,t=i.beta?ie.THREE.Math.degToRad(i.beta):0,n=i.gamma?ie.THREE.Math.degToRad(i.gamma):0,a=o.screenOrientation?ie.THREE.Math.degToRad(o.screenOrientation):0,s(o.object.quaternion,e,t,n,a))},this.dispose=function(){o.disconnect()},this.connect()}},oe.initialize=function(e){ie.domEventDelegate=v.dom.getEventDelegate("body"),ie.eventBus=e,ie.initialize()};class re{constructor(){if(re._instance)return re._instance;this.handlePageType=this.handlePageType.bind(this),i.stateRegistry.addStore("dbadPageStoreFootnotes",{isNemoHome:!1},{updatePageType:function(e,t){return{...e,isNemoHome:"nemo"===t.typeName&&"home"===t.templateName}}}),re._instance=this}initialize(e){this.eventBus=e,this.eventBus.on(d.appEvents.PAGE_LOADED,this.handlePageType),this.handlePageType()}handlePageType(e=null){let t,n,a;t=null!==e&&void 0!==e.domElement?e.domElement.querySelector(".nm-content"):document.querySelector(".nm-content"),null!==t&&(n=t.getAttribute("data-type"),a=t.getAttribute("data-template"),i.stateRegistry.triggerAction("dbadPageStoreFootnotes","updatePageType",{typeName:n,templateName:a}))}}const le=new re;const se=new class{constructor(){!0===SETUPS.get("scope.nemo.editorial.path.entryservice.links.dealer")&&(this._initialize(),this._onStateUpdate=this._onStateUpdate.bind(this),this._patchDealerLinks=this._patchDealerLinks.bind(this),this._markLinksWithPlaceholderAsProcessable=this._markLinksWithPlaceholderAsProcessable.bind(this),this._processLinksWithPlaceholder=this._processLinksWithPlaceholder.bind(this),this._getLinksToPatchWithGivenAttribute=this._getLinksToPatchWithGivenAttribute.bind(this),document.addEventListener("PAGE_READY",this._patchDealerLinks),document.addEventListener("LAYER_LOADED",this._patchDealerLinks),i.stateRegistry.subscribeToStore("dbadDealerStore",this._onStateUpdate))}_initialize(){this.kvpsidPlaceholder="{kvpsid}",this.kvpsid="",this.kvpsSyncIdPlaceholder="{kvpsSyncId}",this.kvpsSyncId=""}_onStateUpdate(e){this.kvpsid=e.kvpsid||"",this.kvpsSyncId=e.kvpsSyncId||"",this._patchDealerLinks()}_patchDealerLinks(){this._markLinksWithPlaceholderAsProcessable("href","data-href-placeholder-url"),this._markLinksWithPlaceholderAsProcessable("data-link-pattern","data-pattern-placeholder-url"),this._processLinksWithPlaceholder("href","data-href-placeholder-url"),this._processLinksWithPlaceholder("data-link-pattern","data-pattern-placeholder-url")}_markLinksWithPlaceholderAsProcessable(e,t){this._getLinksToPatchWithGivenAttribute(e).forEach(n=>{n.setAttribute(t,n.getAttribute(e))})}_processLinksWithPlaceholder(e,t){this._getLinksToPatchWithGivenAttribute(t).forEach(n=>{const a=n.getAttribute(t).replace(new RegExp(this.kvpsidPlaceholder,"g"),this.kvpsid).replace(new RegExp(this.kvpsSyncIdPlaceholder,"g"),this.kvpsSyncId);n.setAttribute(e,a)})}_getLinksToPatchWithGivenAttribute(e){return[...document.querySelectorAll("a["+e+'*="'+this.kvpsidPlaceholder+'"], a['+e+'*="'+this.kvpsSyncIdPlaceholder+'"]')]}};var de=n(8);const ce={},ue={__:ce};ce.oDefaults={selectorModuleRenderStage:".nm-md-render-stage",selectorImagesInputs:".nm-render-stage-inputs",selectorThumbnails:".nm-render-stage-thumbnail-item-wrap",selectorThumbnailsContainer:".nm-render-stage-thumbnails",selectorThumbnailsWrapper:".nm-render-stage-thumbnails-wrapper",selectorRenderStage:".nm-render-stage",selectorStageItem:".nm-render-stage-item-wrap",selectorNavigationPrev:".nm-render-stage-prev",selectorNavigationNext:".nm-render-stage-next",selectorThumbnailNavigationPrev:".nm-render-stage-thumbnail-prev",selectorThumbnailNavigationNext:".nm-render-stage-thumbnail-next",selectorInitialRenderImage:"[data-is-initial]"},ce.renderStages=[],ce.isScrollSnapSupported="scrollSnapType"in document.documentElement.style||"webkitScrollSnapType"in document.documentElement.style||!("classList"in document.createElement("_")),ce.nonPolyfillable=ce.isScrollSnapSupported||!Element.prototype.addEventListener||!window.requestAnimationFrame,ce.RenderStage=function(e){this.context=e,this.imageInputs=v.dom.getElementsArray(ce.oDefaults.selectorImagesInputs,this.context),this.maxIndex=this.imageInputs.length,this.scrollContainer=v.dom.getElement(ce.oDefaults.selectorRenderStage,this.context),this.scrollPosition=0,this.scrollContainerItem=v.dom.getElement(ce.oDefaults.selectorStageItem,this.context),this.thumbnails=v.dom.getElementsArray(ce.oDefaults.selectorThumbnails,this.context),this.thumbnailsContainer=v.dom.getElement(ce.oDefaults.selectorThumbnailsContainer,this.context),this.thumbnailsWrapper=v.dom.getElement(ce.oDefaults.selectorThumbnailsWrapper,this.context),this.currentIndex=0,this.slides=v.dom.getElementsArray(ce.oDefaults.selectorStageItem,this.context),this.navNext=v.dom.getElement(ce.oDefaults.selectorNavigationNext,this.context),this.navPrev=v.dom.getElement(ce.oDefaults.selectorNavigationPrev,this.context),this.thumbnailNavNext=v.dom.getElement(ce.oDefaults.selectorThumbnailNavigationNext,this.context),this.thumbnailNavPrev=v.dom.getElement(ce.oDefaults.selectorThumbnailNavigationPrev,this.context),this.initialRenderImage=v.dom.getElement(ce.oDefaults.selectorInitialRenderImage,this.context),this.initialRenderImage&&(this.currentIndex=this.initialRenderImage.getAttribute("data-index")-1,this.currentIndex>0&&this.jumpToImage(this.currentIndex)),this.scrollContainer.classList.remove("nm-render-stage--loading")},ce.RenderStage.prototype.jumpToImage=function(e){const t=this.scrollContainerItem.clientWidth*e;this.scrollContainer.classList.add("nm-render-stage--no-animation"),this.scrollContainer.scrollLeft=t,this.handleNavigationVisibility(this.slides,this.scrollContainer,this.navPrev,this.navNext),this.changeInputPos(e),this.scrollContainer.classList.remove("nm-render-stage--no-animation")},ce.RenderStage.prototype.navigationNextArrowClickHandler=function(){this.currentIndex<this.maxIndex&&(this.currentIndex++,this.scrollToImage(this.currentIndex))},ce.RenderStage.prototype.navigationPrevArrowClickHandler=function(){this.currentIndex>0&&(this.currentIndex--,this.scrollToImage(this.currentIndex))},ce.RenderStage.prototype.thumbnailClickhandler=async function(e){e.preventDefault();let t=0;const n=e.target;this.thumbnails.forEach((e,a)=>{e===n&&(t=a)}),this.currentIndex=t,await this.scrollToImage(t)},ce.RenderStage.prototype.intersectionHandler=function(){if("undefined"!=typeof IntersectionObserver){const e=new IntersectionObserver(e=>{if(e[0].intersectionRatio>=.25){const t=e[0].target.getAttribute("data-index")-1;this.changeInputPos(t),this.handleNavigationVisibility(this.slides,this.scrollContainer,this.navPrev,this.navNext)}},{root:this.scrollContainer,threshold:.25});this.slides.forEach(t=>{e.observe(t)})}},ce.RenderStage.prototype.thumbnailsScrollHandler=function(){this.handleNavigationVisibility(this.thumbnails,this.thumbnailsContainer,this.thumbnailNavPrev,this.thumbnailNavNext,!0)},ce.RenderStage.prototype.thumbnailsThrottleHandler=function(){return v.dom.throttle(this.thumbnailsScrollHandler.bind(this),15)},ce.RenderStage.prototype.thumbnailNavigationNextClickhandler=function(){this.translateThumbnailContainer("next")},ce.RenderStage.prototype.thumbnailNavigationPrevClickhandler=function(){this.translateThumbnailContainer("prev")},ce.RenderStage.prototype.addStageEvents=function(){this.navigationNextArrowClickHandler=this.navigationNextArrowClickHandler.bind(this),this.navigationPrevArrowClickHandler=this.navigationPrevArrowClickHandler.bind(this),this.thumbnailClickhandler=this.thumbnailClickhandler.bind(this),this.thumbnailNavigationNextClickhandler=this.thumbnailNavigationNextClickhandler.bind(this),this.thumbnailNavigationPrevClickhandler=this.thumbnailNavigationPrevClickhandler.bind(this),this.thumbnailsThrottleHandler=this.thumbnailsThrottleHandler(),this.navNext.addEventListener("click",this.navigationNextArrowClickHandler),this.navPrev.addEventListener("click",this.navigationPrevArrowClickHandler),this.thumbnailsContainer.addEventListener("click",this.thumbnailClickhandler),this.thumbnailNavNext.addEventListener("click",this.thumbnailNavigationNextClickhandler),this.thumbnailNavPrev.addEventListener("click",this.thumbnailNavigationPrevClickhandler),this.thumbnailsContainer.addEventListener("scroll",this.thumbnailsThrottleHandler),this.intersectionHandler=this.intersectionHandler.bind(this),this.intersectionHandler(),ce.nonPolyfillable||this.addScrollSnapPolyfill()},ce.RenderStage.prototype.addScrollSnapPolyfill=function(){const e=v.dom.getElement(".nm-render-stage",this.context);this.snapObject=new de.ScrollSnap(e,{scrollSnapDestination:"100% 0%",scrollTimeout:50,scrollTime:300}),this.handleScrollSnapEnd=this.handleScrollSnapEnd.bind(this),this.snapObject.bind(this.handleScrollSnapEnd)},ce.RenderStage.prototype.handleScrollSnapEnd=function(){this.handleNavigationVisibility(this.slides,this.scrollContainer,this.navPrev,this.navNext)},ce.RenderStage.prototype.removeStageEvents=function(){this.navNext.removeEventListener("click",this.navigationNextArrowClickHandler),this.navPrev.removeEventListener("click",this.navigationPrevArrowClickHandler),this.thumbnailsContainer.removeEventListener("click",this.thumbnailClickhandler),this.thumbnailNavNext.removeEventListener("click",this.thumbnailNavigationNextClickhandler),this.thumbnailNavPrev.removeEventListener("click",this.thumbnailNavigationPrevClickhandler),this.scrollContainer.removeEventListener("scroll",this.throttleHandler),this.thumbnailsContainer.removeEventListener("scroll",this.thumbnailsThrottleHandler),this.snapObject&&this.snapObject.unbind(this.handleScrollSnapEnd)},ce.RenderStage.prototype.getVisibleThumbnailItems=function(){var e=this,t=[];return e.thumbnails.forEach((function(n){v.dom.isVisible(n,e.thumbnailsContainer,!1)&&t.push(n)})),t},ce.RenderStage.prototype.calculateNewScrollPosition=function(e){var t=this.getVisibleThumbnailItems(),n=this.thumbnailsContainer.scrollLeft,a=this.thumbnailsContainer.clientWidth;return"next"===e?n+a-(ce.getRightBound(this.thumbnailsContainer)-ce.getLeftBound(t[t.length-1])):n-a-(ce.getLeftBound(this.thumbnailsContainer)-ce.getRightBound(t[0]))},ce.RenderStage.prototype.translateThumbnailContainer=function(e){var t=this.calculateNewScrollPosition(e),n=this;v.dom.animateElementX(t,this.thumbnailsContainer,600).then((function(){n.handleNavigationVisibility(n.thumbnails,n.thumbnailsContainer,n.thumbnailNavPrev,n.thumbnailNavNext)})).catch((function(){}))},ce.RenderStage.prototype.handleNavigationVisibility=function(e,t,n,a,i){var o=ce.getItemVisiblityStatus(e[0],t),r=ce.getItemVisiblityStatus(e[e.length-1],t);ce.refreshNavigationVisibility(o,n,i),ce.refreshNavigationVisibility(r,a,i)},ce.RenderStage.prototype.scrollToImage=function(e){var t=this,n=this.scrollContainerItem.clientWidth*e;v.dom.animateElementX(n,this.scrollContainer,300).catch((function(){})).then((function(){t.centerThumb();/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)&&t.changeInputPos(e)}))},ce.RenderStage.prototype.centerThumb=function(){var e=this.thumbnails[this.currentIndex],t=e.offsetLeft-(this.scrollContainer.clientWidth-e.clientWidth)/2;v.dom.isVisible(e,this.thumbnailsContainer,!0)||v.dom.animateElementX(t,this.thumbnailsContainer,300).catch((function(){}))},ce.RenderStage.prototype.changeInputPos=function(e){this.imageInputs.map((function(e){e.checked=!1})),this.currentIndex=e,this.imageInputs[e].checked=!0},ce.refreshNavigationVisibility=function(e,t,n){var a=n?100:20;2===e.visibleStatus||1===e.visibleStatus&&e.nearestParentBoundPercentage>=a?t.classList.add("nm-hidden"):t.classList.remove("nm-hidden")},ce.getItemVisiblityStatus=function(e,t,n){var a,i,o,r,l=n||0;return t.parentNode.style.display="block",a=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=(Math.round(i.right)<=Math.round(a.right)||Math.round(100*Math.abs(i.right/a.right))>=100-l&&Math.round(100*Math.abs(i.right/a.right))<=100+l)&&Math.round(i.right)>=Math.round(a.left),r=(Math.round(i.left)>=Math.round(a.left)||Math.round(100*Math.abs(i.left/a.left))>=100-l&&Math.round(100*Math.abs(i.left/a.left))<=100+l)&&Math.round(i.left)<=Math.round(a.right),t.parentNode.style.display="",ce.createBoundingObject(a,i,r,o)},ce.createBoundingObject=function(e,t,n,a){var i={};return a&&n?(i.visible=!0,i.visibleStatus=2,i.visibleStatusText="full"):a||n?(i.visible=!0,i.visibleStatus=1,i.visibleStatusText="half"):(i.visible=!1,i.visibleStatus=0,i.visibleStatusText="no"),i.elemWidth=Math.round(t.width),t.right<e.right&&t.right<e.right-e.width/2?(i.nearestParentBound="left",i.nearestParentBoundPercentage=Math.round(100*Math.abs((t.right-e.left)/t.width))):(i.nearestParentBound="right",i.nearestParentBoundPercentage=Math.round(100*Math.abs((e.right-t.left)/t.width))),i},ce.getNewIndex=function(e){return e.getAttribute("data-index")||0},ce.getItemWidth=function(e){return e.clientWidth||0},ce.getRightBound=function(e){return e.getBoundingClientRect().right||0},ce.getLeftBound=function(e){return e.getBoundingClientRect().left||0},ce.initiateStages=function(){var e,t,n=v.dom.getElementsArray(ce.oDefaults.selectorModuleRenderStage);ce.renderStages.forEach((function(e){(t=n.indexOf(e.context))>-1&&n.splice(t,1)})),n.forEach((function(t){e=new ce.RenderStage(t),ce.renderStages.push(e),e.addStageEvents()})),ce.addOrDeleteResizeHandler()},ce.removeStages=function(){for(var e=v.dom.getElementsArray(ce.oDefaults.selectorModuleRenderStage),t=ce.renderStages.length;t--;)e.indexOf(ce.renderStages[t].context)<0&&(ce.renderStages[t].removeStageEvents(),ce.renderStages.splice(t,1));ce.addOrDeleteResizeHandler()},ce.resizeHandler=function(){ce.renderStages.forEach((function(e){var t=e.scrollContainerItem.clientWidth*e.currentIndex;e.scrollContainer.scrollLeft=t,e.centerThumb()}))},ce.addOrDeleteResizeHandler=function(){ce.renderStages.length>0?(window.removeEventListener("resize",ce.resizeDebounceHandler),window.addEventListener("resize",ce.resizeDebounceHandler)):window.removeEventListener("resize",ce.resizeDebounceHandler)},ce.resizeDebounceHandler=v.dom.debounce(ce.resizeHandler,200),ce.addEvents=function(){ce.eventBus.on(d.appEvents.PAGE_READY,ce.initiateStages),ce.eventBus.on(d.appEvents.LAYER_LOADED,ce.initiateStages),ce.eventBus.on(d.appEvents.LAYER_CLOSED,ce.removeStages)},ue.initialize=function(e){return new Promise((function(t){ce.eventBus=e,ce.initiateStages(),ce.addEvents(),t("module/render-stage.js")}))};var me,ge,he={},ve={__:he};he.stage=null,he.isAnimating=!1,he.domElement=null,he.lastRotationMillis=-1,he.autorotateDisableWidth=1023,he.maxViewIndex=-1,he.viewNamesArr=null,he.currentView=null,he.selectedCategory=null,he.direction=null,he.oDefaults={sAttrAutorotation:"data-autorotation",sAttrViewName:"data-view-name",sAttrStartDate:"data-startdate",sAttrEndDate:"data-enddate",sAttrViewCategory:"data-view-category",sClassHidden:"nm-hidden",sClassHomepage:"nm-homepage",sClassMobileActive:"nm-mobile-ok",sClassBrowseForward:"nm-nextarrow",sClassSelectedMenu:"nm-bs-selected",sClassHasMobileImg:"nm-stage-has-mobileimg",sClassExtendedCTA:"nm-homepage-stage-extend-cta",sSelectorStage:"#nm-id-stage, .nm-module-mediathek-stage",sSelectorHomepage:".nm-homepage",sSelectorInitialContentArea:".nm-wrapper-content .nm-area-content:first-child",sSelectorNext:"ul.nm-stage-browse>li.nm-nextarrow",sSelectorPrevious:"ul.nm-stage-browse>li.nm-backarrow",sSelectorDot:"ul.nm-dots-navi .nm-dot",sSelectorDotNavi:"ul.nm-dots-navi",sSelectorStageItemScript:".nm-stage-item script",sSelectorHomepageStageContainer:".nm-homepage .nm-stage-container",sSelectorStageContainer:".nm-stage-container",sSelectorMenuItems:"li.nm-stage-item",sSelectorBsRemote:".nm-bs-remote",sSelectorStageContent:".nm-stage",sSelectorRenderImage:"nm-stage-img.nm-j-configurator-renderimage",sSelectorMenuIcons:"ul[class^=nm-stage-list-]",sSelectorStageContentWrap:".nm-homepage-stage-teaser-content-wrap",sSelectorStageMobileImage:".nm-stage-mobile-image",sSelectorCTALink:".nm-homepage-stage-teaser-content a",sDotTemplate:'<li><a class="nm-dot" href="#"></a></li>'},he.initialize=function(){var e;he.addEvents(),0===(e=jQuery(he.oDefaults.sSelectorHomepage)).length&&(e=jQuery(he.oDefaults.sSelectorInitialContentArea)),0!==e.length?he.initializeOnDomElement(e):console.log("stage.js - no matching dom element")},he.initializeOnDomElement=function(e){var t=e;0===t.length&&(t=jQuery(he.oDefaults.sSelectorInitialContentArea)),he.stage=t.find(he.oDefaults.sSelectorStage),he.addStageEvents(he.stage),he.domElement=t,he.filterUnpublishedTeasers(t),he.initializeAutorotationOfStage(he.stage),he.resetStage(t,he.stage)},he.initializeAutorotationOfStage=function(e){he.lastRotationMillis=(new Date).getTime();let t=e.find("["+he.oDefaults.sAttrAutorotation+"]");if(t.length>0){let e=t.attr(he.oDefaults.sAttrAutorotation);if(void 0!==e){let t=1e3*Math.round(e);t>0&&window.setInterval((function(){if(jQuery(window).width()<=he.autorotateDisableWidth)return;if((new Date).getTime()>he.lastRotationMillis+t){let e=he.showNextView();ve.setCurrentView(e)}}),t)}}},he.filterUnpublishedTeasers=function(e){e.find(he.oDefaults.sSelectorStageItemScript).each((function(){var t=e.find(this).html(),n=jQuery("<div/>").html(t).find(":first-child");if(n.length>0){let e=n.attr(he.oDefaults.sAttrStartDate),t=n.attr(he.oDefaults.sAttrEndDate);if(void 0===e||void 0===t)return;let a=Math.round(e),i=Math.round(t),o=(new Date).getTime();if(0===a&&0===i)return;if(a>0&&i>0){if(a<=o&&o<i)return}else if(a>0){if(a<=o)return}else if(i>0&&o<i)return}let a=jQuery(this).parent().attr(he.oDefaults.sAttrViewName);$("["+he.oDefaults.sAttrViewName+'="'+a+'"]').remove()}));let t=e.find(he.oDefaults.sSelectorStageContainer);if(t.children().length<1){let n=e.find(he.oDefaults.sSelectorStageItemScript).first().html();t.html(n)}e.find(he.oDefaults.sSelectorHomepageStageContainer).css("visibility","visible")},ve.setCurrentView=function(e){var t,n,a,i,o,r,l=he.currentView.attr(he.oDefaults.sAttrViewName);if(l===e)return!1;he.lastRotationMillis=(new Date).getTime(),he.isAnimating=!0,t=parseInt(he.getCurrentViewIndex(l),10),n=parseInt(he.getCurrentViewIndex(e),10),he.direction="left",(t>n&&(t!==he.maxViewIndex||0!==n)||0===t&&n===he.maxViewIndex)&&(he.direction="right"),(a=he.domElement.find(he.oDefaults.sSelectorStageContainer).first()).find(".nm-j-configurator-renderimage").removeClass("nm-j-configurator-renderimage"),a.addClass("nm-stage-animation-start-"+he.direction),i=he.getTemplateByName(e),o=jQuery(i),he.currentView=o.appendTo(he.domElement.find(he.oDefaults.sSelectorStageContainer)),he.selectedCategory=he.currentView.attr(he.oDefaults.sAttrViewCategory),he.updateSelectionStatus(he.domElement,he.stage),r="-"+.5*a.width()+"px",he.updateRenderImageDataViewAttr(he.domElement),"left"===he.direction?a.animate({"margin-left":r},600,"easeOutSine",he.animationEnded):a.css("margin-left",r).animate({"margin-left":0},600,"easeOutSine",he.animationEnded)},ve.jumpToFirstRenderView=function(){var e=he.getFirstRenderImageViewInList();e&&ve.setCurrentView(e)},he.getFirstRenderImageViewInList=function(){var e,t=!1,n=he.viewNamesArr,a=n.length;for(e=0;e<a;e++)if(jQuery(he.getTemplateByName(n[e])).find(he.oDefaults.sSelectorRenderImage).length)return t=n[e];return t},he.animationEnded=function(){$(this).removeClass(["nm-stage-animation-start-",he.direction].join("")).removeAttr("style").find(".nm-stage").first().remove(),he.isAnimating=!1,he.eventBus.emit(d.appEvents.STAGE_RENDERIMAGE_UPDATED)},he.buildViewIndexArr=function(e){var t=[];return e.find(he.oDefaults.sSelectorMenuItems).each((function(){t.push(this.getAttribute(he.oDefaults.sAttrViewName))})),t},he.getCurrentViewIndex=function(e){var t=e||he.currentView.attr(he.oDefaults.sAttrViewName);return jQuery.inArray(t,he.viewNamesArr)},he.buildOrUpdateDotNavi=function(e){var t=e.find(he.oDefaults.sSelectorDotNavi),n=e.find(he.oDefaults.sSelectorBsRemote),a=he.oDefaults.sDotTemplate;if(t.children().length===he.maxViewIndex+1)jQuery(he.oDefaults.sSelectorDot).removeClass(he.oDefaults.sClassSelectedMenu);else{t.empty();let e="";for(let t=0;t<=he.maxViewIndex;t++)e+=a;t.append(jQuery(e))}let i=he.getCurrentViewIndex(),o=jQuery(t.find(".nm-dot").get(i));he.currentView.hasClass(he.oDefaults.sClassHasMobileImg)?jQuery("body").hasClass(he.oDefaults.sClassHomepage)?e.hasClass(he.oDefaults.sClassMobileActive)?(t.addClass(he.oDefaults.sClassHasMobileImg),n.addClass(he.oDefaults.sClassHasMobileImg)):(t.removeClass(he.oDefaults.sClassHasMobileImg),n.removeClass(he.oDefaults.sClassHasMobileImg)):(t.addClass(he.oDefaults.sClassHasMobileImg),n.addClass(he.oDefaults.sClassHasMobileImg)):(t.removeClass(he.oDefaults.sClassHasMobileImg),n.removeClass(he.oDefaults.sClassHasMobileImg)),o.addClass(he.oDefaults.sClassSelectedMenu)},he.getViewAtIndex=function(e){var t=he.domElement.find(he.oDefaults.sSelectorMenuItems).get(e);return he.domElement.find(t).attr(he.oDefaults.sAttrViewName)},he.getTemplateByName=function(e){return(jQuery(["#",e,"-tpl"].join("")).html()||"").trim()},he.handleMenuClick=function(e){var t;e.preventDefault(),he.isAnimating||(t=jQuery(e.currentTarget).find("li").first().attr(he.oDefaults.sAttrViewName),ve.setCurrentView(t))},he.handleDotClick=function(e){var t,n;e.preventDefault(),he.isAnimating||(t=$(this).parent().index(),n=he.getViewAtIndex(t),ve.setCurrentView(n))},he.handlePrevNextClick=function(e){var t;e.preventDefault(),he.isAnimating||(t=jQuery(e.currentTarget).attr("class")===he.oDefaults.sClassBrowseForward?he.showNextView():he.showPreviousView(),ve.setCurrentView(t))},he.getNextIndex=function(e){var t=e||he.getCurrentViewIndex();return t=++t%(he.maxViewIndex+1)},he.getPreviousIndex=function(e){var t=e||he.getCurrentViewIndex(),n=he.maxViewIndex;return--t<0&&(t=n),t},he.showNextView=function(){return he.getViewAtIndex(he.getNextIndex())},he.showPreviousView=function(){return he.getViewAtIndex(he.getPreviousIndex())},he.checkForExtendedCTA=function(){he.currentView.hasClass(he.oDefaults.sClassExtendedCTA)?(he.currentView.find(he.oDefaults.sSelectorStageContentWrap).on("click",he.extendedCTAClickHandler),he.currentView.find(he.oDefaults.sSelectorStageMobileImage).on("click",he.extendedCTAClickHandler)):(he.currentView.find(he.oDefaults.sSelectorStageContentWrap).off("click",he.extendedCTAClickHandler),he.currentView.find(he.oDefaults.sSelectorStageMobileImage).off("click",he.extendedCTAClickHandler))},he.extendedCTAClickHandler=function(e){var t,n=$(e.target),a=n.find(he.oDefaults.sSelectorCTALink);a&&a.length>0&&(t=a.attr("href"),n=a.attr("target"),t&&n?window.open(t,n):location.href=t)},he.updateSelectionStatus=function(e,t){he.checkForExtendedCTA(),he.buildOrUpdateDotNavi(t),e.find(he.oDefaults.sSelectorMenuIcons).removeClass(he.oDefaults.sClassSelectedMenu).filter([".nm-stage-list-",he.selectedCategory].join("")).addClass(he.oDefaults.sClassSelectedMenu)},he.updateRenderImageDataViewAttr=function(e){var t,n;n=he.currentView.attr(he.oDefaults.sAttrViewName),he.domElement.find(he.oDefaults.sSelectorRenderImage,e).each((function(){"fixed"!==(t=jQuery(this)).attr("data-renderimage-context")&&t.attr({"data-renderimage-view":n})})),he.eventBus.emit(d.appEvents.UPDATE_VIEW_STATE,{currentView:n,domElement:e})},he.handlePageLoaded=function(e){he.initializeOnDomElement(jQuery(e.domElement||e.element))},he.resetStage=function(e,t){var n=t.find(he.oDefaults.sSelectorDotNavi),a=e.find(he.oDefaults.sSelectorBsRemote);he.maxViewIndex=e.find(he.oDefaults.sSelectorMenuItems).length-1,0===he.maxViewIndex?(n.addClass(he.oDefaults.sClassHidden),a.addClass(he.oDefaults.sClassHidden)):(n.removeClass(he.oDefaults.sClassHidden),a.removeClass(he.oDefaults.sClassHidden)),he.viewNamesArr=he.buildViewIndexArr(e),he.isAnimating=!1,he.currentView=e.find([he.oDefaults.sSelectorStageContainer,">div",he.oDefaults.sSelectorStageContent].join("")).first(),he.selectedCategory=he.currentView.attr(he.oDefaults.sAttrViewCategory),he.updateSelectionStatus(e,t);const i=e.find(".nm-basket-image");i.length&&he.updateRenderImageDataViewAttr(i)},he.addEvents=function(){he.eventBus.on(d.appEvents.PAGE_LOADED,he.handlePageLoaded),he.eventBus.on(d.appEvents.LAYER_LOADED,he.handlePageLoaded),he.eventBus.on(d.appEvents.LAYER_CLOSED,he.handlePageLoaded)},he.addStageEvents=function(e){e.on("click.stage.menuitem",he.oDefaults.sSelectorMenuIcons,he.handleMenuClick),e.on("click.stage.remote",he.oDefaults.sSelectorNext,he.handlePrevNextClick),e.on("click.stage.remote",he.oDefaults.sSelectorPrevious,he.handlePrevNextClick),e.on("click.stage.dot touchend.stage.dots",he.oDefaults.sSelectorDot,he.handleDotClick)},ve.dispose=function(){he.eventBus.off(d.appEvents.PAGE_LOADED,he.handlePageLoaded),he.eventBus.off(d.appEvents.LAYER_LOADED,he.handlePageLoaded)},ve.initialize=function(e){he.eventBus=e,he.initialize()},ge={__:me={}},me.oDefaults={sClassActive:"nm-active",sClassDuringAnimation:"nm-animating",sClassNoAnimation:"no-animation",sClassForwardAnimation:"nm-animation-forward",sClassBackwardAnimation:"nm-animation-backward",sSelectorStage:".nm-layer-multi-stage",sSelectorNext:".nm-nextarrow",sSelectorPrevious:".nm-backarrow",sSelectorLayerStageImageActive:".nm-layer-image.nm-active",sSelectorLayerStageImage:".nm-layer-image"},me.initialize=function(){me.addEvents()},me.addEvents=function(){me.eventBus.on(d.appEvents.PAGE_LOADED,me.handleLayerLoaded),me.eventBus.on(d.appEvents.LAYER_LOADED,me.handleLayerLoaded)},me.handleLayerLoaded=function(e){var t;e.domElement?t=e.domElement:e.element&&(t=e.element),t?me.addStageEvents(t):console.log("no dom element available")},me.addStageEvents=function(e){jQuery(e).on("click",me.oDefaults.sSelectorNext,me.handleNextClick),jQuery(e).on("click",me.oDefaults.sSelectorPrevious,me.handlePrevClick),jQuery(me.oDefaults.sSelectorStage).on("mousedown",me.activateSwipe),jQuery(me.oDefaults.sSelectorStage).on("touchstart",me.activateSwipe),jQuery(document).on("mouseup",me.deactivateSwipe),jQuery(document).on("touchend",me.deactivateSwipe)},me.handleNextClick=function(e){var t;e.preventDefault(),jQuery(me.oDefaults.sSelectorStage).hasClass(me.oDefaults.sClassDuringAnimation)||(jQuery(me.oDefaults.sSelectorStage).addClass(me.oDefaults.sClassDuringAnimation),t=jQuery(me.oDefaults.sSelectorLayerStageImageActive),jQuery(me.oDefaults.sSelectorStage).addClass(me.oDefaults.sClassNoAnimation),jQuery(me.oDefaults.sSelectorStage).addClass(me.oDefaults.sClassForwardAnimation),setTimeout((function(){jQuery(me.oDefaults.sSelectorStage).removeClass(me.oDefaults.sClassNoAnimation),setTimeout((function(){jQuery(me.oDefaults.sSelectorStage).addClass(me.oDefaults.sClassNoAnimation),jQuery(me.oDefaults.sSelectorLayerStageImage).each((function(){$(this).is(t)?$(this).removeClass(me.oDefaults.sClassActive):$(this).addClass(me.oDefaults.sClassActive)})),jQuery(me.oDefaults.sSelectorStage).removeClass(me.oDefaults.sClassForwardAnimation),setTimeout((function(){jQuery(me.oDefaults.sSelectorStage).removeClass(me.oDefaults.sClassNoAnimation),jQuery(me.oDefaults.sSelectorStage).removeClass(me.oDefaults.sClassDuringAnimation)}),10)}),600)}),10))},me.handlePrevClick=function(e){var t;e.preventDefault(),jQuery(me.oDefaults.sSelectorStage).hasClass(me.oDefaults.sClassDuringAnimation)||(jQuery(me.oDefaults.sSelectorStage).addClass(me.oDefaults.sClassDuringAnimation),t=jQuery(me.oDefaults.sSelectorLayerStageImageActive),jQuery(me.oDefaults.sSelectorStage).addClass(me.oDefaults.sClassNoAnimation),jQuery(me.oDefaults.sSelectorStage).addClass(me.oDefaults.sClassBackwardAnimation),setTimeout((function(){jQuery(me.oDefaults.sSelectorStage).removeClass(me.oDefaults.sClassNoAnimation),setTimeout((function(){jQuery(me.oDefaults.sSelectorStage).addClass(me.oDefaults.sClassNoAnimation),jQuery(me.oDefaults.sSelectorLayerStageImage).each((function(){$(this).is(t)?$(this).removeClass(me.oDefaults.sClassActive):$(this).addClass(me.oDefaults.sClassActive)})),jQuery(me.oDefaults.sSelectorStage).removeClass(me.oDefaults.sClassBackwardAnimation),setTimeout((function(){jQuery(me.oDefaults.sSelectorStage).removeClass(me.oDefaults.sClassNoAnimation),jQuery(me.oDefaults.sSelectorStage).removeClass(me.oDefaults.sClassDuringAnimation)}),10)}),600)}),10))},me.activateSwipe=function(e){"touchstart"===e.type?me.swipeX=e.originalEvent.pageX:me.swipeX=e.pageX,jQuery(document).on("mousemove",me.swipe),jQuery(document).on("touchmove",me.swipe)},me.deactivateSwipe=function(){jQuery(document).off("mousemove",me.swipe),jQuery(document).off("touchmove",me.swipe)},me.swipe=function(e){var t;(t="touchmove"===e.type?e.originalEvent.pageX:e.pageX)>=me.swipeX+5?(me.deactivateSwipe(e),me.handlePrevClick(e)):t<=me.swipeX-5&&(me.deactivateSwipe(e),me.handleNextClick(e))},ge.initialize=function(e){me.eventBus=e,me.initialize()};var fe=".nm-wrapper-content .nm-area-content:first-child",pe=".nm-navigation-derivative-main-list",ye=".nm-navigation-derivative-sub-list",Se=".nm-layer .nm-navigation-derivative-sub-list",Ee="nm-navigation-hidden-item",Ce="nm-navigation-more-btn-show",De="nm-navigation-more-btn-order",we="nm-has-more-btn",be="#nm-basket-toggle",Le="#nm-navigation-toggle-btn",Ie="#nm-supportbar-toggle",Ae=".nm-supportbar-toggle-label",ke=".nm-supportbar-navigation",Me="#nm-matching-toggle",Pe=".nm-nav-wrap",_e="nm-nav-loaded",Te=768,xe={isStockCar:!1},je={__:xe};xe.showMoreButton=function(e,t){var n,a=e.find(t+" > li:first-child"),i=e.find(ye);a.length>0&&((n=e.find(t+" > li:last-child")).hasClass("nm-summary-mobile-link")&&(n=e.find(t+" > li:nth-last-child(2)")),(n.position().top>0||n.hasClass(Ee))&&n.find("a").is(":visible")?(a.addClass(Ce),a.removeClass(De),i.addClass(we),jQuery(e.find(t+" > li:not(.nm-navigation-hidden-item)").get()).each((function(){jQuery(this).find("a").length&&jQuery(this).find("a").position().top>0&&!jQuery(this).find("a").hasClass(Ce)&&jQuery(this).addClass(Ee)})),a.addClass(De)):(a.removeClass(Ce),i.removeClass(we))),jQuery(Pe).addClass(_e)},xe.setHiddenNavItems=function(e,t){e.find(t).length>0&&e.find(t+" > li").length>0&&(e.find(t+" > li").removeClass(Ee),jQuery(e.find(t+" > li").get().reverse()).each((function(){if(!(jQuery(this).find("a").length&&jQuery(this).find("a").position().top>0))return!1;jQuery(this).addClass(Ee)}))),xe.showMoreButton(e,t)},xe.initNavToggles=function(){var e,t;xe.legacyEventBus.on("change",be,xe.handleToggleChange),jQuery(Me).length&&xe.legacyEventBus.on("change",Me,xe.handleToggleChange),jQuery(Ie).length&&(xe.legacyEventBus.on("change",Ie,xe.handleToggleChange),jQuery(window).width()>Te&&!("ontouchstart"in window)&&!navigator.msMaxTouchPoints&&(e=jQuery(Ae),t=jQuery(ke),e.on("mouseover mouseout",xe.handleShoppingToolsHover),t.on("mouseover mouseout",xe.handleShoppingToolsHover))),xe.legacyEventBus.on("change",Le,xe.handleToggleChange)},xe.handleShoppingToolsHover=function(e){jQuery(Ie).prop("checked","mouseover"===e.type)},xe.handleToggleChange=function(e){const t=jQuery(".nm-basket"),n=t.length>0,a=jQuery(Me).length>0,i=jQuery(Ie).length>0;jQuery(e.target).is(be)&&n?(t.toggleClass("nm-basket-widget-is-open",jQuery(e.target).is(":checked")),jQuery("body").removeClass("nm-page-nav-is-open"),jQuery(Le).is(":checked")&&jQuery(Le).prop("checked",!1),i&&jQuery(Ie).is(":checked")&&jQuery(Ie).prop("checked",!1),a&&jQuery(Me).is(":checked")&&jQuery(Me).prop("checked",!1)):jQuery(e.target).is(Le)?(jQuery("body").toggleClass("nm-page-nav-is-open",jQuery(e.target).is(":checked")),n&&t.removeClass("nm-basket-widget-is-open"),jQuery(be).is(":checked")&&jQuery(be).prop("checked",!1),i&&jQuery(Ie).is(":checked")&&jQuery(Ie).prop("checked",!1),a&&jQuery(Me).is(":checked")&&jQuery(Me).prop("checked",!1)):jQuery(e.target).is(Ie)?(jQuery("body").removeClass("nm-page-nav-is-open"),n&&t.removeClass("nm-basket-widget-is-open"),jQuery(be).is(":checked")&&jQuery(be).prop("checked",!1),jQuery(Le).is(":checked")&&jQuery(Le).prop("checked",!1),a&&jQuery(Me).is(":checked")&&jQuery(Me).prop("checked",!1)):jQuery(e.target).is(Me)&&(jQuery("body").removeClass("nm-page-nav-is-open"),n&&t.toggleClass("nm-basket-widget-is-open",jQuery(e.target).is(":checked")),jQuery(be).is(":checked")&&jQuery(be).prop("checked",!1),jQuery(Le).is(":checked")&&jQuery(Le).prop("checked",!1),i&&jQuery(Ie).is(":checked")&&jQuery(Ie).prop("checked",!1))},xe.checkForMoreBtn=function(e){var t,n;xe.setHiddenNavItems(e,pe),t=e.find(".nm-nav-wrap").attr("data-mainnav"),n=pe+' > li > a[data-href="'+t+'"] ~ .nm-navigation-sub-wrap-outer .nm-navigation-derivative-sub-list',xe.setHiddenNavItems(e,n)},xe.checkForLayerMoreBtn=function(e){var t,n;xe.setHiddenNavItems(e,ye),t=e.find(".nm-nav-wrap").attr("data-mainnav"),n=pe+' > li > a[data-href="'+t+'"] ~ .nm-navigation-sub-wrap-outer .nm-navigation-derivative-sub-list',xe.setHiddenNavItems(e,n)},xe.handlerPageLoaded=function(e){xe.checkForMoreBtn(jQuery(e.domElement)),xe.initNavToggles()},xe.handlerLayerLoaded=function(){var e=jQuery(".nm-layer");xe.checkForLayerMoreBtn(e)},xe.initialize=function(){var e;xe.isStockCar=SETUPS.get("stockcar.context")&&"true"===SETUPS.get("stockcar.context").toString(),xe.isStockCar||(xe.checkForMoreBtn(jQuery(fe)),(e=jQuery(".nm-layer"))&&e.length>0&&xe.checkForLayerMoreBtn(jQuery(Se).parent()),xe.eventBus.on(d.appEvents.PAGE_LOADED,xe.handlerPageLoaded),xe.eventBus.on(d.appEvents.LAYER_LOADED,xe.handlerLayerLoaded),jQuery(window).on("resize",(function(){xe.checkForMoreBtn(jQuery(fe)),xe.checkForLayerMoreBtn(jQuery(Se).parent())})),jQuery(".nm-basket-navigation-item").on("click",(function(){setTimeout((function(){xe.checkForMoreBtn(jQuery(fe)),xe.checkForLayerMoreBtn(jQuery(Se).parent())}),20)})),xe.initNavToggles())},je.initialize=function(e){xe.eventBus=e,xe.legacyEventBus=jQuery("body"),xe.initialize()},i.stateRegistry.subscribeToStore("dbadPageStore",(function(e){window.dbadPageStore=e}));const Ne=[s,m,h,T,V,B,ge,Q,z,W,R,X,K,ae,je,le,oe,ue,ve,p,A],Ve=d.signal.getEmitter();Ne.forEach(e=>{try{e.initialize(Ve)}catch(e){console.error(e)}})},8:function(e,t){e.exports=i}})}));
//# sourceMappingURL=bundle.editorial.js.map