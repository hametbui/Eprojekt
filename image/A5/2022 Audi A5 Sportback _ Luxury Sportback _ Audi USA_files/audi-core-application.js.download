/*! @audi/audi-core-application 7.4.0 - Thu, 12 May 2022 12:09:44 GMT
License information can be found in audi-core-application.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("core-utils"),require("microkernel"),require("core-vendor")):"function"==typeof define&&define.amd?define("core-application",["core-utils","microkernel","core-vendor"],t):"object"==typeof exports?exports["core-application"]=t(require("core-utils"),require("microkernel"),require("core-vendor")):e["core-application"]=t(e["core-utils"],e.microkernel,e["core-vendor"])}(self,(function(e,t,n){return(()=>{var r={895:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},9120:(e,t,n)=>{var r=n(7960)("unscopables"),o=Array.prototype;null==o[r]&&n(4077)(o,r,{}),e.exports=function(e){o[r][e]=!0}},9267:(e,t,n)=>{"use strict";var r=n(4470)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},6515:(e,t,n)=>{var r=n(6208);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},7419:(e,t,n)=>{var r=n(4787),o=n(4710),a=n(2642);e.exports=function(e){return function(t,n,i){var s,l=r(t),c=o(l.length),u=a(i,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},314:(e,t,n)=>{var r=n(2399),o=n(7960)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},2399:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},1481:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},1330:(e,t,n)=>{var r=n(895);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},6182:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},7967:(e,t,n)=>{e.exports=!n(6966)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},7536:(e,t,n)=>{var r=n(6208),o=n(9851).document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},5216:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},4351:(e,t,n)=>{var r=n(9851),o=n(1481),a=n(4077),i=n(3573),s=n(1330),l=function(e,t,n){var c,u,d,p,h=e&l.F,f=e&l.G,m=e&l.S,g=e&l.P,y=e&l.B,E=f?r:m?r[t]||(r[t]={}):(r[t]||{}).prototype,L=f?o:o[t]||(o[t]={}),_=L.prototype||(L.prototype={});for(c in f&&(n=t),n)d=((u=!h&&E&&void 0!==E[c])?E:n)[c],p=y&&u?s(d,r):g&&"function"==typeof d?s(Function.call,d):d,E&&i(E,c,d,e&l.U),L[c]!=d&&a(L,c,p),g&&_[c]!=d&&(_[c]=d)};r.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},6966:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},2467:(e,t,n)=>{"use strict";n(6496);var r=n(3573),o=n(4077),a=n(6966),i=n(6182),s=n(7960),l=n(8295),c=s("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var p=s(e),h=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=h?!a((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[p](""),!t})):void 0;if(!h||!f||"replace"===e&&!u||"split"===e&&!d){var m=/./[p],g=n(i,p,""[e],(function(e,t,n,r,o){return t.exec===l?h&&!o?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),y=g[0],E=g[1];r(String.prototype,e,y),o(RegExp.prototype,p,2==t?function(e,t){return E.call(e,this,t)}:function(e){return E.call(e,this)})}}},2625:(e,t,n)=>{"use strict";var r=n(6515);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2994:(e,t,n)=>{e.exports=n(3901)("native-function-to-string",Function.toString)},9851:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},5395:e=>{var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},4077:(e,t,n)=>{var r=n(1848),o=n(7009);e.exports=n(7967)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},7639:(e,t,n)=>{var r=n(9851).document;e.exports=r&&r.documentElement},4270:(e,t,n)=>{e.exports=!n(7967)&&!n(6966)((function(){return 7!=Object.defineProperty(n(7536)("div"),"a",{get:function(){return 7}}).a}))},1890:(e,t,n)=>{var r=n(6208),o=n(67).set;e.exports=function(e,t,n){var a,i=t.constructor;return i!==n&&"function"==typeof i&&(a=i.prototype)!==n.prototype&&r(a)&&o&&o(e,a),e}},7001:(e,t,n)=>{var r=n(2399);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},6208:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},5059:(e,t,n)=>{var r=n(6208),o=n(2399),a=n(7960)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},6977:(e,t,n)=>{"use strict";var r=n(9191),o=n(7009),a=n(4564),i={};n(4077)(i,n(7960)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(i,{next:o(1,n)}),a(e,t+" Iterator")}},9792:(e,t,n)=>{"use strict";var r=n(177),o=n(4351),a=n(3573),i=n(4077),s=n(4902),l=n(6977),c=n(4564),u=n(3839),d=n(7960)("iterator"),p=!([].keys&&"next"in[].keys()),h="keys",f="values",m=function(){return this};e.exports=function(e,t,n,g,y,E,L){l(n,t,g);var _,S,v,O=function(e){if(!p&&e in R)return R[e];switch(e){case h:case f:return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",T=y==f,A=!1,R=e.prototype,b=R[d]||R["@@iterator"]||y&&R[y],w=b||O(y),P=y?T?O("entries"):w:void 0,D="Array"==t&&R.entries||b;if(D&&(v=u(D.call(new e)))!==Object.prototype&&v.next&&(c(v,C,!0),r||"function"==typeof v[d]||i(v,d,m)),T&&b&&b.name!==f&&(A=!0,w=function(){return b.call(this)}),r&&!L||!p&&!A&&R[d]||i(R,d,w),s[t]=w,s[C]=m,y)if(_={values:T?w:O(f),keys:E?w:O(h),entries:P},L)for(S in _)S in R||a(R,S,_[S]);else o(o.P+o.F*(p||A),t,_);return _}},1382:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},4902:e=>{e.exports={}},177:e=>{e.exports=!1},9191:(e,t,n)=>{var r=n(6515),o=n(4279),a=n(5216),i=n(7833)("IE_PROTO"),s=function(){},l=function(){var e,t=n(7536)("iframe"),r=a.length;for(t.style.display="none",n(7639).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[a[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[i]=e):n=l(),void 0===t?n:o(n,t)}},1848:(e,t,n)=>{var r=n(6515),o=n(4270),a=n(9604),i=Object.defineProperty;t.f=n(7967)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},4279:(e,t,n)=>{var r=n(1848),o=n(6515),a=n(4538);e.exports=n(7967)?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),s=i.length,l=0;s>l;)r.f(e,n=i[l++],t[n]);return e}},2651:(e,t,n)=>{var r=n(3750),o=n(7009),a=n(4787),i=n(9604),s=n(5395),l=n(4270),c=Object.getOwnPropertyDescriptor;t.f=n(7967)?c:function(e,t){if(e=a(e),t=i(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},6523:(e,t,n)=>{var r=n(5540),o=n(5216).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},3839:(e,t,n)=>{var r=n(5395),o=n(4325),a=n(7833)("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},5540:(e,t,n)=>{var r=n(5395),o=n(4787),a=n(7419)(!1),i=n(7833)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),l=0,c=[];for(n in s)n!=i&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~a(c,n)||c.push(n));return c}},4538:(e,t,n)=>{var r=n(5540),o=n(5216);e.exports=Object.keys||function(e){return r(e,o)}},3750:(e,t)=>{t.f={}.propertyIsEnumerable},7009:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},3573:(e,t,n)=>{var r=n(9851),o=n(4077),a=n(5395),i=n(7725)("src"),s=n(2994),l="toString",c=(""+s).split(l);n(1481).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var l="function"==typeof n;l&&(a(n,"name")||o(n,"name",t)),e[t]!==n&&(l&&(a(n,i)||o(n,i,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,l,(function(){return"function"==typeof this&&this[i]||s.call(this)}))},5146:(e,t,n)=>{"use strict";var r=n(314),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},8295:(e,t,n)=>{"use strict";var r,o,a=n(2625),i=RegExp.prototype.exec,s=String.prototype.replace,l=i,c=(r=/a/,o=/b*/g,i.call(r,"a"),i.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(e){var t,n,r,o,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",a.call(l))),c&&(t=l.lastIndex),r=i.call(l,e),c&&r&&(l.lastIndex=l.global?r.index+r[0].length:t),u&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=l},67:(e,t,n)=>{var r=n(6208),o=n(6515),a=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(1330)(Function.call,n(2651).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},6616:(e,t,n)=>{"use strict";var r=n(9851),o=n(1848),a=n(7967),i=n(7960)("species");e.exports=function(e){var t=r[e];a&&t&&!t[i]&&o.f(t,i,{configurable:!0,get:function(){return this}})}},4564:(e,t,n)=>{var r=n(1848).f,o=n(5395),a=n(7960)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},7833:(e,t,n)=>{var r=n(3901)("keys"),o=n(7725);e.exports=function(e){return r[e]||(r[e]=o(e))}},3901:(e,t,n)=>{var r=n(1481),o=n(9851),a="__core-js_shared__",i=o[a]||(o[a]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(177)?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},2783:(e,t,n)=>{var r=n(6515),o=n(895),a=n(7960)("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||null==(n=r(i)[a])?t:o(n)}},4470:(e,t,n)=>{var r=n(1105),o=n(6182);e.exports=function(e){return function(t,n){var a,i,s=String(o(t)),l=r(n),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===c||(i=s.charCodeAt(l+1))<56320||i>57343?e?s.charAt(l):a:e?s.slice(l,l+2):i-56320+(a-55296<<10)+65536}}},2642:(e,t,n)=>{var r=n(1105),o=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):a(e,t)}},1105:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},4787:(e,t,n)=>{var r=n(7001),o=n(6182);e.exports=function(e){return r(o(e))}},4710:(e,t,n)=>{var r=n(1105),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},4325:(e,t,n)=>{var r=n(6182);e.exports=function(e){return Object(r(e))}},9604:(e,t,n)=>{var r=n(6208);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},7725:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},7960:(e,t,n)=>{var r=n(3901)("wks"),o=n(7725),a=n(9851).Symbol,i="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=i&&a[e]||(i?a:o)("Symbol."+e))}).store=r},5417:(e,t,n)=>{"use strict";var r=n(9120),o=n(1382),a=n(4902),i=n(4787);e.exports=n(9792)(Array,"Array",(function(e,t){this._t=i(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},9625:(e,t,n)=>{var r=n(9851),o=n(1890),a=n(1848).f,i=n(6523).f,s=n(5059),l=n(2625),c=r.RegExp,u=c,d=c.prototype,p=/a/g,h=/a/g,f=new c(p)!==p;if(n(7967)&&(!f||n(6966)((function(){return h[n(7960)("match")]=!1,c(p)!=p||c(h)==h||"/a/i"!=c(p,"i")})))){c=function(e,t){var n=this instanceof c,r=s(e),a=void 0===t;return!n&&r&&e.constructor===c&&a?e:o(f?new u(r&&!a?e.source:e,t):u((r=e instanceof c)?e.source:e,r&&a?l.call(e):t),n?this:d,c)};for(var m=function(e){e in c||a(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},g=i(u),y=0;g.length>y;)m(g[y++]);d.constructor=c,c.prototype=d,n(3573)(r,"RegExp",c)}n(6616)("RegExp")},6496:(e,t,n)=>{"use strict";var r=n(8295);n(4351)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},1:(e,t,n)=>{"use strict";var r=n(6515),o=n(4710),a=n(9267),i=n(5146);n(2467)("match",1,(function(e,t,n,s){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var l=r(e),c=String(this);if(!l.global)return i(l,c);var u=l.unicode;l.lastIndex=0;for(var d,p=[],h=0;null!==(d=i(l,c));){var f=String(d[0]);p[h]=f,""===f&&(l.lastIndex=a(c,o(l.lastIndex),u)),h++}return 0===h?null:p}]}))},2076:(e,t,n)=>{"use strict";var r=n(6515),o=n(4325),a=n(4710),i=n(1105),s=n(9267),l=n(5146),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(2467)("replace",2,(function(e,t,n,f){return[function(r,o){var a=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,a,o):n.call(String(a),r,o)},function(e,t){var o=f(n,e,this,t);if(o.done)return o.value;var d=r(e),p=String(this),h="function"==typeof t;h||(t=String(t));var g=d.global;if(g){var y=d.unicode;d.lastIndex=0}for(var E=[];;){var L=l(d,p);if(null===L)break;if(E.push(L),!g)break;""===String(L[0])&&(d.lastIndex=s(p,a(d.lastIndex),y))}for(var _,S="",v=0,O=0;O<E.length;O++){L=E[O];for(var C=String(L[0]),T=c(u(i(L.index),p.length),0),A=[],R=1;R<L.length;R++)A.push(void 0===(_=L[R])?_:String(_));var b=L.groups;if(h){var w=[C].concat(A,T,p);void 0!==b&&w.push(b);var P=String(t.apply(void 0,w))}else P=m(C,p,T,A,b,t);T>=v&&(S+=p.slice(v,T)+P,v=T+C.length)}return S+p.slice(v)}];function m(e,t,r,a,i,s){var l=r+e.length,c=a.length,u=h;return void 0!==i&&(i=o(i),u=p),n.call(s,u,(function(n,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(l);case"<":s=i[o.slice(1,-1)];break;default:var u=+o;if(0===u)return n;if(u>c){var p=d(u/10);return 0===p?n:p<=c?void 0===a[p-1]?o.charAt(1):a[p-1]+o.charAt(1):n}s=a[u-1]}return void 0===s?"":s}))}}))},36:(e,t,n)=>{"use strict";var r=n(5059),o=n(6515),a=n(2783),i=n(9267),s=n(4710),l=n(5146),c=n(8295),u=n(6966),d=Math.min,p=[].push,h=4294967295,f=!u((function(){RegExp(h,"y")}));n(2467)("split",2,(function(e,t,n,u){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(o,e,t);for(var a,i,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,f=void 0===t?h:t>>>0,m=new RegExp(e.source,u+"g");(a=c.call(m,o))&&!((i=m.lastIndex)>d&&(l.push(o.slice(d,a.index)),a.length>1&&a.index<o.length&&p.apply(l,a.slice(1)),s=a[0].length,d=i,l.length>=f));)m.lastIndex===a.index&&m.lastIndex++;return d===o.length?!s&&m.test("")||l.push(""):l.push(o.slice(d)),l.length>f?l.slice(0,f):l}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var o=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,o,r):m.call(String(o),n,r)},function(e,t){var r=u(m,e,this,t,m!==n);if(r.done)return r.value;var c=o(e),p=String(this),g=a(c,RegExp),y=c.unicode,E=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(f?"y":"g"),L=new g(f?c:"^(?:"+c.source+")",E),_=void 0===t?h:t>>>0;if(0===_)return[];if(0===p.length)return null===l(L,p)?[p]:[];for(var S=0,v=0,O=[];v<p.length;){L.lastIndex=f?v:0;var C,T=l(L,f?p:p.slice(v));if(null===T||(C=d(s(L.lastIndex+(f?0:v)),p.length))===S)v=i(p,v,y);else{if(O.push(p.slice(S,v)),O.length===_)return O;for(var A=1;A<=T.length-1;A++)if(O.push(T[A]),O.length===_)return O;v=S=C}}return O.push(p.slice(S)),O}]}))},7305:(e,t,n)=>{for(var r=n(5417),o=n(4538),a=n(3573),i=n(9851),s=n(4077),l=n(4902),c=n(7960),u=c("iterator"),d=c("toStringTag"),p=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=o(h),m=0;m<f.length;m++){var g,y=f[m],E=h[y],L=i[y],_=L&&L.prototype;if(_&&(_[u]||s(_,u,p),_[d]||s(_,d,y),l[y]=p,E))for(g in r)_[g]||a(_,g,r[g],!0)}},8717:t=>{"use strict";t.exports=e},9164:e=>{"use strict";e.exports=n},2168:e=>{"use strict";e.exports=t}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";a.r(i),a.d(i,{FootnotesEngine:()=>m,ModalLayer:()=>v,ModalLayerContentBase:()=>T,ModalLayerWrapper:()=>P,appEvents:()=>t,cache:()=>k,clientLayer:()=>W,content:()=>Z,dynamicDot:()=>$,dynamicSmoothScroll:()=>s,layerAnimation:()=>x,layerApi:()=>M,layerCms:()=>ee,layerDom:()=>te,layerElement:()=>F,layerErrorTemplate:()=>K,layerTitle:()=>re,modalLayer:()=>O,modalLayerFootnoteEngineTemplate:()=>oe,pageDom:()=>ie,pageMain:()=>le,pagePreload:()=>ue,pageTitle:()=>pe,pageType:()=>fe,router:()=>H,routerState:()=>j,scroll:()=>ge,signal:()=>b,staticContent:()=>X});a(7305);var e=a(8717);const t={VERSION_LOAD_COMPLETE:"version.load.complete",CARINFO_LOAD_COMPLETE:"carinfo.load.complete",MODELSINFO_LOAD_COMPLETE:"modelsinfo.load.complete",APP_READY:"app.ready",APP_INITIALIZED:"app.initialized",AVE_AVAILABLE:"ave.available",AVE_STREAM_READY:"ave.stream.ready",CONFIG_RESET:"configuration.reset",CONFIG_UPDATE:"configuration.update",CONFIG_START:"configuration.start",CONFIG_PARSED:"configuration.parsed",CONFIG_ITEM_CLICKED:"configuration.item-clicked",DOM_UPDATED:"dom.updated",TRIGGER_DOM_UPDATE:"trigger.dom.update",CONFIG_ADOPT:"configuration.adopt-new",CONFIG_PDF:"configuration.pdf",CONFIG_SEND:"configuration.send",CONFIG_SAVED:"configuration.saved",CONFIG_CONFLICT_OPEN:"configuration.conflict-open",CONFIG_NON_CONFLICTING:"configuration.non-conflicting",CONFIG_CHANGEREQUEST_START:"configuration.change-request-start",CONFIG_CHANGEREQUEST_END:"configuration.change-request-end",CONFIG_CONFLICT_CHECK:"configuration.conflict-check",CONFLICT_CLOSE:"conflict.resolve",TRANSFER_CLOSE:"transfer.cancel",FORM_FINISHED:"form.finished",FORM_LOADED:"form.loaded",HASH_CHANGE:"hash.change",FORM_ERROR:"form.error",INTERSTITIAL_LAYER_CLOSE:"interstitial-layer.close",LAYER_OPEN:"layer.open",LAYER_CLOSE:"layer.close",LAYER_INSERTED:"layer.inserted",LAYER_LOADED:"layer.loaded",LAYER_STATIC_OPEN:"layer.static.open",LAYER_BEFORE_CLOSE_ALL:"layer.before.closeall",LAYER_BEFORE_CLOSE:"layer.before.close",LAYER_CLOSED:"layer.closed",EQUIPMENT_SEARCH_LAYER_LOADED:"equipmentSearchlayer.loaded",EQUIPMENT_SEARCH_LAYER_RESIZED:"equipmentSearchlayer.resized",RENDERINGLAYER_LOADED:"renderinglayer.loaded",RENDERINGLAYER_RESIZED:"renderinglayer.resized",STARTLAYER_OPEN:"startlayer.open",STARTLAYER_CLOSE:"startlayer.close",TRANSFERLAYER_CLOSED:"transferlayer.closed",SEARCH_OPEN:"search.nemo.open",SEARCH_CLOSE:"search.nemo.close",SEARCH_LOAD_AUDICODE:"search.load.audicode",SEARCH_LOADED:"search.loaded",MENUFLYOUT_OPEN:"menuflyout.open",MENUFLYOUT_CLOSE:"menuflyout.close",PAGE_NAV:"page.nav",PAGE_OPEN:"page.open",PAGE_LEAVE:"page.leave",PAGE_READY:"page.ready",PAGE_INSERTED:"page.inserted",PAGE_LOADED:"page.loaded",PAGE_ANIMATION_START:"page.animation.start",PAGE_ANIMATION_COMPLETE:"page.animation.complete",MEDIAGALLERY_CATEGORY_CHANGED:"mediagallery.category.changed",MEDIAGALLERY_ITEM_CHANGED:"mediagallery.item.changed",MEDIAGALLERY_RESIZED:"mediagallery.resized",MEDIAGALLERY_SLIDED:"mediagallery.slided",UPDATE_VIEW_STATE:"stage.updateViewState",STAGE_RENDERIMAGE_UPDATED:"stage.renderimage.updated",EXTERNAL_EDITOR:"configuration.external.nemo.configurator",ERROR:"nemo.error",NOTIFICATION:"nemo.notification",MYAUDI_LOGIN:"myaudi.login",MYAUDI_LOGOUT:"myaudi.logout",CONTENT_RESIZE:"content.resize",AUDICODE_DELETED:"audicode.deleted",AUDICODE_SUCCESS:"audicode.success",AUDICODE_FAILED:"audicode.failed",TEASER_ACTIVATED:"teaserActivated",TEASER_ALL_ACTIVATED:"allTeasersActivated",RESET_POSTERVIEW:"mss.reset.posterview",STOCKCAR_UPDATE:"stck.update",SC_UPDATE_VIEW:"sc:update:view",SC_UPDATE_VIEW_COUNTS:"sc:update:view:counts",SC_RESET_RESULT_COUNT:"sc:reset:result:counts",SC_UPDATE_VIEW_RANGE_FILTER:"sc:update:view:range:filter",SC_UPDATE_VIEW_FAVORITES:"sc:update:view:favorites",SC_DELETE_VIEW_FAVORITE:"sc:delete:view:favorite",SC_DELETE_OUTDATET_FAVORITE:"sc:delete:outdatet:favorite",SC_RESET_VIEW:"sc:reset:view",SC_UPDATE_LOCATION_VIEW:"sc:update:location:view",SC_ERROR_GPS:"sc:error:gps",SC_UPDATE_VEHICLES:"sc:increment:vehicles",SC_UPDATE_LOCATION_MODEL:"sc:update:location:model",SC_UPDATE_LOCATION_FILTER:"sc:update:location:filter",SC_UPDATE_FAVORITE_COUNT:"sc:update:favorite:count",SC_COMPARE_UPDATE:"sc:compare:update",SC_VERSION_LOADED:"sc:version:loaded",SC_DETAILS_RATE_UPDATE:"sc:details:updateRate",SC_ERROR:"sc:error",CONTENT_RENDERED:"content:rendered",DSH_ZOOM_CHANGE:"dsh:zoom.change",DSH_INPUT:"dsh:input"};a(2076);class n{static get FOOTNOTES_LIST_SELECTOR(){return".audi-footnotes-list"}static get FOOTNOTES_LAYER_PREFIX(){return"layer_footnote_"}static get FOOTNOTES_REFERENCE_SELECTOR(){return".audi-j-footnote-reference"}static get FOOTNOTES_ANCHOR_TEXT_SELECTOR(){return".audi-footnote-anchor__text"}static get FOOTNOTES_REFERENCE_DISABLED_SELECTOR(){return"audi-footnote-reference-disabled"}static get MODAL_INNER_SELECTOR(){return".modal-layer__inner"}static get MODAL_INNER_CONTENT_SELECTOR(){return".modal-layer__inner-content"}static get MODAL_LAYER_CONTENT_SELECTOR(){return".modal-layer__content"}static get LAYER_CONTENT_SELECTOR(){return".nm-layer-inner"}static createFootnoteContainer(){const e=document.createElement("div");return e.classList.add("audi-footnotes"),e.classList.add("audi-footnotes-wrapper"),e.setAttribute("data-module","footnotes"),e.innerHTML='<ul class="'+n.FOOTNOTES_LIST_SELECTOR.substr(1)+'"></ul>',e}static replaceTextWithFootnoteNumber(e,t){if(!e.dataset.fixedText){e.querySelector(n.FOOTNOTES_ANCHOR_TEXT_SELECTOR).innerHTML=t}}static extractFootnoteId(e=""){let t=e;const n=t.indexOf("#");return-1!==n&&(t=t.substr(n+1)),t}static removePrefixFromId(e=""){return e.replace(/^layer_footnote_/gi,"")}static setReferenceState(e,t){t?e.classList.remove(n.FOOTNOTES_REFERENCE_DISABLED_SELECTOR):e.classList.add(n.FOOTNOTES_REFERENCE_DISABLED_SELECTOR)}}class r{static renderFootnotes(e=[],t){const n=t;if(!n)return;n.innerHTML="";const o=document.createDocumentFragment();e.forEach((e=>{o.appendChild(e)})),n.appendChild(o),r._dispatchRenderedEvent(n)}static _dispatchRenderedEvent(e){document.dispatchEvent(new CustomEvent("FOOTNOTES_RENDERED",{detail:{context:e}}))}}const o=r;class s{static get MODAL_INNER_SELECTOR(){return".modal-layer__inner"}static get MODAL_LAYER_SELECTOR(){return".modal-layer"}static get LAYER_WRAPPER_SELECTOR(){return".nm-layer-wrapper"}static get LAYER_CONTENT_SELECTOR(){return".nm-layer-inner"}static get AVERAGE_PAGE_SIZE(){return 4e3}static get AVERAGE_SIZE_SCROLL_DURATION(){return 660}static scroll(e,t,n){let r=null,o=0,a=e.getBoundingClientRect().top,i=a>=n;const s=this.calculateAnimationDuration(n,a),l=c=>{r||(r=c||(new Date).getTime());let u=(c-r)/s,d=this.getRequiredOffset();if(u>1)return cancelAnimationFrame(r),void t.scrollTo(0,a-d);let p=Math.abs(this.easeOutQuad(u)).toFixed(2),h=this.calculateScrollDestination(e);h!==a&&(a=h),o=i?n+a*p:a+(n-a)*(1-p),t.scrollTo(0,o),i&&(0!==a&&o>=a-d||0===a&&o<0||h-n<=300)||!i&&o<a+d?(cancelAnimationFrame(r),o=0,t.scrollTo(0,a-d)):window.requestAnimationFrame(l)};window.requestAnimationFrame(l)}static getRequiredOffset(){let e=120+this.getStickyNavigationOffset()+this.getStickyAnchorNavigationOffset();return 120!==e&&(e+=30),e}static getStickyNavigationOffset(){let e=0;if(this.getScrollContext()===document.body&&document.body.classList.contains("nm-nav-fixed")){const t=document.querySelector(".nm-nav-wrap");if(t&&(e=t.clientHeight),document.body.classList.contains("nm-has-current-consumption")){const t=document.querySelector(".nm-module-current-consumption");t&&(e+=t.clientHeight)}}return e}static getStickyAnchorNavigationOffset(){const e=document.querySelector(".nm-anchor-navigation-list");let t=0;if(this.getScrollContext()===document.body&&e){"true"===e.getAttribute("is-sticky")&&(t=e.clientHeight)}return t}static easeOutQuad(e){return e*(2-e)}static calculateAnimationDuration(e,t){const n=Math.abs(t-e);return s.AVERAGE_SIZE_SCROLL_DURATION/s.AVERAGE_PAGE_SIZE*n}static calculateScrollDestination(e){const t=this.getScrollContext(),n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=t===document.body?0:t.scrollTop;return r.top-n.top+o}static getScrollContext(){return document.querySelector(this.MODAL_INNER_SELECTOR)?document.querySelector(this.MODAL_LAYER_SELECTOR):document.querySelector(this.LAYER_CONTENT_SELECTOR)?document.querySelector(this.LAYER_WRAPPER_SELECTOR):document.body}}class l{constructor(){this._addEvents()}_addEvents(){this._handleFootnoteReferenceClick=this._handleFootnoteReferenceClick.bind(this),e.dom.getEventDelegate("body").on("click",n.FOOTNOTES_REFERENCE_SELECTOR,this._handleFootnoteReferenceClick)}_handleFootnoteReferenceClick(e){e.preventDefault();const t=e.target.closest(n.FOOTNOTES_REFERENCE_SELECTOR),r=this._getFootnoteByReference(t);if(r){const t=s.getScrollContext(),n=t===document.body?window:t,o=t===document.body?e.pageY:e.pageY+t.scrollTop;s.scroll(r,n,o)}}_getFootnoteByReference(e){if(e&&e.getAttribute("href"))return s.getScrollContext().querySelector(e.getAttribute("href"))}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=a(2168);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const h=function(e={},t={}){return p(p({},e),t)};class f{static get ACTIONS(){return{UPDATE_FOOTNOTES:"updateFootnotes"}}static addFootnotesStore(){u.stateRegistry.addStore("dbadFootnotesStore",{},{updateFootnotes:h})}}class m{static get defaults(){return{FOOTNOTES_WRAPPER_SELECTOR:".audi-footnotes-wrapper"}}constructor(){this.footnotesSmoothscroll=new l,this._bindEventHandler(),this._addEvents(),f.addFootnotesStore(),u.stateRegistry.subscribeToStore("dbadFootnotesStore",this._handleStoreUpdate)}_bindEventHandler(){this._handleStoreUpdate=this._handleStoreUpdate.bind(this),this._handleContentUpdate=this._handleContentUpdate.bind(this),this._handleFootnotesUpdate=e.dom.debounce(this._handleFootnotesUpdate,250)}_addEvents(){document.addEventListener("PAGE_READY",this._handleContentUpdate),document.addEventListener("LAYER_LOADED",this._handleContentUpdate),document.addEventListener(t.CONTENT_RENDERED,this._handleContentUpdate)}_handleStoreUpdate(e={}){this.footnotesInStore=e,Object.keys(this.footnotesInStore).length&&this._handleFootnotesUpdate()}async _handleContentUpdate(n){let r=this._handleContentUpdateDefaultCondition;"LAYER_LOADED"!==n.type&&n.type!==t.CONTENT_RENDERED||(document.querySelector(".modal-layer--open")?r=this._handleContentUpdateModalLayerCondition:document.querySelector(".nm-layer-opened")&&(r=this._handleContentUpdateDefaultLayerCondition));try{await e.polling.wait(r,1e3),this._handleFootnotesUpdate()}catch(e){console.warn("could not handle footnote content",e)}}_handleContentUpdateDefaultCondition(){return!0}_handleContentUpdateModalLayerCondition(){return!!document.querySelector(n.MODAL_INNER_SELECTOR)}_handleContentUpdateDefaultLayerCondition(){return!!document.querySelector(n.LAYER_CONTENT_SELECTOR)}_handleFootnotesUpdate(){const e=s.getScrollContext(),t=this._isContextOfTypeLayer(e),n=[...this._findFootnoteReferences(e)];if(n.length>0){const r=this._prepareFootnotesForRendering(n,e,t);this._processFootnoteReferences(n,r,t)}else this._removeFootnoteWrapper(e)}_findFootnoteReferences(e){return e.querySelectorAll(n.FOOTNOTES_REFERENCE_SELECTOR)}_prepareFootnotesForRendering(e=[],t,n=!1){const r=this._collectFootnoteIdsFromReferences(e),a=this._getFootnoteWrapper(t);if(r.length>0){const e=this._getFootnotesByIdFromStore(r,n);o.renderFootnotes(e,a)}return r}_processFootnoteReferences(e=[],t=[],r=!1){e.forEach((e=>{r&&this._addPrefixToReferenceForLayer(e);const o=n.extractFootnoteId(e.getAttribute("href"));let a=t.indexOf(n.removePrefixFromId(o));-1===a&&(a=t.indexOf(n.FOOTNOTES_LAYER_PREFIX+o));const i=-1!==a;n.setReferenceState(e,i),n.replaceTextWithFootnoteNumber(e,a+1)}))}_collectFootnoteIdsFromReferences(e=[]){let t=[];return e.forEach((e=>{const r=n.removePrefixFromId(n.extractFootnoteId(e.getAttribute("href")));-1===t.indexOf(r)&&this._isValidFootnoteReference(r)&&t.push(r)})),t}_isValidFootnoteReference(e){const t=n.removePrefixFromId(e);return!!this.footnotesInStore[t]}_getFootnoteWrapper(e){let t=e;if(!this._hasContextFootnoteWrapper(e)){const e=n.createFootnoteContainer();t.querySelector(n.MODAL_INNER_SELECTOR)?t=t.querySelector(n.MODAL_LAYER_CONTENT_SELECTOR):t.querySelector(n.LAYER_CONTENT_SELECTOR)?t=t.querySelector(n.LAYER_CONTENT_SELECTOR):t.querySelector(".nm-footer")&&(t=t.querySelector(".nm-footer")),t.appendChild(e)}return t.querySelector(m.defaults.FOOTNOTES_WRAPPER_SELECTOR+" "+n.FOOTNOTES_LIST_SELECTOR)}_hasContextFootnoteWrapper(e){return!!e.querySelector(m.defaults.FOOTNOTES_WRAPPER_SELECTOR)}_removeFootnoteWrapper(e){if(this._hasContextFootnoteWrapper(e)){const t=e.querySelector(m.defaults.FOOTNOTES_WRAPPER_SELECTOR);t.parentElement.removeChild(t)}}_isContextOfTypeLayer(e){const t=e;return!(!t.querySelector(n.MODAL_INNER_SELECTOR)&&!t.querySelector(n.LAYER_CONTENT_SELECTOR))}_getFootnotesByIdFromStore(e=[],t=!1){let r=new Map,o=1;return e.forEach((e=>{const a=n.removePrefixFromId(e);if(this.footnotesInStore[a]){const e=this.footnotesInStore[a],i=document.createElement("div");i.innerHTML=e,i.querySelector(n.FOOTNOTES_ANCHOR_TEXT_SELECTOR).innerHTML=o,t?(i.firstChild.setAttribute("id",n.FOOTNOTES_LAYER_PREFIX+a),r.set(n.FOOTNOTES_LAYER_PREFIX+a,i.firstChild)):r.set(a,i.firstChild),o++}})),[...r.values()]}_addPrefixToReferenceForLayer(e){const t=e.getAttribute("href"),r=n.extractFootnoteId(t),o=n.removePrefixFromId(r),a=n.FOOTNOTES_LAYER_PREFIX+o;e.setAttribute("href","#"+a)}}function g(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(g.prototype,HTMLElement.prototype),Object.setPrototypeOf(g,HTMLElement);class y extends g{constructor(){super(),window.footnotesEngine||(window.footnotesEngine=new m),this.footnoteItems=null}connectedCallback(){const e=this.querySelector(".audi-footnotes-list");(e||e.children.length>0)&&(this.footnoteItems=this._parseFootnotesMarkup(e.children)),this.parentElement.removeChild(this)}disconnectedCallback(){this.footnoteItems&&u.stateRegistry.triggerAction("dbadFootnotesStore",f.ACTIONS.UPDATE_FOOTNOTES,this.footnoteItems)}_parseFootnotesMarkup(e=[]){let t={};return[...e].forEach((e=>{const n=e.getAttribute("id"),r=e.outerHTML;t[n]=r})),t}}void 0===window.customElements.get("audi-footnotes")&&window.customElements.define("audi-footnotes",y);a(36);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(_.prototype,HTMLElement.prototype),Object.setPrototypeOf(_,HTMLElement);class S extends _{constructor(){super(),this._addPageStore()}connectedCallback(){this._handlePageUpdate=this._handlePageUpdate.bind(this),this._handleLayerUpdate=this._handleLayerUpdate.bind(this),document.addEventListener("PAGE_READY",this._handlePageUpdate),document.addEventListener("LAYER_LOADED",this._handleLayerUpdate),document.addEventListener("LAYER_CLOSED",this._handleLayerUpdate),this._handlePageUpdate()}_addPageStore(){const e=this;u.stateRegistry.addStore("dbadPageStore",{baseURL:window.location.origin,currentURL:window.location.href,isLayer:this._isLayer(),language:this._getLanguage(window.location.href,window.location.pathname),market:this._getMarket(window.location.href,window.location.pathname),pageName:document.title,pageTemplate:this._getPageTemplate(),pageType:this._getPageType(),referringURL:document.referrer||"",scopes:this._getScopes()},{updateLayerState:function(t){return L(L({},t),{},{currentURL:window.location.href,isLayer:e._isLayer(),pageName:document.title})},updatePageState:function(t,n){return L(L({},t),{},{currentURL:window.location.href,isLayer:e._isLayer(),pageName:document.title,pageTemplate:n.pageTemplate,pageType:n.pageType})}})}_getScopes(){const e=document.querySelector(".nm-activated-scopes");return e?e.dataset.scopes:""}_handlePageUpdate(){u.stateRegistry.triggerAction("dbadPageStore","updatePageState",{currentURL:window.location.href,isLayer:this._isLayer(),pageName:document.title,pageTemplate:this._getPageTemplate(),pageType:this._getPageType()})}_handleLayerUpdate(){u.stateRegistry.triggerAction("dbadPageStore","updateLayerState",{currentURL:window.location.href,isLayer:this._isLayer(),pageName:document.title})}_getPageTemplate(){return SETUPS&&SETUPS.get("page.template")||""}_getPageType(){return document.body.getAttribute("page-type")||"default"}_isLayer(){return!!this._hasSubString(window.location.href,"jslayer=")||(!!this._hasSubString(window.location.href,"layer=")||(!!document.body.classList.contains("modal-layer--open")||!!document.querySelector(".nm-layer-conflict.nm-layer-visible")))}_getMarket(e,t){let n="";return this._hasLocalMarket()?n=this._getLocalMarket():this._getMarketFromPageID(e,t)&&(n=this._getMarketFromPageID(e,t)),n.toUpperCase()}_hasLocalMarket(){return this._hasSetupsValue("LocaleCountry")||this._hasSetupsValue("nemo.locale.country")}_getLocalMarket(){let e="";return this._hasSetupsValue("LocaleCountry")?e=this._getSetupsValue("LocaleCountry"):this._hasSetupsValue("nemo.locale.country")&&(e=this._getSetupsValue("nemo.locale.country")),e}_getMarketFromPageID(e,t){let n="",r=this._getPageID(e,t).split("/");return r&&r[1]&&(n=r[1]),n}_getLanguage(e,t){let n="";return n=this._hasLocalLanguage()?this._getLocalLanguage():this._getLanguageFromPageID(e,t),n.toLowerCase()}_hasLocalLanguage(){return this._hasSetupsValue("LocaleLanguage")||this._hasSetupsValue("nemo.locale.language")}_getLocalLanguage(){let e="";return this._hasSetupsValue("LocaleLanguage")?e=this._getSetupsValue("LocaleLanguage"):this._hasSetupsValue("nemo.locale.language")&&(e=this._getSetupsValue("nemo.locale.language")),e}_getLanguageFromPageID(e,t){let n="",r=this._getPageID(e,t).split("/");return r&&r[3]&&(n=r[3]),n.toLowerCase()}_getPageID(e,t){let n=t;return this._hasSubString(e,"jslayer=")?n=this._getPageIdForJsLayer(n,e):this._hasSubString(e,"layer=")?n=this._getSubStringByMarker(e,"layer="):this._hasSubString(e,"page=")&&(n=this._getSubStringByMarker(e,"page=")),n=this._removeTrailingHtmlExtension(n),n}_getPageIdForJsLayer(e,t){let n=this._getSubStringByMarker(t,"jslayer="),r=e;return this._hasSubString(t,"page=")&&(r=this._getSubStringByMarker(t,"page=")),r=this._removeTrailingHtmlExtension(r),r+"/"+n}_hasSetupsValue(e){let t=!1;return SETUPS&&SETUPS.get(e)&&""!==SETUPS.get(e)&&(t=!0),t}_getSetupsValue(e){let t="";return SETUPS&&SETUPS.get(e)&&""!==SETUPS.get(e)&&(t=SETUPS.get(e)),t}_hasSubString(e,t){return-1!==e.indexOf(t)}_getSubStringByMarker(e,t){return this._hasSubString(e,t)?e.substr(e.indexOf(t)+t.length):""}_removeTrailingHtmlExtension(e){let t=e;return t.indexOf(".html")>0&&(t=t.substr(0,t.indexOf(".html"))),t}}void 0===window.customElements.get("audi-page-store")&&window.customElements.define("audi-page-store",S);class v{constructor(){this._registerdLayers=new Map,this._registeredLayers=new Map}static get MODAL_LAYER_OPEN_EVENT(){return"modalLayer:open"}static get MODAL_LAYER_CLOSE_EVENT(){return"modalLayer:close"}async getLayerContent(e){const t=this._registerdLayers.get(e.layerType),n=this._registeredLayers.get(e.layerType);let r;if(t)r=await t.getContent(e);else{if(!n)throw new Error("modal layer content not found.");r=await n.getContent(e)}return r}registerLayerType(e){this._registerdLayers.set(e.type,e)}registerModalLayer(e,t){this._registeredLayers.set(e,t)}unregisterLayerType(e){this._registerdLayers.delete(e)}unregisterModalLayer(e){this._registeredLayers.delete(e)}}if(!document.querySelector(".modal-layer")){let e=document.createElement("modal-layer-wrapper");document.body.appendChild(e)}const O=new v;function C(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(C.prototype,HTMLElement.prototype),Object.setPrototypeOf(C,HTMLElement);class T extends C{constructor(){super()}static async getContent(){throw new Error("get content method has to be overridden from layer content element!")}static get type(){return"ModalLayerContentBase"}async beforeOpen(){return!0}async beforeClose(){return!0}async _triggerOpen(e=!1){try{const t=this.closest("modal-layer-wrapper");await t.open(this,e)}catch(e){throw console.warn("_triggerOpen - modal layer wrapper missing."),e}}async _triggerClose(e=!1){try{const t=this.closest("modal-layer-wrapper");await t.close(this,e)}catch(e){throw console.warn("_triggerClose - modal layer wrapper missing."),e}}}void 0===window.customElements.get("modal-layer-content-base")&&window.customElements.define("modal-layer-content-base",T);var A=a(9164);const R={},b={__:R};function w(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}R.defaultConfig={maxListeners:0,newListener:!1,wildcard:!0},A.eventEmitter.prototype.one=A.eventEmitter.prototype.once,A.eventEmitter.prototype.trigger=A.eventEmitter.prototype.emit,R.defaultEmitter=new A.eventEmitter(R.defaultConfig),R.defaultEmitter.trigger=function(){R.defaultEmitter.emit.apply(this,arguments)},R.emitters={default:R.defaultEmitter},b.getEmitter=function(e){return void 0===e?R.emitters.default:(R.emitters[e]=R.emitters[e]||new A.eventEmitter(R.defaultConfig),R.emitters[e])},Object.setPrototypeOf(w.prototype,HTMLElement.prototype),Object.setPrototypeOf(w,HTMLElement);class P extends w{constructor(){super(),this.layerStack=[],this._bindContextToFunctions()}static get defaults(){return{attributeState:"data-layer-active",centerVertically:"modal-layer--centered",close:"modal-layer--close",contentWrapper:".modal-layer__content",contentWrapperClassName:"modal-layer__content",contentWrapperHide:"modal-layer__content--hide",contentWrapperShow:"modal-layer__content--show",hidden:"sc-hidden",modalLayer:".modal-layer",modalLayerLink:".js-modal-layer-link",modalLayerNoTransition:"modal-layer--no-transition",modalLayerOptions:".modal-layer__inner [data-layer-options]",open:"modal-layer--open",shader:".modal-layer__shader-click-area"}}static get defaultOptions(){return{addCssClass:"",centerVertically:!1,onEscClick:!0,onShaderClick:!0}}connectedCallback(){this.eventDelegate=e.dom.getEventDelegate("body"),this.globalEventEmitter=b.getEmitter(),this._setElementDomProperties(),this._addEvents()}disconnectedCallback(){this._removeEvents()}_setElementDomProperties(){this.classList.add("modal-layer"),this.setAttribute("data-layer-active","false"),this.setAttribute("data-module","modal-layer"),this.contentWrapper=document.createElement("div"),this.contentWrapper.classList.add("modal-layer__content"),this.shader=document.createElement("div"),this.shader.classList.add("modal-layer__shader-click-area"),this.appendChild(this.shader),this.appendChild(this.contentWrapper),this.modalLayer=document.querySelector(P.defaults.modalLayer),this.contentWrapper=this.modalLayer.querySelector(P.defaults.contentWrapper),this.shader=this.modalLayer.querySelector(P.defaults.shader)}_bindContextToFunctions(){this._handleShaderClick=this._handleShaderClick.bind(this),this._handleModalLayerLinkClick=this._handleModalLayerLinkClick.bind(this),this._handleModalLayerEvents=this._handleModalLayerEvents.bind(this),this._handleEscClick=this._handleEscClick.bind(this),this._isLayerOpen=this._isLayerOpen.bind(this)}_addEvents(){document.addEventListener(v.MODAL_LAYER_OPEN_EVENT,this._handleModalLayerEvents),document.addEventListener(v.MODAL_LAYER_CLOSE_EVENT,this._handleModalLayerEvents),this.globalEventEmitter.on(t.SC_ERROR,this._handleModalLayerEvents),this.globalEventEmitter.on(v.MODAL_LAYER_OPEN_EVENT,this._handleModalLayerEvents),this.globalEventEmitter.on(v.MODAL_LAYER_CLOSE_EVENT,this._handleModalLayerEvents),this.eventDelegate.on("click",P.defaults.modalLayerLink,this._handleModalLayerLinkClick)}_removeEvents(){document.removeEventListener(v.MODAL_LAYER_OPEN_EVENT,this._handleModalLayerEvents),document.removeEventListener(v.MODAL_LAYER_CLOSE_EVENT,this._handleModalLayerEvents),this.globalEventEmitter.off(t.SC_ERROR,this._handleModalLayerEvents),this.globalEventEmitter.off(v.MODAL_LAYER_OPEN_EVENT,this._handleModalLayerEvents),this.globalEventEmitter.off(v.MODAL_LAYER_CLOSE_EVENT,this._handleModalLayerEvents),this.eventDelegate.off("click",P.defaults.modalLayerLink,this._handleModalLayerLinkClick)}_addLayerEvents(){this.shader.addEventListener("click",this._handleShaderClick),this.eventDelegate.on("keydown","body",this._handleEscClick)}_removeLayerEvents(){this.shader.removeEventListener("click",this._handleShaderClick),this.eventDelegate.off("keydown","body",this._handleEscClick)}async _handleModalLayerLinkClick(e){this.options=null,e.preventDefault();const t=e.target.closest(P.defaults.modalLayerLink),n=Object.assign({},t.dataset);n.targetElement=t;const r=await O.getLayerContent(n);this._openLayerContent(r)}async _handleModalLayerEvents(e){let t=e;if(this.options=null,e.detail&&(t=e.detail),t&&t.layerAction&&"close"===t.layerAction)this._closeLayer();else{t&&t.options&&(this.options=t.options);const e=await O.getLayerContent(t);this._openLayerContent(e)}}_handleShaderClick(){this._adjustOption("onShaderClick")&&this._closeLayer()}_handleEscClick(e){document.body.classList.contains(P.defaults.open)&&27===e.keyCode&&this._adjustOption("onEscClick")&&this._closeLayer()}_adjustOption(t){let n=e.dom.getElement(P.defaults.modalLayerOptions),r=Object.keys(n.dataset).length>0?n.dataset.layerOptions:"{}";return n=Object.assign(P.defaultOptions,JSON.parse(r)),this.options&&(n=Object.assign(P.defaultOptions,this.options)),n[t]}async _openLayerContent(e){this._isLayerOpen()?this.layerStack.push(e):(await this._hideLayerContent(this._isLayerOpen()),this._clearLayerWrapper(),this.contentWrapper.appendChild(e),this._openLayer())}_clearLayerWrapper(){this.contentWrapper.innerHTML="",this.contentWrapper.className=P.defaults.contentWrapperClassName}async close(e,t){await e.beforeClose(),this._closeLayer(t)}_closeLayer(e){e&&this.modalLayer.classList.add(P.defaults.modalLayerNoTransition),this.modalLayer.setAttribute(P.defaults.attributeState,"false"),document.body.classList.remove(P.defaults.open),this._removeLayerEvents(),this._clearLayerWrapper(),setTimeout((()=>{this.modalLayer.classList.remove(P.defaults.modalLayerNoTransition),this.modalLayer.classList.remove(P.defaults.centerVertically),this._dispatchCustomEvent("LAYER_CLOSED");const e=this.layerStack.shift();e&&this._openLayerContent(e)}),250)}async open(e,t){await e.beforeOpen(),this._openLayer(t)}_openLayer(e){e&&this.modalLayer.classList.add(P.defaults.modalLayerNoTransition),this.modalLayer.setAttribute(P.defaults.attributeState,"true"),document.body.classList.add(P.defaults.open);this._adjustOption("centerVertically")&&this.modalLayer.classList.add(P.defaults.centerVertically),this._showLayerContent();const t=this.querySelector(P.defaults.contentWrapper),n=this._adjustOption("addCssClass");t&&n&&t.classList.add(n),this._addLayerEvents(),setTimeout((()=>{this.modalLayer.classList.remove(P.defaults.modalLayerNoTransition),this._dispatchCustomEvent("LAYER_LOADED",{element:this,type:"modal_layer"})}),250)}_isLayerOpen(){return document.body.classList.contains(P.defaults.open)}async _hideLayerContent(e){return e?(this.contentWrapper.classList.add(P.defaults.contentWrapperHide),this.contentWrapper.classList.remove(P.defaults.contentWrapperShow),new Promise((e=>{setTimeout((()=>{e("opacity on content wrapper was set.")}),250)}))):Promise.resolve()}_showLayerContent(){this.contentWrapper.classList.add(P.defaults.contentWrapperShow),this.contentWrapper.classList.remove(P.defaults.contentWrapperHide)}_dispatchCustomEvent(e,t){try{let n=new CustomEvent(e,{detail:t});document.dispatchEvent(n)}catch(t){console.error("dispatchCustomEvent: ","the custom-event for "+e+" could not be dispatched",t)}}}void 0===window.customElements.get("modal-layer-wrapper")&&window.customElements.define("modal-layer-wrapper",P);const D={},k={__:D};D.oDefaults={sType:"sessionStorage"},D.normalizeOptions=function(e){let t=e||{};return"object"!=typeof t||t.type||(t.type=D.oDefaults.sType),{failsafeSet:!!t.failsafeSet,sType:"string"==typeof t?t:t.type}},D.read=function(e,t,n){const r=D.normalizeOptions(n).sType,o=JSON.parse(window[r].getItem(e));return o?o[t]:null},D.write=function(e,t,n,r){const o=D.normalizeOptions(r),a=o.sType;try{let r=window[a].getItem(e);return r=null===r?{}:JSON.parse(r),r[t]=n,r=JSON.stringify(r),window[a].setItem(e,r),!0}catch(r){return!!o.failsafeSet&&(o.failsafeSet=!1,D.write(e,t,n,o))}},D.clear=function(e,t){const n=D.normalizeOptions(t).sType;window[n].removeItem(e)},D.length=function(e,t){const n=D.normalizeOptions(t).sType,r=JSON.parse(window[n].getItem(e));let o=0;if(Object.keys&&r)o=Object.keys(r).length;else for(let e in r)r.hasOwnProperty(e)&&(o+=1);return o},k.getItem=function(e,t,n){let r=encodeURIComponent(t);return D.read(e,r,n)},k.setItem=function(e,t,n,r){let o=encodeURIComponent(t);return D.write(e,o,n,r)},k.removeItem=function(e,t,n){let r=encodeURIComponent(t);D.write(e,r,null,n)},k.clear=D.clear,k.length=D.length;const I={},x={__:I};I.oDefaults={classBodyLayerOpened:"nm-layer-opened",classHidden:"nm-hidden",classLayerShaderVisible:"nm-layer-shader-visible",classLayerVisible:"nm-layer-visible",selectorLayer:".nm-layer"},I.scrollPosition=0,x.showShader=function(){return new Promise((function(e){document.body.classList.add(I.oDefaults.classBodyLayerOpened),I.wait(20).then((function(){I.shader||I.initialize(),I.shader&&(I.shader.classList.remove(I.oDefaults.classHidden),I.shader.classList.add(I.oDefaults.classLayerShaderVisible))})).then((function(){I.wait(280).then(e)}))}))},I.wait=function(e){return new Promise((function(t){setTimeout(t,e)}))},x.hideShader=function(){return new Promise((function(e){document.body.classList.remove(I.oDefaults.classBodyLayerOpened),I.shader.classList.remove(I.oDefaults.classLayerShaderVisible),I.shader.classList.add(I.oDefaults.classHidden),e(I.shader)}))},I.findCurrentLayerOfType=function(t){const n=e.dom.getElement(I.oDefaults.selectorLayer+'[data-layer-type="'+t+'"]');return e.dom.closest(n,".nm-layer-wrapper")},x.open=function(t,n){let r,o;return t&&n?(r=document.body.appendChild(t),o=e.dom.isElement(I.oDefaults.selectorLayer)?x.showShader().then((function(){return I.openLayer(r,n)})):I.openLayer(r,n)):o=Promise.reject(new TypeError('"element"')),o},I.openLayer=function(t,n){return new Promise((function(r){r(n),I.wait(20).then((function(){const r=e.dom.getElement(I.oDefaults.selectorLayer,t);r.classList.add(I.oDefaults.classLayerVisible),r.setAttribute("data-layer-type",n.type)})),I.wait(530).then((function(){document.body.classList.add("nm-"+n.type+"-layer-opened")}))}))},x.close=function(t,n){let r,o;return t&&n?(r=e.dom.getElement(I.oDefaults.selectorLayer,t),e.dom.isElement(r)&&(r.classList.remove(I.oDefaults.classLayerVisible),r.removeAttribute("data-layer-type")),o=I.wait(500).then((function(){return e.dom.isElement(t)?(e.dom.removeElement(t),document.body.classList.remove("nm-"+n.type+"-layer-opened"),Promise.resolve(n)):Promise.reject("element to be removed is missing!!!")}))):o=Promise.reject(new TypeError('"element"')),o},x.toggleShader=function(){I.isShaderNotNeeded()?x.hideShader():console.info("Shader remains visible")},I.isShaderNotNeeded=function(){return 0===I.getVisibleLayers().length},I.isLastVisibleLayer=function(){return 1===I.getVisibleLayers().length},I.getVisibleLayers=function(){return e.dom.getElementsArray(I.oDefaults.selectorLayer+"."+I.oDefaults.classLayerVisible)},x.replace=function(t,n){let r,o,a,i;return i=t&&n?new Promise((function(i,s){r=n.type,o=I.findCurrentLayerOfType(r),e.dom.isElement(o)?(o.classList.remove(I.oDefaults.classLayerVisible),a=document.body.appendChild(t),I.wait(500).then((function(){const t=e.dom.getElement(I.oDefaults.selectorLayer,a);t.classList.add(I.oDefaults.classLayerVisible),t.setAttribute("data-layer-type",n.type)})),document.body.classList.add("nm-"+n.type+"-layer-opened"),I.wait(530).then((function(){document.body.removeChild(o),i(n)}))):s(new TypeError("noLayer of type "+n.type))})):Promise.reject(new TypeError('"element"')),i},I.initialize=function(){e.dom.isElement(".nm-layer-shader")||(document.body.insertAdjacentHTML("beforeend",'<div class="nm-layer-shader nm-hidden"></div>'),I.shader=e.dom.getElement(".nm-layer-shader"))},I.initialize();const N={},F={__:N};N.BASE_CLASS="nm-layer-wrapper",N.loadedScripts=[],F.create=function(e){let t,n;return t=document.createElement("div"),t.className=N.BASE_CLASS,N.globalEval(e),t.innerHTML=e,n=t.firstChild,n.className&&n.classList.contains(N.BASE_CLASS)?n:t},F.update=function(e,t){return N.globalEval(t),e.innerHTML=t,!0},N.globalEval=function(t){let n,r;n=document.createElement("div"),n.insertAdjacentHTML("beforeend",t.trim()),r=e.dom.getElementsArray("script",n),r.length&&(window.asyncLoadingJS=!1,N.evalScripts(r))},N.evalScripts=function(e){let t,n,r,o,a=eval;for(;e.length;)n=e.splice(0,1),r=n[0],o=r.text.indexOf("use strict")>-1,r.getAttribute("src")?N.evalSingleScript(n):o?(n=document.createElement("script"),n.text=r.text,t=document.head||document.getElementsByTagName("head")[0],t.appendChild(n).parentNode.removeChild(n)):a(r)},N.evalSingleScript=function(t){const n=t[0],r=n.text.indexOf("use strict")>-1,o=n.getAttribute("src");window.asyncLoadingJS?setTimeout((function(){N.evalSingleScript(t,r)}),100):N.loadedScripts.indexOf(o)<0&&(N.loadedScripts.push(o),window.asyncLoadingJS=!0,e.jsLoader.loadURL(o,n).then((function(){window.asyncLoadingJS=!1})).catch((function(){window.asyncLoadingJS=!1})))};const U={},M={__:U};U.layers={},U.Layer=function(e,t,n){return this.type=e,this.html=t,this.element=F.create(t),this.onCloseRequest=n,this},U.Layer.prototype.close=function(){return U.closeLayer(this)},U.Layer.prototype.update=function(e){this.element=F.create(e),this.html=e},U.Layer.prototype.getElement=function(){return this.element},U.Layer.prototype.remove=function(){delete U.layers[this.type],this.element=null,this.onCloseRequest=null,this.html=null,this.type=null},M.initialize=function(e){U.eventBus=e,U.addEvents()},U.addEvents=function(){e.dom.getEventDelegate("body").off("click",".nm-layer-wrapper",M.wrapperClickHandler),e.dom.getEventDelegate("body").on("click",".nm-layer-wrapper",M.wrapperClickHandler)},M.wrapperClickHandler=function(e){U.nrOfLayers()>0&&U.isShaderClicked(e)&&M.requestCloseall()},M.open=function(e,t,n){let r;return e?t?U.hasActiveLayer(e)?"cms"===e||"conflict-layer"===e?(r=new U.Layer(e,t,n),U.updateLayer(r,t)):"jslayer"===e?Promise.resolve(U.layers.jslayer):Promise.reject(new Error("Duplicate layer type. "+e)):n&&"function"!=typeof n?Promise.reject(new Error("onCloseRequest has to be a function.")):(r=new U.Layer(e,t,n),U.layers[e]=r,U.openLayer(r)):Promise.reject(new Error("html not set.")):Promise.reject(new Error("type not set."))},U.hasActiveLayer=function(e){return!!U.layers[e]},U.nrOfLayers=function(){let e,t=0;for(e in U.layers)U.layers.hasOwnProperty(e)&&t++;return t},M.requestCloseall=function(){let e;for(e in U.layers)U.layers.hasOwnProperty(e)&&U.requestCloseLayer(e)},U.requestCloseLayer=function(e){const t=U.layers[e];"function"==typeof t.onCloseRequest?t.onCloseRequest():U.closeLayer(t)},U.openLayer=function(e){const n=e;return x.open(e.element,e).then((function(e){return U.dispatchEvent(t.LAYER_LOADED,{element:e.element}),U.dispatchCustomEvent("LAYER_LOADED",{element:e.getElement(),type:"layer"}),e})).catch((function(e){throw U.closeLayer(n),console.error("core/layer/animation:layerOpen: animation rejected.",e),e}))},U.dispatchEvent=function(e,t){U.eventBus.emit(e,t)},U.dispatchCustomEvent=function(e,t){try{let n=new CustomEvent(e,{detail:t});document.dispatchEvent(n)}catch(t){console.error("dispatchCustomEvent: ","the custom-event for "+e+" could not be dispatched",t)}},U.closeLayer=function(e){return x.close(e.element,e).then((function(e){e.remove()}),(function(e){throw console.warn("core/layer/animation:layerClose: animation rejected.",e),e})).catch((function(e){console.error(e)})).then(x.toggleShader).then((function(){U.dispatchEvent(t.LAYER_CLOSED,{element:e.element}),U.dispatchCustomEvent("LAYER_CLOSED")}))},U.updateLayer=function(e,n){let r;return e.update(n),r=x.replace(e.getElement(),e),r.then((function(e){return U.dispatchEvent(t.LAYER_LOADED,{element:e.getElement()}),U.dispatchCustomEvent("LAYER_LOADED",{element:e.getElement(),type:"layer"}),e})).catch((function(e){throw console.warn("core/layer/animation:layerUpdate: animation rejected."),e}))},U.isShaderClicked=function(t){return e.dom.isElementOutsideOfElementWithSelector(t.target,".nm-layer-inner")&&t.target.classList.contains("nm-layer-wrapper")};a(9625),a(1);const j=function(e,t){this.pathname=e||"",this.hash=t||"",this.changes=[],this.init()};j.URL_PARAM_SEPARATOR="&",j.URL_PAGE_SEPARATOR="~_~",j.VERSION="0.2.1",j.prototype.init=function(e,t){let n;for(n in t&&(this.hash=t),this.hashObjects=this.parseHash(this.hash),this.attrs={},this.hashObjects)"page"===n?this.hashObjects.page!==this.pathname&&this.changes.push([n,this.hashObjects[n],1]):n.match(/^data/g)?this.attrs[n]=this.hashObjects[n]:this.changes.push([n,this.hashObjects[n],1])},j.prototype.update=function(e){let t,n,r=this.hashObjects;for(n in this.hash=e,this.hashObjects=this.parseHash(e),this.changes=[],this.currentAttrs=this.attrs||{},this.attrs={},this.hashObjects)n.match(/^data/g)?this.attrs[n]=this.hashObjects[n]:this.hashObjects[n]!==r[n]&&this.changes.push([n,this.hashObjects[n],1]);for(t in r)this.hashObjects[t]||"page"===t||this.changes.push([t,r[t],0]);!this.hashObjects.page&&r.page&&(this.hashObjects.page=this.pathname,this.changes.push(["page",this.pathname,1]))},j.prototype.parseHash=function(e){let t,n,r,o,a,i,s,l={};if(t=e||"",t.match(/^#/)&&(t=t.substring(1)),t){n=t.split(j.URL_PAGE_SEPARATOR),o=n.length;let e,c=/\+/g,u=/([^&=]+)=?([^&]*)/g;const d=function(e){return decodeURIComponent(e.replace(c," "))};for(r=0;i=n[r],r<o;r++)for(;null!==(e=u.exec(i));)a=d(e[1]),s=d(e[2]),l[a]=s}return l},j.prototype.getChanges=function(){const e=this.changes;return this.changes=[],e},j.prototype.getAttrs=function(){return this.attrs||{}},j.prototype.getCurrentAttrs=function(){return this.currentAttrs||{}};const B={},H={__:B};let V=!1,Y=null,q=!1;B.pathBase="",H.history_available=!(!window.history||!history.pushState),B.registered=[],B.newHashString=function(e,t,n,r,o){let a,i;const s=r||"open",l=o||{};return t?(a=B.state.parseHash(e),"close"===s?void 0!==a[t]&&delete a[t]:a[t]=n,i=B.processHashKeys(a,s),i=B.addAttrsToHashParts(i,l),i=B.removeAttrsFromHashParts(i,l),B.joinHashParts(i,e)):e},B.processHashKeys=function(e,t){const n=[];let r,o;for(r in e)if(e[r]){if("close"===t&&r.match(/data-/))continue;if("page"===r){history.pushState({pageLoad:!0},null,e[r]),B.updatePathBase(),B.handleHistoryChange({state:{pageLoad:!0}});continue}o=e[r],o&&n.push(r+"="+o)}return n},B.addAttrsToHashParts=function(e,t){const n=e;let r,o;for(r in t)t[r]&&(o="data-"+r+"="+t[r],n&&-1===n.indexOf(o)&&n.push("data-"+r+"="+t[r]));return n},B.removeAttrsFromHashParts=function(e,t){const n=e;let r,o,a;for(r in t)t[r]||(o="data-"+r+"=true",n&&n.indexOf(o)>-1&&(a=n.indexOf(o),n.splice(a,1)));return n},B.joinHashParts=function(e,t){let n;return n=new RegExp(j.URL_PAGE_SEPARATOR).test(t)?e.join(j.URL_PAGE_SEPARATOR):e.join(j.URL_PARAM_SEPARATOR),n},B.getChannelAttributes=function(e,t){let n,r,o,a={};for(o=e.attributes.length-1;o>-1;o--)r=e.attributes[o].nodeName,r.match(/^data/)&&r.match(t)&&(n=r.replace(/^data-/,""),a[n]=e.attributes[o].nodeValue);return a},B.publishChanges=function(e,n,r){let o,a,i,s,l,c,u;for(c=0,u=e.length;c<u;c++)o=e[c],"page"===o[0]?(i=0===o[2]?location.pathname:o[1],B.eventBus.emit(t.PAGE_OPEN,{pathname:i})):(a=0===o[2]?".close":".open",s={},s[o[0]]=o[1],l=o[0]+a,B.eventBus.emit(l,[s,n,r]))},B.hashIsEmpty=function(e){let t="";return e&&(t=e),0===t.length},B.stringContainsRegexPattern=function(e,t){return t.test(e)},B.hasInvalidHashParam=function(e){const t=/(^\s*\/\/|:\/\/)/gi;let n=!1,r=e;return r&&(r.indexOf("=")>0&&(r=r.split("=")[1]),n=B.hashIsEmpty(r),n=!0===n||B.stringContainsRegexPattern(decodeURIComponent(r),t)),n},B.tryHashUpdate=function(e){q=!1,B.eventBus.emit(t.PAGE_LEAVE),q||(e?(V=!1,location.hash=e):(V=window.pageYOffset,location.hash&&""!==location.hash&&(location.hash="")),Y=location.hash)},B.createState=function(e,t){return new j(e||"",t||"")},B.handleHistoryChange=function(e){e.state&&e.state.pageLoad&&B.publishChanges([["page",location.pathname,0]],[],[])},B.isInpageNaviPresent=function(){const e=SETUPS.get("nemo.nav.navSelector")+" a",t=[].slice.call(document.querySelectorAll(e)),n=[].slice.call(document.querySelectorAll(".nm-pageOpen"));return t.length>0||n>0},B.updatePathBase=function(){B.pathBase=window.location.pathname.split("/"),B.pathBase.pop(),B.pathBase.push(""),B.pathBase=B.pathBase.join("/"),B.pathBase=B.pathBase.split(" ").join(""),SETUPS.set("nemo.core.router.pathBase",B.pathBase)},B.handleHashChange=function(){let e;if(B.hasInvalidHashParam(location.hash))return console.error("invalid hash param",location.hash),B.eventBus.emit(t.ERROR),location.hash=location.hash.split("#")[0],!1;e=location.hash.split("#")[1]||"",e&&(e="#"+e),V&&(window.scrollTo(0,V),Y!==e&&(V=!1)),B.eventBus.emit(t.HASH_CHANGE,e),B.state.update(e),B.publishChanges(B.state.getChanges(),B.state.getAttrs(),B.state.getCurrentAttrs())},B.reset=function(){B.state=this.createState(location.pathname,""),B.registered=[]},B.addUrlSelector=function(e,t){const n=e.lastIndexOf(".html");return e.substring(0,n)+"."+t+e.substring(n)},B.getPreviousPageData=function(e){return{hash:e.hash,hashIdentifier:e.hash&&e.hash.indexOf("page=")>=0?"page":"",hashShort:e.hash&&e.hash.indexOf("page=")>=0?e.hash.split("page=")[1]:"",pathName:e.pathname,url:e.pathname+e.hash}},B.getClosestATag=function(t){let n;return n="A"===t.target.tagName?t.target:e.dom.closest(t.target,"a"),n},H.register=function(t,n,r){const o=r||"open";B.registered.push([t,n,o]),console.info("ROUTER.register++++ selector: "+t+", keyName: "+n+", action: "+o),B.legacyEventBus=e.dom.getEventDelegate("body"),B.legacyEventBus.on("click",t,B.handleRegisteredClicks(n,o))},B.isClickHandlerExitConditionFulfilled=function(t){const n=t;let r,o=!1;return e.dom.getElementsArray("body.nm-layer-iframelayer").length&&(console.info("IframelayerFallback-Mode"),e.dom.isElement(n)&&n.classList.contains("nm-layerLink")&&(r=n.getAttribute("href"),r.indexOf(".iframelayer.")<0&&(r=B.addUrlSelector(r,"iframelayer"),n.setAttribute("href",r)),o=!0)),(e.dom.isElement(n)&&n.classList.contains("js-link-extern")||e.dom.getElementsArray("body.nm-layer-fallback").length)&&(o=!0),o},B.handleRegisteredClicks=function(t,n){return function(r){let o,a,i,s=this,l=B.getClosestATag(r);if(B.isClickHandlerExitConditionFulfilled(l))return!0;r.preventDefault(),r.target.classList.contains("j-stop-propagation")&&r.stopPropagation(),o=s.getAttribute("href")?s.getAttribute("href"):s.getAttribute("data-href"),a=B.getChannelAttributes(s,t),o||(i=e.dom.closest(r.target.parentNode,"a"),o=i?i.getAttribute("href"):""),a=B.handleInnerLayerChannelAttributes(r,a),B.previousPage=B.getPreviousPageData(window.location),B.tryHashUpdate(B.newHashString(location.hash,t,o,n,a))}},B.handleInnerLayerChannelAttributes=function(e,t){const n=t;return n.innerlayer=!1,B.shouldSetTabLayerChannelAttribute(e)&&(n.innerlayer="true"),n},B.shouldSetTabLayerChannelAttribute=function(t){const n=e.dom.closest(t.target,".nm-navigation-layer-wrap .nm-navigation-derivative-sub-list"),r=e.dom.closest(t.target,".nm-layer-content .nm-navigation"),o=e.dom.closest(t.target,".nm-gallery-slides .nm-icon-next-arrow"),a=e.dom.closest(t.target,".nm-gallery-slides .nm-icon-back-arrow");let i=!1;return(n||r||o||a)&&(i=!0),i},H.open=function(e,t){B.tryHashUpdate(B.newHashString(location.hash,e,t,"open"))},H.close=function(e,t){B.tryHashUpdate(B.newHashString(location.hash,e,t,"close"))},H.getPreviousPage=function(){return B.previousPage?B.previousPage:null},H.getState=function(){return B.state},H.getRegistered=function(){return B.registered},H.getPathBase=function(){return B.pathBase||""},H.initialize=function(e){let n;if(B.eventBus=e,window.addEventListener("popstate",B.handleHistoryChange),window.addEventListener("hashchange",B.handleHashChange,!1),B.hasInvalidHashParam(location.hash))return console.error("invalid hash param",location.hash),B.eventBus.emit(t.ERROR),location.hash=location.hash.split("#")[0],!1;B.state=B.createState(location.pathname,location.hash),n=function(){B.publishChanges(B.state.getChanges(),B.state.getAttrs(),B.state.getCurrentAttrs()),!location.hash&&B.isInpageNaviPresent()&&history.replaceState({pageLoad:!0},null,location.href)},window.setTimeout(n,100),B.updatePathBase()};const G={},W={__:G};G.callbacks={},G.layer=null,G.pending=null,G.openLayersSinceLastClose=0,W.initialize=function(e){G.eventBus=e,G.registerAtRouter(),G.registerEvents()},W.register=function(e,t){G.callbacks[e]=t,G.pending&&2===G.pending.length&&G.pending[0]&&e===G.pending[0]&&G.processLayer(e,G.pending[1])},G.registerAtRouter=function(){H.register(".nm-jslayerLink","jslayer"),H.register(".nm-j-jslayer .nm-button-close","jslayer","close"),H.register(".nm-j-jslayer .nm-j-layer-close-button","jslayer","close")},G.registerEvents=function(){G.eventBus.on("jslayer.open",G.handleJslayerOpen),G.eventBus.on("jslayer.close",G.handleJslayerClose),G.domDelegate=e.dom.getEventDelegate("body"),G.domDelegate.on("click",".nm-j-jslayer .nm-button-back",G.handleBackClick)},G.handleJslayerOpen=function(e){let t,n,r,o=e[0]&&e[0].jslayer?e[0].jslayer:null;o&&(o.indexOf("#")>-1&&(o=o.split("#")[1]),t=n=o,o.indexOf(".")>-1&&(r=o.split("."),t=r[0],n=r[1]),G.callbacks[t]&&"function"==typeof G.callbacks[t]?G.processLayer(t,n):G.pending=[t,n])},G.processLayer=function(e,t){const n=G.callbacks[e].call({},t);M.open("jslayer",n,G.handleCloseRequest).then((function(n){G.layer=n,G.layer.key=e,G.layer.id=t,G.openLayersSinceLastClose+=1,G.openLayersSinceLastClose>1?G.layer.element.classList.add("nm-jslayer-show-backbutton"):G.layer.element.classList.remove("nm-jslayer-show-backbutton")}),(function(e){console.warn("jslayer.handleJslayerOpen:",e)}))},G.handleCloseRequest=function(){let e=G.layer.key;G.layer.id&&(e=e+"."+G.layer.id),H.close("jslayer",e),G.openLayersSinceLastClose=0},G.handleBackClick=function(){G.openLayersSinceLastClose-=2,history.back()},G.handleJslayerClose=function(){G.layer&&G.layer.close&&(G.layer.close(),G.eventBus.emit(t.LAYER_CLOSE,{element:G.layer.element}),G.pending=null,G.openLayersSinceLastClose=0)};const z={},X={__:z};z.registeredPatterns={},z.JS_LAYER_REGEX=/(jslayer:)(\w|\.|-|_)+(,)?/gi,X.getContent=function(e){return z.getLayerContent(e)},X.isStaticContentRequest=function(e){return z.isStaticLayerRequest(e)},z.isStaticLayerRequest=function(e){return!!e.match(z.JS_LAYER_REGEX)},z.parseParams=function(e){const t={};let n;return n=(e||"").replace(z.JS_LAYER_REGEX,""),n.split(",").forEach((function(e){const n=e.split("=");t[n[0]]=n[1]})),t},z.parsePattern=function(e){const t=(e||"").match(z.JS_LAYER_REGEX);return t?t[0].split(",")[0]:null},z.getLayerContent=function(e){const t=z.parseParams(e),n=z.parsePattern(e);let r;return r=X.isRegisterPattern(n)?z.registeredPatterns[n](t):Promise.reject("pattern "+n+" id not registered!!"),r},X.registerStaticRequest=function(e,t){z.registeredPatterns[e]=t},X.isRegisterPattern=function(e){return!!z.registeredPatterns[e]&&"function"==typeof z.registeredPatterns[e]};const J={},Z={__:J};J.oIndex={},J.iCounterXhr=0,J.aCacheURI=[],J.iParallelXHRMax=3,J.sMarkerXHR=".headless",J.oMarkerProvider=[],J.registeredContentProviders=[],J.DYNAMIC_URL_PREFIX_REGEX=/js(-|_)link/g,J.updateIndex=function(e,t){const n=encodeURIComponent(e);t?J.oIndex[n]=!0:(J.oIndex[n]=!1,delete J.oIndex[n])},Z.isCached=function(e){const t=encodeURIComponent(e);return!!J.oIndex[t]},Z.setContent=function(e,t,n){const r=k.setItem("core.controller.content",e,t,{failsafeSet:n});r||Z.flush(),J.updateIndex(e,r)},J.hasDynamicContentUrl=function(e){return(e||"").match(J.DYNAMIC_URL_PREFIX_REGEX)},Z.getContent=function(e,t){let n,r;return J.hasDynamicContentUrl(e)?(r=J.getDynamicContentProvider(e),r?J.getContentFromProvider(r,e):Promise.reject(new Error("no registered content provider has been found for this url: "+e))):X.isStaticContentRequest(e)?X.getContent(e):(n=k.getItem("core.controller.content",e,t),Z.isCached(e)&&n?Promise.resolve(k.getItem("core.controller.content",e,t)):J.loadRemoteContent(e,t))},Z.fillCache=function(e){let t=0;for(;t<e.length;t++)Z.isCached(e[t])||J.aCacheURI.push({sKey:e[t]});J.processCacheURIs()},J.processCacheURIs=function(){let e;0!==J.aCacheURI.length&&(J.iCounterXhr<J.iParallelXHRMax&&(e=J.aCacheURI.shift(),J.loadRemoteContent(e.sKey,!0)),J.aCacheURI.length>0&&window.setTimeout(J.processCacheURIs,50))},Z.registerContentProvider=function(e){const t={};e&&e.regEx&&"function"==typeof e.regEx.exec&&e.callbackPromise&&"function"==typeof e.callbackPromise?(t.regEx=e.regEx,t.callbackPromise=e.callbackPromise,t.name=e.name||"provider#"+J.registeredContentProviders.length,J.registeredContentProviders.push(t)):console.warn("invalid params!could not register content Provider")},J.getDynamicContentProvider=function(e){const t=J.registeredContentProviders.filter((function(t){return!!e.match(t.regEx)}));return t.length?t[0]:null},J.getContentFromProvider=function(e,t){const n=e.callbackPromise(t);return"function"==typeof n.then?n:Promise.reject(new Error("invalid content provider"))},Z.registerMarkerProvider=function(e){"function"==typeof e&&J.oMarkerProvider.indexOf(e)<0&&J.oMarkerProvider.push(e)},J.rewriteUrl=function(e){const t="."+e.split("#")[0].split("?")[0].split(".").pop(),n=[];let r="",o=!1;return J.oMarkerProvider.forEach((function(t){n.push(t(e))})),Promise.all(n).then((function(e){return e.forEach((function(e){e.marker&&!o&&(r+="."+e.marker,e.overwrites&&(r="."+e.marker,o=!0))})),r})).then((function(n){return e.split(t).join(n+J.sMarkerXHR+t)})).catch((function(t){return console.warn(t),e}))},J.loadRemoteContent=async function(e,t){try{const n=await J.rewriteUrl(e);J.iCounterXhr+=1;const r=(e=>{if(e.status>=200&&e.status<300)return e;{let t=new Error(e.statusText);throw t.response=e,t}})(await fetch(n)),o=await r.text();return(e=>{window.ADRUM&&window.ADRUM.command&&e.indexOf("component_error")>-1&&window.ADRUM.command("addUserData","component-error","true")})(o),t&&Z.setContent(e,o),o}catch(e){return console.warn("loadRemoteContent failed",e),e}finally{J.iCounterXhr-=1}},Z.flush=function(e){let t,n,r,o=e||[],a=[];if(0===o.length)J.oIndex={},k.clear("core.controller.content","sessionStorage");else{for(t in J.oIndex)J.oIndex.hasOwnProperty(t)&&(r=decodeURIComponent(t),J.oIndex[t]&&-1===o.indexOf(r)&&a.push(r));for(n in a)a.hasOwnProperty(n)&&(k.removeItem("core.controller.content",a[n]),J.updateIndex(a[n],!1))}},J.initialize=function(){Z.flush()},Z.debug=function(){return{cacheItems:J.aCacheURI,cacheLenght:J.aCacheURI.length}},Z.initialize=function(){J.initialize()};const $={__:{},requiresDynamicDot:function(){return null==document.querySelector("#nm-id-default-layer-tpl")},getTemplateFromBackend:function(e){return new Promise((function(t,n){let r=SETUPS.get("nemo.market.homepage");if(!r){const e=window.location.pathname.lastIndexOf(".");r=window.location.pathname.substring(0,e)}fetch(r+".dot-template."+e+".html",{headers:{Accept:"text/plain"},method:"GET"}).then((function(e){if(e.ok)return e.text();throw new Error(e.error)})).then((function(e){t(e?e.trim():e)})).catch((function(e){console.error("Error while reading layer template",e),n(e)}))}))}},K='\n\t<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n\t\t<div class="nm-layer nm-layer-dialogue nm-error-layer nm-layer-visible">\n\t\t\t<div class="nm-layer-inner">\n\t\t\t\t<div class="nm-layer-dialogue-content clearfix">\n\t\t\t\t\t<h1 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">{{=it.errorHeadline}}</h1>\n\t\t\t\t\t<p class="nm-error nm-error-layer-message nm-el-pg nm-el-pg-03 nm-at-pg-indicator" style="float:none;" data-defaultErrorMessage="{{=window.i18n[\'error-layer.unknown-error\']}}">{{=it.errorMessage}}</p>\n\t\t\t\t\t<div class="nm-layer-btn-ok"><a class="nm-el-btn nm-el-btn-01 nm-j-ok-btn" href="#">{{=window.i18n[\'ok-label\']}}</a></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n',Q={},ee={__:Q};Q.LAYER_TPL_ID="nm-id-default-data-layer-tpl",Q.defaultLayerType="cms",Q.templateStr=null,Q.layer=null,Q.nextLayerData=null,Q.openLayersSinceLastClose=0,Q.openLayersSinceLastTab=0,Q.closeButtonHistoryBackTarget=-1,Q.backButtonEl=null,Q.scrollStackingIndex=0,Q.stackingDirections={downwards:"oneLessLayer",upwards:"onMoreLayer"},Q.layerStackingDirection=Q.stackingDirections.upwards,Q.scrollPositionStackingArray=[],Q.debugActive=!1,ee.initialize=function(t){Q.eventBus=t,Q.domEventDelegate=e.dom.getEventDelegate("body"),Q.addEvents(),Q.registerAtRouter()},Q.addEvents=function(){Q.eventBus.on(t.LAYER_OPEN,Q.handleLayerOpen),Q.eventBus.on(t.LAYER_CLOSE,Q.handleLayerClose)},Q.registerAtRouter=function(){H.register(".nm-layerLink","layer"),H.register(".nm-layer .nm-button-close","layer","close"),H.register(".nm-layer .nm-button-cancel","layer","close"),H.register(".nm-layer .nm-j-layer-close-button","layer","close"),H.register(".nm-layerClose","layer","close")},Q.handleLayerOpen=function(e){this&&"function"==typeof this.preventDefault&&this.preventDefault(),Q.nextLayerData=[e[0].layer,e[1],e[2]],e[1]["data-innerlayer"]?(Q.closeButtonHistoryBackTarget--,Q.openLayersSinceLastTab=0):(Q.openLayersSinceLastClose+=1,Q.openLayersSinceLastTab+=1,Q.storeScrollStackingPosition()),Q.startNewLayerProcess()},Q.layerCloseHandler=function(e){e.preventDefault&&e.preventDefault(),M.requestCloseall(),Q.domEventDelegate.off("click",".nm-error-layer .nm-j-ok-btn",Q.layerCloseHandler),Q.scrollStackingIndex=1,Q.layerStackingDirection=Q.stackingDirections.downwards},Q.handleCloseRequest=function(){H.close("layer",Q.layer.url),Q.scrollStackingIndex=1,Q.debugScrollStacking("closeRequest",Q.scrollStackingIndex)},Q.controlBackButton=function(e){const t=e.getElement();let n,r;t&&(r=t.querySelector(".nm-button-close"),n=t.querySelector(".nm-innerlayer-close"),r||(r=t.querySelector(".nm-j-layer-close-button"),n=t.querySelector(".nm-j-innerlayer-close-button")),Q.openLayersSinceLastClose>1?Q.enableTabsCloseButton(r,n):Q.disableTabsCloseButton(r,n))},Q.enableTabsCloseButton=function(e,t){e.style.display="none",t&&(t.style.display="inline-flex",t.addEventListener("click",Q.handleLayerBack))},Q.disableTabsCloseButton=function(e,t){e.style.display="inline-flex",t&&(t.style.display="none",t.removeEventListener("click",Q.handleLayerBack))},Q.handleLayerBack=function(e){let t;e.stopPropagation(),-1!==Q.closeButtonHistoryBackTarget&&0===Q.openLayersSinceLastTab?(t=Q.closeButtonHistoryBackTarget,history.go(t)):(history.back(),Q.openLayersSinceLastTab-=1),Q.closeButtonHistoryBackTarget=-1,Q.openLayersSinceLastClose>2?Q.openLayersSinceLastClose-=1:Q.openLayersSinceLastClose-=2,Q.layerStackingDirection=Q.stackingDirections.downwards,Q.debugScrollStacking("handleBack",Q.scrollStackingIndex),Q.checkCookieLayer()},Q.handleLayerClose=function(){if(this&&"function"==typeof this.preventDefault&&this.preventDefault(),Q.openLayersSinceLastClose=0,Q.openLayersSinceLastTab=0,Q.closeButtonHistoryBackTarget=-1,Q.layerStackingDirection=Q.stackingDirections.downwards,!Q.layer)return!1;Q.layer.close().then((function(){Q.layer=void 0,Q.startNewLayerProcess(),Q.setScrollStackingPosition(),Q.checkCookieLayer()}),(function(e){console.error(e)}))},Q.checkCookieLayer=function(){const e=document.querySelector("body"),t=e.classList.contains("nm-ensBanner-isVisible");e.classList.contains("nm-ensBanner-isVisible--showLegalLayers")&&t&&e.classList.remove("nm-ensBanner-isVisible--showLegalLayers")},Q.startNewLayerProcess=function(){let t,n;if(!Q.nextLayerData)return;t=Q.nextLayerData[0],n=Q.nextLayerData[1],Q.nextLayerData=null;const r=Q.getTemplatePromise(n),o=Z.getContent(t,!1);Promise.all([r,o]).then((function([n,r]){-1!==r.indexOf("<html")&&Q.handleError();const o=e.template.render(n,{content:r});if(!Q.layer||"cms"===Q.layer.type)return M.open("cms",o,Q.handleCloseRequest).then((function(e){Q.layer=e,Q.layer.url=t,Q.controlBackButton(Q.layer),Q.setScrollStackingPosition()})).catch((function(e){console.error(e)}));console.warn("could not Open Layer")})).catch((e=>{console.error("An error occured",e),Q.handleError(e)}))},Q.storeScrollStackingPosition=function(){const e=document.querySelector(".nm-layer-wrapper"),t=!!e&&"fixed"===getComputedStyle(e).position,n=Q.scrollStackingIndex>=1,r=t&&n?e.scrollTop:window.pageYOffset||0;Q.layerStackingDirection===Q.stackingDirections.upwards&&(Q.scrollPositionStackingArray[Q.scrollStackingIndex]=r,Q.scrollStackingIndex++),Q.debugScrollStacking("storePosition",Q.scrollStackingIndex-1)},Q.setScrollStackingPosition=function(){const e=document.querySelector(".nm-layer-wrapper"),t=!!e&&"fixed"===getComputedStyle(e).position,n=Q.scrollStackingIndex>=1,r=t&&n;Q.layerStackingDirection===Q.stackingDirections.downwards?(Q.scrollStackingIndex--,Q.scrollToStoredPosition(r,e,Q.scrollPositionStackingArray[Q.scrollStackingIndex]),Q.layerStackingDirection=Q.stackingDirections.upwards):(Q.scrollToStoredPosition(r,e,0),Q.scrollPositionStackingArray[Q.scrollStackingIndex]=0),Q.debugScrollStacking("setPosition",Q.scrollStackingIndex)},Q.scrollToStoredPosition=function(e,t,n){e?t.scrollTop=n:window.scroll(0,n)},Q.debugScrollStacking=function(e,t){Q.debugActive&&(console.info("StackingAction: ",e),console.info("StackingIndex: ",t),console.info("ScrollPosition: ",Q.scrollPositionStackingArray[t]),Q.layerStackingDirection===Q.stackingDirections.upwards?console.info("StackingDirection set to: Upwards (default)"):console.info("StackingDirection set to: Downwards"),console.info("------------------------------------------------"))},Q.getTemplatePromise=function(e){return $.requiresDynamicDot()?Q.getTemplateFromBackend(e):Q.getTemplateString(e)},Q.getTemplateFromBackend=function(e){let t=null;return t=e&&e["data-layer-tpl"]?"nm-id-"+e["data-layer-tpl"]+"-layer-tpl":Q.LAYER_TPL_ID,$.getTemplateFromBackend(t)},Q.getTemplateString=function(e){let t,n="#"+Q.LAYER_TPL_ID;return e&&e["data-layer-tpl"]&&(n="#nm-id-"+e["data-layer-tpl"]+"-layer-tpl"),t=document.querySelector(n),Promise.resolve(t.innerHTML||"")},Q.handleError=function(){let t;t=e.template.render(K,{errorMessage:window.i18n["error-layer.unknown-error"]||"Es ist ein unbekannter Fehler aufgetreten"}),M.open("error",t).then((function(){Q.domEventDelegate.on("click",".nm-error-layer .nm-j-ok-btn",Q.layerCloseHandler)})).catch((function(e){console.error(e)})),history.back()};const te={__:{},setPageTitle:function(e){document.title=e},extractLayerTitle:function(t){const n=t?e.dom.getElement(".nm-layer-title",t):null;let r="";return null!==n&&(r=n.innerHTML),r}},ne={},re={__:ne};ne.addEvents=function(){ne.eventBus.on(t.LAYER_LOADED,ne.handerLayerLoaded),ne.eventBus.on(t.LAYER_CLOSED,ne.handerLayerClosed)},ne.handerLayerClosed=function(){const t=e.dom.getElement("#nm-page-title");t&&null!==t&&ne.updateTitle(t.innerHTML)},ne.handerLayerLoaded=function(e){let t;e&&e.element&&(t=te.extractLayerTitle(e.element),ne.updateTitle(t))},ne.updateTitle=function(e){let t,n;e&&""!==e&&(t=document.createElement("div"),t.innerHTML=e,n=t.firstChild.nodeValue,te.setPageTitle(n))},re.initialize=function(e){ne.eventBus=e,ne.addEvents()};const oe="\n\t{{? SETUPS.get('nemo.footnote-engine.active') === true}}\n\t\t{{? !SETUPS.get('scopes.nemo.DISABLE_FEATURE_HUB') && SETUPS.get('scopes.nemo.ONEFOOTER_FA_INCLUDE') && SETUPS.get('nemo.fefa.scOneFootnoteJsonUrl') && SETUPS.get('nemo.FefaFeatureAppVersion')}}\n\t\t\t<feature-app id=\"audi-footnote-engine-layer-"+Math.floor(1e6*Math.random())+'" src="https://featureapps.audi.com/audi-feature-app-footnote-engine/{{=SETUPS.get(\'nemo.FefaFeatureAppVersion\')}}/audi-footnote-engine.umd.js" config=\'{"apiUrls": ["{{=SETUPS.get(\'nemo.fefa.scOneFootnoteJsonUrl\')}}"], "omitSideSpacing": "true", "uiTheme": "light"}\'></feature-app>\n\t\t{{??}}\n\t\t\t<audi-footnotes class="audi-footnotes sc-footnotes" data-module="footnotes">\n\t\t\t\t<ul class="audi-footnotes-list"></ul>\n\t\t\t</audi-footnotes>\n\t\t{{?}}\n\t{{?}}\n',ae={},ie={__:ae};ae.navURLs=null,ae.oDefaults={nmContentWrapper:".nm-wrapper-content",sClassAnimate:"animate",sClassDirectionBackward:"backward",sClassDirectionForward:"forward",sSelectorContent:".nm-content",sSelectorContentElem:".nm-wrapper-content .nm-area-content",sSelectorNavigation:"#nm-navigation li, .sc-main-navigation-list li",sSelectorPageTitle:"#nm-page-title"},ae.addClassToSelector=function(t,n){e.dom.getElement(t).classList.add(n)},ae.removeClassFromSelector=function(t,n){e.dom.getElement(t).classList.remove(n)},ae.extractNavigationURLs=function(t){let n;return ae.navURLs=[],t.forEach((function(t){n=e.dom.getElement("a",t).getAttribute("data-href"),n&&ae.navURLs.push(n)})),ae.navURLs},ie.isBackwardsAnimation=function(t,n){let r=n,o=t;return r=void 0!==r?r.replace(SETUPS.get("nemo.core.router.pathBase"),""):window.location.pathname.replace(SETUPS.get("nemo.core.router.pathBase"),""),o=o.replace(SETUPS.get("nemo.core.router.pathBase"),""),null===ae.navURLs&&ie.extractNavUrls(e.dom.getElement(ae.oDefaults.sSelectorContentElem)),ae.navURLs.indexOf(o)<ae.navURLs.indexOf(r)},ie.isNomo=function(){const e=document.querySelector(ae.oDefaults.sSelectorContent);return!!e&&"nomo"===e.getAttribute("data-type")},ie.extractNavUrls=function(t){return ae.extractNavigationURLs(e.dom.getElementsArray(ae.oDefaults.sSelectorNavigation,t))},ie.getCurrentPageId=function(){return e.dom.getElement(ae.oDefaults.sSelectorContent).getAttribute("data-guid")},ie.setPageTitle=function(e){document.title=e},ie.extractPageTitle=function(t){const n=e.dom.getElement(ae.oDefaults.sSelectorPageTitle,t);let r="";return e.dom.isElement(n)&&(r=n.innerHTML),r},ie.insertNewPageContent=function(t){const n=e.dom.getElement(ae.oDefaults.nmContentWrapper);e.dom.appendHtmlString(n,t),ae.processScripts(t);return e.dom.getElement(ae.oDefaults.sSelectorContentElem+":last-child")},ae.processScripts=function(e){const t=document.createElement("div");t.innerHTML=e;const n=t.querySelectorAll("script"),r=[...document.head.querySelectorAll("script")].map((e=>e.getAttribute("src")));n.forEach((e=>{const t=e.getAttribute("src");if(null===e.getAttribute("noModule")&&![...r].includes(t)){const e=document.createElement("script");e.setAttribute("src",t),document.head.appendChild(e)}}))},ie.preparePageTransition=function(e){const t=e?ae.oDefaults.sClassDirectionBackward:ae.oDefaults.sClassDirectionForward;ae.addClassToSelector(ae.oDefaults.nmContentWrapper,t)},ie.triggerPageTranstion=function(){ae.addClassToSelector(ae.oDefaults.nmContentWrapper,ae.oDefaults.sClassAnimate)},ie.finishPageTransition=function(){const t=e.dom.getElement("body");ae.removeClassFromSelector(ae.oDefaults.nmContentWrapper,ae.oDefaults.sClassAnimate),ae.removeClassFromSelector(ae.oDefaults.nmContentWrapper,ae.oDefaults.sClassDirectionBackward),ae.removeClassFromSelector(ae.oDefaults.nmContentWrapper,ae.oDefaults.sClassDirectionForward),e.dom.removeElement(e.dom.getElement(ae.oDefaults.sSelectorContentElem+":first-child")),t.classList.remove("nm-nav-fixed"),t.classList.remove("nm-page-nav-is-open"),window.pageYOffset>0&&e.dom.scrollTo(0,400)};const se={},le={__:se};se.eventBus=null,se.currentPageId=null,se.queue=[],se.lock=!1,se.backwardsAnimation=!1,se.oDefaults={navSelector:""},se.triggerPageTransitionTimeout=null,se.finishPageTransitionTimeout=null,se.initialize=function(){se.oDefaults.navSelector=SETUPS.get("nemo.nav.navSelector"),se.currentPageId=ie.getCurrentPageId(),se.addEvents()},se.addEvents=function(){se.eventBus.on(t.PAGE_OPEN,se.handlePageOpen),se.oDefaults.navSelector?H.register(se.oDefaults.navSelector+" a","page"):console.warn("nemo.nav.navSelector is undefined"),H.register(".nm-pageOpen","page")},se.handlePageTransitionComplete=function(){se.reset(),se.queue.length>0?(se.handlePageOpen(se.queue.pop()),se.queue=[]):(se.eventBus.emit(t.PAGE_READY),se.dispatchCustomEvent("PAGE_READY"))},se.dispatchCustomEvent=function(e,t){try{let n;n=t?new CustomEvent(e,{detail:t}):new CustomEvent(e),document.dispatchEvent(n)}catch(t){console.error("dispatchCustomEvent: ","the custom-event for "+e+" could not be dispatched",t)}},se.handlePageOpen=function(e){if(this&&"function"==typeof this.preventDefault&&this.preventDefault(),se.isLocked())se.queue.push(e);else{let t=e.pathname;se.setLock((new Date).getTime()),"/"!==t.substr(0,1)&&(t="/"+t),se.newPageUrl=t,Z.getContent(t,!1).then(se.pageContentHandler).catch(se.handlePageOpenError)}},se.isLocked=function(){return!!se.lock},se.setLock=function(e){se.lock=e},se.reset=function(){se.lock=!1,se.currentPageUrl=se.newPageUrl,se.newPageUrl="",se.newPageId=null,se.newPageTitle=null},se.pageContentHandler=function(e){const n=ie.insertNewPageContent(e);se.eventBus.emit(t.PAGE_LOADED,{domElement:n}),se.dispatchCustomEvent("PAGE_LOADED",{element:n,type:"page"}),se.backwardsAnimation=ie.isBackwardsAnimation(se.newPageUrl,se.currentPageUrl),ie.preparePageTransition(se.backwardsAnimation),se.clearPageTransitionTimeouts(),se.triggerPageTransitionTimeout=setTimeout((function(){ie.triggerPageTranstion()}),10),se.finishPageTransitionTimeout=setTimeout((function(){ie.finishPageTransition(),se.handlePageTransitionComplete()}),1e3)},se.handlePageOpenError=function(n){let r;history.back(),r=e.template.render(K,{errorMessage:window.i18n["error-layer.unknown-error"]||"Es ist ein unbekannter Fehler aufgetreten"}),console.error(n),M.open("error",r).then((function(e){e.getElement().querySelector(".nm-error-layer .nm-j-ok-btn").addEventListener("click",(function t(n){n.preventDefault&&n.preventDefault(),n.target.removeEventListener(n.type,t),e.close()}))})),se.eventBus.emit(t.PAGE_READY),se.reset()},le.initialize=function(e){se.eventBus=e,se.initialize()},se.clearPageTransitionTimeouts=function(){se.triggerPageTransitionTimeout&&clearTimeout(se.triggerPageTransitionTimeout),se.finishPageTransitionTimeout&&clearTimeout(se.finishPageTransitionTimeout)};const ce={},ue={__:ce};ce.oDefaults={initalScWrapper:".nm-wrapper .sc-content",initialContentAreaSelector:".nm-wrapper-content .nm-area-content:first-child"},ce.addEvents=function(){ce.eventBus.one(t.SC_VERSION_LOADED,ce.handlerSvdVersionLoaded),ce.eventBus.on(t.PAGE_LOADED,ce.handlerPageLoaded),ce.eventBus.one(t.VERSION_LOAD_COMPLETE,ce.handlerVersionLoaded)},ce.preloadContent=function(e){let t;"true"!==SETUPS.get("nemo.content.preload")&&"true"!==SETUPS.get("stockcar.context")&&!1!==ie.isNomo()||(t=ie.extractNavUrls(e),Z.fillCache(t))},ce.handlerPageLoaded=function(e){ce.preloadContent(e.domElement)},ce.handlerVersionLoaded=function(){ce.preloadContent(e.dom.getElement(ce.oDefaults.initialContentAreaSelector))},ce.handlerSvdVersionLoaded=function(){ce.preloadContent(e.dom.getElement(ce.oDefaults.initalScWrapper))},ue.initialize=function(e){ce.eventBus=e,ce.addEvents()};const de={},pe={__:de};de.addEvents=function(){de.eventBus.on(t.PAGE_LOADED,de.handlerPageLoaded)},de.handlerPageLoaded=function(e){const t=e.domElement,n=ie.extractPageTitle(t);let r,o;n&&""!==n&&(r=document.createElement("div"),r.innerHTML=n,o=r.firstChild.nodeValue,ie.setPageTitle(o))},pe.initialize=function(e){de.eventBus=e,de.addEvents()};const he={},fe={__:he};he.oDefaults={selectorAreaContent:".nm-area-content",selectorBody:"body"},he.eventBus=null,he.addEvents=function(){he.eventBus.on(t.PAGE_READY,he.updatePageType)},he.removeEvents=function(){he.eventBus.off(t.PAGE_READY,he.updatePageType)},he.updatePageType=function(){const t=e.dom.getElement(he.oDefaults.selectorAreaContent),n=e.dom.getElement(he.oDefaults.selectorBody),r=t.getAttribute("data-page-type")||!t.length&&n.getAttribute("page-type")||"default";n.setAttribute("page-type",r)},fe.initialize=function(e){he.eventBus=e,he.addEvents()};const me={},ge={__:me};let ye,Ee=!1,Le=!1,_e={bottom:0,top:0},Se=[],ve=[[],[]],Oe=[0,0],Ce={ABOVE:1,BELOW:3,IN:2},Te={AFTERSCROLL:1,ONSCROLL:0},Ae={COVER:1,INOUT:0,SCROLLDOWN:3,SCROLLUP:2},Re={eventName:"",mode:Ae.INOUT,notifyWhen:Te.ONSCROLL};me.updateViewportData=function(){_e={bottom:window.innerHeight||document.documentElement.clientHeight,top:0}},me.pageLoadHandler=function(e){let t,n;for(ve=[[],[]],me.eventBus.removeAllListeners("element.scroll"),t=0,n=Se.length;t<n;t++)me.register(Se[t].selector,Se[t].options,Se[t].callback,e.domElement,!0)},me.initializeListeners=function(){Ee||(window.addEventListener("scroll",me.scrollHandler),window.addEventListener("scroll",me.scrollEndHandler),window.addEventListener("resize",me.scrollHandler),window.addEventListener("resize",me.scrollEndHandler),window.addEventListener("resize",me.updateViewportData),me.updateViewportData(),Ee=!0)},me.register=function(e,t,n,r){let o,a,i,s,l,c,u,d,p,h,f;if(void 0!==typeof r&&r||Se.push({callback:n,options:t,selector:e}),a=document,o=a.querySelectorAll(e),o.length){for(me.initializeListeners(),i=t.notifyWhen||Re.notifyWhen,s=t.eventName||Re.eventName,l=t.mode||Re.mode,c=[],me.eventBus.addListener("element.scroll."+s,n),u=0,f=o.length;u<f;u++)d=o[u],p=me.getElementsState(d,l,o),h={element:d,elements:o,eventName:s,mode:l,selector:e,was:p,where:p},me.eventBus.trigger("element.scroll."+h.eventName,h),c.push(h);ve[i].push(c)}},me.getElementsState=function(e,t,n){const r=me.getElementState(e);let o;if(t===Ae.COVER&&r===Ce.IN)for(o=0;o<n.length&&n[o]!==e;o++)if(100===me.getElementCoverage(n[o]))return Ce.BELOW;return r},me.getElementState=function(e){const t=e.getBoundingClientRect();return t.top>=_e.top&&t.top<_e.bottom||t.bottom>=_e.top&&t.bottom<_e.bottom||t.top<_e.top&&t.bottom>_e.top?Ce.IN:t.top<_e.top?Ce.ABOVE:Ce.BELOW},me.getElementCoverage=function(e){let t,n,r;return me.getElementState(e)!==Ce.IN?0:(r=e.getBoundingClientRect(),r.top>=_e.top&&r.bottom<=_e.bottom?100:(t=r.top,n=r.bottom,t<0&&(t=0),n>_e.bottom&&(n=_e.bottom),(n-t)/(_e.bottom-_e.top)*100))},me.dump=function(){console.info(ve)},me.checkOnScroll=function(){me.checkChangedElements(Te.ONSCROLL)},me.checkAfterScroll=function(){me.checkChangedElements(Te.AFTERSCROLL)},me.checkChangedElements=function(e){let t,n,r,o=window.scrollY;if(Le=!1,ve[e].length>0)for(t=0,r=ve[e].length;t<r;t++)for(n in ve[e][t])ve[e][t][n]&&document.body.contains(ve[e][t][n].element)&&(ve[e][t][n]=me.checkChangedElement(ve[e][t][n],e,o));Oe[e]=o},me.checkChangedElement=function(e,t,n){const r=me.getElementsState(e.element,e.mode,e.elements);return e.was=e.where,e.where=r,e.mode===Ae.SCROLLDOWN?n>Oe[t]&&me.eventBus.trigger("element.scroll."+e.eventName,e):e.mode===Ae.SCROLLUP?n<Oe[t]&&me.eventBus.trigger("element.scroll."+e.eventName,e):e.was!==e.where&&me.eventBus.trigger("element.scroll."+e.eventName,e),e},me.scrollHandler=function(){Le||(Le=!0,window.requestAnimationFrame(me.checkOnScroll))},me.scrollEndHandler=function(){clearTimeout(ye),ye=window.setTimeout((function(){window.requestAnimationFrame(me.checkAfterScroll)}),250)},ge.initialize=function(e){me.eventBus=e,me.eventBus.on(t.PAGE_LOADED,me.pageLoadHandler)},ge.register=me.register,ge.unregister=me.unregister,ge.WHERE=Ce,ge.NOTIFY=Te,ge.MODE=Ae,window.i18n=window.i18n||{};const be=[M,W,ee,re,le,ue,pe,fe,H,ge],we=b.getEmitter();be.forEach((e=>{try{e.initialize(we)}catch(e){console.error(e)}}))})(),i})()}));
//# sourceMappingURL=audi-core-application.js.map