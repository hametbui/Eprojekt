/*! For license information please see bundle.configurator.js.LICENSE.txt */
/* nemo v148.0.0 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("core-application"),require("core-utils"),require("microkernel"),require("core-global"),require("core-vendor")):"function"==typeof define&&define.amd?define("configurator",["core-application","core-utils","microkernel","core-global","core-vendor"],e):"object"==typeof exports?exports.configurator=e(require("core-application"),require("core-utils"),require("microkernel"),require("core-global"),require("core-vendor")):t.configurator=e(t["core-application"],t["core-utils"],t.microkernel,t["core-global"],t["core-vendor"])}(window,(function(__WEBPACK_EXTERNAL_MODULE__0__,__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__4__,__WEBPACK_EXTERNAL_MODULE__5__,__WEBPACK_EXTERNAL_MODULE__8__){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=76)}([function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__0__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(5),r=n(3);const o={},a={__:o};o.stored={},a.getSpecialFamilies=function(){var t,e=SETUPS.get("nemo.families"),n=a.getFamilies();if(!e&&n)for(t in e={},n)n[t].showstandard&&"true"===n[t].showstandard&&(e[t]=n[t]);return e||null},a.getFamilies=function(){return r.a.getFamilies()},a.sendRenderServiceRequest=function(t,e,n,i){return r.a.sendRenderServiceRequest(t,e,n,i)},a.search=function(t,e){var n=a.searchItems(t,e);return n.length>0?o.groupByFamily(n):[]},o.groupByFamily=function(t){var e,n,i={search:[]},r=a.getFamilies(),o={},s=a.getCarlineName(),l=t||{};return jQuery.each(l,(function(t,a){if(void 0===a.family)return console.log("Found item without family: ",a),!0;if(n=r[a.family]){if(!n.name)return console.log("Found family without family.name: ",n),!0;n.group=n.group||n.name||n.id,o[n.group]||(o[n.group]=1,e={key:n.group,value:{carlineName:s,family:n,items:[]}},i.search.push(e)),e.value.items.push(a)}})),i.search},o.groupByExtColorKey=function(t){var e,n,i=a.getFamilies(),r=["extcolors.uni","extcolors.metallic","extcolors.pearl","extcolors.exclusive","extcolors.o","extcolors.m","extcolors.p"],o=[],s=[],l=a.getCarlineName(),c=t||{};for(jQuery.each(c,(function(t,e){if(void 0===e.family)return console.log("Found item without family: ",e),!0;if(n=i[e.family]){if(!n.name)return console.log("Found family without family.name: ",n),!0;n.group=n.group||n.id||n.name,n.group=n.group.trim(),-1===r.indexOf(n.group)?console.log("Found unknown family group: ",n.group):(o[n.group]||(o[n.group]={key:n.group,value:{carlineName:l,family:n,items:[]}}),o[n.group].value.items.push(e))}})),e=0;e<r.length;e++)o[r[e]]&&s.push(o[r[e]]);return s},a.getRenderUrl=function(){return SETUPS.get("nemo.url.mediaservice")||null},a.getSelectedItems=function(){var t,e=a.getItems()||{},n=a.getSpecialFamilies(),i={},r=0;for(t in e)e[t].status&&"1"===e[t].status.charAt(3)&&("0"===e[t].status.charAt(4)&&(i[t]=e[t],r++),"1"===e[t].status.charAt(4)&&e[t].family&&n[e[t].family]&&(i[t]=e[t],r++));return r>0?i:null},a.getSelectedTrimline=function(){var t,e=a.getSelectedItems(),n=[];if(e)for(t=(n=Object.keys(e)).length;t--;)if(n[t].indexOf("trimline_")>-1)return n[t];return null},a.getSelectedItemsArray=function(){var t={};return jQuery.each(a.getItems(),(function(e,n){n.selectionMethod&&(t[n.selectionMethod]=t[n.selectionMethod]||[],t[n.selectionMethod].push(n))})),t},a.getCarline=function(){return r.a.getCarline()},a.getCarlineName=function(){var t=a.getConfiguration();return t&&t.carlineName?t.carlineName:null},a.getEngine=function(){var t=a.getConfiguration();return t&&t.model?t.model:null},a.getTechdata=function(){var t=a.getConfiguration();return t&&t.techdata?t.techdata:null},a.getExtColor=function(){var t,e,n=a.getSelectedItemsIDsArray();for(t=0,e=n.length;t<e;t++)if(4===n[t].length)return n[t];return null},a.getModelYear=function(){var t=a.getConfiguration();return t&&t.modelyear?t.modelyear:null},a.getPriceRateMode=function(){var t=r.a.getHeader();return t&&t.mode?t.mode:"price"},a.getVisitorId=function(){var t=r.a.getHeader();return t&&t["visitor-id"]?t["visitor-id"]:null},a.getHiddenItemIDsFromVersion=function(){return r.a.getHiddenItemIDsFromVersion()},a.getPrString=function(){return r.a.getPrString()},a.getConfigurationStartType=function(){return r.a.getConfigurationStartType()},a.isContinuedConfiguration=function(){return r.a.isContinuedConfiguration()},a.getContentVersion=function(){var t=r.a.getHeader();return t&&t.version?t.version:null},a.getMarketVersion=function(){var t=r.a.getHeader();return t&&t.marketVersion?t.marketVersion:null},a.isLoggedIn=function(){return!!(r.a.getHeader()&&!0===r.a.getHeader()["logged-in"])},a.setLogin=function(t,e){return r.a.setLogin(t,e)},a.getSearchStopWords=function(){return r.a.getSearchStopWords()},a.getConflicts=function(){return r.a.getConflicts()},a.getConflictTriggers=function(){var t=null,e=a.getConflicts();return e&&e.triggers&&e.triggers.length&&(t=e.triggers),t},a.getTransfers=function(){var t=r.a.getTransfers();return t&&t.deleted&&t.deleted.length?t:null},a.getAudicode=function(){return r.a.getAudicode()},a.getConfiguration=function(){return r.a.getConfiguration()},a.getVersion=function(){return r.a.getVersion()},a.getMemcacheVersion=function(){return r.a.getMemcacheVersion()},a.getDpuUrl=function(){return r.a.getDpuUrl()},a.getContext=function(){return r.a.getContext()},a.getSubsessionID=function(){return r.a.getSubsessionID()},a.setSubsessionID=function(t){return r.a.setSubsessionID(t)},a.getMotorcode=function(){var t=a.getConfiguration();return t&&t.model?t.model:null},a.getConfigurationAssets=function(){var t=a.getConfiguration();return t&&t.assets?t.assets:null},a.getCarImages=function(){return r.a.getImages()},a.getExtColors=function(){var t=o.getItemsByFamily("extcolors");return t?o.groupByExtColorKey(t):null},a.getDocrootUrl=function(){var t=window.location.protocol+"//"+window.location.host+(SETUPS.get("nemo.url.static")||"");return"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t},a.isConfigurable=function(){return!!SETUPS.get("nemo.url.carinfo")},a.isInPreviewMode=function(){return!!SETUPS.get("nemo.url.preview")},a.getPageTree=function(){return SETUPS.get("pagetree")},a.getSearchResultsPageUrl=function(){return SETUPS.get("searchResultsLink")||null},a.searchNavigation=function(t,e){var n=[],i=[],r=t.toLowerCase();switch(e){case"model":i=o.getModelNavigationStorage();break;case"siteMap":i=o.getSiteNavigationStorage();break;case"footer":i=o.getFooterNavigationStorage();break;default:i=[]}return jQuery.each(i,(function(t,e){if(!e.search)return!0;-1!==e.search.indexOf(r)&&e.url&&n.push(e)})),n},a.getItems=function(){return r.a.getItems()||null},a.isConfigurationStarted=function(){return r.a.isConfigurationStarted()},a.hasCustomConfiguration=function(){return r.a.hasCustomConfiguration()},a.isOptionSelectedInConfiguration=function(t){return a.getSelectedItemsIDsArray().indexOf(t)>-1},a.getSelectedItemsIDsArray=function(){var t=a.getSelectedItems()||{};return Object.keys(t)},a.getPrices=function(){var t=a.getConfiguration();return t&&t.prices?t.prices:null},a.getItem=function(t){var e=a.getItems();return e&&e[t]?e[t]:null},a.getItemsByStatus=function(t){var e=a.getItems(),n=null,i=t;return i&&e&&("function"!=typeof i.compile&&(i=new RegExp(i)),jQuery.each(e,(function(t,e){e.status&&i.test(e.status)&&((n=n||{})[t]=e)}))),n},o.getItemsByFamily=function(t){var e=a.getItems(),n=null,i=t;return i&&e&&("function"!=typeof i.compile&&(i=new RegExp(i)),jQuery.each(e,(function(t,e){e.family&&i.test(e.family)&&((n=n||{})[t]=e)}))),n},a.getItemsByFamily=o.getItemsByFamily,a.getConfigurationCarPriceRate=function(){var t=a.getConfiguration();return t&&t.rate?t.rate:null},a.getNwbLink=function(){var t=a.getConfiguration();return t&&t.nwbLink?t.nwbLink:null},a.getVtpRequestUrl=function(){return SETUPS.get("nemo.vtp.request.url")},a.getVtpEntryUrl=function(){return SETUPS.get("nemo.vtp.entry.url")},a.getDOMStatusCode=function(t){var e=t?t.get(0).className:"";return-1===e.indexOf("nm-j-configurator-status_")?null:e.split("nm-j-configurator-status_")[1].split(" ")[0]},a.supportsLocalStorage=function(){if(null!==window.navigator.userAgent.toLowerCase().match(/adobeair/i))return!0;try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return t.code===window.DOMException.QUOTA_EXCEEDED_ERR&&0===localStorage.length}},a.getConfigurationFamilies=function(){var t=a.getConfiguration();return t&&t.families?t.families:null},a.getRecommendations=function(){var t=a.getConfiguration();return t&&t.recommendations?t.recommendations:[]},a.getDynamicRecommendations=function(){var t=a.getConfiguration();return t&&t.empfehlungenPoC&&t.empfehlungenPoC.recommendations?t.empfehlungenPoC.recommendations:[]},a.resolvePackagesInPrString=function(t){let e=[];if(t){const n=t.split("|"),i=this.getItems();for(let t=0;t<n.length;t++){const r=new RegExp("([\\d\\w]{2,})_in_"+n[t],"gi"),o=Object.getOwnPropertyNames(i).reduce((t,e)=>{const n=r.exec(e);return n&&(t.find(t=>t===n[1])||t.push(n[1])),t},[n[t]]);e=[...e,...o]}return e.join("|")}},a.replacePackagesInPrString=function(t){let e=t;if(t){const t=/([\d\w]{2,})_in_[\d\w]{2,}(|$)?/gi;let n;for(;null!==(n=t.exec(e));)n&&n.length>1&&(e=e.replace(n[0],n[1]))}return e},o.getSiteNavigationStorage=function(){var t=SETUPS.get("siteNavigation");return t||[]},o.getModelNavigationStorage=function(){var t=SETUPS.get("modelNavigation");return t||[]},a.searchItems=function(t,e){var n,r=!!window.mss||i.state.getStateOfModeFor("debug")||!1,o=a.getItems()||{},s=[],l=a.getFamilies(),c=t.toLowerCase();return c=c.replace(/^\w\s/," ").replace(/\s\w$/," ").replace(/\s\w\s/," ").trim(),jQuery.each(o,(function(t,i){var o;if(!i.search||"string"!=typeof i.search)return!0;if(n=i.search,r&&i.mbvId&&(n+=" | "+i.mbvId.toLowerCase()),-1!==n.indexOf(c)){if(e&&("00000"===i.status||"10000"===i.status))return!0;if(void 0===i.family)return!0;if(!(o=l[i.family])||!o.name)return!0;s.push(i)}})),s},a.isInitialized=function(){return r.a.isInitialized()},a.getCarlineUrl=function(t){var e=SETUPS.get("nemo.carlineID2Url")||{},n=e[t];return!n&&(e=SETUPS.get("mssc.carlinemapping")||{})?(n=e[t])?n.posterViewUrl:void 0:n?n.baseurl:void 0},a.getCurrentCarlineUrl=function(){var t=a.getCarline();return a.getCarlineUrl(t)},o.d4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},o.guid=function(){return o.d4()+o.d4()+o.d4()+o.d4()+o.d4()},a.getConfigurationId=function(){return o.configurationID=o.configurationID||o.guid(),o.configurationID},a.getModelsInfo=function(t){return r.a.getModelsInfo(t)},a.getModelsInfoFootnotes=function(t){return r.a.getModelsInfoFootnotes(t)},a.getModelsInfoSectionFootnotes=function(t){return r.a.getModelsInfoSectionFootnotes(t)},a.getCurrentModelInfo=function(){var t=a.getEngine();return t?a.getModelsInfo(t):null},a.getModelDisclaimer=function(t){return r.a.getModelDisclaimer(t)},a.getAveString=function(){var t=a.getConfiguration();return t&&t.ave?t.ave:null},a.getSCSmatchingAttributes=function(){var t=a.getSCSAttributes();return t&&t.attrs?t.attrs:[]},a.getSCSAttributes=function(){var t=a.getConfiguration();return t&&t["stock-car-attrs"]?t["stock-car-attrs"]:null},a.getErrorMessage=function(t){const e=o.getErrorMessageFromI18N(t),n=o.getErrorMessageFromDpuError(t),i=e||n;return i||o.getErrorMessageFromI18N("DEFAULT")},o.getErrorMessageFromI18N=function(t){const e="string"==typeof t?t:t.id;return window.i18n["error.message."+e]},o.getErrorMessageFromDpuError=function(t){return t.message?t.message:null},a.getAltImagePath=function(t,e){var n,i;return!!((n=a.getCarline())&&t&&e)&&(i=o.setFallbackGroup(n),o.setImagePath(i,t,e))},o.setFallbackGroup=function(t){var e;return e=t.substring(0,1),0!==t.indexOf("rs")&&0!==t.indexOf("s")||(e="a"),0===t.indexOf("tt")&&(e="r"),e},o.setImagePath=function(t,e,n){var i,r=".jpg";return i="selection-compare"!==e?t+"-"+n.split(".")[0]+"-"+e+r:t+"-"+e+(r=".jpg"),i="undefined"!=typeof mss?a.getDocrootUrl()+"/cms4i-nemo-mss/fallback-renderings/"+i:a.getDocrootUrl()+"/cms4i-nemo/fallback-renderings/"+i},a.getMinPriceForItemIds=function(t){const e=t.map(t=>a.getItem(t)).reduce((t,e)=>!t||void 0===e.priceValue&&void 0!==t.priceValue||e.priceValue<t.priceValue?e:t,!1);return e&&e.priceValue?e.price:""},o.getFooterNavigationStorage=function(){var t=SETUPS.get("footerNavigation");return t||[]},a.openEngineDisclaimerLayer=function(){r.a.sendEngineDisclaimerLayerEvent()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(0),r=n(14),o=n(4),a=n(1),s=n(68),l=n(31);const c=t=>{const e=new Error;if(e.status=t.statuscode,t.audicode&&t.audicode.message&&(e.name="custom-dpu-error"),t.header&&t.header.error){if(e.id=t.header.error.id,"HIDDEN_CARLINE"===e.id)return void(()=>{const t={layerType:"MessageLayerElement",clickOnShaderClosesModal:!1,isLayerClosable:!1,dataset:{headline:window.i18n["error.no_wltp_data.modal_layer.headline"],messageType:"string",message:window.i18n["error.no_wltp_data.modal_layer.message"],actionButtonLinkText:window.i18n["error.no_wltp_data.modal_layer.link.text"],actionButtonLinkUrl:window.i18n["error.no_wltp_data.modal_layer.link.url"]}},e=new CustomEvent("modalLayer:open",{detail:t});document.dispatchEvent(e)})();t.header.error.message?e.message=t.header.error.message:t.header.statusmessage&&(e.message=t.header.statusmessage)}throw e},u={},d={__:u};let m=!1;u.oDefaults={actionsLookup:{itemAdd:"set",removeItem:"remove",itemRemove:"remove"}},u.configurationStartType="default",u.configurationContinued=!1,u.dataInitialized=!1,u.configurationEndpoint="configuration",u.dpuExtra="",u.storage={configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null,modelsInfo:null,images:null},u.sendResetRequest=function(){u.checkDefaultSetup();let t={context:d.getContext(),ids:u.getDefaultPrString()};t=u.addDpuExtraData(t),t=u.addSubsessionData(t);const e=new URLSearchParams(t),n=d.getDpuUrl()+u.configurationEndpoint+"?"+e.toString();return fetch(n,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.dispatchPriceMode=function(t){const e=new CustomEvent("setPriceMode",{detail:"rate"===t?"RATE":"PRICE"});document.dispatchEvent(e)},d.changeRatePriceMode=function(t){return u.checkDefaultSetup(),new Promise((function(e,n){const i=d.getHeader();if((i&&i.mode?i.mode:"price")===t)return n(new TypeError("Rate/Price mode did not change")),null;const r="rate"===t?"rate":"price";let o={context:d.getContext(),ids:d.getPrString(),mode:r};o=u.addDpuExtraData(o),u.isStatelessMode||(o=u.addSubsessionData(o));const a=d.getDpuUrl()+u.configurationEndpoint+"?"+new URLSearchParams(o).toString();return fetch(a,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus).then(t=>{u.setConfigurationRaw(t).then(()=>{d.dispatchPriceMode(r),e(!0)})},t=>{n(new TypeError("Error switching priceRateMode: "+t.message))})}))},u.sendChangeRequest=function(t){const e=d.getDpuUrl()+u.configurationEndpoint+"?";let n=u.generateRequestData(t);n=u.addDpuExtraData(n),n=u.addSubsessionData(n);const i=e+new URLSearchParams(n).toString();return fetch(i,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus).catch(t=>{throw t.id||(t.id="NETWORK_ERROR"),t})},u.setStatelessParams=function(t){var e=d.getConflicts();return u.isStatelessMode&&e&&(e.triggerIds&&(t.trigger=e.triggerIds),e.choiceIds&&(t.choices=e.choiceIds)),t},u.generateRequestData=function(t){var e=d.getSubsessionID(),n=u.oDefaults.actionsLookup[t.action]||"missing_action",i=t.id,r={context:d.getContext(),ids:d.getPrString()};return t.count&&(i+="*"+t.count),r[n]=i,r=u.setStatelessParams(r),e&&!u.isStatelessMode&&(r.subsession=e),u.isDebugMode()&&(r.dpu_extra="messages"),r},u.isDebugMode=function(){var t=document.querySelector("html");return new RegExp("(^| )nm-state-is-debug( |$)","gi").test(t.className)},d.getVersion=function(){var t=d.getHeader();return t&&t.version?t.version:null},d.getStaticVersion=function(){var t=SETUPS.get("nemo.staticversion");return t||null},d.isInitialized=function(){return u.dataInitialized},d.getMemcacheVersion=function(){var t,e,n="",i=d.getDpuHeader();return i&&(i.version&&(n=i.version),i.taggedVersion?n=i.taggedVersion:i.marketVersion&&(n=i.marketVersion),!!i.taggedVersion&&!!i.marketVersion&&i.manualRevision&&parseInt(i.manualRevision,10)>0&&(n+="."+i.manualRevision)),t=d.getStaticVersion(),(e=SETUPS.get("nemo.build.time"))&&t&&e!==t&&(n+="."+t),n&&0===n.toString().indexOf(".")&&(n=n.substring(1)),n},d.getContext=function(){var t=d.getHeader();return t&&t.context?t.context:null},d.getSubsessionID=function(){var t=d.getHeader();return t&&t.subsession?t.subsession:null},d.setSubsessionID=function(t){u.storage.header.subsession=t,u.updateConfigDataForConsumers()},d.getPrString=function(){var t=d.getConfiguration();return t&&t.prstring?t.prstring:null},u.getDefaultPrString=function(){return u.storage.defaultPrString||null},u.setDefaultPrString=function(t){u.storage.defaultPrString=t||null,u.updateConfigDataForConsumers()},d.handleConfigurationResponse=function(t){return u.setConfigurationRaw(t)},d.adoptConfiguration=function(t){return u.setConfigurationRaw(t)},u.setPrice=function(t){t&&t.configuration&&t.configuration.prices&&t.configuration.prices.rotr&&(u.storage.configuration.rotrprice=t.configuration.prices.rotr)},u.setConfigurationRaw=async function(t){let e,n=!0,i=d.getPrString();if(u.setHeader(t),u.setAudicode(t),u.setConfiguration(t),u.setPrice(t),u.setItems(t),u.setFamilies(t),u.storage.searchstopwords=t.searchstopwords||u.storage.searchstopwords||null,u.setConflictsAndTransfers(t),u.updateConfigDataForConsumers(),!t.configuration)return!1;d.sendEngineDisclaimerLayerEvent(),u.getDefaultPrString()||(e=SETUPS.get("nemo.default.prstring")||t.configuration.prstring,u.setDefaultPrString(e)),i&&i===d.getPrString()&&(n=!1);try{const t=await Object(l.a)(u.storage.configuration);u.setImages(t)}catch(t){console.error(t)}return n},u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY="engine-disclaimer-layer-shown",u.engineDisclaimerLayerShownNoSessionStorage={},u.getEngineDisclaimerLayerShown=function(){try{const t=window.sessionStorage.getItem(u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY);return!!JSON.parse(t)[u.storage.configuration.model]}catch(t){return!!u.engineDisclaimerLayerShownNoSessionStorage[u.storage.configuration.model]}},u.setEngineDisclaimerLayerShown=function(){try{const t=window.sessionStorage.getItem(u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY);let e;try{e=JSON.parse(t)||{}}catch(t){e={}}e[u.storage.configuration.model]=!0,window.sessionStorage.setItem(u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY,JSON.stringify(e))}catch(t){u.engineDisclaimerLayerShownNoSessionStorage[u.storage.configuration.model]=!0}},d.sendEngineDisclaimerLayerEvent=async function(){const t=document.querySelector(".nm-content"),e=t?t.getAttribute("data-template"):"";if(u.getEngineDisclaimerLayerShown()||"home"===e)return;await a.polling.wait(d.isInitialized,5e3);const n=d.getConfiguration(),i=n&&n.model?d.getModelDisclaimer(n.model):null;if(i&&i.headline&&i.text){const t={layerType:"EngineDisclaimerLayerElement",options:{onEscClick:!1,onShaderClick:!1,centerVertically:!0},dataset:{headline:i.headline,message:i.text}},e=new CustomEvent("modalLayer:open",{detail:t});document.dispatchEvent(e),u.setEngineDisclaimerLayerShown()}},u.setFamilies=function(t){t&&t.families&&(u.storage.families=jQuery.extend(!0,u.storage.families,t.families),u.updateConfigDataForConsumers())},d.getFamilies=function(){return u.storage.families||null},u.setConflictsAndTransfers=function(t){u.storage.conflicts=t.conflicts||null,u.storage.transfers=t.transfers||null},u.setAudicode=function(t){u.storage.audicode=!(!t.audicode||!t.audicode.id)&&t.audicode.id},u.setConfiguration=function(t){u.storage.configuration=jQuery.extend(!1,u.storage.configuration,t.configuration)},u.setImages=function(t){u.storage.images=jQuery.extend(!1,u.storage.images,t)},u.setHeader=function(t){var e;t&&t.header&&(e=u.storage&&u.storage.header&&u.storage.header.version?{version:u.storage.header.version}:{},u.storage.header=jQuery.extend(!0,u.storage.header,t.header,e))},u.setItems=function(t){var e,n;if("full"===t.itemsUpdateMode&&t.items)for(e in u.storage.items)u.storage.items.hasOwnProperty(e)&&u.storage.items[e].status&&(u.storage.items[e].status="00000");else for(n in console.log("DPU_MODEL.setItems::incrmental updateâ€¦"),t.items)t.items[n].packageDescription||(t.items[n].packageDescription="");for(n in t.items)t.items[n].subname?t.items[n].subname="("+t.items[n].subname+")":t.items[n].subname="";for(e in u.storage.items=jQuery.extend(!0,u.storage.items,t.items),u.storage.items)u.storage.items.hasOwnProperty(e)&&("11001"!==u.storage.items[e].status&&"10011"!==u.storage.items[e].status||(u.storage.items[e].price=window.i18n&&window.i18n.standard||"***Serie***"))},u.sendVersionRequest=function(){const t=d.getDpuUrl()+"version?",e=d.getCarline();if(!e)return Promise.reject(new TypeError("no carline defined for version request"));let n={context:d.getContext(),carline:e};n=u.addDpuExtraData(n);const i=new URLSearchParams(n);return fetch(t+i,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},u.handleVersionResponse=function(t){var e,n=t.items,r=[];if(n)for(e in n)n.hasOwnProperty(e)&&!0===n[e].hidden&&r.push(e);u.storage.header=t.header,u.storage.headerItems=r,u.updateConfigDataForConsumers(),u.eventBus.emit(i.appEvents.VERSION_LOAD_COMPLETE)},u.sendCarinfoRequest=function(){const t=u.getCarinfoUrl();return fetch(t,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},u.handleCarinfoResponse=function(t){return console.log("handleCarinfoResponse",t,d.isConfigurationStarted()),d.isConfigurationStarted()?(u.setFamilies(t),u.updateItemsFromCarinfo(t.items),u.eventBus.emit(i.appEvents.CARINFO_LOAD_COMPLETE),Promise.resolve(!1)):d.handleConfigurationResponse(t)},u.sendModelsinfoRequest=function(){const t=u.getModelsinfoUrl();return fetch(t,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},u.handleModelsinfoResponse=function(t){console.log("handleModelsinfoResponse",t,d.isConfigurationStarted()),u.storage.modelsInfo=t.models||null,u.storage.modelsInfoFootnotes=t.footnotes||null,u.storage.modelsInfoSectionFootnotes=t.sectionFootnotes||null,u.storage.modelsInfoDisclaimers=t.disclaimers||null,u.updateConfigDataForConsumers(),u.eventBus.emit(i.appEvents.MODELSINFO_LOAD_COMPLETE)},d.getModelsInfo=function(t){var e;return t?((e=u.storage.modelsInfo)?e[t]:null)||null:u.storage.modelsInfo||null},d.getModelsInfoFootnotes=t=>t?u.storage.modelsInfoFootnotes&&u.storage.modelsInfoFootnotes[t]?u.storage.modelsInfoFootnotes[t]:null:u.storage.modelsInfoFootnotes||null,d.getModelsInfoSectionFootnotes=t=>t?u.storage.modelsInfoSectionFootnotes&&u.storage.modelsInfoSectionFootnotes[t]?u.storage.modelsInfoSectionFootnotes[t]:null:u.storage.modelsInfoSectionFootnotes||null,d.getModelDisclaimer=t=>{if(t){const e=u.storage.modelsInfoDisclaimers?u.storage.modelsInfoDisclaimers[t]:null;if(e&&Array.isArray(e)&&e.length>0)return e[0]}return null},u.updateItemsFromCarinfo=function(t){var e=jQuery.extend(!0,{},d.getItems());if(!t)return console.log("Carinfo Items missing!"),!1;u.storage.items=t,u.storage.items=jQuery.extend(!0,u.storage.items,e),u.updateConfigDataForConsumers()},u.getCarinfoUrl=function(){var t=SETUPS.get("nemo.url.carinfo");return t?t=t.split(".json").join("."+d.getMemcacheVersion()+".json"):null},u.getModelsinfoUrl=function(){var t=SETUPS.get("nemo.url.modelsinfo");return t?t=t.split(".json").join("."+d.getMemcacheVersion()+".json"):null},u.setLoginState=function(t){var e=d.getHeader();e&&(e["logged-in"]=t)},d.sendCarstoreRequest=function(t="",e={}){u.checkDefaultSetup();if(-1===["list","delete","load"].indexOf(t))return Promise.reject(new TypeError("sendCarestoreRequest: invalid actionStr"));e.slot||(e.slot=null);const n=d.getDpuUrl()+"carstore?",i={action:t,context:d.getContext(),subsession:d.getSubsessionID()};let r=Object.assign({},i,e);r=u.addDpuExtraData(r);const o=n+new URLSearchParams(r).toString();return fetch(o,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},u.getFilteredPrNumbersFromCurrentConfig=function(t){var e,n,i,r,o,a=d.getPrString().split("|"),s=[];for(e=0,i=a.length,r=t.length;e<i;e++){for(o=!0,n=0;n<r;n++)a[e].indexOf(t[n])>-1&&(o=!1);!0===o&&s.push(a[e])}return s},d.sendRenderServiceRequest=function(t,e,n,i){u.checkDefaultSetup();const r=d.getDpuUrl()+"stateless-render-service?",o=u.getFilteredPrNumbersFromCurrentConfig(t);let a={context:d.getContext(),ids:o.join("|"),"render-prnrs":e,"render-views":n,"render-sizes":i};a=u.addDpuExtraData(a);const s=r+new URLSearchParams(a).toString();return fetch(s,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.sendCarstoreHistoryRequest=function(t){u.checkDefaultSetup();const e=d.getDpuUrl()+"history?";let n=t;t&&""!==n&&void 0!==n||(n={}),n.slot&&""!==n.slot&&void 0!==n.slot||(n.slot=null);let i={context:d.getContext(),subsession:d.getSubsessionID()};i=Object.assign(i,n),i=u.addDpuExtraData(i);const r=e+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.setLogin=function(t,e){return new Promise((function(n,i){"boolean"==typeof t&&e?(d.setSubsessionID(e),u.setLoginState(t),n(t)):(u.setLoginState(!1),i(new TypeError("login failure")))}))},d.requestConfigurationChange=function(t){return new Promise((function(e,n){u.sendChangeRequest(t).then((function(t){e(d.handleConfigurationResponse(t))}),(function(t){n(t)})).catch(t=>{throw new Error(t)})}))},d.requestConfigurationReset=function(){return new Promise((function(t,e){u.sendResetRequest().then((function(e){return t(d.handleConfigurationResponse(e))}),(function(t){e(t)}))}))},d.setItemSelectionMethod=function(t,e){var n=d.getItems();n&&n[t]&&(n[t].selectionMethod=e||null)},d.requestTransferOrConflictResolve=function(t){return new Promise((function(e,n){const i=u.addDpuExtraParam(t);return fetch(i,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus).then(t=>e(d.handleConfigurationResponse(t)),t=>{n(t)})}))},d.loadConfigurationByAudiCode=function(t){u.checkDefaultSetup();const e=d.getDpuUrl()+"audicode?";let n=t;void 0!==n&&(n=n.toUpperCase());let i={context:d.getContext(),audicode:n};i=u.addDpuExtraData(i),i=u.addSubsessionData(i);const r=e+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.loadConfigurationByAudiCodeStateless=t=>{if(!t)return;const e=d.getDpuUrl()+"stateless-audicode?",n=u.addDpuExtraData({context:d.getContext(),audicode:t.toUpperCase()}),i=e+new URLSearchParams(n).toString();return fetch(i,{credentials:"omit"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.generateAudiCode=function(t){u.checkDefaultSetup();const e=d.getDpuUrl()+"audicode?";let n=t;n&&""!==n&&void 0!==n||(n={});let i={context:d.getContext(),ids:d.getPrString(),subsession:d.getSubsessionID()};i=Object.assign(i,n),i=u.addDpuExtraData(i);const r=e+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.loadConfigurationByPrString=function(t,e){u.checkDefaultSetup();const n=d.getDpuUrl()+u.configurationEndpoint+"?";let i={context:d.getContext(),ids:t};e&&!u.isStatelessMode&&(i.subsession=e),i=u.addDpuExtraData(i);const r=n+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus).catch(e=>{if("PRSTRING_MODEL_NOT_FOUND"===e.id){const n=new CustomEvent("TNT_ERROR",{detail:{errorCode:e.id,prString:t}});document.dispatchEvent(n)}throw e})},d.getHeader=function(){return u.storage.header||null},d.getHiddenItemIDsFromVersion=function(){return u.storage.headerItems||null},d.getSearchStopWords=function(){return u.storage.searchstopwords||null},d.transferCompleted=function(){u.storage.transfers=null,u.updateConfigDataForConsumers()},d.fireDataInitializationChain=function(){return u.dataInitialized=!1,u.checkDefaultSetup(),u.sendVersionRequest().then(u.handleVersionResponse).then(u.getSignedLink).then(u.sendCarinfoRequest).then(u.handleCarinfoResponse).then(u.sendModelsinfoRequest).then(u.handleModelsinfoResponse).then((function(){u.dataInitialized=!0}))},d.getConflicts=function(){return u.storage.conflicts||null},d.getDpuHeader=function(){return u.storage.header||null},d.getTransfers=function(){return u.storage.transfers||null},d.getRecommendations=function(){return u.storage.configuration.recommendations||[]},d.getAudicode=function(){return u.storage.audicode||!1},d.getConfiguration=function(){return u.storage.configuration||null},d.getRawConfigurationData=function(){return u.storage||null},d.getItems=function(){return u.storage.items||null},d.getImages=function(){return u.storage.images||null},d.getCarline=function(){var t=d.getConfiguration();return t&&t.carline?t.carline:SETUPS.get("nemo.default.carline")||null},d.getDpuUrl=function(){return SETUPS.get("nemo.url.dpu")||null},d.isConfigurationStarted=function(){return u.configurationStartType&&"default"!==u.configurationStartType},d.getFamilies=function(){return u.storage.families||null},d.hasCustomConfiguration=function(){return d.isConfigurationStarted()&&u.getDefaultPrString()!==d.getPrString()},d.isContinuedConfiguration=function(){return u.configurationContinued},u.getSignedLink=function(){const t=SETUPS.get("nemo.url.preview");return t?fetch(t,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus).then(t=>u.setConfigurationRaw(t),t=>console.warn("loading signedPreviewUrl failed: "+t.message)):Promise.resolve("no signedPreviewUrl available")},d.switchCarline=function(t,e,n){let i,r;return u.checkDefaultSetup(),e&&t?(SETUPS.set("nemo.default.carline",t),SETUPS.set("nemo.url.carinfo",e),SETUPS.set("nemo.url.modelsinfo",n),i=d.getContext(),r={configuration:{carline:t},header:{context:i}},u.clearConfigurationData(r),d.fireDataInitializationChain()):Promise.reject("switchCarline: missing params for initialization!")},u.clearConfigurationData=function(t){var e;if(u.configurationContinued=!1,u.configurationStartType="default",u.clearStorage(),t&&t)for(e in t)t[e]&&(u.storage[e]=t[e]);u.updateConfigDataForConsumers()},u.clearStorage=function(){u.storage={configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null}},d.setConfigurationStartType=function(t){if("default"===d.getConfigurationStartType()&&"configuration-change"===t)return u.configurationContinued=!1,u.configurationStartType=t,void u.eventBus.emit(i.appEvents.CONFIG_START,u.configurationStartType);"configuration-change"!==t?(u.configurationStartType=t,u.configurationContinued=!1,u.eventBus.emit(i.appEvents.CONFIG_START,u.configurationStartType)):u.configurationContinued=!0},u.checkDPUresponseStatus=function(t){if(t.header&&t.header.statuscode){const e=Math.floor(t.header.statuscode/100);3!==e&&5!==e||c(t)}return t},d.getConfigurationStartType=function(){return u.configurationStartType},d.resetToDefaultSetupParams=function(){var t={prstring:SETUPS.get("nemo.default.prstring"),header:SETUPS.get("nemo.default.header"),configuration:SETUPS.get("nemo.default.configuration"),items:SETUPS.get("nemo.minimal.carinfoitems")||{}};u.clearConfigurationData(t)},u.checkDefaultSetup=function(){m||(u.isStatelessMode=SETUPS.get("scope.nemo.configuration.stateless"),u.configurationEndpoint=u.isStatelessMode?"stateless-configuration":"configuration",m=!0,d.resetToDefaultSetupParams())},d.setDpuExtra=function(t){u.dpuExtra=t,window.sessionStorage&&(t?window.sessionStorage.setItem("dpu_extra",t):window.sessionStorage.removeItem("dpu_extra"))},d.getDpuExtra=function(){let t="";return u.dpuExtra?t=u.dpuExtra:u.isDebugMode()&&(t="messages"),t},u.updateConfigDataForConsumers=function(){o.stateRegistry.triggerAction(r.a,"update",u.storage),Object(s.a)(u.storage)},u.restoreDpuExtra=function(){window.sessionStorage&&(u.dpuExtra=window.sessionStorage.getItem("dpu_extra"))},u.addDpuExtraData=function(t){const e=d.getDpuExtra();return e&&(t.dpu_extra=e),t},u.addDpuExtraParam=function(t){const e=d.getDpuExtra();return e?t.indexOf("?")>=0?t+"&dpu_extra="+e:t+"?dpu_extra="+e:t},u.addSubsessionData=function(t){const e=d.getSubsessionID();return e&&(t.subsession=e),t},d.resetAudicodeRescueInfo=()=>{u.storage.configuration["audicode-rescue-info"]=void 0,u.updateConfigDataForConsumers()},u.addEvents=function(){u.eventBus.on(i.appEvents.PAGE_READY,d.sendEngineDisclaimerLayerEvent)},d.initialize=function(t){u.eventBus=t,u.checkDefaultSetup(),u.restoreDpuExtra(),u.addEvents()}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__4__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__5__},,function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(0),r=n(2),o=n(3),a=n(32),s=n(19),l=n(42),c=n(44),u=n(45),d=n(4),m=n(13),g=n(9);const f={},p={__:f};let h=!1;f.dataInitialized=!1,f.initMaxTries=20,f.oDefaults={sSelectorDelegateClick:".nm-j-configurator-delegate-click",sSelectorDelegateChangeCount:".nm-quantity",sSelectorDelegateNewClick:".nm-configuration-new",sSelectorPrintBtn:".nm-configuration-print"},f.startLayerActivated=!1,f.openedLayer=null,f.configurationContinued=!1,f.addEvents=function(){f.legacyEventBus.on("click.configuration.item",f.oDefaults.sSelectorDelegateClick,{triggerAction:"click"},f.handleConfigurationItemChanges),f.legacyEventBus.on("change.configuration.count",f.oDefaults.sSelectorDelegateChangeCount,{triggerAction:"changeCount"},f.handleConfigurationItemChanges),f.legacyEventBus.on("click.configuration.new",f.oDefaults.sSelectorDelegateNewClick,f.handleNewConfigurationClick),f.addModeSwitchEventAfterReset(),f.eventBus.on(i.appEvents.CONFLICT_CLOSE,f.handleConflictClose),f.eventBus.on(i.appEvents.TRANSFER_CLOSE,f.handleTransferClose),f.eventBus.on(i.appEvents.STARTLAYER_CLOSE,f.handleStartlayerClose),f.legacyEventBus.on("click.nemo.configurator.print",f.oDefaults.sSelectorPrintBtn,f.callPrint),f.eventBus.on(i.appEvents.FORM_FINISHED,f.receiveAudicodeForm),document.addEventListener("changeItemInConfiguration",f.handleEventForConfigurationChange),document.addEventListener("configurationUpdateFromCoLa",f.handleEventForConfigurationChange),document.addEventListener("resetConfiguration",f.handleNewConfigurationClick)},f.callPrint=function(){f.eventBus.emit(i.appEvents.CONFIG_PDF);let t=SETUPS.get("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIPrint"),e=jQuery(this),n=r.a.getContext(),o=r.a.getSubsessionID()?"&subsession="+r.a.getSubsessionID():"",a=r.a.getPrString();return t=t+"?context="+n+o+"&ids="+encodeURIComponent(a),e.attr({href:t,target:"_blank"}),!0},f.isSelectedRadioButton=function(t){var e=t.closest(".nm-j-configurator-item");return!(!e.is(".nm-j-configurator-status_11010, .nm-j-configurator-status_100110")||e.is(".nm-md-bicolor-chooser-el-options")||!1!==t.data("is-deselectable"))},f.isPreselectedConflictItem=function(t){var e,n;return!!r.a.getConflicts()&&(-1!==(n=t.closest(".nm-j-configurator-item").get(0).className).indexOf("nm-j-configurator-status_")&&(5===(e=n.split("nm-j-configurator-status_")[1].split(" ")[0]).length&&"1"===e[3]))},f.handleConfigurationItemChanges=function(t){f.cancelEvent(t);let e=jQuery(t.target);if(f.isSelectedRadioButton(e)||f.isPreselectedConflictItem(e))return!1;let n,o=e.closest(".nm-j-configurator-item"),a=o.attr("data-configurator-id"),s=o.find(f.oDefaults.sSelectorDelegateChangeCount).val(),l=t.data.triggerAction||"no-GUI-action-defined",c=r.a.isOptionSelectedInConfiguration(a);switch(l){case"changeCount":if(!c)return!1;n="itemAdd";break;case"click":if(!1===f.isSelectableItem(o))return;n=c?"itemRemove":"itemAdd",n=f.isIndividualColorConfiguration(a)?"itemAdd":n;break;case"dropDown":o=jQuery(this),a=o.val(),c=r.a.isOptionSelectedInConfiguration(a),n=c?"itemRemove":"itemAdd";break;default:return}let u={id:a,count:s,action:n};const d=jQuery.extend(!0,u,{triggerAction:l,$element:o});f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_START,d),f.triggerChangeRequest(u)},f.handleEventForConfigurationChange=function(t){try{t.detail.id&&f.triggerConfigurationChange(t.detail.id)}catch(t){console.error("handleEventForConfigurationChange: ","<id> is not defined")}},f.triggerConfigurationChange=function(t){var e={},n=r.a.isOptionSelectedInConfiguration(t);e.id=t,e.count=0,e.action=n?"itemRemove":"itemAdd",f.triggerChangeRequest(e)},f.receiveAudicodeForm=function(t){f.cancelEvent(this),t.id&&t.id.indexOf("audicode")>-1&&(f.lockPrString(r.a.getPrString()),Promise.resolve(t.response).then((function(t){if(f.detectConfigurationChanges(r.a.getPrString()))throw new TypeError("receiveAudicodeForm:configuration changed while processing, loaded configuration was rejected");p.handleExternalConfiguration(t,{startType:"audicode-input"})})).then(()=>{f.dispatchCustomConfigurationStartEvent("audicode-input")}).catch(t=>{console.warn(t),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-audicode-error"],t.message])}))},p.generateAudiCode=function(t){return o.a.generateAudiCode(t)},f.lockPrString=function(t){f.lockedPrString=t},f.detectConfigurationChanges=function(t){return f.lockedPrString!==t},p.handleExternalConfiguration=function(t,e){if(!t||t&&t.audicode&&!1===t.audicode.success||t&&t.errorMessage){let e;if(t.audicode&&!t.audicode.success&&t.audicode&&t.audicode["other-url"])return void(window.location.href=t.audicode["other-url"]);throw e=t&&t.audicode&&t.audicode.message?t.audicode.message:t&&t.errorMessage?t.errorMessage:t&&t.header&&t.header.errormessages?t.header.errormessages.join(","):"unknown_error",new TypeError(e)}if(!e.startType)return o.a.adoptConfiguration(t).then((function(t){f.handleConfigurationUpdate(t)})).catch((function(t){f.handleConfigurationUpdateError(t)}));if(f.startLayerActivated=!0,"user-configuration"===e.startType&&(f.startLayerActivated=!1),s.a.isMatchingConfiguration(t))return o.a.adoptConfiguration(t).then((function(t){f.setConfigurationStartType(e.startType),f.handleConfigurationUpdate(t)})).catch((function(t){f.handleConfigurationUpdateError(t)}));{let n=r.a.getSubsessionID();return t.subsession&&(n=t.subsession),t.header&&t.header.subsession&&(n=t.header.subsession),new Promise((function(){s.a.useTrampoline(t,n,e.startType),Promise.reject("using trampoline page")})).catch((function(t){console.err("Trampoline failed",t)}))}},f.setConfigurationStartType=function(t){const e="default"===o.a.getConfigurationStartType()&&"configuration-change"===t?"configuration-start":t;o.a.setConfigurationStartType(t),Object(g.d)(e)?f.configurationStartedByAudiCodeSearch=!0:f.dispatchCustomConfigurationStartEvent(e)},f.handleConfigurationUpdate=function(){f.eventBus.emit(i.appEvents.CONFIG_UPDATE),f.configurationStartedByAudiCodeSearch?f.configurationStartedByAudiCodeSearch=!1:f.dispatchCustomConfigurationUpdateEvent(),f.dispatchCustomEvent(),f.checkLayerQueue()},f.dispatchCustomEvent=function(){try{let t=r.a.getItems(),e=new CustomEvent("configurationItemsUpdate",{detail:{items:t}});document.dispatchEvent(e)}catch(t){console.error("dispatchCustomEvent: ","the custom-event for the configuration-change could not be dispatched",t)}},f.dispatchCustomConfigurationStartEvent=function(t){const e=new CustomEvent("configuration-start-tracking",{detail:{type:t}});document.dispatchEvent(e)},f.dispatchCustomConfigurationUpdateEvent=function(){document.dispatchEvent(new CustomEvent("configuration-update-tracking"))},f.checkLayerQueue=function(){let t,e;e=r.a.getTransfers(),t=r.a.getConflicts();let n=!e&&!t,i=r.a.getConfigurationStartType();if(f.startLayerActivated&&n&&!r.a.isContinuedConfiguration()&&"default"!==i&&"configuration-change"!==i){if(f.startLayerActivated=!1,"configuration-reset"===i)return f.handleStartLayerDemand(),!1;{let t={configuration:r.a.getConfiguration(),assets:r.a.getConfigurationAssets(),images:r.a.getCarImages(),ms_url:r.a.getRenderUrl(),start_type:i};return f.handleStartLayerDemand(t),!1}}return f.unHandleStartLayerDemand(),e&&r.a.isContinuedConfiguration()?(c.a.handleTransfer(e),!1):!t||(u.a.handleConflict(t),!1)},f.handleStartLayerDemand=function(t){if(t&&t.configuration&&t.configuration["audicode-rescue-info"]){const e=f.getAudicodeRescueLayerMessages(t);if(e.length>0)return void f.triggerAudicodeRescueLayer(t,e)}a.a.handleStartLayer(t).then((function(){}),(function(t){console.warn("handleStartLayerDemand Error",t.message)}))},f.unHandleStartLayerDemand=function(){a.a.unHandleStartLayer()},f.getAudicodeRescueLayerMessages=t=>{const e=SETUPS.get("nemo.audicode.rescue.messages");if(!e)return[];return t.configuration["audicode-rescue-info"].history.reduce((t,e)=>t.includes(e.repairType)?t:[...t,e.repairType],[]).reduce((t,n)=>{const i=e[n]?e[n].trim():void 0;return i&&!t.includes(i)?[...t,i]:t},[])},f.triggerAudicodeRescueLayer=(t,e)=>{document.dispatchEvent(new CustomEvent("modalLayer:open",{detail:{layerType:"AudicodeRescueLayerElement",options:{addCssClass:"audicode-rescue-wrapper",onEscClick:!0,onShaderClick:!0,centerVertically:!0},dataset:{...t,rescueMessages:e}}}))},p.resetAudicodeRescueInfo=()=>{o.a.resetAudicodeRescueInfo()},f.handleConflictClose=function(t){let e=new Date;o.a.requestTransferOrConflictResolve(t.url).then(f.handleConfigurationUpdate).catch(f.handleConfigurationUpdateError).then((function(){f.onAjaxCompleted(e)}))},f.handleTransferClose=function(t){if(o.a.transferCompleted(),t&&t.url){let e=new Date;o.a.requestTransferOrConflictResolve(t.url).then(f.handleConfigurationUpdate).catch(f.handleConfigurationUpdateError).then((function(){f.onAjaxCompleted(e)}))}else f.checkLayerQueue()},f.handleStartlayerClose=function(){f.checkLayerQueue()},p.addToConfiguration=function(t){let e={action:"itemAdd",count:null,id:t};return f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_START,{}),f.triggerChangeRequest(e)},p.removeFromConfiguration=function(t){var e={action:"itemRemove",count:null,id:t};return f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_START,{}),f.triggerChangeRequest(e)},f.triggerChangeRequest=function(t){var e=new Date;return o.a.requestConfigurationChange(t).then((function(e){f.updateItemSelectionMethod(t,"active"),f.setConfigurationStartType("configuration-change"),f.handleConfigurationUpdate(e)})).catch(f.handleConfigurationUpdateError).then((function(){f.onAjaxCompleted(e)}))},f.updateItemSelectionMethod=function(t,e){var n;n=t.id,"itemAdd"===t.action?o.a.setItemSelectionMethod(n,e):o.a.setItemSelectionMethod(n,"")},f.updatePreselectedItems=function(){var t=r.a.getItems();jQuery.each(t,(function(t,e){e.status&&5===e.status.length&&"1"===e.status.substr(3,1)&&o.a.setItemSelectionMethod(t,"pre")}))},f.handleConfigurationUpdateError=function(t){console.error("Configuration Error",t);const e=r.a.getErrorMessage(t);f.eventBus.emit(i.appEvents.ERROR,e)},f.isIndividualColorConfiguration=function(t){return"Q0Q0"===t||"O0O0"===t||"BODY_Q0"===t||"BODY_O0"===t},f.isSelectableItem=function(t){var e=r.a.getDOMStatusCode(t).split(""),n=window.mss||null;return!!t.hasClass("nm-j-configurator-item-forceselectable")||"0"!==e[0]&&("0"!==e[1]&&(("1"!==e[4]||"1"!==e[3]||!n)&&(e[2],!0)))},f.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},f.handleNewConfigurationClick=function(t){f.cancelEvent(t),o.a.requestConfigurationReset().then((function(t){f.startLayerActivated=!0,o.a.setConfigurationStartType("configuration-reset"),f.handleConfigurationUpdate(t)})).then(()=>{f.dispatchCustomConfigurationStartEvent("configuration-reset")}).then(void 0,f.configurationErrors).then(f.onAjaxCompleted)},f.configurationErrors=function(t){console.warn("Configuration Error",t.mesage)},f.addModeSwitchEventAfterReset=function(){var t=jQuery("nm-price-rate-switch");t&&(t.checked=!1),f.legacyEventBus.on("change",".nm-price-rate-switch, .j-rate-switch",f.handleModeSwitchChange),document.addEventListener("rateSwitch",f.handleModeSwitchChange)},f.handleModeSwitchChange=function(t){let e;e=t.detail&&t.detail.mode?t.detail.mode:!0===t.target.checked?"rate":"price",o.a.changeRatePriceMode(e).then(f.handleConfigurationUpdate).then(void 0,f.configurationErrors).then(f.onAjaxCompleted)},f.onAjaxCompleted=function(t){f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_END)},f.initialize=function(){var t;h||(f.addEvents(),h=!0,t=new Date,f.dataInitialized=!1,o.a.fireDataInitializationChain().then((function(){f.initPreviousConfiguration().then(()=>{f.updatePreselectedItems(),o.a.dispatchPriceMode(r.a.getPriceRateMode()),f.dispatchCustomEvent(),f.dataInitialized=!0,console.info("fireDataInitializationChain completed after "+((new Date).getTime()-t.getTime())+" ms")})}),(function(e){f.initPreviousConfiguration().then(()=>{f.dataInitialized=!0,console.warn("fireDataInitializationChain failed after "+((new Date).getTime()-t.getTime())+" ms:"+e.message)})})))},p.isDataInitialized=function(){return f.dataInitialized},f.initPreviousConfiguration=function(){var t,e,n,o,a;if(window.location.search&&window.location.search.indexOf("new_config")>-1&&(e=!0),n=s.a.getPreviousWindowConfig(),o=s.a.getConfigurationRequestParam(),a=l.a.getPreviousUserConfigurationPrString(),o){if(o.audicode)return p.loadConfigurationByAudiCode(o.audicode).then((function(t){p.handleExternalConfiguration(t,{startType:"teaser-audicode"})})).then(()=>{f.dispatchCustomConfigurationStartEvent("teaser-audicode"),d.stateRegistry.triggerAction(m.a,"update",{audicode:o.audicode})}).catch(e=>{t=r.a.getErrorMessage(e),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])});if(o.prstring)return p.loadConfigurationByPrString(o.prstring).then((function(t){p.handleExternalConfiguration(t,{startType:"teaser-prstring"})})).then(()=>{f.dispatchCustomConfigurationStartEvent("teaser-prstring")}).catch(e=>{t=r.a.getErrorMessage(e),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])})}return n?n.carline!==r.a.getCarline()?(s.a.useTrampoline(n,n.subsession,n.entryType),Promise.resolve()):p.loadConfigurationByPrString(n.prstring,n.subsession).then(t=>{p.handleExternalConfiguration(t,{startType:n.entryType})}).then(()=>{Object(g.d)(n.entryType)&&f.dispatchCustomConfigurationStartEvent(n.entryType)}).catch(e=>{t=r.a.getErrorMessage(e),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])}):n||o?Promise.resolve():e?p.loadConfigurationByPrString(SETUPS.get("nemo.default.prstring")).then((function(t){p.handleExternalConfiguration(t,{startType:"configuration-reset"})}),(function(t){console.warn(t.message)})).then(()=>{f.dispatchCustomConfigurationStartEvent("configuration-reset")}):(console.log("previousUserConfigurationPromise - loadConfiguration"),a.then((async function(t){await p.loadConfigurationByPrString(t).then((function(t){p.handleExternalConfiguration(t,{startType:"user-configuration"})}),(function(t){console.warn(t.message)})).then(()=>{f.dispatchCustomConfigurationStartEvent("user-configuration")})})).catch((function(t){console.warn(t.message)})))},p.loadConfigurationByPrString=function(t,e){return o.a.loadConfigurationByPrString(t,e)},p.loadConfigurationFromTeaser=function(t,e){var n,o=r.a.getSubsessionID();return t.prstring?p.loadConfigurationByPrString(t.prstring,o).then((function(t){p.handleExternalConfiguration(t,{startType:e})})).then(()=>{"audicode.visualizer"===e&&f.dispatchCustomConfigurationStartEvent(e)}).catch((function(t){n=r.a.getErrorMessage(t),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],n])})):t.audicode?p.loadConfigurationByAudiCode(t.audicode).then((function(t){p.handleExternalConfiguration(t,{startType:e})})).then(()=>{"audicode.visualizer"===e&&f.dispatchCustomConfigurationStartEvent(e)}).catch((function(t){n=r.a.getErrorMessage(t),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],n])})):Promise.reject("No valid config option found")},p.loadConfigurationByAudiCode=function(t){return o.a.loadConfigurationByAudiCode(t)},p.listCarstoreItems=function(){return o.a.sendCarstoreRequest("list")},p.switchCarline=function(t,e,n,r){return o.a.switchCarline(t,e,n).then((function(){r?o.a.adoptConfiguration(r).then((function(t){f.handleConfigurationUpdate(t)})).catch((function(t){f.handleConfigurationUpdateError(t)})):(f.eventBus.emit(i.appEvents.CONFIG_RESET),o.a.setConfigurationStartType("switched-carline"))}))},p.loadCarstoreItem=function(t){return o.a.sendCarstoreRequest("load",{slot:t}).then((function(t){p.handleExternalConfiguration(t,{startType:"carstore"})}))},p.deleteCarstoreItem=function(t){return o.a.sendCarstoreRequest("delete",{slot:t})},p.setSubsessionID=function(t){o.a.setSubsessionID(t)},p.resetToDefaultSetupParams=function(){o.a.resetToDefaultSetupParams()},p.getAjaxMarker=function(){var t={marker:"",overwrites:!1};return new Promise((function(e){r.a.isConfigurable()?(t.marker=r.a.getMemcacheVersion(),t.overwrites=!0):t.marker=SETUPS.get("nemo.staticversion"),e(t)}))},p.setDpuExtra=function(t){o.a.setDpuExtra(t)},p.initialize=function(t){f.eventBus=t,f.legacyEventBus=jQuery("body"),i.content.registerMarkerProvider(p.getAjaxMarker),f.initialize()}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__8__},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return u}));n(20);const i=()=>{let t=!1;const e=document.querySelector(".nm-content");if(e){const n=e.getAttribute("data-type");n&&"nemo"===n&&(t=!0)}return t},r=()=>{let t=!1;const e=document.querySelector(".nm-content");if(e){const n=e.getAttribute("data-template");n&&"home"===n&&(t=!0)}return t},o=t=>{const e=t.id?{productID:t.id}:{},n=t.mbvId?{productMbvId:t.mbvId}:{},i=t.name?{productName:t.name}:{},r=t.mileage?{mileage:t.mileage}:{};return Object.assign({},e,n,i,r)},a=(t,e)=>{return e&&e[t.family]&&(void 0!==(n=t.family.split("."))&&n.length>0)&&t.family.split(".")||[];var n},s=(t,e)=>{const[n=""]=a(t,e),[,i=""]=a(t,e);return{primaryCategory:n,subCategory1:i,productType:((t,e)=>{return e&&e[t.family]&&((n=e[t.family]).type&&void 0!==n.type)&&e[t.family].type||"";var n})(t,e)}},l=t=>{const e=t.price?{price:t.price}:{};return Object.assign({},e)},c=(t,e)=>{const n=0!==Object.keys(o(t)).length?{productInfo:o(t)}:{},i=0!==Object.keys(s(t,e)).length?{category:s(t,e)}:{},r=l(t)!=={}?{price:l(t)}:{},a=0!==Object.keys({}).length?{attributes:{}}:{};return Object.assign({},n,i,r,a)};function u(t){return["audicode-input","teaser-audicode","audicode.visualizer","audicode-search","teaser-prstring","user-configuration","configuration-reset"].indexOf(t)>-1}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(24),r=n(36);t.exports=n(15)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(21)("wks"),r=n(23),o=n(10).Symbol,a="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=i},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(4);const r="dbadAudicodeStore";class o{constructor(){return o.instance||(this._initStore(),o.instance=this),o.instance}_initStore(){const t={update:this._update,invalidate:this._invalidate};i.stateRegistry.addStore(r,{audicode:null,configuration:null},t)}_update(t,e){return{...t,audicode:e.audicode,configuration:e.configuration}}_invalidate(t){return{...t,audicode:null,configuration:null}}}const a=new o;Object.freeze(a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(4);const r="dbadConfigurationStore";class o{constructor(){return o.instance||(this._initStore(),o.instance=this),o.instance}_initStore(){const t={update:this._update};i.stateRegistry.addStore(r,{configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null},t)}_update(t,e){return{...t,...e,...o._processUpdate(e)}}static _processUpdate(t){return{selectedTrimline:o._getSelectedTrimline(t)}}static _getSelectedTrimline(t){return t.items?Object.values(t.items).reduce((t,e)=>o._isSelectedTrimline(e)?e.id:t,null):null}static _isSelectedTrimline(t){return o._isTrimlineItem(t)&&o._isSelectedItem(t)}static _isTrimlineItem(t){return t.id&&t.id.indexOf("trimline_")>-1}static _isSelectedItem(t){return t.status&&"1"===t.status.charAt(3)}}const a=new o;Object.freeze(a)},function(t,e,n){t.exports=!n(34)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t){t.exports=JSON.parse('{"mediaService":{"api":"https://mediaservice.audi.com/renderapi/v1/urls","clientId":"4DWZjsGz","live":true}}')},,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(0),r=n(2);const o={},a={__:o};o.oDefaults={},a.getPreviousWindowConfig=function(){let t,e=null,n=r.a.getCarline(),o=window&&window.name&&null!==window.name?window.name:i.cache.getItem("use_trampoline","data","localStorage");if(o)try{t=JSON.parse(o),t&&t.prstring&&t.subsession&&t.carline===n&&(e=t)}catch(t){console.log("we are not comming from a page were we set the window.name"),e=null}return i.cache.getItem("use_trampoline","data","localStorage")&&i.cache.removeItem("use_trampoline","data","localStorage"),e},a.getConfigurationRequestParam=function(){var t=null,e=o.getUrlVar("audicode"),n=o.getUrlVar("pr");return e&&((t={}).audicode=e),n&&((t={}).prstring=n),t},a.useTrampoline=function(t,e,n){let r=t.configuration.prstring,a=t.configuration.carline,s=o.getCarlineUrl(a);s&&(window.name='{"subsession":"'+e+'","carline":"'+a+'","prstring":"'+r+'","entryType":"'+n+'"}',i.cache.setItem("carline_mapping",e,JSON.stringify(t),"localStorage"),i.cache.setItem("use_trampoline","data",'{"subsession":"'+e+'","carline":"'+a+'","prstring":"'+r+'","entryType":"'+n+'"}',"localStorage"),setTimeout((function(){window.location.href=s}),150))},o.getCarlineUrl=function(t){return r.a.getCarlineUrl(t)},a.hasPreviousWindowConfiguration=function(){return!!a.getPreviousWindowConfig()},a.isMatchingConfiguration=function(t){let e,n,i,a,s,l,c;return e=!1,i=!!t,a=null,n=r.a.getCarline(),i&&t.configuration&&t.configuration.carline&&(a=t.configuration.carline),i&&t.configuration&&t.configuration.carline&&(a=t.configuration.carline),s=null,i&&t.configuration&&t.configuration.prstring&&(s=t.configuration.prstring),l=!1,c=o.getCarlineUrl(a),c&&(l=!0),a&&n!==a&&l&&(e=!1),a&&n===a&&(e=!0),console.log("isMatchingConfiguration: "+e+"  audiCodeCorrespondingPrstring: "+s),e},o.getUrlVars=function(t){let e,n,i,r,o={};for(n=t.slice(t.indexOf("?")+1).split("#")[0].split("&"),i=0,r=n.length;i<r;i++)e=n[i].split("="),o[e[0]]=e[1];return o},o.getUrlVar=function(t,e){const n=e||window.location.href;return o.getUrlVars(n)[t]||null}},function(t,e,n){for(var i=n(46),r=n(38),o=n(29),a=n(10),s=n(11),l=n(27),c=n(12),u=c("iterator"),d=c("toStringTag"),m=l.Array,g={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(g),p=0;p<f.length;p++){var h,v=f[p],y=g[v],S=a[v],C=S&&S.prototype;if(C&&(C[u]||s(C,u,m),C[d]||s(C,d,v),l[v]=m,y))for(h in i)C[h]||o(C,h,i[h],!0)}},function(t,e,n){var i=n(22),r=n(10),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(33)?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(25),r=n(48),o=n(49),a=Object.defineProperty;e.f=n(15)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(26);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports={}},function(t,e,n){var i=n(51),r=n(37);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(10),r=n(11),o=n(16),a=n(23)("src"),s=n(55),l=(""+s).split("toString");n(22).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||r(n,a,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e,n){var i=n(21)("keys"),r=n(23);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(17);const r={exterior:{fullscreen:"aecwn8o1920x1152",flyout:"aecwn8o1920x600"},exterior_front:{fullscreen:"aecwn1o1920x1152",flyout:"aecwn1o1920x600"},exterior_back:{fullscreen:"aecwn6o1920x1152",flyout:"aecwn6o1920x600"},exterior_straight_front:{fullscreen:"aecwn3o1920x1152",flyout:"aecwn3o1920x600"},exterior_straight_back:{fullscreen:"aecwn5o1920x1152",flyout:"aecwn5o1920x600"},closeup_lights:{fullscreen:"aecwn2o1920x1152",flyout:"aecwn2o1920x600"},interior:{fullscreen:"aecwi1n1920x1152",flyout:"aecwi1n1920x600"},dashboard:{fullscreen:"aecwi2n1920x1152",flyout:"aecwi2n1920x600"}},o=Object.values(r).map(t=>[null==t?void 0:t.flyout,null==t?void 0:t.fullscreen]);function a(t,e){if(t&&t.length){const n=t.find(t=>t.config===e);return null==n?void 0:n.url}return null}const s=t=>null==t?void 0:t.startsWith("LC_PR"),l=async function(t){var e;const n=null==t?void 0:t.ave,l=t&&t["mbv-ids"];if(!n)return Promise.reject({});const c=n.split(","),u=c.slice(0,5),d=c.slice(5),m=c[3],g=c[4],f=c[2],p=c[1],h=null==t||null===(e=t.extColorCode)||void 0===e?void 0:e.selected,v=(null==l?void 0:l.exteriorColor)||m,y=(null==l?void 0:l.interiorColor)||g,S=(null==l?void 0:l.modelyear)||(null==t?void 0:t.modelyear)||f,C=p||(null==l?void 0:l.model)||(null==t?void 0:t.model),E={client:i.mediaService.clientId,brand:"ALL",configs:[].concat(...o),live:i.mediaService.live,modelRequests:[{modelCode:C,modelYear:S,exteriorColor:v,interiorColor:y,standardEquipments:d,mimeType:"image/png",...s(u[3])&&{aozEquipments:[h]}}]},b={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)};try{const t=await fetch(i.mediaService.api,b);if(t.ok)return t.json().then(t=>{var e;return(t=>t?Object.entries(r).reduce((e,n)=>{var i,r;return{...e,[n[0]]:{fullscreen:a(t,null===(i=n[1])||void 0===i?void 0:i.fullscreen),flyout:a(t,null===(r=n[1])||void 0===r?void 0:r.flyout)}}},{}):[])(null===(e=t.modelResults[0])||void 0===e?void 0:e.urlResult.filter(t=>null==t?void 0:t.url))});console.error("Response error from fetch images API: ",t)}catch(t){console.error("error occured when trying to fetch images from API:"+t)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(0),r=n(1),o=n(5);const a={},s={__:a};a.instance=!1,a.enabled=!0,a.source=!1,a.oDefaults={sCloseLayerButtonSelector:".nm-configurationstart-layer-close"},a.addEvents=function(){a.legacyEventBus.on("click.layer.configstart.close",a.oDefaults.sCloseLayerButtonSelector,a.closeStartLayer)},a.removeEvents=function(){a.legacyEventBus.off("click.layer.configstart.close",a.oDefaults.sCloseLayerButtonSelector,a.closeStartLayer)},a.trackLoadConfigEvent=function(){return a.enabled?new Promise((function(t){var e=setInterval((function(){if(a.layerProcessed){if(clearInterval(e),!a.layerActive)return console.log("reject"),Promise.reject();console.log("resolve: ",a.source),"carstore"===a.source?t({source:"myAudi"}):"audicode-input"===a.source?t({source:"audicode"}):t({source:a.source})}}),50)})):Promise.reject()},a.isStartlayerNotToShow=function(){return!a.enabled||o.hideHeaderFooter.isHiddenHeaderFooter()||SETUPS.get("scope.nemo.hide_startlayer")},a.openStartLayer=function(t){var e=t;return a.isStartlayerNotToShow()?(a.layerProcessed=!0,a.layerActive=!1,Promise.reject(new Error("Start layers not supported."))):new Promise((function(n,o){let s,l,c="configurationstart-implicit";(e=t)?(c="configurationstart-loaded",l='<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n\t<div class="nm-layer nm-layer-dialogue">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-dialogue-content clearfix">\n\t\t\t\t<div class="nm-3col clearfix">\n\t\t\t\t\t<div class="nm-module nm-start-layer nm-simpleform nm-configurationstart-loaded-layer clearfix">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'configurationloaded-layer-info\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-01">\n\t\t\t\t\t\t\t{{=\twindow.i18n[\'configurationloaded-layer-edit\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<img src="{{=it.ms_url}}{{=it.images.exterior_front[\'flyout\']}}"\n\t\t\t\t\t\tclass="nm-unscaled-image nm-alpha" />\n\t\t\t\t\t\t<div class="nm-start-information-overview">\n\t\t\t\t\t\t\t<div class="nm-start-inforamation-content">\n\t\t\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t\t\t\t{{=it.configuration.carlineName}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="nm-engine nm-el-pg nm-el-pg-03">\n\t\t\t\t\t\t\t\t\t{{=it.configuration.description}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<ul class="nm-car-price clearfix">\n\t\t\t\t\t\t\t\t\t<li class="nm-car-price-total nm-el-hdl nm-el-hdl-04 nm-at-hdl-b clearfix">\n\t\t\t\t\t\t\t\t\t\t/*<span class="nm-car-price-total-key">\n\t\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'totalprice-label\']}}\n\t\t\t\t\t\t\t\t\t\t</span>*/\n\t\t\t\t\t\t\t\t\t\t<span class="nm-car-price-total-value">\n\n\t\t\t\t\t\t\t\t\t\t\t{{? typeof(it.configuration.prices.rotr) !== \'undefined\' && parseInt(it.configuration.prices.rotr, 10) > 0 }}\n\t\t\t\t\t\t\t\t\t\t\t\t{{=it.configuration.prices.rotr}}\n\t\t\t\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t\t\t\t{{=it.configuration.price}}\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t\t<a href="#" class="nm-configurationstart-layer-close nm-el-btn nm-el-btn-01 nm-el-btn-ast">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'):(c="configurationstart-implicit",l='<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n\t<div class="nm-layer nm-layer-dialogue">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-dialogue-content clearfix">\n\t\t\t\t<div class="nm-3col clearfix">\n\t\t\t\t\t<div class="nm-module nm-start-layer nm-md-configurationstart-implicit-layer">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'configurationstart-layer-info\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-01">{{= window.i18n[\'configurationstart-layer-edit\']}}</p>\n\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t<a href="#" class="nm-configurationstart-layer-close nm-el-btn nm-el-btn-01 nm-el-btn-ast" style="float:right;">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'),s=r.template.render(l,e||{}),setTimeout((function(){document.body.scrollTop=0,i.layerApi.open(c,s,a.closeStartLayer).then((function(t){a.layerProcessed=!0,a.layerActive=!1,e&&(a.source=e.start_type,a.layerActive=!0),a.instance=t,a.addEvents(),jQuery("body").addClass("nm-config-layer-open"),n(a.instance)}),(function(t){a.layerProcessed=!0,a.layerActive=!1,o(t)}))}),600)}))},a.closeStartLayer=function(t){a.cancelEvent(t),a.instance&&"function"==typeof a.instance.close&&a.instance.close(),a.eventBus.emit(i.appEvents.STARTLAYER_CLOSE),a.instance=null,a.removeEvents(),jQuery("body").removeClass("nm-config-layer-open")},a.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},a.initialize=function(){a.instance||(a.addEvents(),a.instance=!0,a.layerProcessed=!1,a.layerActive=!0)},s.handleStartLayer=function(t){return a.openStartLayer(t)},s.unHandleStartLayer=function(){a.layerProcessed=!0,a.layerActive=!1},s.setEnabled=function(t){a.enabled=t},s.initialize=function(t){a.eventBus=t,a.legacyEventBus=jQuery("body"),a.initialize()}},function(t,e){t.exports=!1},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(26),r=n(10).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(61),r=n(40);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(24).f,r=n(16),o=n(12)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(2),r=n(0),o={},a={__:o};o.STORAGE=window.sessionStorage||null,o.entryPrefix="__nemo__",o.handleConfigurationUpdates=function(){var t={prString:i.a.getPrString(),carlineID:i.a.getCarline()};o.writeEntry(t).then((function(t){console.log("userÂ´s configuration storageID: "+t.stored)}),(function(t){console.warn("Error storing userÂ´s configuration: "+t.message)}))},o.writeEntry=function(t){let e=t;return new Promise((function(t,n){var i;i=o.uuid(),e||n(new TypeError("writeEntry: missing param 'entry_'")),e=JSON.stringify(e),o.STORAGE||n(new TypeError("sessionStorage is not available")),o.STORAGE.setItem(i,e),t({stored:i})}))},o.uuid=function(){return o.entryPrefix+i.a.getVersion()},o.addEvents=function(){o.eventBus.on(r.appEvents.CONFIG_UPDATE,o.handleConfigurationUpdates)},o.readEntryFromStorage=function(){return new Promise((function(t,e){var n;o.STORAGE||e(new TypeError("Browserstorage is not available"));try{n=o.STORAGE.getItem(o.uuid()),t(n=JSON.parse(n))}catch(t){e(new TypeError("Error reading userÂ´s configuration: "+t.message))}}))},o.initialize=function(){!i.a.isInPreviewMode()&&i.a.isConfigurable()?o.addEvents():console.log("preview-mode")},a.getPreviousUserConfigurationPrString=function(){return o.readEntryFromStorage().then((function(t){return t&&t.carlineID&&t.prString&&t.carlineID===i.a.getCarline()&&t.prString!==i.a.getPrString()?Promise.resolve(t.prString):Promise.reject(new TypeError("no valid user configuration available"))}),(function(){return Promise.reject(new TypeError("error reading user configuration from storage"))}))},o.debugEntries=function(){var t,e=[],n=new RegExp(o.entryPrefix);for(t in o.STORAGE)n.test(t)&&e.push(t);return e},a.initialize=function(t){o.eventBus=t,o.initialize()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(4);class r{static get SEARCHPROVIDER_STORE_ID(){return"dbadSearchProviderStore"}static get SEARCHQUERY_STORE_ID(){return"dbadSearchQueryStore"}get searchResultStoreId(){return null}constructor(){i.stateRegistry.subscribeToStore(r.SEARCHQUERY_STORE_ID,t=>{this.performSearch(t.searchQuery)}),this.registerResultStore()}async registerResultStore(){this.searchResultStoreId&&(await this.waitForProviderStore(),i.stateRegistry.triggerAction(r.SEARCHPROVIDER_STORE_ID,"addSearchProvider",{searchProvider:this.searchResultStoreId}))}waitForProviderStore(){return new Promise(t=>{i.stateRegistry.subscribeToStore(r.SEARCHPROVIDER_STORE_ID,()=>{t()})})}performSearch(t){throw new Error("Implement performSearch in Subclass. (searchQuery: "+t+")")}publishResult(t,e){i.stateRegistry.triggerAction(this.searchResultStoreId,"update",{result:e,searchQuery:t})}setPreventSubmit(t=!1){i.stateRegistry.triggerAction(r.SEARCHPROVIDER_STORE_ID,"preventSubmit",{preventSubmit:t})}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(2),r=n(0),o=n(1);const a={},s={__:a};a.oDefaults={sSelectorDelegateTransferClick:".nm-layer-transfer .nm-j-configurator-delegate-transfer-click"},a.transfer=null,a.layerInstance=null,a.layerIsOpening=!1,a.layerIsClosing=!1,a.mergeData=function(t){return{deleted:t.deleted?a.mergeItemList(t.deleted):[],transferred:t.transferred?a.mergeItemList(t.transferred):[],standard:t.standard?a.mergeItemList(t.standard):[],urls:t.urls}},a.mergeItemList=function(t){return t.map(t=>i.a.getItem(t.id))},a.openLayer=function(t,e,n){let i;if(!a.layerIsClosing)return a.layerIsOpening=!0,i=r.layerApi.open(t,e,n),i.then((function(t){return a.layerIsOpening=!1,Promise.resolve(t)}),(function(t){return a.layerIsOpening=!1,Promise.reject(t)}));setTimeout((function(){a.openLayer(t,e,n)}),510)},a.closeLayer=function(){let t;a.layerIsClosing=!0,null===a.layerInstance&&a.layerIsOpening?setTimeout(a.closeLayer,510):(t=a.layerInstance.close(),t.then((function(){a.layerInstance=null,a.layerIsClosing=!1,a.onLayerClose()}),(function(){a.layerIsClosing=!1})))},a.onLayerClose=function(){a.transfer=null},a.handleTransferResolveClick=function(t){let e,n,i,s;t?(a.cancelEvent(t),e=o.dom.closest(t.target,a.oDefaults.sSelectorDelegateTransferClick),e&&(n=e.getAttribute("href"))):(i=o.dom.getElement(a.oDefaults.sSelectorDelegateTransferClick+"[data-transfer='cancel']"),o.dom.isElement(i)?n=i.getAttribute("href"):(s=o.dom.getElement(a.oDefaults.sSelectorDelegateTransferClick+"[data-transfer='submit']"),n=s.getAttribute("href"))),n&&(n=SETUPS.get("nemo.url.dpu")+n,a.eventBus.trigger(r.appEvents.TRANSFER_CLOSE,{url:n})),a.closeLayer()},a.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},a.handleTransferClose=function(){a.layerName&&a.handleTransferResolveClick()},s.handleTransfer=function(t){var e,n;e=a.mergeData(t),n=o.template.render('<div class="nm-layer-wrapper nm-layer-wrapper-dialogue nm-layer-wrapper-transfer">\n\t<div class="nm-layer nm-layer-transfer nm-layer-transfer-default">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-conflict-content clearfix">\n\t\t\t\t<div class="nm-3col cearfix">\n\t\t\t\t\t<div class="">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'transfer-layer.configuration-transfer\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t{{? 0 !== it.deleted.length}}\n\t\t\t\t\t\t<strong class="nm-el-pg nm-el-pg-01">\n\t\t\t\t\t\t\t{{=window.i18n[\'transfer-layer.configuration-transfer-warning\']}}:\n\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t<ul class="nm-options-list nm-transfer-trigger nm-j-configurator-no-update">\n\t\t\t\t\t\t\t{{~it.deleted :value:index}}\n\t\t\t\t\t\t\t<li class="nm-check-list-item nm-j-configurator-item">\n\t\t\t\t\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t\t<div class="nm-list-item-additional clearfix">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t{{=value.name}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul class="nm-button-list clearfix">\n\t\t\t\t\t\t/*<li>\n\t\t\t\t\t\t\t<a class="nm-b7 nm-j-configurator-delegate-transfer-click" data-transfer="cancel"\n\t\t\t\t\t\t\thref="{{=it.urls.cancel}}">{{=window.i18n[\'transfer-layer.label.cancel\']}}</a>\n\t\t\t\t\t\t</li>*/\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-transfer-click nm-el-btn nm-el-btn-01 nm-el-btn-ast" data-transfer="submit">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',e),a.openLayer("transfer-layer",n,a.handleTransferResolveClick).then((function(t){a.layerInstance=t}),(function(t){console.warn("TRANSFER Layer open failed",t.message)}))},s.initialize=function(t){a.eventBus=t,a.legacyEventBus=o.dom.getEventDelegate("body"),a.legacyEventBus.on("click",a.oDefaults.sSelectorDelegateTransferClick,a.handleTransferResolveClick)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(2),r=n(0),o=n(1);const a={},s={__:a};a.previousSelectedSolution=null,a.layerInstance=null,a.currentCancelLink="",a.oDefaults={sSelectorConflictLayer:".nm-layer-conflict",sSelectorConfigLayerOpen:"nm-config-layer-open",sSelectorDelegateConflictClick:".nm-j-configurator-delegate-conflict-click",sSelectorOptionsShow:".nm-j-conflict-options-show",sSelectorConflictSolution:".nm-conflict-solution",sSelectorDelegateClick:".nm-layer-wrapper-conflict .nm-j-configurator-delegate-click",sClassConflictSolutionShow:"nm-conflict-solution-show"},a.groupingWhitelist=["extcolor","upholstery"],a.debouncedConflictResolveHandler=o.dom.debounce(t=>{a.handleConflictResolveClick(t)},500),a.addEvents=function(){a.legacyEventBus.on("click.nemo.configurator",a.oDefaults.sSelectorDelegateConflictClick,t=>{t.preventDefault(),a.debouncedConflictResolveHandler(t)}),a.legacyEventBus.on("click.alternative-options",a.oDefaults.sSelectorOptionsShow,a.toggleAlternativeOptions),a.legacyEventBus.on("click.solution.store",a.oDefaults.sSelectorDelegateClick,a.handleConflictItemClick)},a.handleConflictItemClick=function(t){var e,n,i;if(a.cancelEvent(t),i=(n=(e=jQuery(this)).closest("div[data-solution-id]")).data("solution-id"),a.isSelectedItem(e.closest(".nm-j-configurator-item")))return console.log('ITEM "'+e.closest(".nm-j-configurator-item").attr("[nm-j-configurator-id]")+'" is already part of the configuration',e,n,i),!1;a.previousSelectedSolution=i,console.log("ITEM was clicked",e,n,i,a.previousSelectedSolution)},a.isSelectedItem=function(t){var e,n=t.get(0).className;return-1!==n.indexOf("nm-j-configurator-status_")&&(5===(e=n.split("nm-j-configurator-status_")[1].split(" ")[0]).length&&"1"===e[3])},a.toggleAlternativeOptions=function(){return jQuery(this).closest(".nm-conflict-solution").toggleClass(a.oDefaults.sClassConflictSolutionShow),!1},a.detectGroups=function(t,e,n){var i,r,o,s,l,c=t.items.length;if(t.sameTypeItems=!1,c<2)return t;for(i=c-1;i>=0;i--){if(!(r=n[t.items[i].id]))return t;if(!(o=e[r.family]))return t;if(l=o.name,i<c-1&&(s!==o.type||a.groupingWhitelist.indexOf(o.type)<0))return t;s=o.type}return t.sameTypeItems=!0,t.header=l,t},a.mergeData=function(t,e,n){var i,r,o,s,l,c,u,d,m,g,f=t,p=[];for(f.replacedByTriggers&&f.replacedByTriggers.length&&f.solutions.unshift(f.replacedByTriggers),jQuery.each(f.solutions,(function(t,i){(m={}).items=[],m.ids=[],l=[],jQuery.each(i,(function(t,i){(c=n[i.id])?(c.name&&delete i.name,u=jQuery.extend(!0,{},c,i)):u=i,u.family&&e[u.family]&&(u.family=e[u.family]),i.effItems&&jQuery.each(i.effItems,(function(t,i){(c=n[i.id]).name&&delete i.name,(r=jQuery.extend(!0,{},c,i)).family&&e[r.family]&&(r.family=e[r.family]),r.items=[r],l.push(r)})),m.ids.push(u.id),m.items.push(u)})),m.id=m.ids.join(""),p.push(m),l.length>0&&(p=p.concat(l))})),f.solutions=p,o=f.solutions.length-1;o>=0;o--)f.solutions[o]=a.detectGroups(f.solutions[o],e,n);for(g=[],s=f.solutions[0].items.length;s--;)(i=f.solutions[0].items[s]).family&&i.family.id&&i.family.id.indexOf("synthetic.audi_exclusive")>-1?(g.push(i),f.solutions[0].items[s].exclusive=!0):f.solutions[0].items[s].exclusive=!1;return g.reverse(),f.solutions[0].exclusives=g,d=[],l=[],jQuery.each(f.triggers,(function(t,i){(c=n[i.id])?(c.name?delete i.name:i.name="#"+c.name,u=jQuery.extend(!0,{},c,i)):u=i,u.family&&e[u.family]&&(u.family=e[u.family]),d.push(u),i.effItems&&jQuery.each(i.effItems,(function(t,e){(c=n[e.id]).name&&delete e.name,(r=jQuery.extend(!0,{},c,e)).items=[r],l.push(r)}))})),l.length>0&&(f.solutions=l.concat(f.solutions)),f.triggers=d,f},a.openLayer=function(t,e,n){return new Promise((function(i,o){r.layerApi.open(t,e,n).then((function(t){a.layerInstance=t,a.openSelectedSolutionAlternatives(),a.currentCancelLink=jQuery([a.oDefaults.sSelectorDelegateConflictClick,"[data-conflict='cancel']"].join("")).attr("href"),i(a.layerInstance)}),(function(t){o(t)}))}))},a.closeLayer=function(){return a.layerInstance.close().then((function(){a.layerInstance=null,a.onLayerClose()}),(function(t){throw new TypeError("Error closing conflict Layer: "+t.message)}))},a.onLayerClose=function(){jQuery("body").removeClass(a.oDefaults.sSelectorConfigLayerOpen),a.conflict=null},a.handleConflictResolveClick=function(t){var e,n,i,o="cancel";t?(a.cancelEvent(t),e=jQuery(t.target),n=SETUPS.get("nemo.url.dpu")+e.attr("href"),e.data("conflict")&&(o=e.data("conflict"))):(o="cancel",n=(i=jQuery([a.oDefaults.sSelectorDelegateConflictClick,"[data-conflict='cancel']"].join("")).attr("href"))?SETUPS.get("nemo.url.dpu")+i:SETUPS.get("nemo.url.dpu")+a.currentCancelLink),a.eventBus.emit(r.appEvents.CONFLICT_CLOSE,{url:n,action:o}),a.closeLayer()},a.openSelectedSolutionAlternatives=function(){var t;a.previousSelectedSolution&&(t=jQuery("[data-solution-id='"+a.previousSelectedSolution+"']"),a.previousSelectedSolution||(a.previousSelectedSolution=void 0),t.addClass(a.oDefaults.sClassConflictSolutionShow))},a.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},s.handleConflict=function(t){return new Promise((function(e,n){var r=a.mergeData(t,i.a.getSpecialFamilies()||{},i.a.getItems()),s=o.template.render('{{##def.options_tiles:\n<ul class="nm-options-list nm-options-tiles">\n\t<li>\n\t\t<span class="nm-el-pg nm-el-pg-03 nm-at-pg-b">{{=p.header}}</span>\n\n\t\t<div class="nm-tile-block">\n\n\t\t\t<ul class="nm-tile-list clearfix">\n\n\t\t\t{{~ p.items :value:i }}\n\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\t\t\t\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\t\t\t\t\t\t{{? !!value.image }}\n\t\t\t\t\t\t<div class="nm-tile-element-image">\n\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-click" href="#"><img src="{{=value.image}}" /></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\t<div class="nm-tile-element-info">\n\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">{{=value.name}}</span>\n\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t\t</ul>\n\n\t\t</div>\n\n\t</li>\n</ul>\n#}}\n\n\n{{##def.options_list:\n\x3c!-- Default options list --\x3e\n\n<ul class="nm-options-list">\n\t{{~ p.items :value:i }}\n\t<li class="nm-check-list-item nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\n\t\t<div class="nm-options-list-cell-cb clearfix">\n\t\t\t<a class="nm-checkbox-1 nm-j-configurator-delegate-click" href="#"></a>\n\t\t</div>\n\n\t\t<div class="nm-options-cell-additional">\n\t\t\t{{? value.image }}\n\t\t\t<div class="nm-list-item-additional">\n\t\t\t\t<div class="nm-list-item-image">\n\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.image.name}}" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{{?}}\n\n\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">\n\t\t\t\t{{? value.type === "add" }}\n\t\t\t\t<span class="nm-conflict-add-text nm-at-pg-b">\n\t\t\t\t\t{{=window.i18n[\'conflict-layer.add-item\']}}\n\t\t\t\t</span>\n\t\t\t\t{{??}}\n\t\t\t\t<span class="nm-conflict-remove-text nm-at-pg-b">\n\t\t\t\t\t{{=window.i18n[\'conflict-layer.remove-item\']}}\n\t\t\t\t</span>\n\t\t\t\t{{?}} {{=value.name}}\n\t\t\t</span>\n\t\t</div>\n\n\t\t{{? typeof value.priceValue !== \'undefined\' && value.priceValue < 0 }} \n\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t{{??}}\n\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t{{?}}\n\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t</div>\n\t</li>\n\t{{~}}\n</ul>\n#}}\n\n\n<div class="nm-layer-wrapper nm-layer-wrapper-dialogue nm-layer-wrapper-conflict">\n\t<div class="nm-layer nm-layer-conflict nm-layer-conflict-default">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-conflict-content clearfix">\n\t\t\t\t<div class="nm-3col cearfix">\n\t\t\t\t\t<div class="nm-module nm-md-conflict-layer" data-module="conflict-layer">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.selection-conflict\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t{{? 0 !== it.triggers.length}}\n\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.your-selection\']}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ul class="nm-options-list nm-conflict-trigger">\n\t\t\t\t\t\t\t{{~it.triggers :value:index}}\n\t\t\t\t\t\t\t<li class="nm-check-list-item nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\t\t\t\t\t\t\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\t\t\t\t\t\t\t\t<a class="nm-checkbox-1 nm-j-configurator-delegate-click" href="#"></a>\n\t\t\t\t\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">\n\t\t\t\t\t\t\t\t\t\t{{=value.name}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{{? typeof value.priceValue !== \'undefined\' && value.priceValue < 0 }} \n\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t{{?}} {{? 0 !== it.solutions[0].length}}\n\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.mandatory-customizations\']}}:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{{~ it.solutions :p }}\n\t\t\t\t\t\t{{? !!p.id}}\n\t\t\t\t\t\t<div class="nm-conflict-solution" data-solution-id="{{=p.id}}">\n\n\t\t\t\t\t\t\t{{?!!p.sameTypeItems}}\n\t\t\t\t\t\t\t\t{{#def.options_tiles}}\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t{{#def.options_list}}\n\t\t\t\t\t\t\t\t{{? 1 < p.items.length}} <a href="" class="nm-j-conflict-options-show nm-el-lbl nm-el-lbl-01">\n\t\t\t\t\t\t\t\t\t<span class="nm-conflict-alternative-text-show">\n\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.show-alternatives\']}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="nm-conflict-alternative-text-hide">\n\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.hide-alternatives\']}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\n\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t{{~}} {{?}}\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-03 nm-at-pg-b nm-conflict-layer-total-price">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.overall-cutomizations\']}}: {{?\n\t\t\t\t\t\t\ttypeof it.totalPriceValue !== \'undefined\' && it.totalPriceValue\n\t\t\t\t\t\t\t< 0 }} <span class="nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<span class="nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t\t{{?}} {{=it.totalPrice}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<ul class="nm-button-list clearfix">\n\t\t\t\t\t\t\t{{? !!it.urls.cancel }}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-conflict-click nm-el-btn nm-el-btn-01 nm-at-btn-inv" data-conflict="cancel"\n\t\t\t\t\t\t\t\thref="{{=it.urls.cancel}}">{{=window.i18n[\'abort-label\']}}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{?}} {{? !!it.urls.submit }}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-conflict-click nm-el-btn nm-el-btn-02" data-conflict="submit"\n\t\t\t\t\t\t\t\thref="{{=it.urls.submit}}">{{=window.i18n[\'conflict-layer.label.submit\']}}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',r);a.openLayer("conflict-layer",s,a.debouncedConflictResolveHandler).then(e,n)}))},s.initialize=function(t){a.eventBus=t,a.legacyEventBus=jQuery("body"),a.addEvents()}},function(t,e,n){"use strict";var i=n(47),r=n(50),o=n(27),a=n(28);t.exports=n(53)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(12)("unscopables"),r=Array.prototype;null==r[i]&&n(11)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){t.exports=!n(15)&&!n(34)((function(){return 7!=Object.defineProperty(n(35)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var i=n(26);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(52);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var i=n(33),r=n(54),o=n(29),a=n(11),s=n(27),l=n(58),c=n(41),u=n(66),d=n(12)("iterator"),m=!([].keys&&"next"in[].keys()),g=function(){return this};t.exports=function(t,e,n,f,p,h,v){l(n,e,f);var y,S,C,E=function(t){if(!m&&t in _)return _[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},b=e+" Iterator",w="values"==p,D=!1,_=t.prototype,A=_[d]||_["@@iterator"]||p&&_[p],L=A||E(p),k=p?w?E("entries"):L:void 0,T="Array"==e&&_.entries||A;if(T&&(C=u(T.call(new t)))!==Object.prototype&&C.next&&(c(C,b,!0),i||"function"==typeof C[d]||a(C,d,g)),w&&A&&"values"!==A.name&&(D=!0,L=function(){return A.call(this)}),i&&!v||!m&&!D&&_[d]||a(_,d,L),s[e]=L,s[b]=g,p)if(y={values:w?L:E("values"),keys:h?L:E("keys"),entries:k},v)for(S in y)S in _||o(_,S,y[S]);else r(r.P+r.F*(m||D),e,y);return y}},function(t,e,n){var i=n(10),r=n(22),o=n(11),a=n(29),s=n(56),l=function(t,e,n){var c,u,d,m,g=t&l.F,f=t&l.G,p=t&l.S,h=t&l.P,v=t&l.B,y=f?i:p?i[e]||(i[e]={}):(i[e]||{}).prototype,S=f?r:r[e]||(r[e]={}),C=S.prototype||(S.prototype={});for(c in f&&(n=e),n)d=((u=!g&&y&&void 0!==y[c])?y:n)[c],m=v&&u?s(d,i):h&&"function"==typeof d?s(Function.call,d):d,y&&a(y,c,d,t&l.U),S[c]!=d&&o(S,c,m),h&&C[c]!=d&&(C[c]=d)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,n){t.exports=n(21)("native-function-to-string",Function.toString)},function(t,e,n){var i=n(57);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var i=n(59),r=n(36),o=n(41),a={};n(11)(a,n(12)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(25),r=n(60),o=n(40),a=n(30)("IE_PROTO"),s=function(){},l=function(){var t,e=n(35)("iframe"),i=o.length;for(e.style.display="none",n(65).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[o[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(24),r=n(25),o=n(38);t.exports=n(15)?Object.defineProperties:function(t,e){r(t);for(var n,a=o(e),s=a.length,l=0;s>l;)i.f(t,n=a[l++],e[n]);return t}},function(t,e,n){var i=n(16),r=n(28),o=n(62)(!1),a=n(30)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;e.length>l;)i(s,n=e[l++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var i=n(28),r=n(63),o=n(64);t.exports=function(t){return function(e,n,a){var s,l=i(e),c=r(l.length),u=o(a,c);if(t&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var i=n(39),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(39),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(10).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(16),r=n(67),o=n(30)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(37);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(7),r=n(1),o=n(3);const a=t=>{let e=new CustomEvent("configurationUpdate",{detail:t});document.dispatchEvent(e)};document.addEventListener("configurationDataRequest",()=>(async()=>{await r.polling.wait(i.a.isDataInitialized,3e4);const t=o.a.getRawConfigurationData();a(t)})())},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return exports}));var core_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),core_utils__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_utils__WEBPACK_IMPORTED_MODULE_0__),_dpu_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),core_application__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),core_application__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_application__WEBPACK_IMPORTED_MODULE_2__);const __={},exports={__:__};__.oDefaults={sSelectorOptionList:".nm-options-list",sSelectorOptionListAlternative:".nm-j-options-list-alternative",sSelectorConfiguratorContainer:".nm-configurator-container",sClassOptionListCollapsed:"nm-options-list-collapsed",sClassConfiguratorContainerShow:"nm-j-configurator-container-show",sClassConfiguratorContainerHide:"nm-j-configurator-container-hide"},__.toggleAlternativeOptions=function(t){var e=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement(__.oDefaults.sSelectorOptionList,t.target.parentNode);core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isElement(e)&&e.classList.toggle(__.oDefaults.sClassOptionListCollapsed)},__.getSelectedIdString=function(t,e){var n="";return e&&e.forEach((function(e){"idid"!==e&&t[e]&&t[e].status&&"11010"===t[e].status&&(n+=e)})),n},__.tilesExclusive=()=>{const exclusiveTiles=document.querySelectorAll(".nm-module-tiles-exclusive, .nm-md-tiles-exclusive");[...exclusiveTiles].forEach(element=>{const items=_dpu_api__WEBPACK_IMPORTED_MODULE_1__.a.getItems()||{},optionsIncluded=eval(element.getAttribute("data-configurator-id-included")),selectedIdString=__.getSelectedIdString(items,optionsIncluded);element.setAttribute("data-tile-selected",selectedIdString)})},__.hasSelectedItem=function(t,e){var n,i,r=e.length;for(i=0;i<r;i++)if((n=t[e[i]]||{}).status&&("11010"===n.status||"10011"===n.status))return!0;return!1},__.isHiddenByVersion=function(t){var e=!1;return __.hiddenItemsFromVersion&&null!==__.hiddenItemsFromVersion&&(e=__.hiddenItemsFromVersion.indexOf(t)>-1),e},__.isVisible=function(t,e){var n,i=!1,r=!1,o=!1;return e&&e.forEach((function(e){if(!1===i)return"idid"===e||(t[e]?(t[e].status&&"00000"!==t[e].status&&"10000"!==t[e].status&&"10010"!==t[e].status&&(r=!0),t[e].id&&!1===__.isHiddenByVersion(t[e].id)&&(o=!0),i=r&&o,!1):(!1===__.isHiddenByVersion(e)&&((n=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement('.nm-j-configurator-item[data-configurator-id="'+e+'"]',document)).classList.contains("nm-j-configurator-status_00000")||n.classList.contains("nm-j-configurator-status_10000")||n.classList.contains("nm-j-configurator-status_10010")||(i=!0)),!1))})),i},__.isVisibleSummary=function(t,e){var n,i=!1,r=!1,o=!1;return e&&e.forEach((function(e){if(!i)return t[e]?(t[e].status&&"11000"!==t[e].status&&"00000"!==t[e].status&&"11100"!==t[e].status&&"10000"!==t[e].status&&"10010"!==t[e].status&&(r=!0),t[e].id&&!1===__.isHiddenByVersion(t[e].id)&&(o=!0),i=r&&o,!0):(!1===__.isHiddenByVersion(e)&&(n=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement('.nm-j-configurator-item[data-configurator-id="'+e+'"]',document),!core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isElement(n)||n.classList.contains("nm-j-configurator-status_11000")||n.classList.contains("nm-j-configurator-status_00000")||n.classList.contains("nm-j-configurator-status_11100")||n.classList.contains("nm-j-configurator-status_10000")||n.classList.contains("nm-j-configurator-status_10010")||(i=!0)),!1)})),i},__.handler=function(){const t=_dpu_api__WEBPACK_IMPORTED_MODULE_1__.a.getItems()||{};__.hiddenItemsFromVersion=_dpu_api__WEBPACK_IMPORTED_MODULE_1__.a.getHiddenItemIDsFromVersion(),__.handleConfiguratorContainer(t),__.handleConfiguratorSummary(t),__.handleEquipmentContainer(t),__.handleOptionsListContainer(t)},__.handleConfiguratorContainer=function(items){let configuratorContainer=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer);configuratorContainer.forEach((function(element){var optionsIncluded=eval(element.getAttribute("data-configurator-id-included"));!1===__.isVisible(items,optionsIncluded)?(element.classList.add(__.oDefaults.sClassConfiguratorContainerHide),element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow)):(element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),element.classList.add(__.oDefaults.sClassConfiguratorContainerShow))}))},__.handleConfiguratorSummary=function(items){let configuratorContainerSummary=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer+".nm-summary-list-container");configuratorContainerSummary.forEach((function(element){let optionsIncluded=eval(element.getAttribute("data-configurator-id-included"));!1===__.isVisibleSummary(items,optionsIncluded)?(element.classList.add(__.oDefaults.sClassConfiguratorContainerHide),element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow)):(element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),element.classList.add(__.oDefaults.sClassConfiguratorContainerShow))}))},__.handleEquipmentContainer=function(items){let equipmentContainers=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(".nm-j-selected-standard-equipment-container");equipmentContainers.forEach((function(container){let optionsIncluded=eval(container.getAttribute("data-configurator-id-included"));__.containsSelectedStandardEquipment(items,optionsIncluded)?(container.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),container.classList.add(__.oDefaults.sClassConfiguratorContainerShow)):(container.classList.add(__.oDefaults.sClassConfiguratorContainerHide),container.classList.remove(__.oDefaults.sClassConfiguratorContainerShow))}))},__.containsSelectedStandardEquipment=function(t,e){let n=!1;return e.forEach((function(e){t[e]&&t[e].status&&"10011"===t[e].status&&(n=!0)})),n},__.handleOptionsListContainer=function(items){let optionsListContainer=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(".nm-md-options-list");optionsListContainer.forEach((function(element){let container=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer,element),optionsIncluded,isCollapsible,optionsList;if(0===container.length)return!0;optionsIncluded=eval(container[0].getAttribute("data-configurator-id-included")),isCollapsible=!1,container.forEach((function(t){let e=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement(".nm-j-options-list-alternative",t);core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isElement(e)&&!core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isHidden(e)&&(isCollapsible=!0)})),optionsList=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorOptionList,element),__.hasSelectedItem(items,optionsIncluded)&&isCollapsible?optionsList[0].classList.add(__.oDefaults.sClassOptionListCollapsed):optionsList[0].classList.remove(__.oDefaults.sClassOptionListCollapsed)}))},__.addEvents=function(){__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.CONFIG_UPDATE,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.PAGE_LOADED,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.LAYER_LOADED,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.MODELSINFO_LOAD_COMPLETE,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.CONFIG_UPDATE,__.tilesExclusive),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.PAGE_LOADED,__.tilesExclusive),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.LAYER_LOADED,__.tilesExclusive),__.domEventDelegate.on("click",__.oDefaults.sSelectorOptionListAlternative,__.toggleAlternativeOptions)},exports.initialize=function(t){__.eventBus=t,__.domEventDelegate=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getEventDelegate("body"),__.addEvents()}},function(t,e,n){var i,r,o,a=function(){var t=function(t,e){var n=t,i=l[e],r=null,o=0,a=null,s=[],c={},u=function(t,e){r=function(t){for(var e=new Array(t),n=0;n<t;n+=1){e[n]=new Array(t);for(var i=0;i<t;i+=1)e[n][i]=null}return e}(o=4*n+17),d(0,0),d(o-7,0),d(0,o-7),g(),m(),p(t,e),n>=7&&f(t),null==a&&(a=y(n,i,s)),h(a,e)},d=function(t,e){for(var n=-1;n<=7;n+=1)if(!(t+n<=-1||o<=t+n))for(var i=-1;i<=7;i+=1)e+i<=-1||o<=e+i||(r[t+n][e+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},m=function(){for(var t=8;t<o-8;t+=1)null==r[t][6]&&(r[t][6]=t%2==0);for(var e=8;e<o-8;e+=1)null==r[6][e]&&(r[6][e]=e%2==0)},g=function(){for(var t=v.getPatternPosition(n),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var o=t[e],a=t[i];if(null==r[o][a])for(var s=-2;s<=2;s+=1)for(var l=-2;l<=2;l+=1)r[o+s][a+l]=-2==s||2==s||-2==l||2==l||0==s&&0==l}},f=function(t){for(var e=v.getBCHTypeNumber(n),i=0;i<18;i+=1){var a=!t&&1==(e>>i&1);r[Math.floor(i/3)][i%3+o-8-3]=a}for(i=0;i<18;i+=1){a=!t&&1==(e>>i&1);r[i%3+o-8-3][Math.floor(i/3)]=a}},p=function(t,e){for(var n=i<<3|e,a=v.getBCHTypeInfo(n),s=0;s<15;s+=1){var l=!t&&1==(a>>s&1);s<6?r[s][8]=l:s<8?r[s+1][8]=l:r[o-15+s][8]=l}for(s=0;s<15;s+=1){l=!t&&1==(a>>s&1);s<8?r[8][o-s-1]=l:s<9?r[8][15-s-1+1]=l:r[8][15-s-1]=l}r[o-8][8]=!t},h=function(t,e){for(var n=-1,i=o-1,a=7,s=0,l=v.getMaskFunction(e),c=o-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var u=0;u<2;u+=1)if(null==r[i][c-u]){var d=!1;s<t.length&&(d=1==(t[s]>>>a&1)),l(i,c-u)&&(d=!d),r[i][c-u]=d,-1==(a-=1)&&(s+=1,a=7)}if((i+=n)<0||o<=i){i-=n,n=-n;break}}},y=function(t,e,n){for(var i=C.getRSBlocks(t,e),r=E(),o=0;o<n.length;o+=1){var a=n[o];r.put(a.getMode(),4),r.put(a.getLength(),v.getLengthInBits(a.getMode(),t)),a.write(r)}var s=0;for(o=0;o<i.length;o+=1)s+=i[o].dataCount;if(r.getLengthInBits()>8*s)throw"code length overflow. ("+r.getLengthInBits()+">"+8*s+")";for(r.getLengthInBits()+4<=8*s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*s||(r.put(236,8),r.getLengthInBits()>=8*s));)r.put(17,8);return function(t,e){for(var n=0,i=0,r=0,o=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s+=1){var l=e[s].dataCount,c=e[s].totalCount-l;i=Math.max(i,l),r=Math.max(r,c),o[s]=new Array(l);for(var u=0;u<o[s].length;u+=1)o[s][u]=255&t.getBuffer()[u+n];n+=l;var d=v.getErrorCorrectPolynomial(c),m=S(o[s],d.getLength()-1).mod(d);a[s]=new Array(d.getLength()-1);for(u=0;u<a[s].length;u+=1){var g=u+m.getLength()-a[s].length;a[s][u]=g>=0?m.getAt(g):0}}var f=0;for(u=0;u<e.length;u+=1)f+=e[u].totalCount;var p=new Array(f),h=0;for(u=0;u<i;u+=1)for(s=0;s<e.length;s+=1)u<o[s].length&&(p[h]=o[s][u],h+=1);for(u=0;u<r;u+=1)for(s=0;s<e.length;s+=1)u<a[s].length&&(p[h]=a[s][u],h+=1);return p}(r,i)};c.addData=function(t,e){var n=null;switch(e=e||"Byte"){case"Numeric":n=b(t);break;case"Alphanumeric":n=w(t);break;case"Byte":n=D(t);break;case"Kanji":n=_(t);break;default:throw"mode:"+e}s.push(n),a=null},c.isDark=function(t,e){if(t<0||o<=t||e<0||o<=e)throw t+","+e;return r[t][e]},c.getModuleCount=function(){return o},c.make=function(){if(n<1){for(var t=1;t<40;t++){for(var e=C.getRSBlocks(t,i),r=E(),o=0;o<s.length;o++){var a=s[o];r.put(a.getMode(),4),r.put(a.getLength(),v.getLengthInBits(a.getMode(),t)),a.write(r)}var l=0;for(o=0;o<e.length;o++)l+=e[o].dataCount;if(r.getLengthInBits()<=8*l)break}n=t}u(!1,function(){for(var t=0,e=0,n=0;n<8;n+=1){u(!0,n);var i=v.getLostPoint(c);(0==n||t>i)&&(t=i,e=n)}return e}())},c.createTableTag=function(t,e){t=t||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",n+='">',n+="<tbody>";for(var i=0;i<c.getModuleCount();i+=1){n+="<tr>";for(var r=0;r<c.getModuleCount();r+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+t+"px;",n+=" height: "+t+"px;",n+=" background-color: ",n+=c.isDark(i,r)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},c.createSvgTag=function(t,e,n,i){var r={};"object"==typeof arguments[0]&&(t=(r=arguments[0]).cellSize,e=r.margin,n=r.alt,i=r.title),t=t||2,e=void 0===e?4*t:e,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-title":null;var o,a,s,l,u=c.getModuleCount()*t+2*e,d="";for(l="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",d+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',d+=r.scalable?"":' width="'+u+'px" height="'+u+'px"',d+=' viewBox="0 0 '+u+" "+u+'" ',d+=' preserveAspectRatio="xMinYMin meet"',d+=i.text||n.text?' role="img" aria-labelledby="'+A([i.id,n.id].join(" ").trim())+'"':"",d+=">",d+=i.text?'<title id="'+A(i.id)+'">'+A(i.text)+"</title>":"",d+=n.text?'<description id="'+A(n.id)+'">'+A(n.text)+"</description>":"",d+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',d+='<path d="',a=0;a<c.getModuleCount();a+=1)for(s=a*t+e,o=0;o<c.getModuleCount();o+=1)c.isDark(a,o)&&(d+="M"+(o*t+e)+","+s+l);return d+='" stroke="transparent" fill="black"/>',d+="</svg>"},c.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var n=c.getModuleCount()*t+2*e,i=e,r=n-e;return k(n,n,(function(e,n){if(i<=e&&e<r&&i<=n&&n<r){var o=Math.floor((e-i)/t),a=Math.floor((n-i)/t);return c.isDark(a,o)?0:1}return 1}))},c.createImgTag=function(t,e,n){t=t||2,e=void 0===e?4*t:e;var i=c.getModuleCount()*t+2*e,r="";return r+="<img",r+=' src="',r+=c.createDataURL(t,e),r+='"',r+=' width="',r+=i,r+='"',r+=' height="',r+=i,r+='"',n&&(r+=' alt="',r+=A(n),r+='"'),r+="/>"};var A=function(t){for(var e="",n=0;n<t.length;n+=1){var i=t.charAt(n);switch(i){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=i}}return e};return c.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,n,i,r,o,a=1*c.getModuleCount()+2*t,s=t,l=a-t,u={"â–ˆâ–ˆ":"â–ˆ","â–ˆ ":"â–€"," â–ˆ":"â–„","  ":" "},d={"â–ˆâ–ˆ":"â–€","â–ˆ ":"â–€"," â–ˆ":" ","  ":" "},m="";for(e=0;e<a;e+=2){for(i=Math.floor((e-s)/1),r=Math.floor((e+1-s)/1),n=0;n<a;n+=1)o="â–ˆ",s<=n&&n<l&&s<=e&&e<l&&c.isDark(i,Math.floor((n-s)/1))&&(o=" "),s<=n&&n<l&&s<=e+1&&e+1<l&&c.isDark(r,Math.floor((n-s)/1))?o+=" ":o+="â–ˆ",m+=t<1&&e+1>=l?d[o]:u[o];m+="\n"}return a%2&&t>0?m.substring(0,m.length-a-1)+Array(a+1).join("â–€"):m.substring(0,m.length-1)}(e);t-=1,e=void 0===e?2*t:e;var n,i,r,o,a=c.getModuleCount()*t+2*e,s=e,l=a-e,u=Array(t+1).join("â–ˆâ–ˆ"),d=Array(t+1).join("  "),m="",g="";for(n=0;n<a;n+=1){for(r=Math.floor((n-s)/t),g="",i=0;i<a;i+=1)o=1,s<=i&&i<l&&s<=n&&n<l&&c.isDark(r,Math.floor((i-s)/t))&&(o=0),g+=o?u:d;for(r=0;r<t;r+=1)m+=g+"\n"}return m.substring(0,m.length-1)},c.renderTo2dContext=function(t,e){e=e||2;for(var n=c.getModuleCount(),i=0;i<n;i++)for(var r=0;r<n;r++)t.fillStyle=c.isDark(i,r)?"black":"white",t.fillRect(i*e,r*e,e,e)},c};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],n=0;n<t.length;n+=1){var i=t.charCodeAt(n);e.push(255&i)}return e}}).default,t.createStringToBytes=function(t,e){var n=function(){for(var n=L(t),i=function(){var t=n.read();if(-1==t)throw"eof";return t},r=0,o={};;){var a=n.read();if(-1==a)break;var s=i(),l=i()<<8|i();o[String.fromCharCode(a<<8|s)]=l,r+=1}if(r!=e)throw r+" != "+e;return o}(),i="?".charCodeAt(0);return function(t){for(var e=[],r=0;r<t.length;r+=1){var o=t.charCodeAt(r);if(o<128)e.push(o);else{var a=n[t.charAt(r)];"number"==typeof a?(255&a)==a?e.push(a):(e.push(a>>>8),e.push(255&a)):e.push(i)}}return e}};var e,n,i,r=1,o=2,a=4,s=8,l={L:1,M:0,Q:3,H:2},c=0,u=1,d=2,m=3,g=4,f=5,p=6,h=7,v=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(n={}).getBCHTypeInfo=function(t){for(var e=t<<10;i(e)-i(1335)>=0;)e^=1335<<i(e)-i(1335);return 21522^(t<<10|e)},n.getBCHTypeNumber=function(t){for(var e=t<<12;i(e)-i(7973)>=0;)e^=7973<<i(e)-i(7973);return t<<12|e},n.getPatternPosition=function(t){return e[t-1]},n.getMaskFunction=function(t){switch(t){case c:return function(t,e){return(t+e)%2==0};case u:return function(t,e){return t%2==0};case d:return function(t,e){return e%3==0};case m:return function(t,e){return(t+e)%3==0};case g:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case f:return function(t,e){return t*e%2+t*e%3==0};case p:return function(t,e){return(t*e%2+t*e%3)%2==0};case h:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},n.getErrorCorrectPolynomial=function(t){for(var e=S([1],0),n=0;n<t;n+=1)e=e.multiply(S([1,y.gexp(n)],0));return e},n.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case r:return 10;case o:return 9;case a:case s:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case r:return 12;case o:return 11;case a:return 16;case s:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case r:return 14;case o:return 13;case a:return 16;case s:return 12;default:throw"mode:"+t}}},n.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i+=1)for(var r=0;r<e;r+=1){for(var o=0,a=t.isDark(i,r),s=-1;s<=1;s+=1)if(!(i+s<0||e<=i+s))for(var l=-1;l<=1;l+=1)r+l<0||e<=r+l||0==s&&0==l||a==t.isDark(i+s,r+l)&&(o+=1);o>5&&(n+=3+o-5)}for(i=0;i<e-1;i+=1)for(r=0;r<e-1;r+=1){var c=0;t.isDark(i,r)&&(c+=1),t.isDark(i+1,r)&&(c+=1),t.isDark(i,r+1)&&(c+=1),t.isDark(i+1,r+1)&&(c+=1),0!=c&&4!=c||(n+=3)}for(i=0;i<e;i+=1)for(r=0;r<e-6;r+=1)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(n+=40);for(r=0;r<e;r+=1)for(i=0;i<e-6;i+=1)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(n+=40);var u=0;for(r=0;r<e;r+=1)for(i=0;i<e;i+=1)t.isDark(i,r)&&(u+=1);return n+=Math.abs(100*u/e/e-50)/5*10},n),y=function(){for(var t=new Array(256),e=new Array(256),n=0;n<8;n+=1)t[n]=1<<n;for(n=8;n<256;n+=1)t[n]=t[n-4]^t[n-5]^t[n-6]^t[n-8];for(n=0;n<255;n+=1)e[t[n]]=n;var i={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return i}();function S(t,e){if(void 0===t.length)throw t.length+"/"+e;var n=function(){for(var n=0;n<t.length&&0==t[n];)n+=1;for(var i=new Array(t.length-n+e),r=0;r<t.length-n;r+=1)i[r]=t[r+n];return i}(),i={getAt:function(t){return n[t]},getLength:function(){return n.length},multiply:function(t){for(var e=new Array(i.getLength()+t.getLength()-1),n=0;n<i.getLength();n+=1)for(var r=0;r<t.getLength();r+=1)e[n+r]^=y.gexp(y.glog(i.getAt(n))+y.glog(t.getAt(r)));return S(e,0)},mod:function(t){if(i.getLength()-t.getLength()<0)return i;for(var e=y.glog(i.getAt(0))-y.glog(t.getAt(0)),n=new Array(i.getLength()),r=0;r<i.getLength();r+=1)n[r]=i.getAt(r);for(r=0;r<t.getLength();r+=1)n[r]^=y.gexp(y.glog(t.getAt(r))+e);return S(n,0).mod(t)}};return i}var C=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var n={};return n.totalCount=t,n.dataCount=e,n},n={};return n.getRSBlocks=function(n,i){var r=function(e,n){switch(n){case l.L:return t[4*(e-1)+0];case l.M:return t[4*(e-1)+1];case l.Q:return t[4*(e-1)+2];case l.H:return t[4*(e-1)+3];default:return}}(n,i);if(void 0===r)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+i;for(var o=r.length/3,a=[],s=0;s<o;s+=1)for(var c=r[3*s+0],u=r[3*s+1],d=r[3*s+2],m=0;m<c;m+=1)a.push(e(u,d));return a},n}(),E=function(){var t=[],e=0,n={getBuffer:function(){return t},getAt:function(e){var n=Math.floor(e/8);return 1==(t[n]>>>7-e%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)n.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return e},putBit:function(n){var i=Math.floor(e/8);t.length<=i&&t.push(0),n&&(t[i]|=128>>>e%8),e+=1}};return n},b=function(t){var e=r,n=t,i={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,i=0;i+2<e.length;)t.put(o(e.substring(i,i+3)),10),i+=3;i<e.length&&(e.length-i==1?t.put(o(e.substring(i,i+1)),4):e.length-i==2&&t.put(o(e.substring(i,i+2)),7))}},o=function(t){for(var e=0,n=0;n<t.length;n+=1)e=10*e+a(t.charAt(n));return e},a=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return i},w=function(t){var e=o,n=t,i={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,i=0;i+1<e.length;)t.put(45*r(e.charAt(i))+r(e.charAt(i+1)),11),i+=2;i<e.length&&t.put(r(e.charAt(i)),6)}},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return i},D=function(e){var n=a,i=t.stringToBytes(e),r={getMode:function(){return n},getLength:function(t){return i.length},write:function(t){for(var e=0;e<i.length;e+=1)t.put(i[e],8)}};return r},_=function(e){var n=s,i=t.stringToBytesFuncs.SJIS;if(!i)throw"sjis not supported.";!function(t,e){var n=i("å‹");if(2!=n.length||38726!=(n[0]<<8|n[1]))throw"sjis not supported."}();var r=i(e),o={getMode:function(){return n},getLength:function(t){return~~(r.length/2)},write:function(t){for(var e=r,n=0;n+1<e.length;){var i=(255&e[n])<<8|255&e[n+1];if(33088<=i&&i<=40956)i-=33088;else{if(!(57408<=i&&i<=60351))throw"illegal char at "+(n+1)+"/"+i;i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13),n+=2}if(n<e.length)throw"illegal char at "+(n+1)}};return o},A=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,n,i){n=n||0,i=i||t.length;for(var r=0;r<i;r+=1)e.writeByte(t[r+n])},writeString:function(t){for(var n=0;n<t.length;n+=1)e.writeByte(t.charCodeAt(n))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var n=0;n<t.length;n+=1)n>0&&(e+=","),e+=t[n];return e+="]"}};return e},L=function(t){var e=t,n=0,i=0,r=0,o={read:function(){for(;r<8;){if(n>=e.length){if(0==r)return-1;throw"unexpected end of file./"+r}var t=e.charAt(n);if(n+=1,"="==t)return r=0,-1;t.match(/^\s$/)||(i=i<<6|a(t.charCodeAt(0)),r+=6)}var o=i>>>r-8&255;return r-=8,o}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return o},k=function(t,e,n){for(var i=function(t,e){var n=t,i=e,r=new Array(t*e),o={setPixel:function(t,e,i){r[e*n+t]=i},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(i),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(i),t.writeByte(0);var e=a(2);t.writeByte(2);for(var r=0;e.length-r>255;)t.writeByte(255),t.writeBytes(e,r,255),r+=255;t.writeByte(e.length-r),t.writeBytes(e,r,e.length-r),t.writeByte(0),t.writeString(";")}},a=function(t){for(var e=1<<t,n=1+(1<<t),i=t+1,o=s(),a=0;a<e;a+=1)o.add(String.fromCharCode(a));o.add(String.fromCharCode(e)),o.add(String.fromCharCode(n));var l=A(),c=function(t){var e=t,n=0,i=0,r={write:function(t,r){if(t>>>r!=0)throw"length over";for(;n+r>=8;)e.writeByte(255&(t<<n|i)),r-=8-n,t>>>=8-n,i=0,n=0;i|=t<<n,n+=r},flush:function(){n>0&&e.writeByte(i)}};return r}(l);c.write(e,i);var u=0,d=String.fromCharCode(r[u]);for(u+=1;u<r.length;){var m=String.fromCharCode(r[u]);u+=1,o.contains(d+m)?d+=m:(c.write(o.indexOf(d),i),o.size()<4095&&(o.size()==1<<i&&(i+=1),o.add(d+m)),d=m)}return c.write(o.indexOf(d),i),c.write(n,i),c.flush(),l.toByteArray()},s=function(){var t={},e=0,n={add:function(i){if(n.contains(i))throw"dup key:"+i;t[i]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return n};return o}(t,e),r=0;r<e;r+=1)for(var o=0;o<t;o+=1)i.setPixel(o,r,n(o,r));var a=A();i.write(a);for(var s=function(){var t=0,e=0,n=0,i="",r={},o=function(t){i+=String.fromCharCode(a(63&t))},a=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return r.writeByte=function(i){for(t=t<<8|255&i,e+=8,n+=1;e>=6;)o(t>>>e-6),e-=6},r.flush=function(){if(e>0&&(o(t<<6-e),t=0,e=0),n%3!=0)for(var r=3-n%3,a=0;a<r;a+=1)i+="="},r.toString=function(){return i},r}(),l=a.toByteArray(),c=0;c<l.length;c+=1)s.writeByte(l[c]);return s.flush(),"data:image/gif;base64,"+s};return t}();a.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}(t)},r=[],void 0===(o="function"==typeof(i=function(){return a})?i.apply(e,r):i)||(t.exports=o)},,,,,,function(t,e,n){"use strict";n.r(e),n.d(e,"audicode",(function(){return f})),n.d(e,"AUDICODE_STORE_ID",(function(){return c.a})),n.d(e,"ave2cloud",(function(){return y})),n.d(e,"aveApi",(function(){return k})),n.d(e,"aveDom",(function(){return A})),n.d(e,"carlineMapping",(function(){return O.a})),n.d(e,"cart",(function(){return Y})),n.d(e,"CONFIGURATION_STORE_ID",(function(){return X.a})),n.d(e,"container",(function(){return ot.a})),n.d(e,"domState",(function(){return st})),n.d(e,"dpuApi",(function(){return s.a})),n.d(e,"dpuConflict",(function(){return lt.a})),n.d(e,"dpuController",(function(){return p.a})),n.d(e,"dpuModel",(function(){return ct.a})),n.d(e,"dpuSearch",(function(){return ft})),n.d(e,"dpuTransfer",(function(){return pt.a})),n.d(e,"equipmentSearch",(function(){return _t})),n.d(e,"expertmode",(function(){return Lt})),n.d(e,"formCore",(function(){return Gt})),n.d(e,"formField",(function(){return xt})),n.d(e,"formGroup",(function(){return Ut})),n.d(e,"formItem",(function(){return Rt})),n.d(e,"formSelect",(function(){return $t})),n.d(e,"formSimple",(function(){return Jt})),n.d(e,"hiddenVersionItems",(function(){return te})),n.d(e,"infobox",(function(){return ne})),n.d(e,"inlinerendering",(function(){return ae})),n.d(e,"inlinerenderingAoz",(function(){return re})),n.d(e,"lastConfiguration",(function(){return le})),n.d(e,"loadingIndicator",(function(){return ye})),n.d(e,"mediaLibrary",(function(){return ue})),n.d(e,"pattern",(function(){return Me})),n.d(e,"patternAudicode",(function(){return be})),n.d(e,"patternCarlineId",(function(){return De})),n.d(e,"patternConfiguration",(function(){return Ae})),n.d(e,"patternLanguage",(function(){return ke})),n.d(e,"patternLeadsource",(function(){return Ie})),n.d(e,"patternPartnerId",(function(){return Pe})),n.d(e,"patternPrString",(function(){return Oe})),n.d(e,"patternVehicleId",(function(){return Re})),n.d(e,"pdfServiceLink",(function(){return Ne})),n.d(e,"preconfigurationTeaser",(function(){return He})),n.d(e,"preconfsTeaser",(function(){return qe})),n.d(e,"recommendations",(function(){return Ye})),n.d(e,"renderinginjector",(function(){return Je})),n.d(e,"scsAttributesInitial",(function(){return tn})),n.d(e,"scsMatching",(function(){return on})),n.d(e,"scsMatchingBasket",(function(){return nn})),n.d(e,"setFlagsSearch",(function(){return cn})),n.d(e,"startlayer",(function(){return an.a})),n.d(e,"summaryTechdata",(function(){return dn})),n.d(e,"tooltip",(function(){return yn})),n.d(e,"userConfigurations",(function(){return Sn.a})),n.d(e,"USERDATA_STORE_ID",(function(){return u})),n.d(e,"visializer",(function(){return En})),n.d(e,"vtp",(function(){return wn})),n.d(e,"wallet",(function(){return Tn})),n.d(e,"EngineDisclaimerLayerElement",(function(){return In})),n.d(e,"yourPayment",(function(){return Pn})),n.d(e,"zipDownload",(function(){return jn}));var i=n(0),r=n(70),o=n.n(r),a=n(1),s=n(2),l=n(4),c=n(13);const u="dbadUserdataStore";class d{constructor(){return d.instance||(this._initStore(),d.instance=this),d.instance}_initStore(){const t={update:this._update,logout:this._logout};l.stateRegistry.addStore(u,{audicodes:null,loggedIn:null,csrfToken:null},t)}_update(t,e){return{...t,...e}}_logout(t){return{...t,audicodes:null,loggedIn:!1,csrfToken:null}}}const m=new d;Object.freeze(m);const g={},f={__:g};g.audicode=null,g.eventBus=null,g.selectors={audicodeLink:".nm-j-audicode-link"},g.clickCallback=function(t){t.preventDefault();const e=a.dom.closest(t.target,g.selectors.audicodeLink);if("_blank"===e.getAttribute("target")){const t=window.open("","_blank");g.clickAudicodeLink(e,t)}else g.clickAudicodeLink(e,window)},g.addEvents=function(){g.eventBus.addListener(i.appEvents.CONFIG_UPDATE,g.deleteAudicode),g.eventBus.addListener(i.appEvents.LAYER_LOADED,g.onLayerLoaded),g.eventBus.addListener(i.appEvents.LAYER_LOADED,g.removeAudiCodeHref),g.eventBus.addListener(i.appEvents.PAGE_LOADED,g.removeAudiCodeHref),g.legacyEventBus.on("click",g.selectors.audicodeLink,g.clickCallback)},g.removeEvents=function(){g.eventBus.removeListener(i.appEvents.CONFIG_UPDATE,g.deleteAudicode),g.eventBus.removeListener(i.appEvents.LAYER_LOADED,g.onLayerLoaded),g.eventBus.removeListener(i.appEvents.LAYER_LOADED,g.removeAudiCodeHref),g.eventBus.removeListener(i.appEvents.PAGE_LOADED,g.removeAudiCodeHref),g.legacyEventBus.off("click",g.selectors.audicodeLink,g.clickCallback)},g.deleteAudicode=function(){g.audicode=null,l.stateRegistry.triggerAction(c.a,"invalidate"),g.eventBus.emit(i.appEvents.AUDICODE_DELETED)},g.loadAudiCodeRequest=async function(t){const e=s.a.getDpuUrl()+"audicode?"+new URLSearchParams({context:s.a.getContext(),subsession:s.a.getSubsessionID()||"",ids:t||s.a.getPrString()}).toString();return fetch(e,{credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).catch(t=>console.log("Error fetching AudiCode - server responded with: ",t))},g.hasAudicode=function(t){return!!t&&!!t.header&&200===t.header.statuscode&&t.audicode&&!!t.audicode.id},f.loadAudiCode=function(){return new Promise((function(t,e){g.audicode&&g.prString&&g.prString===s.a.getPrString()?(g.updateAudicodeStore(),t(g.audicode)):(g.audicode=null,g.loadAudiCodeRequest().then((function(n){g.hasAudicode(n)?(g.audicode=n.audicode.id,g.updateAudicodeStore(),n.header.subsession&&s.a.setSubsessionID(n.header.subsession),g.prString=s.a.getPrString(),g.eventBus.emit(i.appEvents.AUDICODE_SUCCESS),t(g.audicode)):(g.eventBus.emit(i.appEvents.AUDICODE_FAILED),e(new TypeError("load AudiCode failed")))}),(function(t){console.error(t),g.eventBus.emit(i.appEvents.AUDICODE_FAILED),e(new TypeError("load AudiCode error: "+t.message))})))}))},g.isAudicodeFieldOnPage=function(){return a.dom.isElement(".nm-j-audicode")},f.getAudicode=function(){return g.audicode},g.onLayerLoaded=function(){if(g.isAudicodeFieldOnPage()){const t=g.getAudicodeFromUrl();t?(g.audicode=t,g.updateAudicodeStore(),g.updateAudicodeDomElements(),g.removeAudicodeFromUrl()):f.loadAudiCode().then(g.updateAudicodeDomElements).catch((function(t){g.error(t)}))}},g.getAudicodeFromUrl=()=>new URL(window.location.href).searchParams.get("audicode"),g.removeAudicodeFromUrl=()=>{const t=new URL(window.location.href);t.searchParams.delete("audicode"),window.history.replaceState({},document.title,t.href)},g.updateAudicodeStore=()=>{l.stateRegistry.triggerAction(c.a,"update",{audicode:g.audicode})},g.updateAudicodeDomElements=function(){g.audicode&&(g.generateQrCode(),a.dom.getElementsArray(".nm-j-audicode").forEach(t=>t.innerHTML=g.audicode),a.dom.getElementsArray(".nm-j-audicode-show").forEach(t=>t.classList.remove("nm-j-audicode-failure","nm-j-audicode-loading")),l.stateRegistry.triggerAction(u,"update",{currentAudicode:g.audicode}))},g.generateQrCode=function(){const t=a.dom.getElement(".nm-j-audicode-qrcode");let e,n;a.dom.isElement(t)&&(t.innerHTML="",e=t.getAttribute("data-qr-url"),n=new o.a(4,"L"),n.addData(e+g.audicode),n.make(),t.innerHTML=n.createSvgTag(4,0))},g.clickAudicodeLink=function(t,e){null===g.audicode?f.loadAudiCode().then((function(){g.setAudiCodeUrlAsLocation(t,e)})).catch((function(t){g.error(t)})):g.setAudiCodeUrlAsLocation(t,e)},g.setAudiCodeUrlAsLocation=function(t,e){let n;n=t.getAttribute("data-link-pattern"),n=n.replace("{{=audicode}}",g.audicode),e.location.href=n},g.removeAudiCodeHref=function(){document.querySelectorAll(g.selectors.audicodeLink).forEach(t=>{t.removeAttribute("href")})},g.error=function(t){a.dom.getElement(".nm-j-audicode-show").classList.add("nm-j-audicode-failure"),console.log(t)},f.initialize=function(t){g.eventBus=t,g.legacyEventBus=a.dom.getEventDelegate("body"),g.removeAudiCodeHref(),g.addEvents()};var p=n(7);class h extends i.ModalLayerContentBase{constructor(t={}){super(),this._closeLayer=this._closeLayer.bind(this);const e=t.dataset.configuration["audicode-rescue-info"];this.data={data:t.dataset,whatIsChanged:this._getIsWhatChanged(t.dataset.rescueMessages),pdfLink:this._getPdfLink(e)}}static get type(){return"AudicodeRescueLayerElement"}static async getContent(t){return new h(t)}connectedCallback(){this._render(),this.addEvents(),p.a.resetAudicodeRescueInfo()}addEvents(){[...this.querySelectorAll(".j-close")].map(t=>t.addEventListener("click",this._closeLayer))}_getIsWhatChanged(t){return t.join(", ")}_getPdfLink(t){return SETUPS.get("scope.nemo.audicode.not_valid_pdflink")?SETUPS.get("nemo.pdf.url")+"/audicode/"+t.audicode:""}_closeLayer(t){t&&(t.preventDefault(),t.stopPropagation()),this._triggerClose()}_render(){this.innerHTML=a.template.render('\n{{?!!it.data.configuration.extColorCode && !!it.data.configuration.extColorCode.selected}}\n\t{{var selected = it.data.configuration.extColorCode.selected;}}\n\t{{var backgroundcolor = \'extcolor--\' + selected;}}\n\t{{var textcolor = \'extcolor-text--\' + selected;}}\n{{??}}\n\t{{var selected = "";}}\n\t{{var backgroundcolor = "";}}\n\t{{var textcolor = "";}}\n{{?}}\n<div class="rescue-audicode">\n\t<div class="rescue-audi__close">\n\t\t<div class="nm-layer__close-button j-close" style="display: inline-flex;">\n\t\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t\t<use xlink:href="{{=SETUPS.get(\'coreci.url.assets\')}}/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"></use>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class="{{=textcolor}}">\n\t\t<div class="rescue-audicode__text-container {{=backgroundcolor}}">\n\t\t\t<p class="rescue-audicode__audicode audi-copy-s">{{=window.i18n[\'audicode.rescue.your_audicode\']}} {{=it.data.configuration[\'audicode-rescue-info\'].audicode}}</p>\n\t\t\t<h3 class="rescue-audicode__carline audi-headline-order-3">{{=it.data.configuration.carlineName}}</h3>\n\t\t\t<p class="rescue-audicode__description audi-copy-s">{{=it.data.configuration.description}}</p>\n\t\t\t<p class="rescue-audicode__price audi-copy-m">{{=it.data.configuration.prices.total}}</p>\n\t\t</div>\n\t\t<div class="rescue-audicode__image-container">\n\t\t\t<div class="rescue-audicode__image-background {{=backgroundcolor}}"></div>\n\t\t\t<div class="rescue-audicode__image-picture">\n                {{?!!it.data.images && it.data.images[\'exterior\'] && it.data.images[\'exterior\'][\'flyout\']}}\n                    <picture>\n                        <source media="(max-width: 427px)" srcset="{{=SETUPS.get(\'nemo.url.mediaservice\')}}{{=it.data.images[\'exterior\'][\'flyout\']}}?imwidth=470">\n                        <img class="rescue-audicode__image" src="{{=SETUPS.get(\'nemo.url.mediaservice\')}}{{=it.data.images[\'exterior\'][\'flyout\']}}?imwidth=654">\n                    </picture>\n                {{??}}\n                    <img class="rescue-audicode__image" src="{{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-audicode-flyout.png"}}" alt="Fallback Image">\n                {{?}}\n            </div>\n\t\t</div>\n\t</div>\n\n\t<div class="rescue-audicode__text-options-container">\n\t\t<p class="rescue-audicode__options_text audi-copy-m">{{=window.i18n[\'audicode.rescue.cant_load_audicode\']}}</p>\n\t\t<p class="rescue-audicode__options-changed audi-copy-s">\n\t\t\t{{=window.i18n[\'audicode.rescue.alternative_configuration\']}}<br/>\n\t\t\t{{=it.whatIsChanged}}\n\t\t</p>\n\n\t\t<a href="#" class="rescue-audicode__options-load-configuration audi-link-m audi-link--arrow j-close">{{=window.i18n[\'audicode.rescue.load_alternative_configuration\']}}</a><br />\n\t\t{{?it.pdfLink}}\n\t\t\t<a href="{{=it.pdfLink}}" class="rescue-audicode__options-pdf audi-link-m audi-link--arrow">{{=window.i18n[\'audicode.rescue.pdf\']}}</a>\n\t\t{{?}}\n\n\t\t{{? !SETUPS.get(\'scope.nemo.hide.consumption-entries\')}}\n\t\t\t<div class="rescue-audicode__disclaimer-entries audi-copy-s">\n\t\t\t\t{{? it.data.configuration.techdata && (it.data.configuration.techdata[\'consumption-combined\'] || it.data.configuration.techdata[\'carbon-dioxide-emissions\'] || it.data.configuration.techdata[\'efficiency-class\'])}}\n\t\t\t\t\t{{? it.data.configuration.techdata[\'consumption-combined\']}}\n\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.consumption-combined\']}}*:</dt>\n\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'consumption-combined\']}}</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? it.data.configuration.techdata[\'carbon-dioxide-emissions\']}}\n\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.emission-combined\']}}*:</dt>\n\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'carbon-dioxide-emissions\']}}</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.eec-entry\')}}\n\t\t\t\t\t\t{{? it.data.configuration.techdata[\'efficiency-class\']}}\n\t\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.efficiency-class\']}}:</dt>\n\t\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'efficiency-class\']}}</dd>\n\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t{{?}}\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t{{?}}\n\n\t</div>\n</div>',this.data)}}i.modalLayer.registerLayerType(h),void 0===window.customElements.get("audi-audicode-rescue-layer-element")&&window.customElements.define("audi-audicode-rescue-layer-element",h);const v={},y={__:v};v.isAve2CloudAvailable=!1,v.containerId="avecanvas";const S=()=>{if(console.log("AVE2Cloud updateStreamResolution"),v.controllerFactory){const t=document.getElementById(v.containerId);v.controllerFactory.getUIAndApiController(e=>{e.updateSize(null,t.clientHeight)})}},C=()=>{window.addEventListener("resize",S)},E=()=>{console.log("AVE2Cloud closeLayerHandler"),v.controllerFactory&&v.controllerFactory.getUIAndApiController(t=>{t.close()}),window.removeEventListener("resize",S)},b=()=>{v.controllerFactory=new Ave2CloudApplication.ControllerFactory,v.controllerFactory.getUIAndApiController((t,e)=>{e.getFreeInstances().then(t=>{t.freeInstances>=1?(v.isAve2CloudAvailable=!0,console.log("AVE2Cloud: freeInstances: ",t.freeInstances)):console.log("AVE2Cloud: No free sessions")}).catch(t=>{console.error(t,"getFreeInstances")})})},w=()=>{console.log("AVE2Cloud connectToStream");const t=document.getElementById(v.containerId);t.classList.add("ave2cloud-container");const e={connectionParameters:{protocol:document.location.protocol.indexOf("https")>-1?"https":"http",customer:SETUPS.get("ave3d.customer")||"audi",environment:SETUPS.get("ave3d.env")||"live"},car:{manufacturer:"audi",model:s.a.getCarline(),year:s.a.getModelYear()},consumeMouseScrollEvents:!0,resolution:{x:t.clientWidth,y:t.clientHeight},setupCamera:"MRV1",setupPrCodes:s.a.getAveString().split(","),market:SETUPS.get("ave2cloud.market"),service:"web"};console.log("AVE2Cloud webSiteCar",JSON.stringify(e)),v.controllerFactory.getUIAndApiController((n,i)=>{n.connect(e,v.containerId),n.on(t=>{console.log(t,"view-event"),"AVEConnected"===t&&i.loadCar(e)}),i.on(e=>{console.log(e.message,"api-event"),"LoadCarFinish"===e.message&&(n.updateSize(null,t.clientHeight),t.classList.add("ave2cloud-container--ready"))})})},D=()=>{v.eventBus.on(i.appEvents.CARINFO_LOAD_COMPLETE,b),v.eventBus.on(i.appEvents.CONFIG_UPDATE,b),v.eventBus.on("AVE2CLOUD.CONTAINER.READY",w),v.eventBus.on(i.appEvents.RENDERINGLAYER_LOADED,C),v.eventBus.on("jslayer.close",E)};y.isAve2CloudAvailable=()=>v.isAve2CloudAvailable,y.isAve2CloudEnabled=()=>SETUPS.get("ave2cloud.enabled"),y.initialize=t=>{if(v.eventBus=t,y.isAve2CloudEnabled()){console.log("AVE2Cloud initialize");const t=SETUPS.get("ave2cloud.url");a.jsLoader.loadURL(t).then(D)}};const _={},A={__:_};window.i18n=window.i18n||{},_.optionMappings={Trunk:window.i18n["rendering-layer.option-trunk"],Doors:window.i18n["rendering-layer.option-doors"],MMI:window.i18n["rendering-layer.option-mmi"],RTTVoid:window.i18n["rendering-layer.option-env-grey"],WhiteVoid:window.i18n["rendering-layer.option-env-white"],Tunnel_Env:window.i18n["rendering-layer.option-Tunnel_Env"],Iceland_Void:window.i18n["rendering-layer.option-Iceland_Void"],SoftTop:window.i18n["rendering-layer.option-SoftTop"]},_.oDefaults={sClassHidden:"nm-hidden",sClassActive:"nm-active",sClassSelectorClosed:"nm-icon-expand-white",sClassSelectorOpen:"nm-icon-collapse-white",sSelectorOptionsSelectorWrapper:".nm-ave-animation-selector-wrapper",sSelectorOptionsSelector:".nm-ave-animation-selector",sSelectorActive3dContainer:".nm-md-ave-container",sSelectorStreamWrapper:"#streamWrapper"},A.renderAnimationControls=function(t){var e,n,i="",r=Object.keys(_.optionMappings);for(e=0,n=r.length;e<n;e++)t.indexOf(r[e])>-1&&(i+=_.renderAnimationOption(r[e],_.optionMappings[r[e]]));return i},A.renderEnvironmentControls=function(t){var e,n,i="",r=Object.keys(_.optionMappings);for(e=0,n=r.length;e<n;e++)t.indexOf(r[e])>-1&&(i+=_.renderEnvironmentOption(r[e],_.optionMappings[r[e]]));return i},A.enableOptions=function(){a.dom.getElement(_.oDefaults.sSelectorOptionsSelector).classList.remove(_.oDefaults.sClassHidden),a.dom.getEventDelegate("body").off("click",_.oDefaults.sSelectorOptionsSelectorWrapper,_.handlerAnimationSelectorClick),a.dom.getEventDelegate("body").on("click",_.oDefaults.sSelectorOptionsSelectorWrapper,_.handlerAnimationSelectorClick)},_.renderAnimationOption=function(t,e){return'<li class="nm-avectrl-animation animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-animation="'+t+'">'+e+"</li>"},_.renderEnvironmentOption=function(t,e){return'<li class="nm-avectrl-environment animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-environment="'+t+'">'+e+"</li>"},_.handlerAnimationSelectorClick=function(t){var e=a.dom.getElement(_.oDefaults.sSelectorOptionsSelector),n=a.dom.getElement(_.oDefaults.sSelectorOptionsSelectorWrapper);t.preventDefault(),e.classList.contains(_.oDefaults.sClassSelectorClosed)?(e.classList.remove(_.oDefaults.sClassSelectorClosed),e.classList.add(_.oDefaults.sClassSelectorOpen),n.classList.add("active")):(e.classList.remove(_.oDefaults.sClassSelectorOpen),e.classList.add(_.oDefaults.sClassSelectorClosed),n.classList.remove("active"))},_.stopWheel=function(t){var e;(e=t||window.event)&&e.preventDefault&&e.preventDefault(),e&&(e.returnValue=!1)},_.catchScrollWheel=function(){document.addEventListener("mousewheel",_.stopWheel),document.addEventListener("DOMMouseScroll",_.stopWheel)},_.releaseScrollWheel=function(){document.removeEventListener("mousewheel",_.stopWheel),document.removeEventListener("DOMMouseScroll",_.stopWheel)},A.activateAveCanvas=function(t){console.log("ave-dom: activate ave canvas");var e=document.getElementById(t);if(a.dom.isElement(e)){var n=document.createElement("div");n.innerHTML=a.template.render('<div class="nm-ave-animation-selector-wrapper">\n\t<div class="nm-ave-animation-selector nm-el-btn nm-el-btn-01 nm-icon-settings nm-icon-expand-white nm-hidden">\n\t\t<div class="options-text">{{=window.i18n[\'rendering-layer.options\']}}</div>\n\t</div>\n\t<ul class="nm-ave-animation-selection">\n\t\t<li class="nm-button-close">\n\t\t\t<svg class="nm-icon-cancel">\n\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel.svg#nm-icon-cancel"}}></use>\n\t\t\t</svg>\n\t\t</li>\n\t</ul>\n</div>',{}),e.insertBefore(n.firstChild,e.firstChild),a.dom.getEventDelegate("body").on("mouseover","#"+t,_.catchScrollWheel),a.dom.getEventDelegate("body").on("mouseout","#"+t,_.releaseScrollWheel)}},A.resizeStreamWrapper=function(){console.log("resizeStream");var t=a.dom.getElement(_.oDefaults.sSelectorStreamWrapper);a.dom.isElement(t)&&(t.style.width="100%",t.style.height="100%",t.style.position="absolute")},A.moveAveCanvas=function(t,e){var n=document.getElementById(t),i=document.getElementById(e),r=a.dom.getElement(_.oDefaults.sSelectorOptionsSelectorWrapper,n);console.log("ave-dom: move ave canvas"),a.dom.isElement(n)&&a.dom.isElement(r)&&a.dom.isElement(i)&&(n.classList.remove(_.oDefaults.sClassActive),i.insertBefore(r,i.firstChild),a.dom.getEventDelegate("body").on("mouseover","#"+e,_.catchScrollWheel),a.dom.getEventDelegate("body").on("mouseout","#"+e,_.releaseScrollWheel))},A.deactivateAveCanvas=function(t){console.info("ave-dom: deactivate ave canvas");var e=document.getElementById(t);if(a.dom.isElement(e)){for(;e.hasChildNodes();)e.removeChild(e.firstChild);a.dom.getEventDelegate("body").off("mouseover","#"+t,_.catchScrollWheel),a.dom.getEventDelegate("body").off("mouseout","#"+t,_.releaseScrollWheel)}};const L={},k={__:L};function T(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}L.oDefaults={sSelectorAnimationListSelector:".nm-ave-animation-selection"},L.debugEnabled=!0,L.zlLoaded=!1,L.zlValidated=!1,L.zlboltURL="",L.cameraMappings={closeup_lights:"FrontRightShare",closeup_wheels:"Rims",dashboard:"Interior",exterior:"MRVSide",exterior_back:"MRV4",exterior_front:"MRV1",exterior_straight_back:"MRV5",exterior_straight_front:"MRV6",interior:"InteriorSide_L0L",rearseat:"Interior_Rear_View"},L.defaultCamera="MRV1",L.zlGetCustomer=function(){const t=SETUPS.get("ave3d.customer");return L.zlLoaded||L.debug("zlbolt not yet loaded"),L.debug("zlbolt customer = "+t),t},L.zlGetEnv=function(){const t=SETUPS.get("ave3d.env");return L.zlLoaded||L.debug("zlbolt not yet loaded"),L.debug("zlbolt env = "+t),t},L.zlValidate=function(){if("undefined"!=typeof zlbolt&&!1===L.zlValidated){const t=L.buildUpValidateObject();zlbolt.validate(t,(function(t,e){e&&"valid"===e.status?(L.zlValidated=!0,L.eventBus.emit(i.appEvents.AVE_AVAILABLE)):e&&e.reason?L.debug("zl validation failed: "+e.reason):L.debug("zl validation failed")}))}else L.debug("failed zlbolt.validate")},L.zlSetReady=function(){L.debug("zlbolt loaded"),L.zlLoaded=!0,L.zlValidate()},L.prepareZLboltURL=function(){const t=SETUPS.get("ave3d.url");L.debug("zlbolt url = "+t),L.zlboltURL=t},L.zlSetAveString=function(t){L.zlLoaded?zlbolt.setPrCodes(t,(function(t){L.debug("set prcodes with msg: ",t)})):L.debug("zlbolt not yet loaded")},L.zlDisconnect=function(t,e){if(L.zlLoaded&&"undefined"!=typeof zlbolt&&!0===L.isConnected){L.debug("disconnect from zlbolt");try{zlbolt.disconnect((function(){t(e)}))}catch(n){L.debug("zl exception on disconnect: "+n),t(e)}L.isConnected=!1}else t(e)},L.zlActivateCamera=function(t){const e=L.cameraMappings[t];zlbolt.switchCamera(e,(function(t){L.debug("switched camera to "+e+" with result",t)}))},L.zlSetConnectCallbacks=function(t,e){zlbolt.isSupported((function(n,i){if(n||!i)return L.debug("zl this browser is not supported"),!1;zlbolt.connect(L.buildUpConnectObject(t,e),(function(t){t?(L.debug("zlbolt connect exited in error state: ",t),L.isConnected=!1):(L.debug("zlbolt connected"),L.isConnected=!0)}))})),zlbolt.onStreamReady=function(){!0===L.streamActive&&L.debug("stream already active - possible side effect"),L.streamActive=!0,L.isConnected=!0,L.eventBus.on(i.appEvents.CONFIG_UPDATE,L.handlerConfigUpdated),L.zlBuildOptionsControl(),zlbolt.enableMouseTracking(),window.addEventListener("resize",A.resizeStreamWrapper),L.dispatchStreamReadyEvent(),A.resizeStreamWrapper()},zlbolt.onMouseUp=function(t){L.debug("mouse up with x:"+t.x+" and y:"+t.y)},zlbolt.onError=function(t){L.debug("zlbolt Error: ",t)},zlbolt.onStreamDisconnect=function(){L.debug("zlbolt StreamDisconnect"),L.eventBus.off(i.appEvents.CONFIG_UPDATE,L.handlerConfigUpdated),window.removeEventListener("resize",A.resizeStreamWrapper),L.streamActive=!1},zlbolt.onClose=function(){L.debug("zlbolt stream close"),L.streamActive=!1}},L.zlConnect=function(t,e){return L.zlLoaded?"undefined"==typeof zlbolt?(L.debug("failed zlConnect"),!1):(L.debug("zlbolt StreamReady"),void L.zlSetConnectCallbacks(t,e)):(L.debug("zlbolt not yet loaded"),!1)},L.zlBuildOptionsControl=function(){L.debug("build options control"),zlbolt.enumerateAnimations((function(t){const e=a.dom.getElement(L.oDefaults.sSelectorAnimationListSelector),n=document.createElement("div");if(a.dom.isElement(e))for(n.innerHTML=A.renderAnimationControls(t.animations);n.firstChild;)e.appendChild(n.firstChild);a.dom.getEventDelegate("body").on("click",".nm-avectrl-animation",L.zlTriggerAnimation)})),zlbolt.enumerateEnvironments((function(t){const e=a.dom.getElement(L.oDefaults.sSelectorAnimationListSelector),n=document.createElement("div");if(a.dom.isElement(e)&&t.environments.length>1){for(n.innerHTML=A.renderEnvironmentControls(t.environments);n.firstChild;)e.appendChild(n.firstChild);a.dom.getEventDelegate("body").on("click",".nm-avectrl-environment",L.zlTriggerEnvironmentChange)}})),A.enableOptions()},L.zlTriggerAnimation=function(t){const e=a.dom.closest(t.target,".nm-avectrl-animation").getAttribute("data-animation");L.debug("trigger animation "+e),zlbolt.triggerAnimation(e,(function(t){L.debug("triggered "+e+" with result",t)}))},L.zlTriggerEnvironmentChange=function(t){const e=a.dom.closest(t.target,".nm-avectrl-environment").getAttribute("data-environment");L.debug("trigger environment change "+e),zlbolt.switchEnvironment(e,(function(t){L.debug("triggered "+e+" with result",t)}))},L.handlerConfigUpdated=function(){L.zlSetAveString(s.a.getAveString().split(","))},L.mapViewPerspeciveToCamera=function(t){return t in L.cameraMappings?L.cameraMappings[t]:(L.debug("falling back to default camera from "+t),L.defaultCamera)},L.getActiveProtocol=function(){return document.location.protocol.indexOf("https")>-1?"https":"http"},L.buildUpValidateObject=function(){return{connectionParameters:{protocol:L.getActiveProtocol(),customer:L.zlGetCustomer(),environment:L.zlGetEnv()},car:{manufacturer:"audi",model:s.a.getCarline(),year:s.a.getModelYear()},consumeMouseScrollEvents:!0}},L.buildUpConnectObject=function(t,e){const n=s.a.getAveString();let i=L.buildUpValidateObject();return i.resolution={x:1112,y:668},i.parent=t,i.setupCamera=L.mapViewPerspeciveToCamera(e),n&&(i.setupPrCodes=n.split(",")),i},L.dispatchStreamReadyEvent=function(){L.eventBus.emit(i.appEvents.AVE_STREAM_READY);const t=new CustomEvent("ave-stream-ready-tracking",{});document.dispatchEvent(t)},L.debug=function(t){L.debugEnabled&&console.log("ave-api: "+t)},k.isActiveCarline=function(){return"1"===SETUPS.get("scope.ave3d")&&"true"===SETUPS.get("ave3d.aveEnabled")},k.showPerspective=function(t){L.zlActivateCamera(t)},k.isAveAvailable=function(){return L.zlValidated},k.deactivate=function(t){L.zlDisconnect(A.deactivateAveCanvas,t)},k.activateAVE=function(t,e){A.activateAveCanvas(t),L.zlConnect(t,e)},k.moveAVE=function(t,e,n){L.debug("moving from "+t+" to "+e),zlbolt.moveStream(e),A.moveAveCanvas(t,e),void 0!==n&&!1!==n&&L.zlActivateCamera(n)},k.initialize=function(t){L.eventBus=t,k.isActiveCarline()&&(L.prepareZLboltURL(),a.jsLoader.loadURL(L.zlboltURL).then(L.zlSetReady))},Object.setPrototypeOf(T.prototype,HTMLElement.prototype),Object.setPrototypeOf(T,HTMLElement);class I extends T{constructor(){super()}connectedCallback(){this.basketContainer=this.querySelector(".nm-basket-container"),this.footerCheck=this.parentNode.querySelector(".nm-basket-scroll-check-bottom"),this.topCheck=[...document.querySelectorAll(".nm-navigation-scroll-check")].pop(),this.contentContainer=this.parentNode.querySelector(".nm-content"),this.isStickyBottom=!1,this.addEvents(),this.setupPageForBasket(),this.observerTopScrollPosition=this.observeTopScrollPosition(),this.observerBottomScrollPosition=this.observeBottomScrollPosition(),this.observerMatchingWidget=this.observeMatchingWidget()}disconnectedCallback(){this.removeEvents(),this.observerTopScrollPosition.disconnect(),this.observerBottomScrollPosition.disconnect(),this.observerMatchingWidget.disconnect()}addEvents(){this.basketContainer.addEventListener("transitionend",a.dom.throttle(()=>this.setupPageForBasket(),500)),window.addEventListener("resize",()=>this.setupPageForBasket())}removeEvents(){this.basketContainer.removeEventListener("transitionend",a.dom.throttle(()=>this.setupPageForBasket(),500)),window.removeEventListener("resize",()=>this.setupPageForBasket())}setupPageForBasket(){const t=this.getBasketHeight();this.contentContainer.style.minHeight=t+"px",this.footerCheck.style.bottom=t+"px",this.isStickable=window.innerHeight>t,this.checkBottomPosition()}observeBottomScrollPosition(){const t=new IntersectionObserver(t=>t.forEach(t=>this.checkBottomPosition(t)),{threshold:[0,1]});return t.observe(this.footerCheck),t}observeTopScrollPosition(){const t=new IntersectionObserver(t=>t.forEach(t=>this.checkTopPosition(t)),{threshold:[0,1]});return t.observe(this.topCheck),t}observeMatchingWidget(){const t=new MutationObserver(()=>{this.setupPageForBasket()});return t.observe(this,{childList:!0,subtree:!0}),t}checkTopPosition(t){const e=t||{boundingClientRect:this.topCheck.getBoundingClientRect(),isIntersecting:!1};this.isStickyTop=(this.isStickable||!this.isFullBasketShown)&&!e.isIntersecting&&e.boundingClientRect.top.toFixed(0)<=0}checkBottomPosition(t){const e=t||{boundingClientRect:this.footerCheck.getBoundingClientRect(),isIntersecting:!1};this.isStickyBottom=this.isStickable&&this.isFullBasketShown&&!e.isIntersecting&&e.boundingClientRect.top.toFixed(0)<=0}getBasketHeight(){this.classList.add("nm-basket-superwrap-hidden-measure");const t=this.basketContainer.clientHeight;return this.classList.remove("nm-basket-superwrap-hidden-measure"),t+this.getBasketOffset()}getBasketOffset(){const t=this.isFullBasketShown?54:0,e=document.querySelector(".nm-nav-wrap"),n=e?e.clientHeight:0,i=document.querySelector(".nm-module-current-consumption");return t+n+(i?i.clientHeight:0)}set isStickyBottom(t){t?this.classList.add("nm-basket-sticky-bottom"):this.classList.remove("nm-basket-sticky-bottom")}set isStickyTop(t){t?this.classList.add("nm-basket-sticky-top"):this.classList.remove("nm-basket-sticky-top"),t&&!this.isFullBasketShown?this.style.top=this.getBasketOffset()+"px":this.style.top=""}get isStickyTop(){return this.classList.contains("nm-basket-sticky-top")}set isStickable(t){this.setAttribute("data-is-stickable",t)}get isStickable(){return"true"===this.getAttribute("data-is-stickable")}get isFullBasketShown(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)>=1100}}function x(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-basket")||window.customElements.define("audi-configurator-basket",I),Object.setPrototypeOf(x.prototype,HTMLElement.prototype),Object.setPrototypeOf(x,HTMLElement);class P extends x{constructor(){super()}connectedCallback(){this.isAudicodeParamInUrl()?this.injectCompareElement():f.loadAudiCode().then(t=>{this.updateURL(t)}).then(()=>{this.injectCompareElement()})}isAudicodeParamInUrl(){return new URL(window.location.href).searchParams.has("ac")}updateURL(t){const e=new URL(window.location.href);e.searchParams.set("ac",t),window.history.replaceState({path:e.href},"",e.href)}injectCompareElement(){const t=document.createElement("car-compare");this.appendChild(t)}}void 0===window.customElements.get("audi-configurator-car-compare")&&window.customElements.define("audi-configurator-car-compare",P);var O=n(19);const j={selectedItemID:null},R={__:j};j.oDefaults={selectorCarstoreDeleteSection:".nm-j-carstore-delete-section",selectorAbortButton:".nm-j-abort-button",selectorDeleteButton:".nm-j-delete-button",selectorCarDetails:".nm-j-carstore-item-details",selectorForm:".nm-j-carstore-modify",selectorCarstoreItem:".nm-module-carstore .nm-j-carstore-item",selectorCarstoreList:".nm-j-carstore-list"},j.loadAgents=function(t){t.forEach(t=>{(new Image).src=t})},j.addEvents=function(){j.legacyEventBus.on("submit",j.oDefaults.selectorForm,j.handleFormSubmit),j.eventBus.on(i.appEvents.FORM_FINISHED,j.handleFormFinished),j.eventBus.on(i.appEvents.FORM_ERROR,j.handlePossibleLoginStateChange),j.eventBus.on(i.appEvents.MYAUDI_LOGIN,j.list),j.eventBus.on(i.appEvents.LAYER_LOADED,j.list)},j.triggerLoginStateEvent=function(t){if(t){const t=s.a.getVisitorId();t?j.eventBus.emit(i.appEvents.MYAUDI_LOGIN,t):j.eventBus.emit(i.appEvents.MYAUDI_LOGIN)}else j.eventBus.emit(i.appEvents.MYAUDI_LOGOUT);j.updateLoginState()},j.handlePossibleLoginStateChange=function(t){t&&t.response&&t.response.header&&t.response.header["logged-in"]&&t.response.header.subsession&&s.a.setLogin(t.response.header["logged-in"],t.response.header.subsession).then(j.triggerLoginStateEvent).catch(t=>{j.triggerErrorLayer(t,"error.message.LOGIN_FAILED")})},j.updateLoginState=function(){const t=a.dom.getElement("body");s.a.isLoggedIn()?t.classList.add("nm-logged-in"):t.classList.remove("nm-logged-in")},j.handleFormSubmit=function(t){t.preventDefault();j.selectedItemID=this.getAttribute("data-form-id");const e=a.dom.getElement("#carstore-select-"+j.selectedItemID),n=e&&e.options?e.options[e.selectedIndex].value:"none";"configuration-delete"===n?j.deleteCarstoreItem():"configuration-load"===n&&j.loadCarstoreItem()},j.renderCarstoreList=function(t){const e=a.dom.getElement(j.oDefaults.selectorCarstoreList);e.innerHTML=j.renderListTemplate(t.carstore),e.classList.remove("nm-loader")},j.renderListTemplate=function(t){return t.list?(t.altImage=s.a.getAltImagePath("selection-compare","none"),a.template.render('\n<div class="nm-module nm-module-carstore nm-carstore" data-module="carstore">\n\t<div class="nm-3col">\n\t\t<h2 class="nm-headline-medium nm-carstore-headline">{{=window.i18n[\'carstore-layer.saved-slots\']}}</h2>\n\t\t<p class="nm-text-large">{{=window.i18n[\'carstore-layer.manage-slots\']}}</p>\n\t\t<ul class="nm-carstore-saved-items">\n\t\t\t{{~ it.list :value }}\n\t\t\t\t<li class="nm-carstore-item nm-j-carstore-item" data-item-position="{{=value.position}}">\n\t\t\t\t\t<span class="nm-carstore-item-position nm-headline-teaser">{{=value.position}}</span>\n\t\t\t\t\t<img class="nm-carstore-item-image" src="{{? !!value[\'exterior-image\']}}{{=value[\'exterior-image\']}}?alt={{?}}{{=it.altImage}}" alt="{{=value.name}}" />\n\t\t\t\t\t<div class="nm-carstore-item-content">\n\t\t\t\t\t\t<div class="nm-carstore-item-details nm-j-carstore-item-details">\n\t\t\t\t\t\t\t{{? !!value.name}}\n\t\t\t\t\t\t\t\t<strong class="nm-carstore-detail nm-headline-teaser">{{=value.name}}</strong>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.shoppingCartName}}\n\t\t\t\t\t\t\t\t<p class="nm-carstore-detail nm-text-block">{{=value.shoppingCartName}}<br />\n\t\t\t\t\t\t\t\t\t{{? !!value.powersAndUnits}}\n\t\t\t\t\t\t\t\t\t\t{{=value.powersAndUnits}}\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.price && value.valid !== false}}\n\t\t\t\t\t\t\t\t<strong class="nm-carstore-detail nm-price nm-headline-teaser">{{=value.price}}</strong>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.audicode}}\n\t\t\t\t\t\t\t\t<p class="nm-carstore-detail nm-audicode nm-text-block">{{=window.i18n[\'audicode-label\']}}: {{=value.audicode}}</p>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<form class="nm-carstore-modify-section nm-j-carstore-modify" data-form-id="{{=value.position}}" action="#">\n\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t<select id="carstore-select-{{=value.position}}" class="nm-carstore-modify-select nm-j-carstore-modify-select">\n\t\t\t\t\t\t\t\t\t{{? value.valid !== false}}\n\t\t\t\t\t\t\t\t\t\t<option value="configuration-load">{{=window.i18n[\'carstore-layer.load-slot\']}}</option>\n\t\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t\t<option>{{=window.i18n[\'carstore-layer.invalid-slot\']}}</option>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t<option value="configuration-delete">{{=window.i18n[\'delete-configuration-label\']}}</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t<input type="hidden" name="carstore-position" value="{{=value.position}}">\n\t\t\t\t\t\t\t\t<button class="nm-el-btn nm-el-btn-04 nm-el-btn-ast nm-j-carstore-submit" type="submit">submit</button>\n\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t<div class="nm-carstore-delete-section nm-j-carstore-delete-section nm-hidden">\n\t\t\t\t\t\t\t<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'carstore-layer.delete-slot\']}}</strong>\n\t\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-03">{{=window.i18n[\'carstore-layer.delete-dialog\']}}</p>\n\t\t\t\t\t\t\t<div class="nm-modify-buttons">\n\t\t\t\t\t\t\t\t<a class="nm-carstore-button nm-el-btn nm-el-btn-01 nm-j-abort-button" href="#">{{=window.i18n[\'abort-label\']}}</a> \n\t\t\t\t\t\t\t\t<a class="nm-carstore-button nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-j-delete-button" href="#">{{=window.i18n[\'delete-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t</ul>\n\t</div>\n</div>',t)):t.statuscode&&800===t.statuscode?a.template.render("\n\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.error-loading-slots']}}</p>\n",{}):a.template.render("\n\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.no-slots-available']}}</p>\n",{})},j.handleFormFinished=function(t){"login"===t.id?j.handleLoginFormFinished(t):"carstore"===t.id&&j.handleSaveFormFinished()},j.handleLoginFormFinished=function(t){j.loadAgents(t.response.login.agents.standard),j.loadAgents(t.response.login.agents.secure),j.handlePossibleLoginStateChange(t)},j.handleSaveFormFinished=function(){const t=a.dom.getElement(".nm-carstore-save .nm-j-carstore-save");t.classList.remove("nm-j-carstore-save"),t.classList.add("nm-j-carstore-list"),t.innerHTML="",j.list("carstore")},j.list=function(t){j.updateLoginState(),s.a.isLoggedIn()&&j.isCarstoreListOpen()&&(j.showLoader(),p.a.listCarstoreItems().then((function(e){if(j.renderCarstoreList(e),t&&"carstore"===t){const t=a.dom.getElement(".nm-j-audicode").innerText;j.eventBus.emit(i.appEvents.CONFIG_SAVED,t)}})).catch((function(t){j.triggerErrorLayer(t,"carstore-layer.error-loading-slots")})).then((function(){j.hideLoader()})))},j.isCarstoreListOpen=function(){return a.dom.getElementsArray(j.oDefaults.selectorCarstoreList).length>0},j.showLoader=function(){a.dom.getElementsArray(j.oDefaults.selectorCarstoreList).forEach(t=>{t.innerHTML="",t.classList.add("nm-loader")})},j.hideLoader=function(){a.dom.getElementsArray(j.oDefaults.selectorCarstoreList).forEach(t=>{t.classList.remove("nm-loader")})},j.deleteCarstoreItem=function(){j.toggleDeleteSectionVisibiblity(!0),j.addDeleteButtonEvents()},j.handleDeleteAbort=function(t){return t.preventDefault(),j.toggleDeleteSectionVisibiblity(!1),j.removeDeleteButtonEvents(),j.selectedItemID=null,!1},j.handleDeleteSubmit=function(t){return t.preventDefault(),j.selectedItemID&&p.a.deleteCarstoreItem(j.selectedItemID).then((function(t){j.list(t)})).catch((function(t){j.triggerErrorLayer(t,"carstore-layer.error-deleting-slot")})),j.removeDeleteButtonEvents(),j.selectedItemID=null,!1},j.toggleDeleteSectionVisibiblity=function(t=!0){const e=j.oDefaults.selectorCarstoreItem+"[data-item-position='"+j.selectedItemID+"'] ";a.dom.getElement(e+j.oDefaults.selectorCarstoreDeleteSection).classList.toggle("nm-hidden",!t),a.dom.getElement(e+j.oDefaults.selectorForm).classList.toggle("nm-hidden",t),a.dom.getElement(e+j.oDefaults.selectorCarDetails).classList.toggle("nm-hidden",t)},j.addDeleteButtonEvents=function(){const t=j.oDefaults.selectorCarstoreItem+"[data-item-position='"+j.selectedItemID+"'] ";j.legacyEventBus.on("click",t+j.oDefaults.selectorAbortButton,j.handleDeleteAbort),j.legacyEventBus.on("click",t+j.oDefaults.selectorDeleteButton,j.handleDeleteSubmit)},j.removeDeleteButtonEvents=function(){const t=j.oDefaults.selectorCarstoreItem+"[data-item-position='"+j.selectedItemID+"'] ";j.legacyEventBus.off("click",t+j.oDefaults.selectorAbortButton,j.handleDeleteAbort),j.legacyEventBus.off("click",t+j.oDefaults.selectorDeleteButton,j.handleDeleteSubmit)},j.loadCarstoreItem=function(){return p.a.loadCarstoreItem(j.selectedItemID).catch((function(t){j.triggerErrorLayer(t,"carstore-layer.error-loading-car")})).then((function(){i.router.open("page",s.a.getCurrentCarlineUrl()),setTimeout((function(){const t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!1);a.dom.getElement(".nm-j-layer-close-button").dispatchEvent(t)}),100)})),!1},j.triggerErrorLayer=function(t,e){console.error(e,t);const n=s.a.getErrorMessage(t);j.eventBus.emit(i.appEvents.ERROR,[window.i18n[e],n])},R.initialize=function(t){j.eventBus=t,j.legacyEventBus=a.dom.getEventDelegate("body"),j.addEvents()};class B{constructor(){return B.instance||(this._init(),B.instance=this),B.instance}_init(){this.csrfToken=null,this._getCsrfToken=this._getCsrfToken.bind(this),this._requestAudicodeOperation=this._requestAudicodeOperation.bind(this),l.stateRegistry.subscribeToStore(u,this._getCsrfToken)}_getCsrfToken(t){t&&t.csrfToken&&(this.csrfToken=t.csrfToken)}async _requestAudicodeOperation(t,e){const n=SETUPS.get("myaudi.uds.url")+"carstore/"+e,i={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken},method:t};return fetch(n,i).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(t=>{l.stateRegistry.triggerAction(u,"update",{audicodes:t})}).catch(t=>console.log("CarstoreApi ERROR - audicode - ",t))}async deleteAudicode(t){return this._requestAudicodeOperation("DELETE",t)}async saveAudicode(t){return this._requestAudicodeOperation("PATCH",t)}async getAudicodeList(){const t=SETUPS.get("myaudi.uds.url")+"carstore/listAudicodes",e={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken}};return fetch(t,e).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(t=>{l.stateRegistry.triggerAction(u,"update",{audicodes:t})}).catch(t=>console.log("CarstoreApi ERROR - listAudicodes - ",t))}}var M=new B;function F(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(F.prototype,HTMLElement.prototype),Object.setPrototypeOf(F,HTMLElement);class U extends F{constructor(){super(),this.audicode=null,this.handleDeleteClick=this.handleDeleteClick.bind(this)}connectedCallback(){this.audicode=this.getAttribute("data-audicode"),this.deleteButton=this.querySelector(".j-carstore-delete"),this.deleteButton.addEventListener("click",this.handleDeleteClick)}disconnectedCallback(){this.deleteButton&&this.deleteButton.removeEventListener("click",this.handleSaveClick)}handleDeleteClick(t){t.preventDefault(),M.deleteAudicode(this.audicode)}}void 0===window.customElements.get("audi-carstore-delete-audicode")&&window.customElements.define("audi-carstore-delete-audicode",U);n(20);var z=n(31);function N(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(N.prototype,HTMLElement.prototype),Object.setPrototypeOf(N,HTMLElement);class Q extends N{constructor(){super(),this.currentConfigurations={},this.audicodeList=null,this.stateController=this.stateController.bind(this),this.renderList=this.renderList.bind(this),this.hasAudicodeListChanged=this.hasAudicodeListChanged.bind(this),this.handleListAudicodesResponse=this.handleListAudicodesResponse.bind(this)}connectedCallback(){l.stateRegistry.subscribeToStore(u,this.stateController),this.isToBeInitialized=!0}async renderList(t){if(this.currentConfigurations=t.configurations,this.wrapper=this.querySelector(".carstore-list__wrapper"),!this.wrapper)return;const e=Object.keys(this.currentConfigurations);let n="";if(0===e.length)n+=a.template.render("\n\t<p class=\"audi-copy-m carstore-list__error-message\">{{=window.i18n['carstore-layer.no-slots-available']}}</p>\n");else for(const t of e)n+=await this.renderListItem(t);this.wrapper.innerHTML=n}async renderListItem(t){let e=this.currentConfigurations[t];const n=await Object(z.a)(e.configuration).then(t=>{if(!t)throw new Error;return t}),i=await n,r=Object.assign(e,{images:i},{mediaservice:SETUPS.get("nemo.url.mediaservice")}),o=e.error?'\n\t<div class="carstore-list-item carstore-list-item--fail">\n\t\t<div class="carstore-list-item__image-container">\n\t\t\t<img class="carstore-list-item__image carstore-list-item__image--fail" src={{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-carstore.png"}} alt="" />\n\t\t</div>\n\t\t<p class="audi-copy-m carstore-list__error-message">\n\t\t\t<span class="carstore-list__error-message-text">{{=it.error.message}}</span>\n\t\t\t<span class="carstore-list__error-message-text">{{=window.i18n[\'audicode-label\']}}: {{=it.audicode}}</span>\n\t\t</p>\n\t\t<form class="carstore-list-item__form">\n\t\t\t<legend class="carstore-list-item__legend">{{=window.i18n[\'delete-configuration-label\']}}</legend>\n\t\t\t<fieldset>\n\t\t\t\t<audi-carstore-delete-audicode data-audicode="{{=it.audicode}}">\n\t\t\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--delete j-carstore-delete" type="submit">\n\t\t\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'delete-label\']}}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</audi-carstore-delete-audicode>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n':'\n<audi-configurator-carstore-list-item class="carstore-list-item" data-module="carstore-list-item" data-audicode="{{=it.audicode.id}}">\n\t<div class="carstore-list-item__image-container">\n\t\t{{? !!it.images && !!it.images.exterior_front && !!it.images.exterior_front[\'flyout\']}}\n\t\t\t<img class="carstore-list-item__image" src="{{=it.mediaservice}}{{=it.images[\'exterior_front\'][\'flyout\']}}" alt="{{=it.configuration.carlineName}}" />\n\t\t{{??}}\n\t\t\t<img class="carstore-list-item__image carstore-list-item__image--fail" src={{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-carstore.png"}} alt="" />\n\t\t{{?}}\n\t</div>\n\t<div class="carstore-list-item__description">\n\t\t{{? !!it.configuration.carlineName}}\n\t\t\t<div class="audi-headline-order-3 carstore-list-item__carline">{{=it.configuration.carlineName}}</div>\n\t\t{{?}}\n\t\t{{? !!it.configuration.description}}\n\t\t\t<div class="audi-copy-s carstore-list-item__engine">{{=it.configuration.description}}</div>\n\t\t{{?}}\n\t\t{{? !!it.configuration.prices.total}}\n\t\t\t<div class="audi-copy-m carstore-list-item__price">{{=it.configuration.prices.total}}</div>\n\t\t{{?}}\n\t</div>\n\t<form action="#" class="carstore-list-item__form">\n\t\t<legend class="carstore-list-item__legend">{{=window.i18n[\'carstore-layer.manage-slots\']}}</legend>\n\t\t<fieldset class="carstore-list-item__form-administration">\n\t\t\t<div class="audi-dropdown carstore-list-item__form-select-wrapper">\n\t\t\t\t<select name="carstore-list-item__form-select" class="audi-dropdown-select carstore-list-item__form-select">\n\t\t\t\t\t<option value="configuration-load">{{=window.i18n[\'carstore-layer.load-slot\']}}</option>\n\t\t\t\t\t<option value="configuration-delete">{{=window.i18n[\'delete-configuration-label\']}}</option>\n\t\t\t\t</select>\n\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t{{? !!it.audicode.id}}\n\t\t\t\t<div class="audi-copy-s carstore-list-item__audicode">{{=window.i18n[\'audicode-label\']}}: {{=it.audicode.id}}</div>\n\t\t\t{{?}}\n\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--submit j-carstore-submit">\n\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'carstore-layer.continue-label\']}}</span>\n\t\t\t</button>\n\t\t</fieldset>\n\t\t<fieldset class="carstore-list-item__form-dialogue">\n\t\t\t<audi-carstore-delete-audicode data-audicode="{{=it.audicode.id}}">\n\t\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--delete j-carstore-delete" type="submit">\n\t\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'delete-label\']}}</span>\n\t\t\t\t</button>\n\t\t\t\t<button class="audi-button audi-button--ghost carstore-list-item__button carstore-list-item__button--cancel j-carstore-cancel" type="reset">\n\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'abort-label\']}}</span>\n\t\t\t</audi-carstore-delete-audicode>\n\t\t\t</button>\n\t\t</fieldset>\n\t</form>\n</audi-configurator-carstore-list-item>\n';return a.template.render(o,r)}disconnectedCallback(){l.stateRegistry.unsubscribeFromStore(u,this.stateController)}createHeadlines(){this.innerHTML=a.template.render('\n\t<h2 class="audi-headline-order-2 carstore-list__headline">{{=window.i18n[\'carstore-layer.saved-slots\']}}</h2>\n\t<p class="audi-copy-m carstore-list__intro-text">{{=window.i18n[\'carstore-layer.manage-slots\']}}</p>\n\t<div class="carstore-list__wrapper"></div>\n')}stateController(t){if(!t.loggedIn)return this.innerHTML="",this.audicodeList=null,void(this.currentConfigurations={});t.loggedIn&&(this.isToBeInitialized||null===t.audicodes&&null===this.audicodeList)&&(this.createHeadlines(),M.getAudicodeList(),this.isToBeInitialized=!1),t.audicodes!==this.audicodeList&&this.handleListAudicodesResponse(t.audicodes),t.configurations&&t.configurations!==this.currentConfigurations&&this.renderList(t)}async handleListAudicodesResponse(t){const e=this.filterAudicodesToLoad(t);let n={};if(e){const t=e.map(t=>ct.a.loadConfigurationByAudiCodeStateless(t).catch(e=>({audicode:t,error:e}))),i=await Promise.all(t);for(const t of i)t.error?n[t.audicode]={audicode:t.audicode,error:t.error}:n[t.audicode.id]={audicode:t.audicode,configuration:t.configuration}}this.audicodeList=t;const i=this.mergeConfigurations(t,n,this.currentConfigurations);l.stateRegistry.triggerAction(u,"update",{configurations:i})}mergeConfigurations(t,e,n){let i={};return t.forEach(t=>{i[t]=e[t]||n[t]}),i}filterAudicodesToLoad(t){return t?t.filter(t=>!this.currentConfigurations[t]):null}hasAudicodeListChanged(t,e){return!e||t.length!==e.length||!t.every(t=>e.includes(t))}}function H(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-carstore-list")&&window.customElements.define("audi-carstore-list",Q),Object.setPrototypeOf(H.prototype,HTMLElement.prototype),Object.setPrototypeOf(H,HTMLElement);class V extends H{constructor(){super(),this.handleSubmitClick=this.handleSubmitClick.bind(this),this.handleCancelClick=this.handleCancelClick.bind(this)}connectedCallback(){this.audicode=this.getAttribute("data-audicode"),this.form=this.querySelector("form"),this.formSelect=this.querySelector(".carstore-list-item__form-select"),this.submitButton=this.querySelector(".j-carstore-submit"),this.cancelButton=this.querySelector(".j-carstore-cancel"),this.addEvents()}addEvents(){this.submitButton&&this.submitButton.addEventListener("click",this.handleSubmitClick),this.cancelButton&&this.cancelButton.addEventListener("click",this.handleCancelClick)}handleSubmitClick(t){t.preventDefault(),"configuration-delete"===this.formSelect.value?this.classList.toggle("carstore-list-item--show-dialogue"):"configuration-load"===this.formSelect.value&&(window.location.href=window.i18n["audicode.direct-url"]+this.audicode)}handleCancelClick(){this.classList.remove("carstore-list-item--show-dialogue")}}function q(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-configurator-carstore-list-item")&&window.customElements.define("audi-configurator-carstore-list-item",V),Object.setPrototypeOf(q.prototype,HTMLElement.prototype),Object.setPrototypeOf(q,HTMLElement);class W extends q{constructor(){super(),this.updateVisibility=this.updateVisibility.bind(this),this.handleSaveClick=this.handleSaveClick.bind(this)}connectedCallback(){l.stateRegistry.subscribeToStore(u,this.updateVisibility),this.button=this.querySelector("button"),this.button.addEventListener("click",this.handleSaveClick)}disconnectedCallback(){l.stateRegistry.unsubscribeFromStore(u,this.updateVisibility)}updateVisibility(t){const e=t.currentAudicode;this.setAttribute("data-audicode",e),e&&null!==t.audicodes&&!t.audicodes.includes(e)?this.classList.remove("nm-hidden"):this.classList.add("nm-hidden")}handleSaveClick(){const t=this.getAttribute("data-audicode");t&&M.saveAudicode(t)}}void 0===window.customElements.get("audi-carstore-save-audicode")&&window.customElements.define("audi-carstore-save-audicode",W);const G={},Y={__:G};let K=!1;G.oDefaults={sSelectorCart:".nm-basket",sSelectorSnippetText:".nm-j-configurator-text-"},G.updateAndAnimatePrice=function(t,e){t.stop(!0,!0).animate({opacity:"0.01"},250,"easeInSine",(function(){jQuery(this).text(e)})).delay(400).animate({opacity:"1"},300,"easeOutSine")},G.hidePriceAndRate=function(t){var e,n,i={price:{},rate:{}};for(e in i)i.hasOwnProperty(e)&&""===(n=t.find([G.oDefaults.sSelectorSnippetText,e].join(""))).text()&&n.closest("div").addClass("nm-hidden")},G.hideRateIfUnavailable=function(t){var e;t.prices&&(void 0===(e=t.prices.totalRateRaw)||0===parseFloat(e)?jQuery("body").addClass("nm-no-rate"):jQuery("body").removeClass("nm-no-rate"))},G.updatePrice=function(t,e,n){var i,r,o=e.price;for(i in e)if(e.hasOwnProperty(i)){if(r=t.find([G.oDefaults.sSelectorSnippetText,i].join("")),"price"===i&&o&&n&&n.data&&n.data.animate){G.updateAndAnimatePrice(r,o);continue}r.text(e[i])}},G.updateCartText=function(t){var e,n=jQuery(G.oDefaults.sSelectorCart);if(s.a.isConfigurable()){if(!(e=s.a.getConfiguration()))return;G.updatePrice(n,e,t),G.hideRateIfUnavailable(e)}else G.hidePriceAndRate(n)},G.updateEngineLinks=function(){var t,e;s.a.isConfigurable()&&(t=jQuery("[data-link-pattern]"),e=s.a.getMotorcode(),t.each((function(){var t=jQuery(this),n=t.attr("data-link-pattern");n&&n.match(/{{=it.model}}/g)&&(n=n.replace(/{{=it.model}}/,e),t.attr("href",n))})))},G.updateSummaryStatus=function(t){"summary"===t||"onepage_configurator"===t?jQuery("body").addClass("nm-is-summary"):jQuery("body").removeClass("nm-is-summary")},G.updateBasketBodyClass=function(t,e){var n=jQuery(".nm-basket").length>0,i="nemo"===t.attr("data-type");n&&i&&!("home"===e)?jQuery("body").addClass("nm-has-basket"):jQuery("body").removeClass("nm-has-basket")},G.updateClasses=function(t){var e,n;n=(e=void 0!==t&&void 0!==t.domElement?jQuery(t.domElement).find(".nm-content"):jQuery(".nm-content")).attr("data-template"),G.updateSummaryStatus(n),G.updateBasketBodyClass(e,n)},G.handlerAnimated=function(){G.updateCartText({data:{animate:!0}}),G.updateEngineLinks()},G.handlerNotAnimated=function(){G.updateCartText({data:{animate:!1}}),G.updateEngineLinks()},G.addEvents=function(){G.eventBus.on(i.appEvents.CONFIG_UPDATE,G.handlerAnimated),G.eventBus.on(i.appEvents.LAYER_LOADED,G.handlerNotAnimated),G.eventBus.on(i.appEvents.CONFIG_START,G.handlerNotAnimated),G.eventBus.on(i.appEvents.PAGE_LOADED,G.handlerNotAnimated),G.eventBus.on(i.appEvents.PAGE_LOADED,G.updateEngineLinks),G.eventBus.on(i.appEvents.PAGE_LOADED,G.updateClasses)},Y.dispose=function(){G.eventBus.off(i.appEvents.CONFIG_UPDATE,G.handlerAnimated),G.eventBus.off(i.appEvents.LAYER_LOADED,G.handlerNotAnimated),G.eventBus.off(i.appEvents.CONFIG_START,G.handlerNotAnimated),G.eventBus.off(i.appEvents.PAGE_LOADED,G.updateEngineLinks),G.eventBus.off(i.appEvents.PAGE_LOADED,G.updateClasses)},G.initialize=function(){K||(G.addEvents(),K=!0,G.updateClasses())},Y.initialize=function(t){G.eventBus=t,G.initialize()};n(68);var X=n(14);function J(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(J.prototype,HTMLElement.prototype),Object.setPrototypeOf(J,HTMLElement);class Z extends J{constructor(){super()}connectedCallback(){this.changeEngineButton=this.querySelector(".nm-engine-compare__button-change"),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.changeEngineButton.addEventListener("click",t=>this.showSearchWidget(t))}removeEvents(){this.changeEngineButton.removeEventListener("click",t=>this.showSearchWidget(t))}showSearchWidget(t){t.preventDefault();[...document.querySelectorAll(".nm-engine-compare__widget")].forEach(t=>{t.contains(this)&&t.classList.add("nm-engine-compare__widget--show-search")})}}function tt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-enginecompare-controls")||window.customElements.define("audi-configurator-enginecompare-controls",Z),Object.setPrototypeOf(tt.prototype,HTMLElement.prototype),Object.setPrototypeOf(tt,HTMLElement);class et extends tt{constructor(){super()}connectedCallback(){this.fuelDropdown=this.querySelector('.nm-engine-compare__dropdown[data-compare-type="fuel"]'),this.engineDropdown=this.querySelector('.nm-engine-compare__dropdown[data-compare-type="engine"]'),this.trimlineSelect=this.querySelector('.nm-engine-compare__select[data-compare-type="trimline"]'),this.fuelSelect=this.querySelector('.nm-engine-compare__select[data-compare-type="fuel"]'),this.engineSelect=this.querySelector(".nm-engine-compare__select[data-compare-type=engine]"),this.fuelOptions=this.querySelectorAll('.nm-engine-compare__select[data-compare-type="fuel"] option'),this.engineOptions=this.querySelectorAll('.nm-engine-compare__select[data-compare-type="engine"] option'),this.hasTrimline=null!==this.trimlineSelect,this.selectedFuel=this.fuelSelect.value,this.selectedEngine=this.engineSelect.value,this.updateFuelAndEngineOptions(),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.hasTrimline&&this.trimlineSelect.addEventListener("change",()=>{this.updateFuelAndEngineOptions()}),this.fuelSelect.addEventListener("change",()=>{this.updateEngineOptions()})}removeEvents(){this.hasTrimline&&this.trimlineSelect.removeEventListener("change",()=>{this.updateFuelAndEngineOptions()}),this.fuelSelect.removeEventListener("change",()=>{this.updateEngineOptions()})}updateFuelAndEngineOptions(){this.updateFuelOptions(),this.updateEngineOptions()}updateFuelOptions(){this.hasTrimline&&(this.selectedTrimline=this.trimlineSelect.value,this.fuelSelect.innerHTML="",[...this.fuelOptions].forEach(t=>{this.isValidOptionForSelectedTrimline(t)&&(t.selected=t.value===this.selectedFuel,this.fuelSelect.add(t))}),this.setDropdownReadonly(this.fuelDropdown,1===this.fuelSelect.length))}updateEngineOptions(){this.hasTrimline&&(this.selectedTrimline=this.trimlineSelect.value),this.selectedFuel=this.fuelSelect.value,this.engineSelect.innerHTML="",[...this.engineOptions].forEach(t=>{this.isValidOptionForSelectedTrimlineAndFuel(t)&&(t.selected=t.value===this.selectedEngine,this.engineSelect.add(t))}),this.setDropdownReadonly(this.engineDropdown,1===this.engineSelect.length)}isValidOptionForSelectedTrimlineAndFuel(t){return this.isValidOptionForSelectedTrimline(t)&&this.isValidOptionForSelectedFuel(t)}isValidOptionForSelectedTrimline(t){return!this.hasTrimline||t.getAttribute("data-trimline")===this.selectedTrimline}isValidOptionForSelectedFuel(t){return t.getAttribute("data-fuel")===this.selectedFuel}setDropdownReadonly(t,e){e?t.classList.add("nm-form-readonly"):t.classList.remove("nm-form-readonly")}}window.customElements.get("audi-configurator-enginecompare-filter")||window.customElements.define("audi-configurator-enginecompare-filter",et);var nt=n(8);function it(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(it.prototype,HTMLElement.prototype),Object.setPrototypeOf(it,HTMLElement);class rt extends it{constructor(){super()}connectedCallback(){this.form=this.querySelector(".nm-engine-compare__form"),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.form.addEventListener("submit",t=>{this.submitForm(t)})}removeEvents(){this.form.removeEventListener("submit",t=>{this.submitForm(t)})}submitForm(t){t.preventDefault();const e=this.form.getAttribute("data-link-pattern");if(e){const t=nt.doT.template(e)({motorcodes:this.getSelectedEngines()});i.router.open("layer",t)}}getSelectedEngines(){return[...this.querySelectorAll('.nm-engine-compare__select[data-compare-type="engine"]')].map(t=>t.value)}}window.customElements.get("audi-configurator-enginecompare-form")||window.customElements.define("audi-configurator-enginecompare-form",rt);var ot=n(69);const at={},st={__:at};at.$stage=null,at.oDefaults={sStageID:"#nm-id-stage",sSelectorCarPriceRate:".nm-car-price-rate",sSelectorRenderImage:".nm-j-configurator-renderimage",sSelectorConfigurationSummary:".nm-j-configuration-summary",sSelectorQuantityPicker:".nm-quantity",sSelectorSnippetText:".nm-j-configurator-text-",sSelectorSnippetTextContainer:".nm-j-configurator-container-text-",sSelectorSnippetTextEec:".nm-j-configurator-text-eec-",selectorModelText:".js-configurator-model-text-",selectorModelImage:".js-configurator-model-image",selectorEecImage:".nm-j-configurator-image-eec",selectorTechdata:".nm-j-configurator-techdata-"},at.textReplaceKeys=["bpm","carlineName","count","description","eec-co2emission","eec-consumption","eec-consumptioninner","eec-efficiency","eec-electricitycost","eec-energycost","eec-yearlytaxcost","financeGlobalDisclaimer","financeParameters","financeProductDisclaimer","financeProductName","modelPrice","nettoBase","nettoOptions","optionsPrice","pa","packageDescription","price","pricenm-price","rate","rotrprice","rotrRate","servicePackage","subname","taxableBenefit1","taxableBenefit2","taxTotal","totalRate","totalWithCharges","vat"],at.addEvents=function(){at.eventBus.on(i.appEvents.UPDATE_VIEW_STATE,at.handleViewStateUpdates),at.eventBus.on(i.appEvents.CONFIG_UPDATE,at.updateAllDomItems),at.eventBus.on(i.appEvents.PAGE_LOADED,at.handlePageLoaded),at.eventBus.on(i.appEvents.LAYER_LOADED,at.updateAllDomItems),at.eventBus.on(i.appEvents.TRIGGER_DOM_UPDATE,at.handleConflictAndTransferResolves),at.eventBus.on(i.appEvents.CONFIG_SEND,at.hideRenderImages),document.addEventListener("FOOTNOTES_RENDERED",at.handleFootnotesRendered)},at.handleFootnotesRendered=()=>{at.updateEffiencyClass(),at.updateTechdata(),at.updateFinancialFootnote()},at.updateFinancialFootnote=()=>{const t=s.a.getConfiguration();t&&t.financeParameters&&at.setDOMText(jQuery(".audi-footnotes"),t)},at.removeEvents=function(){at.eventBus.off(i.appEvents.UPDATE_VIEW_STATE,at.handleViewStateUpdates),at.eventBus.off(i.appEvents.CONFIG_UPDATE,at.updateAllDomItems),at.eventBus.off(i.appEvents.PAGE_LOADED,at.handlePageLoaded),at.eventBus.off(i.appEvents.LAYER_LOADED,at.updateAllDomItems),at.eventBus.off(i.appEvents.TRIGGER_DOM_UPDATE,at.handleConflictAndTransferResolves),at.eventBus.off(i.appEvents.CONFIG_SEND,at.hideRenderImages)},at.updateDomStatusItems=function(t){(t||jQuery("body")).find(".nm-j-configurator-item").each((function(){var t=jQuery(this),e=t.attr("data-configurator-id"),n=s.a.getItem(e);if(t.hasClass("nm-j-configurator-no-update"))return!0;e&&n&&n.status&&(at.setDOMStatusCode(t,n.status),n.message&&n.message[0].text&&""!==n.message[0].text&&at.setDebugOutput(t,n.message[0].text))}))},at.handlePageLoaded=function(t){let e=jQuery("body");t&&"domElement"in t&&(e=jQuery(t.domElement)),at.updateDomStatusItems(e),at.updateDomTextItems(e),at.updateDomTextPrices(),at.updateDomTextSummary(),at.updateDomRenderImages(),at.updateModeChangeItems(),at.updateEffiencyClass(),at.updateTechdata(),at.updateFinancialFootnote(),at.updateEnergyEfficiencyImage(),at.eventBus.emit(i.appEvents.DOM_UPDATED)},at.setDOMStatusCode=function(t,e){var n,i;e&&(i=(n=t.get(0)).className)!==(i=i.replace(/nm-j-configurator-status_[01]{5}/,["nm-j-configurator-status_",e].join("")))&&(n.className=i)},at.setDebugOutput=function(t,e){var n=e;n&&(n=" ("+n+")",(1===t.find(".nm-debug-item").length?jQuery(t.find(".nm-debug-item")[0]):t).attr("data-message",n))},at.handleConflictAndTransferResolves=function(){at.updateAllDomItems()},at.handleViewStateUpdates=function(t){var e;t&&t.domElement&&t.domElement.length&&(e=t.domElement),at.updateDomRenderImages(e)},at.updateAllDomItems=function(){at.updateDomStatusItems(),at.updateDomTextItems(),at.updateDomTextPrices(),at.updateDomTextSummary(),at.updateDomRenderImages(),at.updateModeChangeItems(),at.updateEffiencyClass(),at.updateTechdata(),at.updateFinancialFootnote(),at.updateEnergyEfficiencyImage(),at.eventBus.emit(i.appEvents.DOM_UPDATED)},at.updateDomTextPrices=function(){const t=s.a.getConfiguration();if(t&&t.prices){const e=jQuery("body");at.setDOMText(e,t.prices),at.setConfigDataContainersVisibility(e,t.prices)}},at.updateModeChangeItems=function(){var t,e,n,i,r,o;e="nm-mode-"+(t=s.a.getPriceRateMode()),jQuery("body").removeClass("nm-mode-rate nm-mode-price"),jQuery("body").addClass(e),(o=jQuery(".nm-engine-list a[data-module-maw-criteria=price]")).length>0&&(n="rate"===t?"Preis":"Rate",i="rate"===t?"Rate":"Preis",r=o.html(),o.html(r.replace(n,i))),jQuery(".nm-price-rate-switch, .j-rate-switch").each((function(){this.checked="rate"===t}))},at.updateDomTextItems=function(t){(t||jQuery("body")).find(".nm-j-configurator-item").each((function(){var t=jQuery(this),e=t.attr("data-configurator-id"),n=s.a.getItem(e);n&&at.setDOMText(t,n)}))},at.setDOMText=function(t,e){at.textReplaceKeys.filter(t=>e.hasOwnProperty(t)).forEach(n=>{t.find(at.oDefaults.sSelectorSnippetText+n).html(e[n])})},at.setConfigDataContainersVisibility=function(t,e){at.textReplaceKeys.forEach(n=>{const i=t.find(at.oDefaults.sSelectorSnippetTextContainer+n);i&&(e.hasOwnProperty(n)&&""!==e[n]&&null!==e[n]?i.removeClass("nm-hidden"):i.addClass("nm-hidden"))})},at.hideRenderImages=function(){jQuery(at.oDefaults.sSelectorRenderImage).each((function(){jQuery(this).addClass("nm-fade-out")}))},at.updateDomRenderImages=function(t){var e,n,i,r=s.a.getConfigurationAssets();r&&(e=t||jQuery("body"),jQuery(at.oDefaults.sSelectorRenderImage,e).each((function(){var t,e,o,a,l=jQuery(this);n=l.attr("data-renderimage-type"),i=l.attr("data-renderimage-view"),a=l.attr("data-resize-param"),n&&i&&(t=r[i])&&t[n]?(e=s.a.getRenderUrl()+t[n],0!==t[n].indexOf("/preview/")&&(o=s.a.getAltImagePath(i,n))&&(e+="?alt="+o),a&&(e+=-1!==e.indexOf("?")?"&":"?",e+=a),l.is("img")?e!==l.attr("src")?l.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-out").delay(300).on("load",(function(t){jQuery(t.target).removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")})).attr("src",e):l.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in"):l.is("source")?l.attr("srcset",e):l.attr("data-url")!==e&&(l.attr("data-url",e),l.css("backgroundImage","url("+e+")"))):l.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")})))},at.updateTechdata=function(){const t=s.a.getConfiguration();t&&t.techdata&&Object.entries(t.techdata).forEach(t=>{at.updateTechdataEntry(t[0],t[1])})},at.updateTechdataEntry=function(t,e){[...document.querySelectorAll(at.oDefaults.selectorTechdata+t)].forEach(t=>{t.innerHTML=e})},at.updateEffiencyClass=function(){const t=s.a.getConfiguration(),e=document.querySelectorAll(".nm-j-configurator-techdata-efficiency-class");t&&t.eec&&t.eec.efficiency&&e.length>0&&[...e].forEach(e=>{e.innerHTML=t.eec.efficiency,e.classList.remove("nm-hidden"),e.hasAttribute("data-has-techdata-container")&&at.updateTechdataContainerVisibility(e)})},at.updateTechdataContainerVisibility=function(t){const e=a.dom.closest(t,".nm-j-configurator-techdata-container");e&&e.classList.remove("nm-hidden")},at.updateDomTextSummary=function(){let t=s.a.getMotorcode(),e=s.a.getItem(t),n=s.a.getModelsInfo(t),i=s.a.getConfiguration();i||console.warn("updateDomTextSummary: no configuration available!");let r,o,a=i&&i.eec?i.eec:{};i&&at.setDOMText(jQuery(at.oDefaults.sSelectorConfigurationSummary),i);let l=jQuery("[data-template='summary']");if(e=jQuery.extend(n,e),a&&!a.efficiency&&e&&e["energy-efficiency-category"]&&(a.efficiency=e["energy-efficiency-category"]),l.length){if(i&&i.description&&l.find(".nm-j-configurator-text-description").html(i.description),e)for(r in r="",e)e.hasOwnProperty(r)&&("image"===r?l.find(at.oDefaults.selectorModelImage).attr("src",e[r]):l.find([at.oDefaults.selectorModelText,r].join("")).html(e[r]));if(a){for(r in r="",a)a.hasOwnProperty(r)&&l.find([at.oDefaults.sSelectorSnippetTextEec,r].join("")).html(a[r]);a.efficiency&&a["efficiency-images"]&&(o=a["efficiency-images"].eec_image,l.find(at.oDefaults.selectorEecImage).attr("src",o))}}if(s.a.isConfigurable()){const t=[...document.querySelectorAll(at.oDefaults.sSelectorCarPriceRate)],e="nm-hidden",n=!!s.a.getConfigurationCarPriceRate();n?t.forEach(t=>{t.classList.remove(e)}):t.forEach(t=>{t.classList.add(e)}),at.toggleFinancingFootnoteVisibility(n)}},at.toggleFinancingFootnoteVisibility=t=>{const e=document.querySelector(".nm-footnote-finance"),n=SETUPS.get("nemo.footnote-engine.active");e&&!n&&(t?e.classList.remove("nm-hidden"):e.classList.add("nm-hidden"))},at.updateEnergyEfficiencyImage=function(){const t=s.a.getConfiguration();if(document.querySelector('[data-template="summary"]')&&t&&t.eec&&t.eec["efficiency-images"]&&t.eec["efficiency-images"].eec_character){[...document.querySelectorAll(".nm-j-configurator-efficiency-class-image")].forEach(e=>{e.src=t.eec["efficiency-images"].eec_character})}},st.initialize=function(t){at.eventBus=t,at.$stage=jQuery(at.oDefaults.sStageID),s.a.isConfigurable()&&at.addEvents(),document.cookie.indexOf("myAudi=")>-1&&jQuery("body").addClass("nm-logged-in")};var lt=n(45),ct=n(3),ut=n(5);const dt='<div class="nm-su-result">\n\t{{?!!it.audicode}}\n\t\t{{?!!it.configuration}}\n\t\t<div class="nm-su-result-wrap">\n\t\t\t<div class="nm-su-result-audicode clearfix">\n\t\t\t\t{{? SETUPS.get(\'scope.nemo.audicode.externallink\')}}\n\t\t\t\t\t{{var target = "target=\'blank\'";}}\n\t\t\t\t\t{{var link = \'/\' + it.audicode;}}\n\t\t\t\t{{??}}\n\t\t\t\t\t{{var target = "";}}\n\t\t\t\t\t{{var link = "#";}}\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.success===false}}\n\t\t\t\t\t{{?it[\'vtp-audicode\'] && it[\'other-url\']}}\n\t\t\t\t\t<div class="nm-su-vtp">\n\t\t\t\t\t\t<a href="{{=it[\'other-url\']}}" class="nm-link-cta audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t\t<span class="nm-su-result-audicode-label">{{=window.i18n[\'search-layer.your-audicode\']}}</span>&nbsp;\n\t\t\t\t\t\t\t <strong>{{=it.audicode}}</strong>\n\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="nm-su-vtp-image"></div>\n\t\t\t\t\t\t<div class="nm-su-vtp-description">\n\t\t\t\t\t\t\t<span class="nm-headline-teaser">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.available-cars\']}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div class="nm-description nm-label-info">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.available-cars-info\']}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a href="{{=it[\'other-url\']}}" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t\t\t<span>{{=window.i18n[\'search-layer.your-car\']}}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div class="nm-text-list">\n\t\t\t\t\t\t\t\t<span class="nm-text-list-bold">\n\t\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.label.disclaimer\']}}:\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.vtp-warning\']}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{??}}\n\t\t\t\t\t\t<strong class="nm-headline-teaser">{{=it.message}}</strong>\n\t\t\t\t\t{{?}}\n\t\t\t\t{{??}}\n\t\t\t\t\t<a href="{{=link}}" class="nm-link-cta nm-j-audicode-accept audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t<span class="nm-su-result-audicode-label">{{=window.i18n[\'search-layer.your-audicode\']}}</span>&nbsp;\n\t\t\t\t\t\t<strong>{{=it.audicode}}</strong>\n\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<img class="nm-su-result-audicode-image" src="{{=it.mediaservice}}{{=it.configuration.images[\'exterior_front\'][\'flyout\']}}"/>\n\t\t\t\t\t<div class="nm-su-result-audicode-description">\n\t\t\t\t\t\t<span class="nm-headline-teaser">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.carlineName}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class="nm-description nm-label-info">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.description}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<strong class="nm-headline-teaser nm-su-result-audicode-price">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.price}}\n\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t<a href="{{=link}}" {{=target}} class="nm-j-audicode-accept nm-el-btn nm-el-btn-01 nm-el-btn-ast audi-j-quick-search-result-tracking">{{=window.i18n[\'search-layer.load-configuration\']}}</a>\n\t\t\t\t\t\t<div class="nm-text-list">\n\t\t\t\t\t\t\t<span class="nm-text-list-bold">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.label.disclaimer\']}}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.configuration-overwrite-warning\']}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.consumption-entries\')}}\n\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata && (it.configuration.configuration.techdata[\'consumption-combined\'] || it.configuration.configuration.techdata[\'carbon-dioxide-emissions\'] || it.configuration.configuration.techdata[\'efficiency-class\'])}}\n\t\t\t\t\t\t\t\t<dl class="nm-su-result-audicode-consumption-entries clearfix audi-copy-s">\n\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'consumption-combined\']}}\n\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.consumption-combined\']}}*:</dt>\n\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'consumption-combined\']}}</dd>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'carbon-dioxide-emissions\']}}\n\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.emission-combined\']}}*:</dt>\n\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'carbon-dioxide-emissions\']}}</dd>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.eec-entry\')}}\n\t\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'efficiency-class\']}}\n\t\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.efficiency-class\']}}:</dt>\n\t\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'efficiency-class\']}}</dd>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t</div>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t</div>\n\t\t{{??}}\n\t\t\t<div class="nm-su-result-audicode">\n\t\t\t\t<strong class="nm-headline-teaser">\n\t\t\t\t\t{{=window.i18n[\'search-layer.audicode-loading\']}}\n\t\t\t\t</strong>\n\t\t\t\t<div class="nm-j-audicode-loading nm-loading">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{{?}}\n\t{{?}}\n\t{{?!it.audicode}}\n\t\t<div class="nm-su-result-wrap">\n\t\t\t{{?it.search.length}}\n\t\t\t\t<ul class="nm-su-result-list-group">\n\t\t\t\t\t{{~ it.search :entry }}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<h2 class="nm-su-result-list-item-headline">\n\t\t\t\t\t\t\t\t<span class="nm-label-text-bold">{{=entry.value.carlineName}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="nm-label-text-bold">{{=entry.key}}</span>\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<ul class="nm-su-result-list">\n\t\t\t\t\t\t\t\t{{~ entry.value.items :item }}\n\t\t\t\t\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix"\n\t\t\t\t\t\t\t\t\tdata-configurator-id="{{=item.id}}">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-image">\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.image}}\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="{{=item.image}}" alt="{{=item.name}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-content">\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-j-configurator-name nm-text-list-bold">\n\t\t\t\t\t\t\t\t\t\t\t\t{{=item.name}}\n\t\t\t\t\t\t\t\t\t\t\t\t{{? !!item.nonrenderable && item.nonrenderable == true }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-text-list"><br />{{=window.i18n[\'configuration.not-rendable-message\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.description}}\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-description nm-text-list">\n\t\t\t\t\t\t\t\t\t\t\t\t{{= item.description || \'\'}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-info">\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-add clearfix">\n\t\t\t\t\t\t\t\t\t\t\t\t{{?!!item.url}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=item.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-conflict-icon" title="#I18N("nemo.ui.common.conflict" "Konflikt")"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-price nm-text-list">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{? !!item.price}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-j-configurator-text-price">{{=item.price}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-add-btn">\n\t\t\t\t\t\t\t\t\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state01">{{=window.i18n[\'search-layer.add-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state02">{{=window.i18n[\'search-layer.item-included\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state03">{{=window.i18n[\'search-layer.remove-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{~}}\n\t\t\t\t</ul>\n\t\t\t{{?}}\n\t\t\t<div class="nm-su-sitesearch-list">\n\t\t\t\t{{?it.modelSearch.length}}\n\t\t\t\t\t<ul class="nm-su-modelsearch-group">\n\t\t\t\t\t\t{{~it.modelSearch :modelItem}}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=modelItem.url}}">\n\t\t\t\t\t\t\t\t<span>{{=modelItem.name}}</span>\n\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.siteMapSearch.length}}\n\t\t\t\t\t<ul class="nm-su-sitemapsearch-group">\n\t\t\t\t\t\t{{~it.siteMapSearch :siteMapItem}}\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tvar itemName = siteMapItem.name;\n\t\t\t\t\t\t\t\tvar replacedName = itemName.replace( \'[rhombus]\', \'<span class="nm-icon-rhombus"></span>\' );\n\t\t\t\t\t\t\t\treplacedName = replacedName.replace( \':plus\', \'<span class="nm-brand-plus">:plus</span>\' );\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=siteMapItem.url}}">\n\t\t\t\t\t\t\t\t\t<span>{{=replacedName}}</span>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.footerSearch.length}}\n\t\t\t\t\t<ul class="nm-su-footersearch-group">\n\t\t\t\t\t\t{{~it.footerSearch :footerItem}}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=footerItem.url}}">\n\t\t\t\t\t\t\t\t<span>{{=footerItem.name}}</span>\n\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t\t/*Proposals*/\n\t\t\t<ul class="nm-su-result-list-group">\n\t\t\t\t{{?it.searchListProposals.length}}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<ul class="nm-su-result-list nm-su-proposal-list">\n\t\t\t\t\t\t\t{{~it.searchListProposals :proposalItem}}\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="{{=proposalItem.Url}}" x-cq-linkchecker="valid" class="nm-su-proposol-item{{?proposalItem.Type=="Layer"}} nm-layerLink{{?}} audi-j-quick-search-result-tracking">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-image">\n\t\t\t\t\t\t\t\t\t\t\t{{? !!proposalItem.ImageUrl}}\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="{{=proposalItem.ImageUrl}}" alt="{{=proposalItem.Headline}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-proposal-list-content">\n\t\t\t\t\t\t\t\t\t\t\t<strong class="nm-text-list-bold">{{=proposalItem.Headline}}</strong>\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-description nm-text-list">{{=proposalItem.Description}}</div>\n\t\t\t\t\t\t\t\t\t\t\t<span class="nm-link-basic" >\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{{=window.i18n[\'discover-now\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t{{?}}\n\t\t\t</ul>\n\t\t</div>\n\t\t{{?!!it.gsaSearchUrl}}\n\t\t\t<div class="nm-su-gsa">\n\t\t\t\t<a class="nm-j-tracking-search-submit nm-link-basic" href="{{=it.gsaSearchUrl}}">\n\t\t\t\t\t<span>{{=window.i18n[\'search-layer.search-audi-web\']}} &quot;<span class="nm-highlight">{{=it.searchString}}</span>&quot; {{=window.i18n[\'search-layer.search-for\']}}</span>\n\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t{{?}}\n\t{{?}}\n</div>',mt=".nm-header-overlay-container .nm-navigation-header-search-overlay.nm-header-overlay-is-open",gt={},ft={__:gt};gt.mobileBreakpoint=750,gt.searchLayerOpen=!1,gt.searcListProposalsArr=null,gt.audicodeActivated=!1,gt.oDefaults={sAcceptAudicodeButton:".nm-j-audicode-accept"},gt.loadSearchListProposals=async function(){const t=SETUPS.get("nemo.url.searchproposals");return fetch(t,{credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(t=>{gt.searcListProposalsArr=t&&t.Proposals?t.Proposals:[]}).catch(t=>console.log("Error fetching search proposals - server responded with: ",t))},gt.searchResultListProposals=function(t){var e,n=[];return t&&(e=t.toLowerCase(),gt.searcListProposalsArr&&gt.searcListProposalsArr.length&&jQuery.each(gt.searcListProposalsArr,(function(t,i){if(!i.Search)return!0;i.Search.indexOf(e)>-1&&n.push(i)}))),n},gt.addEvents=function(){var t="click";gt.legacyEventBus.on("keyup",".nm-su .nm-su-input",gt.onOpenSearchLayer),gt.legacyEventBus.on("paste",".nm-su .nm-su-input",gt.onOpenSearchLayerDelayed),gt.legacyEventBus.on("click",".nm-su .nm-su-input",gt.onOpenSearchLayer),gt.legacyEventBus.on("click",".nm-su .nm-su-submit",gt.onOpenSearchLayer),gt.legacyEventBus.on("click",".nm-su .nm-su-reset",gt.resetSearch),gt.legacyEventBus.on("submit",".nm-su form",gt.formSubmit),gt.eventBus.on(i.appEvents.MENUFLYOUT_OPEN,gt.clearSearch),gt.eventBus.on(i.appEvents.MENUFLYOUT_CLOSE,gt.emptySearchResults),void 0!==document.documentElement.ontouchstart&&(t="touchstart"),gt.legacyEventBus.on(t,gt.onClickOutsideOfSearchLayer)},gt.removeEvents=function(){var t="click";gt.legacyEventBus.off("keyup",".nm-su .nm-su-input",gt.onOpenSearchLayer),gt.legacyEventBus.off("paste",".nm-su .nm-su-input",gt.onOpenSearchLayerDelayed),gt.legacyEventBus.off("click",".nm-su .nm-su-input",gt.onOpenSearchLayer),gt.legacyEventBus.off("click",".nm-su .nm-su-submit",gt.onOpenSearchLayer),gt.legacyEventBus.off("click",".nm-su .nm-su-reset",gt.resetSearch),gt.legacyEventBus.off("submit",".nm-su form",gt.formSubmit),gt.eventBus.off(i.appEvents.MENUFLYOUT_OPEN,gt.clearSearch),gt.eventBus.off(i.appEvents.MENUFLYOUT_CLOSE,gt.emptySearchResults),void 0!==document.documentElement.ontouchstart&&(t="touchstart"),gt.legacyEventBus.off(t,gt.onClickOutsideOfSearchLayer)},gt.emptySearchResults=function(){jQuery(".nm-su-result-container").empty()},gt.resetSearch=function(){jQuery(mt).find("input.nm-su-input").focus(),gt.emptySearchResults(),jQuery(mt).find("input.nm-su-input").keyup()},gt.clearSearch=function(t){void 0!==t.item&&(jQuery(mt).find("input.nm-su-input").val(""),jQuery(mt).find("input.nm-su-input").focus())},gt.formSubmit=function(t){var e,n;return t&&"function"==typeof t.preventDefault&&t.preventDefault(),gt.loadedConfiguration?(gt.acceptLoadedConfiguration(),!1):(jQuery(".nm-j-audicode-loading").length||(e=gt.readSearchStringFromInput()).length<=0||(n=gt.buildSearchResultsPageUrl(e))&&gt.performSearch(n,e),!1)},gt.performSearch=function(t,e){const n=gt.generateTrackingPayload(t,e),i=new CustomEvent("CUSTOM_TRACKING_EVENT",n);document.dispatchEvent(i),document.location=t},gt.generateTrackingPayload=function(t,e){let n="button";document.activeElement.classList.contains("nm-su-input")&&(n="other");return{detail:{eventInfo:{eventAction:"internal_link",eventName:"main search - submit"},attributes:{componentName:"main search",label:"",currentURL:window.location.href,targetURL:t,clickID:"",elementName:n,value:e,pos:""}}}},gt.readSearchStringFromInput=function(){var t=jQuery(".nm-su .nm-su-input").val();return t=t.replace(/^\s+/g,"").replace(/</g,"").replace(/>/g,"")},gt.onOpenSearchLayerDelayed=function(){var t=this;setTimeout((function(){jQuery(t).keyup()}),50)},gt.preventEvent=function(){return!1},gt.removeStopWordsFromSearchString=function(t){var e,n=t;return s.a.getSearchStopWords()&&(e=new RegExp("\\b(?:i|"+s.a.getSearchStopWords()+")\\b\\s*","gi"),n=n.replace(e,"")),n},gt.detectAndStoreAudiCode=function(t,e){return 8===e.length&&-1!==e.search(/[Aa]{1}[a-zA-Z0-9]{7}/)?(t.audicode=e.toUpperCase(),gt.legacyEventBus.off("submit",".nm-su form",gt.formSubmit),gt.legacyEventBus.off("submit",".nm-su form",gt.preventEvent),gt.legacyEventBus.on("submit",".nm-su form",gt.preventEvent)):(gt.legacyEventBus.off("submit",".nm-su form",gt.preventEvent),gt.legacyEventBus.off("submit",".nm-su form",gt.formSubmit),gt.legacyEventBus.on("submit",".nm-su form",gt.formSubmit)),t},gt.handleAudiCodeInput=function(t,e){var n=SETUPS.get("nemo.search.audicodestopwords");return e.audicode&&!e.search.length&&n&&-1===n.indexOf(t)?gt.triggerAudicodeLoad(e.audicode):e.audicode=null,e.searchString=t||gt.readSearchStringFromInput(),e.siteMapSearch=s.a.searchNavigation(t,"siteMap"),e.modelSearch=s.a.searchNavigation(t,"model"),e.footerSearch=s.a.searchNavigation(t,"footer"),e.gsaSearchUrl=gt.buildSearchResultsPageUrl(t),e.searchListProposals=gt.searchResultListProposals(t),e},gt.generateResultList=function(t){var e,n={},i=t;return gt.searchLayerOpen=!0,n=gt.detectAndStoreAudiCode(n,i),-1!==i.indexOf("|")&&(n.prstring=i),-1!==i.search(/^([a-z0-9]+)=((true)|(false))$/)&&(e=/^([a-z0-9]+)=((true)|(false))$/.exec(i),ut.state.triggerModeChange(e[1],e[2])),-1!==i.search(/dpu_extra=(.*)/)&&(e=/^dpu_extra=(.*)/.exec(i),p.a.setDpuExtra(e[1])),i=gt.removeStopWordsFromSearchString(i),n.search=SETUPS.get("showEquipmentsWithinSearchLayerContext")&&i&&i.length>1?s.a.search(i,!0):[],n=gt.handleAudiCodeInput(i,n)},gt.handleSearch=function(t,e,n,r){var o,s=gt.generateResultList(n),l=e!==n||"click"===t.type;n.length>1&&l?(o=a.template.render(dt,s),r.empty().html(o),gt.eventBus.emit(i.appEvents.SEARCH_OPEN,s)):n.length<=1&&gt.closeSearchLayer()},gt.handleSmallViewportSubmit=function(t,e){var n,i=e;jQuery(window).width()<gt.mobileBreakpoint&&jQuery(t.target).hasClass("nm-su-submit")&&(jQuery(".nm-j-audicode-loading").length?gt.audicodeActivated&&gt.acceptLoadedConfiguration():(i=gt.readSearchStringFromInput(),null!==(n=gt.buildSearchResultsPageUrl(i))&&(document.location=n)))},gt.isExitConditionFulfilled=function(t){if(gt.audicodeActivated){if(13===t.keyCode&&jQuery(".nm-j-audicode-accept").is(":visible"))return gt.acceptLoadedConfiguration(),!0}else gt.loadedConfiguration=null;return 16===t.keyCode||13===t.keyCode},gt.onOpenSearchLayer=function(t){let e,n,i,r;gt.isExitConditionFulfilled(t)||(gt.searchForm=jQuery(t.target).parents("form"),e=jQuery(this).closest(".nm-su"),n=e.find(".nm-su-result-container"),i=gt.readSearchStringFromInput(),r=e.data("current")||"",r!==i&&(gt.audicodeActivated=!1,gt.loadedConfiguration=null),e.data("current",i),gt.handleSearch(t,r,i,n),gt.setFlyoutHeight(n),gt.handleSmallViewportSubmit(t,i))},gt.buildSearchResultsPageUrl=function(t){let e=s.a.getSearchResultsPageUrl();const n=SETUPS.get("nemo.newSiteSearch.enabled")?"?q=":"#search=";return e?(e+=n+encodeURIComponent(t.toLowerCase()),e):null},gt.onClickOutsideOfSearchLayer=function(t){let e=t.target;gt.searchLayerOpen&&gt.isClickedTargetOutsideSearchLayer(e)&&gt.isClickedTargetOutsideSearchSearchInputField(e)&&gt.isClickedTargetOutsideAnyOtherLayer(e)&&gt.closeSearchLayer()},gt.isClickedTargetOutsideSearchLayer=function(t){return a.dom.isElementOutsideOfElementWithSelector(t,".nm-su-result-container")},gt.isClickedTargetOutsideSearchSearchInputField=function(t){return a.dom.isElementOutsideOfElementWithSelector(t,"div.nm-su")},gt.isClickedTargetOutsideAnyOtherLayer=function(t){return a.dom.isElementOutsideOfElementWithSelector(t,".nm-layer-wrapper")},gt.closeSearchLayer=function(){setTimeout((function(){gt.searchLayerOpen=!1,jQuery(".nm-su-result-container").empty(),gt.eventBus.emit(i.appEvents.SEARCH_CLOSE)}),100)},gt.triggerAudicodeLoad=async function(t){p.a.loadConfigurationByAudiCode(t).then((function(t){ct.a.adoptConfiguration(t).then(()=>{const e=s.a.getCarImages();gt.onAudiCodeLoaded({...t,images:e})})}),(function(e){e.message=e.message||window.i18n["standard-audicode-error"],e.audicode=t,gt.showAudiCodeLoadError(e)}))},gt.showAudiCodeLoadError=function(t){var e,n=jQuery(".nm-su-result-container");if(t.message=s.a.getErrorMessage(t),"AUDICODE_CONF_NOT_VALID"===t.id&&SETUPS.get("scope.nemo.audicode.not_valid_pdflink")){t.pdflink=SETUPS.get("nemo.pdf.url")+"/audicode/"+t.audicode;const e="search-layer.audicode-pdf";t.pdflabel=window.i18n&&window.i18n[e]?window.i18n[e]:"PDF anzeigen"}e=a.template.render('<div class="nm-su-result-audicode-wrap">\n\t<div class="nm-su-result-audicode">\n\t\t<h2 class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b">{{=window.i18n[\'search-layer.audicode.error\']}}: </h2>\n\t\t<div class="nm-error">\n\t\t\t<p class="nm-error-layer-message nm-el-pg nm-el-pg-03 nm-at-pg-indicator">{{=it.message}}</p>\n\t\t</div>\n\t\t{{?it.pdflink}}\n\t\t\t<a class="audi-link-s audi-link-s--arrow-front" href="{{=it.pdflink}}" target="_blank">\n\t\t\t\t<span class="audi-link-s__text">{{=it.pdflabel}}</span>\n\t\t\t\t<svg class="audi-link-s__icon">\n\t\t\t\t\t<use xlink:href="{{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/print-small.svg#nm-icon-print-small"}}"></use>\n\t\t\t\t</svg>\n\t\t\t</a>\n\t\t{{?}}\n\t</div>\n</div>',t),console.error(t),gt.legacyEventBus.off("submit",".nm-su form",gt.preventEvent),gt.legacyEventBus.on("submit",".nm-su form",gt.formSubmit),n.empty().html(e),gt.setFlyoutHeight(n)},gt.handleAudiCodeError=function(t){let e={};t&&(e.message=t),gt.audicodeActivated=!1,gt.loadedConfiguration=void 0,gt.showAudiCodeLoadError(e)},gt.onAudiCodeLoaded=function(t){let e,n;gt.loadedConfiguration=t,gt.loadedConfiguration&&t.audicode&&gt.loadedConfiguration.audicode.id?(e=gt.loadedConfiguration.audicode.id.toUpperCase(),n=jQuery(".nm-su-input").filter((function(){return jQuery(this).val().toUpperCase()===e})),n&&1===n.length?(gt.audicodeActivated=!0,gt.showLoadedConfiguration(n)):gt.handleAudiCodeError()):gt.handleAudiCodeError(window.i18n["standard-audicode-error"],"ERROR loading Audicode")},gt.showLoadedConfiguration=function(t){const e=t.closest(".nm-su").find(".nm-su-result-container"),n={search:{},audicode:gt.loadedConfiguration.audicode.id,configuration:gt.loadedConfiguration,mediaservice:s.a.getRenderUrl(),success:!!gt.loadedConfiguration.audicode.success,"vtp-audicode":!!gt.loadedConfiguration.audicode["other-url"],"other-url":gt.loadedConfiguration.audicode["other-url"]?gt.loadedConfiguration.audicode["other-url"]:null,message:gt.loadedConfiguration.audicode.message},i=a.template.render(dt,n);e.one("click.accept.loaded.audicode",gt.oDefaults.sAcceptAudicodeButton,gt.acceptLoadedConfiguration),e.empty().html(i),gt.setFlyoutHeight(e)},gt.acceptLoadedConfiguration=function(t){let e=gt.loadedConfiguration&&gt.loadedConfiguration.audicode?gt.loadedConfiguration.audicode:null;if(t&&!SETUPS.get("scope.nemo.audicode.externallink")&&"function"==typeof t.preventDefault&&t.preventDefault(),t&&SETUPS.get("scope.nemo.audicode.externallink"))return!0;if(gt.eventBus.emit(i.appEvents.SEARCH_LOAD_AUDICODE,{audicode:e}),gt.loadedConfiguration.audicode["other-url"]){if(""!==gt.loadedConfiguration.audicode["other-url"]){if(SETUPS.get("scope.nemo.audicode.externallink"))return t.target.href=gt.loadedConfiguration.audicode["other-url"],!0;window.location=gt.loadedConfiguration.audicode["other-url"]}}else p.a.handleExternalConfiguration(gt.loadedConfiguration,{startType:"audicode-search"}),i.router.open("page",s.a.getCurrentCarlineUrl());gt.closeSearchLayer()},gt.setFlyoutHeight=function(t){jQuery(".nm-su").removeClass("noSrcollbars"),t.height()<410&&jQuery(".nm-su").addClass("noSrcollbars");let e=t.height()+150;jQuery(".nm-has-additional-logo").length>0&&(e+=30),jQuery(mt).height(e)},ft.initialize=function(t){gt.eventBus=t,gt.legacyEventBus=jQuery("body"),gt.addEvents(),gt.loadSearchListProposals()};var pt=n(44);function ht(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(ht.prototype,HTMLElement.prototype),Object.setPrototypeOf(ht,HTMLElement);class vt extends ht{static get selectors(){return{container:".nm-module-summary-dynamic-recommendation",hidden:"nm-hidden"}}constructor(){super(),this.eventBus=i.signal.getEmitter(),ut.entryScroll.register("recommendations","summary-dynamic-recommendation")}connectedCallback(){this.moduleContainer=this.querySelector(vt.selectors.container),this.addEvents(),this.renderRecommendations()}disconnectedCallback(){this.removeEvents()}addEvents(){this.eventBus.on(i.appEvents.CONFIG_UPDATE,()=>{this.renderRecommendations()})}removeEvents(){this.eventBus.off(i.appEvents.CONFIG_UPDATE,()=>{this.renderRecommendations()})}renderRecommendations(){const t=this.getRecommendations();t.length>0?this.updateContent(this.renderTemplate(t),!0):this.updateContent()}getRecommendations(t=5){return s.a.getDynamicRecommendations().slice(0,t).map(t=>Object.assign({},t,s.a.getItem(t.id)))}renderTemplate(t){return a.template.render('\n<div class="audi-headline-order-3 nm-module-summary-dynamic-recommendation-headline-main">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose-headline\']}}\n</div>\n<p class="audi-copy-s nm-module-summary-dynamic-recommendation-paragraph">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose\']}}\n</p>\n\n\x3c!-- list --\x3e\n<div class="nm-module-summary-dynamic-recommendation-itemlist">\n\t\x3c!-- configurator item --\x3e\n\t{{~it :value}}\n\t\t{{##def.dataConfiguratorId :\n\t\t\t{{? value.id}}\n\t\t\t\tdata-configurator-id="{{=value.id}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t{{##def.dataConfiguratorGroup :\n\t\t\t{{? value.RadioGroup}}\n\t\t\t\tdata-configurator-group="{{=value.RadioGroup}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t<div class="nm-j-configurator-item nm-j-configurator-status_{{=value.status}}" {{#def.dataConfiguratorId}} {{#def.dataConfiguratorGroup}}>\n\t\t\t<div class="nm-module-summary-dynamic-recommendation-item">\n\n\t\t\t\t\x3c!-- checkbox --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-checkbox audi-checkbox nm-j-configurator-delegate-click">\n\t\t\t\t\t<span class="audi-checkbox">\n\t\t\t\t\t\t<span class="audi-checkbox-symbol nm-module-summary-dynamic-recommendation-checkbox-symbol">\n\t\t\t\t\t\t\t<svg class="nm-icon-select-small nm-module-summary-dynamic-recommendation-symbol">\n\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/select-small.svg#nm-icon-select-small"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- item text --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-itemtext">\n\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-itemname-text">{{=value.name}}</p>\n\t\t\t\t\t\x3c!-- non renderable sets a remark text --\x3e\n\t\t\t\t\t{{? value.nonrenderable}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text">\n\t\t\t\t\t\t\t{{=window.i18n[\'nemo.ui.common.note\']}}:\n\t\t\t\t\t\t\t{{=window.i18n[\'configuration.not-rendable-message\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !value.RadioGroup}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text nm-j-configurator-text-packageDescription"></p>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image-offerrate-wrapper">\n\t\t\t\t\t\x3c!-- image or video --\x3e\n\t\t\t\t\t{{##def.videoClass :\n\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\tnm-module-summary-dynamic-recommendation-video\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t#}}\n\n\t\t\t\t\t{{? value.image}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image {{#def.videoClass}}">\n\t\t\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t\t\t<a class="nm-layerLink" href="{{=value.url}}">\n\t\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-offerrate-wrapper">\n\t\t\t\t\t\t<audi-configurator-offerrate data-rate="{{=parseInt(parseFloat(value.einbaurate) * 100, 10)}}" class="nm-offer-rate">\n\t\t\t\t\t\t\t<div class="nm-offer-rate-container">\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-text audi-copy-s"><span class="nm-offer-rate-value">0</span>%</div>\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-image">\n\t\t\t\t\t\t\t\t\t<svg class="nm-offer-rate-icon" viewbox="0 0 48 48">\n\t\t\t\t\t\t\t\t\t\t<path d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke-opacity="0.6" stroke="#333" fill="none" />\n\t\t\t\t\t\t\t\t\t\t<path class="nm-offer-rate-path" d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke="#f50537" stroke-width="3" fill="none" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</audi-configurator-offerrate>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-price-icons">\n\t\t\t\t\t\x3c!-- price --\x3e\n\t\t\t\t\t{{? value.Series || value.price}}\n\t\t\t\t\t\t<div class="audi-copy-m nm-module-summary-dynamic-recommendation-price nm-j-configurator-text-price">\n\t\t\t\t\t\t\t{{? value.Series}}\n\t\t\t\t\t\t\t\t{{=window.i18n[\'nemo.common.serie\']}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? value.price}}\n\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\x3c!-- infolayer --\x3e\n\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-iconwrapper">\n\t\t\t\t\t\t\t<a class="nm-module-summary-dynamic-recommendation-iconlink nm-layerLink" href="{{=value.url}}" title="{{=window.i18n[\'more-information\']}}">\n\t\t\t\t\t\t\t\t<svg class="nm-icon-system-info-small nm-module-summary-dynamic-recommendation-icon-system-info-small">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-info-small.svg#nm-icon-system-info-small"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{~}}\n</div>\n\n\x3c!-- legend --\x3e\n<div class="audi-copy-m nm-module-summary-dynamic-recommendation-legend-headline">\n\t{{=window.i18n[\'dynamic-recommendations.legend-headline\']}}\n</div>\n<div class="nm-module-summary-dynamic-recommendation-legend-wrapper">\n\t<svg class="nm-icon-offer-rate-small nm-module-summary-dynamic-recommendation-icon-offer-rate-small">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/offer-rate-small.svg#nm-icon-offer-rate-small"}}></use>\n\t</svg>\n\t<p class="audi-copy-s">\n\t\t{{=window.i18n[\'dynamic-recommendations.legend-info\']}}\n\t</p>\n</div>',t)}updateContent(t="",e=!1){this.moduleContainer.innerHTML=t,e?this.classList.remove(vt.selectors.hidden):this.classList.add(vt.selectors.hidden)}}window.customElements.get("audi-configurator-dynamic-recommendation")||window.customElements.define("audi-configurator-dynamic-recommendation",vt);function yt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(yt.prototype,HTMLElement.prototype),Object.setPrototypeOf(yt,HTMLElement);class St extends yt{static get selectors(){return{container:".nm-module-summary-dynamic-recommendation",hidden:"nm-hidden"}}constructor(){super(),this.eventBus=i.signal.getEmitter(),ut.entryScroll.register("recommendations","summary-dynamic-recommendation")}connectedCallback(){this.moduleContainer=this.querySelector(St.selectors.container),this.addEvents(),this.renderRecommendations()}disconnectedCallback(){this.removeEvents()}addEvents(){this.eventBus.on(i.appEvents.CONFIG_UPDATE,()=>{this.renderRecommendations()})}removeEvents(){this.eventBus.off(i.appEvents.CONFIG_UPDATE,()=>{this.renderRecommendations()})}async renderRecommendations(){const t=await this.getRecommendations();t.length>0?this.updateContent(this.renderTemplate(t),!0):this.updateContent()}getQueryParams(){const t=s.a.getContext();let e=s.a.getPrString();const n=this.getItemsToIgnore().join("");return t&&e?(e=s.a.replacePackagesInPrString(e),e=s.a.resolvePackagesInPrString(e),new URLSearchParams({context:t,ids:e,ignore:n})):null}getItemsFromData(t,e=5){return t.map(t=>{const e=s.a.getItem(t.id);return!e||this.shouldBeIgnored(e.status)?null:{...t,...e}}).filter(t=>null!==t).slice(0,e)}shouldBeIgnored(t){return["00000","00001","00010","00011","00100","00101","00110","00111","01000","01001","01010","01011","01100","01101","01110","01111","10000"].includes(t)}getItemsToIgnore(){const t=s.a.getItems();return t?Object.values(t).filter(t=>this.shouldBeIgnored(t.status)&&3===t.id.length).map(t=>t.id):[]}getRecommendationsBackendUrl(){const t=SETUPS.get("nemo.recommendationsBackendUrl"),e=this.getQueryParams();return e&&t?t+"?"+e.toString():null}async getRecommendations(){await a.polling.wait(s.a.isInitialized,5e3);const t=await this.fetchRecommendations();return t&&t.configuration&&t.configuration.recommendations?this.getItemsFromData(t.configuration.recommendations):[]}async fetchRecommendations(){const t=this.getRecommendationsBackendUrl();if(!t)return null;return fetch(t,{method:"GET"}).then(t=>t.json()).catch(t=>(console.error("Error:",t),null))}renderTemplate(t){return a.template.render('\n<div class="audi-headline-order-3 nm-module-summary-dynamic-recommendation-headline-main">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose-headline\']}}\n</div>\n<p class="audi-copy-s nm-module-summary-dynamic-recommendation-paragraph">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose\']}}\n</p>\n\n\x3c!-- list --\x3e\n<div class="nm-module-summary-dynamic-recommendation-itemlist">\n\t\x3c!-- configurator item --\x3e\n\t{{~it :value}}\n\t\t{{##def.dataConfiguratorId :\n\t\t\t{{? value.id}}\n\t\t\t\tdata-configurator-id="{{=value.id}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t{{##def.dataConfiguratorGroup :\n\t\t\t{{? value.RadioGroup}}\n\t\t\t\tdata-configurator-group="{{=value.RadioGroup}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t<div class="nm-j-configurator-item nm-j-configurator-status_{{=value.status}}" {{#def.dataConfiguratorId}} {{#def.dataConfiguratorGroup}}>\n\t\t\t<div class="nm-module-summary-dynamic-recommendation-item">\n\n\t\t\t\t\x3c!-- checkbox --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-checkbox audi-checkbox nm-j-configurator-delegate-click">\n\t\t\t\t\t<span class="audi-checkbox">\n\t\t\t\t\t\t<span class="audi-checkbox-symbol nm-module-summary-dynamic-recommendation-checkbox-symbol">\n\t\t\t\t\t\t\t<svg class="nm-icon-select-small nm-module-summary-dynamic-recommendation-symbol">\n\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/select-small.svg#nm-icon-select-small"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- item text --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-itemtext">\n\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-itemname-text">{{=value.name}}</p>\n\t\t\t\t\t\x3c!-- non renderable sets a remark text --\x3e\n\t\t\t\t\t{{? value.nonrenderable}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text">\n\t\t\t\t\t\t\t{{=window.i18n[\'nemo.ui.common.note\']}}:\n\t\t\t\t\t\t\t{{=window.i18n[\'configuration.not-rendable-message\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !value.RadioGroup}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text nm-j-configurator-text-packageDescription"></p>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image-offerrate-wrapper">\n\t\t\t\t\t\x3c!-- image or video --\x3e\n\t\t\t\t\t{{##def.videoClass :\n\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\tnm-module-summary-dynamic-recommendation-video\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t#}}\n\n\t\t\t\t\t{{? value.image}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image {{#def.videoClass}}">\n\t\t\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t\t\t<a class="nm-layerLink" href="{{=value.url}}">\n\t\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-offerrate-wrapper">\n\t\t\t\t\t\t<audi-configurator-offerrate data-rate="{{=parseInt(parseFloat(value.einbaurate) * 100, 10)}}" class="nm-offer-rate">\n\t\t\t\t\t\t\t<div class="nm-offer-rate-container">\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-text audi-copy-s"><span class="nm-offer-rate-value">0</span>%</div>\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-image">\n\t\t\t\t\t\t\t\t\t<svg class="nm-offer-rate-icon" viewbox="0 0 48 48">\n\t\t\t\t\t\t\t\t\t\t<path d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke-opacity="0.6" stroke="#333" fill="none" />\n\t\t\t\t\t\t\t\t\t\t<path class="nm-offer-rate-path" d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke="#f50537" stroke-width="3" fill="none" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</audi-configurator-offerrate>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-price-icons">\n\t\t\t\t\t\x3c!-- price --\x3e\n\t\t\t\t\t{{? value.Series || value.price}}\n\t\t\t\t\t\t<div class="audi-copy-m nm-module-summary-dynamic-recommendation-price nm-j-configurator-text-price">\n\t\t\t\t\t\t\t{{? value.Series}}\n\t\t\t\t\t\t\t\t{{=window.i18n[\'nemo.common.serie\']}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? value.price}}\n\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\x3c!-- infolayer --\x3e\n\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-iconwrapper">\n\t\t\t\t\t\t\t<a class="nm-module-summary-dynamic-recommendation-iconlink nm-layerLink" href="{{=value.url}}" title="{{=window.i18n[\'more-information\']}}">\n\t\t\t\t\t\t\t\t<svg class="nm-icon-system-info-small nm-module-summary-dynamic-recommendation-icon-system-info-small">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-info-small.svg#nm-icon-system-info-small"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{~}}\n</div>\n\n\x3c!-- legend --\x3e\n<div class="audi-copy-m nm-module-summary-dynamic-recommendation-legend-headline">\n\t{{=window.i18n[\'dynamic-recommendations.legend-headline\']}}\n</div>\n<div class="nm-module-summary-dynamic-recommendation-legend-wrapper">\n\t<svg class="nm-icon-offer-rate-small nm-module-summary-dynamic-recommendation-icon-offer-rate-small">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/offer-rate-small.svg#nm-icon-offer-rate-small"}}></use>\n\t</svg>\n\t<p class="audi-copy-s">\n\t\t{{=window.i18n[\'dynamic-recommendations.legend-info\']}}\n\t</p>\n</div>',t)}updateContent(t="",e=!1){this.moduleContainer.innerHTML=t,e?this.classList.remove(St.selectors.hidden):this.classList.add(St.selectors.hidden)}}function Ct(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-dynamic-recommendation-bff")||window.customElements.define("audi-configurator-dynamic-recommendation-bff",St),Object.setPrototypeOf(Ct.prototype,HTMLElement.prototype),Object.setPrototypeOf(Ct,HTMLElement);class Et extends Ct{static get selectors(){return{radioFilter:".nm-module-engine-selection-filter-radio",selectFilter:".nm-module-engine-selection-filter-select",engineEntry:".nm-module-engine-selection-engine",engineSubList:".nm-module-engine-selection-engine-list",trimlineDetailLinks:".nm-module-engine-selection-trimline-layerlink-icon",enginesVisibleCount:".nm-j-enginesVisible",noResults:".nm-module-engine-selection-no-results",resetButton:".nm-module-engine-selection-no-results-reset",notHidden:":not(.nm-hidden)",hidden:"nm-hidden"}}get isInitialFiltersReset(){return"true"===this.dataset.resetFilters}get isConfigurationObserver(){return"false"===this.dataset.resetFilters}connectedCallback(){this.initElements(),this.addEvents(),this.initTrimlineFilter=this.initTrimlineFilter.bind(this),this.isConfigurationObserver&&l.stateRegistry.subscribeToStore(X.a,this.initTrimlineFilter)}disconnectedCallback(){this.removeEvents(),this.isConfigurationObserver&&l.stateRegistry.unsubscribeFromStore(X.a,this.initTrimlineFilter)}addEvents(){this.resetButton.addEventListener("click",()=>this.resetFilters()),[...this.radioFilters].forEach(t=>{t.addEventListener("change",()=>this.updateRadioFilterSelection(t))}),[...this.selectFilters].forEach(t=>{t.addEventListener("change",()=>this.updateFilters())})}removeEvents(){this.resetButton.removeEventListener("click",()=>this.resetFilters()),[...this.radioFilters].forEach(t=>{t.removeEventListener("change",()=>this.updateRadioFilterSelection(t))}),[...this.selectFilters].forEach(t=>{t.removeEventListener("change",()=>this.updateFilters())})}initElements(){this.engineEntries=this.querySelectorAll(Et.selectors.engineEntry),this.selectFilters=this.querySelectorAll(Et.selectors.selectFilter),this.radioFilters=this.querySelectorAll(Et.selectors.radioFilter),this.visibleCounter=this.querySelector(Et.selectors.enginesVisibleCount),this.noResultsBox=this.querySelector(Et.selectors.noResults),this.resetButton=this.querySelector(Et.selectors.resetButton),this.isInitialFiltersReset&&this.resetFilters()}resetFilters(){[...this.selectFilters].forEach(t=>t.value=""),[...this.radioFilters].forEach(t=>t.checked=!1),this.updateFilters()}initTrimlineFilter(t){const e=t.selectedTrimline;e&&([...this.selectFilters].forEach(t=>{t.value=e}),this.updateFilters())}updateRadioFilterSelection(t){const e=t.getAttribute("name");[...this.querySelectorAll(`${Et.selectors.radioFilter}[name="${e}"]`)].filter(e=>e!==t).forEach(t=>t.checked=!1),this.updateFilters()}updateFilters(){const t=this.getRadioFiltersValues().concat(this.getSelectFiltersValues());this.updateTrimlineDetailLink(t),this.filterEngineList(t)}updateTrimlineDetailLink(t){const e=t.filter(t=>"trimline"===t.name);if([...this.querySelectorAll(Et.selectors.trimlineDetailLinks)].forEach(t=>t.classList.add(Et.selectors.hidden)),e.length>0){const t=this.querySelector(`${Et.selectors.trimlineDetailLinks}[data-trimline="${e[0].value}"]`);t&&t.classList.remove(Et.selectors.hidden)}}getRadioFiltersValues(){return[...this.radioFilters].filter(t=>!0===t.checked).map(t=>this.getFilter(t))}getSelectFiltersValues(){return[...this.selectFilters].filter(t=>""!==t.value).map(t=>this.getFilter(t))}getFilter(t){return{name:t.getAttribute("name"),value:t.value}}filterEngineList(t){const e=t.reduce((t,e)=>`${t}[data-filter-${e.name}~="${e.value}"]`,Et.selectors.engineEntry);[...this.engineEntries].forEach(t=>t.classList.add(Et.selectors.hidden)),[...this.querySelectorAll(e)].forEach(t=>t.classList.remove(Et.selectors.hidden)),this.hideEmptyContainer(),this.updateVisibleEngineCounter()}hideEmptyContainer(){[...this.querySelectorAll(Et.selectors.engineSubList)].forEach(t=>{0===t.querySelectorAll(Et.selectors.engineEntry+Et.selectors.notHidden).length?t.classList.add(Et.selectors.hidden):t.classList.remove(Et.selectors.hidden)})}updateVisibleEngineCounter(){const t=this.querySelectorAll(Et.selectors.engineEntry+Et.selectors.notHidden).length;this.visibleCounter.innerHTML=t,0!==t?this.noResultsBox.classList.add(Et.selectors.hidden):this.noResultsBox.classList.remove(Et.selectors.hidden)}}function bt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-engine-selection")||window.customElements.define("audi-configurator-engine-selection",Et),Object.setPrototypeOf(bt.prototype,HTMLElement.prototype),Object.setPrototypeOf(bt,HTMLElement);class wt extends bt{constructor(){super()}connectedCallback(){document.body.classList.add("nm-has-current-consumption")}disconnectedCallback(){document.body.classList.remove("nm-has-current-consumption")}}window.customElements.get("audi-configurator-current-consumption")||window.customElements.define("audi-configurator-current-consumption",wt);const Dt={},_t={__:Dt,initialized:!1};Dt.oDefaults={sSelectorLayerOuter:".nm-layer-equipment-search-layer",sSelectorSnippetText:".nm-j-configurator-text-",sSelectorFooter:".nm-equipment-search-footer__inner-wrapper",sSelectorResultsWrap:".nm-equipment-search-result-container",sSelectorSearchInput:".nm-equipment-search-input",sSelectorSearchForm:".nm-equipment-search-form form"},Dt.searchListArr=[],Dt.getAllItems=function(){var t,e,n,i,r,o=s.a.getFamilies();if(Dt.searchListArr=[],o)for(t in o)if(t&&"equipment"===o[t].type&&(i={family:o[t]},e=s.a.getItemsByFamily(t))){for(n in i.items=[],e)n&&(r=s.a.getItem(n),i.items.push(r));Dt.searchListArr.push(i)}return Dt.searchListArr},Dt.handleConfigUpdate=function(){var t,e,n,i,r=Dt.getLayer();r&&(Dt.updateFooterText(r),(t=Dt.getAllItems())&&((e=Dt.getSearchString()).length>1?(n=Dt.validateSearchString(e),i=Dt.parseResults(n.search),Dt.populateResultList(i)):Dt.populateResultList(t)))},Dt.parseResults=function(t){var e,n=[];if(t)for(e in t)e&&t[e].value&&n.push(t[e].value);return n},Dt.populateResultList=function(t){var e,n=Dt.getResultsWrapContainer();if(t&&n){e=a.template.render('{{?it.length}}\n\t{{~ it :group }}\n\t\t{{? !!group.family}}\n\t\t\t{{? !!group.items}}\n\n\n\t\t\t/*hide groups where all elements have hidden status*/\n\t\t\t{{var $hideGroup = false;}}\n\t\t\t{{~ group.items :itemcheck }}\n\t\t\t\t{{? !!itemcheck.status && itemcheck.status == "00000"}}\n\t\t\t\t\t{{$hideGroup = true;}}\n\t\t\t\t{{?}}\n\t\t\t{{~}}\n\n\t\t\t{{? !$hideGroup}}\n\t\t\t<ul class="nm-equipment-search-result-group">\n\t\t\t\t<li>\n\t\t\t\t\t<div class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=group.family.name}}</div>\n\t\t\t\t\t<ul class="nm-equipment-search-result-list">\n\t\t\t\t\t{{~ group.items :item }}\n\t\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix"\n\t\t\t\t\t\tdata-configurator-id="{{=item.id}}">\n\t\t\t\t\t\t\t<div class="nm-equipment-search-result-item-wrap">\n\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-image">\n\t\t\t\t\t\t\t\t\t{{? !!item.image}}\n\t\t\t\t\t\t\t\t\t<img src="{{=item.image}}" alt="{{=item.name}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-content-wrap">\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-desc">\n\t\t\t\t\t\t\t\t\t\t<p class="nm-j-configurator-name nm-el-lbl nm-el-lbl-01 nm-at-lbl-b">\n\t\t\t\t\t\t\t\t\t\t\t{{=item.name}}\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.nonrenderable && item.nonrenderable == true }}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-el-pg nm-el-pg-04"><br />{{=window.i18n[\'configuration.not-rendable-message\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{{? !!item.description}}\n\t\t\t\t\t\t\t\t\t\t<p class="nm-equipment-search-result-description nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t\t{{= item.description || \'\'}}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t{{? SETUPS.get(\'scopes.nemo.SHOW_EU_TYRE_LABEL\') && item.family.includes(\'Raeder_Reifen\')}}\n\t\t\t\t\t\t\t\t\t\t\t{{ var randomId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15); }}\n\t\t\t\t\t\t\t\t\t\t\t<feature-app id="tyre-label-link:equipment-search:{{=randomId}}" base-url="https://featureapps.audi.com/audi-feature-app-tyre-label-link/1/" src="audi-feature-app-tyre-label-link.js" server-src="audi-feature-app-tyre-label-link.commonjs.js" config=\'{"optionId": "{{=item.id}}"}\'></feature-app>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-icons">\n\t\t\t\t\t\t\t\t\t\t{{?!!item.url}}\n\t\t\t\t\t\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=item.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t<span class="nm-conflict-icon" title="#I18N("nemo.ui.common.conflict" "Konflikt")"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-price nm-el-lbl nm-el-lbl-01">\n\t\t\t\t\t\t\t\t\t\t{{? !!item.price}}\n\t\t\t\t\t\t\t\t\t\t<span class="nm-j-configurator-text-price">{{=item.price}}</span>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-add-btn">\n\t\t\t\t\t\t\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state01">{{=window.i18n[\'search-layer.add-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state02">{{=window.i18n[\'search-layer.item-included\']}}</span>\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state03">{{=window.i18n[\'search-layer.remove-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t{{?}}\n\t\t\t{{?}}\n\t\t{{?}}\n\t{{~}}\n{{?}}',t),n.innerHTML=e;const i=new CustomEvent("content:rendered",{detail:{element:n}});document.dispatchEvent(i)}},Dt.getLayer=function(){return!!document.querySelector(Dt.oDefaults.sSelectorLayerOuter)&&document.querySelector(Dt.oDefaults.sSelectorLayerOuter)},Dt.getResultsWrapContainer=function(){var t=document.querySelector(Dt.oDefaults.sSelectorResultsWrap);if(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}return!1},Dt.updateFooterText=function(t){let e=!1;const n=SETUPS.get("scope.nemo.hide_financing_rate")||!1;if(t)if(s.a.isConfigurable()&&s.a.getConfiguration()){const i=s.a.getConfiguration();for(const n in i)if(i[n]){"rate"===n&&(e=!0);const r=t.querySelector(Dt.oDefaults.sSelectorFooter+" "+Dt.oDefaults.sSelectorSnippetText+n);r&&(r.textContent=i[n])}t.querySelector(Dt.oDefaults.sSelectorFooter+" > span").classList.remove("nm-hidden"),n||!e?t.querySelector(".nm-equipment-search-rate").classList.add("nm-hidden"):t.querySelector(".nm-equipment-search-rate").classList.remove("nm-hidden")}else t.querySelector(Dt.oDefaults.sSelectorFooter+" > span").classList.add("nm-hidden")},Dt.getSearchString=function(){var t=document.querySelector(Dt.oDefaults.sSelectorSearchInput);return(t?t.value:"").replace(/^\s+/g,"").replace(/</g,"").replace(/>/g,"")},Dt.handleSearch=function(t){var e,n,i=Dt.getSearchString(),r={},o=document.querySelector(Dt.oDefaults.sSelectorSearchForm);if(o){if(n=(o.getAttribute("data-current")||"")!==i||"click"===t.type,t.preventDefault(),t.stopImmediatePropagation(),16===t.keyCode||13===t.keyCode)return;o.setAttribute("data-current",i),i.length>=2&&n?(r=Dt.validateSearchString(i),e=Dt.parseResults(r.search),Dt.populateResultList(e)):0===i.length&&n&&Dt.resetSearch()}},Dt.searchDebounceHandler=a.dom.debounce(Dt.handleSearch,300),Dt.validateSearchString=function(t){var e,n=t,i={};return n&&0!==n.length?(-1!==n.indexOf("|")&&(i.prstring=n),s.a.getSearchStopWords()&&(e=new RegExp("\\b(?:i|"+s.a.getSearchStopWords()+")\\b\\s*","gi"),n=n.replace(e,"")),i.search=(!!n&&n.length)>1?s.a.search(n,!0):[],i.searchString=n||Dt.getSearchString(),i):[]},Dt.resetSearch=function(){Dt.searchListArr&&Dt.searchListArr.length&&Dt.populateResultList(Dt.searchListArr)},Dt.generateLayerHtml=function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-equipment-search-layer"><div class="nm-layer-equipment-search-layer nm-j-jslayer nm-layer nm-default-layer"></div></div>'},Dt.handleLayerLoaded=function(){var t=a.template.render('\n<div class="nm-layer-toolbar">\n\t<div class="nm-layer__close-button nm-j-layer-close-button">\n\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"}}></use>\n\t\t</svg>\n\t</div>\n</div>\n<div class="nm-layer-inner nm-equipment-search-layer-wrapper">\n\t<div class="nm-md-equipment-search">\n\t\t<header class="nm-equipment-search-header">\n\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02">{{=window.i18n[\'nemo.ui.equipment-search.headline\']}}</h2>\n\n\t\t\t<div class="nm-equipment-search-form">\n\t\t\t\t<form action="#" method="GET">\n\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t<input name="q" class="nm-equipment-search-input" type="text" placeholder=\'{{=window.i18n["search-layer.equipment-search-input-placeholder"]}}\'/>\n\t\t\t\t\t\t<input type="reset" class="nm-equipment-search-reset" value="X" />\n\t\t\t\t\t</fieldset>\n\t\t\t\t</form>\n\t\t\t\t<div class="nm-equipment-search-result-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t\t<footer class="nm-equipment-search-footer">\n\t\t\t<div class="nm-equipment-search-footer__inner-wrapper">\n\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b"><span class="nm-j-configurator-text-carlineName"></span> <span class="nm-j-configurator-text-description nm-el-lbl nm-el-lbl-01"></span></span>\n\t\t\t\t<span class="nm-equipment-search-footer__text-price-rate"><span class="nm-j-configurator-text-price nm-el-hdl nm-el-hdl-04 nm-at-hdl-b"></span> <span class="nm-el-lbl nm-el-lbl-01 nm-equipment-search-rate">({{=window.i18n["nemo.ui.equipment-search.rate"]}} <span class="nm-j-configurator-text-rate"></span>)</span></span>\n\t\t\t</div>\n\t\t</footer>\n\t\t<main class="nm-equipment-search-main">\n\t\t</main>\n\t</div>\n</div>',null),e=(document.querySelector(".nm-layer-wrapper-equipment-search-layer"),document.querySelector(Dt.oDefaults.sSelectorLayerOuter));e&&(e.innerHTML=t,Dt.legacyEventBus.on("keyup",".nm-equipment-search-input",Dt.searchDebounceHandler),Dt.legacyEventBus.on("paste",".nm-equipment-search-input",Dt.handleSearch),Dt.legacyEventBus.on("click",".nm-equipment-search-submit",Dt.searchDebounceHandler),Dt.legacyEventBus.on("click",".nm-equipment-search-reset",Dt.resetSearch),Dt.legacyEventBus.on("submit",".nm-equipment-search-form form",Dt.searchDebounceHandler)),Dt.handleConfigUpdate()},Dt.addEvents=function(){i.clientLayer.register("equipmentSearchlayer",Dt.generateLayerHtml),Dt.eventBus.on(i.appEvents.LAYER_LOADED,Dt.handleLayerLoaded),Dt.eventBus.on(i.appEvents.CONFIG_UPDATE,Dt.handleConfigUpdate),_t.initialized=!0},_t.dispose=function(){var t=document.querySelector(".nm-layer-wrapper-equipment-search-layer");console.log("dispose esmd"),Dt.legacyEventBus.off("keyup",".nm-equipment-search-input",Dt.searchDebounceHandler),Dt.legacyEventBus.off("paste",".nm-equipment-search-input",Dt.handleSearch),Dt.legacyEventBus.off("click",".nm-equipment-search-submit",Dt.searchDebounceHandler),Dt.legacyEventBus.off("click",".nm-equipment-search-reset",Dt.resetSearch),Dt.legacyEventBus.off("submit",".nm-equipment-search-form form",Dt.searchDebounceHandler),Dt.eventBus.off(i.appEvents.LAYER_LOADED,Dt.handleLayerLoaded),Dt.eventBus.off(i.appEvents.CONFIG_UPDATE,Dt.handleConfigUpdate),t&&t.removeEventListener("scroll")},_t.initialize=function(t){Dt.eventBus=t,Dt.legacyEventBus=jQuery("body"),Dt.addEvents()};const At={},Lt={__:At};At.defaults={expertContainerSelector:".nm-mode-expert",selectorDelegateClick:"nm-toggle",toggleClass:"nm-toggle-open",optionsListHeadSelector:".nm-options-list-head, .nm-module-options-container-headline",optionsGroupListWrapperSelector:".nm-mode-expert-group-list-wrap",optionsGroupWrap:".nm-mode-expert-group-wrap",statusClassPrefix:"nm-j-configurator-status_",listClosedClass:"nm-closed",configurationItemSelector:'[class*="nm-j-configurator-status_"]',hiddenClass:"nm-hidden",counterWrapperSelector:".nm-module-options-container-selected-items",counterSelector:".nm-selected-items"},At.handleToggleClick=function(t){const e=a.dom.closest(t.target,"."+At.defaults.selectorDelegateClick),n=a.dom.closest(e,At.defaults.optionsGroupWrap),r=a.dom.getElementsArray(At.defaults.optionsGroupListWrapperSelector,n);e.classList.contains(At.defaults.toggleClass)?e.classList.remove(At.defaults.toggleClass):e.classList.add(At.defaults.toggleClass),r.forEach(At.toggleGroupList),At.eventBus.emit(i.appEvents.CONTENT_RESIZE)},At.toggleGroupList=function(t){t.classList.contains(At.defaults.listClosedClass)?t.classList.remove(At.defaults.listClosedClass):t.classList.add(At.defaults.listClosedClass)},At.getStatusCodeForItem=function(t){return t.className.indexOf(At.defaults.statusClassPrefix)<0?"":t.className.split(At.defaults.statusClassPrefix)[1].split(" ")[0]},At.isItemSelected=function(t){const e=At.getStatusCodeForItem(t);return/[0,1]{3}1[0,1]/.test(e)},At.isItemSelectedStandard=function(t){const e=At.getStatusCodeForItem(t);return/1001[0,1]/.test(e)},At.isItemSelectedAndNotStandard=function(t){const e=At.isItemSelected(t),n=At.isItemSelectedStandard(t);return e&&!n},At.getSelectedItemsCountFromList=function(t){return a.dom.getElementsArray(At.defaults.configurationItemSelector,t).reduce((t,e)=>At.isItemSelectedAndNotStandard(e)?t+1:t,0)},At.updateListCounter=function(t){const e=a.dom.getElement(At.defaults.counterSelector,t);if(!a.dom.isElement(e))return;const n=a.dom.closest(t,At.defaults.optionsGroupWrap),i=a.dom.closest(e,At.defaults.counterWrapperSelector),r=At.getSelectedItemsCountFromList(n);e.textContent=r,At.setTitleForCounter(i,e,r),At.toggleCounterVisibility(i,r)},At.toggleCounterVisibility=function(t,e){e>0?t.classList.remove(At.defaults.hiddenClass):t.classList.add(At.defaults.hiddenClass)},At.setTitleForCounter=function(t,e,n){let i="";n>0&&(i=n+" ",i+=1===n?e.getAttribute("data-text-selected-single"):e.getAttribute("data-text-selected-multi")),t.setAttribute("title",i)},At.updateLists=function(){const t=a.dom.getElementsArray(At.defaults.expertContainerSelector),e=a.dom.getElementsArray(At.defaults.optionsListHeadSelector);t.length<1||e.forEach(At.updateListCounter)},At.addEvents=function(){At.domEventDelegate.on("click",At.defaults.optionsListHeadSelector,At.handleToggleClick),At.eventBus.on(i.appEvents.DOM_UPDATED,At.updateLists),At.eventBus.on(i.appEvents.PAGE_LOADED,At.updateLists)},Lt.initialize=function(t){At.eventBus=t,At.domEventDelegate=a.dom.getEventDelegate("body"),At.addEvents(),At.updateLists()};const kt={},Tt={},It={getTemplateFuncAsync:function(){var t,e,n=this.templateKey||null,r=function(){return""};if(null===n)return Promise.resolve(r);if(t=It.getTemplateId(this,n),void 0===Tt[t]){if(i.dynamicDot.requiresDynamicDot())return new Promise((e,n)=>{i.dynamicDot.getTemplateFromBackend(t).then(n=>{Tt[t]=nt.doT.template(n),e(Tt[t])}).catch(n=>{console.warn("Error reading dot-template with id: "+t,n),e(r)})});if(!(e=document.querySelector("#"+t))||!e.innerHTML)return Promise.resolve(r);Tt[t]=nt.doT.template(e.innerHTML.trim())}return Promise.resolve(Tt[t])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){var n,i,r="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};if(e=e.toLowerCase(),void 0!==t.id){if(n=It.sanitizeId(t.id),void 0!==(i=kt[o.id+"-"+n]))return i;if(void 0!==a[i=r+o.id+"-"+o.pageId+"-"+n+"-tpl"])return i;if(void 0!==a[i=r+o.id+"-"+n+"-tpl"])return i}return"Form"===t.formConstructorName&&void 0!==(i=kt[o.id+"-"+o.pageId])?i:(i=r+o.id+"-"+e+"-tpl",void 0!==kt[o.id+"-"+e]||void 0!==a[i=r+o.id+"-"+o.pageId+"-"+e+"-tpl"]||void 0!==a[i=r+o.id+"-"+e+"-tpl"]?i:i=r+e+"-tpl")},FormField:function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);return this.formConstructorName="FormField",this.domId=It.sanitizeId(this.id),void 0===this.name&&(this.name=this.id),this.form=e,this.templateKey=this.type,this}};It.FormField.prototype.initializeTemplatesAsync=function(){return new Promise(t=>{this.getTemplateFuncAsync().then(e=>{this.getString=e,this.registerChange(),t(e)})})},It.FormField.prototype.getTemplateFuncAsync=It.getTemplateFuncAsync,It.FormField.prototype.registerChange=function(){var t,e,n=this,i=this.type.toLowerCase();if("radio"===i){t="#"+this.form.id,e='input[type="radio"][name="'+this.domId+'"]';const i='input[type="hidden"][name="'+this.domId+'"]';jQuery(t).on("change",e,(function(){jQuery(i).remove(),(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])}))}else"select"===i||"checkbox"===i?(t="#"+this.form.id,e="#"+this.domId,jQuery(t).on("change",e,(function(){(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])}))):(t="#"+this.form.id,e="#"+this.domId,jQuery(t).on("blur",e,(function(){(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])})))},It.FormField.prototype.toString=function(){return this.getString(this)};const xt=It.FormField,Pt={},Ot={},jt={getTemplateFuncAsync:function(){var t,e,n=this.templateKey||null,r=function(){return""};if(null===n)return Promise.resolve(r);if(t=jt.getTemplateId(this,n),void 0===Ot[t]){if(i.dynamicDot.requiresDynamicDot())return new Promise((e,n)=>{i.dynamicDot.getTemplateFromBackend(t).then(n=>{Ot[t]=nt.doT.template(n),e(Ot[t])}).catch(n=>{console.warn("Error reading dot-template with id: "+t,n),e(r)})});if(!(e=document.querySelector("#"+t))||!e.innerHTML)return Promise.resolve(r);Ot[t]=nt.doT.template(e.innerHTML.trim())}return Promise.resolve(Ot[t])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){let n,i,r="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};o.pageId;if(e=e.toLowerCase(),void 0!==t.id){if(n=jt.sanitizeId(t.id),i=Pt[o.id+"-"+n],void 0!==i)return i;if(i=r+o.id+"-"+o.pageId+"-"+n+"-tpl",void 0!==a[i])return i;if(i=r+o.id+"-"+n+"-tpl",void 0!==a[i])return i}return"Form"===t.formConstructorName&&(i=Pt[o.id+"-"+o.pageId],void 0!==i)?i:(i=r+o.id+"-"+e+"-tpl",void 0!==Pt[o.id+"-"+e]?i:(i=r+o.id+"-"+o.pageId+"-"+e+"-tpl",void 0!==a[i]?i:(i=r+o.id+"-"+e+"-tpl",void 0!==a[i]||(i=r+e+"-tpl"),i)))}};jt.FormItem=function(t,e){return function(t,e){if(!t||!e)return!1;let n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(t,this),this.formConstructorName="FormItem",this.domId=jt.sanitizeId(this.id),this.dataFields=t&&"fields"in t?t.fields:[],this.form=e,this.templateKey="item",this.fields=[],this.namedFields={},this},jt.FormItem.prototype.initializeTemplatesAndFieldsAsync=function(){return new Promise(t=>{this.getTemplateFuncAsync().then(e=>{this.getString=e,this.processFieldsAsync().then(e=>{t(e)})})})},jt.FormItem.prototype.getTemplateFuncAsync=jt.getTemplateFuncAsync,jt.FormItem.prototype.processFieldsAsync=function(){return new Promise(t=>{var e,n,i;if(void 0!==this.dataFields){1===this.dataFields.length&&void 0===this.dataFields[0].label&&(this.dataFields[0].label=this.name,delete this.name,this.info&&(this.dataFields[0].info=this.info,delete this.info));const r=[];for(e=0,n=this.dataFields.length;e<n;e++)i=new xt(this.dataFields[e],this.form),r.push(i.initializeTemplatesAsync()),this.fields.push(i),this.namedFields[i.id]=i;Promise.allSettled(r).then(()=>{t(this.fields)})}else t(this.fields)})},jt.FormItem.prototype.toString=function(){return this.getString(this)};const Rt=jt.FormItem,Bt={},Mt={},Ft={getTemplateFuncAsync:function(){let t,e=this.templateKey||null,n=function(){return""};if(null===e)return Promise.resolve(n);let r=Ft.getTemplateId(this,e);if(void 0===Mt[r]){if(i.dynamicDot.requiresDynamicDot())return new Promise((t,e)=>{i.dynamicDot.getTemplateFromBackend(r).then(e=>{Mt[r]=nt.doT.template(e),t(Mt[r])}).catch(e=>{console.error("Error reading dot-template with id: "+r,e),t(n)})});if(t=document.querySelector("#"+r),!t||!t.innerHTML)return Promise.resolve(n);Mt[r]=nt.doT.template(t.innerHTML.trim())}return Promise.resolve(Mt[r])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){var n,i,r="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};o.pageId;if(e=e.toLowerCase(),void 0!==t.id){if(n=Ft.sanitizeId(t.id),void 0!==(i=Bt[o.id+"-"+n]))return i;if(void 0!==a[i=r+o.id+"-"+o.pageId+"-"+n+"-tpl"])return i;if(void 0!==a[i=r+o.id+"-"+n+"-tpl"])return i}return"Form"===t.formConstructorName&&void 0!==(i=Bt[o.id+"-"+o.pageId])?i:(i=r+o.id+"-"+e+"-tpl",void 0!==Bt[o.id+"-"+e]||void 0!==a[i=r+o.id+"-"+o.pageId+"-"+e+"-tpl"]||void 0!==a[i=r+o.id+"-"+e+"-tpl"]?i:i=r+e+"-tpl")},FormGroup:function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);return this.formConstructorName="FormGroup",this.form=e,this.domId=Ft.sanitizeId(this.id),this.templateKey="group",this.dataItems=t.items,this.items=[],this.namedItems={},this}};Ft.FormGroup.prototype.initializeGroupAsync=function(){return new Promise(t=>{this.processItemsAsync().then(e=>{this.getTemplateFuncAsync().then(e=>{this.getString=e,t(this.formGroup)})})})},Ft.FormGroup.prototype.getTemplateFuncAsync=Ft.getTemplateFuncAsync,Ft.FormGroup.prototype.processItemsAsync=function(){return new Promise(t=>{var e,n,i;if(this.dataItems){let r=[];for(e=0,n=this.dataItems.length;e<n;e++)i=new Rt(this.dataItems[e],this.form),r.push(i.initializeTemplatesAndFieldsAsync()),this.items.push(i),this.namedItems[i.id]=i;Promise.allSettled(r).then(()=>{t(this.items)})}else t(this.items)})},Ft.FormGroup.prototype.toString=function(){return this.getString(this)};const Ut=Ft.FormGroup,zt={};let Nt,Qt={},Ht={},Vt={},qt={};const Wt={},Gt={__:Wt};Wt.initFormAsync=function(t){return new Promise((e,n)=>{const i=t.attr("id"),r=Wt.getUrl("start",i);void 0!==qt[i]?(zt[i]=new Wt.Form(qt[i],Vt),zt[i].initializeFormAsync().then(()=>{zt[i].el.appendTo(t),e(zt[i])})):fetch(r,{credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(n=>{const r=Gt.responseToObj(n);!1===r?(Wt.displayStandardError(i),e(i)):r.form?(zt[i]=new Wt.Form(r,Vt),zt[i].initializeFormAsync().then(()=>{zt[i].el.appendTo(t),e(zt[i]),r.header&&r.header.subsession&&p.a.setSubsessionID(r.header.subsession)})):(Wt.displayStandardError(i),e(i))}).catch(t=>{Wt.displayStandardError(i),n(t)})})},Wt.bindEnablers=function(){jQuery("body .nm-form input[data-enables]").on("change",(function(t){var e,n,i,r,o;for(r=(e=(n=jQuery(t.target)).attr("data-enables").split(";")).length;r>-1;r--)e[r]=Wt.sanitizeId(e[r]);for(i="off"===(i=n.attr("data-active")||"off")?"on":"off",n.attr("data-active",i),r=e.length;r>-1;r--)e[r]&&(o="off"===i&&"disabled",jQuery("#nm-id-form-field-"+e[r]+" input").attr("disabled",o))}))},Wt.getCustomTemplateIds=function(t){var e={};return i.dynamicDot.requiresDynamicDot()?(e["nm-id-form-or_nls-vvega-nls-page-vvega-nls-foreword-tpl"]=!0,e["nm-id-form-tdrdeal-vvega-enquiry-dealer-page-form-tpl"]=!0,e["nm-id-form-or_nls-vvega-nls-page-vvega-nls-foreword-tpl"]=!0,e["nm-id-form-tdrdealerreq-vvega-probe-request-page-Item-VehicleConfigurationInterest-VehicleCarlineInterest-tpl"]=!0):jQuery(t).each((function(){e[jQuery(this).attr("id")]=!0})),e},Wt.blockForm=function(t){var e=jQuery("#"+t.id);e.find(".nm-form-shader").height(e.height()+"px").show()},Wt.handleFormAsync=function(t,e){return new Promise(n=>{var r={};let o=!0;!1===(t=Gt.responseToObj(t))?Wt.displayStandardError(e.id):t.form?(jQuery("#"+e.id).off("blur, click, change"),jQuery("#"+e.id+" button[data-button-action]").off("click"),o=!1,zt[e.id]=new Wt.Form(t,Vt),zt[e.id].initializeFormAsync().then(()=>{jQuery("#"+t.form.id).html("").append(zt[e.id].el),Wt.scrollToTop(e.id),n(zt[e.id])})):t.success?(r.formHeadline=e.data.form.name,r.message=t.message,jQuery("#"+e.id).html(e.getSuccessString(r)),jQuery("#"+e.id).attr("data-form-is-finished",1),Wt.eventBus.emit(i.appEvents.FORM_FINISHED,{id:e.id}),t.configuration&&p.a.handleExternalConfiguration(t,{startType:null}),delete zt[e.id]):(Wt.displayStandardError(e.id),delete zt[e.id]),o&&(Wt.scrollToTop(e.id),n(e.id))})},Wt.scrollToTop=function(t){jQuery("#"+t).closest(".nm-layer-wrapper").length?jQuery(".nm-layer-wrapper").scrollTop(0):jQuery("body").scrollTop(0)},Wt.displayStandardError=function(t){var e=jQuery("#"+t),n=e.find(".nm-form-shader"),i=e.find(".nm-form-standard-error");n.hide(),e.html(i.html())},Wt.getUrl=function(t,e){var n=s.a.getPrString(),i=s.a.getContext(),r=s.a.getSubsessionID(),o=!!s.a.getCarline(),a=[];return i&&a.push("context="+i),r&&a.push("subsession="+r),("tdrdealerreq"===e&&o&&n||"tdrdealerreq"!==e&&n)&&a.push("ids="+encodeURIComponent(n)),a.push("action="+encodeURIComponent(t)),a.push("id="+encodeURIComponent(e)),Nt+"?"+a.join("&")},Wt.parseData=function(t){var e;try{e=JSON.parse(t)}catch(t){return!1}return e},Wt.getTemplateFuncAsync=function(){let t,e,n=this.templateKey||null,r=function(){return""};if(null===n)return Promise.resolve(r);if(t=Wt.getTemplateId(this,n),void 0===Ht[t]){if(i.dynamicDot.requiresDynamicDot())return new Promise((e,n)=>{i.dynamicDot.getTemplateFromBackend(t).then(n=>{Ht[t]=nt.doT.template(n),e(Ht[t])}).catch(e=>{console.error("Error reading dot-template with id: "+t,e),n(e)})});if(e=document.querySelector("#"+t),!e||!e.innerHTML)return Promise.resolve(r);Ht[t]=nt.doT.template(e.innerHTML.trim())}return Promise.resolve(Ht[t])},Wt.sanitizeId=function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},Wt.getTemplateId=function(t,e){var n,i,r="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};if(e=e.toLowerCase(),void 0!==t.id){if(n=Wt.sanitizeId(t.id),void 0!==(i=Qt[o.id+"-"+n]))return i;if(void 0!==a[i=r+o.id+"-"+o.pageId+"-"+n+"-tpl"])return i;if(void 0!==a[i=r+o.id+"-"+n+"-tpl"])return i}return"Form"===t.formConstructorName&&void 0!==(i=Qt[o.id+"-"+o.pageId])?i:(i=r+o.id+"-"+e+"-tpl",void 0!==Qt[o.id+"-"+e]||void 0!==a[i=r+o.id+"-"+o.pageId+"-"+e+"-tpl"]||void 0!==a[i=r+o.id+"-"+e+"-tpl"]?i:i=r+e+"-tpl")},Wt.Form=function(t,e){return this.formConstructorName="Form",this.data=t,this.id=t.form?t.form.id:void 0,this.domId=Wt.sanitizeId(this.id),this.customTemplateIds=e||{},this.templateKey="form",this.groups=[],this.fields=[],this.pageId=this.getPageId(),this.processSteps=this.getProcessSteps(),this.processStepName=this.getStepHeadline(),this},Wt.Form.prototype.initializeFormAsync=function(){return new Promise((t,e)=>{const n=[];n.push(this.processGroupsAsync()),n.push(this.getTemplateFuncAsync()),n.push(this.getSuccessTemplateFuncAsync()),Promise.all(n).then(e=>{const[n,i,r]=e;this.getString=i,this.getSuccessString=r,this.load(),t()}).catch(t=>{console.error("Error initializing form",t),e(t)})})},Wt.Form.prototype.getPageId=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return this.data.pages[t].id;return null},Wt.Form.prototype.getStepHeadline=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return this.data.pages[t].name;return null},Wt.Form.prototype.getProcessSteps=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return{step:t+1,maxSteps:this.data.pages.length};return null},Wt.Form.prototype.getSuccessTemplateFuncAsync=function(){var t,e="nm-id-form-success-tpl";if(void 0===Ht[e]){if(i.dynamicDot.requiresDynamicDot())return new Promise((t,n)=>{i.dynamicDot.getTemplateFromBackend(e).then(n=>{Ht[e]=nt.doT.template(n),t(Ht[e])}).catch(t=>{console.error("Error reading dot-template with id: "+e,t),n(t)})});if(!(t=document.querySelector("#"+e))||!t.innerHTML)return Promise.resolve((function(){return""}));Ht[e]=nt.doT.template(t.innerHTML.trim())}return Promise.resolve(Ht[e])},Wt.Form.prototype.getTemplateFuncAsync=Wt.getTemplateFuncAsync,Wt.Form.prototype.processGroupsAsync=function(){var t,e,n;return new Promise(i=>{if(this.data.form&&this.data.form.groups){const r=[];for(t=0,e=this.data.form.groups.length;t<e;t++)n=new Ut(this.data.form.groups[t],this),r.push(n.initializeGroupAsync()),this.groups.push(n);Promise.allSettled(r).then(()=>{i(this.groups)})}else i(this.groups)})},Wt.Form.prototype.load=function(){var t,e;e={formHeadline:this.data.form.name,pageDisclaimers:this.data.form.disclaimers,pageHeadline:this.data.form.headline,pageDescription:this.data.form.description,pageError:this.data.form.error,groups:this.groups,pages:this.data.pages,id:this.data.form.id,actions:this.data.form.actions},void 0===(t=jQuery("#"+this.data.form.id)).attr("data-form-is-first-view")?t.attr("data-form-is-first-view",1):t.attr("data-form-is-first-view",0),void 0!==this.data.form.footnote&&(e.footnote=this.data.form.footnote),this.processSteps&&(t.attr("data-form-process-step",this.processSteps.step),t.attr("data-form-process-max",this.processSteps.maxSteps)),this.processStepName&&t.attr("data-form-process-name",this.processStepName),this.el=jQuery(this.getString(e));let n=this;window.setTimeout((function(){n.bindActions(),n.bindActionLinks(),n.preventSubmit(),Wt.eventBus.emit(i.appEvents.FORM_LOADED,{id:n.id,form:n})}),100)},Wt.Form.prototype.preventSubmit=function(){jQuery("#"+this.id+" form").on("submit",(function(t){return t.preventDefault(),!1}))},Wt.Form.prototype.bindActions=function(){var t=this;jQuery("#"+this.id+" button[data-button-action]").on("click",(function(e){var n,i,r;e.preventDefault(),i=(n=jQuery(e.target)).attr("data-button-action"),r=n.attr("data-form-id"),"cancel"===i&&n.addClass("nm-button-cancel"),r===t.id&&i&&(Wt.blockForm(t),t.serializeAndSend(i,t.id))}))},Wt.Form.prototype.bindActionLinks=function(){var t=this;jQuery("#"+this.id+" .nm-form-action-link").on("click",".nm-form-action-link",(function(e){e.preventDefault(),t.serializeAndSend(jQuery(this).attr("data-form-action"),t.id)}))},Wt.Form.prototype.disableButtons=function(){var t,e,n;if(this.data&&this.data.form&&this.data.form.actions)for(t=0,e=this.data.form.actions.length;t<e;t++)!0===(n=this.data.form.actions[t]).disable_on_change&&jQuery('button[data-button-action="'+n.action+'"]').hide()},Wt.Form.prototype.changed=function(){this.disableButtons()},Wt.Form.prototype.autoSubmit=function(t){var e=t||"submit";Wt.blockForm(this),this.serializeAndSend(e,this.id)},Wt.Form.prototype.serializeAndSend=function(t,e){var n,i,r=jQuery("#"+e+" form"),o=Wt.getUrl(t,e),a=r.serializeArray(),s=a.length,l=[],c=this,u=[];for(i=0;i<s;i+=1)-1!==a[i].name.indexOf("DateTime-")?(void 0===u[n=a[i].name.slice(9,a[i].name.length-2)]&&(u[n]=[]),u[n].push(a[i].value)):l.push(a[i]);for(var d in u)u.hasOwnProperty(d)&&"0"!==u[n][0]&&"0"!==u[n][1]&&"0"!==u[n][2]&&(n=u[n].reverse().join("-"),l.push({name:d,value:n}));const m=l.reduce((t,e,n)=>t+(n>0?"&":"")+e.name+"="+e.value,"");return fetch(o,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:m,credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(t=>Wt.handleFormAsync(t,c)).catch(()=>{Wt.displayStandardError(c)})},Gt.responseToObj=function(t){if(!t)return!1;if("object"==typeof t)return t;try{return JSON.parse(t)}catch(t){return!1}},Gt.layerLoadHandler=function(t){jQuery(t).find(".nm-form").each((function(){Wt.initFormAsync(jQuery(this))}))},Gt.processNavHandler=function(t){var e,n=jQuery(t.target);t.preventDefault(),"true"===n.attr("data-selectable")&&(e=n.parents(".nm-form").attr("id"),Gt.getForm(e).serializeAndSend(n.attr("data-action"),e))},Gt.addInitData=function(t,e){qt[t]=e},Gt.getForm=function(t){return zt[t]},Wt.initialize=function(){var t;Nt=SETUPS.get("nemo.url.formapi"),Qt=SETUPS.get("nemo.form.templatemap"),Vt=Wt.getCustomTemplateIds(".nm-custom-form-tpl"),Wt.eventBus.on(i.appEvents.LAYER_LOADED,(function(t){t&&t.element&&Gt.layerLoadHandler(t.element)})),jQuery("body .nm-process-navigation a").on("click",Gt.processNavHandler),Wt.bindEnablers(),(t=jQuery(".nm-layer-wrapper")).length&&Gt.layerLoadHandler(t)},Gt.initialize=function(t){Wt.eventBus=t,Wt.legacyEventBus=jQuery("body"),Wt.initialize()};const Yt={},$t={__:Yt};Yt.instance=!1,Yt.oDefaults={sDropdownSelectionClass:"nm-at-select-default-val"},Yt.addEvents=function(){Yt.eventBus.on(i.appEvents.PAGE_LOADED,Yt.onPageLoaded),Yt.eventBus.on(i.appEvents.FORM_LOADED,Yt.onFormLoaded),Yt.handleSelectChanges()},Yt.onPageLoaded=function(){Yt.handleSelectChanges()},Yt.onFormLoaded=function(){Yt.handleSelectChanges()},Yt.handleSelectChanges=function(t){var e=jQuery("select");jQuery.each(e,(function(){var t=jQuery(this);Yt.legacyEventBus.on("change.select",Yt.updateSelect),Yt.setSelectState(t)}))},Yt.updateSelect=function(t){var e=jQuery(t.target);Yt.setSelectState(e)},Yt.setSelectState=function(t){var e,n,i,r=t.find("option:selected");jQuery.each(r,(function(){n=jQuery(this),e=n.val(),i=void 0!==n.attr("data-is-default"),n.parent().toggleClass(Yt.oDefaults.sDropdownSelectionClass,e&&"*"===e||i)}))},Yt.initialize=function(){Yt.addEvents(),Yt.handleSelectChanges()},$t.initialize=function(t){Yt.eventBus=t,Yt.legacyEventBus=jQuery("body"),Yt.initialize()};const Kt=".nm-j-simpleform",Xt={},Jt={__:Xt};Xt.scanSource=function(t){[...t.querySelectorAll(Kt)].forEach(t=>Xt.initForm(t))},Xt.initForm=function(t){const e=t.getAttribute("id"),n=t.querySelector("form");n.addEventListener("submit",t=>{t.preventDefault(),Xt.onSubmit(e,n)})},Xt.onSubmit=function(t,e){let n=Xt.serializeForm(e);if("audicode-input"===t){n.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i)&&(n="audicode="+n.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i)[1].toUpperCase())}Xt.call(t,n)},Xt.serializeForm=function(t){return[...new FormData(t)].reduce((t,e)=>(t?t+"&":"")+e[0]+"="+e[1],"")},Xt.getUrl=function(t){const e=[],n=s.a.getContext();n&&e.push("context="+n);const i=s.a.getSubsessionID();i&&e.push("subsession="+i);const r=s.a.getPrString();r&&e.push("ids="+encodeURIComponent(r));let o=SETUPS.get("nemo.url.form."+t);return o+=-1===o.indexOf("?")?"?":"&",o+e.join("&")},Xt.call=async function(t,e){const n=document.getElementById(t);n.classList.add("nm-j-simpleform-loading"),n.classList.remove("nm-j-simpleform-error","nm-j-simpleform-success");const i=n.getAttribute("data-dpu-form-id")||t,r=Xt.getUrl(i),o=r+(r.indexOf("?")<0?"?":"&")+e;return await fetch(o,{credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(e=>{Xt.handleSuccess(e,t,i)}).catch(t=>console.log("Error fetching simple-form request - server responded with: ",t))},Xt.handleSuccess=function(t,e,n){const r=document.getElementById(e);let o=Gt.responseToObj(t);if(!o||!o[n])return Xt.handleFail(o,e,n);2===Math.floor(o[n].statuscode/100)?([...r.querySelectorAll(".nm-error")].forEach(t=>t.innerHTML=""),o[n].message&&[...r.querySelectorAll(".nm-success")].forEach(t=>t.innerHTML=o[n].message),r.classList.remove("nm-j-simpleform-error"),r.classList.add("nm-j-simpleform-success"),Xt.eventBus.trigger(i.appEvents.FORM_FINISHED,{id:e,response:o}),r.setAttribute("data-form-is-finished","1"),"audicode-input"===e&&(i.router.open("page",s.a.getCurrentCarlineUrl()),document.querySelector(".nm-j-layer-close-button").click())):(Xt.handleFail(o,e,n),Xt.eventBus.emit(i.appEvents.FORM_ERROR,{id:e,response:o})),r.classList.remove("nm-j-simpleform-loading")},Xt.handleFail=function(t,e,n){const i=document.getElementById(e),r=Xt.isDefaultErrorWithDpuMessage(t,e,n)?t[n].message:Xt.getFormErrorMessage(t),o=i.querySelectorAll(".nm-error");o&&[...o].forEach(t=>t.innerHTML=r),i.classList.add("nm-j-simpleform-error"),i.classList.remove("nm-j-simpleform-success","nm-j-simpleform-loading"),console.log("form/simple.handleFail",r)},Xt.isDefaultErrorWithDpuMessage=function(t,e,n){return!!(t&&t.header.error&&"DEFAULT"===t.header.error.id&&n&&t[n]&&t[n].message)},Xt.getFormErrorMessage=function(t){return t.login&&!t.login.success?s.a.getErrorMessage("LOGIN_FAILED"):s.a.getErrorMessage(t.header.error)},Xt.addEvents=function(){Xt.eventBus.on(i.appEvents.LAYER_LOADED,(function(t){t&&t.element&&Xt.scanSource(t.element)})),Xt.scanSource(document)},Jt.initialize=function(t){Xt.eventBus=t,Xt.addEvents()};const Zt={},te={__:Zt};Zt.addEvents=function(){Zt.eventBus.on(i.appEvents.VERSION_LOAD_COMPLETE,Zt.setHiddenItemsFromVersionResponse),Zt.eventBus.on(i.appEvents.PAGE_LOADED,Zt.setHiddenItemsFromVersionResponse),Zt.eventBus.on(i.appEvents.LAYER_LOADED,Zt.setHiddenItemsFromVersionResponse)},Zt.setHiddenItemsFromVersionResponse=function(t){var e,n,i=t&&t.domElement?t.domElement:document,r=a.dom.getElementsArray(".nm-j-configurator-item",i),o=s.a.getHiddenItemIDsFromVersion();if(o&&null!==o)for(e=0;e<o.length;e++)for(n=0;n<r.length;n++)o[e]===r[n].getAttribute("data-configurator-id")&&r[n].setAttribute("data-visibility","hidden")},te.initialize=function(t){Zt.eventBus=t,Zt.addEvents()};const ee={},ne={__:ee};ee.oDefaults={sSelectorDelegateClick:".nm-infobox",sSelectorInfoboxContainer:".nm-infobox-container",sToggleClass:"nm-infobox-show"},ee.clickedElement=null,ee.handleOutsideClick=function(t){var e=a.dom.getElement(ee.oDefaults.sSelectorInfoboxContainer,ee.clickedElement);e.classList.contains(ee.oDefaults.sToggleClass)&&a.dom.isElementOutsideOfElementWithSelector(t.target,ee.oDefaults.sSelectorDelegateClick)&&(ee.domEventDelegate.off("click",ee.handleOutsideClick),ee.closeInfoBox(e),ee.clickedElement=null)},ee.handleToggleClick=function(){var t=a.dom.getElement(ee.oDefaults.sSelectorInfoboxContainer,this);ee.clickedElement=this,t.classList.contains(ee.oDefaults.sToggleClass)?ee.closeInfoBox(t):(t.classList.add(ee.oDefaults.sToggleClass),ee.registerOutsideClickEvent())},ee.registerOutsideClickEvent=function(){ee.domEventDelegate.on("click","*",ee.handleOutsideClick)},ee.closeInfoBox=function(t){t.classList.remove(ee.oDefaults.sToggleClass)},ee.addEvents=function(){ee.domEventDelegate.on("click",ee.oDefaults.sSelectorDelegateClick,ee.handleToggleClick)},ee.initialize=function(){ee.init||ee.addEvents(),ee.init=!0},ne.initialize=function(t){ee.eventBus=t,ee.domEventDelegate=a.dom.getEventDelegate("body"),ee.initialize()};const ie={},re={__:ie};ie.oDefaults={sAttributeInitialCaption:"data-initialcaption",sAttributePrNumber:"data-partprnumber",sClassAozActive:"nm-aoz-active",sClassAozButton:"nm-aoz-btn",sClassAozDescription:"nm-aoz-description",sClassAozTyreLabel:"nm-aoz-tyre-label",sClassAozHintText:"nm-aoz-hinttext",sClassAozInvisible:"nm-aoz-invisible",sClassAozItem:"nm-aoz-item",sClassAozModule:"nm-md-aoz",sClassAozPrice:"nm-aoz-price",sSelectorAozButton:".nm-aoz-btn a",sSelectorAozItem:".nm-aoz-item",selectorModul:".nm-md-aoz",selectorStripe:".nm-aoz-stripe",classShowPrevArrow:"nm-j-aoz-show-prev-arrow",classShowNextArrow:"nm-j-aoz-show-next-arrow",classPrevButton:"nm-aoz-stripe-prev",selectorArrowButton:".nm-aoz-stripe-navigation-item",selectorPrevButton:".nm-aoz-stripe-prev",selectorNextButton:".nm-aoz-stripe-next",selectorStripeContainer:".nm-aoz-stripe-container",selectorStripeWrap:".nm-aoz-stripe-wrap",selectorStripeList:".nm-aoz-stripe > ul",selectorStripeItem:".nm-aoz-item"},ie.scrollDuration=500,ie.addEvents=function(){ie.eventBus.on(i.appEvents.PAGE_LOADED,ie.handleSelectionUpdated),ie.eventBus.on(i.appEvents.CONFIG_UPDATE,ie.handleSelectionUpdated),ie.domEventDelegate.on("scroll",ie.oDefaults.selectorStripe,ie.stripeScrollHandler),ie.domEventDelegate.on("click",ie.oDefaults.sSelectorAozItem,ie.toggleItem),ie.domEventDelegate.on("click",ie.oDefaults.sSelectorAozButton,ie.toggleConfigItem),ie.domEventDelegate.on("click",ie.oDefaults.selectorPrevButton,ie.handlePrevNextClick),ie.domEventDelegate.on("click",ie.oDefaults.selectorNextButton,ie.handlePrevNextClick),window.addEventListener("resize",ie.resizeModule)},ie.resizeModule=function(){var t,e;a.dom.getElementsArray(ie.oDefaults.selectorModul).forEach((function(n){a.dom.getElement(ie.oDefaults.selectorStripeContainer,n),(t=a.dom.getElement(ie.oDefaults.selectorStripe,n))&&(e=a.dom.closest(t,ie.oDefaults.selectorStripeWrap),ie.hideNavigationArrows(e))}))},ie.handlePrevNextClick=function(t){var e="next",n=a.dom.closest(t.target,ie.oDefaults.selectorArrowButton);n&&(n.classList.contains(ie.oDefaults.classPrevButton)&&(e="prev"),ie.translateStripe(n,e))},ie.translateStripe=function(t,e){var n,i,r=a.dom.getElement(ie.oDefaults.selectorStripeContainer,ie.getCurrentModule(t)),o=a.dom.closest(t,ie.oDefaults.selectorStripeWrap),s=a.dom.getElement(ie.oDefaults.selectorStripe,o),l=a.dom.getElement(ie.oDefaults.selectorStripeList,o);l.clientWidth>r.clientWidth&&(o.classList.remove(ie.oDefaults.classShowPrevArrow),o.classList.remove(ie.oDefaults.classShowNextArrow),n=ie.calculateNewScrollPosition(r,s.scrollLeft,e,l.clientWidth),i=ie.calculateScrollDuration(r,s.scrollLeft,n),a.dom.animateElementX(n,s,i).then((function(){ie.hideNavigationArrows(o)})))},ie.getCurrentModule=function(t){return t?a.dom.closest(t,ie.oDefaults.selectorModul):null},ie.calculateScrollDuration=function(t,e,n){return ie.scrollDuration*(Math.abs(e-n)/t.clientWidth)},ie.calculateNewScrollPosition=function(t,e,n,i){var r=t.clientWidth;return"next"===n?Math.min(e+r,i-r):Math.max(0,e-r)},ie.hideNavigationArrows=function(t){var e=t,n=a.dom.getElement(ie.oDefaults.selectorStripe,e),i=a.dom.getElementsArray(ie.oDefaults.selectorStripeItem,e),r=a.dom.getElement(ie.oDefaults.selectorStripeList,e);0!==i.length&&(n.scrollLeft>10?e.classList.add(ie.oDefaults.classShowPrevArrow):e.classList.remove(ie.oDefaults.classShowPrevArrow),e.clientWidth+n.scrollLeft<r.clientWidth-10?e.classList.add(ie.oDefaults.classShowNextArrow):e.classList.remove(ie.oDefaults.classShowNextArrow))},ie.stripeScrollHandler=function(t){var e=t.target,n=a.dom.closest(e,ie.oDefaults.selectorStripeWrap);n&&ie.hideNavigationArrows(n)},ie.toggleItem=function(t){var e=ie.getClosestElementWithClass(t.target,ie.oDefaults.sClassAozModule),n=ie.getClosestElementWithClass(t.target,ie.oDefaults.sClassAozItem);t.preventDefault(),t.stopPropagation(),e&&n&&(n.classList.contains(ie.oDefaults.sClassAozActive)?ie.unsetSelection(e):ie.setNewSelection(e,n)),ie.handleSelectionUpdated()},ie.toggleConfigItem=function(t){var e=ie.getClosestElementWithClass(t.target,ie.oDefaults.sClassAozModule),n=e.getElementsByClassName(ie.oDefaults.sClassAozActive)[0];n.getAttribute(ie.oDefaults.sAttributePrNumber).split(" ").join("_");t.preventDefault(),ie.updateButtonWrapperClass(e,n)},ie.retrievePrNumbersToFilter=function(t){var e,n,i=t.getElementsByClassName(ie.oDefaults.sClassAozItem),r=[];for(e=0,n=i.length;e<n;e++)r.push(i[e].getAttribute("data-configurator-id"));return r},ie.updateRenderImage=function(t,e){var n,i,r,o,a,l=[],c=[],u=t.getElementsByClassName("nm-j-configurator-renderimage"),d=ie.retrievePrNumbersToFilter(t);for(n=0,i=u.length;n<i;n++)c.push(u[n].getAttribute("data-renderimage-type")),r=u[n].getAttribute("data-renderimage-view"),l.indexOf(r)<=-1&&l.push(r);s.a.sendRenderServiceRequest(d,e,l.join(","),c.join(",")).then((function(t){for(n=0,i=u.length;n<i;n++)o=u[n].getAttribute("data-renderimage-type"),r=u[n].getAttribute("data-renderimage-view"),a=t["render-results"][e][r][o],u[n].setAttribute("style","background-image: url("+a+")")}))},ie.resetRenderImage=function(t){var e,n,i,r=t.getElementsByClassName("nm-j-configurator-renderimage");for(e=0,n=r.length;e<n;e++)i=r[e].getAttribute("data-url"),r[e].setAttribute("style","background-image: url("+i+")")},ie.getClassBySubstring=function(t,e){var n,i,r=!1;for(n=0,i=t.classList.length;n<i;n++)if(t.classList[n].indexOf(e)>-1){r=t.classList[n];break}return r},ie.updateButtonWrapperClass=function(t,e){var n=t.getElementsByClassName(ie.oDefaults.sClassAozButton)[0],i=ie.getClassBySubstring(e,"nm-j-configurator-status_"),r=ie.getClassBySubstring(n,"nm-j-configurator-status_");r&&n.classList.remove(r),i&&n.classList.add(i),ie.updateButtonTrackingAttributes(t,e)},ie.updateButtonTrackingAttributes=function(t,e){var n=t.getElementsByClassName("nm-el-btn")[0],i=e.getAttribute("data-name"),r=e.getAttribute("data-familygroup"),o=e.getAttribute("data-family");i=""!==o?o+":"+i:i,i=(i=""!==r?r+":"+i:i).replace(/"/g,'\\"'),n.parentNode.setAttribute("data-configurator-id",e.getAttribute("data-configurator-id"))},ie.updateDescription=function(t,e){var n=t.getElementsByClassName(ie.oDefaults.sClassAozDescription)[0];n.innerHTML=!1===e?n.getAttribute(ie.oDefaults.sAttributeInitialCaption):e},ie.updateTyreLabel=function(t,e){const n=t.getElementsByClassName(ie.oDefaults.sClassAozTyreLabel)[0];if(e){n.innerHTML=`<feature-app\n\t\t\tid="tyre-label-link:aoz-inlinerendering:${e}"\n\t\t\tbase-url="https://featureapps.audi.com/audi-feature-app-tyre-label-link/1/"\n\t\t\tsrc="audi-feature-app-tyre-label-link.js"\n\t\t\tserver-src="audi-feature-app-tyre-label-link.commonjs.js"\n\t\t\tconfig='{"optionId": "${e}"}'>\n\t\t</feature-app>`;const t=new CustomEvent("content:rendered",{detail:{element:n}});document.dispatchEvent(t)}else n.innerHTML=""},ie.updatePrice=function(t,e){t.getElementsByClassName(ie.oDefaults.sClassAozPrice)[0].innerHTML=e},ie.updateHintText=function(t,e){t.getElementsByClassName(ie.oDefaults.sClassAozHintText)[0].innerHTML=e},ie.unsetSelection=function(t){ie.removeClassFromElementsWithClassWithinDomFragment(t,ie.oDefaults.sClassAozItem,ie.oDefaults.sClassAozActive),ie.updateDescription(t,!1),ie.updateTyreLabel(t,!1),ie.updatePrice(t,"&nbsp;"),ie.updateHintText(t,"&nbsp;"),ie.addClassToElementsWithClassWithinDomFragment(t,ie.oDefaults.sClassAozButton,ie.oDefaults.sClassAozInvisible),ie.resetRenderImage(t)},ie.setNewSelection=function(t,e){ie.updateDescription(t,e.getAttribute("data-name")),ie.updateTyreLabel(t,e.getAttribute("data-configurator-id")),ie.updatePrice(t,e.getAttribute("data-price")),ie.updateHintText(t,e.getAttribute("data-hinttext")),ie.removeClassFromElementsWithClassWithinDomFragment(t,ie.oDefaults.sClassAozItem,ie.oDefaults.sClassAozActive),e.classList.add(ie.oDefaults.sClassAozActive),ie.removeClassFromElementsWithClassWithinDomFragment(t,ie.oDefaults.sClassAozButton,ie.oDefaults.sClassAozInvisible),ie.updateButtonWrapperClass(t,e)},ie.getClosestElementWithClass=function(t,e){for(var n=t;n.classList&&!n.classList.contains(e);){if(!n.parentNode)return!1;n=n.parentNode}return!!n.parentNode&&n},ie.removeClassFromElementsWithClassWithinDomFragment=function(t,e,n){var i,r,o=t.getElementsByClassName(e);for(i=0,r=o.length;i<r;i++)o[i].classList.remove(n)},ie.addClassToElementsWithClassWithinDomFragment=function(t,e,n){var i,r,o=t.getElementsByClassName(e);for(i=0,r=o.length;i<r;i++)o[i].classList.add(n)},ie.updateStatusClass=function(t,e){var n=ie.getClassBySubstring(t,"nm-j-configurator-status_");t.classList.remove(n),t.classList.add("nm-j-configurator-status_"+e)},ie.handleSelectionUpdated=function(){var t,e,n,i,r,o=document.body.getElementsByClassName(ie.oDefaults.sClassAozItem);for(t=0,e=o.length;t<e;t++)i=o[t].getAttribute(ie.oDefaults.sAttributePrNumber).split(" ").join("_"),(n=s.a.getItem(i)).status&&ie.updateStatusClass(o[t],n.status),o[t].classList.contains(ie.oDefaults.sClassAozActive)&&(r=ie.getClosestElementWithClass(o[t],ie.oDefaults.sClassAozModule),ie.updateRenderImage(r,i))},re.initialize=function(t){ie.eventBus=t,ie.domEventDelegate=a.dom.getEventDelegate("body"),ie.addEvents(),ie.handleSelectionUpdated()};const oe={},ae={__:oe};oe.oDefaults={sIdCanvas:"nm-ave-canvas",sClassActive:"nm-active",sClassLoading:"nm-3d-loading",sClassUnLoading:"nm-3d-unloading",sClassAVECandidate:"nm-ave-candidate",sClassModeAuto:"nm-md-in-mode-automatic",sClassLandscapeWrapper:"nm-md-in-landscape-wrapper",sClassPortraitWrapper:"nm-md-in-portrait-wrapper",sSelectorInlineRenderingModule:".nm-md-inline-rendering",sSelectorAVEContainer:".nm-md-ave-container",sSelectorAVEContainerActive:".nm-md-ave-container.nm-active",sSelectorInlineRendering:".nm-j-configurator-renderimage",sSelectorInlineRenderingButton360:".nm-md-inline-rendering .nm-icon-360-view",sSelectorInlineRenderingButton2d:".nm-md-inline-rendering .nm-icon-2d-view",sSelectorButton360:".nm-icon-360-view",sSelectorButton2d:".nm-icon-2d-view",sSelectorAVECandidate:".nm-ave-candidate",sSelectorLandscapeWrapper:".nm-md-in-landscape-wrapper",sSelectorPortraitWrapper:".nm-md-in-portrait-wrapper",sSelectorLoading:".nm-3d-loading"},oe.addEvents=function(){oe.eventBus.on(i.appEvents.AVE_AVAILABLE,oe.handlerEnable360),oe.eventBus.on(i.appEvents.PAGE_LOADED,oe.handlerPageLoaded),oe.eventBus.on(i.appEvents.AVE_STREAM_READY,oe.aveStreamReadyHandler),oe.eventBus.on(i.appEvents.PAGE_OPEN,oe.handlerPageOpen)},oe.handlerPageLoaded=function(t){var e;!0===k.isAveAvailable()&&((e=jQuery(t.domElement)).find(oe.oDefaults.sSelectorInlineRenderingButton360).is(":visible")||(e.find(oe.oDefaults.sSelectorInlineRenderingButton360).show(),e.find(oe.oDefaults.sSelectorInlineRenderingButton360).off("click",oe.handlerActivate3d),e.find(oe.oDefaults.sSelectorInlineRenderingButton2d).off("click",oe.handlerActivate2d),e.find(oe.oDefaults.sSelectorInlineRenderingButton360).on("click",oe.handlerActivate3d),e.find(oe.oDefaults.sSelectorInlineRenderingButton2d).on("click",oe.handlerActivate2d)))},oe.handlerEnable360=function(){!0===k.isAveAvailable()&&(jQuery(oe.oDefaults.sSelectorInlineRenderingButton360).is(":visible")||(jQuery(oe.oDefaults.sSelectorInlineRenderingButton360).show(),jQuery(oe.oDefaults.sSelectorInlineRenderingButton360).off("click",oe.handlerActivate3d),jQuery(oe.oDefaults.sSelectorInlineRenderingButton2d).off("click",oe.handlerActivate2d),jQuery(oe.oDefaults.sSelectorInlineRenderingButton360).on("click",oe.handlerActivate3d),jQuery(oe.oDefaults.sSelectorInlineRenderingButton2d).on("click",oe.handlerActivate2d)))},oe.handlerPageOpen=function(){var t=jQuery(oe.oDefaults.sSelectorAVEContainerActive);t.length>0&&(oe.setContainerTo2d(t),k.deactivate(t.attr("id")))},oe.handlerActivate3d=function(t){var e=jQuery(t.currentTarget),n=jQuery(oe.oDefaults.sSelectorAVEContainerActive),i=e.parent().parent();t.preventDefault(),oe.activate3dForContainer(i,n),oe.enableResizeHandler()},oe.activate3dForContainer=function(t,e){var n=t.find(oe.oDefaults.sSelectorInlineRendering),i=t.children(oe.oDefaults.sSelectorAVEContainer).attr("id"),r=n.attr("data-renderimage-view");oe.setContainerTo2d(e),oe.setContainerTo3d(t,e),e.length>0?(k.moveAVE(e.attr("id"),i,r),oe.removeLoadingImg(jQuery(oe.oDefaults.sSelectorAVECandidate))):k.activateAVE(i,r)},oe.setContainerTo3d=function(t){var e=t.find(oe.oDefaults.sSelectorInlineRendering),n=t.children(oe.oDefaults.sSelectorAVEContainer);t.find(oe.oDefaults.sSelectorButton360).hide(),t.find(oe.oDefaults.sSelectorButton2d).show(),e.addClass(oe.oDefaults.sClassLoading),e.addClass(oe.oDefaults.sClassAVECandidate),n.addClass(oe.oDefaults.sClassActive)},oe.handlerActivate2d=function(t){var e=jQuery(oe.oDefaults.sSelectorAVEContainerActive);t.preventDefault(),oe.setContainerTo2d(e),k.deactivate(e.attr("id"))},oe.setContainerTo2d=function(t){t.length>0&&(t.parent().find(oe.oDefaults.sSelectorButton2d).hide(),t.parent().find(oe.oDefaults.sSelectorButton360).show(),setTimeout((function(){t.next().removeClass(oe.oDefaults.sClassUnLoading)}),1e3),t.parent().find(oe.oDefaults.sSelectorInlineRendering).removeClass(oe.oDefaults.sClassLoading),t.parent().find(oe.oDefaults.sSelectorInlineRendering).removeClass(oe.oDefaults.sClassAVECandidate),t.removeClass(oe.oDefaults.sClassActive))},oe.removeLoadingImg=function(t){console.log("removeLoadingImg"),t.addClass(oe.oDefaults.sClassUnLoading),t.removeClass(oe.oDefaults.sClassLoading)},oe.triggerSwipeTracker=function(t){t.target.closest(".nm-ave-animation-selector-wrapper")},oe.aveStreamReadyHandler=function(){var t=jQuery(oe.oDefaults.sSelectorAVEContainerActive);oe.removeLoadingImg(jQuery(oe.oDefaults.sSelectorLoading)),t.length>0&&(t.off("mousedown",oe.triggerSwipeTracker),t.off("touchstart",oe.triggerSwipeTracker),t.on("mousedown",oe.triggerSwipeTracker),t.on("touchstart",oe.triggerSwipeTracker))},oe.enableResizeHandler=function(){jQuery(window).off("resize",oe.handlerResize),jQuery(window).on("resize",oe.handlerResize)},oe.handlerResize=function(){var t,e=jQuery(oe.oDefaults.sSelectorAVEContainerActive),n=e.parent().hasClass(oe.oDefaults.sClassLandscapeWrapper),i=e.parent().hasClass(oe.oDefaults.sClassPortraitWrapper);jQuery(window).width()<jQuery(window).height()&&n?t=e.closest(oe.oDefaults.sSelectorInlineRenderingModule).find(oe.oDefaults.sSelectorPortraitWrapper):jQuery(window).width()>=jQuery(window).height()&&i&&(t=e.closest(oe.oDefaults.sSelectorInlineRenderingModule).find(oe.oDefaults.sSelectorLandscapeWrapper)),t&&oe.activate3dForContainer(t,e)},ae.initialize=function(t){oe.eventBus=t,oe.addEvents()};const se={},le={__:se};se.globalEventBus=null,se.EXPIRED_THRESHOLD=72,window.audi=window.audi||{},window.audi.api=window.audi.api||{},se.isExpired=function(t){return(new Date).getTime()/216e3-t>=se.EXPIRED_THRESHOLD},se.addEvents=function(){se.globalEventBus&&se.globalEventBus.on(i.appEvents.CONFIG_UPDATE,se.handleConfigurationUpdate)},se.getLastConfiguration=function(){var t=se.getStoredConfiguration();return!(!t||!t.lastChanged)&&(!se.isExpired(t.lastChanged)&&t)},window.audi.api.lastConfiguration=se.getLastConfiguration,se.handleConfigurationUpdate=function(){var t=se.getConfigurationObject();se.hasSorage()&&t&&se.writeEntry(t)},se.hasSorage=function(){return!!se.getStorage()},se.getStorage=function(){return window.localStorage||null},se.writeEntry=function(t){var e;try{e=JSON.stringify(t),se.getStorage().setItem("lastConfiguration",e)}catch(t){console.warn(t)}},se.getConfigurationObject=function(){var t,e=s.a.getConfiguration(),n={assets:{},assetsMobile:{}},i=s.a.getConfigurationAssets();return t=s.a.getRenderUrl(),e&&!s.a.getConflicts()&&i&&0!==Object.keys(i).length?(n.assets.exterior_front=i.exterior_front&&i.exterior_front["stage.hd"]?t+i.exterior_front["stage.hd"]:"",n.assets.closeup_lights=i.closeup_lights&&i.closeup_lights["stage.hd"]?t+i.closeup_lights["stage.hd"]:"",n.assets.exterior=i.exterior&&i.exterior["stage.hd"]?t+i.exterior["stage.hd"]:"",n.assetsMobile.exterior_front=i.exterior_front&&i.exterior_front["stage.hdx"]?t+i.exterior_front["stage.hdx"]:"",n.assetsMobile.closeup_lights=i.closeup_lights&&i.closeup_lights["stage.hdx"]?t+i.closeup_lights["stage.hdx"]:"",n.assetsMobile.exterior=i.exterior&&i.exterior["stage.hdx"]?t+i.exterior["stage.hdx"]:"",n.price=e.price,n.carline=e.carline,n.carlineName=e.carlineName,n.eec=e.eec,n.lastChanged=(new Date).getTime(),n["mv-version"]=s.a.getMarketVersion(),n.context=s.a.getContext(),n.url=se.getEntryUrl(e.prstring),n):null},se.getStoredConfiguration=function(){var t=se.getStorage();if(!t||!t.lastConfiguration)return null;try{return JSON.parse(t.lastConfiguration)}catch(t){return console.warn(t),null}},se.getEntryUrl=function(t){var e;return e=window.location.href.split("#")[0],e+=e.indexOf("?")>0?"&":"?",e+="pr="+t},le.initialize=function(t){var e;return new Promise((function(n){se.globalEventBus=t,se.addEvents(),(e=parseInt(SETUPS.get("nemo.last_config.expires"),10))>0&&(se.EXPIRED_THRESHOLD=e),n("configurator/last-configuration.js")}))};const ce={},ue={__:ce};function de(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}ce.handleLayerLoaded=function(){const t=document.querySelector(".nm-md-media-library-configuration-buttons");if(t){const e=t.querySelector(".nm-md-media-library-configuration-button"),n=t.getAttribute("data-configurator-id");if(ct.a.getModelsInfo(n)){const t=s.a.getItem(n);"11010"===(null==t?void 0:t.status)&&e.classList.add("nm-md-media-library-configuration-button--inactive")}}},ce.addEvents=function(){ce.eventBus.on(i.appEvents.PAGE_LOADED,ce.handleLayerLoaded),ce.eventBus.on(i.appEvents.LAYER_LOADED,ce.handleLayerLoaded),ce.eventBus.on(i.appEvents.MODELSINFO_LOAD_COMPLETE,ce.handleLayerLoaded),ce.eventBus.on(i.appEvents.CONFIG_UPDATE,ce.handleLayerLoaded)},ue.initialize=function(t){ce.eventBus=t,ce.addEvents()},Object.setPrototypeOf(de.prototype,HTMLElement.prototype),Object.setPrototypeOf(de,HTMLElement);class me extends de{constructor(){super(),this.eventBus=i.signal.getEmitter(),this.configuration=null,this.loadConfiguration=this.loadConfiguration.bind(this),this.isExternalLink=SETUPS.get("scope.nemo.audicode.externallink"),l.stateRegistry.subscribeToStore(c.a,t=>this.getConfigurationFromState(t))}connectedCallback(){this.link=this.querySelector(".nm-j-audicode-accept"),this.link.addEventListener("click",this.loadConfiguration)}disconnectedCallback(){this.link.removeEventListener("click",this.loadConfiguration)}loadConfiguration(t){if(this.configuration){if(this.emitLoadAudicodeEvent(),this.isExternalLink)return this.hasOtherUrl()&&(this.link.href=this.configuration.audicode["other-url"]),!0;t.preventDefault(),this.hasOtherUrl()&&(window.location=this.configuration.audicode["other-url"]),this.handleExternalConfiguration(),this.closeHeaderService()}else t.preventDefault()}handleExternalConfiguration(){p.a.handleExternalConfiguration(this.configuration,{startType:"audicode-search"}).then(()=>{i.router.open("page",s.a.getCurrentCarlineUrl())})}getConfigurationFromState(t){t&&t.configuration&&(this.configuration=t.configuration)}hasOtherUrl(){return!!this.configuration&&this.configuration.audicode&&this.configuration.audicode["other-url"]&&""!==this.configuration.audicode["other-url"]}emitLoadAudicodeEvent(){this.eventBus.emit(i.appEvents.SEARCH_LOAD_AUDICODE,{audicode:this.configuration.audicode.id})}closeHeaderService(){const t=document.querySelector("header-service");t&&t.click()}}function ge(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-load-audicode-link")||window.customElements.define("audi-configurator-load-audicode-link",me),Object.setPrototypeOf(ge.prototype,HTMLElement.prototype),Object.setPrototypeOf(ge,HTMLElement);class fe extends ge{constructor(){super(),this.updateTargetParam=this.updateTargetParam.bind(this),this.handleLoginStatus=this.handleLoginStatus.bind(this),this.handleLogoutStatus=this.handleLogoutStatus.bind(this),this.logoutHandler=this.logoutHandler.bind(this),this.showLoginLink=this.showLoginLink.bind(this),this.showLogoutLink=this.showLogoutLink.bind(this),this.hideHeader=this.hideHeader.bind(this),this.showHeader=this.showHeader.bind(this),this.csrfToken=null}connectedCallback(){this.loginLinkElement=this.querySelector(".myaudi-login__link"),this.logoutLinkElement=this.querySelector(".myaudi-logout__link"),this.logoutLinkElement.addEventListener("click",this.logoutHandler),l.stateRegistry.subscribeToStore(c.a,this.updateTargetParam),this.getLoginStatus(),this.updateTargetParam(),this.loginHeadline=document.querySelector(".audi-login-headline-container")}disconnectedCallback(){this.logoutLinkElement.removeEventListener("click",this.logoutHandler)}updateTargetParam(t){const e=this.querySelector(".myaudi-login__link"),n=new URL(e.getAttribute("href")),i=new URL(window.location.href);t&&t.audicode&&i.searchParams.set("audicode",t.audicode),n.searchParams.set("target_url",i.href),e.setAttribute("href",n.href)}handleLoginStatus(t){t.loggedIn?(this.csrfToken=t.csrfToken,l.stateRegistry.triggerAction(u,"update",t),this.showLogoutLink()):this.showLoginLink()}handleLogoutStatus(t){t.logoutDone?(this.csrfToken=null,l.stateRegistry.triggerAction(u,"logout"),this.showLoginLink()):this.showLogoutLink()}getLoginStatus(){const t=SETUPS.get("myaudi.uds.url")+"loginStatus";fetch(t,{credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(this.handleLoginStatus).then(this.updateTargetParam).catch(t=>console.log("netzwerk problem/performance problem: ",t))}logoutHandler(t){t.preventDefault();const e=SETUPS.get("myaudi.uds.url")+"logout",n={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken}};fetch(e,n).then(t=>{if(t.ok)return t.json()}).then(this.handleLogoutStatus)}showLoginLink(){this.loginLinkElement.classList.remove("nm-hidden"),this.logoutLinkElement.classList.add("nm-hidden"),this.showHeader()}showLogoutLink(){this.loginLinkElement.classList.add("nm-hidden"),this.logoutLinkElement.classList.remove("nm-hidden"),this.hideHeader()}showHeader(){this.loginHeadline&&this.loginHeadline.classList.remove("nm-hidden")}hideHeader(){this.loginHeadline&&this.loginHeadline.classList.add("nm-hidden")}}function pe(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-login")&&window.customElements.define("audi-login",fe),Object.setPrototypeOf(pe.prototype,HTMLElement.prototype),Object.setPrototypeOf(pe,HTMLElement);class he extends pe{static get selectors(){return{counter:"nm-light-experience-list__item_",containers:".nm-light-experience-list__item-container",items:".nm-light-experience-list__item",visible:[":not(.nm-j-configurator-container-hide)",":not(.nm-j-configurator-status_00000)",":not(.nm-j-configurator-status_00001)",":not(.nm-j-configurator-status_00010)",":not(.nm-j-configurator-status_00011)",":not(.nm-j-configurator-status_00100)",":not(.nm-j-configurator-status_00101)",":not(.nm-j-configurator-status_00110)",":not(.nm-j-configurator-status_00111)",":not(.nm-j-configurator-status_01000)",":not(.nm-j-configurator-status_01001)",":not(.nm-j-configurator-status_01010)",":not(.nm-j-configurator-status_01011)",":not(.nm-j-configurator-status_01100)",":not(.nm-j-configurator-status_01101)",":not(.nm-j-configurator-status_01110)",":not(.nm-j-configurator-status_01111)",":not(.nm-j-configurator-status_10000)"]}}constructor(){super(),this.eventBus=i.signal.getEmitter(),this.setViewportWidth_=this.setViewportWidth.bind(this)}connectedCallback(){this.visibleSelector=he.selectors.visible.join(""),this.itemsPerRow=1,this.addEvents(),this.setViewportWidth()}disconnectedCallback(){this.removeEvents()}addEvents(){this.eventBus.on(i.appEvents.DOM_UPDATED,()=>{this.updateElements()}),this.onResizeHandler=a.dom.throttle(this.setViewportWidth.bind(this),100),window.addEventListener("resize",this.onResizeHandler)}removeEvents(){this.eventBus.off(i.appEvents.DOM_UPDATED,()=>{this.updateElements()}),window.removeEventListener("resize",this.onResizeHandler)}getItemsPerRow(){return this.viewportWidth<768?1:this.viewportWidth>=768&&this.viewportWidth<1280?2:this.viewportWidth>=1280&&this.viewportWidth<1440?3:4}setViewportWidth(){this.viewportWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0);const t=this.itemsPerRow;this.itemsPerRow=this.getItemsPerRow(),t!==this.itemsPerRow&&this.updateElements()}updateElements(){const t=[...this.querySelectorAll(he.selectors.containers)],e=he.selectors.items+this.visibleSelector;t.forEach(t=>{[...t.querySelectorAll(e)].forEach((t,e,n)=>{t.classList.remove(he.selectors.counter+"last"),e%this.itemsPerRow!=this.itemsPerRow-1&&e!==n.length-1||t.classList.add(he.selectors.counter+"last")})})}}window.customElements.get("audi-configurator-light-experience")||window.customElements.define("audi-configurator-light-experience",he);const ve={},ye={__:ve};function Se(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}ve.oDefaults={sSelectorItemLoading:".nm-j-configurator-item-loading",sItemLoadingClass:"nm-j-configurator-item-loading"},ve.showLoadingIndicator=function(t){var e=t.$element;e&&e.length&&e.addClass(ve.oDefaults.sItemLoadingClass)},ve.hideLoadingIndicator=function(){jQuery(ve.oDefaults.sSelectorItemLoading).removeClass(ve.oDefaults.sItemLoadingClass)},ve.addEvents=function(){ve.eventBus.on(i.appEvents.CONFIG_CHANGEREQUEST_START,ve.showLoadingIndicator),ve.eventBus.on(i.appEvents.CONFIG_CHANGEREQUEST_END,ve.hideLoadingIndicator)},ye.initialize=function(t){ve.eventBus=t,ve.addEvents()},Object.setPrototypeOf(Se.prototype,HTMLElement.prototype),Object.setPrototypeOf(Se,HTMLElement);class Ce extends Se{static get observedAttributes(){return["data-rate"]}static get selectors(){return{circle:".nm-offer-rate-path",text:".nm-offer-rate-value"}}static get options(){return{circle:{duration:2e3,property:"strokeDashoffset",easing:"easeInOutSine"},text:{duration:2e3,property:"innerHTML",easing:"noEasingInt"},observer:{threshold:1}}}constructor(){super()}connectedCallback(){this.initElements(),this.setInitialValues(),this.isIntersectionOberserverAvailable()?this.setupIntersectionObserver():this.startAnimations()}attributeChangedCallback(t,e,n){switch(t){case"data-rate":this.updateRate(e,n)}}updateRate(t,e){null!==t&&t!==e&&(this.initRate(),this.startAnimations())}isIntersectionOberserverAvailable(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}setupIntersectionObserver(){new IntersectionObserver(t=>{t.filter(t=>t.intersectionRatio>=Ce.options.observer.threshold).forEach(()=>this.startAnimations())},Ce.options.observer).observe(this)}initElements(){this.circle=this.querySelector(Ce.selectors.circle),this.text=this.querySelector(Ce.selectors.text),this.pathLength="function"==typeof this.circle.getTotalLength?this.circle.getTotalLength():0,this.initRate()}initRate(){this.rate=parseInt(this.getAttribute("data-rate"),10),this.rate=this.rate>100?100:this.rate}setInitialValues(){this.circle.style.strokeDasharray=this.pathLength,this.circle.style.strokeDashoffset=this.pathLength}startAnimations(){const t=this.pathLength*(1-this.rate/100);a.animate.animateElementStyleProperty(t,this.circle,Ce.options.circle),this.text&&a.animate.animateElementProperty(this.rate,this.text,Ce.options.text)}}window.customElements.get("audi-configurator-offerrate")||window.customElements.define("audi-configurator-offerrate",Ce);const Ee={},be={__:Ee};Ee.oDefaults={},Ee.pendingPromise=null,Ee.resolved=!1,Ee.eventBus=null,Ee.register=function(){ut.patternMatching.register("audicode",Ee.getAudiCode),ut.patternMatching.register("conf_audicode",Ee.getAudiCode)},Ee.getAudiCode=function(){return!Ee.resolved&&Ee.pendingPromise||(Ee.pendingPromise=Ee.fetchAudiCode().catch((function(t){return Ee.resolved=!0,Ee.pendingPromise=null,t})).then((function(t){return Ee.resolved=!0,Ee.pendingPromise=null,t}))),Ee.pendingPromise},Ee.fetchAudiCode=function(){return new Promise((function(t,e){f.loadAudiCode().then((function(e){t(e)}),(function(t){e(t),console.error(t)}))}))},be.initialize=function(){Ee.register()};var we={},De={__:we};we.oDefaults={},we.register=function(){ut.patternMatching.register("carlineID",we.getCarlineId)},we.getCarlineId=function(){var t;return new Promise((function(e,n){(t=s.a.getCarline())?e(t):n(new TypeError("load pattern -carlineID- failed"))}))},De.initialize=function(){we.register()};var _e={},Ae={__:_e};_e.oDefaults={},_e.register=function(){ut.patternMatching.register("conf_finance",_e.getConfigurationAttribute("financeProductName")),ut.patternMatching.register("conf_name",_e.getConfigurationAttribute("carlineName")),ut.patternMatching.register("conf_id",_e.getConfigurationAttribute("carline")),ut.patternMatching.register("conf_description",_e.getConfigurationAttribute("description")),ut.patternMatching.register("conf_modelyear",_e.getConfigurationAttribute("modelyear")),ut.patternMatching.register("conf_power_primary",_e.getModelInfoAttribute("power-primary")),ut.patternMatching.register("conf_power_secondary",_e.getModelInfoAttribute("power-secondary"))},_e.getConfigurationAttribute=function(t){return function(){var e=s.a.getConfiguration();return new Promise((function(n,i){e&&e[t]?n(e[t]):i(t+" was not found within the configuration")}))}},_e.getModelInfoAttribute=function(t){return function(){var e=s.a.getCurrentModelInfo();return new Promise((function(n,i){e&&e[t]?n(e[t]):i(t+" was not found within the model Info")}))}},Ae.initialize=function(){_e.register()};const Le={},ke={__:Le};Le.oDefaults={},Le.eventBus=null,Le.register=function(){ut.patternMatching.register("language",Le.getLanguage)},Le.getLanguage=function(){var t;return new Promise((function(e,n){(t=SETUPS.get("nemo.locale.language"))?e(t):n(new TypeError("load pattern -language- failed"))}))},ke.initialize=function(){Le.register()};const Te={},Ie={__:Te};Te.oDefaults={sourceName:"IPH"},Te.eventBus=null,Te.register=function(){ut.patternMatching.register("lead_source",Te.getLeadSource)},Te.getLeadSource=function(){return new Promise((function(t,e){ut.iph.inIPHMode()?t(Te.oDefaults.sourceName):e(new TypeError("load pattern -leadsource- failed"))}))},Ie.initialize=function(){Te.register()};var xe={},Pe={__:xe};xe.oDefaults={},xe.eventBus=null,xe.register=function(){ut.patternMatching.register("partnerid",xe.getPartnerId)},xe.getPartnerId=function(){var t;return new Promise((function(e,n){(t=ut.iph.inIPHMode())?e(t):n(new TypeError("load pattern -partnerid- failed"))}))},Pe.initialize=function(){xe.register()};const Oe=new class{initialize(){ut.patternMatching.register("prstring",this._getPrString)}_getPrString(){return new Promise(t=>t(s.a.getPrString()))}},je={},Re={__:je};je.oDefaults={},je.register=function(){ut.patternMatching.register("vehicle_id",je.getVehicleId)},je.getVehicleId=function(){return new Promise((function(t,e){const n=je.getUrlParameterByName("vehicleid",location.href);n?t(n):e(new TypeError("load pattern -vehicleid- failed"))}))},je.getUrlParameterByName=function(t,e){let n,i,r,o;return o=e||window.location.href,r=(t||"").replace(/[[\]]/g,"\\$&"),n=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),i=n.exec(o),i?i[2]?decodeURIComponent((i[2]||"").replace(/\+/g," ")):"":null},Re.initialize=function(){je.register()};const Be={},Me={__:Be};var Fe="",Ue="";Be.setGroupPrice=function(){a.dom.getElementsArray(".js-configurator-group").forEach((function(t){var e,n=t,i=a.dom.closest(n,".nm-pattern-block, .nm-pattern-block-dynamic, .nm-tile-block"),r=a.dom.getElementsArray(".nm-j-configurator-item:not(.nm-j-configurator-status_00000)",i),o=Number.MAX_VALUE,l=!0;r.forEach((function(t){var n,i,r;i=(n=s.a.getItem(t.getAttribute("data-configurator-id")))&&n.price?n.price:"",1*(r=(r=Me.getRawPrice(i,!1)).toFixed(2))==0&&(e=Ue),1*o>1*r&&(e=i,o=r),l&&o!==r&&(l=!1)})),l||(e=Fe+" "+e),a.dom.getElement(".nm-price",n).textContent=e}))},Me.getRawPrice=function(t,e){var n,i;return i=0===SETUPS.get("scope.commaseparator")||"0"===SETUPS.get("scope.commaseparator")?/[^0-9,]/g:/[^0-9.]/g,(n=t.replace(i,"")).replace(/[,]/g,"."),n=!0===e?parseInt(n,10):parseFloat(n),isNaN(n)&&(n=0),n},Be.setSelectedGroup=function(){a.dom.getElementsArray(".nm-pattern-list-dynamic").forEach((function(t){var e=a.dom.getElementsArray("li.nm-j-configurator-status_11010, li.nm-j-configurator-status_10011",t).length;t.classList.remove("nm-pattern-selected"),e&&t.classList.add("nm-pattern-selected")}))},Be.handleUpdates=function(){a.polling.wait((function(){return s.a.isInitialized()||!s.a.getCarline()}),5e3,250).then((function(){Be.setSelectedGroup(),Be.setGroupPrice()})).catch(t=>console.warn("pattern: could not update groups and prices",t))},Be.subscribe=function(){Be.eventBus.on(i.appEvents.CONFIG_UPDATE,Be.handleUpdates),Be.eventBus.on(i.appEvents.PAGE_LOADED,Be.handleUpdates),Be.eventBus.on(i.appEvents.LAYER_LOADED,Be.handleUpdates)},Be.initialize=function(){Fe=window.i18n.from,Ue=window.i18n["standard-group-price"],Be.subscribe()},Me.initialize=function(t){Be.eventBus=t,Be.initialize()};const ze={},Ne={__:ze};ze.oDefaults={sSelectorModule:".j-pdf-configuration"},ze.addEvents=function(){a.dom.getEventDelegate("body").on("click",ze.oDefaults.sSelectorModule,ze.callPDFServiceWithAudicode)},ze.callPDFServiceWithAudicode=function(t){var e,n;e=SETUPS.get("nemo.pdf.url"),console.log("PDFURl: ",e),e&&(n=window.open(),ut.patternMatching.getReplacedUrl(e+"/audicode/{{audicode}}","audi.de").then((function(t){n.location=t})).catch((function(t){console.warn("PDF SERVICE LINK ERROR: something went wrong in pattern matching: ",t)})))},Ne.initialize=function(t){ze.addEvents()};const Qe={},He={__:Qe};Qe.oDefaults={sPreconfTeaserSelector:".nm-module-preconfiguration-teaser",spreconfigSlide:".nm-md-preconfig-teaser-slide",sButtonSelector:".j-preconfig-submit",sButtonConfigurationClass:"nm-md-preconfig-teaser-custom-configuration",sSelectorTabsNavi:"ul.nm-preconfiguration-teaser-thumbs",sSelectorTeaserTemplates:"j-preconfig-teaser-tpl-",sTabsSelectorDelegateClick:"li.nm-preconfiguration-teaser-thumbnail",sMenuSelectedClass:"nm-selected",sSelectorTeaserContainer:".nm-preconfig-teaser-peephole",selectorArrow:".nm-preconfiguration-teaser-slide-arrows a",selectorArrowPrev:".nm-preconfiguration-teaser-slide-prev",selectorArrowNext:".nm-preconfiguration-teaser-slide-next",classHidden:"nm-hidden"},Qe.selectedIndex=0,Qe.maxIndex=0,Qe.startPos={x:0,y:0},Qe.PREV="prev",Qe.sensitivity=40,Qe.direction="left",Qe.isAnimating=!1,Qe.xDirection="none",Qe.yDirection="none",Qe.deltaX=0,Qe.deltaY=0,Qe.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},Qe.isDown=!1,Qe.deviceType="desktopdevice",Qe.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},Qe.handlePageLoaded=function(){if(Qe.$preconfigTeaserContainer&&jQuery.contains(document,Qe.$preconfigTeaserContainer[0]))return!1;if(Qe.$preconfigTeaserContainer=jQuery(Qe.oDefaults.sPreconfTeaserSelector),Qe.$preconfigTeaserContainer.length){var t=jQuery("script[id^='"+Qe.oDefaults.sSelectorTeaserTemplates+"']");Qe.maxIndex=t.length-1,Qe.isTouchDevice()&&(Qe.deviceType="touchdevice"),Qe.maxIndex>0&&(Qe.addSwipeEvents(),Qe.$preconfigTeaserContainer.on("click.tabs touchend.tabs",Qe.oDefaults.sTabsSelectorDelegateClick,Qe.handleTabClick)),Qe.$preconfigTeaserContainer.on("click.configuration.start touchend.configuration.start",Qe.oDefaults.sButtonSelector,Qe.handleConfigurationStartClick),Qe.eventBus.on(i.appEvents.CONFIG_UPDATE,Qe.updateButtonLabel),Qe.updateButtonLabel(),Qe.updateArrows(0)}},Qe.addSwipeEvents=function(){Qe.removeSwipeEvents(),Qe.$preconfigTeaserContainer.off(Qe.eventLookup[Qe.deviceType].down,Qe.handleMouseDown).on(Qe.eventLookup[Qe.deviceType].down,Qe.handleMouseDown)},Qe.removeSwipeEvents=function(){Qe.$preconfigTeaserContainer.off(Qe.eventLookup[Qe.deviceType].up,Qe.handleMouseUp),Qe.$preconfigTeaserContainer.off(Qe.eventLookup[Qe.deviceType].move,Qe.handleMouseMove)},Qe.handleMouseDown=function(t){Qe.isDown=!1,"select"!==t.target.nodeName.toLowerCase()&&"input"!==t.target.nodeName.toLowerCase()&&"option"!==t.target.nodeName.toLowerCase()&&(Qe.isDown=!0,Qe.deltaX=0,Qe.deltaY=0,Qe.startPos.x=t.pageX||t.originalEvent.changedTouches[0].pageX,Qe.startPos.y=t.pageY||t.originalEvent.changedTouches[0].pageY,Qe.$preconfigTeaserContainer.off(Qe.eventLookup[Qe.deviceType].up,Qe.handleMouseUp).on(Qe.eventLookup[Qe.deviceType].up,Qe.handleMouseUp),Qe.isTouchDevice()||Qe.$preconfigTeaserContainer.on(Qe.eventLookup[Qe.deviceType].move,Qe.handleMouseMove))},Qe.getXDirection=function(t){return t>0?"left":"right"},Qe.getYDirection=function(t){return t>0?"up":"down"},Qe.handleMouseUp=function(t){Qe.down=!1,Qe.removeSwipeEvents(),Qe.deltaX=Qe.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),Qe.deltaY=Qe.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),Qe.xDirection=Qe.getXDirection(Qe.deltaX),Qe.yDirection=Qe.getYDirection(Qe.deltyY),Math.abs(Qe.deltaX)>Qe.sensitivity&&Math.abs(Qe.deltaY)<Qe.sensitivity&&Qe.triggerViewChange(Qe.xDirection)},Qe.handleMouseMove=function(t){Qe.isDown&&(Qe.deltaX=Qe.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),Qe.deltaY=Qe.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),Qe.xDirection=Qe.getXDirection(Qe.deltaX),Qe.yDirection=Qe.getYDirection(Qe.deltyY),Math.abs(Qe.deltaX)>Qe.sensitivity&&Math.abs(Qe.deltaY)<Qe.sensitivity&&(Qe.removeSwipeEvents(),Qe.isDown=!1,Qe.triggerViewChange(Qe.xDirection)))},Qe.removeEvents=function(){Qe.$preconfigTeaserContainer=jQuery(Qe.oDefaults.sPreconfTeaserSelector),Qe.$preconfigTeaserContainer.length&&(Qe.removeSwipeEvents(),Qe.$preconfigTeaserContainer.off("click.tabs touchend.tabs",Qe.handleTabClick),Qe.$preconfigTeaserContainer.off("click.configuration.start touchend.configuration.start",Qe.handleConfigurationStartClick),jQuery("body").off(i.appEvents.CONFIG_UPDATE,Qe.updateButtonLabel))},Qe.handleConfigurationStartClick=function(t){Qe.cancelEvent(t);var e=jQuery(this),n=e.data("prstring"),r=e.data("audicode");return jQuery(t.target).closest("a").trigger("click.link-tracking"),r?(p.a.loadConfigurationFromTeaser({audicode:r,prstring:null},"audicode.preconfig-teaser").then((function(){i.router.open("page",s.a.getCurrentCarlineUrl())})),!1):n?(p.a.loadConfigurationFromTeaser({prstring:n,audicode:null},"prstring.preconfig-teaser").then((function(){i.router.open("page",s.a.getCurrentCarlineUrl())})),!1):(i.router.open("page",s.a.getCurrentCarlineUrl()),void jQuery("a.nm-configuration-new").trigger("click.configuration.new"))},Qe.handleTabClick=function(t){t&&t.preventDefault&&t.preventDefault();var e,n=Qe.selectedIndex;this.hasAttribute("data-direction")?e=this.getAttribute("data-direction")===Qe.PREV?n-1:n+1:e=$(this).index();return Qe.cancelEvent(t),Qe.isAnimating?null:e!==n&&(Qe.direction=e>n?"left":"right",Qe.selectedIndex=e,void Qe.updateContent(Qe.selectedIndex,Qe.direction))},Qe.updateArrows=function(t){if(0!=Qe.maxIndex){var e=a.dom.getElement(Qe.oDefaults.selectorArrowPrev),n=a.dom.getElement(Qe.oDefaults.selectorArrowNext);0==t?e.classList.add(Qe.oDefaults.classHidden):e.classList.remove(Qe.oDefaults.classHidden),t==Qe.maxIndex?n.classList.add(Qe.oDefaults.classHidden):n.classList.remove(Qe.oDefaults.classHidden)}},Qe.getNextIndex=function(t){return(t+1)%(Qe.maxIndex+1)},Qe.getPreviousIndex=function(t){var e=t-1;return e<0&&(e=Qe.maxIndex),e},Qe.updateContent=function(t,e){Qe.insertTeaser(t,e),Qe.updateSelection(t)},Qe.triggerViewChange=function(t){var e=Qe.selectedIndex;if(Qe.isAnimating)return null;Qe.legacyEventBus.trigger("swipe.preconfiguration",{prop16:"<prefix>:"+s.a.getCarlineName(),eVar39:"Pre-Config Switch",prop39:"Pre-Config Switch",eVar44:"Pre-Config Switch",prop44:"Pre-Config Switch",eVar46:"<pagename>:Pre-Config Switch:Swipe",prop46:"<pagename>:Pre-Config Switch:Swipe",prop67:"<pagename>"}),Qe.direction=t,e="right"===t?Qe.getPreviousIndex(e):Qe.getNextIndex(e),Qe.selectedIndex=e,Qe.updateContent(Qe.selectedIndex,Qe.direction)},Qe.handlePageLeave=function(){Qe.removeEvents()},Qe.animateStage=function(t,e,n,i){var r="-"+.5*e.width()+"px";Qe.isAnimating=!0,"left"===t?e.css("height",n).animate({"margin-left":r,height:i},500,"easeOutSine",Qe.animationEnded):e.css("margin-left",r).animate({"margin-left":0,height:i},500,"easeOutSine",Qe.animationEnded)},Qe.insertTeaser=function(t,e){var n,i,r,o,a=jQuery(Qe.oDefaults.sSelectorTeaserContainer);a.addClass("nm-slide-animation-start-"+e),n=Qe.getTemplateByIndex(t),i=jQuery(n),r=jQuery(Qe.oDefaults.spreconfigSlide).height()+"px",i.appendTo(a),o=i.height()+"px",Qe.animateStage(e,a,r,o);const s=document.querySelector(Qe.oDefaults.sSelectorTeaserContainer),l=new CustomEvent("content:rendered",{detail:{element:s}});document.dispatchEvent(l)},Qe.animationEnded=function(){$(this).removeClass(["nm-slide-animation-start-",Qe.direction].join("")).removeAttr("style").find(Qe.oDefaults.spreconfigSlide).first().remove(),Qe.isAnimating=!1,Qe.updateArrows(Qe.selectedIndex)},Qe.updateButtonLabel=function(){s.a.hasCustomConfiguration()?$(Qe.oDefaults.sSelectorTeaserContainer).addClass(Qe.oDefaults.sButtonConfigurationClass):$(Qe.oDefaults.sSelectorTeaserContainer).removeClass(Qe.oDefaults.sButtonConfigurationClass)},Qe.updateSelection=function(t){var e=Qe.$preconfigTeaserContainer.find(Qe.oDefaults.sSelectorTabsNavi).find(Qe.oDefaults.sTabsSelectorDelegateClick);e.removeClass(Qe.oDefaults.sMenuSelectedClass),jQuery(e[t]).addClass(Qe.oDefaults.sMenuSelectedClass)},Qe.getTemplateByIndex=function(t){var e=jQuery(["#",Qe.oDefaults.sSelectorTeaserTemplates,t].join("")).html()||"";return e=e.trim()},Qe.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},Qe.addEvents=function(){Qe.eventBus.on(i.appEvents.PAGE_LOADED,Qe.handlePageLoaded),Qe.eventBus.on(i.appEvents.LAYER_LOADED,Qe.handlePageLoaded),Qe.domEventDelegate.on("click",Qe.oDefaults.selectorArrow,Qe.handleTabClick)},He.initialize=function(t){Qe.eventBus=t,Qe.domEventDelegate=a.dom.getEventDelegate("body"),Qe.addEvents(),Qe.handlePageLoaded()};const Ve={},qe={__:Ve};Ve.oDefaults={sPreconfTeaserSelector:".nm-md-preconfs-teaser",sPreconfsSlide:".nm-md-preconfs-teaser-slide",sButtonSelector:".j-preconfs-submit",sButtonConfigurationClass:"nm-md-preconfs-teaser-custom-configuration",sSelectorDotsNavi:"ul.nm-dots-navi",sSelectorTeaserTemplates:"j-preconfs-teaser-tpl-",sDotsSelectorDelegateClick:"li.nm-dot",sMenuSelectedClass:"nm-selected",sSelectorTeaserContainer:".nm-peephole"},Ve.selectedIndex=0,Ve.maxIndex=0,Ve.startPos={x:0,y:0},Ve.sensitivity=40,Ve.direction="left",Ve.isAnimating=!1,Ve.xDirection="none",Ve.yDirection="none",Ve.deltaX=0,Ve.deltaY=0,Ve.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},Ve.isDown=!1,Ve.deviceType="desktopdevice",Ve.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},Ve.handlePageLoaded=function(){if(Ve.$preconfsTeaserContainer=jQuery(Ve.oDefaults.sPreconfTeaserSelector),Ve.$preconfsTeaserContainer.length){var t=jQuery("script[id^='"+Ve.oDefaults.sSelectorTeaserTemplates+"']");Ve.maxIndex=t.length-1,Ve.isTouchDevice()&&(Ve.deviceType="touchdevice"),Ve.maxIndex>0&&(Ve.addSwipeEvents(),Ve.$preconfsTeaserContainer.on("click.dots touchend.dots",Ve.oDefaults.sDotsSelectorDelegateClick,Ve.handleDotClick)),Ve.$preconfsTeaserContainer.on("click.configuration.start touchend.configuration.start",Ve.oDefaults.sButtonSelector,Ve.handleConfigurationStartClick),Ve.eventBus.on(i.appEvents.CONFIG_UPDATE,Ve.updateButtonLabel),Ve.updateButtonLabel()}},Ve.addSwipeEvents=function(){Ve.removeSwipeEvents(),Ve.$preconfsTeaserContainer.off(Ve.eventLookup[Ve.deviceType].down,Ve.handleMouseDown).on(Ve.eventLookup[Ve.deviceType].down,Ve.handleMouseDown)},Ve.removeSwipeEvents=function(){Ve.$preconfsTeaserContainer.off(Ve.eventLookup[Ve.deviceType].up,Ve.handleMouseUp),Ve.$preconfsTeaserContainer.off(Ve.eventLookup[Ve.deviceType].move,Ve.handleMouseMove)},Ve.handleMouseDown=function(t){Ve.isDown=!1,"select"!==t.target.nodeName.toLowerCase()&&"input"!==t.target.nodeName.toLowerCase()&&"option"!==t.target.nodeName.toLowerCase()&&(Ve.isDown=!0,Ve.deltaX=0,Ve.deltaY=0,Ve.startPos.x=t.pageX||t.originalEvent.changedTouches[0].pageX,Ve.startPos.y=t.pageY||t.originalEvent.changedTouches[0].pageY,Ve.$preconfsTeaserContainer.off(Ve.eventLookup[Ve.deviceType].up,Ve.handleMouseUp).on(Ve.eventLookup[Ve.deviceType].up,Ve.handleMouseUp),Ve.isTouchDevice()||Ve.$preconfsTeaserContainer.on(Ve.eventLookup[Ve.deviceType].move,Ve.handleMouseMove))},Ve.handleMouseUp=function(t){Ve.down=!1,Ve.removeSwipeEvents(),Ve.deltaX=Ve.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),Ve.deltaY=Ve.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),Ve.deltaX>0?Ve.xDirection="left":Ve.xDirection="right",Ve.deltaY>0?Ve.yDirection="up":Ve.yDirection="down",Math.abs(Ve.deltaX)>Ve.sensitivity&&Math.abs(Ve.deltaY)<Ve.sensitivity&&Ve.triggerViewChange(Ve.xDirection)},Ve.handleMouseMove=function(t){Ve.isDown&&(Ve.deltaX=Ve.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),Ve.deltaY=Ve.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),Ve.deltaX>0?Ve.xDirection="left":Ve.xDirection="right",Ve.deltaY>0?Ve.yDirection="up":Ve.yDirection="down",Math.abs(Ve.deltaX)>Ve.sensitivity&&Math.abs(Ve.deltaY)<Ve.sensitivity&&(Ve.removeSwipeEvents(),Ve.isDown=!1,Ve.triggerViewChange(Ve.xDirection)))},Ve.removeEvents=function(){Ve.$preconfsTeaserContainer=jQuery(Ve.oDefaults.sPreconfTeaserSelector),Ve.$preconfsTeaserContainer.length&&(Ve.removeSwipeEvents(),Ve.$preconfsTeaserContainer.off("click.dots touchend.dots",Ve.handleDotClick),Ve.$preconfsTeaserContainer.off("click.configuration.start touchend.configuration.start",Ve.handleConfigurationStartClick),jQuery("body").off(i.appEvents.CONFIG_UPDATE,Ve.updateButtonLabel))},Ve.handleConfigurationStartClick=function(t){Ve.cancelEvent(t);var e=jQuery(this),n=e.data("prstring"),r=e.data("audicode");return r?(p.a.loadConfigurationFromTeaser({audicode:r,prstring:null},"audicode.preconfs-teaser").then((function(){i.router.open("page",s.a.getCurrentCarlineUrl())})),!1):n?(p.a.loadConfigurationFromTeaser({prstring:n,audicode:null},"prstring.preconfs-teaser").then((function(){i.router.open("page",s.a.getCurrentCarlineUrl())})),!1):(i.router.open("page",s.a.getCurrentCarlineUrl()),void jQuery("a.nm-configuration-new").trigger("click.configuration.new"))},Ve.handleDotClick=function(t){if(Ve.cancelEvent(t),Ve.isAnimating)return null;var e=$(this).index(),n=Ve.selectedIndex;if(e===n)return!1;Ve.direction=e>n?"left":"right",Ve.selectedIndex=e,Ve.updateContent(Ve.selectedIndex,Ve.direction)},Ve.getNextIndex=function(t){return(t+1)%(Ve.maxIndex+1)},Ve.getPreviousIndex=function(t){return(t-=1)<0&&(t=Ve.maxIndex),t},Ve.updateContent=function(t,e){Ve.insertTeaser(t,e),Ve.updateSelection(t)},Ve.triggerViewChange=function(t){if(Ve.isAnimating)return null;var e=Ve.selectedIndex;"right"===t?(Ve.direction="right",e=Ve.getPreviousIndex(e)):(Ve.direction="left",e=Ve.getNextIndex(e)),Ve.selectedIndex=e,Ve.updateContent(Ve.selectedIndex,Ve.direction)},Ve.handlePageLeave=function(){Ve.removeEvents()},Ve.insertTeaser=function(t,e){var n=jQuery(Ve.oDefaults.sSelectorTeaserContainer);n.addClass("nm-slide-animation-start-"+e);var i=Ve.getTemplateByIndex(t),r=jQuery(i),o=jQuery(Ve.oDefaults.sPreconfsSlide).height()+"px";r.appendTo(n);var a=r.height()+"px",s="-"+.5*n.width()+"px";Ve.isAnimating=!0,"left"===e?n.css("height",o).animate({"margin-left":s,height:a},500,"easeOutSine",Ve.animationEnded):n.css("margin-left",s).animate({"margin-left":0,height:a},500,"easeOutSine",Ve.animationEnded)},Ve.animationEnded=function(){$(this).removeClass(["nm-slide-animation-start-",Ve.direction].join("")).removeAttr("style").find(Ve.oDefaults.sPreconfsSlide).first().remove(),Ve.isAnimating=!1},Ve.updateButtonLabel=function(){s.a.hasCustomConfiguration()?$(Ve.oDefaults.sSelectorTeaserContainer).addClass(Ve.oDefaults.sButtonConfigurationClass):$(Ve.oDefaults.sSelectorTeaserContainer).removeClass(Ve.oDefaults.sButtonConfigurationClass)},Ve.updateSelection=function(t){var e=Ve.$preconfsTeaserContainer.find(Ve.oDefaults.sSelectorDotsNavi).find(Ve.oDefaults.sDotsSelectorDelegateClick);e.removeClass(Ve.oDefaults.sMenuSelectedClass),jQuery(e[t]).addClass(Ve.oDefaults.sMenuSelectedClass)},Ve.getTemplateByIndex=function(t){var e=jQuery(["#",Ve.oDefaults.sSelectorTeaserTemplates,t].join("")).html()||"";return e=e.trim()},Ve.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},Ve.addEvents=function(){Ve.eventBus.on(i.appEvents.PAGE_LOADED,Ve.handlePageLoaded),Ve.eventBus.on(i.appEvents.PAGE_LEAVE,Ve.handlePageLeave),Ve.eventBus.on(i.appEvents.LAYER_LOADED,Ve.handlePageLoaded)},qe.initialize=function(t){Ve.eventBus=t,Ve.addEvents(),Ve.handlePageLoaded()};const We='<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t{{=window.i18n[\'recommendations-layer.your-recommendations-for\']}}\n</h2>\n<p class="nm-el-pg nm-el-pg-03">\n\t{{=window.i18n[\'recommendations-layer.message\']}}\n</p>\n{{~it.recommendations :value :index}}\n<div class="nm-recommendation-container nm-recommendation-{{=index+1}}">\n\t<div class="nm-module nm-md-recommendations">\n\t\t<strong class="nm-el-hdl nm-el-hdl-04">\n\t\t\t{{=window.i18n[\'recommendations-layer.recommendation-index\']}} {{=index+1}}\n\t\t</strong>\n\t\t<p class="nm-recommendation-title nm-el-pg nm-el-pg-03">\n\t\t\t{{=value.explanation}}\n\t\t</p>\n\t\t{{~value.recommendation :r}}\n\t\t<div class="nm-module nm-md-teaser-equipment nm-md-teaser clearfix nm-j-configurator-item nm-j-configurator-status_{{=r.status}}"\n\t\tdata-configurator-id="{{=r.id}}">\n\t\t\t<div class="nm-md-teaser-img">\n\t\t\t\t<img src="{{=r.image}}" alt="" />\n\t\t\t</div>\n\t\t\t<div class="nm-md-teaser-copy">\n\t\t\t\t<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t{{=r.name}}\n\t\t\t\t</strong>\n\t\t\t\t<div class="nm-info-wrap">\n\t\t\t\t\t<a class="nm-info nm-image-replace nm-layerLink" href="{{=r.url}}">{{=window.i18n[\'more-information\']}}</a>\n\t\t\t\t</div>\n\t\t\t\t<span class="nm-price nm-el-hdl nm-el-hdl-04">\n\t\t\t\t\t{{=r.price}}\n\t\t\t\t</span>\n\t\t\t\t<div class="nm-el-pg nm-el-pg-02">\n\t\t\t\t\t{{=r.description || "No descriptive text found"}}\n\t\t\t\t</div>\n\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t    <span class="nm-at-btn-state01">{{=window.i18n[\'configuration.add-item\']}}</span>\n\t\t\t\t    <span class="nm-at-btn-state02">{{=window.i18n[\'configuration.item-included\']}}</span>\n\t\t\t\t    <span class="nm-at-btn-state03">{{=window.i18n[\'configuration.remove-item\']}}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t\t{{~}} {{? 0 !== value.chosen.length}}\n\t\t<p class="nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t{{=window.i18n[\'recommendations-layer.explanation\']}}:\n\t\t</p>\n\t\t{{~value.chosen :c}}\n\t\t<ul class="nm-options-list">\n\t\t\t<li class="clearfix">\n\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t<div class="nm-list-item-text nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t{{=c.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="nm-info-wrap">\n\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=c.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t</div>\n\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-04 clearfix">\n\t\t\t\t\t<span class="nm-price">\n\t\t\t\t\t\t{{=c.price}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t\t{{~}} {{?}}\n\t</div>\n</div>\n{{~}}',Ge={},Ye={__:Ge};Ge.oDefaults={sSelectorTemplateClass:".nm-recommendation",sSelectorTabClass:".nm-j-link-recommendations"},Ge.tplFunc=null,Ge.tplFuncNoRecs=function(){return""},Ge.getTplString=function(t){var e=$(t);return e.length>0?e.html():""},Ge.showTab=function(){jQuery("body").addClass("nm-has-recommendations")},Ge.hideTab=function(){jQuery("body").removeClass("nm-has-recommendations")},Ge.tabAvailable=function(){return jQuery(Ge.oDefaults.sSelectorTabClass).length>0},Ge.containerAvailable=function(){return jQuery(Ge.oDefaults.sSelectorTemplateClass).length>0},Ge.initialize=function(){Ge.addEvents()},Ge.dispose=function(){Ge.disposeEvents()},Ge.parse=function(t){var e,n=s.a.getItems()||{},i={recommendations:[]},r=JSON.parse(JSON.stringify(t)),o={};return jQuery.each(n,(function(t,e){o[e.mbvId]=e})),e=[],jQuery.each(r,(function(t,i){if(null===i)return!1;i.recommendation=jQuery.map(i.recommendation,(function(t){return!!o[t.id]?o[t.id]:s.a.getItem(t.id)})),i.chosen=jQuery.map(i.chosen,(function(t){return!!o[t.id]?o[t.id]:n[t.id]})),e.push(i)})),jQuery.each(e,(function(t,e){Array.prototype.push.call(i.recommendations,e)})),i.recommendations=e,i.carlineName=s.a.getCarlineName(),i},Ge.render=function(){var t=s.a.getRecommendations(),e=Ge.parse(t),n=a.template.render(We,e);n=n.replace("{{=it.carlineName}}",e.carlineName.toUpperCase()),jQuery(Ge.oDefaults.sSelectorTemplateClass).html(n)},Ge.renderNoRecommendations=function(){var t=s.a.getConfiguration(),e=a.template.render(We,t);e=e.replace("{{=it.carlineName}}",(s.a.getCarline()||"").toUpperCase()),jQuery(Ge.oDefaults.sSelectorTemplateClass).html(e),jQuery(Ge.oDefaults.sSelectorTemplateClass).html(Ge.tplFuncNoRecs(t))},Ge.addEvents=function(){Ge.eventBus.on(i.appEvents.CONFIG_UPDATE,Ge.handleConfigUpdate),Ge.eventBus.on(i.appEvents.PAGE_LOADED,Ge.handlePageLoaded),Ge.eventBus.on(i.appEvents.PAGE_LOADED,Ge.handleLayerLoaded),Ge.eventBus.on(i.appEvents.LAYER_LOADED,Ge.handleLayerLoaded),Ge.eventBus.on(i.appEvents.LAYER_CLOSED,Ge.handleLayerClosed)},Ge.disposeEvents=function(){Ge.eventBus.off(i.appEvents.CONFIG_UPDATE,Ge.handleConfigUpdate),Ge.eventBus.off(i.appEvents.PAGE_LOADED,Ge.handlePageLoaded),Ge.eventBus.off(i.appEvents.PAGE_LOADED,Ge.handleLayerLoaded),Ge.eventBus.off(i.appEvents.LAYER_LOADED,Ge.handleLayerLoaded),Ge.eventBus.off(i.appEvents.LAYER_CLOSED,Ge.handleLayerClosed)},Ge.recommendationsAvailable=function(){return s.a.isConfigurable()&&s.a.getRecommendations().length},Ge.updateView=function(){Ge.containerAvailable()||(Ge.recommendationsAvailable()?(Ge.showTab(),Ge.render()):Ge.hideTab())},Ge.handleConfigUpdate=function(){Ge.updateView()},Ge.handlePageLoaded=function(){Ge.updateView()},Ge.handleLayerClosed=function(){Ge.recommendationsAvailable()||Ge.hideTab()},Ge.handleLayerLoaded=function(){!Ge.recommendationsAvailable()&&Ge.containerAvailable()?(Ge.showTab(),Ge.renderNoRecommendations()):Ge.recommendationsAvailable()&&Ge.containerAvailable()?(Ge.showTab(),Ge.render()):Ge.recommendationsAvailable()&&Ge.tabAvailable()&&Ge.showTab()},Ye.initialize=function(t){Ge.eventBus=t,Ge.initialize()};const $e={},Ke={__:$e,initialized:!1};$e.activeImageSrc=!1,$e.interiorImages=[],$e.exteriorImages=[],$e.exteriorOpenImages=[],$e.min360ImgCount=6,$e.oDefaults={sClassActive:"nm-active",sClassNoThumbnailAnimation:"nm-no-animation",sClassAnimate:"nm-animate",sClassCabrioOpen:"nm-cabrio-open",sClassSelectorClosed:"nm-icon-expand-white",sClassSelectorOpen:"nm-icon-collapse-white",sClassItemExterior:"nm-js-exterior",sClassItemExteriorOpen:"nm-js-exterior-open",sClassItemInterior:"nm-js-interior",sAttrDisplayedRenderingView:"data-renderimage-view",sIdToggleExterior:"nm-renderinglayer-exteriortoggle",sIdToggleExteriorOpen:"nm-renderinglayer-exterioropentoggle",sIdToggleInterior:"nm-renderinglayer-interiortoggle",sSelectorColorItems:"#nm-renderinglayer-extcolor-selection-color li",sSelectorOpenButton:".nm-renderinglayer-open",sSelectorRenderingLayerOuter:".nm-layer-renderinglayer",sSelectorRenderingLayer:".nm-renderinglayer",sSelectorItemExterior:".nm-js-exterior",sSelectorItemExteriorOpen:".nm-js-exterior-open",sSelectorItemInterior:".nm-js-interior",sSelectorDisplayedRenderingImage:".nm-basket-image .nm-j-configurator-renderimage",sSelectorRenderingCounterCurrent:".nm-renderingcounter-current",sSelectorRenderingCounterTotal:".nm-renderingcounter-total",sSelectorBack:".nm-renderinglayer .nm-backarrow",sSelectorNext:".nm-renderinglayer .nm-nextarrow",sSelectorStageImage:".nm-renderinglayer-image",sSelectorStageImages:".nm-renderinglayer-stageimages",sSelectorActiveStageImageWrapper:".nm-renderinglayer-imagewrapper.nm-active",sSelectorFirstStageImageWrapper:".nm-renderinglayer-imagewrapper:first-child",sSelectorActiveStageImage:".nm-renderinglayer-imagewrapper.nm-active .nm-renderinglayer-image",sSelectorThumbnailArea:".nm-renderinglayer-thumbnails",sSelectorThumbnail:".nm-renderinglayer-item .nm-rl-placeholder",sSelectorPlusButton:".nm-renderinglayer-item .nm-icon-plus",sSelectorThumbnailActive:".nm-renderinglayer-item .nm-rl-placeholder.nm-active",sSelectorColorSelector:".nm-render-color-selector",sSelectorColorSelectorWrapper:".nm-render-color-selector-wrapper",sSelectorOptionsSelector:".nm-render-animation-selector",sSelectorCurrentColorIndicator:".selector-current-selected .nm-render-active-color"},$e.isInteriorActive=function(t){var e=!1;return 0!==t.indexOf("interior")&&0!==t.indexOf("dashboard")&&0!==t.indexOf("rearseat")||(e=!0),e},$e.isOpenActive=function(t){var e=!1;return t.indexOf("_open")>0&&(e=!0),e},$e.getActiveImageSrc=function(t){t.interiorActive&&$e.interiorImages.length>0?$e.activeImageSrc=$e.interiorImages[0].image:t.open&&$e.exteriorOpenImages.length>0?$e.activeImageSrc=$e.exteriorOpenImages[0].image:$e.exteriorImages.length>0?$e.activeImageSrc=$e.exteriorImages[0].image:$e.activeImageSrc=""},$e.getConfigurationAssets=function(){var t=s.a.getConfigurationAssets();(!t||Object.keys(t).length<=0)&&(t=SETUPS.get("nemo.default.data").configuration.assets),$e.generateRenderingLayerInnerHtml(t),$e.initListeners()},$e.pollConfigurationAssets=function(){jQuery($e.oDefaults.sSelectorRenderingLayer).length>0?console.log("RL: abort poll request"):$e.getConfigurationAssets()},$e.parseRenderImageTypeFromHash=function(t){var e,n,i;return!!t&&(n=/(renderingLayer)(\.(\S)+)?/,(i=t.match(n))&&(e=2===(i=(i=i[0].split("&")[0]).split(".")).length&&i[1]),e)},$e.setAllowedItems=function(t){var e,n=SETUPS.get("nemo.hiddenAssets")?SETUPS.get("nemo.hiddenAssets").replace(/"/g,""):"";for(e in $e.activeRenderings=[],n=n.length>0?n.split(","):[],console.log("hiddenAssets: "+n),t)e&&-1===n.indexOf(e)&&$e.activeRenderings.push(e)},$e.generateRenderingLayerInnerHtml=function(t){var e=s.a.getCarline(),n=s.a.getExtColor(),i=s.a.getConfiguration(),r=$e.parseRenderImageTypeFromHash(window.location.hash),o={};r||(r=jQuery($e.oDefaults.sSelectorDisplayedRenderingImage).attr($e.oDefaults.sAttrDisplayedRenderingView)),$e.setAllowedItems(t),-1===$e.activeRenderings.indexOf(r)&&(r="exterior_front"),o.interiorActive=$e.isInteriorActive(r),o.open=$e.isOpenActive(r),$e.preloadImages=["exterior_straight_front","exterior_front","exterior","exterior_back","exterior_straight_back"],$e.preloadImagesOpen=["exterior_straight_front_open","exterior_front_open","exterior_open","exterior_back_open","exterior_straight_back_open"],$e.exteriorImages=$e.extractAssets(e,t,r,"exterior"),$e.exteriorImages=$e.exteriorImages.concat($e.extractAssets(e,t,r,"closeup")),$e.exteriorOpenImages=$e.extractAssets(e,t,r,"exterior_open"),$e.exteriorOpenImages=$e.exteriorOpenImages.concat($e.extractAssets(e,t,r,"closeup_open")),o.openavailable=$e.exteriorOpenImages.length>0,$e.interiorImages=$e.extractAssets(e,t,r,"interior"),$e.interiorImages=$e.interiorImages.concat($e.extractAssets(e,t,r,"dashboard")),$e.interiorImages=$e.interiorImages.concat($e.extractAssets(e,t,r,"rearseat")),$e.activeImageSrc||$e.getActiveImageSrc(o),r||(r="exterior_front"),o.exterior=$e.exteriorImages,o.exterior_open=$e.exteriorOpenImages,o.interior=$e.interiorImages,o.active_image_src=$e.activeImageSrc,o.currentRenderingView=r,o.config=i,o.activeColor=n;var l=a.template.render('\n\t<div class="nm-layer-toolbar">\n\t\t<div class="nm-renderingcounter">\n\t\t\t&nbsp;<span class="nm-renderingcounter-current">01</span>|\n\t\t\t<span class="nm-renderingcounter-total">--</span>&nbsp;\n\t\t</div>\n\t\t<div class="nm-layer__close-button nm-j-layer-close-button">\n\t\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"}}></use>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class="nm-layer-inner nm-renderinglayer-wrapper">\n\t\t<div class="nm-renderinglayer {{? it.open }} nm-cabrio-open{{ } }}" style="{{?it.native_width!=undefined}} width: {{=it.native_width}}px{{?}}">\n\t\t\t<input type="radio" id="nm-renderinglayer-exteriortoggle" name="nm-renderinglayer-toggle-radio" value="exterior" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}{{?? it.open }}{{??}}checked{{?}} >\n\t\t\t<input type="radio" id="nm-renderinglayer-exterioropentoggle" name="nm-renderinglayer-toggle-radio" value="exterioropen" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}{{?? it.open }}checked{{??}}{{?}} >\n\t\t\t<input type="radio" id="nm-renderinglayer-interiortoggle" name="nm-renderinglayer-toggle-radio" value="interior" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}checked{{?? it.open }}{{??}}{{?}} >\n\t\t\t\x3c!--\n\t\t\t<input type="checkbox" id="nm-renderinglayer-opentoggle" name="nm-rl-toggle-open" class="nm-rl-toggle-open" {{? it.open}}checked{{?}} >\n\t\t--\x3e\n\t\t\t<div class="nm-renderinglayer-stagewrapper {{? it.openavailable}} openavailable {{ }Â }}">\n\t\t\t\t<ul class="nm-renderinglayer-stagebrowse">\n\t\t\t\t\t<li class="nm-backarrow"><a href="" class="nm-b-icon nm-icon-back-arrow-l"></a></li>\n\t\t\t\t\t<li class="nm-nextarrow"><a href="" class="nm-b-icon nm-icon-next-arrow-l"></a></li>\n\t\t\t\t</ul>\n\t\t\t\t<a href="" class="nm-renderinglayer-open nm-el-btn nm-el-btn-01">{{? it.open}}{{=window.i18n[\'rendering-layer.cabrio-close\']}}{{??}}{{=window.i18n[\'rendering-layer.cabrio-open\']}}{{?}}</a>\n\n\t \t\t\t<div class="nm-renderinglayer-stage">\n\t \t\t\t\t<ul class="nm-renderinglayer-stageimages">{{~ it.exterior :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-view="{{=value.name}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}{{~ it.exterior_open :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}{{~ it.interior :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}</ul>\n\t \t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="nm-renderinglayer-thumbnails clearfix">\n\t\t\t\t<ul class="nm-renderinglayer-thumbs">\n{{~ it.exterior :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-toggle-exterior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-exteriortoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-item-exterior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n{{~ it.exterior_open :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-toggle-exterior-open">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-exterioropentoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-item-exterior-open">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n{{~ it.interior :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-js-toggle nm-rl-toggle-interior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-interiortoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-js-item nm-rl-item-interior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>',o);jQuery($e.oDefaults.sSelectorRenderingLayerOuter).html(l)},$e.generateRenderingLayerHtml=function(){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e="";return 975>t&&(e=' style="width: '+t*(1400/975)+'px;"'),'<div class="nm-layer-wrapper nm-layer-wrapper-renderinglayer"><div class="nm-layer-renderinglayer nm-j-jslayer nm-layer"'+e+"></div></div>"},$e.addEvents=function(){i.clientLayer.register("renderingLayer",$e.generateRenderingLayerHtml),$e.eventBus.on(i.appEvents.LAYER_LOADED,$e.handler),Ke.initialized=!0},Ke.dispose=function(){$e.eventBus.off(i.appEvents.LAYER_LOADED,$e.handler)},Ke.disableFor3D=function(){jQuery($e.oDefaults.sSelectorOpenButton).off("click",$e.handlerOpenToggle),jQuery($e.oDefaults.sSelectorBack).off("click",$e.handlerBackClick),jQuery($e.oDefaults.sSelectorNext).off("click",$e.handlerNextClick),jQuery($e.oDefaults.sSelectorThumbnail).off("click",$e.handlerThumbnailClick),jQuery($e.oDefaults.sSelectorStageImage).off("mousedown",$e.activateSwipe),jQuery($e.oDefaults.sSelectorStageImage).off("touchstart",$e.activateSwipe)},$e.handler=function(){jQuery($e.oDefaults.sSelectorRenderingLayerOuter).length>0&&$e.pollConfigurationAssets()},$e.initListeners=function(){$e.interiorToggle=document.getElementById($e.oDefaults.sIdToggleInterior),$e.exteriorOpenToggle=document.getElementById($e.oDefaults.sIdToggleExteriorOpen),$e.exteriorToggle=document.getElementById($e.oDefaults.sIdToggleExterior),jQuery($e.oDefaults.sSelectorOpenButton).off("click",$e.handlerOpenToggle),jQuery($e.oDefaults.sSelectorBack).off("click",$e.handlerBackClick),jQuery($e.oDefaults.sSelectorNext).off("click",$e.handlerNextClick),jQuery($e.oDefaults.sSelectorThumbnail).off("click",$e.handlerThumbnailClick),jQuery($e.oDefaults.sSelectorPlusButton).off("click",$e.handlerPlusButtonClick),""===jQuery($e.oDefaults.sSelectorStageImage).first().attr("src")&&$e.pollConfigurationAssets(),$e.updateCounter(),jQuery($e.oDefaults.sSelectorOpenButton).on("click",$e.handlerOpenToggle),jQuery($e.oDefaults.sSelectorBack).on("click",$e.handlerBackClick),jQuery($e.oDefaults.sSelectorNext).on("click",$e.handlerNextClick),jQuery($e.oDefaults.sSelectorThumbnail).on("click",$e.handlerThumbnailClick),jQuery($e.oDefaults.sSelectorPlusButton).on("click",$e.handlerPlusButtonClick),$e.exteriorOpenToggle&&$e.exteriorOpenToggle.checked&&$e.preloadDefinedImages($e.preloadImagesOpen,"exterior_open"),$e.exteriorToggle&&$e.exteriorToggle.checked&&$e.preloadDefinedImages($e.preloadImages,"exterior"),$e.activateSwipeOrDrag(),jQuery(window).on("resize",$e.resizeLayer),$e.resizeLayer(),$e.eventBus.emit(i.appEvents.RENDERINGLAYER_LOADED)},$e.determineImageObjectsForArea=function(t){return"interior"===t?$e.interiorImages:"exterior_open"===t?$e.exteriorOpenImages:$e.exteriorImages},$e.preloadDefinedImages=function(t,e){var n,i,r=$e.determineImageObjectsForArea(e);for(n=0,i=r.length;n<i;n++)t.indexOf(r[n].name)>=0&&((new Image).src=r[n].image)},$e.activateSwipeOrDrag=function(){var t,e=document.getElementById($e.oDefaults.sIdToggleExterior),n=document.getElementById($e.oDefaults.sIdToggleExteriorOpen);jQuery($e.oDefaults.sSelectorStageImage).off("mousedown",$e.activateSwipe),jQuery($e.oDefaults.sSelectorStageImage).off("touchstart",$e.activateSwipe),jQuery($e.oDefaults.sSelectorStageImage).off("mousedown",$e.activateDrag),jQuery($e.oDefaults.sSelectorStageImage).off("touchstart",$e.activateDrag),jQuery(document).off("mouseup",$e.deactivateDrag),jQuery(document).off("touchend",$e.deactivateDrag),jQuery(document).off("mouseup",$e.deactivateSwipe),jQuery(document).off("touchend",$e.deactivateSwipe),t=n&&n.checked?jQuery($e.oDefaults.sSelectorItemExteriorOpen).length:jQuery($e.oDefaults.sSelectorItemExterior).length,(e&&e.checked||n&&n.checked)&&t>=$e.min360ImgCount?(jQuery($e.oDefaults.sSelectorStageImage).on("mousedown",$e.activateDrag),jQuery($e.oDefaults.sSelectorStageImage).on("touchstart",$e.activateDrag),jQuery(document).on("mouseup",$e.deactivateDrag),jQuery(document).on("touchend",$e.deactivateDrag)):(jQuery($e.oDefaults.sSelectorStageImage).on("mousedown",$e.activateSwipe),jQuery($e.oDefaults.sSelectorStageImage).on("touchstart",$e.activateSwipe),jQuery(document).on("mouseup",$e.deactivateSwipe),jQuery(document).on("touchend",$e.deactivateSwipe))},$e.getViewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},$e.getViewportWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},$e.fitToWidth=function(t,e,n,i){1400>t&&(i*e<=n?jQuery($e.oDefaults.sSelectorRenderingLayerOuter).outerWidth(i*e):jQuery($e.oDefaults.sSelectorRenderingLayerOuter).outerWidth(n))},$e.resizeLayer=function(){var t=$e.getViewportHeight(),e=jQuery($e.oDefaults.sSelectorRenderingLayerOuter).outerHeight(),n=jQuery($e.oDefaults.sSelectorRenderingLayerOuter).outerWidth(),r=n/e,o=$e.getViewportWidth();e>t?jQuery($e.oDefaults.sSelectorRenderingLayerOuter).outerWidth(t*r):$e.fitToWidth(n,r,o,t),$e.eventBus.emit(i.appEvents.RENDERINGLAYER_RESIZED)},$e.calculateTotalItems=function(){var t=document.getElementById($e.oDefaults.sIdToggleExteriorOpen),e=document.getElementById($e.oDefaults.sIdToggleInterior);return e&&e.checked?jQuery($e.oDefaults.sSelectorItemInterior).length:t&&t.checked?jQuery($e.oDefaults.sSelectorItemExteriorOpen).length:jQuery($e.oDefaults.sSelectorItemExterior).length},$e.calculateCurrentItem=function(t){var e=document.getElementById($e.oDefaults.sIdToggleExteriorOpen),n=document.getElementById($e.oDefaults.sIdToggleInterior);return n&&n.checked?$e.calculateCurrentPosition($e.oDefaults.sSelectorItemInterior,t):e&&e.checked?$e.calculateCurrentPosition($e.oDefaults.sSelectorItemExteriorOpen,t):$e.calculateCurrentPosition($e.oDefaults.sSelectorItemExterior,t)},$e.updateCounter=function(){var t=$e.calculateTotalItems(),e=$e.calculateCurrentItem(t);void 0!==t&&(t=t<10?"0"+t:t,e=e<10?"0"+e:e,jQuery($e.oDefaults.sSelectorRenderingCounterTotal).html(t),jQuery($e.oDefaults.sSelectorRenderingCounterCurrent).html(e))},$e.calculateCurrentPosition=function(t,e){var n,i=jQuery(t);for(n=0;n<e;n++)if(i.eq(n).hasClass($e.oDefaults.sClassActive))return n+1},$e.activateDrag=function(t){jQuery($e.oDefaults.sSelectorStageImages).hasClass($e.oDefaults.sClassAnimate)||("touchstart"===t.type?$e.swipeX=t.originalEvent.pageX:$e.swipeX=t.pageX,jQuery(document).on("mousemove",$e.drag),jQuery(document).on("touchmove",$e.drag))},$e.deactivateDrag=function(){var t=jQuery($e.oDefaults.sSelectorActiveStageImage).attr("data-renderimage-view");jQuery(document).off("mousemove",$e.drag),jQuery(document).off("touchmove",$e.drag),jQuery($e.oDefaults.sSelectorThumbnail).removeClass($e.oDefaults.sClassActive),jQuery($e.oDefaults.sSelectorThumbnail+"."+t).addClass($e.oDefaults.sClassActive)},$e.activateSwipe=function(t){"touchstart"===t.type?$e.swipeX=t.originalEvent.pageX:$e.swipeX=t.pageX,jQuery(document).on("mousemove",$e.swipe),jQuery(document).on("touchmove",$e.swipe)},$e.deactivateSwipe=function(){jQuery(document).off("mousemove",$e.swipe),jQuery(document).off("touchmove",$e.swipe)},$e.retrieveCurrentPos=function(t){return"touchmove"===t.type?t.originalEvent.pageX:t.pageX},$e.doLeftDragAction=function(t){t.removeClass($e.oDefaults.sClassActive),t.prev().attr("data-view")&&t.prev().attr("data-view").indexOf("exterior")>=0?t.prev().addClass($e.oDefaults.sClassActive):t.prev().prev().addClass($e.oDefaults.sClassActive)},$e.doRightDragAction=function(t){t.next().length>0&&t.next().attr("data-view")&&t.next().attr("data-view").indexOf("exterior")>=0?(t.removeClass($e.oDefaults.sClassActive),t.next().addClass($e.oDefaults.sClassActive)):t.attr("data-view")&&t.attr("data-view").indexOf("closeup")>=0&&(t.removeClass($e.oDefaults.sClassActive),jQuery($e.oDefaults.sSelectorFirstStageImageWrapper).addClass($e.oDefaults.sClassActive))},$e.doDragAction=function(t,e){var n=jQuery($e.oDefaults.sSelectorActiveStageImageWrapper);e&&n.prev().length>0?$e.doLeftDragAction(n):t&&$e.doRightDragAction(n)},$e.drag=function(t){var e=!1,n=!1,i=!1,r=$e.retrieveCurrentPos(t);r>=$e.swipeX+55?(e=!0,n=!0,$e.swipeX+=55):r<=$e.swipeX-55&&(e=!0,i=!0,$e.swipeX-=55),e&&$e.doDragAction(i,n)},$e.getEventPos=function(t){return"touchmove"===t.type?t.originalEvent.pageX:t.pageX},$e.swipe=function(t){var e=$e.getEventPos(t);e>=$e.swipeX+5?($e.deactivateSwipe(t),$e.handlerBackClick(t)):e<=$e.swipeX-5&&($e.deactivateSwipe(t),$e.handlerNextClick(t))},$e.determineCarlineFallbackGroup=function(t){var e=t.charAt(0);return 0!==t.indexOf("rs")&&0!==t.indexOf("s")||(e="a"),0===t.indexOf("tt")&&(e="r"),e},$e.getFallbackThumb=function(t,e){var n=window.location.href.split("/");return n[2].indexOf("audi.local")>=0?n[0]+"//"+n[2]+"/cms4i-nemo/fallback-renderings/"+t+"-thumbnail-"+e+".jpg":n[0]+"//"+n[2]+SETUPS.get("nemo.url.static")+"/cms4i-nemo/fallback-renderings/"+t+"-thumbnail-"+e+".jpg"},$e.getFallbackImg=function(t,e){var n=window.location.href.split("/");return n[2].indexOf("audi.local")>=0?n[0]+"//"+n[2]+"/cms4i-nemo/fallback-renderings/"+t+"-fullscreen-"+e+".jpg":n[0]+"//"+n[2]+SETUPS.get("nemo.url.static")+"/cms4i-nemo/fallback-renderings/"+t+"-fullscreen-"+e+".jpg"},$e.getRenderImageType=function(t,e){var n="thumbnail";return t[e].hasOwnProperty("thumbnail.16-9")?n="thumbnail.16-9":t[e].hasOwnProperty("thumbnail.new")&&(n="thumbnail.new"),n},$e.getThumbnail=function(t,e,n,i){var r=t[e][i];return void 0!==r&&(r=-1===r.indexOf("?")?"http://mediaservice.audi.com/media"+r+"?alt="+n:"http://mediaservice.audi.com/media"+r),r},$e.getFullImg=function(t,e,n){let i;return t&&e&&t.hasOwnProperty(e)&&t[e]?(i=t[e].hasOwnProperty("fullscreen.new")?t[e]["fullscreen.new"]:t[e].fullscreen||"",i?(i="http://mediaservice.audi.com/media"+i,i&&-1===i.indexOf("?")&&(i+="?alt="+n),i):null):""},$e.checkForActiveImage=function(t,e,n){t===e&&($e.activeImageSrc=n)},$e.compliesWithCondition=function(t,e,n,i){var r=!1;return 0===e.indexOf(n)&&t.hasOwnProperty(e)&&$e.activeRenderings.indexOf(e)>=0&&(i&&e.indexOf("_open")>0||!i&&e.indexOf("_open")<0)&&(r=!0),r},$e.determineAssetType=function(t){return t.indexOf("_open")>0?t.substring(0,t.indexOf("_open")):t},$e.isOpen=function(t){var e=!1;return t.indexOf("_open")>=0&&(e=!0),e},$e.extractAssets=function(t,e,n,i){var r,o,a,s,l,c,u=[],d=$e.determineCarlineFallbackGroup(t),m=$e.determineAssetType(i),g=$e.isOpen(i);for(c in e)e[c]&&$e.compliesWithCondition(e,c,m,g)&&(s=$e.getFallbackThumb(d,c),a=$e.getFallbackImg(d,c),l=$e.getRenderImageType(e,c),o=$e.getThumbnail(e,c,s,l),(r=$e.getFullImg(e,c,a))&&($e.checkForActiveImage(c,n,r),u.push({name:c,image:r,thumbnail:o,type:l})));return $e.sortThumbs(m,g,u)},$e.customArraySort=function(t,e){var n=["exterior_straight_front","exterior_front","exterior","exterior_back","exterior_straight_back","closeup_lights","closeup_wheels","interior","dashboard","rearseat"];return e&&(n=["exterior_straight_front_open","exterior_front_open","exterior_open","exterior_back_open","exterior_straight_back_open","closeup_lights_open","closeup_wheels_open","interior","dashboard","rearseat"]),function(e,i){return n.indexOf(e[t])<n.indexOf(i[t])?-1:1}},$e.sortThumbs=function(t,e,n){return n.sort($e.customArraySort("name",e))},$e.toggleCheckAndPreload=function(){$e.exteriorOpenToggle.checked?($e.exteriorToggle.checked=!0,$e.preloadDefinedImages($e.preloadImages,"exterior")):($e.exteriorOpenToggle.checked=!0,$e.preloadDefinedImages($e.preloadImagesOpen,"exterior_open"))},$e.setDefaultActiveThumbnail=function(){jQuery($e.oDefaults.sSelectorRenderingLayer).hasClass($e.oDefaults.sClassCabrioOpen)?jQuery($e.oDefaults.sSelectorItemExteriorOpen).first().addClass($e.oDefaults.sClassActive):jQuery($e.oDefaults.sSelectorItemExterior).first().addClass($e.oDefaults.sClassActive)},$e.retrieveCorrespondingCabrioKey=function(t){return t.indexOf("_open")>0?t.substring(0,t.indexOf("_open")):t+"_open"},$e.handlerOpenToggle=function(t){var e,n,i=jQuery($e.oDefaults.sSelectorThumbnailActive),r=i.attr("data-key");t.preventDefault(),jQuery($e.oDefaults.sSelectorThumbnailArea).addClass($e.oDefaults.sClassNoThumbnailAnimation),$e.toggleCheckAndPreload(),setTimeout((function(){jQuery($e.oDefaults.sSelectorThumbnailArea).removeClass($e.oDefaults.sClassNoThumbnailAnimation)}),50),0===i.length&&$e.setDefaultActiveThumbnail(),jQuery($e.oDefaults.sSelectorRenderingLayer).hasClass($e.oDefaults.sClassCabrioOpen)?(jQuery($e.oDefaults.sSelectorRenderingLayer).removeClass($e.oDefaults.sClassCabrioOpen),jQuery($e.oDefaults.sSelectorOpenButton).html(window.i18n["rendering-layer.cabrio-open"])):(jQuery($e.oDefaults.sSelectorRenderingLayer).addClass($e.oDefaults.sClassCabrioOpen),jQuery($e.oDefaults.sSelectorOpenButton).html(window.i18n["rendering-layer.cabrio-close"])),r&&(e=$e.retrieveCorrespondingCabrioKey(r),n=jQuery("."+e),$e.activateImage(n,!1,!1))},Ke.determinePrevFromActive=function(t){var e;return t.hasClass($e.oDefaults.sClassItemExterior)?e=jQuery($e.oDefaults.sSelectorThumbnailActive).parent().prev().children($e.oDefaults.sSelectorItemExterior).get(0):t.hasClass($e.oDefaults.sClassItemExteriorOpen)?e=jQuery($e.oDefaults.sSelectorThumbnailActive).parent().prev().children($e.oDefaults.sSelectorItemExteriorOpen).get(0):t.hasClass($e.oDefaults.sClassItemInterior)&&(e=jQuery($e.oDefaults.sSelectorThumbnailActive).parent().prev().children($e.oDefaults.sSelectorItemInterior).get(0)),e},Ke.determineDefaultPrev=function(){return $e.interiorToggle.checked?jQuery($e.oDefaults.sSelectorItemInterior).last().get(0):$e.exteriorOpenToggle&&$e.exteriorOpenToggle.checked?jQuery($e.oDefaults.sSelectorItemExteriorOpen).last().get(0):jQuery($e.oDefaults.sSelectorItemExterior).last().get(0)},$e.handlerBackClick=function(t){var e,n=jQuery($e.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Ke.determinePrevFromActive(n)),void 0===e&&(e=Ke.determineDefaultPrev()),$e.activateImage(e,!0,"prev")},Ke.determineNextFromActive=function(t){var e;return t.hasClass($e.oDefaults.sClassItemExterior)?e=jQuery($e.oDefaults.sSelectorThumbnailActive).parent().next().children($e.oDefaults.sSelectorItemExterior).get(0):t.hasClass($e.oDefaults.sClassItemExteriorOpen)?e=jQuery($e.oDefaults.sSelectorThumbnailActive).parent().next().children($e.oDefaults.sSelectorItemExteriorOpen).get(0):t.hasClass($e.oDefaults.sClassItemInterior)&&(e=jQuery($e.oDefaults.sSelectorThumbnailActive).parent().next().children($e.oDefaults.sSelectorItemInterior).get(0)),e},Ke.determineDefaultNext=function(){return $e.interiorToggle.checked?jQuery($e.oDefaults.sSelectorItemInterior).first().get(0):$e.exteriorOpenToggle&&$e.exteriorOpenToggle.checked?jQuery($e.oDefaults.sSelectorItemExteriorOpen).first().get(0):jQuery($e.oDefaults.sSelectorItemExterior).first().get(0)},$e.handlerNextClick=function(t){var e,n=jQuery($e.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Ke.determineNextFromActive(n)),void 0===e&&(e=Ke.determineDefaultNext()),$e.activateImage(e,!0,"next")},$e.handlerThumbnailClick=function(){jQuery(this).hasClass($e.oDefaults.sClassActive)||$e.activateImage(this,!0,!1)},$e.handlerPlusButtonClick=function(t){var e=jQuery(this).parent().parent().find(".nm-rl-placeholder"),n=jQuery(this).parent().parent().find(".nm-renderinglayer-expander");t.preventDefault(),e.trigger("click"),n.trigger("click")},$e.doStageAnimation=function(t){var e=jQuery(".ie8").length>0,n=jQuery(".ie9").length>0;e||n?jQuery($e.oDefaults.sSelectorStageImages).animate({left:t},500):jQuery($e.oDefaults.sSelectorStageImages).css("left",t)},$e.determineAnimationDirection=function(t,e,n){var i=!1;return!1===e?n.parent().prevAll().find(t).length>0&&(i=!0):"prev"===e&&(i=!0),i},$e.activateImage=function(t,e,n){var i=jQuery($e.oDefaults.sSelectorThumbnailActive),r=jQuery(t).attr("data-key"),o=jQuery(".nm-rendersource-"+r),a=jQuery(".nm-rendersource-"+i.attr("data-key")).closest(".nm-renderinglayer-imagewrapper"),s=o.closest(".nm-renderinglayer-imagewrapper"),l=!1;jQuery($e.oDefaults.sSelectorStageImages).hasClass($e.oDefaults.sClassAnimate)||(jQuery($e.oDefaults.sSelectorThumbnail).removeClass($e.oDefaults.sClassActive),jQuery(t).addClass($e.oDefaults.sClassActive),!0===e?((l=$e.determineAnimationDirection(t,n,i))?(jQuery($e.oDefaults.sSelectorStageImages).css("left","-100%"),a.css("left","50%"),s.css("left","0")):(jQuery($e.oDefaults.sSelectorStageImages).css("left","0"),a.css("left","0"),s.css("left","50%")),s.addClass($e.oDefaults.sClassActive),setTimeout((function(){jQuery($e.oDefaults.sSelectorStageImages).addClass($e.oDefaults.sClassAnimate),l?$e.doStageAnimation("0"):$e.doStageAnimation("-100%"),setTimeout((function(){a.css("left","0"),a.removeClass($e.oDefaults.sClassActive),jQuery($e.oDefaults.sSelectorStageImages).css("left","0"),s.css("left","0"),$e.activateSwipeOrDrag(),jQuery($e.oDefaults.sSelectorStageImages).removeClass($e.oDefaults.sClassAnimate)}),500)}),10)):(s.addClass($e.oDefaults.sClassActive),a.removeClass($e.oDefaults.sClassActive),$e.activateSwipeOrDrag()),setTimeout((function(){$e.updateCounter()}),50))},Ke.initialize=function(t){$e.eventBus=t,$e.addEvents()};const Xe={},Je={__:Xe};Xe.oDefaults={sIdCanvas:"avecanvas",sClassActive:"nm-active",sClassAVE:"ave-layer",sSelectorOptionsWrapper:".nm-ave-animation-selector-wrapper",sSelectorStageWrapper:".nm-renderinglayer-stagewrapper",sSelectorBack:".nm-renderinglayer .nm-backarrow",sSelectorNext:".nm-renderinglayer .nm-nextarrow",sSelectorOuterRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingStageWrapper:".nm-renderinglayer-stagewrapper",sSelectorThumbnail:".nm-renderinglayer-item .nm-rl-placeholder",sSelectorThumbnailActive:".nm-renderinglayer-item .nm-rl-placeholder.nm-active",sSelectorAVEContainerActive:".nm-md-ave-container.nm-active",sSelectorActiveStageImageWrapper:".nm-renderinglayer-imagewrapper.nm-active"},Xe.disableStreamReadyEvent=function(){Xe.eventBus.off(i.appEvents.AVE_STREAM_READY,Ke.disableFor3D)},Xe.handlerLayerClosed=function(){var t,e;jQuery(Xe.oDefaults.sSelectorRenderingLayer).length>0&&jQuery(Xe.oDefaults.sSelectorRenderingLayer).first().hasClass(Xe.oDefaults.sClassAVE)&&(jQuery(".nm-3d-unloading").length>0?(e=(t=jQuery(".nm-3d-unloading").prev()).attr("id"),Xe.moveOptionsIntoCanvas(),k.moveAVE(Xe.oDefaults.sIdCanvas,e),t.addClass(Xe.oDefaults.sClassActive)):(k.deactivate(Xe.oDefaults.sIdCanvas),jQuery(Xe.oDefaults.sSelectorOptionsWrapper).remove()))},Xe.handlerThumbnailClick=function(){jQuery(this).hasClass(Xe.oDefaults.sClassActive)||Xe.activateView(this)},Xe.handlerBackClick=function(t){var e,n=jQuery(Xe.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Ke.determinePrevFromActive(n)),void 0===e&&(e=Ke.determineDefaultPrev()),Xe.activateView(e)},Xe.handlerNextClick=function(t){var e,n=jQuery(Xe.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Ke.determineNextFromActive(n)),void 0===e&&(e=Ke.determineDefaultNext()),Xe.activateView(e)},Xe.activateView=function(t){var e=jQuery(Xe.oDefaults.sSelectorThumbnailActive).attr("data-key"),n=jQuery(t).attr("data-key");jQuery(Xe.oDefaults.sSelectorThumbnail).removeClass(Xe.oDefaults.sClassActive),jQuery(t).addClass(Xe.oDefaults.sClassActive),n!==e&&k.showPerspective(n)},Xe.captureAVEDrag=function(t){jQuery("body").off("click",".nm-layer-wrapper",i.layerApi.wrapperClickHandler),jQuery(".nm-layer-wrapper").off("mousedown",Xe.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").on("mousedown",Xe.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").off("touchstart",Xe.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").on("touchstart",Xe.handlerAVEWrapperClick)},Xe.activateThumbListeners=function(){jQuery(Xe.oDefaults.sSelectorThumbnail).on("click",Xe.handlerThumbnailClick),jQuery(Xe.oDefaults.sSelectorBack).on("click",Xe.handlerBackClick),jQuery(Xe.oDefaults.sSelectorNext).on("click",Xe.handlerNextClick),jQuery("#"+Xe.oDefaults.sIdCanvas).off("mousedown",Xe.captureAVEDrag),jQuery("#"+Xe.oDefaults.sIdCanvas).off("touchstart",Xe.captureAVEDrag),jQuery("#"+Xe.oDefaults.sIdCanvas).on("mousedown",Xe.captureAVEDrag),jQuery("#"+Xe.oDefaults.sIdCanvas).on("touchstart",Xe.captureAVEDrag)},Xe.handlerAVEWrapperClick=function(){jQuery("body").off("mousedown",".nm-layer-wrapper",i.layerApi.wrapperClickHandler),jQuery("body").on("mousedown",".nm-layer-wrapper",i.layerApi.wrapperClickHandler),jQuery("body").off("touchstart",".nm-layer-wrapper",i.layerApi.wrapperClickHandler),jQuery("body").on("touchstart",".nm-layer-wrapper",i.layerApi.wrapperClickHandler)},Xe.moveOptionsOutOfCanvas=function(){jQuery(Xe.oDefaults.sSelectorOptionsWrapper).prependTo(jQuery(Xe.oDefaults.sSelectorStageWrapper))},Xe.moveOptionsIntoCanvas=function(){jQuery(Xe.oDefaults.sSelectorOptionsWrapper).prependTo(jQuery("#"+Xe.oDefaults.sIdCanvas))},Xe.retrieveActiveViewPerspective=function(){var t=jQuery(Xe.oDefaults.sSelectorActiveStageImageWrapper);return t&&t.attr("data-view")?t.attr("data-view"):"exterior_front"},Xe.prepareDomForAVE=function(){null===document.getElementById(Xe.oDefaults.sIdCanvas)&&jQuery(Xe.oDefaults.sSelectorRenderingStageWrapper).prepend('<div id="'+Xe.oDefaults.sIdCanvas+'" class="nm-md-ave-container"></div>'),Xe.eventBus.on(i.appEvents.AVE_STREAM_READY,Ke.disableFor3D),jQuery(Xe.oDefaults.sSelectorOuterRenderingLayer).addClass(Xe.oDefaults.sClassAVE)},Xe.handlerInjectAVE=function(){var t=jQuery(Xe.oDefaults.sSelectorAVEContainerActive);k.isAveAvailable()?(console.log("AVE - prepare dom"),Xe.prepareDomForAVE(),t.length>0?(k.moveAVE(t.attr("id"),Xe.oDefaults.sIdCanvas,!1),Ke.disableFor3D()):k.activateAVE(Xe.oDefaults.sIdCanvas,Xe.retrieveActiveViewPerspective()),Xe.handlerFollowupInjection()):console.log("renderinginjector - no matching carline")},Xe.handlerFollowupInjection=function(){Xe.activateThumbListeners(),Xe.moveOptionsOutOfCanvas()},Xe.handlerLayerOpened=function(){jQuery(Xe.oDefaults.sSelectorRenderingLayer).length>0?y.isAve2CloudAvailable()?(Xe.prepareDomForAVE(),Xe.eventBus.emit("AVE2CLOUD.CONTAINER.READY")):k.isActiveCarline()?!0===k.isAveAvailable()?Xe.handlerInjectAVE():Xe.eventBus.on(i.appEvents.AVE_AVAILABLE,Xe.handlerInjectAVE):(jQuery(Xe.oDefaults.sSelectorOuterRenderingLayer).removeClass(Xe.oDefaults.sClassAVE),jQuery("#"+Xe.oDefaults.sIdCanvas).remove()):console.log("renderinginjector - no matching dom element")},Xe.addEvents=function(){Xe.eventBus.on(i.appEvents.RENDERINGLAYER_LOADED,Xe.handlerLayerOpened),Xe.eventBus.on("jslayer.close",Xe.handlerLayerClosed),Xe.eventBus.on("jslayer.close",Xe.disableStreamReadyEvent)},Je.initialize=function(t){Xe.eventBus=t,Xe.addEvents()};class Ze{constructor(){1===SETUPS.get("scope.nemo.configuration.force.initial.request")&&(this._alreadyCalled=!1,this._makeInitialCallForScsAttributesIfNecessary=this._makeInitialCallForScsAttributesIfNecessary.bind(this),l.stateRegistry.subscribeToStore(X.a,this._makeInitialCallForScsAttributesIfNecessary))}static get pollTime(){return 3e4}async _makeInitialCallForScsAttributesIfNecessary(t){if(t&&t.configuration&&!t.configuration["stock-car-attrs"]&&!1===this._alreadyCalled){l.stateRegistry.unsubscribeFromStore(X.a,this._makeInitialCallForScsAttributesIfNecessary),this._alreadyCalled=!0;try{await a.polling.wait(p.a.isDataInitialized,Ze.pollTime);ct.a.getConfiguration()["stock-car-attrs"]||p.a.loadConfigurationByPrString(ct.a.getPrString(),ct.a.getSubsessionID()).then((function(t){ct.a.adoptConfiguration(t)}))}catch(t){return console.log("scs initial attribute loading timeout"),{}}}}}const tn=new Ze,en={},nn={__:en};en.oDefaults={classBasketMatchingContainer:".nm-basket-matching",classBasketMatchingCarousel:".nm-basket-matching-car-slider",classBasketMatchingListSlider:".nm-basket-matching-list-slider",classBasketArrowLeft:".nm-basket-matching-prev",classBasketArrowRight:".nm-basket-matching-next",classBasketThumb:".nm-basket-matching-list-small ul li label"},en.currentMatchingVehicles=null,en.eventBus=null,en.scDetailLinkPattern=null,en.carouselItemCount=null,en.carouselItemWidth=null,en.carouselItemHeight=null,en.carouselWidth=null,en.carouselIndex=0,en.carouselLabelStep=!1,en.carouselItemWidthTransform=null,en.addEvents=function(){en.eventBus.on(i.appEvents.STOCKCAR_UPDATE,en.handleStockcarResults),en.addClickEvents()},en.addClickEvents=function(){var t=a.dom.getEventDelegate("body");t.on("click",en.oDefaults.classBasketArrowLeft,en.prevArrowClickHandler),t.on("click",en.oDefaults.classBasketArrowRight,en.nextArrowClickHandler),t.on("click",en.oDefaults.classBasketThumb,en.thumbClickHandler)},en.removeClickEvents=function(){var t=a.dom.getEventDelegate("body");t.off("click",en.oDefaults.classBasketArrowLeft,en.prevArrowClickHandler),t.off("click",en.oDefaults.classBasketArrowRight,en.nextArrowClickHandler),t.off("click",en.oDefaults.classBasketThumb,en.thumbClickHandler)},en.handlePageLoaded=function(){en.currentMatching&&document.querySelector(en.oDefaults.selectorModuleContainer)&&en.handleStockcarResults(en.currentMatching)},en.handleStockcarResults=function(t){var e;t&&(en.currentMatchingVehicles=t.vehicleBasic?t.vehicleBasic:[],e=en.parseResonse(t),en.renderTemplate(e))},en.parseResonse=function(t){var e,n,i,r,o={cars:[]},a=t.vehicleBasic.length;for(e=0,n=a;e<n;e++)(i=t.vehicleBasic[e])&&(r={id:i.id,model:i.symbolicCarline.description,engine:i.modelCode.description,image:en.setImageSrc(i),price:en.getFormattedPrice(i.typedPrices,"retail"),link:en.setDetailsURL(i.id),svdVersion:i.svdVersion,percentage:Math.round(i.percentage||i.displayPercentage)},o.cars.push(r));return o.result_link=en.setResultsURL(t.filterExpression),o.totalCount=a,o},en.setImageSrc=function(t={}){let e,n,i;return t.pictures&&t.pictures.length&&(n=t.pictures.find(t=>"n5c01"===t.key))?e=n.url:t.fallbackPictures&&t.fallbackPictures.length&&(i=t.fallbackPictures.find(t=>"render_16x96"===t.key))&&(e=i.url),e},en.setResultsURL=function(t){var e=en.getResultsLinkUrl()||"";return e=e.replace(/SC_ATTR_FILTERS/i,t)},en.getResultsLinkUrl=function(){var t=document.querySelector(en.oDefaults.classBasketMatchingContainer);return t?t.getAttribute("data-result-url"):null},en.setDetailsURL=function(t){var e=en.getDetailsLinkUrl()||"";return e=e.replace(/SC_VEHICLE_ID/i,t)},en.getDetailsLinkUrl=function(){var t=document.querySelector(en.oDefaults.classBasketMatchingContainer);return t?t.getAttribute("data-detail-url"):null},en.getFormattedPrice=function(t,e){for(var n=t.length;n--;)if(t[n].type===e)return t[n].formatted;return null},en.renderTemplate=function(t){var e,n=document.querySelector(en.oDefaults.classBasketMatchingContainer);n&&(n.innerHTML="",t.cars.length>1&&(e=a.template.render('{{~ it.cars :car :index }}\n<input type="radio" id="nm-basket-matching-list-car{{=index+1}}" name="nm-basket-matching-list-slider" class="nm-basket-matching-list-slider" data-index="{{=index}}" {{? index === 0}}checked="checked" {{?}} />\n{{~}}\n<label class="nm-basket-toggle-widgets-label-fullarea" for="nm-basket-toggle-widgets"></label>\n<label class="nm-basket-toggle-widgets-label" for="nm-basket-toggle-widgets">\n\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'basket.matching.headline\'] || "VerfÃ¼gbare Neuwagen"}}</span>\n\t<svg class="nm-icon-arrow">\n\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t</svg>\n</label>\n<div class="nm-basket-matching-wrap">\n\t<div class="nm-basket-matching-car-slider">\n\n\t\t<div class="nm-basket-matching-next"></div>\n\t\t<div class="nm-basket-matching-prev"></div>\n\t\t<div class="nm-basket-matching-counter nm-el-lbl nm-el-lbl-01">\n\t\t\t<span class="nm-basket-matching-counter-current">1</span>/<span class="nm-basket-matching-counter-total">{{=it.totalCount}}</span>\n\t\t</div>\n\t\t<ul>\n\t\t\t{{~ it.cars :car :index }}\n\t\t\t\t<li data-index="{{=index}}">\n\t\t\t\t\t<div class="nm-basket-matching-car-container">\n\t\t\t\t\t\t<a class="nm-layerLink" href="{{=car.link}}">\n\t\t\t\t\t\t\t<div {{? car.image !== \'undefined\' && car.image !== \'\' }} style="background-image: url({{=car.image}});" class="nm-basket-matching-car-image" {{??}} class="nm-basket-matching-car-image nm-basket-matching-car-fallback" {{?}} ></div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a class="nm-layerLink" href="{{=car.link}}">\n\t\t\t\t\t\t<div class="nm-basket-matching-car-info">\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-model nm-el-lbl nm-el-lbl-01 nm-at-lbl-b">{{=car.model}}</span>\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-description nm-el-lbl nm-el-lbl-01">{{=car.engine}}</span>\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-price nm-el-lbl nm-el-lbl-01">{{=car.price}}</span>\n\n\t\t\t\t\t\t\t<div class="nm-basket-matching-circle" data-progress="{{=car.percentage}}">\n\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t{{var circle_degree = parseInt(car.percentage * 1.8);}}\n\t\t\t\t\t\t\t\t{{var circle_degree_fix = parseInt(circle_degree * 2);}}\n\t\t\t\t\t\t\t\t{{var full_percentage = car.percentage<50 ? 0 : car.percentage;}}\n\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full .fill {\n\t\t\t\t\t\t\t\t\t\tclip: rect(0px, 25px, {{=full_percentage}}px, 0px);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full, .nm-basket-matching-circle .circle-{{=index}} .mask .fill {\n\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    animation: fill-{{=index}}  ease-in-out 3s;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask .fill.fix {\n\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    animation: fill-fix-{{=index}} ease-in-out 3s;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full, .nm-basket-matching-circle .circle-{{=index}} .mask.full .fill {\n\t\t\t\t\t\t\t\t\t\tborder-radius: 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t@keyframes fill-{{=index}}  {\n\t\t\t\t\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t@keyframes fill-fix-{{=index}}  {\n\t\t\t\t\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t<div class="outer-circle"></div>\n\t\t\t\t\t\t\t\t<div class="circle-{{=index}}">\n\t\t\t\t\t\t\t\t\t<div class="mask full">\n\t\t\t\t\t\t\t\t\t\t<div class="fill"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="mask half">\n\t\t\t\t\t\t\t\t\t\t<div class="fill"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="fill fix"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="inner-circle">{{=car.percentage}}%</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t</ul>\n\t</div>\n\t<div class="nm-basket-matching-list-small-wrap">\n\t\t<div class="nm-basket-matching-list-small">\n\t\t\t<ul>\n\t\t\t\t{{~ it.cars :car :index }}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<label for="nm-basket-matching-list-car{{=index+1}}" {{? !!car.image }} style="background-image: url({{=car.image}});" {{??}} class="nm-basket-matching-car-fallback" {{?}} data-index="{{=index}}"></label>\n\t\t\t\t\t</li>\n\t\t\t\t{{~}}\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="nm-basket-matching-more-btn">\n\t\t<a href="{{=it.result_link}}" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-at-btn-inv"><span>{{=window.i18n[\'basket.matching.button.label\'] || "Weitere Neuwagen"}}</span></a>\n\t</div>\n</div>',t),n.innerHTML=e,en.initCarousel()))},en.initCarousel=function(){var t=document.querySelector(en.oDefaults.classBasketMatchingCarousel+" ul"),e=document.querySelector(en.oDefaults.classBasketMatchingCarousel+" ul li:last-child");en.carouselItemCount=parseInt(t.childNodes.length,10),en.carouselItemWidthTransform=100/en.carouselItemCount,en.carouselItemWidth="100",en.carouselWidth=100*en.carouselItemCount+"%",t.setAttribute("style","width:"+en.carouselWidth+";transform: translate(-"+en.carouselItemWidthTransform+"%);"),t.insertBefore(e,t.firstChild),a.swipe.register(en.onSwipeFinishHandler,en.oDefaults.classBasketMatchingCarousel,{swipedistance:50})},en.getCurrentIndex=function(){var t=a.dom.getElementsArray(en.oDefaults.classBasketMatchingListSlider),e=0;return t.forEach((function(t,n){t.checked&&(e=n)})),e},en.setCurrentIndex=function(t){var e=en.getCurrentIndex();t!==e&&(en.updateThumbPosition(t),en.updateCounter(t+1),en.animation(e,t))},en.nextArrowClickHandler=function(){var t=en.getCurrentIndex();t=++t%en.carouselItemCount,en.setCurrentIndex(t)},en.prevArrowClickHandler=function(){var t=en.getCurrentIndex();(t=--t)<0&&(t=en.carouselItemCount-1),en.setCurrentIndex(t)},en.onSwipeFinishHandler=function(t){if(t.direction&&0!==t.move)switch(t.direction.horizontal){case a.swipe.LEFT:en.nextArrowClickHandler();break;default:en.prevArrowClickHandler()}},en.animation=function(t,e){var n;en.removeClickEvents(),t<e?(n="next",0===t&&e===en.carouselItemCount-1&&(n="prev")):(n="prev",t===en.carouselItemCount-1&&0===e&&(n="next")),"prev"===n?en.animatePrev(t,e):en.animateNext(t,e)},en.animatePrev=function(t,e){var n=document.querySelector(en.oDefaults.classBasketMatchingCarousel+" ul"),i=document.querySelector(en.oDefaults.classBasketMatchingCarousel+" ul li:last-child");a.dom.handleTransition(n).then((function(r){r.classList.remove("slide-transition"),t-e>1&&(i=document.querySelector(en.oDefaults.classBasketMatchingCarousel+" ul li:last-child")),n.insertBefore(i,n.firstChild),n.setAttribute("style","width:"+en.carouselWidth+";transform: translate(-"+en.carouselItemWidthTransform+"%);"),en.addClickEvents()})),t-e>1?(n.insertBefore(i,n.firstChild),n.setAttribute("style","width:"+en.carouselWidth+";transform: translate(-"+2*en.carouselItemWidthTransform+"%);"),n.classList.add("slide-transition"),n.setAttribute("style","width:"+en.carouselWidth+";transform: translate(0)")):(n.classList.add("slide-transition"),n.setAttribute("style","width:"+en.carouselWidth+";transform: translate(0)"))},en.animateNext=function(t,e){var n=document.querySelector(en.oDefaults.classBasketMatchingCarousel+" ul"),i=document.querySelector(en.oDefaults.classBasketMatchingCarousel+" ul li:first-child");a.dom.handleTransition(n).then((function(n){n.classList.remove("slide-transition"),n.appendChild(i,n.firstChild),e-t>1&&(i=document.querySelector(en.oDefaults.classBasketMatchingCarousel+" ul li:first-child"),n.appendChild(i,n.firstChild)),n.setAttribute("style","width:"+en.carouselWidth+";transform: translate(-"+en.carouselItemWidthTransform+"%);"),en.addClickEvents()})).catch((function(t){console.log("Promise not completed ",t)})),n.classList.add("slide-transition"),n.setAttribute("style","width:"+en.carouselWidth+";transform: translate(-"+en.carouselItemWidthTransform*(e-t<0?2:e-t+1)+"%);")},en.thumbClickHandler=function(t){var e=parseInt(t.target.getAttribute("data-index"),10);en.setCurrentIndex(e)},en.updateThumbPosition=function(t){var e=a.dom.getElementsArray(".nm-basket-matching-list-slider");e.map((function(t){t.checked=!1})),e[t].checked=!0},en.updateCounter=function(t){document.querySelector(".nm-basket-matching-counter-current").innerHTML=t},nn.initialize=function(t){en.eventBus=t,en.addEvents()};const rn={},on={__:rn};rn.oDefaults={classBasketMatchingContainer:".nm-basket-matching"},rn.eventBus=null,rn.matchingSize=6,rn.svdVersion=null,rn.stckSetups=null,rn.addEvents=function(){rn.eventBus.on(i.appEvents.CONFIG_UPDATE,rn.triggerStckRequest),rn.eventBus.on(i.appEvents.PAGE_READY,rn.triggerStckRequest)},rn.isMatchingActive=function(){const t=!!SETUPS.get("scope.nemo.scs-matching"),e=SETUPS.get("stockcar.context"),n=!!SETUPS.get("stockcar.scs.base.url"),i=!!SETUPS.get("stockcar.scs.market.path");return t&&!e&&n&&i},rn.initialize=function(){!0===rn.isMatchingActive()&&rn.getSVDVersion().then((function(){rn.triggerStckRequest(),rn.addEvents()}))},rn.getStckUrlSetup=function(t){return rn.stckSetups={},rn.stckSetups.baseUrl=SETUPS.get("stockcar.scs.base.url"),rn.stckSetups.market=SETUPS.get("stockcar.scs.market.path"),rn.stckSetups.versionId=rn.getStckVersionString(t),rn.stckSetups},rn.getStckVersionString=t=>{let e=SETUPS.get("stockcar.scs.default.version")?SETUPS.get("stockcar.scs.default.version")+"/":"",n=SETUPS.get("stockcar.scs.version.mapping");return n&&Object.keys(n).length>0&&(e="string"==typeof n[t]?n[t]+"/":e),e},rn.triggerStckRequest=function(){if(!0===rn.isMatchingActive())return rn.startStckRequests().then(t=>(rn.svdVersion=t&&t.header&&t.header.dataVersion?t.header.dataVersion:rn.svdVersion,rn.broadcastStckMatching(t))).catch(t=>console.log(t))},rn.startStckRequests=async function(){var t,e=rn.getMatchingUrl();if(e){const n=await rn.getSVDVersion();if(!(t=rn.getRequestParams(n)))return Promise.reject("missing SCS Attributesâ€¦");const i=new URLSearchParams(t),r=e+(e.indexOf("?")<0?"?":"&")+i.toString();return fetch(r,{credentials:"omit"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)})}return Promise.reject("no version and matchUrlâ€¦")},rn.getBasketContainer=function(){return document.querySelector(rn.oDefaults.classBasketMatchingContainer)},rn.getMatchingAttributes=function(){var t,e=rn.getBasketContainer();return(t=s.a.getSCSmatchingAttributes())&&t.length>0?t.join(","):e&&e.getAttribute("data-attributes").replace(/[[\s\]']+/g,"")||null},rn.getRequestParams=function(t){var e=[],n=rn.getMatchingAttributes();return n&&n.length&&t?(e.push("svd="+t),e.push("size="+rn.matchingSize),e.push("attributes="+n),e=e.join("&")):null},rn.broadcastStckMatching=function(t){return rn.eventBus.emit(i.appEvents.STOCKCAR_UPDATE,t),t},rn.getVersionUrl=function(){var t,e=rn.stckSetups?rn.stckSetups:rn.getStckUrlSetup("version");return e.baseUrl&&e.versionId&&e.market&&(t=e.baseUrl+e.versionId+"version/"+e.market),t},rn.getMatchingUrl=function(){var t,e=rn.stckSetups?rn.stckSetups:rn.getStckUrlSetup("search");return e.baseUrl&&e.versionId&&e.market&&(t=e.baseUrl+e.versionId+"search/match/"+e.market),t},rn.getSVDVersion=function(){let t;return function(){return t?rn.svdVersion&&(t=Promise.resolve(rn.svdVersion)):t=rn.svdVersion?Promise.resolve(rn.svdVersion):rn.fetchSVDVersion(),t}}(),rn.fetchSVDVersion=function(){var t=rn.getVersionUrl();return rn.svdVersion=null,fetch(t,{credentials:"omit"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then((function(t){if(rn.svdVersion=t&&t.header&&t.header.dataVersion?t.header.dataVersion:null,!rn.svdVersion)throw new TypeError("could not load svd-version");return rn.svdVersion})).catch((function(t){console.error("SVD Version error. Using stockcar.static.svd ",t)})).then((function(){return rn.svdVersion}))},on.initialize=function(t){rn.eventBus=t,rn.initialize()};var an=n(32),sn=n(43);class ln extends sn.a{performSearch(t){t&&(this.setApplicationFlags(t),this.setDpuFlags(t))}setApplicationFlags(t){if(-1!==t.search(/^([a-z0-9]+)=((true)|(false))$/)){const e=/^([a-z0-9]+)=((true)|(false))$/.exec(t);ut.state.triggerModeChange(e[1],e[2])}}setDpuFlags(t){if(-1!==t.search(/dpu_extra=(.*)/)){const e=/^dpu_extra=(.*)/.exec(t);p.a.setDpuExtra(e[1])}}}const cn=new ln,un={},dn={__:un};function mn(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}un.oDefaults={ssButtonCompactMode:".nm-summary-list-toggle-btn",sSelectorSummaryTechDataContainer:".nm-summary-list-techdata-container",sSelectorSummaryTechDataMultiContainer:".nm-mediathek-description",sSelectorSummaryContainer:".nm-module-summary-engine",sSelectorSummaryContainerEngineIcons:".nm-summary-tech-icons",sSelectorSummaryListContainer:".nm-summary-list-container.nm-techdata-container",sSelectorSummaryWltpLink:".nm-module-summary-techdata-list .nm-wltp-link",sSelectorTechRow:".nm-techrow, .nm-j-techrow-data-entry",sSelectorCompactMode:"nm-is-compact-mode",hiddenClass:"nm-hidden",maxModelsinfoWaitTime:3e4,sButtonFullTechData:".nm-foldout-techdata-list-button-full-techdata",sButtonEngineCompare:".nm-foldout-techdata-list-button-engine-compare"},un.handlePageLoaded=function(t){var e=t&&t.domElement?t.domElement:document;un.bindClicks(e),un.patchMotorInfo(e)},un.bindClicks=function(t){un.summaryTechDataContainer=a.dom.getElementsArray(un.oDefaults.sSelectorSummaryTechDataContainer,t),un.buttonCompactMode=a.dom.getElementsArray(un.oDefaults.ssButtonCompactMode,t),un.summaryTechDataContainer.length>0&&un.buttonCompactMode.length>0&&(un.domDelegate.off("click",un.oDefaults.ssButtonCompactMode,un.handleToggleBtnClick),un.domDelegate.on("click",un.oDefaults.ssButtonCompactMode,un.handleToggleBtnClick))},un.handleLayerLoaded=function(t){var e=t&&t.element?t.element:document;un.bindClicks(e),un.patchMotorInfo(e)},un.handleConfigurationUpdates=function(){dn.wait(s.a.isInitialized,un.oDefaults.maxModelsinfoWaitTime).then((function(){un.patchMotorInfo(document)}))},un.run=function(t,e,n,i,r){var o,a,s;a=0,(s=t())?i(s):o=setInterval((function(){(s=t())?(clearInterval(o),i(s)):a>e&&(clearInterval(o),r(new Error)),a+=n}),n)},dn.wait=function(t,e,n){var i=n||50;return new Promise((function(n,r){un.run(t,e,i,n,r)}))},un.initialize=function(){un.addEvents()},un.addEvents=function(){un.eventBus.on(i.appEvents.PAGE_LOADED,un.handlePageLoaded),un.eventBus.on(i.appEvents.LAYER_LOADED,un.handleLayerLoaded),un.eventBus.on(i.appEvents.CONFIG_UPDATE,un.handleConfigurationUpdates),un.eventBus.on(i.appEvents.MODELSINFO_LOAD_COMPLETE,un.handlePageLoaded)},un.handleToggleBtnClick=function(t){t.preventDefault();const e=t.target;[...a.dom.closest(e,un.oDefaults.sSelectorSummaryTechDataMultiContainer).querySelectorAll(un.oDefaults.sSelectorSummaryTechDataContainer)].forEach(t=>{a.dom.isElement(t)&&(t.classList.contains(un.oDefaults.sSelectorCompactMode)?t.classList.remove(un.oDefaults.sSelectorCompactMode):t.classList.add(un.oDefaults.sSelectorCompactMode))})},un.patchMotorInfo=function(t){var e,n,i,r,o,l,c,u=t,d=a.dom.getElement('[data-template="summary"]',u),m=s.a.getEngine(),g=un.getMotorTechdata(m);if(a.dom.isElement(d)&&g){for(r in g)for(e=g[r],i=a.dom.getElementsArray(".nm-j-summary-text-"+r+", .nm-j-configurator-techdata-"+r,d),n=0;n<i.length;n++)a.dom.isElement(i[n])&&un.patchDOMfragment(i[n],e);un.updateVisibilityWltpLinks(g),un.patchModelFootnotes(m,t)}un.hideInvisibleCategories(),o=a.dom.getElement(un.oDefaults.sButtonFullTechData,u),l=a.dom.getElement(un.oDefaults.sButtonEngineCompare,u),c=ct.a.getModelsInfo(),a.dom.isElement(o)&&a.dom.isElement(l)&&c&&Object.keys(c).length>1&&(o.classList.add(un.oDefaults.hiddenClass),l.classList.remove(un.oDefaults.hiddenClass))},un.patchModelFootnotes=(t,e=document)=>{const n=ct.a.getModelsInfoFootnotes(t),i=ct.a.getModelsInfoSectionFootnotes(t);a.dom.getElementsArray(".nm-j-summary-footnote-text",e).forEach(t=>{const e=t.getAttribute("data-key");""!==e&&(n&&n[e]?t.innerHTML=n[e]:i&&i[e]&&(t.innerHTML=i[e]))})},un.updateVisibilityWltpLinks=function(t){const e=a.dom.getElementsArray(un.oDefaults.sSelectorSummaryWltpLink);if(e.length>0){const n=Object.keys(t).filter(t=>-1!=t.indexOf("wltp-"));if(n.length>0){n.map(e=>t[e]).some(t=>""!=t&&null!=t)?e.forEach(t=>t.classList.remove("nm-hidden")):e.forEach(t=>t.classList.add("nm-hidden"))}}},un.getMotorTechdata=function(t){const e=s.a.getModelsInfo(t),n=s.a.getTechdata();return Object.assign({},e,n)},un.patchDOMfragment=function(t,e){var n=a.dom.closest(t,un.oDefaults.sSelectorTechRow);a.dom.isElement(t)&&(e?(n&&n.classList&&n.classList.remove(un.oDefaults.hiddenClass),t.innerHTML=e):n&&n.classList&&n.classList.add(un.oDefaults.hiddenClass))},un.hideInvisibleCategories=function(){var t,e,n,i,r,o=a.dom.getElementsArray(un.oDefaults.sSelectorSummaryListContainer+", "+un.oDefaults.sSelectorSummaryContainer);if(o.length>0)for(e=0;e<o.length;e++){for(i=0,t=a.dom.getElementsArray(un.oDefaults.sSelectorTechRow,o[e]),n=0;n<t.length;n++)t[n].classList.contains(un.oDefaults.hiddenClass)&&i++;if(t.length!==i)o[e].classList.remove(un.oDefaults.hiddenClass);else{if(o[e].classList.contains("nm-module-summary-engine")&&(r=a.dom.getElement(un.oDefaults.sSelectorSummaryContainerEngineIcons,o[e]),a.dom.isElement(r)))continue;o[e].classList.add(un.oDefaults.hiddenClass)}}},dn.initialize=function(t){un.eventBus=t,un.domDelegate=a.dom.getEventDelegate("body"),un.initialize()},Object.setPrototypeOf(mn.prototype,HTMLElement.prototype),Object.setPrototypeOf(mn,HTMLElement);const gn={categorizedWrapper:".nm-module-tiles-categorized-tilelist-container",uncategorizedWrapper:".nm-module-tiles-uncategorized-tilelist-container",categorizedHeadlineWrapper:"div.nm-module-tiles-categorized-group-headline-wrapper",uncategorizedHeadline:".nm-module-tiles-uncategorized-headline",categorizedTile:".nm-module-tiles-categorized-tile",categorizedGroupInfo:"div.nm-module-tiles-categorized-groupinfo",tile:".nm-module-tiles-uncategorized-tile, .nm-module-tiles-categorized-tile",categorizedTileInfo:".nm-module-tiles-categorized-tileinfo",uncategorizedTileInfo:".nm-module-tiles-uncategorized-tileinfo",configuratorItems:".nm-j-configurator-item",configuratorItemsList:".nm-module-tiles-categorized-tilelist, .nm-module-tiles-uncategorized-tilelist",categorizedConfiguratorItemsList:".nm-module-tiles-categorized-tilelist",uncategorizedConfiguratorItemsList:".nm-module-tiles-uncategorized-tilelist",categorizedTickMark:"svg.nm-module-tiles-categorized-icon-selected",uncategorizedTickMark:"svg.nm-module-tiles-uncategorized-icon-selected",fadeOutClass:"nm-tile-fadeout",groupMinPrice:".js-configurator-group .nm-j-configurator-text-price"},fn=["00000","00001","00010","00011","00100","00101","00110","00111","01000","01001","01010","01011","01100","01101","01110","01111","10000"];class pn extends mn{get allConfiguratorItems(){return[...this.querySelectorAll(gn.configuratorItems)]}get allTiles(){return[...this.querySelectorAll(gn.tile)]}get isSortingEnabled(){return!!this.sortOrder&&!!this.sortType&&"default"!==this.sortType}constructor(){super()}connectedCallback(){this.initElements(),this.addEvents()}disconnectedCallback(){this.removeEvents()}initElements(){this.groupMinPrice=this.querySelector(gn.groupMinPrice),this.sortOrder=this.getAttribute("data-sort-order"),this.sortType=this.getAttribute("data-sort-type"),s.a.isConfigurationStarted()&&this.handlePriceUpdate(),this.updateHeight(),this.allTiles&&this.allTiles.length>0&&[this.allTiles[0].querySelector("img"),this.allTiles[this.allTiles.length-1].querySelector("img")].forEach(t=>t.addEventListener("load",()=>this.updateHeight()))}addEvents(){this.allTiles.forEach(t=>{t.addEventListener("mouseover",t=>this.handleTileMouseOver(t)),t.addEventListener("mouseout",()=>this.handleTileMouseOut())});const t=i.signal.getEmitter();t.addListener(i.appEvents.CARINFO_LOAD_COMPLETE,()=>this.handlePriceUpdate()),t.addListener(i.appEvents.CONFIG_UPDATE,()=>{this.updateHeightAndPrice(),this.applyStylesToTiles()}),t.addListener(i.appEvents.LAYER_CLOSED,()=>{this.updateHeight(),this.applyStylesToTiles()}),t.addListener(i.appEvents.PAGE_READY,()=>{this.updateHeight()}),window.addEventListener("resize",()=>this.updateHeight()),window.addEventListener("load",()=>this.updateHeight())}removeEvents(){this.allTiles.forEach(t=>{t.removeEventListener("mouseover",t=>this.handleTileMouseOver(t)),t.removeEventListener("mouseout",()=>this.handleTileMouseOut())});const t=i.signal.getEmitter();t.removeListener(i.appEvents.CARINFO_LOAD_COMPLETE,()=>this.updateHeightAndPrice()),t.removeListener(i.appEvents.CONFIG_UPDATE,()=>this.updateHeightAndPrice()),t.removeListener(i.appEvents.LAYER_CLOSED,()=>this.updateHeight()),t.removeListener(i.appEvents.PAGE_READY,()=>this.updateHeight()),window.removeEventListener("resize",()=>this.updateHeight()),window.removeEventListener("load",()=>this.updateHeight()),this.allTiles&&this.allTiles.length>0&&[this.allTiles[0].querySelector("img"),this.allTiles[this.allTiles.length-1].querySelector("img")].forEach(t=>t.removeEventListener("load",()=>this.updateHeight()))}handleTileMouseOver(t){const e=t.currentTarget;this.updateHeight(),this.allTiles.forEach(t=>{t!==e?(this.fadeOutTile(t),t.nextElementSibling.style.display="none"):t.nextElementSibling.style.display="flex"})}checkIfUncategorized(t){return t.includes("uncategorized")}showOrHideTile(t){const e=this.checkIfUncategorized(t.className)?gn.uncategorizedTickMark:gn.categorizedTickMark,n=getComputedStyle(t.querySelector(e)).display;t.nextElementSibling.style.display="none"!==n&&n?"flex":"none"}applyStylesToTiles(){this.allTiles.forEach(t=>{this.fadeInTile(t),this.showOrHideTile(t)})}handleTileMouseOut(){this.applyStylesToTiles()}fadeInTile(t){t.classList.remove(gn.fadeOutClass)}fadeOutTile(t){t.classList.add(gn.fadeOutClass)}updateHeightAndPrice(){this.handlePriceUpdate(),this.updateHeight()}handlePriceUpdate(){if(this.isSortingEnabled){const t=this.getSortedItems();this.replaceItems(t)}this.groupMinPrice&&this.updateGroupMinPrice()}updateTileHeights({isUncategorized:t,wrapper:e,configuratorItemsList:n,groupInfo:i,headline:r,tileInfo:o}){let a=120;const s=this.querySelector(e+">ul").offsetHeight,l=this.querySelector(r).offsetHeight,c=this.querySelectorAll(`${n}>li ${o}`);for(const e of c)e.offsetHeight>a&&(a=e.offsetHeight),e.style.top=(!t&&l)+s+"px";const u=a+(!t&&l)+s;this.querySelector(e).style.height=u+"px",this.querySelector(e).style.marginBottom="16px",null!==i&&(this.querySelector(`${e}>${i}`).style.height=a+"px")}updateHeight(){const t=gn,e=this.checkIfUncategorized(this.firstElementChild.className),n={isUncategorized:e,wrapper:e?t.uncategorizedWrapper:t.categorizedWrapper,configuratorItemsList:e?t.uncategorizedConfiguratorItemsList:t.categorizedConfiguratorItemsList,groupInfo:e?null:t.categorizedGroupInfo,headline:e?t.uncategorizedHeadline:`${t.categorizedWrapper}>${t.categorizedHeadlineWrapper}`,tileInfo:e?t.uncategorizedTileInfo:t.categorizedTileInfo};this.updateTileHeights(n)}updateGroupMinPrice(){const t=this.getVisibleConfiguratorItemIds();if(t.length>0){const e=s.a.getMinPriceForItemIds(t);this.groupMinPrice.innerHTML=e?`${window.i18n.from} ${e}`:`${window.i18n.from} ${window.i18n["standard-group-price"]}`}}getSortedItems(){const t=this.allConfiguratorItems;if("price"===this.sortType){const e=this.getSortedItemsByPrice(t);return this.getItemsWithStandardToFront(e)}return t}replaceItems(t){const e=this.querySelector(gn.configuratorItemsList),n=document.createDocumentFragment();t.forEach(t=>{n.appendChild(t)}),e.innerHTML="",e.appendChild(n)}getSortedItemsByPrice(t){return t.sort((t,e)=>{const n=s.a.getItem(t.getAttribute("data-configurator-id")),i=s.a.getItem(e.getAttribute("data-configurator-id"));if(!n||!i)return 0;const r=pn.getPriceValue(n),o=pn.getPriceValue(i);return"ascending"===this.sortOrder?r<o?-1:1:"descending"===this.sortOrder?r>o?-1:1:void 0})}getItemsWithStandardToFront(t){return t.sort((t,e)=>{const n=s.a.getItem(t.getAttribute("data-configurator-id")),i=s.a.getItem(e.getAttribute("data-configurator-id"));return n&&i?pn.isStatusStandardFlagSet(n)?-1:pn.isStatusStandardFlagSet(i)?1:0:0})}getVisibleConfiguratorItemIds(){return this.allConfiguratorItems.map(t=>t.getAttribute("data-configurator-id")).filter(t=>{const e=s.a.getItem(t);return e&&-1===fn.indexOf(e.status)})}static isStatusStandardFlagSet(t){return t.status.match(/1$/)}static getPriceValue(t){return t.priceValue?t.priceValue:0}}function hn(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-configurator-tile-list")&&window.customElements.define("audi-configurator-tile-list",pn),Object.setPrototypeOf(hn.prototype,HTMLElement.prototype),Object.setPrototypeOf(hn,HTMLElement);class vn extends hn{static get selectors(){return{hideButton:".nm-tooltip-hide",popup:".nm-tooltip-popup"}}static get classes(){return{visible:"nm-j-tooltip-visible",tipLeft:"nm-tip-left",tipRight:"nm-tip-right"}}constructor(){super()}connectedCallback(){this.popup=this.querySelector(vn.selectors.popup),this.hideButton=this.querySelector(vn.selectors.hideButton),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.addEventListener("click",this.handleTooltipClick.bind(this)),this.addEventListener("mouseover",this.setPosition.bind(this)),this.hideButton&&this.hideButton.addEventListener("click",this.closeTooltip.bind(this))}removeEvents(){this.removeEventListener("click",this.handleTooltipClick.bind(this)),this.removeEventListener("mouseover",this.setPosition.bind(this)),this.hideButton&&this.hideButton.removeEventListener("click",this.closeTooltip.bind(this))}handleTooltipClick(t){this.isCloseButton(t.target)||this.openTooltip()}isCloseButton(t){return t===this.hideButton}openTooltip(){this.popup.classList.add(vn.classes.visible)}closeTooltip(){this.popup.classList.remove(vn.classes.visible)}setPosition(){this.removePositionClass();const t=this.popup.getBoundingClientRect();t.left<0?this.classList.add(vn.classes.tipLeft):t.left+t.width>window.innerWidth&&this.classList.add(vn.classes.tipRight)}removePositionClass(){this.classList.remove(vn.classes.tipRight,vn.classes.tipLeft)}}window.customElements.get("audi-configurator-tooltip")||window.customElements.define("audi-configurator-tooltip",vn);const yn={closeAllTooltips:function(){[...document.querySelectorAll("."+vn.classes.visible)].forEach(t=>{t.classList.remove(vn.classes.visible)})},handleTooltipOutsideClick:function(t){a.dom.isElementOutsideOfElementWithSelector(t.target,"audi-configurator-tooltip")&&this.closeAllTooltips()},initialize:function(){a.dom.getEventDelegate("body").on("click",this.handleTooltipOutsideClick.bind(this))}};var Sn=n(42);const Cn={},En={__:Cn};Cn.oDefaults={sColors:"nm-j-visualizer-tiles-color",sRims:"nm-j-visualizer-tiles-rim",sCombiItem:".nm-j-visualizer-slide",sSelectorCombiContainer:".nm-j-visualizer-slides",sTilesSelector:".nm-j-visualizer-item",sTilesblockSelector:".nm-j-visualizer-tiles-block",sMenuSelectedClass:"nm-selected",sButtonSelector:".nm-j-preconfig-submit",sSlideActiveClass:"active",sSlideHiddenClass:"hidden"},Cn.timeoutID=null,Cn.timeoutDelay=1e3,Cn.handleConfigurationStartClick=function(t){let e,n,r,o=a.dom.getElement(Cn.oDefaults.sCombiItem+".active");Cn.cancelEvent(t),n=a.dom.getDataAttribute(o,"audicode"),r=a.dom.getDataAttribute(o,"prstring"),(n||r)&&(e={},n?e.audicode=n:e.prstring=r,p.a.loadConfigurationFromTeaser(e,"audicode.visualizer").then((function(){i.router.open("page",s.a.getCurrentCarlineUrl())})))},Cn.handleTileClick=function(t){let e,n,i,r,o;Cn.cancelEvent(t),e=a.dom.closest(t.target,Cn.oDefaults.sTilesSelector),n=e.getAttribute("data-color-index")||e.getAttribute("data-rim-index"),Cn.updateTileSelection(e),o=Cn.getSelectedColorAndRimIndex(e),i=a.dom.getElement(".nm-visualizer-slide.active"),r=a.dom.getElement('.nm-visualizer-slide[data-matrix-index="'+o+'"]'),Cn.hideSlide(i),Cn.resetActiveVideo(i),Cn.showSlide(r),Cn.updateActiveTileBar(e,73,55*(n-1))},Cn.showSlide=function(t){t.classList.remove("hidden"),t.classList.add("active")},Cn.hideSlide=function(t){t.classList.remove("active"),t.classList.add("hidden")},Cn.resetActiveVideo=function(t){let e,n=a.dom.getElement("video",t);a.dom.isElement(n)&&n.currentTime>0&&(n.load(),e=a.dom.getElement(".nm-mediaplayer",t),e.classList.remove("nm-video-playing"))},Cn.updateTileSelection=function(t){let e=a.dom.closest(t,Cn.oDefaults.sTilesblockSelector);a.dom.getElement("."+Cn.oDefaults.sMenuSelectedClass,e).classList.remove(Cn.oDefaults.sMenuSelectedClass),t.classList.add(Cn.oDefaults.sMenuSelectedClass)},Cn.getSelectedColorAndRimIndex=function(){let t,e;return t=a.dom.getElement(".nm-j-visualizer-tiles-color ."+Cn.oDefaults.sMenuSelectedClass).getAttribute("data-color-index"),e=a.dom.getElement(".nm-j-visualizer-tiles-rim ."+Cn.oDefaults.sMenuSelectedClass).getAttribute("data-rim-index"),t+"-"+e},Cn.handleTileHover=function(t){let e=a.dom.closest(t.target,Cn.oDefaults.sTilesSelector);Cn.updateActiveTileBar(e,e.clientWidth,e.offsetLeft),clearTimeout(Cn.timeoutID)},Cn.handleTileblockLeave=function(){clearTimeout(Cn.timeoutID),Cn.timeoutID=setTimeout((function(){a.dom.getElementsArray(Cn.oDefaults.sTilesSelector+"."+Cn.oDefaults.sMenuSelectedClass).forEach((function(t){Cn.updateActiveTileBar(t,t.clientWidth,t.offsetLeft)}))}),Cn.timeoutDelay)},Cn.updateActiveTileBar=function(t,e,n){let i=a.dom.closest(t,Cn.oDefaults.sTilesblockSelector),r=a.dom.getElement(".nm-visualizer-tile-active-bar",i);r.style.left=n+"px",r.style.width=e+"px"},Cn.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},Cn.addEvents=function(){Cn.domEventDelegate.on("click",Cn.oDefaults.sTilesSelector,Cn.handleTileClick),Cn.domEventDelegate.on("click",Cn.oDefaults.sButtonSelector,Cn.handleConfigurationStartClick),Cn.domEventDelegate.on("mouseover",Cn.oDefaults.sTilesSelector,Cn.handleTileHover),Cn.domEventDelegate.on("mouseout",Cn.oDefaults.sTilesblockSelector,Cn.handleTileblockLeave)},Cn.removeEvents=function(){Cn.domEventDelegate.off("click",Cn.oDefaults.sTilesSelector,Cn.handleTileClick),Cn.domEventDelegate.off("click",Cn.oDefaults.sButtonSelector,Cn.handleConfigurationStartClick)},En.initialize=function(){Cn.domEventDelegate=a.dom.getEventDelegate("body"),Cn.init||Cn.addEvents(),Cn.init=!0};const bn={},wn={__:bn};let Dn,_n,An,Ln=[];bn.oDefaults={sSelectorVTPlink:".nm-j-vtp-link"},bn.handleJSONresponse=function(t){var e,n,i,r=Dn;e="",t&&t.num&&t.num>0?(r=_n,e=" ("+t.num+")"):r=!1,Ln=Ln||[],Ln.forEach((function(t){An=t,r||(r=An.getAttribute("data-vtp-original")),An.setAttribute("href",r),n=An.textContent.split(" (")[0],i=n+e,bn.replaceVtpLinkText(An,i)}))},bn.replaceVtpLinkText=function(t,e){let n=t,i=!1;[...n.children].filter(t=>t.classList.contains("audi-link-s__text")||t.classList.contains("audi-link-m__text")).every(t=>(t.textContent=e,i=!0,!1)),i||(n.textContent=e)},bn.sendJSONPrequest=function(t){var e=t.replace(/&callback=\?$/,"");bn.getJSONP(e).then((function(t){bn.handleJSONresponse(t)}),(function(t){console.log("VTP JSON request failed! ",t.message),bn.handleJSONresponse(null)}))},bn.getJSONP=function(t){return new Promise((function(e,n){var i,r,o,a=bn.oDefaults.xhrTimeout,s=window.setTimeout((function(){window.jsonp_callback=function(){},n("JSONP Error")}),a);window.jsonp_callback=function(t){window.clearTimeout(s),e(t)},t.indexOf("jsonp_callback")<0&&(r=t.indexOf("?")<0?"?":"&",i=t+r+"callback=jsonp_callback"),(o=document.createElement("script")).type="text/javascript",o.async=!0,o.src=i||t,document.getElementsByTagName("head")[0].appendChild(o)}))},bn.checkForIPHDealerLink=function(t){var e=t;return ut.iph.inIPHMode()&&(e=ut.iph.addPartnerId(e),e=ut.iph.updateNWB(e)),e},bn.handleUpdates=function(){var t=s.a.getNwbLink(),e="";Ln=a.dom.getElementsArray(bn.oDefaults.sSelectorVTPlink),Ln.length&&(Ln.forEach((function(t){An=t,An.getAttribute("data-vtp-original")||(e=An.getAttribute("href"),An.setAttribute("data-vtp-original",e))})),t&&(Dn=bn.checkForIPHDealerLink(t.plainLink),_n=bn.checkForIPHDealerLink(t.entryLink),bn.sendJSONPrequest(bn.checkForIPHDealerLink(t.queryLink))))},bn.addEvents=function(){bn.eventBus.on(i.appEvents.CONFIG_UPDATE,bn.handleUpdates),bn.eventBus.on(i.appEvents.LAYER_LOADED,bn.handleUpdates),bn.eventBus.on(i.appEvents.PAGE_LOADED,bn.handleUpdates)},bn.initialize=function(){bn.instance||(bn.addEvents(),bn.instance=!0)},wn.initialize=function(t){bn.eventBus=t,bn.initialize()};const kn={},Tn={__:kn};kn.device=a.device,kn.oDefaults={classIsWallet:"nm-agent-is-wallet"},kn.eventBus=null,kn.addEvents=function(){kn.eventBus.on(i.appEvents.PAGE_LOADED,kn.handlePageLoaded)},kn.handlePageLoaded=function(){kn.isWalletEnabled()&&document.querySelector("body").classList.add(kn.oDefaults.classIsWallet)},kn.isWalletEnabled=function(){return kn.device.isiPad()||kn.device.isiPhone()},Tn.initialize=function(t){kn.eventBus=t,kn.addEvents(),kn.handlePageLoaded()};class In extends i.ModalLayerContentBase{constructor(t={}){super(),this._closeLayer=this._closeLayer.bind(this),this.data=Object.assign({},t.dataset)}static get type(){return"EngineDisclaimerLayerElement"}static async getContent(t){return new In(t)}connectedCallback(){this._render(),this.addEvents()}addEvents(){this.querySelector(".j-close").addEventListener("click",this._closeLayer)}static get buttonText(){return window.i18n["engine_disclaimer_layer.button.text"]}_closeLayer(t){t.preventDefault(),t.stopPropagation(),this._triggerClose()}_render(){const{headline:t,message:e}=this.data,n=In.buttonText;this.innerHTML=`<div class="modal-layer__inner nm-modal-layer__inner" role="alert">\n\t\t\t\t\t\t\t<div class="nm-modal-layer__header">\n\t\t\t\t\t\t\t\t<div class="nm-modal-layer__headline-wrap">\n\t\t\t\t\t\t\t\t\t<h2 class="nm-modal-layer__headline audi-headline-order-2">${t}</h2>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-modal-layer__inner-content">\n\t\t\t\t\t\t\t\t<p class="nm-modal-layer__message audi-copy-m">${e}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-modal-layer__footer">\n\t\t\t\t\t\t\t\t<button class="audi-button nm-modal-layer__confirm-button j-close">\n\t\t\t\t\t\t\t\t\t<span class="audi-button__text">${n}</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`}}i.modalLayer.registerLayerType(In),void 0===window.customElements.get("audi-engine-disclaimer-layer-element")&&window.customElements.define("audi-engine-disclaimer-layer-element",In);const xn={},Pn={__:xn};xn.oDefaults={sSelectorModule:".nm-md-yourpayment",sSelectorRateSwitchCart:"#nm-price-rate-switch",sSelectorRateSwitchYP:"#nm-price-rate-switch-yp",sSelectorTable:".nm-yourpayment-costs-list",sSelectorSnippetText:".nm-j-configurator-text-",sShowErrorClass:"nm-j-yourpayment-show-error"},xn.eventBus=null,xn.addEvents=function(){xn.eventBus.on(i.appEvents.PAGE_LOADED,xn.handleConfigUpdate),xn.eventBus.on(i.appEvents.CONFIG_UPDATE,xn.handleConfigUpdate)},xn.handleConfigUpdate=function(){var t;if(document.querySelector(xn.oDefaults.sSelectorModule)&&s.a.isConfigurable()){if(!(t=s.a.getConfiguration()))return;""===t.rate?document.querySelector(xn.oDefaults.sSelectorModule).classList.add(xn.oDefaults.sShowErrorClass):(document.querySelector(xn.oDefaults.sSelectorModule).classList.remove(xn.oDefaults.sShowErrorClass),xn.updatePriceMode(t))}},xn.updatePriceMode=function(t){var e,n=document.querySelector(xn.oDefaults.sSelectorRateSwitchYP),i=document.querySelector(xn.oDefaults.sSelectorRateSwitchCart);n&&i&&(i.getAttribute("checked")!==n.getAttribute("checked")&&n.setAttribute("checked",i.getAttribute("checked")),e=t.financeParameterList?t.financeParameterList:null,xn.popuplatePricesByRate(e))},xn.popuplatePricesByRate=function(t){var e,n,i,r=0,o=document.querySelector(xn.oDefaults.sSelectorTable);if(o&&t)for(e=t.length;r<e;)n=t[r].id,i=t[r].textAndUnit,n&&i&&a.dom.getElement(xn.oDefaults.sSelectorSnippetText+n,o).text(i),r++},Pn.initialize=function(t){xn.eventBus=t,xn.addEvents(),xn.handleConfigUpdate()};const On={},jn={__:On};On.handleClickDownloadLink=function(t){t.preventDefault();const e=SETUPS.get("nemo.url.dpu")+"media-zip",n=s.a.getCarline()+".zip",i=On.getFetchOptions(n);return fetch(e,i).then(t=>{if(t.ok)return t.blob()}).then(t=>{const e=On.createFakeLink(n);e.href=window.URL.createObjectURL(t),e.click()}).catch(t=>{console.error(t)}),!0},On.getFetchOptions=t=>{const e=new URLSearchParams;return e.append("carline",s.a.getCarlineName()),e.append("images",On.getImageListFromConfigurationObject().join("\n")),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Disposition":"attachment; filename="+t},body:e}},On.createFakeLink=t=>{const e=document.createElement("a");return e.download=t,e.style.display="none",e.setAttribute("data-tracking-exclude",!0),document.body.appendChild(e),e},On.addEvents=function(){On.domEventDelegate.on("click",".nm-j-zip-download-delegate-click",On.handleClickDownloadLink)},On.getImageListFromConfigurationObject=function(){const t=s.a.getConfigurationAssets()||[],e=s.a.getRenderUrl(),n=[];for(const i of Object.keys(t)){const r="https:"+e+(t[i].fullscreen||t[i]["fullscreen.new"]||t[i]["stage.new"]);n.push(r)}return n},jn.initialize=function(t){On.eventBus=t,On.domEventDelegate=a.dom.getEventDelegate("body"),On.addEvents()},window.nemo=window.nemo||{},window.nemo.configurator=window.nemo.configurator||{},window.nemo.configurator.api=s.a,SETUPS&&(window.nemo.setups=SETUPS.__.stored);const Rn=[f,y,k,R,Y,ot.a,st,lt.a,p.a,ct.a,ft,pt.a,_t,Lt,Gt,$t,Jt,te,ne,ae,re,le,ye,ue,Me,be,De,Ae,ke,Ie,Pe,Oe,Re,Ne,He,qe,Ye,Je,Ke,on,nn,an.a,dn,yn,Sn.a,En,wn,Tn,Pn,jn],Bn=i.signal.getEmitter();Rn.forEach(t=>{try{t.initialize(Bn)}catch(t){console.error(t)}})}])}));
//# sourceMappingURL=bundle.configurator.js.map