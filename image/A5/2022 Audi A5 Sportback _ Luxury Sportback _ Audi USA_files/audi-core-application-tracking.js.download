/*! @audi/audi-core-application 7.4.0 - Thu, 12 May 2022 12:09:44 GMT
License information can be found in audi-core-application-tracking.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("core-tracking-objects"),require("core-utils")):"function"==typeof define&&define.amd?define("core-application-tracking",["core-tracking-objects","core-utils"],t):"object"==typeof exports?exports["core-application-tracking"]=t(require("core-tracking-objects"),require("core-utils")):e["core-application-tracking"]=t(e["core-tracking-objects"],e["core-utils"])}(self,(function(e,t){return(()=>{var r={895:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},6515:(e,t,r)=>{var n=r(6208);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},314:(e,t,r)=>{var n=r(2399),c=r(7960)("toStringTag"),i="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),c))?r:i?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},2399:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},1481:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},1330:(e,t,r)=>{var n=r(895);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,c){return e.call(t,r,n,c)}}return function(){return e.apply(t,arguments)}}},6182:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},7967:(e,t,r)=>{e.exports=!r(6966)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},7536:(e,t,r)=>{var n=r(6208),c=r(9851).document,i=n(c)&&n(c.createElement);e.exports=function(e){return i?c.createElement(e):{}}},4351:(e,t,r)=>{var n=r(9851),c=r(1481),i=r(4077),a=r(3573),s=r(1330),o=function(e,t,r){var u,l,g,p,f=e&o.F,v=e&o.G,h=e&o.S,m=e&o.P,S=e&o.B,d=v?n:h?n[t]||(n[t]={}):(n[t]||{}).prototype,y=v?c:c[t]||(c[t]={}),_=y.prototype||(y.prototype={});for(u in v&&(r=t),r)g=((l=!f&&d&&void 0!==d[u])?d:r)[u],p=S&&l?s(g,n):m&&"function"==typeof g?s(Function.call,g):g,d&&a(d,u,g,e&o.U),y[u]!=g&&i(y,u,p),m&&_[u]!=g&&(_[u]=g)};n.core=c,o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,e.exports=o},6966:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},2467:(e,t,r)=>{"use strict";r(6496);var n=r(3573),c=r(4077),i=r(6966),a=r(6182),s=r(7960),o=r(8295),u=s("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),g=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var p=s(e),f=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=f?!i((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[p](""),!t})):void 0;if(!f||!v||"replace"===e&&!l||"split"===e&&!g){var h=/./[p],m=r(a,p,""[e],(function(e,t,r,n,c){return t.exec===o?f&&!c?{done:!0,value:h.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}})),S=m[0],d=m[1];n(String.prototype,e,S),c(RegExp.prototype,p,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}}},2625:(e,t,r)=>{"use strict";var n=r(6515);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2994:(e,t,r)=>{e.exports=r(3901)("native-function-to-string",Function.toString)},9851:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},5395:e=>{var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},4077:(e,t,r)=>{var n=r(1848),c=r(7009);e.exports=r(7967)?function(e,t,r){return n.f(e,t,c(1,r))}:function(e,t,r){return e[t]=r,e}},4270:(e,t,r)=>{e.exports=!r(7967)&&!r(6966)((function(){return 7!=Object.defineProperty(r(7536)("div"),"a",{get:function(){return 7}}).a}))},6208:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},177:e=>{e.exports=!1},1848:(e,t,r)=>{var n=r(6515),c=r(4270),i=r(9604),a=Object.defineProperty;t.f=r(7967)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),c)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},7009:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},3573:(e,t,r)=>{var n=r(9851),c=r(4077),i=r(5395),a=r(7725)("src"),s=r(2994),o="toString",u=(""+s).split(o);r(1481).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,s){var o="function"==typeof r;o&&(i(r,"name")||c(r,"name",t)),e[t]!==r&&(o&&(i(r,a)||c(r,a,e[t]?""+e[t]:u.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:c(e,t,r):(delete e[t],c(e,t,r)))})(Function.prototype,o,(function(){return"function"==typeof this&&this[a]||s.call(this)}))},5146:(e,t,r)=>{"use strict";var n=r(314),c=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return c.call(e,t)}},8295:(e,t,r)=>{"use strict";var n,c,i=r(2625),a=RegExp.prototype.exec,s=String.prototype.replace,o=a,u=(n=/a/,c=/b*/g,a.call(n,"a"),a.call(c,"a"),0!==n.lastIndex||0!==c.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(o=function(e){var t,r,n,c,o=this;return l&&(r=new RegExp("^"+o.source+"$(?!\\s)",i.call(o))),u&&(t=o.lastIndex),n=a.call(o,e),u&&n&&(o.lastIndex=o.global?n.index+n[0].length:t),l&&n&&n.length>1&&s.call(n[0],r,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(n[c]=void 0)})),n}),e.exports=o},6936:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},3901:(e,t,r)=>{var n=r(1481),c=r(9851),i="__core-js_shared__",a=c[i]||(c[i]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(177)?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},9604:(e,t,r)=>{var n=r(6208);e.exports=function(e,t){if(!n(e))return e;var r,c;if(t&&"function"==typeof(r=e.toString)&&!n(c=r.call(e)))return c;if("function"==typeof(r=e.valueOf)&&!n(c=r.call(e)))return c;if(!t&&"function"==typeof(r=e.toString)&&!n(c=r.call(e)))return c;throw TypeError("Can't convert object to primitive value")}},7725:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},7960:(e,t,r)=>{var n=r(3901)("wks"),c=r(7725),i=r(9851).Symbol,a="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:c)("Symbol."+e))}).store=n},6496:(e,t,r)=>{"use strict";var n=r(8295);r(4351)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},7029:(e,t,r)=>{r(7967)&&"g"!=/./g.flags&&r(1848).f(RegExp.prototype,"flags",{configurable:!0,get:r(2625)})},8957:(e,t,r)=>{"use strict";var n=r(6515),c=r(6936),i=r(5146);r(2467)("search",1,(function(e,t,r,a){return[function(r){var n=e(this),c=null==r?void 0:r[t];return void 0!==c?c.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=a(r,e,this);if(t.done)return t.value;var s=n(e),o=String(this),u=s.lastIndex;c(u,0)||(s.lastIndex=0);var l=i(s,o);return c(s.lastIndex,u)||(s.lastIndex=u),null===l?-1:l.index}]}))},842:(e,t,r)=>{"use strict";r(7029);var n=r(6515),c=r(2625),i=r(7967),a="toString",s=/./.toString,o=function(e){r(3573)(RegExp.prototype,a,e,!0)};r(6966)((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?o((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?c.call(e):void 0)})):s.name!=a&&o((function(){return s.call(this)}))},8286:t=>{"use strict";t.exports=e},8717:e=>{"use strict";e.exports=t}},n={};function c(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return r[e](i,i.exports,c),i.exports}c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";c.r(i);var e=c(8286);class t{constructor(){if(t._instance)return t._instance;this._registerAdditionalClickSelectors(),this._registerLayerCloseSelectors(),t._instance=this}_registerAdditionalClickSelectors(){e.clickEventService.registerClickSelector(".nm-layer .nm-button-cancel"),e.clickEventService.registerClickSelector(".nm-j-jslayer .nm-button-close"),e.clickEventService.registerClickSelector(".nm-layer .nm-button-close"),e.clickEventService.registerClickSelector(".nm-j-layer-close-button"),e.clickEventService.registerClickSelector(".nm-layerClose")}_registerLayerCloseSelectors(){e.clickEventObjectLayerClose.registerLayerCloseSelector(".nm-layer .nm-button-cancel"),e.clickEventObjectLayerClose.registerLayerCloseSelector(".nm-j-jslayer .nm-button-close"),e.clickEventObjectLayerClose.registerLayerCloseSelector(".nm-layer .nm-button-close"),e.clickEventObjectLayerClose.registerLayerCloseSelector(".nm-j-layer-close-button"),e.clickEventObjectLayerClose.registerLayerCloseSelector(".nm-layerClose")}}new t;class r{constructor(){if(r._instance)return r._instance;this._registerAdditionalClickSelectors(),this._registerLayerOpenSelectors(),r._instance=this}_registerAdditionalClickSelectors(){e.clickEventService.registerClickSelector(".nm-jslayerLink"),e.clickEventService.registerClickSelector(".nm-layerLink")}_registerLayerOpenSelectors(){e.clickEventObjectLayerOpen.registerLayerOpenSelector(".nm-jslayerLink"),e.clickEventObjectLayerOpen.registerLayerOpenSelector(".nm-layerLink")}}new r;c(842),c(8957);class n{static getSearchTerm(){return n._getSearchTermGSA()||this._getSearchTermSiteSearch()}static _getSearchTermGSA(){return document.body.getAttribute("data-search-term")||""}static _getSearchTermSiteSearch(){return new URLSearchParams(window.location.search).get("q")||""}static isSearchResultPage(){return n.isSearchResultPageGSA()||n.isSearchResultPageSiteSearch()}static isSearchResultPageGSA(){return 0!==document.querySelectorAll(".gsa-search-result").length}static isSearchResultPageSiteSearch(){return 0!==document.querySelectorAll("site-search").length}}class a{constructor(){if(a._instance)return a._instance;e.clickEventService.register(a.getTrackingData),a._instance=this}static async getTrackingData(e){const t=e.currentTarget;if(!a._isPageNumberItem(t)&&!a._isNextPageItem(t)&&!a._isPreviousPageItem(t))return{};return{attributes:{componentName:"main search",pos:a._getPageNumber(t),value:n.getSearchTerm()},eventInfo:{eventAction:"navigation",eventName:"main search - more search results"}}}static _isPageNumberItem(e){return!!(e&&e.parentNode&&e.parentNode.parentNode&&e.parentNode.parentNode.classList)&&e.parentNode.parentNode.classList.contains("lists-pagination")}static _isPreviousPageItem(e){return!!(e&&e.parentNode&&e.parentNode.classList&&e.classList)&&(e.parentNode.classList.contains("navigation-pagination")&&e.classList.contains("prev"))}static _isNextPageItem(e){return!!(e&&e.parentNode&&e.parentNode.classList&&e.classList)&&(e.parentNode.classList.contains("navigation-pagination")&&e.classList.contains("next"))}static _getPageNumber(e){if(a._isPageNumberItem(e))return e.innerText;const t=a._getListPaginationSelection();return a._isNextPageItem(e)?t?(Number(t.innerText)+1).toString():"0":a._isPreviousPageItem(e)&&t?(Number(t.innerText)-1).toString():"0"}static _getListPaginationSelection(){return document.querySelector(".lists-pagination .is-selected a")}}new a;class s{constructor(){if(s._instance)return s._instance;e.clickEventService.register(s.getTrackingData),s._instance=this}static async getTrackingData(e){return e&&e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.contains("audi-j-quick-search-result-tracking")?{attributes:{componentName:"main search",pos:s._getSearchResultPosition(e.currentTarget),value:s._getSearchTerm()},eventInfo:{eventName:"main search - quick search result click"}}:{}}static _getSearchTerm(){let e="";return document.querySelector("input.nm-su-input")&&(e=document.querySelector("input.nm-su-input").value),e}static _getSearchResultPosition(e){let t=1;if(!e)return t.toString();const r=e.closest("li");return r&&r.parentNode&&(t=[...r.parentNode.children].indexOf(r),t+=1),t.toString()}}new s;class o{constructor(){if(o._instance)return o._instance;e.clickEventService.register(o.getTrackingData),o._instance=this}static async getTrackingData(e){if(!o._isSearchAccess(e))return{};return{attributes:{pos:"",targetURL:"",value:""},eventInfo:{eventAction:"navigation",eventName:"main search - access"}}}static _isSearchAccess(e){return e&&e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.contains("audi-j-search-access")&&e.currentTarget.parentElement&&e.currentTarget.parentElement.classList.contains("nm-header-overlay-is-open")}}new o;class u{static get ITEM_SELECTOR(){return".audi-j-search-result"}constructor(){if(u._instance)return u._instance;e.clickEventService.register(u.getTrackingData),u._instance=this}static async getTrackingData(e){if(!u._isSearchResultItem(e))return{};return{attributes:{pos:u._getSearchResultPosition(e),value:n.getSearchTerm()},eventInfo:{eventName:"main search - result click"}}}static _isSearchResultItem(e){return null!==e.currentTarget.closest(u.ITEM_SELECTOR)}static _getSearchResultPosition(e){const t=e.currentTarget.closest(u.ITEM_SELECTOR).getAttribute("data-tracking-pos");return t||"1"}}new u;class l{constructor(){if(l._instance)return l._instance;e.clickEventService.register(l.getData),l._instance=this}static async getData(t){if(!l._isSearchSubmitLink(t))return{};const r=e.ClickEventHelperDom.getTargetUrl(t),n="#search=",c=r.indexOf(n)+n.length;return{attributes:{componentName:"main search",value:r.substring(c)},eventInfo:{eventName:"main search - submit"}}}static _isSearchSubmitLink(t){const r=e.ClickEventHelperDom.getTargetClassList(t);return!!r&&r.contains("nm-j-tracking-search-submit")}}new l;var g=c(8717);class p{static get POLL_TIME(){return"2000"}constructor(){if(p._instance)return p._instance;this.callBackFunction=this.getTrackingData.bind(this),e.searchService.register(this.callBackFunction),p._instance=this}async getTrackingData(){if(!n.isSearchResultPageGSA())return{};try{return await g.polling.wait(this._isBodyWithSearchParameters,p.POLL_TIME),{name:"main search",results:document.querySelector("body").getAttribute("data-search-results"),term:n.getSearchTerm()}}catch(e){return{}}}_isBodyWithSearchParameters(){return document.querySelector("body").hasAttribute("data-search-results")}}new p;class f{constructor(){if(f._instance)return f._instance;const t=this.getTrackingData.bind(this);e.searchService.register(t),f._instance=this}async getTrackingData(){return n.isSearchResultPageSiteSearch()?{name:"main search",results:"",term:n.getSearchTerm()}:{}}}new f;class v{constructor(){if(v._instance)return v._instance;e.stateEventService.register(v.getTrackingData),v._instance=this}static async getTrackingData(){if(!n.isSearchResultPage())return{};return{eventInfo:{eventName:"main search - results"}}}}new v})(),i})()}));
//# sourceMappingURL=audi-core-application-tracking.js.map