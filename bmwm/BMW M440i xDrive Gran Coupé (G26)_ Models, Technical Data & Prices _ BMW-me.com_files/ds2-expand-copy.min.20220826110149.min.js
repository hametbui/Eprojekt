define("ds2-expand-copy",["jquery","ds2-resize-events","ds2-accessibility"],function(c,g,f){function b(a){this.accessibility=new f;this.accessibility.requiresConformanceToWcagLevelA()||(this.element=c(a),this.options={copyClass:".ds2-cms-output",buttonClass:".ds2-expand--body-expand-button",maxLineNumber:5,maxHeight:0},this.create())}b.prototype.create=function(){this.expandButton=c(this.options.buttonClass,this.element);"ds2ResizeSmall"===window.digitals2.resizeEvents.mediaQueryWatcherCheck()&&(this.lineNumbersReached()?
this.expandButtonOn():(this.expandButton.css({display:"none"}),this.element.attr("data-expanded",!0)));this.registerEventListeners()};b.prototype.lineNumbersReached=function(){this.element.closest("form").attr("style","display: block !important");var a=this.element.height(),b=parseInt(c(this.options.copyClass,this.element).first().css("line-height"),10);a=Math.floor(a/b);var d=c(".ds2-expand--copy-content .ds2-expand--copy-title",this.element).first(),e=0;this.element.closest("form").attr("style",
"");d.length&&(e=d.height()+parseInt(d.css("margin-bottom"),10));this.options.maxHeight=b*this.options.maxLineNumber+65+e;return a*b>(this.options.maxLineNumber+1)*b+this.expandButton.height()};b.prototype.expandButtonOn=function(){var a=this;a.expandButton.on("click",function(b){a.expandCopyContainer()})};b.prototype.registerEventListeners=function(){var a=this;c(window.digitals2.resizeEvents).on("ds2ResizeSmall",function(b){a.expandButtonOff();a.lineNumbersReached()?a.element.hasClass("open")||
a.expandButtonOn():(a.expandButton.css({display:"none"}),a.element.attr("data-expanded",!0))});c(window.digitals2.resizeEvents).on("ds2ResizeMedium ds2ResizeLarge",function(b){a.resetCopyContainer(a.element);a.lineNumbersReached()&&a.expandButtonOff()})};b.prototype.expandCopyContainer=function(){var a=this.element[0].scrollHeight;this.element.addClass("ds2-expand--body-copy-container--expanded").css({"max-height":a+"px"});this.element.attr("data-expanded",!0).trigger("expandCopyContainerEnded");
this.expandButton.addClass("ds2-expand--body-expand-button--hidden");setTimeout(function(){c(window).trigger("resize")},300)};b.prototype.expandButtonOff=function(){this.expandButton.off("click");this.resetCopyContainer()};b.prototype.resetCopyContainer=function(){this.element.css({height:""})};return b});