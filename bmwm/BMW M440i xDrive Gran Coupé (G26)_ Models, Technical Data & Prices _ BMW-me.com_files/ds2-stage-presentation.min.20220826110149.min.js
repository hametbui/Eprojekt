define("ds2-tracking-stage-presentation",["jquery","ds2-tracking-base","ds2-tracking"],function(b,f,d){b.widget("digitals2.ds2TrackingStagePresentation",f,{_listenersInit:function(){var c=this;b(".ds2-video-player:not(.ds2-layer *),.ds2-video-player-auto-loop",this.element).on("ds2-video-player-play",function(a,b){c._callExpandEvent(b,c.bmwTrackOptionsBuilder.options().name(c.TC.START_VIDEO).build())}).on("ds2-video-player-track-absolute-progress",function(a,b){b.eventAction="Progress";c._trackVideoEvent(this,
b)}).on("ds2-video-player-track-relative-progress",function(a,b){b.eventAction="Milestone";c._trackVideoEvent(this,b)});b(window).on("ds2-video-player-open",function(){if(!c.options.open_video_fired&&(c.options.open_video_fired=!0,digitals2)){var a=digitals2.tracking.api.getPageObject(digitals2.tracking.api.getCurrentPageIndex());if(a){if(0<a.event.length){var b=a.event[a.event.length-1].eventInfo.eventName;a.event[a.event.length-1].eventInfo.target=b;a.event[a.event.length-1].eventInfo.eventName=
"";a.event[a.event.length-1].eventInfo.element="Other";a.event[a.event.length-1].eventInfo.eventType="triggered";a.event[a.event.length-1].category.primaryCategory="triggered"}c._callExpandEvent(c.eventBuilder.newEvent().eventName("").eventAction("Start video").eventPoints("").cause("").effect("").target(b).element("Other").primaryCategory("triggered").mmdr("").build(),c.bmwTrackOptionsBuilder.options().name(c.TC.START_VIDEO).build())}}});b(window).on("ds2-video-player-play-layer",function(){if(digitals2){var a=
digitals2.tracking.api.getPageObject(digitals2.tracking.api.getCurrentPageIndex());if(a){var b=a.event[a.event.length-2].eventInfo.eventName;a.event[a.event.length-2].eventInfo.target=b;a.event[a.event.length-2].eventInfo.eventName="";a.event[a.event.length-2].eventInfo.element="Other";a.event[a.event.length-2].eventInfo.eventType="triggered";a.event[a.event.length-2].category.primaryCategory="triggered";a.event[a.event.length-1].eventInfo.target=b;a.event[a.event.length-1].eventInfo.eventName="";
a.event[a.event.length-1].eventInfo.cause="";a.event[a.event.length-1].eventInfo.effect="";a.event[a.event.length-1].eventInfo.element="Other";a.event[a.event.length-1].eventInfo.eventType="triggered";a.event[a.event.length-1].category.primaryCategory="triggered"}}});this._super()},_trackVideoEvent:function(c,a){c=b(c);var d={};var e=c.data("tracking-options").name;c.data("tracking-options")&&c.data("tracking-options").name&&(d="Progress"===a.eventAction?this._loopProp(this.options.mappingObj,"record_video_progress_seconds"):
"Milestone"===a.eventAction?this._loopProp(this.options.mappingObj,"record_video_progress_percent"):this._loopProp(this.options.mappingObj,e),d=this._mapFilter(d,c.data("tracking-options").content));this._callExpandEvent(this.eventBuilder.newEvent().eventName(e).eventAction(a.eventAction).target(a.target).effect(a.milestone).primaryCategoryIsEngagement().videoLength(a.duration).build(),d)}});return function(b){b.ds2TrackingStagePresentation(d.getOptions("ds2-stage-presentation"))}});
define("ds2-stage-presentation","jquery lazyload jquery-fittext lodash ds2-tracking-stage-presentation ds2-stage-presentation-accessibility ds2-resize-events".split(" "),function(b,f,d,c,a,g){d=function(c){this.$element=b(c);new f({container:c});this.accessibility=new g(c);this._create();a(this.$element)};var e=d.prototype;e._create=function(){var a=this,d=document.querySelector(".ds2-stage-presentation--keyvisual-image-container img");a._fontScaling(".ds2-stage-presentation--keyvisual-cta-container h1",
a.$element,3,"25px","48px",b(".ds2-stage-presentation--keyvisual"));a._fontScaling(".ds2-stage-presentation--keyvisual-cta-container h3",a.$element,3,"18px","25px",b(".ds2-stage-presentation--keyvisual"));a._footnotePositioning();window.digitals2.resizeEvents.$window.on("resize",c.throttle(function(b){a._footnotePositioning()},250));setTimeout(function(){if(d.complete)b(window).trigger("ds2-video-player-checkAutoplay",[a.$element]);else b(d).on("load",function(){b(window).trigger("ds2-video-player-checkAutoplay",
[a.$element])})},70);a.accessibility.addScreenReaderSupport()};e._fontScaling=function(a,c,d,e,f,g){b(this.$element,c).fitText(d,{minFontSize:e,maxFontSize:f,masterWithElement:g})};e._footnotePositioning=function(){var a=this,c=b(".ds2-stage-presentation--keyvisual-cta-container h1",a.$element),d=b(".ds2-stage-presentation--keyvisual-cta-container h3",a.$element),e=parseFloat(c.css("font-size")),f=parseFloat(d.css("font-size"));b(".ds2-footnote",c).each(function(c){b(a).css({top:-.75*e})});b(".ds2-footnote",
d).each(function(c){b(a).css({top:-.75*f})})};return d});
define("ds2-stage-presentation-accessibility",["jquery","ds2-accessibility","ds2-resize-events"],function(b,f){function d(a){this.$component=b(a);this.accessibility=new f(a);this.$elements={copyText:b(".screenreader-hide-for-medium-down",this.$component)}}var c=d.prototype;c.updateScreenReaderSupport=function(a){"ds2ResizeLarge"===a?this.accessibility.makeElementUnreadable(this.$elements.copyText):this.accessibility.makeElementReadable(this.$elements.copyText)};c.addScreenReaderSupport=function(){var a=
this;a.updateScreenReaderSupport(window.digitals2.resizeEvents.mediaQueryWatcherCheck());b(window.digitals2.resizeEvents).on("ds2ResizeSmall ds2ResizeMedium ds2ResizeLarge",function(b){a.updateScreenReaderSupport(b.type)})};return d});