// For license information, see `https://assets.adobedtm.com/launch-EN0711c9864a824e2a9e9825011bb09904.js`.
window._satellite=window._satellite||{},window._satellite.container={buildInfo:{minified:!0,buildDate:"2022-09-01T06:49:05Z",turbineBuildDate:"2022-06-22T20:54:39Z",turbineVersion:"27.3.3-latest"},environment:{id:"EN0711c9864a824e2a9e9825011bb09904",stage:"production"},dataElements:{ev_att_errorCode:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.errorCode}catch(e){}}}},pa_pag_envWork:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("finalDataLayer").page.pageInfo.envWork}catch(e){}}}},isGAAllowed:{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("GA-consentMap").GoogleAnalytics;return epaas.api.isUsageAllowed(e).toString()}catch(e){var t={from:"AA",type:"DE",name:"isGAAllowed"};_satellite.logger.error(e,t)}}}},ev_att_colour:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.colour}catch(e){}}}},ev_att_componentHeadline:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.relatedComponent.componentInfo.componentHeadline}catch(e){}}}},dotaki_segment:{defaultValue:"",modulePath:"core/src/lib/dataElements/localStorage.js",settings:{name:"dotaki.segment"}},conWithoutSplitConsent:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return["bmw.pl","bmw.se","bmw.no","bmw.dk","bmw.sk","bmw.hu","bmw.gr","bmw.cz","bmw.ro","bmw.bg","bmw.no","bmw.si","bmw.fi","bmw.com.br","bmw.in"]}}},pa_pag_referringUrl:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer").page.pageInfo.referringUrl;return e=e.toLowerCase()}catch(e){}}}},pa_pag_language:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer").page.pageInfo.language,t=_satellite.getVar("topLevelDomain");return"bmw-m.com"!=t&&"bmw.com"!=t&&"bmw-yachtsport.com"!=t&&"bmw-motorsport.com"!=t&&"bmw-golfsport.com"!=t&&"bmw-special-sales.com"!=t&&"bmwbkk.de"!=t||(e=e.split("-")[0]+"-HQ"),e}catch(e){}}}},SearchAds360Parameter:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e={"bmw.de":["gclid"],"bmw.at":["gclid"]};function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}var a=_satellite.getVar("topLevelDomain");if(void 0!==e[a])var r=e[a];var n="";if("bmw.de"==a||"bmw.at"==a)for(var s=0;s<r.length&&!(n=t(r[s]));s++);return n}catch(e){_satellite.logger.error("Error in Data Element SearchAds360Parameter")}}}},pa_att_template:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("finalDataLayer").page.attributes.template}catch(e){}}}},co_att_co_att_onsiteSearchResultsType:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.relatedComponentID,r=0;r<e.component.length;r++)if(a==e.component[r].componentInfo.componentID)return e.component[r].attributes.onsiteSearchResultsType}catch(e){return"not set"}}}},"AA-eventType":{modulePath:"bmw-group-utility-kit/extension-package-src/lib/dataElements/snapshotAttribute.js",settings:{snapshotAttribute:{path:"event.-1.eventInfo.type"}}},ev_eve_timestamp:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=new Date,r=Math.round(a.getTime());return e.event[t].eventInfo.timeStamp||e.event[t].eventInfo.timestamp||r}catch(e){}}}},ev_att_campaignName_NBO:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event&&e.event[t]&&e.event[t].attributes&&e.event[t].attributes.campaignName?e.event[t].attributes.campaignName:""}catch(e){_satellite.logger.error("Error in data element ev_att_campaignName_NBO")}}}},isDefaultON:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if("undefined"!=typeof processingWrapper&&"function"==typeof processingWrapper._getProcessingInfo){var e=window.processingWrapper._getProcessingInfo("BaseTracking",{type:window.processingWrapper.ENUM.TRACKINGINFO.TYPE.FULL,format:window.processingWrapper.ENUM.TRACKINGINFO.FORMAT.AASD1});return e.split("~").length&&e.split("~").indexOf("do:defaultON")>-1?"true":e.split("~").length&&e.split("~").indexOf("do:defaultOFF")>-1?"false":"cannot be determined"}return"cannot be determined"}catch(e){return _satellite.logger.log("Error in DE: isDefaultON"+e),"cannot be determined"}}}},ev_eve_timestamp1:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.timestamp}catch(e){}}}},ev_att_campaignType_NBO:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event&&e.event[t]&&e.event[t].attributes&&e.event[t].attributes.campaignType?e.event[t].attributes.campaignType:""}catch(e){_satellite.logger.error("Error in data element ev_att_campaignType_NBO")}}}},co_att_outletName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.relatedComponentID,r=0;r<e.component.length;r++)if(a==e.component[r].componentInfo.componentID)return e.component[r].attributes.outletName}catch(e){return"not set"}}}},utmParameter:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=["utm_campaign","utm_medium","utm_source","utm_term","utm_content"];function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}_satellite.getVar("topLevelDomain");for(var a="",r=0,n=0;n<e.length;n++)t(e[n])?a+=e[n]+"="+t(e[n])+"|":(a+=e[n]+"=no value|",r++);return a=5==r?"":a.slice(0,-1)}catch(e){"true"==localStorage.getItem("sdsat_debug")&&_satellite.logger.error("SATELLITE: Campaign not tracked")}}}},ev_att_bodyType:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.bodyType}catch(e){}}}},ev_att_mmdr:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.mmdr}catch(e){}}}},consentItemType:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=window.digitalData&&window.digitalData.pages&&window.digitalData.pages[window.digitalData.activePageIndex]||null;return e&&e.event&&e.event.length?e.event[e.event.length-1].attributes?e.event[e.event.length-1].attributes.consentItemType:"":"not set"}catch(e){return _satellite.logger.error("Error in consentItemType DE "+e),"not set"}}}},pr_att_bodyType:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.bodyType;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},consentItemName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=window.digitalData&&window.digitalData.pages&&window.digitalData.pages[window.digitalData.activePageIndex]||null;return e&&e.event&&e.event.length?e.event[e.event.length-1].attributes?e.event[e.event.length-1].attributes.consentItemName:"":"not set"}catch(e){return _satellite.logger.error("Error in consentItemName DE "+e),"not set"}}}},ev_att_dealerID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.dealerID}catch(e){}}}},ev_att_solutionspecific:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.solutionSpecific}catch(e){}}}},ev_att_outletID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var t=_satellite.getVar("finalDataLayer"),a=t.event.length-1;return t.event[a].attributes.outletID}catch(t){_satellite.logger.error("Error in Data element ev_att_outletID",e)}}}},pr_att_sellingPriceVehicle:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.sellingPriceVehicle;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},hierarchy:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("jcrPathLevel1"),t=_satellite.getVar("jcrPathLevel2"),a=_satellite.getVar("jcrPathLevel3"),r=_satellite.getVar("pageName"),n=[e,t,a],s=3;a.indexOf("None")>-1&&(s=2),t.indexOf("None")>-1&&(s=1),e.indexOf("None")>-1&&(s=0);for(var o="",i=0;i<s;i++)o+=n[i]+"|";return o+=r}catch(e){}}}},co_att_dealerID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.relatedComponentID,r=0;r<e.component.length;r++)if(a==e.component[r].componentInfo.componentID)return e.component[r].attributes.dealerID}catch(e){return"not set"}}}},"AAM-dummyPartnerID":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){}}},pr_att_fueltype:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.fuelType;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},ev_att_awareness:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.awareness}catch(e){}}}},isStaging:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.buildInfo?"staging"===_satellite.buildInfo.environment:"not set"}catch(e){_satellite.logger.error("DE: isStaging ",e)}}}},ev_eve_cause:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.cause}catch(e){}}}},ev_att_dealerName_DLOnew:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.relatedComponent.attributes.dealerName.replace(/\|/g,",")}catch(e){}}}},snapshotDL:{modulePath:"bmw-group-utility-kit/extension-package-src/lib/dataElements/dataLayerSnapshot.js",settings:{dataLayerSnapshot:null}},isRegulationAccepted:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e,t=a()&&cookiecontroller.api.areBrowserCookiesEnabled()||navigator.cookieEnabled||!1;function a(){return"undefined"!=typeof cookiecontroller&&void 0!==cookiecontroller.api&&"function"==typeof cookiecontroller.api.isInitialized&&cookiecontroller.api.isInitialized()}function r(){var e=0==cookiecontroller.api.showDisclaimer()?"userProvidedConsent":"defaultConsent";return"userProvidedConsent"===e?"function"==typeof cookiecontroller.api.isRegulationAccepted?cookiecontroller.api.isRegulationAccepted():n():"defaultConsent"==e?o():void 0}function n(){var e=_satellite.getVar("userConsent");return"accepted"==e?"true":"rejected"==e?"false":"not-provided"==e?o():void 0}function s(){return a()&&"function"==typeof cookiecontroller.api.isRegulationAccepted?cookiecontroller.api.isRegulationAccepted():a()&&"function"==typeof cookiecontroller.api.hasRegulation&&cookiecontroller.api.hasRegulation()&&"function"==typeof cookiecontroller.api.getRegulationType&&"OPT_OUT"===cookiecontroller.api.getRegulationType()?"true":"false"}function o(){return"true"==(_satellite.getVar("isDefaultONCached")||_satellite.getVar("isDefaultON"))?"true":s()}return"noRSID"===_satellite.getVar("adobeRSID")||self!=top?(_satellite.logger.log("DTM: isRegulationAccepted: either RSID is not set or DTM library is being loaded in iframe: Setting regulationAccepted to false"),e="false"):e=a()&&"function"==typeof cookiecontroller.api.showDisclaimer?r():t?n():"false",_satellite.logger.log("DTM: isRegulationAccepted: regulationAccepted - "+e),"string"!=typeof e?e.toString():e}catch(e){return _satellite.logger.log("DTM: Error in regulationAccepted data element, returning false"),"false"}}}},searchKeys:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return["eVar","prop","referrer","pageURL","pageName","channel","hier1"]}}},campaignParameter:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e={"bmw.ca":["tl"],"bmw-int2i.com":["tl"],"bmw.pt":["tl"],"bmw.co.id":["tl"],"bmw.com.mx":["tl"],"pml-bmw.com.sg":["tl"],"munichauto.com.sg":["tl"],"bmw.co.kr":["tl"],"bmw.ie":["tl"],"bmw.com.br":["tl"],"bmw.com.pa":["tl"],"bmw.com.py":["tl"],"bmw.com.co":["tl"],"bmw.com.pe":["tl"],"bmw.com.uy":["tl"],"bmw.com.gt":["tl"],"bmw.cl":["tl"],"bmw.co.cr":["tl"],"bmw.com.bo":["tl"],"bmw.com.ec":["tl"],"bmw.com.sv":["tl"],"bmw.com.ni":["tl"],"bmw.com.do":["tl"],"bmw.hn":["tl"],"bmw.com.ve":["tl"],"bmw.cw":["tl"],"bmw.bs":["tl"],"bmw.bb":["tl"],"bmw.com.ky":["tl"],"bmwjamaica.com":["tl"],"bmw.lc":["tl"],"bmw.tt":["tl"],"bmw.ht":["tl"],"bmw.com.ar":["tl"],"bmwlat.com":["tl"],"bmw.co.za":["tl"],"bmw.in":["tl"],"bmw.bg":["tl"],"bmw.gr":["tl"],"bmw.pl":["tl"],"bmw.hu":["tl"],"bmw.sk":["tl"],"bmw.si":["tl"],"bmw.ro":["tl"],"bmw.cz":["tl"],"bmw.co.jp":["tl"],"bmw.com.tr":["tl"],"bmw.com.au":["tl"],"bmw.fi":["tl"],"bmw.no":["tl"],"bmwhk.com":["tl"],"bmw.dk":["tl"],"bmw.se":["tl"],"bmw.ru":["tl"],"bmw.com.tw":["tl"],"bmw.lv":["tl"],"bmw.ee":["tl"],"next100.bmw":["tl"],"trgovec.bmw":["tl"],"testnavoznja.bmw":["tl"],"bmw.co.nz":["tl"],"bmw-asia.com":["tl"],"bmw.com.my":["tl"],"bmw.co.th":["tl"],"bmw.lk":["tl"],"bmw.com.ph":["tl"],"bmw-egypt.com":["tl"],"bmw.am":["tl"],"bmw.vn":["tl"],"bmw.mu":["tl"],"bmw.com.al":["tl"],"bmw.ly":["tl"],"bmw.ua":["tl"],"bmw.com.bd":["tl"],"bmw.com.bn":["tl"],"bmw.com.ge":["tl"],"bmw.is":["tl"],"bmwmyanmar.com":["tl"],"bmw.co.il":["tl"],"bmw.cc":["tl"],"bmw-me.com":["tl"],"bmw.it":["tl"],"bmw-kuwait.com":["tl"],"bmw.com.cy":["tl"],"bmw.bm":["tl"],"bmw.com.mt":["tl"],"bmw-abudhabi.com":["tl"],"bmw-dubai.com":["tl"],"bmw.az":["tl"],"bmw.ba":["tl"],"bmw.be":["tl"],"bmw.dz":["tl"],"bmw.fr":["tl"],"bmw.hr":["tl"],"bmw-iraq.com":["tl"],"bmw.com.kz":["tl"],"bmw-lebanon.com":["tl"],"bmw.lu":["tl"],"bmw.md":["tl"],"bmw.nl":["tl"],"bmw-oman.com":["tl"],"bmw-pakistan.com":["tl"],"bmw-qatar.com":["tl"],"bmw.re":["tl"],"bmw-saudiarabia.com":["tl"],"bmw-tunisia.com":["tl"],"bmw.de":["tl"],"bmw.at":["tl"],"bmw.ch":["tl"],"bmw.es":["tl"],"bmw-lao.la":["tl"],"bmw-jordan.com":["tl"],"bmw-bahrain.com":["tl"],"bmw.ps":["tl"],"bmw-yemen.com":["tl"],"bmw-tahiti.com":["tl"],"bmw-antilles.fr":["tl"],"bmw.mq":["tl"],"bmw.com.cn":["tl"],"bmw.nc":["tl"],"bmw.rs":["tl"],"bmw-voli.me":["tl"],"bmw.com.mk":["tl"],"bmw-yachtsport.com":["tl"],"bmw-golfsport.com":["tl"],"bmw-motorsport.com":["tl"],"bmw-m.com":["tl"],"bmw.com":["tl"],"bmw.co.ke":["tl"],"bmw-ghana.com":["tl"],"bmw-nigeria.com":["tl"],"bmw.co.ao":["tl"],"bmw.sr":["tl"],"bmw.com.mo":["tl"],"bmw-special-sales.com":["tl"],"bmw-pma.com.sg":["tl"],"bmw.co.uk":["tl"],"bmwbkk.de":["tl"],"bmw.com.sg":["tl"]};function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}var a=_satellite.getVar("topLevelDomain");if(void 0!==e[a])var r=e[a];else r=["tl"];for(var n="",s=0;s<r.length&&!(n=t(r[s]));s++);return n}catch(e){"true"==localStorage.getItem("sdsat_debug")&&_satellite.logger.error("SATELLITE: Campaign not tracked")}}}},ev_att_dealerID_DLOnew:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.relatedComponent.attributes.dealerID.replace(/\|/g,",")}catch(e){}}}},isTargetAllowed:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if("true"==_satellite.getVar("splitConsentEnabled")&&consentcontroller&&consentcontroller.api&&consentcontroller.api.isUsageAllowed&&"function"==typeof consentcontroller.api.isUsageAllowed)return consentcontroller.api.isUsageAllowed(_satellite.getVar("consentMap").Target).toString();{var e,t=a()&&cookiecontroller.api.areBrowserCookiesEnabled()||navigator.cookieEnabled||!1;function a(){return"undefined"!=typeof cookiecontroller&&void 0!==cookiecontroller.api&&"function"==typeof cookiecontroller.api.isInitialized&&cookiecontroller.api.isInitialized()}function r(){var e=0==cookiecontroller.api.showDisclaimer()?"userProvidedConsent":"defaultConsent";return"userProvidedConsent"===e?"function"==typeof cookiecontroller.api.isRegulationAccepted?cookiecontroller.api.isRegulationAccepted():n():"defaultConsent"==e?o():void 0}function n(){var e=_satellite.getVar("userConsent");return"accepted"==e?"true":"rejected"==e?"false":"not-provided"==e?o():void 0}function s(){return a()&&"function"==typeof cookiecontroller.api.isRegulationAccepted?cookiecontroller.api.isRegulationAccepted():a()&&"function"==typeof cookiecontroller.api.hasRegulation&&cookiecontroller.api.hasRegulation()&&"function"==typeof cookiecontroller.api.getRegulationType&&"OPT_OUT"===cookiecontroller.api.getRegulationType()?"true":"false"}function o(){return"true"==(_satellite.getVar("isDefaultONCached")||_satellite.getVar("isDefaultON"))?"true":s()}return"noRSID"===_satellite.getVar("adobeRSID")||self!=top?(_satellite.logger.log("DTM: isRegulationAccepted: either RSID is not set or DTM library is being loaded in iframe: Setting regulationAccepted to false"),e="false"):e=a()&&"function"==typeof cookiecontroller.api.showDisclaimer?r():t?n():"false",_satellite.logger.log("DE: isRegulationAccepted: regulationAccepted - "+e),"string"!=typeof e?e.toString():e}}catch(e){return _satellite.logger.error("DE: Error in isTargetAllowed data element, returning false"+e),"false"}}}},ev_cat_subCategory02:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].category.subCategory02,r=_satellite.getVar("ev_cat_subCategory04"),n=_satellite.getVar("topLevelDomain");return null!=a&&""!=a||(a="Generic"),"bmw.com.tr"!=n&&"bmw.co.jp"!=n&&"bmw-antilles.fr"!=n||null!=r&&""!=r&&"not set"!=r&&(a="Campaign"),a}catch(e){}}}},ev_att_productName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.productName}catch(e){}}}},activateScrollTracking:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return["bmw-x5-highlights","bmw-x5-overview","bmw-x5-models-equipment","comparison","bmw-x5-technical-data"].indexOf(_satellite.getVar("pa_pag_pageName"))>-1?"true":"false"}catch(e){}}}},pr_att_serie:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.serie;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},pr_att_basePriceVehicle:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.basePriceVehicle;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},ev_att_mmdr_NBO:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event&&e.event[t]&&e.event[t].category&&e.event[t].category.mmdr?e.event[t].category.mmdr:""}catch(e){}}}},topLevelDomain:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{function e(){var e=document.location.hostname,t=e;if(null!=e){var a=e.split(".").reverse();null!=a&&a.length>1&&(t=a[1]+"."+a[0],(e.toLowerCase().indexOf(".co.")>-1||e.toLowerCase().indexOf(".com.")>-1||e.toLowerCase().indexOf(".tm.dz")>-1&&a.length>2)&&(t=a[2]+"."+t))}return t}return e()}catch(e){}}}},PII_keywords:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return["firstname","lastname","email","currentvin","vin","name","loginid","password","registrationpassword","confirmationpassword","confirmregistrationpassword","registrationid","passwordconfirmation","username","enname","token","phone","telephone"]}}},isRegulationAccepted_Tags:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if("true"==_satellite.getVar("splitConsentEnabled")&&consentcontroller&&consentcontroller.api&&consentcontroller.api.isUsageAllowed&&"function"==typeof consentcontroller.api.isUsageAllowed)return consentcontroller.api.isUsageAllowed(_satellite.getVar("consentMap").Others).toString();var e=_satellite.getVar("isRegulationAccepted"),t=a()&&cookiecontroller.api.areBrowserCookiesEnabled()||navigator.cookieEnabled||!1;if("false"==e)return e;{return"false"==(e=n())||(a()?"function"==typeof cookiecontroller.api.isRegulationAccepted?e=cookiecontroller.api.isRegulationAccepted()?"true":"false":"function"==typeof cookiecontroller.api.hasRegulation&&cookiecontroller.api.hasRegulation()&&"function"==typeof cookiecontroller.api.getRegulationType&&(e="OPT_OUT"===cookiecontroller.api.getRegulationType()?"true":"false"):e=t?r():"false"),e;function a(){return"undefined"!=typeof cookiecontroller&&void 0!==cookiecontroller.api&&"function"==typeof cookiecontroller.api.isInitialized&&cookiecontroller.api.isInitialized()}function r(){return"accepted"==_satellite.getVar("userConsent")?"true":"false"}function n(){var e=_satellite.getVar("PII_keywords"),t=window.location.href.toLowerCase(),a=t.split("?")[1];if(/[\w-]+@([\w-]+\.)+[\w-]+/.test(t))return"false";if(null!=a)for(var r=0;r<e.length;r++)if(a.indexOf(e[r]+"=")>-1)return"false";return"true"}}}catch(e){return _satellite.logger.error("DE: Error in isRegulationAccepted_Tags data element, returning false"+e),"false"}}}},pa_att_dealerID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("finalDataLayer").page.attributes.dealerID}catch(e){}}}},timestamp:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=new Date;return Math.round(e.getTime()/1e3)}catch(e){}}}},ev_att_moduleTitle:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.moduleTitle;return""!=a&&null!=a||(a="not set"),a}catch(e){return"not set"}}}},ev_att_financeDataObject:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.financeDataObject.vehicle}catch(e){}}}},ev_att_sourceContentType:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.sourceContentType;return""!=a&&null!=a||(a="not set"),a}catch(e){return"not set"}}}},adobeRSID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e="noRSID",t=_satellite.getVar("topLevelDomain"),a={"bmw.ca":"bmw.ca.website","bmw.tj":"bmw.tj.website","bmw.pt":"bmw.pt.website","bmw.com.mx":"bmw.com.mx.website","bmw.co.id":"bmw.co.id.website","pml-bmw.com.sg":"bmw.sg.website","munichauto.com.sg":"bmw.sg.munichauto","bmw.co.kr":"bmw.co.kr.website","bmw.ie":"bmw.ie.website","bmw.com.br":"bmw.com.br.website","bmw.com.pa":"bmw.com.pa.website","bmw.com.py":"bmw.com.py.website","bmw.com.co":"bmw.com.co.website","bmw.com.pe":"bmw.com.pe.website","bmw.com.uy":"bmw.com.uy.website","bmw.com.gt":"bmw.com.gt.website","bmw.cl":"bmw.cl.website","bmw.co.cr":"bmw.co.cr.website","bmw.com.bo":"bmw.com.bo.website","bmw.com.ec":"bmw.com.ec.website","bmw.com.sv":"bmw.com.sv.website","bmw.com.ni":"bmw.com.ni.website","bmw.com.do":"bmw.com.do.website","bmw.hn":"bmw.hn.website","bmw.com.ve":"bmw.com.ve.website","bmw.cw":"bmw.cw.website","bmw.bs":"bmw.bs.website","bmw.bb":"bmw.bb.website","bmw.com.ky":"bmw.com.ky.website","bmwjamaica.com":"bmwjamaica.com.website","bmw.lc":"bmw.lc.website","bmw.tt":"bmw.tt.website","bmw.ht":"bmw.ht.website","bmw.com.ar":"bmw.com.ar.website","bmwlat.com":"bmwlat.com.website","bmw.co.za":"bmw.co.za.website","bmw.in":"bmw.in.website","bmw.bg":"bmw.bg.website","bmw.pl":"bmw.pl.website","bmw.gr":"bmw.gr.website","bmw.hu":"bmw.hu.website","bmw.sk":"bmw.sk.website","bmw.si":"bmw.si.website","bmw.ro":"bmw.ro.website","bmw.cz":"bmw.cz.website","bmw.jp":"bmw.jp.website","bmw.com.tw":"bmw.com.tw.website","bmw.com.au":"bmw.com.au.website","bmw.com.tr":"bmw.com.tr.website","bmw.co.jp":"bmw.co.jp.website","bmw.no":"bmw.no.website","bmw.fi":"bmw.fi.website","bmwhk.com":"bmw.hk.website","bmw.dk":"bmw.dk.website","bmw.se":"bmw.se.website","bmw.ru":"bmw.ru.website","bmw.lt":"bmw.lt.website","bmw.lv":"bmw.lv.website","bmw.ee":"bmw.ee.website","next100.bmw":"bmw.hq.next100.bmw","bmw.co.nz":"bmw.co.nz.website","trgovec.bmw":"bmw.si.trgovec.bmw","testnavoznja.bmw":"bmw.si.testnavoznja.bmw","bmw-asia.com":"bmwasia.com.website","bmw.com.ph":"bmw.com.ph.website","bmw.lk":"bmw.lk.website","bmw.vn":"bmw.vn.website","bmw-egypt.com":"bmweg.com.website","bmw.com.my":"bmw.com.my.website","bmw.co.th":"bmw.co.th.website","bmw.mu":"bmw.mu.website","bmw-albania.com":"bmw.com.al.website","bmw.am":"bmw.am.website","bmw.ly":"bmw.ly.website","bmw.co.il":"bmw.co.il.website","bmw.is":"bmw.is.website","bmw.cc":"bmw.cc.website","bmw.com.ge":"bmw.com.ge.website","bmw.com.bd":"bmw.com.bd.website","bmw.com.bn":"bmw.com.bn.website","bmwmyanmar.com":"bmwmyanmar.com.website","bmw.fr":"bmw.fr.website","bmw.ua":"bmw.ua.website","bmw.it":"bmw.it.website","bmw.md":"bmw.md.website","bmw-iraq.com":"bmwiraq.com.website","bmw-lebanon.com":"bmwlebanon.com.website","bmw-pakistan.com":"bmwpakistan.com.website","bmw-me.com":"bmwme.com.website","bmw.be":"bmw.be.website","bmw.lu":"bmw.lu.website","bmw-abudhabi.com":"bmwabudhabi.com.website","bmw-dubai.com":"bmwdubai.com.website","bmw-saudiarabia.com":"bmwsaudiarabia.com.website","bmw-qatar.com":"bmwqatar.com.website","bmw-oman.com":"bmwoman.com.website","bmw-kuwait.com":"bmwkuwait.com.website","bmw.com.cy":"bmw.com.cy.website","bmw.bm":"bmw.bm.website","bmw.com.mt":"bmw.com.mt.website","bmw.de":"bmw.de.website","bmw.at":"bmw.at.website","bmw.ch":"bmw.ch.website","bmw-lao.la":"bmwlao.la.website","bmw-jordan.com":"bmwjordan.com.website","bmw-bahrain.com":"bmwbahrain.com.website","bmw.ps":"bmw.ps.website","bmw-yemen.com":"bmwyemen.com.website","bmw.ma":"bmw.ma.website","bmw-tahiti.com":"bmwtahiti.com.website","bmw.gp":"bmwantilles.fr.website","bmw.mq":"bmwmartinique.fr.website","bmw.tm.dz":"bmw.dz.website","bmw.re":"bmw.re.website","bmw-tunisia.com":"bmwtunisia.com.website","bmw.by":"bmw.by.website","bmw.kz":"bmw.kz.website","bmw.az":"bmw.az.website","bmw.ba":"bmw.ba.website","bmw.hr":"bmw.hr.website","bmw.nc":"bmw.nc.website","bmw.es":"bmw.es.website","bmw.nl":"bmw.nl.website","bmw.com.cn":"bmw.com.cn.website","bmw-voli.me":"bmwvoli.me.website","bmw.rs":"bmw.rs.website","bmw.com.mk":"bmw.com.mk.website","bmw-yachtsport.com":"bmw.hq.bmwyachtsport","bmw-golfsport.com":"bmw.hq.bmwgolfsport","bmw-motorsport.com":"bmw.hq.bmwmotorsport","bmw-m.com":"bmw.hq.bmwmpower","bmw.com":"bmw.hq.bmw.com","bmw.co.ke":"bmwkenia.com.website","bmw-ghana.com":"bmwghana.com.website","bmw-nigeria.com":"bmwnigeria.com.website","bmw.co.ao":"bmw.co.ao.website","bmw.sr":"bmw.sr.website","bmw.com.mo":"bmw.com.mo.website","bmw-special-sales.com":"bmw.hq.bmwspecialsales","bmwbkk.de":"bmw.hq.bmwbkk","bmw-pma.com.sg":"bmw.sg.performancemunichauto","bmw.sn":"bmw.sn.website","bmw-preprod.com":"bmw.dev.hq.nsctestsuite","bmw.com.sg":"bmwasia.com.website","bmw.tm":"bmw.tm.website","bmw.mn":"bmw.mn.website","bmw.kg":"bmw.kg.website","bmw.com.kh":"bmw.com.kh.website","bmw.co.uk":"bmw.uk.website","bmw.uz":"bmw.uz.website","bmw.ci":"bmw.ci.website","bmw-kz.com":"bmw.kz.website"};if(void 0!==a[t]&&(e=a[t]),"noRSID"!=e&&"trgovec.bmw"!=t&&"bmw-int2i.com"!=t&&"testnavoznja.bmw"!=t&&"next100.bmw"!=t&&(e+=",bmw.dev.hq.globalwebsites"),-1==t.indexOf("bmw-int")&&-1==t.indexOf("bmw-preprod")||(e="bmw.dev.hq.nsctestsuite"),"bmw-int2i.com"==t&&(e="bmwstage2dev"),"bmw.com"==t){var r=window.location.href,n=/p\d\d/;r.match(n)&&(e="bmw.dev.hq.nsctestsuite")}return"development"==_satellite.buildInfo.environment||"staging"==_satellite.buildInfo.environment?e="bmw.dev.hq.nsctestsuite":"noRSID"==e&&(s.abort=!0),e}catch(e){_satellite.logger.error("Error in Data element adobeRSID",e)}}}},s_products_vco_v52:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{
var e=_satellite.getVar("pr_att_serie"),t=_satellite.getVar("pr_att_bodyType"),a=_satellite.getVar("pr_att_yearOfLaunch"),r=_satellite.getVar("pr_att_basePriceVehicle"),n=_satellite.getVar("pr_att_sellingPriceTotal"),s=_satellite.getVar("pr_att_basePrice"),o=_satellite.getVar("pr_att_basePriceOptions"),i=_satellite.getVar("pr_att_modelName"),l=_satellite.getVar("pr_att_modelCode"),c=_satellite.getVar("pr_att_mmdr"),d=_satellite.getVar("pr_att_engine"),u=_satellite.getVar("pr_att_fueltype"),g=_satellite.getVar("pr_att_currency"),m=_satellite.getVar("pr_att_mmdrselection"),p=(_satellite.getVar("finalDataLayer")||"").event||"";if("object"==typeof p)var v=(((p=p[p.length-1])||[]).attributes||"").hybridVersion||"";var b=_satellite.getVar("finalDataLayer").product;return b=b&&b.length>0?b[b.length-1]:null,""!=v&&null!=v||(v=b&&""!=((b.attributes||"").hybridVersion||"")?(b.attributes||"").hybridVersion||"":"not set"),""!=c&&null!=c||(c="not set"),""!=e&&null!=e||(e="not set"),""!=t&&null!=t||(t="not set"),""!=a&&null!=a||(a="not set"),""!=r&&null!=r||(r="not set"),""!=n&&null!=n||(n="not set"),""!=s&&null!=s||(s="not set"),""!=o&&null!=o||(o="not set"),""!=i&&null!=i||(i="not set"),""!=l&&null!=l||(l="not set"),""!=d&&null!=d||(d="not set"),""!=u&&null!=u||(u="not set"),""!=g&&null!=g||(g="not set"),""!=m&&null!=m||(m="not set"),"0"==c&&(c="00"),"0"==e&&(e="00"),"0"==t&&(t="00"),"0"==a&&(a="00"),"0"==r&&(r="00"),"0"==n&&(n="00"),"0"==s&&(s="00"),"0"==o&&(o="00"),"0"==i&&(i="00"),"0"==l&&(l="00"),"0"==d&&(d="00"),"0"==u&&(u="00"),"0"==g&&(g="00"),"0"==m&&(m="00"),"ps:Car~pi:"+c+"~pn:"+i+"~mc:"+l+"~se:"+e+"~bt:"+t+"~yl:"+a+"~bp:"+r+"~op:"+o+"~tp:"+s+"~sp:"+n+"~mr:"+c+"~co:not set~en:"+d+"~fu:"+u+"~cu:"+g+"~ms:"+m+"~hv:"+v}catch(e){return"error in data element s_products_vco_v52"}}}},jcrPathLevel2:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("pageInstanceId"),t=_satellite.getVar("pa_cat_subCategory01"),a=_satellite.getVar("pa_cat_primaryCategory"),r=e.split("/"),n=2;if((n=n+6-1)<r.length)var s=r[n];else s="None";return e.indexOf("/configurator")>-1&&(s="Configurator Page"),"VCO"===a&&(s=t),s}catch(e){}}}},ev_att_componentName_vis:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.relatedComponentName}catch(e){}}}},cid_parameter:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}for(var t=["cid"],a="",r=0;r<t.length&&!(a=e(t[r]));r++);return a}catch(e){"true"==localStorage.getItem("sdsat_debug")&&_satellite.logger.log("SATELLITE: Campaign not tracked")}}}},nonTechMetaData:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("pa_att_template").split("/"),t=e[e.length-1],a=(_satellite.getVar("pa_pag_language")||_satellite.getVar("languageAndMarketWorkaround")).split("-"),r=_satellite.getVar("server"),n="Content",s=_satellite.getVar("ev_cat_subCategory01"),o=_satellite.getVar("ev_eve_eventAction"),i="NSC",l=_satellite.getVar("topLevelDomain"),c=_satellite.getVar("ev_cat_subCategory04");"bmw-m.com"==l?i="M Power":"bmw.com"==l?i="BMW COM":"bmw-yachtsport.com"==l?i="Yachtsport":"bmw-motorsport.com"==l?i="Motorsport":"bmw-golfsport.com"==l?i="Golfsport":"bmw-special-sales.com"==l?i="Special Sales":"bmwbkk.de"==l&&(i="BKK"),"html5 configurator"==t?n="VCO":"dealerlocator"==t?n="DLO":"compare"==t?n="Compare":("Accessory Configurator"==s||o.indexOf("AC iFrame")>-1)&&(n="Accessory Configurator");var d=(_satellite.getVar("finalDataLayer")||"").event||"";if("object"==typeof d&&null!=d){var u=(((d=d[d.length-1])||[]).attributes||"").manufacturer||"";if(""==u||null==u||"manufacture"==u){var g=_satellite.getVar("finalDataLayer").product;u=(g=g&&g.length>0?g[g.length-1]:null)&&""!=((g.productInfo||"").manufacturer||"")?(g.productInfo||"").manufacturer||"":"not set"}}else u="not set";return nonTechMetaData="do:"+r+"~ma:"+a[1]+"~la:"+a[0]+"~pt:"+t+"~wb:"+u+"~pf:"+i+"~ap:"+n+"~bd:"+c}catch(e){var m={from:"AA",type:"DE",name:"nonTechMetaData"};_satellite.logger.error(e,m)}}}},pageInstanceId:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer").pageInstanceId,t=e;return"-prod"==e.substr(e.length-5)&&(t=e.substr(0,e.length-5)),"-dev"==e.substr(e.length-4)&&(t=e.substr(0,e.length-4)),"-int"==e.substr(e.length-4)&&(t=e.substr(0,e.length-4)),6===t.split("/").length&&(t+="/index"),t}catch(e){}}}},linkbuilderParam:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=["lbnetwork","lbmatchtype","lbcreative","lbkeyword","lbdevice","lbcampaign","lbadgroup"];function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}_satellite.getVar("topLevelDomain");for(var a="",r=0,n=0;n<e.length;n++)t(e[n])?a+=e[n]+"="+t(e[n])+"|":(a+=e[n]+"=no value|",r++);return a=7==r?"":a.slice(0,-1)}catch(e){"true"==localStorage.getItem("sdsat_debug")&&_satellite.logger.error("SATELLITE: Campaign not tracked")}}}},defaultRegulation:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(!(consentcontroller&&consentcontroller.api&&consentcontroller.api.isUsageAllowed&&"function"==typeof consentcontroller.api.isUsageAllowed))return"not set";switch(consentcontroller.api.getRegulationType()){case"OPT_IN":return"opt-in";case"OPT_OUT":return"opt-out";case"SOFT_OPT_IN":return"soft-opt-in";case"NONE":return"none";default:return"not set"}}catch(e){return _satellite.logger.error("Error in defaultRegulation data element"+e),"not set"}}}},co_att_onsiteSearchResultsFilters:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.relatedComponentID,r=0;r<e.component.length;r++)if(a==e.component[r].componentInfo.componentID)return e.component[r].attributes.onsiteSearchResultsFilters}catch(e){return"not set"}}}},pa_pag_geoRegion:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("finalDataLayer").page.pageInfo.geoRegion}catch(e){}}}},pr_att_sellingPriceOption:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.sellingPriceOption;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},navEvarForPage2:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.cookie.get("bmwdtm_hq_pcg"),t="Not available",a=_satellite.getVar("pageName"),r=_satellite.getVar("ev_eve_element");return"string"==typeof e&&(t=decodeURIComponent(e).split("|")[3]),r||(r="Not available"),r+"~"+t+"~"+a}catch(e){return"Not available~Not available~Not available"}}}},pageName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("pageInstanceId"),t=(_satellite.getVar("pa_pag_pageName"),_satellite.getVar("pa_cat_primaryCategory")),a=[_satellite.getVar("jcrPathLevel1"),_satellite.getVar("jcrPathLevel2"),_satellite.getVar("jcrPathLevel3")],r=e.split("/"),n=6,s=r.length,o="";for(l=n;l<s;l++)o+=r[l]+" > ";if(o=o.substring(0,o.length-3),"VCO"===t){for(var i="",l=0;l<3;l++)i+=a[l]+" > ";o=i=i.substring(0,i.length-3)}return o=o.replace(/-prod/g,"")}catch(e){}}}},pa_cat_pageType:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("finalDataLayer").page.category.pageType}catch(e){}}}},GENERAL_VS_SHOWROOM:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e,t=_satellite.cookie.get("survey_type");if(t)return t;switch(null==window.landingTime?(e=Math.floor(Date.now()/1e3),window.landingTime=e):e=window.landingTime,e%2){case 0:return document.cookie="survey_type=GENERAL;domain=.bmw.se;path=/","GENERAL";case 1:return document.cookie="survey_type=SHOWROOM;domain=.bmw.se;path=/","SHOWROOM"}}catch(e){_satellite.logger.error("Error in NPS_VS_SHOWROOM : ",e)}}}},referrer_url:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return""!=document.referrer?document.referrer.split("?")[0]:"not set"}catch(e){return _satellite.logger.log("error in data element referring_url"),"not set"}}}},perfTime_hash:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.cookie.get("bmwdtm_hq_perf");return void 0!==e?(jdata=JSON.parse(e),jdata.hash):"na"}catch(e){return _satellite.logger.error("Error in Data Element perfTime_hash : "+e),"na"}}}},server:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return location.hostname}catch(e){}}}},jcrPathLevel1:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("pageInstanceId"),t=e.split("/"),a=1;if((a=a+6-1)<t.length)var r=t[a];else r="None";return e.indexOf("/configurator")>-1&&(r="Configurator"),r}catch(e){}}}},ev_att_relatedComponentHeadline:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.relatedComponent.componentInfo.componentHeadline;return""!=a&&null!=a||(a="not set"),a}catch(e){}}}},ev_att_visible:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.relatedComponent.attributes.visible}catch(e){}}}},ev_cat_subCategory04:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e,t=_satellite.getVar("finalDataLayer");if(null!=t.event){var a=t.event.length-1;e=((t.event[a]||[]).category||"").subCategory04}return null!=e&&""!=e||(e="not set"),e}catch(e){var r={from:"AA",type:"DE",name:"ev_cat_subCategory04"};_satellite.logger.error(e,r)}}}},"AT-AffinityParams":{defaultValue:"",cleanText:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=function(e,t){for(var a=Object.keys(t),r=0;r<a.length;r++)if(new RegExp(a[r]).test(e))return!0;return!1},t=function(e,t){var a=function(){try{var e=window.dataLayer&&window.dataLayer.pages&&window.dataLayer.pages[0]||_satellite.getVar("finalDataLayer");return e&&e.product&&e.product.length&&e.product[0].attributes&&e.product[0].attributes.bodyType||void 0}catch(e){}},r=function(e,t){var a=e.match(t);if(a)return a[6]?"Z":a[7]?"BMW i":(a[3]||a[5]||a[4]).toUpperCase()},n=function(e,t){if(e.match(t))return"M"},s=function(e,t){if(e.match(t))return"true"},o=function(e,t){for(var a=Object.keys(t),r=0;r<a.length;r++)if(new RegExp(a[r]).test(e))return t[a[r]]},i=t.listOfExceptions&&o(e,t.listOfExceptions)||{};return{"car-body-type":i["car-body-type"]||a(),"car-series":i["car-series"]||r(e,t.seriesRegex),"car-variant":i["car-variant"]||n(e,t.variantRegex),"is-electric":i["is-electric"]||s(e,t.electricRegex)}},a={"bmw.co.uk":{seriesRegex:/all-models.*(\/|bmw-)((\d)-series|m(\d)|(x\d|X\d)|(z)|(i\d))/,variantRegex:/all-models\/(m).*/,electricRegex:/i\d|#phev|#plug-in|#bmw-X1-xDrive25e|#X2_hybrid|#plug-in-hybrid/,listOfExceptions:{}},"bmw.it":{seriesRegex:/gamma.*(\/|bmw-)(serie-(\d)|m(\d)|(x\d)|(z)|(i\d))/,variantRegex:/gamma\/(m).*/,electricRegex:/i\d|#phev|#f45_phev|#G30_hybrid|#G31_hybrid|#plug-in|#bmw-X1-xDrive25e|#plug-in-hybrid/,listOfExceptions:{"mondo-bmw/bmw-i/bmw-concept-i4.html":{"car-series":"BMW i","is-electric":"true"},"ix3/2020/highlight.html":{"car-series":"BMW i","is-electric":"true"},"x/X2/2020/tecnologia.html":{"car-series":"X2","is-electric":"true"},"m/bmw-z4-m40i/2019/bmw-m40i-highlight.html":{"car-series":"Z"},"x/X2/2020/highlight.html":{"car-series":"X2"}}},"bmw.fr":{seriesRegex:/tous-les-modeles.*(\/|bmw-)((\d)-series|m(\d)|(x\d)|(z)|(i\d))/,variantRegex:/tous-les-modeles\/(m).*/,electricRegex:/i\d|phev|#G21_mildhybrid|#G30_hybrid|#X2_hybrid|#bmw-X1-xDrive25e/,listOfExceptions:{"x-series/X4/2018/apercu.html":{"car-series":"X4"},"/bmw-concept/bmw-concept-i4.html":{"car-series":"BMW i","is-electric":"true"},"x-series/iX3/2020/bmw-ix3-apercu.html":{"car-series":"iX3","is-electric":"true"}}},"bmw.ru":{seriesRegex:/all-models.*(\/|bmw-)((\d)-series|m(\d)|(x\d)|(z)|(i\d))/,variantRegex:/all-models\/(m).*/,electricRegex:/^$/,listOfExceptions:{}},"bmw.de":{seriesRegex:/neufahrzeuge.*(\/|bmw-)((\d)er|m(\d)|(x\d)|(z4)|(i\d))/,variantRegex:/neufahrzeuge\/m\//,electricRegex:/i\d|phev|#330e|#530e|#bmw-X1-xDrive25e|#x5-xdrive45e|elektromobilitaet/,listOfExceptions:{"/neufahrzeuge/m/m-240i-convertible/":{"car-series":"2","car-variant":"M"},"/topics/faszination-bmw/bmw-concept-cars/bmw-concept-i4-ueberblick.html":{"car-series":"BMW i"}}}}[_satellite.getVar("topLevelDomain")],r=window.location.href,n=/neufahrzeuge|all-models|tous-les-modeles|gamma/.test(r)||a&&a.listOfExceptions&&e(r,a.listOfExceptions);return a&&n&&consentcontroller.api.isUsageAllowed("AdobeTargetPersonalization")?t(r,a):{}}catch(e){_satellite.logger.error("Error in Data element AT-AffinityParams-",e)}}}},ev_cat_primaryCategory:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].category.primaryCategory}catch(e){}}}},us_seg_location:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.user.length-1;return e.user[t].segment.location}catch(e){}}}},ev_eve_eventError:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.relatedComponent.attributes.errorMessage}catch(e){}}}},defaultVars:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{s.clearVars();var e=_satellite.getVar("adobeRSID"),t=_satellite.getVar("topLevelDomain");s.account=e,s.trackingServer="bmwag.d3.sc.omtrdc.net",s.cookieDomainPeriods=t.split(".").length,s.events="event998,",null!=_satellite.cookie.get("bmwdtm_hq_sid")&&"bmw.se"==t&&(s.events+="event991,"),_satellite.getVar("SessionID");var a=_satellite.getVar("hierarchyEvar"),r=(_satellite.getVar("pa_pag_pageName"),_satellite.getVar("pageName")),n=_satellite.getVar("pa_pag_pageTitle"),o=_satellite.getVar("URL"),i=_satellite.getVar("URLNoParam"),l=_satellite.getVar("pa_pag_language"),c=_satellite.getVar("pathName"),d=_satellite.getVar("userMetaData"),u=_satellite.getVar("nonTechMetaData"),g=_satellite.getVar("nonTechMetaDataEvarAddon"),m=_satellite.getVar("techMetaData"),p=_satellite.getVar("server"),v=_satellite.getVar("pr_att_mmdr"),b=_satellite.getVar("jcrPathLevel1"),f=_satellite.getVar("languageAndMarketWorkaround");s.eVar1=a,s.eVar2=r,s.eVar3=n,s.eVar4=o,s.eVar7=l||f,s.eVar12=c,s.eVar14=d,s.eVar44=u+"~"+g,s.eVar45=m,s.eVar133=Visitor.getInstance("B52D1CFE5330949C0A490D45@AdobeOrg").getMarketingCloudVisitorID().slice(-2),1!=_satellite.getVar("noInteractionCount")?s.eVar48="+1":_satellite.setVar("noInteractionCount",!1),s.eVar63=i,s.server=p;var _=new Date,h=Math.round(_.getTime());s.prop12=h,s.prop13=u,s.prop69="Stage II",s.prop70="D=mid",v&&"all-models"===b&&(s.eVar8=v,s.eVar10=v,s.prop8=v,s.prop10=v),s.getTimeParting=new Function("h","z","var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMonth()!=0){return'Data Not Available';}else{var H,M,D,U,ds,de,tm,da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d=new Date();z=z?z:0;z=parseFloat(z);if(s._tpDST){var dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de){z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d.getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();if(M>30){M='30'}else{M='00'}U=' AM';if(H>=12){U=' PM';H=H-12;}if(H==0){H=12;}D=da[D];tm=H+':'+M+U;return(tm+'|'+D);}");var V=s.getTimeParting("n");split=V.split("|");var C=-(new Date).getTimezoneOffset()/60,y=s.getTimeParting("n",C);s.prop14=split[0]+"~"+y.split("|")[0],"bmw.com.tr"!=t&&"bmw.co.kr"!=t&&"bmw.ca"!=t&&"bmw-m.com"!=t||(_satellite.getVar("performance timing sender"),s.eVar35=window.perfTime.URL,s.eVar32=window.perfTime.timesString,void 0!==window.perfTime.events&&(s.events+=window.perfTime.events+","));try{"bmw.com.cn"==t&&"Target: Stage Teaser"==_satellite.getVar("finalDataLayer").event[0].attributes.relatedComponent.componentInfo.componentName&&(s.events+="event992,")}catch(e){}s.linkTrackVars="eVar1,eVar2,eVar3,eVar4,eVar7,eVar8,eVar10,eVar12,eVar14,eVar18,eVar32,eVar35,eVar44,eVar45,eVar48,eVar63,eVar133,server,prop12,prop13,prop14,prop69,prop70,events,prop8,prop10,",s.events+="event999,",s.linkTrackEvents="event998,event999,event235,event236,event237,event992,event991,"}catch(e){s.events="event997,",s.linkTrackEvents="event997,",_satellite.logger.error("DE Default Vars ",e)}}}},ev_eve_target:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.target}catch(e){}}}},videoLength:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.videoLength}catch(e){}}}},pr_att_modelName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.modelName;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},pr_att_sellingPriceTotal:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.sellingPriceTotal;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},jcrPathLevel3:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("pageInstanceId"),t=_satellite.getVar("pa_pag_pageName"),a=_satellite.getVar("pa_cat_primaryCategory"),r=e.split("/"),n=6,s=3;s=s+n-1;var o=r.length;if(s<o)var i=r[s];else i="None";return"newvehicles"!==r[n]&&"all-models"!==r[n]||(i=s<o?r[s]+" "+r[s+1]:"None"),e.indexOf("/configurator")>-1&&(i="None"),"VCO"===a&&(i=t),i}catch(e){}}}},ev_att_destinationContentTitle:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.destinationContentTitle;return""!=a&&null!=a||(a="not set"),a}catch(e){return"not set"}}}},pa_pag_pageID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("finalDataLayer").page.pageInfo.pageID}catch(e){}}}},"AT-TargetParamsManager":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=function(){var t="targetParamsCache",a=function(e){for(var t in e)null!==e[t]&&void 0!==e[t]&&""!==e[t]||delete e[t];return e};e.prototype.mergeParams=function(e,a){var r=_satellite.getVar(t)||{};for(var n in e)r.hasOwnProperty(n)&&r[n]===e[n]||(r[n]={value:e[n],once:!!a,fired:!1});_satellite.setVar(t,r)},e.prototype.getParams=function(){var e=_satellite.getVar(t)||{},r={};for(var n in e)e[n].fired&&e[n].once||(e[n].fired=!0,r[n]=e[n].value);return r=a(r),_satellite.logger.log("DE:TargetParamsManager : Sending following mbox params-",r),r},e.prototype.hasFired=function(e,a){var r=_satellite.getVar(t)||{};return!(!r[e]||!r[e].fired||r[e].value!==a)}};return new e}catch(e){_satellite.logger.error("Error: AT-TargetParamsManager ",e)}}}},ev_att_navigationType:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.navigationType;return""!=a&&null!=a||(a="not set"),a}catch(e){return"not set"}}}},ev_att_relatedAccessories:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.relatedAccessories}catch(e){}}}},Usabilla_success_events:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return["Form Success","Online TDA Booking Finish"].indexOf(_satellite.getVar("ev_eve_eventName"))>-1}catch(e){_satellite.logger.error("Error in data element Usabilla success events")}}}},languageAndMarketWorkaround:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("topLevelDomain"),t={"bmw.com.al":"en-AL","bmw.dz":"fr-DZ","bmw.co.ao":"pt-AO","bmw.am":"en-AM","bmw.com.au":"en-AU","bmw.at":"de-AT","bmw.az":"ru-AZ","bmw.bs":"en-BS","bmw.bb":"en-BB","bmw.by":"ru-BY","bmw.bm":"en-BM","bmw.com.bo":"es-BO","bmw.ba":"hr-BA","bmw.com.br":"pt-BR","bmw.com.bn":"en-BN","bmw.bg":"bg-BG","bmw.com.ky":"en-KY","bmw.cl":"es-CL","bmw.com.cn":"zh-CN","bmw.com.co":"es-CO","bmw.co.cr":"es-CR","bmw.com.cy":"en-CY","bmw.cz":"cs-CZ","bmw.dk":"da-DK","bmw.com.do":"es-DO","bmw.com.ec":"es-EC","bmw-egypt.com":"en-EG","bmw.com.sv":"es-SV","bmw.ee":"et-EE","bmw.fi":"fi-FI","bmw.fr":"fr-FR","bmw.com.ge":"en-GE","bmw.de":"de-DE","bmw-ghana.com":"en-GH","bmw.gr":"el-GR","bmw-antilles.fr":"fr-GP","bmw.com.gt":"es-GT","bmw.ht":"en-HT","bmw.hn":"es-HN","bmwhk.com":"en-HK","bmw.hu":"hu-HU","bmw.is":"en-IS","bmw.in":"en-IN","bmw.co.id":"en-ID","bmw-iraq.com":"en-IQ","bmw.ie":"en-IE","bmw.co.il":"iw-IL","bmw.it":"it-IT","bmwjamaica.com":"en-JM","bmw.co.jp":"ja-JP","bmw.kz":"ru-KZ","bmw.co.ke":"en-KE","bmw.co.kr":"ko-KR","bmw-lao.la":"en-LA","bmw.re":"fr-RE","bmw.lv":"lv-LV","bmw-lebanon.com":"en-LB","bmw.ly":"en-LY","bmw.lt":"lt-LT","bmw.lu":"de-LU","bmw.com.mo":"en-MO","bmw.com.mk":"mk-MK","bmw.com.my":"en-MY","bmw.com.mt":"en-MT","bmw.mu":"en-MU","bmw.com.mx":"es-MX","bmw.md":"ro-MD","bmw-voli.me":"sr-ME","bmw.ma":"fr-MA","bmwmyanmar.com":"en-MM","bmw.nl":"nl-NL","bmw.nc":"fr-NC","bmw.co.nz":"en-NZ","bmw.com.ni":"es-NI","bmw-nigeria.com":"en-NG","bmw.no":"no-NO","bmw-pakistan.com":"en-PK","bmw.com.pa":"es-PA","bmw.com.py":"es-PY","bmw.com.pe":"es-PE","bmw.com.ph":"en-PH","bmw.pl":"pl-PL","bmw.pt":"pt-PT","bmw.ro":"ro-RO","bmw.ru":"ru-RU","bmw.lc":"en-LC","bmw.rs":"sr-RS","bmw.com.sg":"en-SG","bmw.sk":"sk-SK","bmw.si":"sl-SI","bmw.co.za":"en-ZA","bmw.es":"es-ES","bmw.lk":"en-LK","bmw.sr":"en-SR","bmw.se":"sv-SE","bmw.ch":"de-CH","bmw-tahiti.com":"fr-PF","bmw.com.tw":"zh-TW","bmw.co.th":"th-TH","bmw.tt":"en-TT","bmw-tunisia.com":"fr-TN","bmw.com.tr":"tr-TR","bmw.ua":"uk-UA","bmw.co.uk":"en-GB","bmw.com.uy":"es-UY","bmw.vn":"vi-VN","bmw-m.com":"en-HQ","bmw.uz":"ru-UZ"};return window.location.href.indexOf("bmw-bahrain.com/en/")>-1?"en-BH":window.location.href.indexOf("bmw-bahrain.com/ar/")>-1?"ar-BH":window.location.href.indexOf("bmw-dubai.com/en/")>-1?"en-AE":window.location.href.indexOf("bmw-dubai.com/ar/")>-1?"ar-AE":window.location.href.indexOf("bmw-jordan.com/en/")>-1?"en-JO":window.location.href.indexOf("bmw-jordan.com/ar/")>-1?"ar-JO":window.location.href.indexOf("bmw-kuwait.com/en/")>-1?"en-KW":window.location.href.indexOf("bmw-kuwait.com/ar/")>-1?"ar-KW":window.location.href.indexOf("bmw-me.com/en/")>-1?"en-MP":window.location.href.indexOf("bmw-me.com/ar/")>-1?"ar-MP":window.location.href.indexOf("bmw-oman.com/en/")>-1?"en-OM":window.location.href.indexOf("bmw-oman.com/ar/")>-1?"ar-OM":window.location.href.indexOf("bmw.ps/en/")>-1?"en-PS":window.location.href.indexOf("bmw.ps/ar/")>-1?"ar-PS":window.location.href.indexOf("bmw-qatar.com/en/")>-1?"en-QA":window.location.href.indexOf("bmw-qatar.com/ar/")>-1?"ar-QA":window.location.href.indexOf("bmw-saudiarabia.com/en/")>-1?"en-SA":window.location.href.indexOf("bmw-saudiarabia.com/ar/")>-1?"ar-SA":window.location.href.indexOf("bmw-yemen.com/en/")>-1?"en-YE":window.location.href.indexOf("bmw-yemen.com/ar/")>-1?"ar-YE":t[e]}catch(e){_satellite.logger.log("Error:languageAndMarketWorkaround")}}}},disableIDSyncs:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=!0,t=_satellite.getVar("topLevelDomain"),a={"bmw.it":!0,"bmw.co.uk":!0};return void 0!==a[t]&&(e=a[t]),e}catch(e){_satellite.logger.error("Error in disableIDSyncs DE "+e)}}}},URLNoParam:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return location.host+location.pathname}catch(e){}}}},ev_eve_eventPoints:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.eventPoints}catch(e){}}}},ev_att_destinationContentType:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.destinationContentType;return""!=a&&null!=a||(a="not set"),a}catch(e){return"not set"}}}},ev_eve_element:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.element}catch(e){}}}},functionList:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{String.prototype.dtm_capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.dtm_readable=function(){return this.replace(/_/g," ")},String.prototype.dtm_hashCode=function(){var e=this,t=0;if(0==e.length)return t;for(i=0;i<e.length;i++)char=e.charCodeAt(i),t=(t<<5)-t+char,t&=t;var a=255&t,r=65280&t,n=16711680&t,s=-16777216&t;return r>>>=8,n>>>=16,s>>>=24,window.btoa(String.fromCharCode(a,r,n,s)).slice(0,5)},String.prototype.dtm_getHashParameter=function(){var e=this;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.hash);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}}catch(e){}}}},NPS_vs_CES:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.cookie.get("bmwdtm_hq_vs");null==e&&(e=Math.floor(Date.now()/1e3),"SE"==_satellite.getVar("geoRegion")&&(document.cookie="bmwdtm_hq_vs="+e+";domain=.bmw.se;path=/"),"FR"==_satellite.getVar("geoRegion")&&(document.cookie="bmwdtm_hq_vs="+e+";domain=.bmw.fr;path=/"),"AT"==_satellite.getVar("geoRegion")&&(document.cookie="bmwdtm_hq_vs="+e+";domain=.bmw.at;path=/"),"ES"==_satellite.getVar("geoRegion")&&(document.cookie="bmwdtm_hq_vs="+e+";domain=.bmw.es;path=/")),_satellite.logger.log("DTM: Usabilla: Random assignment of NPS or CES");var t=_satellite.cookie.get("bmwdtm_hq_vs").slice(-2);return"AT"==_satellite.getVar("geoRegion")?t<"50"?(_satellite.logger.log("Random assignment of NPS or Ignition One: NPS"),"NPS"):(_satellite.logger.log("Random assignment of NPS or CES: CES"),"CES"):"FR"==_satellite.getVar("geoRegion")?t<"10"?(_satellite.logger.log("Random assignment of NPS or Ignition One: NPS"),"NPS"):(_satellite.logger.log("Random assignment of NPS or CES: CES"),"CES"):"ES"==_satellite.getVar("geoRegion")?navigator.userAgent.match(/Android|BlackBerry|BB10|iPhone|iPad|iPod|Opera Mini|IEMobile/i)?t<"25"?(_satellite.logger.log("Random assignment of NPS or Ignition One: NPS"),"NPS"):(_satellite.logger.log("Random assignment of NPS or CES: CES"),"CES"):t<"13"?(_satellite.logger.log("Random assignment of NPS or Ignition One: NPS"),"NPS"):(_satellite.logger.log("Random assignment of NPS or CES: CES"),"CES"):"SE"==_satellite.getVar("geoRegion")?"NPS":t<"50"?(_satellite.logger.log("DTM: Usabilla: Random assignment of NPS or CES: NPS"),"NPS"):(_satellite.logger.log("DTM: Usabilla: Random assignment of NPS or CES: CES"),"CES")}catch(e){_satellite.logger.error("error in Data element NPS_VS_CES",e)}}}},isSamplingApplicable:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return function(e){var t=[],a=_satellite.getVar("topLevelDomain");return t.indexOf(a)>-1?"true":(parseInt(Visitor.getInstance("B52D1CFE5330949C0A490D45@AdobeOrg").getMarketingCloudVisitorID().slice(-2))<e).toString()}}catch(e){_satellite.logger.error("Error in DE:isSamplingApplicable-",e)}}}},navEvarForClicks2:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e="Not available~"+_satellite.getVar("pageName")+"~Not available";return e=e.toLowerCase(),_satellite.logger.info("Launch: clickEvar2 is: "+e),e=e.replace("#","?"),_satellite.logger.info("Launch: after replacing # : clickEvar2 is: "+e),e=e.replace("?/","?"),_satellite.logger.info("Launch: after replacing ?/ : clickEvar2 is: "+e),e=e.replace("#/","?"),_satellite.logger.info("Launch: after replacing #/ : clickEvar2 is: "+e),e=e.replace("amp;",""),_satellite.logger.info("Launch: after replacing amp; : URL is: "+URL),e}catch(e){return"Not available~Not available~Not available"}}}},pr_att_basePriceOptions:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.basePriceOptions;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},"ECID-previousPermissions":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=window.adobe.OptInCategories,t={};return t[e.ECID]="true"==_satellite.getVar("isAdobeAnalyticsAllowed"),t[e.ANALYTICS]="true"==_satellite.getVar("isAdobeAnalyticsAllowed"),t[e.TARGET]="true"==_satellite.getVar("isTargetAllowed"),t[e.AAM]="true"==_satellite.getVar("isAAMAllowed"),t}catch(e){var a={from:"AA",type:"DE",name:"ECID-previousPermissions"};_satellite.logger.error(e,a)}}}},ev_att_dealerName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.dealerName.replace(/\|/g,",")}catch(e){}}}},pa_pag_pageName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer").page.pageInfo.pageName;return""==e&&(e="not set"),e}catch(e){return"not set"}}}},userMetaData:{
defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("topLevelDomain"),t="",a=_satellite.getVar("us_seg_logged");a&&(t="lo:"+a+"~");var r=_satellite.getVar("us_seg_location");r&&(t="pr:"+r+"~");var n=_satellite.getVar("ev_eve_eventAction"),s=_satellite.getVar("ev_eve_cause");if("NSC Lead"!=_satellite.getVar("ev_cat_subCategory01")||"outbound_click"!=n&&"Open layer"!=n||"Select Country"==s||(t+="co:"+s+"~"),""!=(t=(t+="").slice(0,-1))){var o=_satellite.cookie.get("bmwdtm_hq_userdata");o&&(o=o.split("~"));for(var i=t.split("~"),l="",c=0;c<i.length;c++)l+=i[c].split(":")[0]+":~";l=l.split("~").slice(0,-1);var d="";if(o){for(var u=0;u<l.length;u++)for(var g=0;g<o.length;g++)o[g].indexOf(l[u])>-1&&o.splice(g,1);d=i.concat(o).join("~")}else d=t;var m=new Date;m.setTime(m.getTime()+31104e6);var p="; expires="+m.toGMTString();"true"==_satellite.getVar("splitConsentEnabled")?"true"==_satellite.getVar("isPerformanceStatisticsAllowed")&&(document.cookie="bmwdtm_hq_userdata="+d+p+";domain=."+e+";path=/"):document.cookie="bmwdtm_hq_userdata="+d+p+";domain=."+e+";path=/"}else d=_satellite.cookie.get("bmwdtm_hq_userdata");return d}catch(e){_satellite.logger.error("Error in usermetadata DE ",e)}}}},ev_att_dealerInfo:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return((e.event[t]||[]).attributes||"").dealerInfo}catch(e){_satellite.logger.error("Error in data element ev_att_dealerInfo")}}}},ev_att_componentID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.relatedComponent.componentInfo.componentID}catch(e){}}}},ev_eve_eventName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.eventName}catch(e){}}}},navEvarForPage:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e="",t="",a="",r="Internal Pagelink",n=_satellite.getVar("finalDataLayer"),s=(_satellite.getVar("functionList"),_satellite.getVar("pa_pag_referringUrl")),o=_satellite.getVar("pa_cat_primaryCategory"),i=_satellite.getVar("pa_cat_subCategory01"),l=_satellite.getVar("pa_cat_pageType"),c=n.event.length-1,d=_satellite.getVar("ev_eve_element"),u=_satellite.getVar("ev_eve_effect"),g=_satellite.getVar("ev_eve_cause");if(""==s)var m="Not available";else(m=s.split("?")[0].split("#")[0]).indexOf("://")>-1&&(m=m.split("://")[1]);for(var p=_satellite.getVar("URLNoParam"),v=0;v<=c;v++)if("delayed"==n.event[v].category.eventType){e=n.event[v].attributes.relatedComponent.componentInfo.componentName.replace("page_link","Main navigation").dtm_capitalize().dtm_readable(),t=n.event[v].eventInfo.eventName,"Article teaser"==e||"Stage teaser"==e||"Target: Stage Teaser"==e||"Content slider"==e?a=n.event[v].eventInfo.cause:"Related articles"==e?":"==(a=n.event[v].eventInfo.cause.split("::")[1]).substring(0,1)&&(a=a.substring(1).trim()):a=n.event[v].attributes.relatedComponent.componentInfo.componentHeadline;break}if(v>=c)for(var b=n.component,f=0;f<=b.length-1;f++)if("Search results"==b[f].componentInfo.componentName){e="Search";break}if(window.document.cookie.indexOf("bmwdtm_hq_nav")>-1){var _=_satellite.cookie.get("bmwdtm_hq_nav");document.cookie="bmwdtm_hq_nav=;expires=Thu, 01 Jan 1970 00:00:01 GMT ;domain=."+_satellite.getVar("topLevelDomain")+";path=/",t=_.split("~")[1],e="Navi content bar"}return"VCO"===o&&(p=p+"#/"+i,"start page"!=l&&(m=_satellite.getVar("vco_referring_url"),e="VCO module","external"==(t=n.page.attributes.navigationItem)&&(t="Not available"),a="Not available",r="Internal Pagelink")),""==e&&(e="Not available",-1==m.indexOf(window.location.hostname)&&(r="Direct / Reload")),""==t&&(t="Not available"),""!=a&&null!=a||(a="Not available"),""!=d&&null!=d||(d="Not available"),""!=u&&null!=u||(u="Not available"),""!=g&&null!=g||(g="Not available"),r+"~"+t+"~"+e+"~"+a+"~"+m+"~"+p+"~"+u+"~"+g+"~"+d}catch(e){return"Internal Pagelink~Not available~Not available~Not available~Not available~"+window.location.href}}}},"Psyma VS Usabilla":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(window.s){if(window.s.marketingCloudVisitorID){var e=window.s.marketingCloudVisitorID.slice(-2);return parseInt(e)<50?"PSYMA":"USABILLA"}}else for(var t=decodeURI(_satellite.cookie.get("AMCV_B52D1CFE5330949C0A490D45@AdobeOrg")||"").split("|"),a=0;a<t.length;a++)if("MCMID"==t[a])return e=t[a+1].slice(-2),parseInt(e)<50?"PSYMA":"USABILLA"}catch(e){_satellite.logger.error("DE: Psyma VS Usabilla"+e)}}}},finalDataLayer:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=digitals2.tracking.api;if(void 0!==e){var t=e.getCurrentPageIndex();if(1==_satellite.getVar("useVCOPage"))for(var a=t;a>0;a--)if("object"==typeof e.getPageObject(a).page&&"VCO"==e.getPageObject(a).page.category.primaryCategory){t=a;break}var r=e.getPageObject(t);if(void 0!==r.pageInstanceId&&""!=r.pageInstanceId&&-1==r.pageInstanceId.indexOf("need-analyzer"))return r;if(void 0!==r.pageInstanceId&&""!=r.pageInstanceId&&r.product.length>0)return r;if(void 0!==r.pageInstanceId&&""!=r.pageInstanceId)return r=e.getPageObject(0)}return window.digitalData.pages[window.digitalData.activePageIndex]}catch(e){}}}},s_products_vco_v53:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("pr_pro_productID"),t="",a=e.split("::");for(2==a.length&&(a[1]="not set"),i=1;i<a.length;i++)t+=";"+a[i]+";1;;;eVar53=ps:not set~pi:"+a[i]+",";if(""!=t)return t=t.slice(0,-1)}catch(e){return"not set"}}}},localCampaignVariable:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=["mz_ca","mz_sp"];function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}_satellite.getVar("topLevelDomain");for(var a="",r=0,n=0;n<e.length;n++)t(e[n])?a+=t(e[n])+"|":(a+="no value|",r++);return a=2==r?"":a.slice(0,-1)}catch(e){"true"==localStorage.getItem("sdsat_debug")&&_satellite.logger.error("SATELLITE: Campaign not tracked")}}}},usabilla_randomizer:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=navigator.userAgent.match(/Android|BlackBerry|BB10|iPhone|iPad|iPod|Opera Mini|IEMobile/i)?"MOBILE":"DESKTOP",t=_satellite.getVar("geoRegion");"UK"==t&&(t="GB");var a,r=["GB","UK","JP","IT","FR","ES","RU","KR","AU","NL","AT"],n={GB:{buttonCode:{DESKTOP:"344487c265ed",MOBILE:"20bbdbc71ef3"},NPS:{DESKTOP:"9f455d2a3f1c",MOBILE:"59c2f57087a8"},CES:{DESKTOP:"d8e35ac4209c",MOBILE:"b435abb11ac3"},random:{NPS:25,CES:10,Psyma:0,Other:65}},JP:{buttonCode:{DESKTOP:"92977586f250",MOBILE:"d84bdb2f1964"},NPS:{DESKTOP:"85a49479c91e",MOBILE:"101f944c997e"},CES:{DESKTOP:"7552071ac07b",MOBILE:"f25819ad1a04"},random:{NPS:13,CES:5,Psyma:0,Other:82}},IT:{buttonCode:{DESKTOP:"88ab5d53da60",MOBILE:"8e1a4fcc286b"},NPS:{DESKTOP:"c4a8ccbec600",MOBILE:"73fa346d403b"},CES:{DESKTOP:"0aae4c00330a",MOBILE:"ace839b972fd"},random:{NPS:10,CES:10,Psyma:0,Other:80}},FR:{buttonCode:{DESKTOP:"3bf8867012f2",MOBILE:"951604100fda"},NPS:{DESKTOP:"53a5a4717277",MOBILE:"142a6bc45942"},CES:{DESKTOP:"4d3f63b653fb",MOBILE:"aeaa7d432539"},random:{NPS:10,CES:5,Psyma:0,Other:85}},ES:{buttonCode:{DESKTOP:"8445c5a2cf12",MOBILE:"3008841f7269"},NPS:{DESKTOP:"7e88e6163a4c",MOBILE:"cd793f80bda6"},CES:{DESKTOP:"879b46cf88f5",MOBILE:"4ac2bb513106"},random:{NPS:13,CES:5,Psyma:0,Other:82}},RU:{buttonCode:{DESKTOP:"92772dbeabd8",MOBILE:"dbbd8c96c68a"},NPS:{DESKTOP:"3cda55b4e6d0",MOBILE:"a0870a2972f6"},CES:{DESKTOP:"1db9cb311c93",MOBILE:"a003194dfdc8"},random:{NPS:15,CES:10,Psyma:0,Other:75}},KR:{buttonCode:{DESKTOP:"4583de3025fe",MOBILE:"51af9d4cb9c0"},NPS:{DESKTOP:"10ff397b6d5f",MOBILE:"95decc55e2ef"},CES:{DESKTOP:"635e47f55055",MOBILE:"93d523f3d22d"},random:{NPS:25,CES:10,Psyma:0,Other:65}},AU:{buttonCode:{DESKTOP:"c8476b2d62dd",MOBILE:"d4b7a77bec58"},NPS:{DESKTOP:"e77a23160463",MOBILE:"882cd879928f"},CES:{DESKTOP:"343b84a4e928",MOBILE:"fd25e25af4f3"},random:{NPS:20,CES:10,Psyma:0,Other:70}},NL:{buttonCode:{DESKTOP:"44b55d42df13",MOBILE:"08982312381f"},NPS:{DESKTOP:"2979a4502fba",MOBILE:"363c153bc496"},CES:{DESKTOP:"d29bcee79e5e",MOBILE:"fa3ac53564d7"},random:{NPS:25,CES:10,Psyma:0,Other:65}},AT:{buttonCode:{DESKTOP:"fd1b75fa05a4",MOBILE:"3d1326b2e2da"},NPS:{DESKTOP:"63dc33967e95",MOBILE:"d9969ae1bed5"},CES:{DESKTOP:"",MOBILE:""},random:{NPS:30,CES:0,Psyma:0,Other:70}}},s=(null==(u=_satellite.cookie.get("bmwdtm_hq_vs"))&&(u=Math.floor(Date.now()/1e3),r.indexOf(t)>-1&&"true"==_satellite.getVar("isUsabillaAllowed")&&_satellite.cookie.set("bmwdtm_hq_vs",u,{domain:_satellite.getVar("topLevelDomain")})),void 0!==_satellite.cookie.get("bmwdtm_hq_vs")&&(d=_satellite.cookie.get("bmwdtm_hq_vs").slice(-2)),d=+d);if(a=n[t]?function(e,t,a,r,n){if(t+a+r+n==100)return e>=0&&e<t?"NPS":e>=t&&e<t+a?"CES":e>=t+a&&e<t+a+r?"PSYMA":e>=t+a+r&&e<t+a+r+n?"NO-SURVEY":void 0}(s,n[t].random.NPS,n[t].random.CES,n[t].random.Psyma,n[t].random.Other):"NO-SURVEY",("NPS"==a||"CES"==a)&&r.indexOf(t)>-1){var o,i,l=null!=localStorage.getItem("usbl."+n[t].buttonCode[e]+".c."+n[t].NPS[e]),c=null!=localStorage.getItem("usbl."+n[t].buttonCode[e]+".c."+n[t].CES[e]);return o=!l||"T"!=localStorage.getItem("usbl."+n[t].buttonCode[e]+".c."+n[t].NPS[e]).split("/")[0],i=!c||"T"!=localStorage.getItem("usbl."+n[t].buttonCode[e]+".c."+n[t].CES[e]).split("/")[0],o&&i&&r.indexOf(t)>-1&&"true"==_satellite.getVar("isUsabillaAllowed")?a:"NO-SURVEY"}return a}catch(e){_satellite.logger.error(e)}var d,u}}},ev_att_series:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.series||e.event[t].attributes.serie}catch(e){}}}},ev_eve_eventAction:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.eventAction||""}catch(e){}}}},pa_cat_primaryCategory:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("finalDataLayer").page.category.primaryCategory}catch(e){}}}},webDL:{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=window.digitals2&&window.digitals2.tracking&&window.digitals2.tracking.api;if(void 0!==e){var t=e.getCurrentPageIndex();if(1==_satellite.getVar("useVCOPage"))for(var a=t;a>0;a--)if("object"==typeof e.getPageObject(a).page&&"VCO"==e.getPageObject(a).page.category.primaryCategory){t=a;break}var r=e.getPageObject(t);if(void 0!==r.pageInstanceId&&""!=r.pageInstanceId&&-1==r.pageInstanceId.indexOf("need-analyzer"))return r;if(void 0!==r.component&&r&&r.component[0]&&r.component[0].category&&"stock locator"==r.component[0].category.subCategory01)return r;if(void 0!==r.component&&r&&r.component[0]&&r.component[0].componentInfo&&"digital checkout solution"==r.component[0].componentInfo.componentName)return r;if(void 0!==r.pageInstanceId&&""!=r.pageInstanceId&&r.product.length>0)return r;if(void 0!==r.pageInstanceId&&""!=r.pageInstanceId)return r=t&&t>0?e.getPageObject(t):e.getPageObject(0)}return r}catch(e){var n={from:"AA",type:"DE",name:"webDL"};_satellite.logger.error(e,n)}}}},techMetaData:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.buildInfo?_satellite.buildInfo.environment:"not set",t="not set",a="not set",r="not set",n=_satellite.property?_satellite.property.name:"not set";window.s&&window.s.visitor&&window.s.visitor.version&&(t=s.visitor.version),window.s&&window.s.version&&(a=s.version),_satellite.buildInfo&&_satellite.buildInfo.buildDate&&(r=_satellite.buildInfo.buildDate);var o=window.processingWrapper._getProcessingInfo("BaseTracking",{type:window.processingWrapper.ENUM.TRACKINGINFO.TYPE.FULL,format:window.processingWrapper.ENUM.TRACKINGINFO.FORMAT.AASD1});return techMetaData=o+"~ev:"+e+"~aa:"+a+"~av:"+t+"~pd:"+r+"~p:"+n,techMetaData}catch(e){return"ev:not set~aa:not set~av:not set~pd:not set~cr:not set~uc:not set~cm:not set~p:not set"}}}},ev_att_iFrameName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.iFrameName}catch(e){}}}},ev_cat_subCategory01:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].category.subCategory01}catch(e){}}}},ev_att_componentHeadline_vis:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer");return e.event.length,e.component[0].componentInfo.componentHeadline}catch(e){_satellite.logger.error("Error in data element ev_att_componentHeadline_vis")}}}},ev_att_componentName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.relatedComponent.componentInfo.componentName}catch(e){}}}},consentMap:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e="true"==_satellite.getVar("splitConsentEnabled");return{AdobeAnalytics:"AdobeAnalytics",Target:"AdobeTargetAnalytics",AAM:"AdobeAudienceManager_DMP",PerformanceStatistics:"performanceStatistics",Others:e?"tmp_advertising":"advertising",analytics_category:e?"AdobeAnalytics":"advertising",advertising_category:e?"tmp_advertising":"advertising",functional_category:e?"tmp_functional":"advertising",UsabillaSurvey:"UsabillaSurvey",campaignCookieTracking:"campaignCookieTracking"}}catch(e){_satellite.logger.error("Error in DE:consentMap",e)}}}},NPS_VS_Adhoc:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.cookie.get("bmwdtm_hq_vs");null==e&&(e=Math.floor(Date.now()/1e3),"GB"!=_satellite.getVar("geoRegion")&&"UK"!=_satellite.getVar("geoRegion")||(document.cookie="bmwdtm_hq_vs="+e+";domain=."+_satellite.getVar("topLevelDomain")+";path=/")),_satellite.logger.log("Random assignment of NPS or Adhoc");var t=_satellite.cookie.get("bmwdtm_hq_vs").slice(-2);if("GB"==_satellite.getVar("geoRegion")||"UK"==_satellite.getVar("geoRegion"))return t<"50"?(_satellite.logger.log("Random assignment of NPS or Adhoc: NPS"),"NPS"):(_satellite.logger.log("Random assignment of NPS or Adhoc: Adhoc"),"Adhoc")}catch(e){_satellite.logger.error("Error from Data element NPS_VS_Adhoc")}}}},pr_att_mmdr:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer");if(0==e.product.length)return"";var t=e.product.length-1;return e.product[t].attributes.mmdr}catch(e){}}}},ev_att_stepName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return((e.event[t]||[]).attributes||"").stepName||"not set"}catch(e){_satellite.logger.error("Error in Data element ev_att_stepName "+e)}}}},Usabilla_vs_IgnitionOne:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.cookie.get("bmwdtm_hq_vs").slice(-2)<"20"?"Usabilla":"IgnitionOne"}catch(e){_satellite.logger.error("Error In: Usabilla_vs_IgnitionOne"+e)}}}},cookieList:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e,t=["s_vnum","s_cc","s_getNewRepeat","s_invisit","s_lv","s_lv_s","s_fid","s_sq","s_ptc","bmwdtm_hq_sid","bmwdtm_hq_cc","bmwdtm_hq_pp","bmwdtm_hq_pcg","bmwdtm_hq_vs","bmwdtm_hq_nav","bmwdtm_hq_epv","bmwdtm_hq_perf","bmwdtm_hq_csevent","bmwdtm_ru_campaign","bmwdtm_MO","AMCV_B52D1CFE5330949C0A490D45%40AdobeOrg","AMCVS_B52D1CFE5330949C0A490D45%40AdobeOrg","c5b3573c15461c7fb62c3c6af53d7ce46d446a36","bmwdtm_za_channel","bmwdtm_za_model","bmwdtm_za_date","bmwdtm_cs_utm","bmwdtm_cs_utm_req","bmwdtm_tr_mayfestProgrammatic","bmwdtm_tr_configuratorLandingTime","bmwdtm_ru_landingTime","bmwdtm_cn_campaigndata","bmwdtm_hq_userdata","bmwdtm_hq_SedanExperience","aam_uuid","mbox","mboxPC","mboxSession","tempNavigation","psyma_participation","daktela_chat_email","daktela_chat_session","daktela_chat_title","_em_t","_em_v","_em_vt","nmfirstparty","_mtruid","__lc.visitor_id","lc_window_state","__telemetric.v","__telemetric.s","bmnet","s3optout","s3timer","s3_AE","s3_AESess","s3_AR","s3_ARSess","s3noae","s3sess","evo5_popin_instance","tdid","cikneeto","cikneeto_uuid","tdid","campaign_complete","impressionsNo","LaSID","LaVisitorId","LaVisitorNew","LaRunningChat","LaUserDetails","LaEventId","gdt_flag","_ym_isad","_ym_uid","bmwdtm_hq_feedbackcomplete","mpt_vid","mpt_opted_out","visitorid","pageViewCount","time_spent","s_ppv","s_ppvl","aam_test","check","_gcl_au","_fbp","campaign_cookie","bmwdtm_HK","ces_status","_ga","_gcl_au","IDE","mp_scr_","mp_scr_06","mp_scr_08","mp_scr_11","mp_scr_12","mp_scr_14","mp_scrActions","mp_scrPoints","ActivityInfo2","TargetInfo2","u2","cikneeto","cikneeto_uuid","_kuid_","anj","audience","AWSELB","bkdc","bkpa","bku","C","cid","CMID","CMPRO","CMPS","CMRUM3","CMST","data-rk","dsp_id","mako_uid","ONPLFTRH","pb","pxrc","r1","rlas3","sd-session-id","sec","sid","smd","tuuid","tuuid_lu","uid","um2","uuid2","visitor-id","zync-uuid","__qca","mc","n/a","dsp_id_1","evo5","evo5_BMW","evo5_BMW_popin","ione_MTA4MDYx","ionengagementscore","nmfp_evo5_BMW","nmfp_evo5_BMW_popin","_id","_ss","bs","cas","cdb0","cdb1","cdb2","cdb3","cdbp","d","dct_oba","evo5_CLIENT","evo5_CLIENT_popin","evo5_display","EVO5_MINI","evo5_MINI_popin","EVO5_OPT","evo5_popin_instance","f","iOne_","kanapr","nmfirstparty","nmfp_","nmfp_dsp_id","nmfp_evo5_MINI","nmfp_u","notrack","ss","t","ts","u","mt_misc","mt_mop","uuid","uuidc","TDCPM","TDID","beaconRetry","dtBW","dtcookie","dtLatC","dtPC","dtSa","dtsrE","dtsrTID","dtsrVID","ruxitagent","rxVisitId","rxVisitor","rxvt","MUID","MUIDB","__gads","_dc_gtm_UA-127190505-1","_gaexp","_gat","_gat_gtag_UA_","_gat_UA-","_gid","1P_JAR","eud","euds","glc","NID","rud","ruds","_ga1","_dc_gtm_UA-","1143061:session-data","cmd","eng_mt","rc::a","rc::b","rc::c","Cookie_B","lu","xs","c_user","m_user","pl","dblc","aks","aksb","sfau","ick","s","datr","sb","fr","oo","ddid","_fbc","_fbp","dpr","gu","lh","L\xe4ndereinstellung","shopping_cart","wd","js_ver","rc","campaign_click_url","Checkpoint","lp","hckd","noscript","m_pixel_ratio","act","sfiu","m_ts","p","reg_ext_ref","ar","next","sW","reg_fb_gate","av","next_path","reg_fb_ref","dnonce","presence","a11y","reg_uniqid","rdir","i_user","x-referer","x-src","i_key","i_id","AA003","ATN","lang","bcookie","bscookie","UserMatchHistory","lidc","personalitation_id","personalization_id","psyma_participation","pageViewCount","usabilla_","time_spent","usbl.","_cs_c","_cs_s","_cs_id","GAD","Gdyn","bmw_chatbot_nlhyperchat_session","UserID1","_pk_uid","TCSess","_s3_cvar.","TCID","_s3_id.","_s3_id.19.","s3optout","_s3_ses.19.","_s3_ref.","_s3_ses.","xdt_143","_s3_ses.97.72cd","_s3_id.97.72cd","unvisited"],a=document.cookie.split(";"),r=0;r<a.length;r++)(e=a[r].split("=")[0].substr(1)).indexOf("_s3")>-1&&(t[t.length]=e),e.indexOf("nmfp")>-1&&(t[t.length]=e),e.indexOf("_ym_viso")>-1&&(t[t.length]=e),e.indexOf("_sdsat")>-1&&(t[t.length]=e);return t}catch(e){_satellite.logger.error("DE: Error in cookieList data element "+e)}}}},ev_eve_brandName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=(e.event.length,e.component.length-1);return e.component[t].attributes.onSiteSearchBrand}catch(e){}}}},isFirstPageofVisit:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e;return"true"==_satellite.getVar("splitConsentEnabled")?(e=consentcontroller.api.getPersistence("unvisited"),consentcontroller.api.setPersistence("unvisited","false")):(e=_satellite.cookie.get("unvisited"),_satellite.cookie.set("unvisited","false",{domain:_satellite.getVar("topLevelDomain")})),"false"!=e}catch(e){_satellite.logger.error("isFirstPageofVisit Error",e)}}}},s_products_iFrame_v52:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("ev_att_series")||"not set",t=_satellite.getVar("ev_att_bodyType"),a=_satellite.getVar("ev_att_productName"),r=_satellite.getVar("ev_att_engine"),n=_satellite.getVar("ev_att_colour"),s=_satellite.getVar("ev_att_mmdr"),o=_satellite.getVar("ev_att_mmdr_NBO"),i=_satellite.getVar("pr_att_yearOfLaunch"),l=_satellite.getVar("pr_att_basePriceVehicle"),c=_satellite.getVar("pr_att_sellingPriceTotal"),d=_satellite.getVar("pr_att_basePrice"),u=_satellite.getVar("pr_att_basePriceOptions"),g=_satellite.getVar("pr_att_modelCode"),m=_satellite.getVar("pr_att_currency"),p=_satellite.getVar("pr_att_mmdrselection"),v=(_satellite.getVar("finalDataLayer")||"").event||"";if("object"==typeof v)var b=(((v=v[v.length-1])||[]).attributes||"").fuelType||"not set",f=((v||[]).attributes||"").motorization||"not set",_=((v||[]).attributes||"").hybridVersion||"";var h=_satellite.getVar("finalDataLayer").product;return h=h&&h.length>0?h[h.length-1]:null,""!=_&&null!=_||(_=h&&""!=((h.attributes||"").hybridVersion||"")?(h.attributes||"").hybridVersion||"":"not set"),""!=s&&null!=s&&"mmdr"!=s||(s=h&&""!=((h.attributes||"").mmdr||"")?(h.attributes||"").mmdr||"":""!=o&&null!=o?o:"not set"),""!=t&&null!=t&&"bodytype"!=t||(t=h&&""!=((h.attributes||"").bodyType||"")?(h.attributes||"").bodyType||"":"not set"),""!=a&&null!=a&&"productNAME"!=a||(a=h&&""!=((h.attributes||"").modelName||"")?(h.attributes||"").modelName||"":"not set"),""!=r&&null!=r||(r="not set"),""!=n&&null!=n||(n="not set"),""!=i&&null!=i||(i="not set"),""!=l&&null!=l||(l="not set"),""!=c&&null!=c||(c="not set"),""!=d&&null!=d||(d="not set"),""!=u&&null!=u||(u="not set"),""!=g&&null!=g||(g="not set"),""!=m&&null!=m||(m="not set"),""!=p&&null!=p||(p="not set"),"0"==i&&(i="00"),"0"==l&&(l="00"),"0"==c&&(c="00"),"0"==d&&(d="00"),"0"==u&&(u="00"),"0"==g&&(g="00"),"0"==m&&(m="00"),"0"==p&&(p="00"),-1!=s.indexOf("LCI")&&(s=s.substring(0,3)),"ps:Car~pi:"+s+"~pn:"+a+"~mc:"+g+"~se:"+e+"~bt:"+t+"~yl:"+i+"~bp:"+l+"~op:"+u+"~tp:"+d+"~sp:"+c+"~mr:"+s+"~co:"+n+"~en:"+f+"~fu:"+b+"~cu:"+m+"~ms:"+p+"~hv:"+_}catch(e){var V={from:"AA",type:"DE",name:"s_products_iFrame_v52"};return _satellite.logger.error(e,V),"not set"}}}},pr_att_yearOfLaunch:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.yearOfLaunch;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},pr_pro_productName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].productInfo.productName;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},URL:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=window.location.href.substring(0,255);return e=e.toLowerCase()}catch(e){}}}},scrollTrackingComponent:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.scrollTrackingComponent}catch(e){}}}},co_att_outletID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.relatedComponentID,r=0;r<e.component.length;r++)if(a==e.component[r].componentInfo.componentID)return e.component[r].attributes.outletID}catch(e){return"not set"}}}},hierarchyEvar:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("jcrPathLevel1"),t=_satellite.getVar("jcrPathLevel2"),a=_satellite.getVar("jcrPathLevel3"),r=_satellite.getVar("pageName"),n=_satellite.getVar("pa_pag_pageName"),s=[e,t,a],o=3;a.indexOf("None")>-1&&(o=2),t.indexOf("None")>-1&&(o=1),e.indexOf("None")>-1&&(o=0);for(var i="",l=0;l<o;l++){for(var c="",d=0;d<=l;d++)c+=s[d]+" > ";i+=(c=c.substring(0,c.length-3))+"|"}for(l=o;l<3;l++)i+=c+"|";return i+=r,i+="|"+n}catch(e){}}}},NPS_SHOWROOM_PSYMA:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e;switch(null==window.landingTime?(e=Math.floor(Date.now()/1e3),window.landingTime=e):e=window.landingTime,e%3){case 0:return"NPS";case 1:return"SHOWROOM";case 2:return"PSYMA"}}catch(e){_satellite.logger.log("NPS_SHOWROOM_PSYMA : ",e)}}}},isSavingsModeApplicable:{defaultValue:"false",cleanText:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{var t,a={ALL:"ALL",SOME:"SAVE-ONLY-ON-LISTED-MARKETS",ALL_EXCEPT_SOME:"SAVE-ON-ALL-MARKETS-EXCEPT-LISTED-MARKETS",NONE:"WHITELISTED_EVENT",SEND_ONLY_TO_GLOBAL:"SEND_ONLY_TO_GLOBAL"},r={cookie_link:{saveOn:a.ALL_EXCEPT_SOME,list:["bmw.de","bmw.co.uk","bmw.fr","bmw.it","bmw.es","bmw.co.jp","bmw.co.kr","bmw.ca","bmw.be","bmw.nl","bmw.ch","bmw.se","bmw.co.za","bmw.com.au","bmw.ru"]},open_navigation:{saveOn:a.NONE,samplingRate:20},close_navigation:{saveOn:a.NONE,samplingRate:20}},n=e.identifier||e.$rule.name,s=r[n],o=_satellite.getVar("topLevelDomain");return"true"!=(t=s.saveOn===a.ALL?"true":s.saveOn===a.NONE?"false":s.saveOn===a.SOME?s.list.indexOf(o)>-1?"true":"false":s.saveOn===a.ALL_EXCEPT_SOME?s.list.indexOf(o)>-1?"false":"true":"false")&&"false"==_satellite.getVar("isSamplingApplicable")(s.samplingRate||100)?(_satellite.logger.log('AA call for the Rule-"'+n+"\" needs to be aborted because the current call doesn't match the sampling rate-"+s.samplingRate),"true"):t}catch(e){_satellite.logger.error("Error in DE:isSavingsModeApplicable-",e)}}}},ev_att_wishlist:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.wishlist}catch(e){}}}},nonTechMetaData_EvarAddon:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("nonTechMetaData")+"~"+_satellite.getVar("nonTechMetaDataEvarAddon")}catch(e){}}}},ev_att_dealerId:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var t=_satellite.getVar("finalDataLayer"),a=t.event.length-1;return t.event[a].attributes.dealerId}catch(t){_satellite.logger.error("Error in data element ev_att_dealerId",e)}}}},pr_att_engine:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.engine;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},isAAMAllowed:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if("true"==_satellite.getVar("splitConsentEnabled")&&consentcontroller&&consentcontroller.api&&consentcontroller.api.isUsageAllowed&&"function"==typeof consentcontroller.api.isUsageAllowed)return consentcontroller.api.isUsageAllowed(_satellite.getVar("consentMap").AAM).toString();{var e,t=a()&&cookiecontroller.api.areBrowserCookiesEnabled()||navigator.cookieEnabled||!1;function a(){return"undefined"!=typeof cookiecontroller&&void 0!==cookiecontroller.api&&"function"==typeof cookiecontroller.api.isInitialized&&cookiecontroller.api.isInitialized()}function r(){var e=0==cookiecontroller.api.showDisclaimer()?"userProvidedConsent":"defaultConsent";return"userProvidedConsent"===e?"function"==typeof cookiecontroller.api.isRegulationAccepted?cookiecontroller.api.isRegulationAccepted():n():"defaultConsent"==e?o():void 0}function n(){var e=_satellite.getVar("userConsent");return"accepted"==e?"true":"rejected"==e?"false":"not-provided"==e?o():void 0}function s(){return a()&&"function"==typeof cookiecontroller.api.isRegulationAccepted?cookiecontroller.api.isRegulationAccepted():a()&&"function"==typeof cookiecontroller.api.hasRegulation&&cookiecontroller.api.hasRegulation()&&"function"==typeof cookiecontroller.api.getRegulationType&&"OPT_OUT"===cookiecontroller.api.getRegulationType()?"true":"false"}function o(){return"true"==(_satellite.getVar("isDefaultONCached")||_satellite.getVar("isDefaultON"))?"true":s()}return"noRSID"===_satellite.getVar("adobeRSID")||self!=top?(_satellite.logger.log("DTM: isAAMAllowed: either RSID is not set or Launch library is being loaded in iframe: Setting regulationAccepted to false"),e="false"):e=a()&&"function"==typeof cookiecontroller.api.showDisclaimer?r():t?n():"false",_satellite.logger.log("DE: isAAMAllowed - "+e),"string"!=typeof e?e.toString():e}}catch(e){return _satellite.logger.error("DE: Error in isAAMAllowed data element, returning false"+e),"false"}}}},ev_att_navigationElementWord:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.navigationElementWord;return""!=a&&null!=a||(a="not set"),a}catch(e){return"not set"}}}},geoRegion:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer");if(void 0!==e.page)return e.page.pageInfo.geoRegion;var t=location.hostname;if(t.indexOf("bmwjamaica.com")>-1)return"JM";if(t.indexOf("bmwhk.com")>-1)return"HK";if(t.indexOf("bmw-egypt.com")>-1)return"EG";var a=t.split("."),r=a[a.length-1];return r=r.toUpperCase()}catch(e){}}}},ev_att_fdo_calculations:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=_satellite.getVar("financeProductIndex"),r=e.event[t].attributes.financeDataObject.vehicle.calculations[a].parameterValues,n="",s="",o="",i="",l="",c="",d="",u="",g="",m="",p="",v="",b="",f="",_="",h=r.length-1,V=0;V<=h;V++){switch(r[V].parameterId){case"GrossListPrice":d="event216="+r[V].value+",";break;case"GrossPurchasePrice":u="event217="+r[V].value+",";break;case"MonthlyInstalment":v="event221="+r[V].value+",";break;case"BalloonAmount":n="event210="+r[V].value+",";break;case"BalloonPercentage":s="event211="+r[V].value+",";break;case"Term":_="event224="+r[V].value+",";break;case"ResidualValueAmount":b="event222="+r[V].value+",";break;case"DepositAmount":o="event212="+r[V].value+",";break;case"DepositPercentage":i="event213="+r[V].value+",";break;case"DownPaymentAmount":l="event214="+r[V].value+",";break;case"DownPaymentPercent":c="event215="+r[V].value+",";break;case"InterestEffective":g="event218="+r[V].value+",";break;case"NominalInterest":m="event219="+parseFloat(r[V].value).toFixed(2)+","
;break;case"Mileage":p="event220="+r[V].value+",";break;case"ResidualValuePercent":f="event223="+r[V].value+","}switch(r[V].definiteCode){case"GrossListPrice":d="event216="+r[V].value+",";break;case"GrossPurchasePrice":u="event217="+r[V].value+",";break;case"MonthlyInstalment":v="event221="+r[V].value+",";break;case"BalloonAmount":n="event210="+r[V].value+",";break;case"BalloonPercentage":s="event211="+r[V].value+",";break;case"Term":_="event224="+r[V].value+",";break;case"ResidualValueAmount":b="event222="+r[V].value+",";break;case"DepositAmount":o="event212="+r[V].value+",";break;case"DepositPercentage":i="event213="+r[V].value+",";break;case"DownPaymentAmount":l="event214="+r[V].value+",";break;case"DownPaymentPercent":c="event215="+r[V].value+",";break;case"InterestEffective":g="event218="+r[V].value+",";break;case"NominalInterest":m="event219="+parseFloat(r[V].value).toFixed(2)+",";break;case"Mileage":p="event220="+r[V].value+",";break;case"ResidualValuePercent":f="event223="+r[V].value+","}}var C="";return""!=s&&(C+="bp:"+s.substr(9).slice(0,-1)+"~"),""!=i&&(C+="dp:"+i.substr(9).slice(0,-1)+"~"),""!=c&&(C+="do:"+c.substr(9).slice(0,-1)+"~"),""!=g&&(C+="ie:"+g.substr(9).slice(0,-1)+"~"),""!=m&&(C+="in:"+m.substr(9).slice(0,-1)+"~"),""!=p&&(C+="ma:"+p.substr(9).slice(0,-1)+"~"),""!=f&&(C+="rv:"+f.substr(9).slice(0,-1)+"~"),""!=_&&(C+="te:"+_.substr(9).slice(0,-1)+"~"),""!=C&&(C="~"+C.slice(0,-1)),n+s+o+i+l+c+d+u+g+m+p+v+b+f+_+"|"+C}catch(e){return _satellite.logger.error("SATELLITE: Could not load SF events"),"|"}}}},ev_cat_subCategory03:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=((e.event[t]||[]).category||"").subCategory03||"";return null!=a&&""!=a||(a="not set"),a}catch(e){_satellite.logger.error("Error in Data Element - ev_cat_subCategory03",e)}}}},cc_consentCookie:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/cookie.js",settings:{name:"cc_consentCookie"}},documentHeight:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.documentHeight}catch(e){}}}},perfTime_query:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.cookie.get("bmwdtm_hq_perf");return void 0!==e?(jdata=JSON.parse(e),jdata.query):"na"}catch(e){return _satellite.logger.error("Error in Data Element perfTime_query : "+e),"na"}}}},ev_att_engine:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.engine}catch(e){}}}},pr_att_modelCode:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.modelCode;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},pr_att_basePrice:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].attributes.basePrice;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},isUsabillaAllowed:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if("true"==_satellite.getVar("splitConsentEnabled")&&consentcontroller&&consentcontroller.api&&consentcontroller.api.isUsageAllowed&&"function"==typeof consentcontroller.api.isUsageAllowed)return consentcontroller.api.isUsageAllowed(_satellite.getVar("consentMap").UsabillaSurvey).toString();{var e,t=a()&&cookiecontroller.api.areBrowserCookiesEnabled()||navigator.cookieEnabled||!1;function a(){return"undefined"!=typeof cookiecontroller&&void 0!==cookiecontroller.api&&"function"==typeof cookiecontroller.api.isInitialized&&cookiecontroller.api.isInitialized()}function r(){var e=0==cookiecontroller.api.showDisclaimer()?"userProvidedConsent":"defaultConsent";return"userProvidedConsent"===e?"function"==typeof cookiecontroller.api.isRegulationAccepted?cookiecontroller.api.isRegulationAccepted():n():"defaultConsent"==e?o():void 0}function n(){var e=_satellite.getVar("userConsent");return"accepted"==e?"true":"rejected"==e?"false":"not-provided"==e?o():void 0}function s(){return a()&&"function"==typeof cookiecontroller.api.isRegulationAccepted?cookiecontroller.api.isRegulationAccepted():a()&&"function"==typeof cookiecontroller.api.hasRegulation&&cookiecontroller.api.hasRegulation()&&"function"==typeof cookiecontroller.api.getRegulationType&&"OPT_OUT"===cookiecontroller.api.getRegulationType()?"true":"false"}function o(){return"true"==(_satellite.getVar("isDefaultONCached")||_satellite.getVar("isDefaultON"))?"true":s()}return"noRSID"===_satellite.getVar("adobeRSID")||self!=top?(_satellite.logger.log("DTM: isRegulationAccepted: either RSID is not set or DTM library is being loaded in iframe: Setting regulationAccepted to false"),e="false"):e=a()&&"function"==typeof cookiecontroller.api.showDisclaimer?r():t?n():"false","string"!=typeof e?e.toString():e}}catch(e){return _satellite.logger.error("Usabilla Consent data element, returning false"+e),"false"}}}},nonTechMetaDataEvarAddon:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return"wd:"+new Function("h","z","var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMonth()!=0){return'Data Not Available';}else{var H,M,D,U,ds,de,tm,da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d=new Date();z=z?z:0;z=parseFloat(z);if(s._tpDST){var dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de){z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d.getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();if(M>30){M='30'}else{M='00'}U=' AM';if(H>=12){U=' PM';H=H-12;}if(H==0){H=12;}D=da[D];tm=H+':'+M+U;return(tm+'|'+D);}")("n").split("|")[1]}catch(e){_satellite.logger.error("DE nonTechMetaDataEvarAddon ",e)}}}},ev_att_sourceContentTitle:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.sourceContentTitle;return""!=a&&null!=a||(a="not set"),a}catch(e){return"not set"}}}},pa_cat_subCategory01:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("finalDataLayer").page.category.subCategory01}catch(e){}}}},ev_att_selectedCountry:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.selectedCountry}catch(e){}}}},componentOffset:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.componentOffset}catch(e){}}}},ev_att_campaignID_NBO:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event&&e.event[t]&&e.event[t].attributes&&e.event[t].attributes.campaignID?e.event[t].attributes.campaignID:""}catch(e){_satellite.logger.error("Error in Data element ev_att_campaignID_NBO")}}}},searchTerm:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e=_satellite.getVar("finalDataLayer"),t=e.component.length-1;t>0;t--)if(e.component[t].attributes){var a=e.component[t].attributes.onsiteSearchTerm;if(void 0!==a)return a}}catch(e){return""}}}},isPerformanceStatisticsAllowed:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return"true"==_satellite.getVar("splitConsentEnabled")&&consentcontroller&&consentcontroller.api&&consentcontroller.api.isUsageAllowed&&"function"==typeof consentcontroller.api.isUsageAllowed?consentcontroller.api.isUsageAllowed(_satellite.getVar("consentMap").PerformanceStatistics).toString():"false"}catch(e){return _satellite.logger.error("DE: Error in performanceStatistics data element, returning false"+e),"false"}}}},aamContainerID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=0,t=_satellite.getVar("topLevelDomain"),a={"bmw.it":6,"bmw.co.uk":19};return void 0!==a[t]&&(e=a[t]),e}catch(e){_satellite.logger.error("Error in aamContainerID DE "+e)}}}},ev_att_newsletterSelected:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.newsletterSelected}catch(e){}}}},pa_att_loadChat:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer").page.attributes.loadChat;return null!=e&&""!=e||(e="true"),e}catch(e){}}}},pathName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return window.location.pathname}catch(e){}}}},ev_eve_effect:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.effect}catch(e){}}}},ev_att_highlightID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.highlightID;return""!=a&&null!=a||(a="not set"),a}catch(e){return"not set"}}}},internalCampaignParameter:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}for(var t=["icp"],a="",r=0;r<t.length&&!(a=e(t[r]));r++);return a}catch(e){"true"==localStorage.getItem("sdsat_debug")&&_satellite.logger.log("SATELLITE: Campaign not tracked")}}}},SessionID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e="."+_satellite.getVar("topLevelDomain");if(void 0===_satellite)return;var t=_satellite.cookie.get("bmwdtm_hq_sid");if(void 0===t){function a(e,t){for(var a="",r=e;r>0;--r)a+=t[Math.round(Math.random()*(t.length-1))];return a}var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=new Date,s=n.getUTCFullYear()-2e3,o=n.getMonth(),i=n.getUTCDate(),l=n.getUTCHours(),c=n.getUTCMinutes(),d=n.getUTCSeconds(),u=n.getMilliseconds(),g=r[(l*c*d+u)%r.length],m=r[(l+c+d+u)%r.length],p=a(6,r);t=r[s]+r[o]+r[i]+r[l]+g+m+p}var v=new Date;v.setTime(v.getTime()+18e5);var b="; expires="+v.toGMTString();return"true"==_satellite.getVar("splitConsentEnabled")?"true"==_satellite.getVar("isPerformanceStatisticsAllowed")&&(document.cookie="bmwdtm_hq_sid="+t+b+";domain="+e+"; path=/"):document.cookie="bmwdtm_hq_sid="+t+b+";domain="+e+"; path=/",t=_satellite.cookie.get("bmwdtm_hq_sid")}catch(e){return _satellite.logger.error("error in isPerformanceStatisticsAllowed DE ",e),"not set"}}}},cookieConsentForTarget:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e="true",t=null!=(a=new RegExp("cc_consentCookie"+"=([^;]+)").exec(document.cookie))?decodeURIComponent(a[1]):null;return"string"==typeof t&&t.indexOf("REJECTED")>-1&&(e="false"),e}catch(e){return"false"}var a}}},usabilla_restrict_keywords_url:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e=["prueba","oferta","rfi","rfo","tda","my-bmw-start.html","dlo","rfc","my-bmw.html","panoramica","gamma","test-drive-now","bmw-cataloghi.html","offers-service","offres-et-services","toute-la-gamme","test-drive","forms/request.html","offers-and-services","tda-experience","contact","offerte","proefrit","berekenen","nieuwsbrief","online-afspraakplanner","aanvraag/contact","vakantieauto","brochure-prijslijst","my-bmw.html","accessoire-configurator","call-me-back.html","als-eerste-rijden"],t=0;t<e.length;t++)if(-1!==_satellite.getVar("URL").indexOf(e[t]))return!0;return!1}catch(e){_satellite.logger.error("Error in data element  usabilla_restrict_keywords")}}}},splitConsentEnabled:{defaultValue:"false",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(epaas&&epaas.api&&epaas.api.getApiInfo)return epaas.api.getApiInfo().splitConsentManagement?"true":"false";var e=["bmw.de","bmw-albania.com","bmw.am","bmw.co.ao","bmw.az","bmw.ba","bmw.bs","bmw.ht","bmw-egypt.com","bmw.hn","bmw.lc","bmw.lk","bmw.ly","bmwmyanmar.com","bmw.sr","bmw.tj","bmw.tm","bmw-int5.com","bmw.it","bmw.bg","bmw.hr","bmw.com.cy","bmw.cz","bmw.com.mt","bmw.gr","bmw.hu","bmw.ro","bmw.sk","bmw.si","bmw.be","bmw.lu","bmw.at","bmw.es","bmw.pl","bmw-int6.com","bmw.nl","bmw.fr","bmw.ch","bmw.ie","bmw.lv","bmw.ee","bmw.gp","bmw.mu","bmw.mq","bmw.co.uk","bmw.pt","bmw.re","bmw.is","bmw.lt","bmw.dk","bmw.fi","bmw.se","bmw.no","bmw.com.br","bmwbkk.de","bmw-m.com","bmw-motorsport.com","bmw.in","bmw.rs","bmw.md","bmw.cc","www.bmw-voli.me","bmw.com.mk","bmw.ma","bmw.co.cr","bmw.com.co","bmw.com.uy","bmw.kg","bmw.com.py","bmw.ru"],t=_satellite.getVar("topLevelDomain");return e.indexOf(t)>-1?"true":"false"}catch(e){return _satellite.logger.error("Error in DE: splitConsentEnabled Data Element"+e),"false"}}}},check_RFI_Form_Type:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return"postal"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?"RFI Postal Form":"download"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?"RFI Download Form":"RFI Form"}catch(e){_satellite.logger.error("Error in Data Element check_RFI_Form_Type",e)}}}},"performance timing sender":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{delete window.perfTime.URL,delete window.perfTime.events,delete window.perfTime.timesString;for(var e=!1,t="bmwdtm_hq_perf=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(var n=a[r];" "===n.charAt(0);)n=n.substring(1,n.length);0===n.indexOf(t)&&(e=n.substring(t.length,n.length))}if("[]"!=e.toString()&&0!=e){var s=(e=JSON.parse(e)).shift().split(",");window.perfTime.URL=s[0],_satellite.logger.log("performance timing: eVar35 = "+s[0]),window.perfTime.events="event235="+s[1]+",event236="+s[2]+",event237="+s[3],_satellite.logger.log("performance timing: events = "+window.perfTime.events),window.perfTime.timesString="nw:"+Math.floor(s[1]/100)/10+"~se:"+Math.floor(s[2]/100)/10+"~br:"+Math.floor(s[3]/100)/10,_satellite.logger.log("performance timing: eVar32 = "+window.perfTime.timesString);var o=new Date;o.setTime(o.getTime()+18e5);var i="; expires="+o.toGMTString();document.cookie="bmwdtm_hq_perf="+JSON.stringify(e)+i+"; path=/",e.length>0?window.perfTime.Queue=!0:window.perfTime.Queue=!1}}catch(e){_satellite.logger.log(e)}}}},isAdobeAnalyticsAllowed:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if("true"==_satellite.getVar("splitConsentEnabled")&&consentcontroller&&consentcontroller.api&&consentcontroller.api.isUsageAllowed&&"function"==typeof consentcontroller.api.isUsageAllowed)return consentcontroller.api.isUsageAllowed(_satellite.getVar("consentMap").AdobeAnalytics).toString();{var e,t=a()&&cookiecontroller.api.areBrowserCookiesEnabled()||navigator.cookieEnabled||!1;function a(){return"undefined"!=typeof cookiecontroller&&void 0!==cookiecontroller.api&&"function"==typeof cookiecontroller.api.isInitialized&&cookiecontroller.api.isInitialized()}function r(){var e=0==cookiecontroller.api.showDisclaimer()?"userProvidedConsent":"defaultConsent";return"userProvidedConsent"===e?"function"==typeof cookiecontroller.api.isRegulationAccepted?cookiecontroller.api.isRegulationAccepted():n():"defaultConsent"==e?o():void 0}function n(){var e=_satellite.getVar("userConsent");return"accepted"==e?"true":"rejected"==e?"false":"not-provided"==e?o():void 0}function s(){return a()&&"function"==typeof cookiecontroller.api.isRegulationAccepted?cookiecontroller.api.isRegulationAccepted():a()&&"function"==typeof cookiecontroller.api.hasRegulation&&cookiecontroller.api.hasRegulation()&&"function"==typeof cookiecontroller.api.getRegulationType&&"OPT_OUT"===cookiecontroller.api.getRegulationType()?"true":"false"}function o(){return"true"==(_satellite.getVar("isDefaultONCached")||_satellite.getVar("isDefaultON"))?"true":s()}return"noRSID"===_satellite.getVar("adobeRSID")||self!=top?(_satellite.logger.log("DTM: isRegulationAccepted: either RSID is not set or DTM library is being loaded in iframe: Setting regulationAccepted to false"),e="false"):e=a()&&"function"==typeof cookiecontroller.api.showDisclaimer?r():t?n():"false",_satellite.logger.log("DE: isAdobeAnalyticsAllowed- "+e),"string"!=typeof e?e.toString():e}}catch(e){return _satellite.logger.error("DE: Error in isAdobeAnalyticsAllowed data element, returning false"+e),"false"}}}},perfTime_url:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.cookie.get("bmwdtm_hq_perf");return void 0!==e?(jdata=JSON.parse(e),jdata.path):""}catch(e){return _satellite.logger.error("Error in Data Element perfTime_url: "+e),"na"}}}},pa_pag_destinationUrl:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer").page.pageInfo.destinationUrl;return e=e.toLowerCase()}catch(e){}}}},totalScrollTrackingComponents:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.totalScrollTrackingComponents}catch(e){}}}},navEvarForClicks:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{_satellite.getVar("functionList");var e,t=_satellite.getVar("pa_cat_primaryCategory"),a=(_satellite.getVar("pa_cat_subCategory01"),_satellite.getVar("pa_cat_pageType"),_satellite.getVar("ev_eve_eventAction")),r=_satellite.getVar("ev_eve_target"),n=_satellite.getVar("ev_eve_eventName"),s=_satellite.getVar("ev_eve_cause"),o=_satellite.getVar("ev_cat_subCategory01"),i=(_satellite.getVar("pa_pag_pageName"),_satellite.getVar("ev_eve_eventPoints")),l=_satellite.getVar("ev_eve_effect"),c=_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable(),d=n,u=_satellite.getVar("ev_att_componentHeadline"),g="Not available",m="Not available",p=_satellite.getVar("URLNoParam");return"iFrame - After Sales Service Special Step"==a&&(g="Module Interaction",d="Not available",c="Aftersales - Service Special",u="Not available",m="Not available",p=r),"not set"!=_satellite.getVar("ev_att_highlightID")&&(g="Highlight Interaction",d=_satellite.getVar("ev_att_navigationElementWord"),c="Highlight",u=n,m="Not available"),"Outbound click"==a||"outbound_click"==a?(g="External Pagelink",m=r,"Stage teaser"!=c&&"Content slider"!=c||(u=s)):"Download"==a?(g="Download",m=r,d=n,"Stage teaser"!=c&&"Content slider"!=c||(u=s)):"Share"==a?(g="Share",m="Not available",d=l):"Open content"==a||"Expand"==a?(g="Open content",m=r,d=n):"Slider interaction"==a?(g="Slider interaction",m=r,d=l):"Compare images"==a?(g="Compare images",m=r,d=l):"Open Tooltip"==a||"Open tooltip"==a?(g="Open Tooltip",m=r,d=l):"Impression"==a?(g="Impression",m=r,d=l):"Start video"==a||"Milestone"==a?(g="Video",d="Video start",m=r||"Not available"):"Go to"==a?(g="External Pagelink",d="Visit retailer website",c="Dealer locator",m=n):"Call"==a?(g="Call",d=n,c="Dealer locator"):"Email"==a?(g="Email",d=n):"Print"==a?(g="Download",d=n):"Open hotspot layer"==a?(g="Hotspot",d=n):"Filter"==a?(d=n,g="Filter",m=r,s=s||"Not Available"):"Open layer"==a?(d=n,g="Open Layer"):"Open Navigation"==a?(d=n,g="Open Navigation"):"More Search Results"==n?(d="Load more",g="Expand",u="Not available",c="Search"):"Call to Action"==a?(d=s,m=r,g=n):a.indexOf("Open Navigation")>-1&&(d=n,g="OpenNavigation"),"Accessory Configurator"==o&&(g="Module Interaction",c="Accessory Configurator",d=n),"AC iFrame - Accessory Configurator Step"==a?(g="Change Step",c="Accessory Configurator",d=n):a.indexOf("AC iFrame")>-1&&(g="Module Interaction",c="Accessory Configurator",d=a.split(" - ")[1]),"Dealer Locator"==t&&(c="Dealer locator","Dealer locator state"!=i&&"Dealerlocator state"!=i||(g="DLO Step",m=window.location.hostname+window.location.pathname)),"VCO"==t&&(p=_satellite.getVar("vco_referring_url"),c="VCO module","Visualizer Interactions"==a?(g="Configuration",d=_satellite.getVar("ev_eve_effect")):"Open Form"==a?g="Internal Pagelink":"Calculate"==a?(g="FS Interaction",d="Not available"):"Change product"==a?g="FS Interaction":"Buildability Conflict"==n?(g="Configuration",d="Not available"):"Share"==a?(g="Share",d="Share Configuration",m="Not available"):"Download"==a?(d="Not available",m=n):"Save Configuration"==a?(d="Save Configuration Icon",m="Not available",g="Open Layer"):"Show price-rate"==a||"Show total-price"==a?g="FS Interaction":"Print"==a?(g="Download",n.indexOf("Finance PDF Report")>-1?d="Finance PDF Report":(d="Download Configuration",m="Configuration_Download_"+_satellite.getVar("pr_pro_productName")+".pdf")):g=a),""!=c&&null!=c||(c="Not available"),""!=u&&null!=u||(u="Not available"),""!=d&&null!=d||(d="Not available"),e=(e="Filter"==a&&"NB Model Filter"==c?a+"~"+n+"~"+c+"~"+u+"~"+p+"~"+m+"~"+l+"~"+s+"~"+_satellite.getVar("ev_eve_element"):g+"~"+d+"~"+c+"~"+u+"~"+p+"~"+m).toLowerCase(),_satellite.logger.info("Launch: clickEvar is: "+e),e=e.replace("#","?"),_satellite.logger.info("Launch: after replacing # : clickEvar is: "+e),e=e.replace("?/","?"),_satellite.logger.info("Launch: after replacing ?/ : clickEvar is: "+e),e=e.replace("#/","?"),_satellite.logger.info("Launch: after replacing #/ : clickEvar is: "+e),e=e.replace("amp;",""),_satellite.logger.info("Launch: after replacing amp; : URL is: "+URL),e}catch(e){return"Not available~Not available~Not available~Not available~"+_satellite.getVar("URLNoParam")+"~Not available"}}}},adobeTargetProperty:{defaultValue:"false",cleanText:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var t=_satellite.getVar("topLevelDomain"),a={"bmw.it":"14a7eacb-d9ed-139b-3740-1715a4324a87","bmw.nl":"a32b2cb6-0d0b-bd0d-b61b-117ae1c93e2a","bmw.fr":"c63e9226-164f-68ce-6a77-04714d861534","bmw.es":"5f6624f7-b481-68c5-89ec-2f7c6df01e47","bmw.co.kr":"265709a7-eeba-c737-64b2-0bf051f21cb7","bmw.co.jp":"3ff9d062-6800-4a61-0e57-9d03be4a750d","bmw.co.za":"08d747c0-6d3b-df18-bfb9-b24468cafd0d","bmw.ru":"932155db-25c4-5f53-1e6a-420ea418566a","bmw.com.cn":"ed0ef1ce-ea2a-0bc5-23cf-807e84e8fc28","bmw.se":"5fec81b0-d53d-f0c2-76ab-2563557abf59","bmw.com.tr":"71b3a365-8c33-0b8c-f7ef-5d307dde0ea4","bmw.at":"0cf18719-6a28-12fe-562a-a61a9a1d2c3c","bmw.com.mx":"3ecca491-698c-851a-9b1f-0cc5efe31d99","bmw.pl":"ca83460d-3364-fbeb-443a-808a2d6d290f","bmw.ca":"240a98d1-97d2-4caf-069b-db1ed515c04e","bmw.be":"a2e280c3-8caf-d7e3-7dd2-7f9097e49c22","bmw.co.uk":"0c9cfadf-3753-7304-c045-49d4d0616e83"};return void 0!==a[t]?a[t]:""}catch(t){_satellite.logger.error("Error in Data element adobeTargetProperty-",e)}}}},"GA-consentMap":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return"true"===_satellite.getVar("splitConsentEnabled")?{AdobeAnalytics:"AdobeAnalytics",Target:"AdobeTargetAnalytics",TargetPersonalization:"AdobeTargetPersonalization",AAM:"AdobeAudienceManager_DMP",campaignCookieTracking:"campaignCookieTracking",GoogleAnalytics:"GoogleAnalytics"}:{AdobeAnalytics:"advertising",Target:"advertising",TargetPersonalization:"advertising",AAM:"advertising",Others:"advertising",campaignCookieTracking:"campaignCookieTracking",GoogleAnalytics:"advertising"}}catch(t){var e={from:"AA",type:"DE",name:"GA-consentMap"};_satellite.logger.error(t,e)}}}},co_att_onsiteSearchResults:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.relatedComponentID,r=0;r<e.component.length;r++)if(a==e.component[r].componentInfo.componentID)return e.component[r].attributes.onsiteSearchResults}catch(e){return"not set"}}}},pa_pag_pageTitle:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("finalDataLayer").page.pageInfo.pageTitle}catch(e){}}}},ev_att_manufacturer:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].attributes.manufacturer}catch(e){}}}},bid_parameter:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}for(var t=["bid"],a="",r=0;r<t.length&&!(a=e(t[r]));r++);return a}catch(e){"true"==localStorage.getItem("sdsat_debug")&&_satellite.logger.log("SATELLITE: Campaign not tracked")}}}},pa_att_outletName:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("finalDataLayer").page.attributes.outletName}catch(e){}}}},ev_eve_navigationClose:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1;return e.event[t].eventInfo.navigationClose}catch(e){_satellite.logger.log("error in ev_eve_navigationClose DE"+e)}}}},pr_pro_productID:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.product.length-1,a=e.product[t].productInfo.productID;return""==a&&(a="not set"),a}catch(e){return"not set"}}}},co_att_onSiteSearchTerm:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{for(var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.relatedComponentID,r=0;r<e.component.length;r++)if(a==e.component[r].componentInfo.componentID)return e.component[r].attributes.onSiteSearchTerm}catch(e){return"not set"}}}},ev_att_navigationElement:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("finalDataLayer"),t=e.event.length-1,a=e.event[t].attributes.navigationElement;return""!=a&&null!=a||(a="not set"),a}catch(e){return"not set"}}}},us_seg_logged:{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return"yes"==_satellite.getVar("finalDataLayer").user[0].segment.logged?"logged in":"not logged in"}catch(e){}}}}},extensions:{"bmw-group-utility-kit":{displayName:"Utility Kit",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP2266a5c5e89a41929de2c44a88e78182/",settings:{webDL:{dataElement:"%webDL%"},privacyManager:{type:{code:function(e){return"true"===_satellite.getVar("splitConsentEnabled")?e.EPAAS_SPLIT:e.EPAAS_NON_SPLIT}},methodSettings:{code:function(){}}}},modules:{"bmw-group-utility-kit/extension-package-src/lib/dataElements/snapshotAttribute.js":{name:"snapshot-attribute",displayName:"Snapshot Attribute",script:function(e,t,a){"use strict";var r=a("../helpers/dataLayerManager");e.exports=function(e){var t=e.snapshotAttribute&&e.snapshotAttribute.path;return r.getSnapshot().get(t)}}},"bmw-group-utility-kit/extension-package-src/lib/dataElements/dataLayerSnapshot.js":{name:"data-layer-snapshot",displayName:"Data Layer Snapshot",script:function(e,t,a){"use strict";var r=a("../helpers/dataLayerManager");e.exports=function(){return r.getSnapshot()}}},"bmw-group-utility-kit/extension-package-src/lib/actions/takeSnapshot.js":{name:"take-snapshot",displayName:"Take Snapshot",script:function(e,t,a,r){"use strict";var n=a("../helpers/dataLayerManager"),s=r.getSharedModule("adobe-analytics","get-tracker");e.exports=function(e,t){t.detail=t.detail||{},t.detail.snapshotDL=n.takeSnapshot(t.$rule.name,t.detail.webDL),s&&s().then((function(){n.takeSnapshot(t.$rule.name,t.detail.snapshotDL.snapshot)}))}}},"bmw-group-utility-kit/extension-package-src/lib/actions/discardSnapshot.js":{name:"discard-snapshot",displayName:"Discard Snapshot",script:function(e,t,a,r){"use strict";var n=a("../helpers/dataLayerManager"),s=r.getSharedModule("adobe-analytics","get-tracker");e.exports=function(){n.removeSnapshot(),s&&s().then((function(){n.removeSnapshot()}))}}},"bmw-group-utility-kit/extension-package-src/lib/helpers/dataLayerManager.js":{script:function(e,t,a,r){"use strict";function n(e,t,a){if(!e)throw new Error("'takenAt' is a required parameter while instantiating the Snapshot class");this.debug={takenAt:e};var n=r.getExtensionSettings().webDL&&r.getExtensionSettings().webDL.dataElement;t||n?(this.snapshot=JSON.parse(JSON.stringify(t||n)),this.debug.type=a||(t?i.PARAMETER:n?i.WEBDL:i.EMPTY)):(r.logger.warn("NOTE: Website datalayer not available while creating the snapshot"),this.snapshot={},this.debug.type=i.EMPTY)}var s,o=a("./external_modules/deepFreeze"),i={FALLBACK:"CURRENT_DATALAYER_STATE",WEBDL:"WEBSITE_DATALAYER",PARAMETER:"CUSTOM_PARAMETER",EMPTY:"EMPTY"};n.prototype.get=function(e,t){try{for(var a=["","na","not set","n/a","not available","not yet available","not selected","unknown"],n=(e=e||"").split("."),s=this.snapshot,o=0;o<n.length&&null!=s;o++)s=Array.isArray(s)&&/-[0-9]+/.test(n[o])?s[s.length-Math.abs(parseInt(n[o]))]:s[n[o]];return"string"==typeof s&&a.indexOf(s.toLowerCase())>-1?t||"datalayer field empty":s||t||"datalayer field missing"}catch(e){r.logger.error("Error:BMW Group Utility Kit:dataLayerManager:Snapshot.get()-",e)}};var l=function(){this.takeSnapshot=function(e,t){return s=new n(e,t),o(s)},this.getSnapshot=function(){return s||(r.logger.info("NOTE: No snapshot available, returning the current web datalayer, if available"),o(new n("NO_SNAPSHOT_AVAILABLE",void 0,i.FALLBACK)))},this.removeSnapshot=function(){s=void 0}};e.exports=new l}},"bmw-group-utility-kit/extension-package-src/lib/helpers/external_modules/deepFreeze.js":{script:function(e){e.exports=function e(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((function(a){!t.hasOwnProperty(a)||null===t[a]||"object"!=typeof t[a]&&"function"!=typeof t[a]||Object.isFrozen(t[a])||e(t[a])})),t}}}}},core:{displayName:"Core",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPd22815afd48447aa955be6a3a012e3b5/",modules:{"core/src/lib/dataElements/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source(t)}}},"core/src/lib/dataElements/localStorage.js":{name:"local-storage",displayName:"Local Storage",script:function(e,t,a){"use strict";var r=a("@adobe/reactor-window");e.exports=function(e){try{return r.localStorage.getItem(e.name)}catch(e){
return null}}}},"core/src/lib/dataElements/cookie.js":{name:"cookie",displayName:"Cookie",script:function(e,t,a){"use strict";var r=a("@adobe/reactor-cookie");e.exports=function(e){return r.get(e.name)}}},"core/src/lib/events/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){e.source(t)}}},"core/src/lib/events/windowLoaded.js":{name:"window-loaded",displayName:"Window Loaded",script:function(e,t,a){"use strict";var r=a("./helpers/pageLifecycleEvents");e.exports=function(e,t){r.registerWindowLoadedTrigger(t)}}},"core/src/lib/conditions/valueComparison.js":{name:"value-comparison",displayName:"Value Comparison",script:function(e,t,a){"use strict";var r=a("../helpers/stringAndNumberUtils").isString,n=a("../helpers/stringAndNumberUtils").isNumber,s=a("../helpers/stringAndNumberUtils").castToStringIfNumber,o=a("../helpers/stringAndNumberUtils").castToNumberIfString,i=function(e,t){return t&&r(e)?e.toLowerCase():e},l=function(e){return function(t,a,n){return t=s(t),a=s(a),r(t)&&r(a)&&e(t,a,n)}},c=function(e){return function(t,a){return t=o(t),a=o(a),n(t)&&n(a)&&e(t,a)}},d=function(e){return function(t,a,r){return e(i(t,r),i(a,r))}},u={equals:d((function(e,t){return e==t})),doesNotEqual:function(){return!u.equals.apply(null,arguments)},contains:l(d((function(e,t){return-1!==e.indexOf(t)}))),doesNotContain:function(){return!u.contains.apply(null,arguments)},startsWith:l(d((function(e,t){return 0===e.indexOf(t)}))),doesNotStartWith:function(){return!u.startsWith.apply(null,arguments)},endsWith:l(d((function(e,t){return e.substring(e.length-t.length,e.length)===t}))),doesNotEndWith:function(){return!u.endsWith.apply(null,arguments)},matchesRegex:l((function(e,t,a){return new RegExp(t,a?"i":"").test(e)})),doesNotMatchRegex:function(){return!u.matchesRegex.apply(null,arguments)},lessThan:c((function(e,t){return e<t})),lessThanOrEqual:c((function(e,t){return e<=t})),greaterThan:c((function(e,t){return e>t})),greaterThanOrEqual:c((function(e,t){return e>=t})),isTrue:function(e){return!0===e},isTruthy:function(e){return Boolean(e)},isFalse:function(e){return!1===e},isFalsy:function(e){return!e}};e.exports=function(e){return u[e.comparison.operator](e.leftOperand,e.rightOperand,Boolean(e.comparison.caseInsensitive))}}},"core/src/lib/conditions/subdomain.js":{name:"subdomain",displayName:"Subdomain",script:function(e,t,a){"use strict";var r=a("@adobe/reactor-document"),n=a("../helpers/textMatch");e.exports=function(e){var t=r.location.hostname;return e.subdomains.some((function(e){var a=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return n(t,a)}))}}},"core/src/lib/actions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e,t,a,r){"use strict";var n,s,o,i,l=a("@adobe/reactor-document"),c=a("@adobe/reactor-promise"),d=a("./helpers/decorateCode"),u=a("./helpers/loadCodeSequentially"),g=a("../../../node_modules/postscribe/dist/postscribe"),m=a("./helpers/unescapeHtmlCode"),p=a("../helpers/findPageScript").getTurbine,v=(s=function(e){g(l.body,e,{beforeWriteToken:function(e){var t=e.tagName&&e.tagName.toLowerCase();return n&&"script"===t&&(e.attrs.nonce=n),"script"!==t&&"style"!==t||(Object.keys(e.attrs||{}).forEach((function(t){e.attrs[t]=m(e.attrs[t])})),e.src&&(e.src=m(e.src))),e},error:function(e){r.logger.error(e.msg)}})},o=[],i=function(){if(l.body)for(;o.length;)s(o.shift());else setTimeout(i,20)},function(e){o.push(e),i()}),b=function(){if(l.currentScript)return l.currentScript.async;var e=p();return!e||e.async}();e.exports=function(e,t){var a;n=r.getExtensionSettings().cspNonce;var s={settings:e,event:t},o=s.settings.source;if(o)return s.settings.isExternal?u(o).then((function(e){return e?(a=d(s,e),v(a.code),a.promise):c.resolve()})):(a=d(s,o),b||"loading"!==l.readyState?v(a.code):l.write&&!1===r.propertySettings.ruleComponentSequencingEnabled?l.write(a.code):v(a.code),a.promise)}}},"core/src/lib/events/click.js":{name:"click",displayName:"Click",script:function(e,t,a){"use strict";var r=a("@adobe/reactor-window"),n=a("./helpers/createBubbly")(),s=new(a("./helpers/weakMap")),o=2,i=a("../helpers/stringAndNumberUtils").castToNumberIfString,l=function(e){if(!e.ctrlKey&&!e.metaKey&&e.button!==o)for(var t=e.target;t;){var a=t.tagName;if(a&&"a"===a.toLowerCase()){var n=t.getAttribute("href"),s=t.getAttribute("target");return n&&(!s||"_self"===s||"_top"===s&&r.top===r||s===r.name)?t:void 0}t=t.parentNode}};document.addEventListener("click",n.evaluateEvent,!0),e.exports=function(e,t){n.addListener(e,(function(a){var n=a.nativeEvent;if(!n.s_fe){var o=i(e.anchorDelay);if(o&&!s.has(n)){var c=l(n);c&&(n.preventDefault(),setTimeout((function(){r.location=c.href}),o)),s.set(n,!0)}t(a)}}))},e.exports.__reset=n.__reset}},"core/src/lib/conditions/path.js":{name:"path",displayName:"Path Without Query String",script:function(e,t,a){"use strict";var r=a("@adobe/reactor-document"),n=a("../helpers/textMatch");e.exports=function(e){var t=r.location.pathname;return e.paths.some((function(e){var a=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return n(t,a)}))}}},"core/src/lib/events/directCall.js":{name:"direct-call",displayName:"Direct Call",script:function(e,t,a,r){"use strict";var n={};window._satellite=window._satellite||{},window._satellite.track=function(e,t){e=e.trim();var a=n[e];if(a){var s={identifier:e,detail:t};a.forEach((function(e){e(s)}));var o=['Rules using the direct call event type with identifier "'+e+'" have been triggered'+(t?" with additional detail:":".")];t&&o.push(t),r.logger.log.apply(r.logger,o)}else r.logger.log('"'+e+'" does not match any direct call identifiers.')},e.exports=function(e,t){var a=n[e.identifier];a||(a=n[e.identifier]=[]),a.push(t)}}},"core/src/lib/events/domReady.js":{name:"dom-ready",displayName:"DOM Ready",script:function(e,t,a){"use strict";var r=a("./helpers/pageLifecycleEvents");e.exports=function(e,t){r.registerDomReadyTrigger(t)}}},"core/src/lib/conditions/pathAndQuerystring.js":{name:"path-and-querystring",displayName:"Path And Query String",script:function(e,t,a){"use strict";var r=a("@adobe/reactor-document"),n=a("../helpers/textMatch");e.exports=function(e){var t=r.location.pathname+r.location.search;return e.paths.some((function(e){var a=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return n(t,a)}))}}},"core/src/lib/events/libraryLoaded.js":{name:"library-loaded",displayName:"Library Loaded (Page Top)",script:function(e,t,a){"use strict";var r=a("./helpers/pageLifecycleEvents");e.exports=function(e,t){r.registerLibraryLoadedTrigger(t)}}},"core/src/lib/conditions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source.call(t.element,t,t.target)}}},"core/src/lib/events/historyChange.js":{name:"history-change",displayName:"History Change",script:function(e,t,a){"use strict";var r=a("./helpers/debounce"),n=a("./helpers/once"),s=window.history,o=window.location.href,i=[],l=function(e,t,a){var r=e[t];e[t]=function(){var t=r.apply(e,arguments);return a.apply(null,arguments),t}},c=r((function(){var e=window.location.href;o!==e&&(i.forEach((function(e){e()})),o=e)}),0),d=n((function(){s&&(s.pushState&&l(s,"pushState",c),s.replaceState&&l(s,"replaceState",c)),window.addEventListener("popstate",c),window.addEventListener("hashchange",c)}));e.exports=function(e,t){d(),i.push(t)}}},"core/src/lib/conditions/variable.js":{name:"variable",displayName:"Variable",script:function(e,t,a){"use strict";var r=a("../helpers/getObjectProperty"),n=a("../helpers/textMatch");e.exports=function(e){var t=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return n(r(window,e.name),t)}}},"core/src/lib/events/submit.js":{name:"submit",displayName:"Submit",script:function(e,t,a){"use strict";var r=a("./helpers/createBubbly")();document.addEventListener("submit",r.evaluateEvent,!0),e.exports=function(e,t){r.addListener(e,t)}}},"core/src/lib/events/helpers/pageLifecycleEvents.js":{script:function(e,t,a){"use strict";var r=a("@adobe/reactor-window"),n=a("@adobe/reactor-document"),s=-1!==r.navigator.appVersion.indexOf("MSIE 10"),o="WINDOW_LOADED",i="DOM_READY",l="PAGE_BOTTOM",c=[l,i,o],d=function(e,t){return{element:e,target:e,nativeEvent:t}},u={};c.forEach((function(e){u[e]=[]}));var g=function(e,t){c.slice(0,p(e)+1).forEach((function(e){v(t,e)}))},m=function(){return"complete"===n.readyState?o:"interactive"===n.readyState?s?null:i:void 0},p=function(e){return c.indexOf(e)},v=function(e,t){u[t].forEach((function(t){b(e,t)})),u[t]=[]},b=function(e,t){var a=t.trigger,r=t.syntheticEventFn;a(r?r(e):null)};r._satellite=r._satellite||{},r._satellite.pageBottom=g.bind(null,l),n.addEventListener("DOMContentLoaded",g.bind(null,i),!0),r.addEventListener("load",g.bind(null,o),!0),r.setTimeout((function(){var e=m();e&&g(e)}),0),e.exports={registerLibraryLoadedTrigger:function(e){e()},registerPageBottomTrigger:function(e){u[l].push({trigger:e})},registerDomReadyTrigger:function(e){u[i].push({trigger:e,syntheticEventFn:d.bind(null,n)})},registerWindowLoadedTrigger:function(e){u[o].push({trigger:e,syntheticEventFn:d.bind(null,r)})}}}},"core/src/lib/helpers/stringAndNumberUtils.js":{script:function(e){"use strict";var t=function(e){return"number"==typeof e&&isFinite(e)},a=function(e){return"string"==typeof e||e instanceof String},r=function(e){return t(e)?String(e):e},n=function(e){return a(e)?Number(e):e};e.exports={isNumber:t,isString:a,castToStringIfNumber:r,castToNumberIfString:n}}},"core/src/lib/helpers/textMatch.js":{script:function(e){"use strict";e.exports=function(e,t){if(null==t)throw new Error("Illegal Argument: Pattern is not present");return null!=e&&("string"==typeof t?e===t:t instanceof RegExp&&t.test(e))}}},"core/src/lib/actions/helpers/decorateCode.js":{script:function(e,t,a){"use strict";var r=a("./decorators/decorateGlobalJavaScriptCode"),n=a("./decorators/decorateNonGlobalJavaScriptCode"),s={javascript:function(e,t){return e.settings.global?r(e,t):n(e,t)},html:a("./decorators/decorateHtmlCode")};e.exports=function(e,t){return s[e.settings.language](e,t)}}},"core/src/lib/actions/helpers/loadCodeSequentially.js":{script:function(e,t,a){"use strict";var r=a("@adobe/reactor-promise"),n=a("./getSourceByUrl"),s=r.resolve();e.exports=function(e){var t=new r((function(t){var a=n(e);r.all([a,s]).then((function(e){var a=e[0];t(a)}))}));return s=t,t}}},"core/node_modules/postscribe/dist/postscribe.js":{script:function(e,t){var a,r;a=this,r=function(){return function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=r(a(1));e.exports=n.default},function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function s(){}function o(){var e=p.shift();if(e){var t=u.last(e);t.afterDequeue(),e.stream=i.apply(void 0,e),t.afterStreamStart()}}function i(e,t,a){function r(e){e=a.beforeWrite(e),v.write(e),a.afterWrite(e)}(v=new d.default(e,a)).id=m++,v.name=a.name||v.id,l.streams[v.name]=v;var n=e.ownerDocument,i={close:n.close,open:n.open,write:n.write,writeln:n.writeln};c(n,{close:s,open:s,write:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return r(t.join(""))},writeln:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return r(t.join("")+"\n")}});var u=v.win.onerror||s;return v.win.onerror=function(e,t,r){a.error({msg:e+" - "+t+": "+r}),u.apply(v.win,[e,t,r])},v.write(t,(function(){c(n,i),v.win.onerror=u,a.done(),v=null,o()})),v}function l(e,t,a){if(u.isFunction(a))a={done:a};else if("clear"===a)return p=[],v=null,void(m=0);a=u.defaults(a,g);var r=[e=/^#/.test(e)?window.document.getElementById(e.substr(1)):e.jquery?e[0]:e,t,a];return e.postscribe={cancel:function(){r.stream?r.stream.abort():r[1]=s}},a.beforeEnqueue(r),p.push(r),v||o(),e.postscribe}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=l;var d=n(a(2)),u=r(a(4)),g={afterAsync:s,afterDequeue:s,afterStreamStart:s,afterWrite:s,autoFix:!0,beforeEnqueue:s,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:s,error:function(e){throw new Error(e.msg)},releaseAsync:!1},m=0,p=[],v=null;c(l,{streams:{},queue:p,WriteStream:d.default})},function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var a=g+t,r=e.getAttribute(a);return d.existy(r)?String(r):r}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=g+t;d.existy(a)&&""!==a?e.setAttribute(r,a):e.removeAttribute(r)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=n(a(3)),d=r(a(4)),u=!1,g="data-ps-",m="ps-style",p="ps-script",v=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.root=t,this.options=a,this.doc=t.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new c.default("",{autoFix:a.autoFix}),this.actuals=[t],this.proxyHistory="",this.proxyRoot=this.doc.createElement(t.nodeName),this.scriptStack=[],this.writeQueue=[],i(this.proxyRoot,"proxyof",0)}return e.prototype.write=function(){var e;for((e=this.writeQueue).push.apply(e,arguments);!this.deferredRemote&&this.writeQueue.length;){var t=this.writeQueue.shift();d.isFunction(t)?this._callFunction(t):this._writeImpl(t)}},e.prototype._callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this._onScriptStart(t),e.call(this.win,this.doc),this._onScriptDone(t)},e.prototype._writeImpl=function(e){this.parser.append(e);for(var t=void 0,a=void 0,r=void 0,n=[];(t=this.parser.readToken())&&!(a=d.isScript(t))&&!(r=d.isStyle(t));)(t=this.options.beforeWriteToken(t))&&n.push(t);n.length>0&&this._writeStaticTokens(n),a&&this._handleScriptToken(t),r&&this._handleStyleToken(t)},e.prototype._writeStaticTokens=function(e){var t=this._buildChunk(e);return t.actual?(t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,u&&(t.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),u&&(t.actualInnerHTML=this.root.innerHTML),t):null},e.prototype._buildChunk=function(e){for(var t=this.actuals.length,a=[],r=[],n=[],s=e.length,o=0;o<s;o++){var i=e[o],l=i.toString();if(a.push(l),i.attrs){if(!/^noscript$/i.test(i.tagName)){var c=t++;r.push(l.replace(/(\/?>)/," "+g+"id="+c+" $1")),i.attrs.id!==p&&i.attrs.id!==m&&n.push("atomicTag"===i.type?"":"<"+i.tagName+" "+g+"proxyof="+c+(i.unary?" />":">"))}}else r.push(l),n.push("endTag"===i.type?l:"")}return{tokens:e,raw:a.join(""),actual:r.join(""),proxy:n.join("")}},e.prototype._walkChunk=function(){for(var e=void 0,t=[this.proxyRoot];d.existy(e=t.shift());){var a=1===e.nodeType;if(!a||!o(e,"proxyof")){a&&(this.actuals[o(e,"id")]=e,i(e,"id"));var r=e.parentNode&&o(e.parentNode,"proxyof");r&&this.actuals[r].appendChild(e)}t.unshift.apply(t,d.toArray(e.childNodes))}},e.prototype._handleScriptToken=function(e){var t=this,a=this.parser.clear();a&&this.writeQueue.unshift(a),e.src=e.attrs.src||e.attrs.SRC,(e=this.options.beforeWriteToken(e))&&(e.src&&this.scriptStack.length?this.deferredRemote=e:this._onScriptStart(e),this._writeScriptToken(e,(function(){t._onScriptDone(e)})))},e.prototype._handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",(e=this.options.beforeWriteToken(e))&&this._writeStyleToken(e),t&&this.write()},e.prototype._writeStyleToken=function(e){var t=this._buildStyle(e);this._insertCursor(t,m),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},e.prototype._buildStyle=function(e){var t=this.doc.createElement(e.tagName);return t.setAttribute("type",e.type),d.eachKey(e.attrs,(function(e,a){t.setAttribute(e,a)})),t},e.prototype._insertCursor=function(e,t){this._writeImpl('<span id="'+t+'"/>');var a=this.doc.getElementById(t);a&&a.parentNode.replaceChild(e,a)},e.prototype._onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},e.prototype._onScriptDone=function(e){e===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({msg:"Bad script nesting or script finished twice"})},e.prototype._writeScriptToken=function(e,t){var a=this._buildScript(e),r=this._shouldRelease(a),n=this.options.afterAsync;e.src&&(a.src=e.src,this._scriptLoadHandler(a,r?n:function(){t(),n()}));try{this._insertCursor(a,p),a.src&&!r||t()}catch(e){this.options.error(e),t()}},e.prototype._buildScript=function(e){var t=this.doc.createElement(e.tagName);return d.eachKey(e.attrs,(function(e,a){t.setAttribute(e,a)})),e.content&&(t.text=e.content),t},e.prototype._scriptLoadHandler=function(e,t){function a(){e=e.onload=e.onreadystatechange=e.onerror=null}function r(){a(),null!=t&&t(),t=null}function n(e){a(),o(e),null!=t&&t(),t=null}function s(e,t){var a=e["on"+t];null!=a&&(e["_on"+t]=a)}var o=this.options.error;s(e,"load"),s(e,"error"),l(e,{onload:function(){if(e._onload)try{e._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){n({msg:"onload handler failed "+t+" @ "+e.src})}r()},onerror:function(){if(e._onerror)try{e._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){return void n({msg:"onerror handler failed "+t+" @ "+e.src})}n({msg:"remote script failed "+e.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&r()}})},e.prototype._shouldRelease=function(e){return!/^script$/i.test(e.nodeName)||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},e}();t.default=v},function(e){var t;t=function(){return function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=r(a(1));e.exports=n.default},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=n(a(2)),i=n(a(3)),l=r(a(6)),c=a(5),d={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},u=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.stream=a;var n=!1,i={};for(var c in o)o.hasOwnProperty(c)&&(r.autoFix&&(i[c+"Fix"]=!0),n=n||i[c+"Fix"]);n?(this._readToken=(0,l.default)(this,i,(function(){return t._readTokenImpl()})),this._peekToken=(0,l.default)(this,i,(function(){return t._peekTokenImpl()}))):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return e.prototype.append=function(e){this.stream+=e},e.prototype.prepend=function(e){this.stream=e+this.stream},e.prototype._readTokenImpl=function(){var e=this._peekTokenImpl();if(e)return this.stream=this.stream.slice(e.length),e},e.prototype._peekTokenImpl=function(){for(var e in d)if(d.hasOwnProperty(e)&&d[e].test(this.stream)){var t=i[e](this.stream);if(t)return"startTag"===t.type&&/script|style/i.test(t.tagName)?null:(t.text=this.stream.substr(0,t.length),t)}},e.prototype.peekToken=function(){return this._peekToken()},e.prototype.readToken=function(){return this._readToken()},e.prototype.readTokens=function(e){for(var t=void 0;t=this.readToken();)if(e[t.type]&&!1===e[t.type](t))return},e.prototype.clear=function(){var e=this.stream;return this.stream="",e},e.prototype.rest=function(){return this.stream},e}();for(var g in t.default=u,u.tokenToString=function(e){return e.toString()},u.escapeAttributes=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=(0,c.escapeQuotes)(e[a],null));return t},u.supports=o,o)o.hasOwnProperty(g)&&(u.browserHasFlaw=u.browserHasFlaw||!o[g]&&g)},function(e,t){"use strict";t.__esModule=!0;var a=!1,r=!1,n=window.document.createElement("div");try{var s="<P><I></P></I>";n.innerHTML=s,t.tagSoup=a=n.innerHTML!==s}catch(e){t.tagSoup=a=!1}try{n.innerHTML="<P><i><P></P></i></P>",t.selfClose=r=2===n.childNodes.length}catch(e){t.selfClose=r=!1}n=null,t.tagSoup=a,t.selfClose=r},function(e,t,a){"use strict";function r(e){var t=e.indexOf("-->");if(t>=0)return new c.CommentToken(e.substr(4,t-1),t+3)}function n(e){var t=e.indexOf("<");return new c.CharsToken(t>=0?t:e.length)}function s(e){var t,a,r;if(-1!==e.indexOf(">")){var n=e.match(d.startTag);if(n){var s=(t={},a={},r=n[2],n[2].replace(d.attr,(function(e,n){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",a[arguments[5]]=!0):t[n]=arguments[2]||arguments[3]||arguments[4]||d.fillAttr.test(n)&&n||"":t[n]="",r=r.replace(e,"")})),{v:new c.StartTagToken(n[1],n[0].length,t,a,!!n[3],r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))});if("object"===(void 0===s?"undefined":l(s)))return s.v}}}function o(e){var t=s(e);if(t){var a=e.slice(t.length);if(a.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var r=a.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(r)return new c.AtomicTagToken(t.tagName,r[0].length+t.length,t.attrs,t.booleanAttrs,r[1])}}}function i(e){var t=e.match(d.endTag);if(t)return new c.EndTagToken(t[1],t[0].length)}t.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.comment=r,t.chars=n,t.startTag=s,t.atomicTag=o,t.endTag=i;var c=a(4),d={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.EndTagToken=t.AtomicTagToken=t.StartTagToken=t.TagToken=t.CharsToken=t.CommentToken=t.Token=void 0;var n=a(5),s=(t.Token=function e(t,a){r(this,e),this.type=t,this.length=a,this.text=""},t.CommentToken=function(){function e(t,a){r(this,e),this.type="comment",this.length=a||(t?t.length:0),this.text="",this.content=t}return e.prototype.toString=function(){return"<!--"+this.content},e}(),t.CharsToken=function(){function e(t){r(this,e),this.type="chars",this.length=t,this.text=""}return e.prototype.toString=function(){return this.text},e}(),t.TagToken=function(){function e(t,a,n,s,o){r(this,e),this.type=t,this.length=n,this.text="",this.tagName=a,this.attrs=s,this.booleanAttrs=o,this.unary=!1,this.html5Unary=!1}return e.formatTag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="<"+e.tagName;for(var r in e.attrs)if(e.attrs.hasOwnProperty(r)){a+=" "+r;var s=e.attrs[r];void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[r]||(a+='="'+(0,n.escapeQuotes)(s)+'"')}return e.rest&&(a+=" "+e.rest),e.unary&&!e.html5Unary?a+="/>":a+=">",null!=t&&(a+=t+"</"+e.tagName+">"),a},e}());t.StartTagToken=function(){function e(t,a,n,s,o,i){r(this,e),this.type="startTag",this.length=a,this.text="",this.tagName=t,this.attrs=n,this.booleanAttrs=s,this.html5Unary=!1,this.unary=o,this.rest=i}return e.prototype.toString=function(){return s.formatTag(this)},e}(),t.AtomicTagToken=function(){function e(t,a,n,s,o){r(this,e),this.type="atomicTag",this.length=a,this.text="",this.tagName=t,this.attrs=n,this.booleanAttrs=s,this.unary=!1,this.html5Unary=!1,this.content=o}return e.prototype.toString=function(){return s.formatTag(this,this.content)},e}(),t.EndTagToken=function(){function e(t,a){r(this,e),this.type="endTag",this.length=a,this.text="",this.tagName=t}return e.prototype.toString=function(){return"</"+this.tagName+">"},e}()},function(e,t){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?e.replace(/([^"]*)"/g,(function(e,t){return/\\/.test(t)?t+'"':t+'\\"'})):t}t.__esModule=!0,t.escapeQuotes=a},function(e,t){"use strict";function a(e){return e&&"startTag"===e.type&&(e.unary=i.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e}function r(e,t){var r=e.stream,n=a(t());return e.stream=r,n}function n(e,t){var a=t.pop();e.prepend("</"+a.tagName+">")}function s(){var e=[];return e.last=function(){return this[this.length-1]},e.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},e.containsTagName=function(e){for(var t,a=0;t=this[a];a++)if(t.tagName===e)return!0;return!1},e}function o(e,t,o){function i(){var t=r(e,o);t&&d[t.type]&&d[t.type](t)}var c=s(),d={startTag:function(a){var r=a.tagName;"TR"===r.toUpperCase()&&c.lastTagNameEq("TABLE")?(e.prepend("<TBODY>"),i()):t.selfCloseFix&&l.test(r)&&c.containsTagName(r)?c.lastTagNameEq(r)?n(e,c):(e.prepend("</"+a.tagName+">"),i()):a.unary||c.push(a)},endTag:function(a){c.last()?t.tagSoupFix&&!c.lastTagNameEq(a.tagName)?n(e,c):c.pop():t.tagSoupFix&&(o(),i())}};return function(){return i(),a(o())}}t.__esModule=!0,t.default=o;var i=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,l=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])},e.exports=t()},function(e,t){"use strict";function a(e){return null!=e}function r(e){return"function"==typeof e}function n(e,t,a){var r=void 0,n=e&&e.length||0;for(r=0;r<n;r++)t.call(a,e[r],r)}function s(e,t,a){for(var r in e)e.hasOwnProperty(r)&&t.call(a,r,e[r])}function o(e,t){return e=e||{},s(t,(function(t,r){a(e[t])||(e[t]=r)})),e}function i(e){try{return Array.prototype.slice.call(e)}catch(r){var t=(a=[],n(e,(function(e){a.push(e)})),{v:a});if("object"===(void 0===t?"undefined":g(t)))return t.v}var a}function l(e){return e[e.length-1]}function c(e,t){return!(!e||"startTag"!==e.type&&"atomicTag"!==e.type||!("tagName"in e)||!~e.tagName.toLowerCase().indexOf(t))}function d(e){return c(e,"script")}function u(e){return c(e,"style")}t.__esModule=!0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.existy=a,t.isFunction=r,t.each=n,t.eachKey=s,t.defaults=o,t.toArray=i,t.last=l,t.isTag=c,t.isScript=d,t.isStyle=u}])},"object"==typeof t&&"object"==typeof e?e.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof t?t.postscribe=r():a.postscribe=r()}},"core/src/lib/actions/helpers/unescapeHtmlCode.js":{script:function(e,t,a){"use strict";var r=a("@adobe/reactor-document").createElement("div");e.exports=function(e){return r.innerHTML=e,r.textContent||r.innerText||e}}},"core/src/lib/helpers/findPageScript.js":{script:function(e,t,a){"use strict";var r=a("@adobe/reactor-document"),n=function(e){for(var t=r.querySelectorAll("script"),a=0;a<t.length;a++){var n=t[a];if(e.test(n.src))return n}},s=function(){return n(new RegExp(/(launch|satelliteLib)-[^\/]+.js(\?.*)?$/))};e.exports={getTurbine:s,byRegexPattern:n}}},"core/src/lib/actions/helpers/decorators/decorateGlobalJavaScriptCode.js":{script:function(e,t,a){"use strict";var r=a("@adobe/reactor-promise");e.exports=function(e,t){return{code:"<script>\n"+t+"\n</script>",promise:r.resolve()}}}},"core/src/lib/actions/helpers/decorators/decorateNonGlobalJavaScriptCode.js":{script:function(e,t,a){"use strict";var r=a("@adobe/reactor-promise"),n=0;e.exports=function(e,t){var a="_runScript"+ ++n,s=new r((function(t,n){_satellite[a]=function(s){delete _satellite[a],new r((function(t){t(s.call(e.event.element,e.event,e.event.target,r))})).then(t,n)}}));return{code:'<script>_satellite["'+a+'"](function(event, target, Promise) {\n'+t+"\n});</script>",promise:s}}}},"core/src/lib/actions/helpers/decorators/decorateHtmlCode.js":{script:function(e,t,a,r){"use strict";var n=a("@adobe/reactor-promise"),s=0,o={};window._satellite=window._satellite||{},window._satellite._onCustomCodeSuccess=function(e){var t=o[e];t&&(delete o[e],t.resolve())},window._satellite._onCustomCodeFailure=function(e){var t=o[e];t&&(delete o[e],t.reject())};var i=function(e){return-1!==e.indexOf("${reactorCallbackId}")},l=function(e,t){return e.replace(/\${reactorCallbackId}/g,t)},c=function(e){return e.settings.isExternal};e.exports=function(e,t){var a;return c(e)&&(t=r.replaceTokens(t,e.event)),i(t)?(a=new n((function(e,t){o[String(s)]={resolve:e,reject:t}})),t=l(t,s),s+=1):a=n.resolve(),{code:t,promise:a}}}},"core/src/lib/actions/helpers/getSourceByUrl.js":{script:function(e,t,a){"use strict";var r=a("@adobe/reactor-load-script"),n=a("@adobe/reactor-promise"),s=a("../../helpers/findPageScript").byRegexPattern,o={},i={},l=function(e){return i[e]||(i[e]=r(e)),i[e]};_satellite.__registerScript=function(e,t){var a;if(document.currentScript)a=document.currentScript.getAttribute("src");else{var r=new RegExp(".*"+e+".*");a=s(r).getAttribute("src")}o[a]=t},e.exports=function(e){return o[e]?n.resolve(o[e]):new n((function(t){l(e).then((function(){t(o[e])}),(function(){t()}))}))}}},"core/src/lib/events/helpers/createBubbly.js":{script:function(e,t,a){"use strict";var r=a("./weakMap"),n=a("./matchesProperties"),s=a("./matchesSelector");e.exports=function(){var e=[],t=new r,a={addListener:function(t,a){e.push({settings:t,callback:a})},evaluateEvent:function(a,r){if(e.length&&!t.has(a)){for(var o=a.target,i=!1;o;){for(var l=!1,c=!1,d=0;d<e.length;d++){var u=e[d],g=u.settings.elementSelector,m=u.settings.elementProperties;if((!1!==u.settings.bubbleFireIfChildFired||!i)&&(o===a.target||!1!==u.settings.bubbleFireIfParent)&&(o===a.target||g||m&&Object.keys(m).length)&&(!g||s(o,g))&&(!m||n(o,m))){var p={};r?Object.keys(a).forEach((function(e){p[e]=a[e]})):p.nativeEvent=a,p.element=o,p.target=a.target,!1!==u.callback(p)&&(c=!0,u.settings.bubbleStop&&(l=!0))}}if(l)break;c&&(i=!0),o=o.parentNode}t.set(a,!0)}},__reset:function(){e=[]}};return a}}},"core/src/lib/events/helpers/weakMap.js":{script:function(e,t,a){"use strict";var r=a("@adobe/reactor-window").WeakMap;if(void 0===r){var n=Object.defineProperty,s=Date.now()%1e9;(r=function(){this.name="__st"+(1e9*Math.random()>>>0)+s+++"__"}).prototype={set:function(e,t){var a=e[this.name];return a&&a[0]===e?a[1]=t:n(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e||(t[0]=t[1]=void 0,0))},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}e.exports=r}},"core/src/lib/events/helpers/matchesProperties.js":{script:function(e,t,a){"use strict";var r=a("./../../helpers/textMatch"),n=function(e,t){return"@text"===t||"innerText"===t?e.textContent||e.innerText:t in e?e[t]:e.getAttribute?e.getAttribute(t):void 0};e.exports=function(e,t){return!t||t.every((function(t){var a=n(e,t.name),s=t.valueIsRegex?new RegExp(t.value,"i"):t.value;return r(a,s)}))}}},"core/src/lib/events/helpers/matchesSelector.js":{script:function(e,t,a,r){"use strict";e.exports=function(e,t){var a=e.matches||e.msMatchesSelector;if(a)try{return a.call(e,t)}catch(e){return r.logger.warn("Matching element failed. "+t+" is not a valid selector."),!1}return!1}}},"core/src/lib/events/helpers/debounce.js":{script:function(e){"use strict";e.exports=function(e,t,a){var r=null;return function(){var n=a||this,s=arguments;clearTimeout(r),r=setTimeout((function(){e.apply(n,s)}),t)}}}},"core/src/lib/events/helpers/once.js":{script:function(e){"use strict";e.exports=function(e,t){
var a;return function(){return e&&(a=e.apply(t||this,arguments),e=null),a}}}},"core/src/lib/helpers/getObjectProperty.js":{script:function(e){"use strict";e.exports=function(e,t){for(var a=t.split("."),r=e,n=0,s=a.length;n<s;n++){if(null==r)return;r=r[a[n]]}return r}}}}},"adobe-analytics":{displayName:"Adobe Analytics",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP171e731c9ba34f1c950c36d26e3efd61/",settings:{orgId:"B52D1CFE5330949C0A490D45@AdobeOrg",customSetup:{source:function(e){_satellite.aaCustomizedPageCode=function(){_satellite.logger.log("Inside Customized Page Code Section"),_satellite.containerInfo={supportedRegulations:["opt-out","opt-in","soft-opt-in"],isDefaultONSupported:void 0!==(_satellite.getVar("isDefaultONCached")||_satellite.getVar("isDefaultON")),isDefaultON:_satellite.getVar("isDefaultONCached")||_satellite.getVar("isDefaultON"),propertyName:_satellite.property.name};var t=_satellite.getVar("isAdobeAnalyticsAllowed"),a=_satellite.getVar("topLevelDomain");if("production"==_satellite.buildInfo.environment&&_satellite.getVar("adobeRSID"),_satellite.logger.log("isAdobeAnalyticsAllowed: "+t),"true"!=t)return _satellite.notify("isAdobeAnalyticsAllowed status: "+t),e.visitorOptedOut=!0,!1;{if(_satellite.setVar("pageRegulation","true"),void 0===r){if(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function a(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var a=this.callbacks[e].push(t)-1,r=this;return function(){r.callbacks[e].splice(a,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var a=this.callbacks[e].shift();"function"==typeof a?a.apply(null,t):a instanceof Array&&a[1].apply(a[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!O.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach((function(t){var a=void 0!==e[t]?e[t]:"";this.execute(t,a)}),this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}function r(e,t,a){var r=null==e?void 0:e[t];return void 0===r?a:r}function n(e){for(var t=/^\d+$/,a=0,r=e.length;a<r;a++)if(!t.test(e[a]))return!1;return!0}function s(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function o(e,t){for(var a=0;a<e.length;a++){var r=parseInt(e[a],10),n=parseInt(t[a],10);if(r>n)return 1;if(n>r)return-1}return 0}function i(e,t){if(e===t)return 0;var a=e.toString().split("."),r=t.toString().split(".");return n(a.concat(r))?(s(a,r),o(a,r)):NaN}function l(e){return e===Object(e)&&0===Object.keys(e).length}function c(e){return"function"==typeof e||e instanceof Array&&e.length}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=le("log",e,t),this.warn=le("warn",e,t),this.error=le("error",e,t)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isEnabled,a=e.cookieName,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cookies;return t&&a&&r?{remove:function(){r.remove(a)},get:function(){var e=r.get(a),t={};try{t=JSON.parse(e)}catch(e){t={}}return t},set:function(e,t){t=t||{},r.set(a,JSON.stringify(e),{domain:t.optInCookieDomain||"",cookieLifetime:t.optInStorageExpiry||3419e4,expires:!0})}}:{get:Ce,set:Ce,remove:Ce}}function g(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function m(){function e(e,t){var a=ue(e);return a.length?a.every((function(e){return!!t[e]})):ge(t)}function t(){j(w),R(ee.COMPLETE),b(v.status,v.permissions),p.set(v.permissions,{optInCookieDomain:l,optInStorageExpiry:c}),f.execute(Ae)}function a(e){return function(a,r){if(!me(a))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return R(ee.CHANGED),Object.assign(w,pe(ue(a),e)),r||t(),v}}var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.doesOptInApply,s=r.previousPermissions,o=r.preOptInApprovals,i=r.isOptInStorageEnabled,l=r.optInCookieDomain,c=r.optInStorageExpiry,d=r.isIabContext,g=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cookies,m=ye(s);Pe(m,"Invalid `previousPermissions`!"),Pe(o,"Invalid `preOptInApprovals`!");var p=u({isEnabled:!!i,cookieName:"adobeujs-optin"},{cookies:g}),v=this,b=$(v),f=se(),_=fe(m),h=fe(o),V=p.get(),C={},y=function(e,t){return _e(e)||t&&_e(t)?ee.COMPLETE:ee.PENDING}(_,V),P=function(e,t,a){var r=pe(ne,!n);return n?Object.assign({},r,e,t,a):r}(h,_,V),w=ve(P),R=function(e){return y=e},j=function(e){return P=e};v.deny=a(!1),v.approve=a(!0),v.denyAll=v.deny.bind(v,ne),v.approveAll=v.approve.bind(v,ne),v.isApproved=function(t){return e(t,v.permissions)},v.isPreApproved=function(t){return e(t,h)},v.fetchPermissions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?v.on(ee.COMPLETE,e):Ce;return!n||n&&v.isComplete||o?e(v.permissions):t||f.add(Ae,(function(){return e(v.permissions)})),a},v.complete=function(){v.status===ee.CHANGED&&t()},v.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error(Te);C[e.name]||(C[e.name]=e,e.onRegister.call(e,v))},v.execute=je(C),Object.defineProperties(v,{permissions:{get:function(){return P}},status:{get:function(){return y}},Categories:{get:function(){return te}},doesOptInApply:{get:function(){return!!n}},isPending:{get:function(){return v.status===ee.PENDING}},isComplete:{get:function(){return v.status===ee.COMPLETE}},__plugins:{get:function(){return Object.keys(C)}},isIabContext:{get:function(){return d}}})}function p(e,t){function a(){n=null,e.call(e,new g("The call took longer than you wanted!"))}function r(){n&&(clearTimeout(n),e.apply(e,arguments))}if(void 0===t)return e;var n=setTimeout(a,t);return r}function v(){if(window.__cmp)return window.__cmp;var e=window;if(e!==window.top){for(var t;!t;){e=e.parent;try{e.frames.__cmpLocator&&(t=e)}catch(e){}if(e===window.top)break}if(t){var a={};return window.__cmp=function(e,r,n){var s=Math.random()+"",o={__cmpCall:{command:e,parameter:r,callId:s}};a[s]=n,t.postMessage(o,"*")},window.addEventListener("message",(function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}if(t.__cmpReturn){var r=t.__cmpReturn;a[r.callId]&&(a[r.callId](r.returnValue,r.success),delete a[r.callId])}}),!1),window.__cmp}ce.error("__cmp not found")}else ce.error("__cmp not found")}function b(){var e=this;e.name="iabPlugin",e.version="0.0.1";var t=se(),a={allConsentData:null},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a[e]=t};e.fetchConsentData=function(e){var t=p(e.callback,e.timeout);n({callback:t})},e.isApproved=function(e){var t=e.callback,r=e.category,s=e.timeout;if(a.allConsentData)return t(null,i(r,a.allConsentData.vendorConsents,a.allConsentData.purposeConsents));var o=p((function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.vendorConsents,s=a.purposeConsents;t(e,i(r,n,s))}),s);n({category:r,callback:o})},e.onRegister=function(t){var a=Object.keys(ae),r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.purposeConsents,s=r.gdprApplies,o=r.vendorConsents;!e&&s&&o&&n&&(a.forEach((function(e){var a=i(e,o,n);t[a?"approve":"deny"](e,!0)})),t.complete())};e.fetchConsentData({callback:r})};var n=function(e){var n=e.callback;if(a.allConsentData)return n(null,a.allConsentData);t.add("FETCH_CONSENT_DATA",n);var i={};o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.purposeConsents,o=e.gdprApplies,l=e.vendorConsents;(arguments.length>1?arguments[1]:void 0)&&r("allConsentData",i={purposeConsents:n,gdprApplies:o,vendorConsents:l}),s((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(arguments.length>1?arguments[1]:void 0)&&(i.consentString=e.consentData,r("allConsentData",i)),t.execute("FETCH_CONSENT_DATA",[null,a.allConsentData])}))}))},s=function(e){var t=v();t&&t("getConsentData",null,e)},o=function(e){var t=Re(ae),a=v();a&&a("getVendorConsents",t,e)},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!t[ae[e]]&&re[e].every((function(e){return a[e]}))}}var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,a,r=1;r<arguments.length;++r)for(t in a=arguments[r])Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e};var _,h,V={MESSAGES:{HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},STATE_KEYS_MAP:{MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},ASYNC_API_MAP:{MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},SYNC_API_MAP:{CUSTOMERIDS:"getCustomerIDs"},ALL_APIS:{MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},FIELDGROUP_TO_FIELD:{MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},FIELDS:{MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},AUTH_STATE:{UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},OPT_OUT:{GLOBAL:"global"}},C=V.STATE_KEYS_MAP,y=function(e){function t(){}function a(t,a){var r=this;return function(){var n=e(0,t),s={};return s[t]=n,r.setStateAndPublish(s),a(n),n}}this.getMarketingCloudVisitorID=function(e){e=e||t;var r=this.findField(C.MCMID,e),n=a.call(this,C.MCMID,e);return void 0!==r?r:n()},this.getVisitorValues=function(e){this.getMarketingCloudVisitorID((function(t){e({MCMID:t})}))}},P=V.MESSAGES,w=V.ASYNC_API_MAP,R=V.SYNC_API_MAP,j=function(){function e(){}function t(e,t){var a=this;return function(){return a.callbackRegistry.add(e,t),a.messageParent(P.GETSTATE),""}}function a(a){this[w[a]]=function(r){r=r||e;var n=this.findField(a,r),s=t.call(this,a,r);return void 0!==n?n:s()}}function r(t){this[R[t]]=function(){return this.findField(t,e)||{}}}Object.keys(w).forEach(a,this),Object.keys(R).forEach(r,this)},A=V.ASYNC_API_MAP,T=function(){Object.keys(A).forEach((function(e){this[A[e]]=function(t){this.callbackRegistry.add(e,t)}}),this)},O=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(t,a){a.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},a.isValueEmpty=function(e){return""===e||a.isObjectEmpty(e)},a.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;e>4;e--){var t=document.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},a.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},a.isObject=function(t){return null!==t&&"object"===e(t)&&!1===Array.isArray(t)},a.defineGlobalNamespace=function(){return window.adobe=a.isObject(window.adobe)?window.adobe:{},window.adobe},a.pluck=function(e,t){return t.reduce((function(t,a){return e[a]&&(t[a]=e[a]),t}),Object.create(null))},a.parseOptOut=function(e,t,a){t||(t=a,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));var r=parseInt(e.d_ottl,10);return isNaN(r)&&(r=7200),{optOut:t,d_ottl:r}},a.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t}})),D=(O.isObjectEmpty,O.isValueEmpty,O.getIeVersion,O.encodeAndBuildRequest,O.isObject,O.defineGlobalNamespace,O.pluck,O.parseOptOut,O.normalizeBoolean,a),I=V.MESSAGES,E={0:"prefix",1:"orgID",2:"state"},S=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach((function(e,a){void 0!==e&&(t[E[a]]=2!==a?e:JSON.parse(e))})),t}catch(e){}},this.isInvalid=function(a){var r=this.parse(a);if(!r||Object.keys(r).length<2)return!0;var n=e!==r.orgID,s=!t||a.origin!==t,o=-1===Object.keys(I).indexOf(r.prefix);return n||s||o},this.send=function(a,r,n){var s=r+"|"+e;n&&n===Object(n)&&(s+="|"+JSON.stringify(n));try{a.postMessage(s,t)}catch(e){}}},k=V.MESSAGES,L=function(e,t,a,r){function n(e){Object.assign(m,e)}function s(e){Object.assign(m.state,e),Object.assign(m.state.ALLFIELDS,e),m.callbackRegistry.executeAll(m.state)}function o(e){if(!b.isInvalid(e)){v=!1;var t=b.parse(e);m.setStateAndPublish(t.state)}}function i(e){!v&&p&&(v=!0,b.send(r,e))}function l(){n(new y(a._generateID)),m.getMarketingCloudVisitorID(),m.callbackRegistry.executeAll(m.state,!0),f.removeEventListener("message",c)}function c(e){if(!b.isInvalid(e)){var t=b.parse(e);v=!1,f.clearTimeout(m._handshakeTimeout),f.removeEventListener("message",c),n(new j(m)),f.addEventListener("message",o),m.setStateAndPublish(t.state),m.callbackRegistry.hasCallbacks()&&i(k.GETSTATE)}}function d(){p&&postMessage?(f.addEventListener("message",c),i(k.HANDSHAKE),m._handshakeTimeout=setTimeout(l,250)):l()}function u(){f.s_c_in||(f.s_c_il=[],f.s_c_in=0),m._c="Visitor",m._il=f.s_c_il,m._in=f.s_c_in,m._il[m._in]=m,f.s_c_in++}function g(){function e(e){0!==e.indexOf("_")&&"function"==typeof a[e]&&(m[e]=function(){})}Object.keys(a).forEach(e),m.getSupplementalDataID=a.getSupplementalDataID,m.isAllowed=function(){return!0}}var m=this,p=t.whitelistParentDomain;m.state={ALLFIELDS:{}},m.version=a.version,m.marketingCloudOrgID=e,m.cookieDomain=a.cookieDomain||"",m._instanceType="child";var v=!1,b=new S(e,p);m.callbackRegistry=D(),m.init=function(){u(),g(),n(new T(m)),d()},m.findField=function(e,t){if(void 0!==m.state[e])return t(m.state[e]),m.state[e]},m.messageParent=i,m.setStateAndPublish=s},x=V.MESSAGES,N=V.ALL_APIS,F=V.ASYNC_API_MAP,M=V.FIELDGROUP_TO_FIELD,q=function(e,t){function a(){var t={};return Object.keys(N).forEach((function(a){var r=N[a],n=e[r]();O.isValueEmpty(n)||(t[a]=n)})),t}function r(){var t=[];return e._loading&&Object.keys(e._loading).forEach((function(a){if(e._loading[a]){var r=M[a];t.push(r)}})),t.length?t:null}function n(t){return function a(){var n=r();if(n){var s=F[n[0]];e[s](a,!0)}else t()}}function s(e,r){var n=a();t.send(e,r,n)}function o(e){l(e),s(e,x.HANDSHAKE)}function i(e){n((function(){s(e,x.PARENTSTATE)}))()}function l(a){function r(r){n.call(e,r),t.send(a,x.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var n=e.setCustomerIDs;e.setCustomerIDs=r}return function(e){t.isInvalid(e)||(t.parse(e).prefix===x.HANDSHAKE?o:i)(e.source)}},U=function(e,t){function a(e){return function(a){r[e]=a,++n===s&&t(r)}}var r={},n=0,s=Object.keys(e).length;Object.keys(e).forEach((function(t){var r=e[t];if(r.fn){var n=r.args||[];n.unshift(a(t)),r.fn.apply(r.context||null,n)}}))},B={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),a=t.indexOf(";"+e+"="),r=a<0?a:t.indexOf(";",a+1);return a<0?"":decodeURIComponent(t.substring(a+2+e.length,r<0?t.length:r))},set:function(e,t,a){var n=r(a,"cookieLifetime"),s=r(a,"expires"),o=r(a,"domain"),i=r(a,"secure")?"Secure":"";if(s&&"SESSION"!==n&&"NONE"!==n){var l=""!==t?parseInt(n||0,10):-60;if(l)(s=new Date).setTime(s.getTime()+1e3*l);else if(1===s){var c=(s=new Date).getYear();s.setYear(c+2+(c<1900?1900:0))}}else s=0;return e&&"NONE"!==n?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(s?" expires="+s.toGMTString()+";":"")+(o?" domain="+o+";":"")+i,this.get(e)===t):0},remove:function(e,t){var a=r(t,"domain");a=a?" domain="+a+";":"",document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+a}},H=function(e){var t;!e&&f.location&&(e=f.location.hostname);var a,r=(t=e).split(".");for(a=r.length-2;a>=0;a--)if(t=r.slice(a).join("."),B.set("test","cookie",{domain:t}))return B.remove("test",{domain:t}),t;return""},G={compare:i,isLessThan:function(e,t){return i(e,t)<0},areVersionsDifferent:function(e,t){return 0!==i(e,t)},isGreaterThan:function(e,t){return i(e,t)>0},isEqual:function(e,t){return 0===i(e,t)}},z=!!f.postMessage,W={postMessage:function(e,t,a){var r=1;t&&(z?a.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(a.location=t.replace(/#.*$/,"")+"#"+ +new Date+r+++"&"+e))},receiveMessage:function(e,t){var a;try{z&&(e&&(a=function(a){if("string"==typeof t&&a.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(a.origin))return!1;e(a)}),f.addEventListener?f[e?"addEventListener":"removeEventListener"]("message",a):f[e?"attachEvent":"detachEvent"]("onmessage",a))}catch(e){}}},K=function(e){var t,a,r="0123456789",n="",s="",o=8,i=10,l=10;if(1==e){for(r+="ABCDEF",t=0;16>t;t++)a=Math.floor(Math.random()*o),n+=r.substring(a,a+1),a=Math.floor(Math.random()*o),s+=r.substring(a,a+1),o=16;return n+"-"+s}for(t=0;19>t;t++)a=Math.floor(Math.random()*i),n+=r.substring(a,a+1),0===t&&9==a?i=3:((1==t||2==t)&&10!=i&&2>a||2<t)&&(i=10),a=Math.floor(Math.random()*l),s+=r.substring(a,a+1),0===t&&9==a?l=3:((1==t||2==t)&&10!=l&&2>a||2<t)&&(l=10);return n+s},Y=function(e){return{corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(f.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new f[this.corsMetadata.corsType]},fireCORS:function(t,a){function r(e){var a;try{if((a=JSON.parse(e))!==Object(a))return void n.handleCORSError(t,null,"Response is not JSON")}catch(e){return void n.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var r=t.callback,s=f,o=0;o<r.length;o++)s=s[r[o]];s(a)}catch(e){n.handleCORSError(t,e,"Error forming callback function")}}var n=this;a&&(t.loadErrorHandler=a);try{var s=this.getCORSInstance();s.open("get",t.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(s.withCredentials=!0,s.timeout=e.loadTimeout,s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){4===this.readyState&&200===this.status&&r(this.responseText)}),s.onerror=function(e){n.handleCORSError(t,e,"onerror")},s.ontimeout=function(e){n.handleCORSError(t,e,"ontimeout")},s.send(),e._log.requests.push(t.corsUrl)}catch(e){this.handleCORSError(t,e,"try-catch")}},handleCORSError:function(t,a,r){e.CORSErrors.push({corsData:t,error:a,description:r}),t.loadErrorHandler&&("ontimeout"===r?t.loadErrorHandler(!0):t.loadErrorHandler(!1))}}},J={POST_MESSAGE_ENABLED:!!f.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},X=function(e,t){var a=f.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,r="http://fast.",n="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(a.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(r=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=r+this.subdomain+".demdex.net/dest5.html"+n,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(a.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:J.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(n=a.createElement("iframe")).sandbox="allow-scripts allow-same-origin",n.title="Adobe ID Syncing iFrame",n.id=r.id,n.name=r.id+"_name",n.style.cssText="display: none; width: 0; height: 0;",n.src=r.url,r.newIframeCreated=!0,t(),a.body.appendChild(n)}function t(e){n.addEventListener("load",(function(){n.className="aamIframeLoaded",r.iframeHasLoaded=!0,r.fireIframeLoadedCallbacks(e),r.requestToProcess()}))}this.startedAttachingIframe=!0;var r=this,n=a.getElementById(this.id);n?"IFRAME"!==n.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==n.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=n,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=n},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach((function(t){"function"==typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})})),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function a(){n.jsonForComparison.push(t),n.jsonWaiting.push(t),n.processSyncOnPage(t)}var r,n=this;if(t===Object(t)&&t.ibs)if(r=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var s,o,i,l=!1;for(s=0,o=this.jsonForComparison.length;s<o;s++)if(i=this.jsonForComparison[s],r===JSON.stringify(i.ibs||[])){l=!0;break}l?this.jsonDuplicates.push(t):a()}else a();if((this.receivedThirdPartyCookiesNotification||!J.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var c=this.jsonWaiting.shift();this.process(c),this.requestToProcess()}e.idSyncDisableSyncs||e.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout((function(){n.messageSendingInterval=J.POST_MESSAGE_ENABLED?null:150}),this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,a){var r=e._getField("MCAAMLH"),n=t.d_region||t.dcs_region;return r?n&&(e._setFieldExpire("MCAAMLH",a),e._setField("MCAAMLH",n),parseInt(r,10)!==n&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField("MCSYNCSOP",""),e._setField("MCSYNCS",""),r=n)):(r=n)&&(e._setFieldExpire("MCAAMLH",a),e._setField("MCAAMLH",r)),r||(r=""),r},processSyncOnPage:function(e){var t,a,r,n;if((t=e.ibs)&&t instanceof Array&&(a=t.length))for(r=0;r<a;r++)(n=t[r]).syncOnPage&&this.checkFirstPartyCookie(n,"","syncOnPage")},process:function(e){var t,a,r,n,s,o=encodeURIComponent,i=!1;if((t=e.ibs)&&t instanceof Array&&(a=t.length))for(i=!0,r=0;r<a;r++)n=t[r],s=[o("ibs"),o(n.id||""),o(n.tag||""),O.encodeAndBuildRequest(n.url||[],","),o(n.ttl||""),"","",n.fireURLSync?"true":"false"],n.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(s.join("|")):n.fireURLSync&&this.checkFirstPartyCookie(n,s.join("|")));i&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,a,r){var n="syncOnPage"===r,s=n?"MCSYNCSOP":"MCSYNCS";e._readVisitor();var o,i,l=e._getField(s),c=!1,d=!1,u=Math.ceil((new Date).getTime()/J.MILLIS_PER_DAY);l?(o=l.split("*"),c=(i=this.pruneSyncData(o,t.id,u)).dataPresent,d=i.dataValid,c&&d||this.fireSync(n,t,a,o,s,u)):(o=[],this.fireSync(n,t,a,o,s,u))},pruneSyncData:function(e,t,a){var r,n,s,o=!1,i=!1;for(n=0;n<e.length;n++)r=e[n],s=parseInt(r.split("-")[1],10),r.match("^"+t+"-")?(o=!0,a<s?i=!0:(e.splice(n,1),n--)):a>=s&&(e.splice(n,1),n--);return{dataPresent:o,dataValid:i}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort((function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)}));e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,a,r,n,s,o){var i=this;if(t){if("img"===a.tag){var l,c,d,u,g=a.url,m=e.loadSSL?"https:":"http:";for(l=0,c=g.length;l<c;l++){d=g[l],u=/^\/\//.test(d);var p=new Image;p.addEventListener("load",function(t,a,r,n){return function(){i.onPagePixels[t]=null,e._readVisitor();var o,l,c,d,u=e._getField(s),g=[];if(u)for(l=0,c=(o=u.split("*")).length;l<c;l++)(d=o[l]).match("^"+a.id+"-")||g.push(d);i.setSyncTrackingData(g,a,r,n)}}(this.onPagePixels.length,a,s,o)),p.src=(u?m:"")+d,this.onPagePixels.push(p)}}}else this.addMessage(r),this.setSyncTrackingData(n,a,s,o)},addMessage:function(t){var a=encodeURIComponent(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((J.POST_MESSAGE_ENABLED?"":a)+t)},setSyncTrackingData:function(t,a,r,n){t.push(a.id+"-"+(n+Math.ceil(a.ttl/60/24))),this.manageSyncsSize(t),e._setField(r,t.join("*"))},sendMessages:function(){var e,t=this,a="",r=encodeURIComponent;this.regionChanged&&(a=r("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?J.POST_MESSAGE_ENABLED?(e=a+r("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(a+e),setTimeout((function(){t.sendMessages()}),this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){W.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,a=/^---destpub-to-parent---/;"string"==typeof e&&a.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(a,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(r){(null==this.url||r.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=r.subdomain||"",this.url=this.getUrl()),r.ibs instanceof Array&&r.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===a.readyState||"loaded"===a.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(r):this.requestToProcess(r),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(r)},canMakeSyncIDCall:function(t,a){return e._forceSyncIDCall||!t||a-t>J.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(a.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}},Z={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{},disableThirdPartyCalls:{},discardTrackingServerECID:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},isIabContext:{},isOptInStorageEnabled:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},Q={getConfigNames:function(){return Object.keys(Z)},getConfigs:function(){return Z},normalizeConfig:function(e){return"function"!=typeof e?e:e()}},$=function(e){var t={};return e.on=function(e,a,r){if(!a||"function"!=typeof a)throw new Error("[ON] Callback should be a function.");t.hasOwnProperty(e)||(t[e]=[]);var n=t[e].push({callback:a,context:r})-1;return function(){t[e].splice(n,1),t[e].length||delete t[e]}},e.off=function(e,a){t.hasOwnProperty(e)&&(t[e]=t[e].filter((function(e){if(e.callback!==a)return e})))},e.publish=function(e){if(t.hasOwnProperty(e)){var a=[].slice.call(arguments,1);t[e].slice(0).forEach((function(e){e.callback.apply(e.context,a)}))}},e.publish},ee={PENDING:"pending",CHANGED:"changed",COMPLETE:"complete"},te={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",VIDEO_ANALYTICS:"videoaa"},ae=(t(_={},te.AAM,565),t(_,te.ECID,565),_),re=(t(h={},te.AAM,[1,2,5]),t(h,te.ECID,[1,2,5]),h),ne=function(e){return Object.keys(e).map((function(t){return e[t]}))}(te),se=function(){var e={};return e.callbacks=Object.create(null),e.add=function(t,a){if(!c(a))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");e.callbacks[t]=e.callbacks[t]||[];var r=e.callbacks[t].push(a)-1;return function(){e.callbacks[t].splice(r,1)}},e.execute=function(t,a){if(e.callbacks[t]){a=(a=void 0===a?[]:a)instanceof Array?a:[a];try{for(;e.callbacks[t].length;){var r=e.callbacks[t].shift();"function"==typeof r?r.apply(null,a):r instanceof Array&&r[1].apply(r[0],a)}delete e.callbacks[t]}catch(e){}}},e.executeAll=function(t,a){(a||t&&!l(t))&&Object.keys(e.callbacks).forEach((function(a){var r=void 0!==t[a]?t[a]:"";e.execute(a,r)}),e)},e.hasCallbacks=function(){return Boolean(Object.keys(e.callbacks).length)},e},oe=function(){},ie=function(e){var t=window.console;return!!t&&"function"==typeof t[e]},le=function(e,t,a){return a()?function(){if(ie(e)){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];console[e].apply(console,[t].concat(r))}}:oe},ce=new d("[ADOBE OPT-IN]"),de=function(t,a){return e(t)===a},ue=function(e,t){return e instanceof Array?e:de(e,"string")?[e]:t||[]},ge=function(e){var t=Object.keys(e);return!!t.length&&t.every((function(t){return!0===e[t]}))},me=function(e){return!(!e||be(e))&&ue(e).every((function(e){return ne.indexOf(e)>-1}))},pe=function(e,t){return e.reduce((function(e,a){return e[a]=t,e}),{})},ve=function(e){return JSON.parse(JSON.stringify(e))},be=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},fe=function(e){if(Ve(e))return e;try{return JSON.parse(e)}catch(e){return{}}},_e=function(e){return void 0===e||(Ve(e)?me(Object.keys(e)):he(e))},he=function(e){try{var t=JSON.parse(e);return!!e&&de(e,"string")&&me(Object.keys(t))}catch(e){return!1}},Ve=function(e){return null!==e&&de(e,"object")&&!1===Array.isArray(e)},Ce=function(){},ye=function(e){return de(e,"function")?e():e},Pe=function(e,t){_e(e)||ce.error("".concat(t))},we=function(e){return Object.keys(e).map((function(t){return e[t]}))},Re=function(e){return we(e).filter((function(e,t,a){return a.indexOf(e)===t}))},je=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.command,r=t.params,n=void 0===r?{}:r,s=t.callback,o=void 0===s?Ce:s;if(!a||-1===a.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var i=a.split("."),l=e[i[0]],c=i[1];if(!l||"function"!=typeof l[c])throw new Error("Make sure the plugin and API name exist.");var d=Object.assign(n,{callback:o});l[c].call(l,d)}catch(e){ce.error("[execute] Something went wrong: "+e.message)}}};g.prototype=Object.create(Error.prototype),g.prototype.constructor=g;var Ae="fetchPermissions",Te="[OptIn#registerPlugin] Plugin is invalid.";m.Categories=te,m.TimeoutError=g;var Oe=Object.freeze({OptIn:m,IabPlugin:b}),De=function(e,t){e.publishDestinations=function(a){var r=arguments[1],n=arguments[2];try{
n="function"==typeof n?n:a.callback}catch(e){n=function(){}}var s=t;if(s.readyToAttachIframePreliminary()){if("string"==typeof a){if(!a.length)return void n({error:"subdomain is not a populated string."});if(!(r instanceof Array&&r.length))return void n({error:"messages is not a populated array."});var o=!1;if(r.forEach((function(e){"string"==typeof e&&e.length&&(s.addMessage(e),o=!0)})),!o)return void n({error:"None of the messages are populated strings."})}else{if(!O.isObject(a))return void n({error:"Invalid parameters passed."});var i=a;if("string"!=typeof(a=i.subdomain)||!a.length)return void n({error:"config.subdomain is not a populated string."});var l=i.urlDestinations;if(!(l instanceof Array&&l.length))return void n({error:"config.urlDestinations is not a populated array."});var c=[];l.forEach((function(e){O.isObject(e)&&(e.hideReferrer?e.message&&s.addMessage(e.message):c.push(e))})),function e(){c.length&&setTimeout((function(){var t=new Image,a=c.shift();t.src=a.url,s.onPageDestinationsFired.push(a),e()}),100)}()}s.iframe?(n({message:"The destination publishing iframe is already attached and loaded."}),s.requestToProcess()):!e.subdomain&&e._getField("MCMID")?(s.subdomain=a,s.doAttachIframe=!0,s.url=s.getUrl(),s.readyToAttachIframe()?(s.iframeLoadedCallbacks.push((function(e){n({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})})),s.attachIframe()):n({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):s.iframeLoadedCallbacks.push((function(e){n({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})}))}else n({error:"The destination publishing iframe is disabled in the Visitor library."})}},Ie=function e(t){function a(e,t){return e>>>t|e<<32-t}for(var r,n,s=Math.pow,o=s(2,32),i="",l=[],c=8*t.length,d=e.h=e.h||[],u=e.k=e.k||[],g=u.length,m={},p=2;g<64;p++)if(!m[p]){for(r=0;r<313;r+=p)m[r]=p;d[g]=s(p,.5)*o|0,u[g++]=s(p,1/3)*o|0}for(t+="\x80";t.length%64-56;)t+="\0";for(r=0;r<t.length;r++){if((n=t.charCodeAt(r))>>8)return;l[r>>2]|=n<<(3-r)%4*8}for(l[l.length]=c/o|0,l[l.length]=c,n=0;n<l.length;){var v=l.slice(n,n+=16),b=d;for(d=d.slice(0,8),r=0;r<64;r++){var f=v[r-15],_=v[r-2],h=d[0],V=d[4],C=d[7]+(a(V,6)^a(V,11)^a(V,25))+(V&d[5]^~V&d[6])+u[r]+(v[r]=r<16?v[r]:v[r-16]+(a(f,7)^a(f,18)^f>>>3)+v[r-7]+(a(_,17)^a(_,19)^_>>>10)|0);(d=[C+((a(h,2)^a(h,13)^a(h,22))+(h&d[1]^h&d[2]^d[1]&d[2]))|0].concat(d))[4]=d[4]+C|0}for(r=0;r<8;r++)d[r]=d[r]+b[r]|0}for(r=0;r<8;r++)for(n=3;n+1;n--){var y=d[r]>>8*n&255;i+=(y<16?0:"")+y.toString(16)}return i},Ee=function(e,t){return"SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t||(e=Ie(e)),e},Se=function(e){return String(e).trim().toLowerCase()},ke=Oe.OptIn;O.defineGlobalNamespace(),window.adobe.OptInCategories=ke.Categories;var Le=function(t,a,r){function n(e){var t=e;return function(e){var a=e||C.location.href;try{var r=p._extractParamFromUri(a,t);if(r)return x.parsePipeDelimetedKeyValues(r)}catch(e){}}}function s(e){function t(e,t,a){e&&e.match(J.VALID_VISITOR_ID_REGEX)&&(a===w&&(h=!0),t(e))}t(e[w],p.setMarketingCloudVisitorID,w),p._setFieldExpire(D,-1),t(e[A],p.setAnalyticsVisitorID)}function o(e){e=e||{},p._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",p._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},p._supplementalDataIDLast=e.supplementalDataIDLast||"",p._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function i(e){function t(e,t,a){return(a=a?a+="|":a)+(e+"=")+encodeURIComponent(t)}function a(e,a){var r=a[0],n=a[1];return null!=n&&n!==I&&(e=t(r,n,e)),e}return function(e){return(e=e?e+="|":e)+"TS="+x.getTimestampInSeconds()}(e.reduce(a,""))}function l(e){var t=e.minutesToLive,a="";return(p.idSyncDisableSyncs||p.disableIdSyncs)&&(a=a||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(a=a||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(a=a||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(a=a||"Error: config.minutesToLive needs to be a positive number")),{error:a,ttl:t}}function c(){return!(!p.configs.doesOptInApply||v.optIn.isComplete&&d())}function d(){return p.configs.isIabContext?v.optIn.isApproved(v.optIn.Categories.ECID)&&_:v.optIn.isApproved(v.optIn.Categories.ECID)}function u(e,t){if(_=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(b=t.consentString),p.init(),m()}function g(){v.optIn.isApproved(v.optIn.Categories.ECID)&&(p.configs.isIabContext?v.optIn.execute({command:"iabPlugin.fetchConsentData",callback:u}):(p.init(),m()))}function m(){v.optIn.off("complete",g)}if(!r||r.split("").reverse().join("")!==t)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var p=this,v=window.adobe,b="",_=!1,h=!1;p.version="4.4.0";var C=f,y=C.Visitor;y.version=p.version,y.AuthState=V.AUTH_STATE,y.OptOut=V.OPT_OUT,C.s_c_in||(C.s_c_il=[],C.s_c_in=0),p._c="Visitor",p._il=C.s_c_il,p._in=C.s_c_in,p._il[p._in]=p,C.s_c_in++,p._instanceType="regular",p._log={requests:[]},p.marketingCloudOrgID=t,p.cookieName="AMCV_"+t,p.sessionCookieName="AMCVS_"+t,p.cookieDomain=H(),p.loadSSL=C.location.protocol.toLowerCase().indexOf("https")>=0,p.loadTimeout=3e4,p.CORSErrors=[],p.marketingCloudServer=p.audienceManagerServer="dpm.demdex.net",p.sdidParamExpiry=30;var P=null,w="MCMID",R="MCIDTS",j="A",A="MCAID",T="AAM",D="MCAAMB",I="NONE",E=function(e){return!Object.prototype[e]},k=Y(p);p.FIELDS=V.FIELDS,p.cookieRead=function(e){return B.get(e)},p.cookieWrite=function(e,t,a){var r=p.cookieLifetime?(""+p.cookieLifetime).toUpperCase():"",n=!1;return p.configs&&p.configs.secureCookie&&"https:"===location.protocol&&(n=!0),B.set(e,""+t,{expires:a,domain:p.cookieDomain,cookieLifetime:r,secure:n})},p.resetState=function(e){e?p._mergeServerState(e):o()},p._isAllowedDone=!1,p._isAllowedFlag=!1,p.isAllowed=function(){return p._isAllowedDone||(p._isAllowedDone=!0,(p.cookieRead(p.cookieName)||p.cookieWrite(p.cookieName,"T",1))&&(p._isAllowedFlag=!0)),"T"===p.cookieRead(p.cookieName)&&p._helpers.removeCookie(p.cookieName),p._isAllowedFlag},p.setMarketingCloudVisitorID=function(e){p._setMarketingCloudFields(e)},p._use1stPartyMarketingCloudServer=!1,p.getMarketingCloudVisitorID=function(e,t){p.marketingCloudServer&&p.marketingCloudServer.indexOf(".demdex.net")<0&&(p._use1stPartyMarketingCloudServer=!0);var a=p._getAudienceManagerURLData("_setMarketingCloudFields"),r=a.url;return p._getRemoteField(w,r,e,t,a)},p.getVisitorValues=function(e,t){var a={MCMID:{fn:p.getMarketingCloudVisitorID,args:[!0],context:p},MCOPTOUT:{fn:p.isOptedOut,args:[void 0,!0],context:p},MCAID:{fn:p.getAnalyticsVisitorID,args:[!0],context:p},MCAAMLH:{fn:p.getAudienceManagerLocationHint,args:[!0],context:p},MCAAMB:{fn:p.getAudienceManagerBlob,args:[!0],context:p}},r=t&&t.length?O.pluck(a,t):a;U(r,e)},p._currentCustomerIDs={},p._customerIDsHashChanged=!1,p._newCustomerIDsHash="",p.setCustomerIDs=function(t,a){function r(){p._customerIDsHashChanged=!1}if(!p.isOptedOut()&&t){if(!O.isObject(t)||O.isObjectEmpty(t))return!1;var n,s,o;for(n in p._readVisitor(),t)if(E(n)&&(a=(s=t[n]).hasOwnProperty("hashType")?s.hashType:a,s))if("object"===e(s)){var i={};if(s.id){if(a){if(!(o=Ee(Se(s.id),a)))return;s.id=o,i.hashType=a}i.id=s.id}null!=s.authState&&(i.authState=s.authState),p._currentCustomerIDs[n]=i}else if(a){if(!(o=Ee(Se(s),a)))return;p._currentCustomerIDs[n]={id:o,hashType:a}}else p._currentCustomerIDs[n]={id:s};var l=p.getCustomerIDs(),c=p._getField("MCCIDH"),d="";for(n in c||(c=0),l)E(n)&&(d+=(d?"|":"")+n+"|"+((s=l[n]).id?s.id:"")+(s.authState?s.authState:""));p._newCustomerIDsHash=String(p._hash(d)),p._newCustomerIDsHash!==c&&(p._customerIDsHashChanged=!0,p._mapCustomerIDs(r))}},p.getCustomerIDs=function(){p._readVisitor();var e,t,a={};for(e in p._currentCustomerIDs)E(e)&&(t=p._currentCustomerIDs[e],a[e]||(a[e]={}),t.id&&(a[e].id=t.id),null!=t.authState?a[e].authState=t.authState:a[e].authState=y.AuthState.UNKNOWN,t.hashType&&(a[e].hashType=t.hashType));return a},p.setAnalyticsVisitorID=function(e){p._setAnalyticsFields(e)},p.getAnalyticsVisitorID=function(e,t,a){if(!x.isTrackingServerPopulated()&&!a)return p._callCallback(e,[""]),"";var r="";if(a||(r=p.getMarketingCloudVisitorID((function(){p.getAnalyticsVisitorID(e,!0)}))),r||a){var n=a?p.marketingCloudServer:p.trackingServer,s="";p.loadSSL&&(a?p.marketingCloudServerSecure&&(n=p.marketingCloudServerSecure):p.trackingServerSecure&&(n=p.trackingServerSecure));var o={};if(n){var i="http"+(p.loadSSL?"s":"")+"://"+n+"/id",l="d_visid_ver="+p.version+"&mcorgid="+encodeURIComponent(p.marketingCloudOrgID)+(r?"&mid="+encodeURIComponent(r):"")+(p.idSyncDisable3rdPartySyncing||p.disableThirdPartyCookies?"&d_coppa=true":""),c=["s_c_il",p._in,"_set"+(a?"MarketingCloud":"Analytics")+"Fields"];s=i+"?"+l+"&callback=s_c_il%5B"+p._in+"%5D._set"+(a?"MarketingCloud":"Analytics")+"Fields",o.corsUrl=i+"?"+l,o.callback=c}return o.url=s,p._getRemoteField(a?w:A,s,e,t,o)}return""},p.getAudienceManagerLocationHint=function(e,t){if(p.getMarketingCloudVisitorID((function(){p.getAudienceManagerLocationHint(e,!0)}))){var a=p._getField(A);if(!a&&x.isTrackingServerPopulated()&&(a=p.getAnalyticsVisitorID((function(){p.getAudienceManagerLocationHint(e,!0)}))),a||!x.isTrackingServerPopulated()){var r=p._getAudienceManagerURLData(),n=r.url;return p._getRemoteField("MCAAMLH",n,e,t,r)}}return""},p.getLocationHint=p.getAudienceManagerLocationHint,p.getAudienceManagerBlob=function(e,t){if(p.getMarketingCloudVisitorID((function(){p.getAudienceManagerBlob(e,!0)}))){var a=p._getField(A);if(!a&&x.isTrackingServerPopulated()&&(a=p.getAnalyticsVisitorID((function(){p.getAudienceManagerBlob(e,!0)}))),a||!x.isTrackingServerPopulated()){var r=p._getAudienceManagerURLData(),n=r.url;return p._customerIDsHashChanged&&p._setFieldExpire(D,-1),p._getRemoteField(D,n,e,t,r)}}return""},p._supplementalDataIDCurrent="",p._supplementalDataIDCurrentConsumed={},p._supplementalDataIDLast="",p._supplementalDataIDLastConsumed={},p.getSupplementalDataID=function(e,t){p._supplementalDataIDCurrent||t||(p._supplementalDataIDCurrent=p._generateID(1));var a=p._supplementalDataIDCurrent;return p._supplementalDataIDLast&&!p._supplementalDataIDLastConsumed[e]?(a=p._supplementalDataIDLast,p._supplementalDataIDLastConsumed[e]=!0):a&&(p._supplementalDataIDCurrentConsumed[e]&&(p._supplementalDataIDLast=p._supplementalDataIDCurrent,p._supplementalDataIDLastConsumed=p._supplementalDataIDCurrentConsumed,p._supplementalDataIDCurrent=a=t?"":p._generateID(1),p._supplementalDataIDCurrentConsumed={}),a&&(p._supplementalDataIDCurrentConsumed[e]=!0)),a};var L=!1;p._liberatedOptOut=null,p.getOptOut=function(e,t){var a=p._getAudienceManagerURLData("_setMarketingCloudFields"),r=a.url;if(d())return p._getRemoteField("MCOPTOUT",r,e,t,a);if(p._registerCallback("liberatedOptOut",e),null!==p._liberatedOptOut)return p._callAllCallbacks("liberatedOptOut",[p._liberatedOptOut]),L=!1,p._liberatedOptOut;if(L)return null;L=!0;var n="liberatedGetOptOut";return a.corsUrl=a.corsUrl.replace(/dpm\.demdex\.net\/id\?/,"dpm.demdex.net/optOutStatus?"),a.callback=[n],f[n]=function(e){if(e===Object(e)){var t,a,r=O.parseOptOut(e,t,I);t=r.optOut,a=1e3*r.d_ottl,p._liberatedOptOut=t,setTimeout((function(){p._liberatedOptOut=null}),a)}p._callAllCallbacks("liberatedOptOut",[t]),L=!1},k.fireCORS(a),null},p.isOptedOut=function(e,t,a){t||(t=y.OptOut.GLOBAL);var r=p.getOptOut((function(a){var r=a===y.OptOut.GLOBAL||a.indexOf(t)>=0;p._callCallback(e,[r])}),a);return r?r===y.OptOut.GLOBAL||r.indexOf(t)>=0:null},p._fields=null,p._fieldsExpired=null,p._hash=function(e){var t,a=0;if(e)for(t=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t),a&=a;return a},p._generateID=K,p._generateLocalMID=function(){var e=p._generateID(0);return F.isClientSideMarketingCloudVisitorID=!0,e},p._callbackList=null,p._callCallback=function(e,t){try{"function"==typeof e?e.apply(C,t):e[1].apply(e[0],t)}catch(e){}},p._registerCallback=function(e,t){t&&(null==p._callbackList&&(p._callbackList={}),null==p._callbackList[e]&&(p._callbackList[e]=[]),p._callbackList[e].push(t))},p._callAllCallbacks=function(e,t){if(null!=p._callbackList){var a=p._callbackList[e];if(a)for(;a.length>0;)p._callCallback(a.shift(),t)}},p._addQuerystringParam=function(e,t,a,r){var n=encodeURIComponent(t)+"="+encodeURIComponent(a),s=x.parseHash(e),o=x.hashlessUrl(e);if(-1===o.indexOf("?"))return o+"?"+n+s;var i=o.split("?"),l=i[0]+"?",c=i[1];return l+x.addQueryParamAtLocation(c,n,r)+s},p._extractParamFromUri=function(e,t){var a=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(a&&a.length)return decodeURIComponent(a[1])},p._parseAdobeMcFromUrl=n(J.ADOBE_MC),p._parseAdobeMcSdidFromUrl=n(J.ADOBE_MC_SDID),p._attemptToPopulateSdidFromUrl=function(e){var a=p._parseAdobeMcSdidFromUrl(e),r=1e9;a&&a.TS&&(r=x.getTimestampInSeconds()-a.TS),a&&a.SDID&&a.MCORGID===t&&r<p.sdidParamExpiry&&(p._supplementalDataIDCurrent=a.SDID,p._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},p._attemptToPopulateIdsFromUrl=function(){var e=p._parseAdobeMcFromUrl();if(e&&e.TS){var a=x.getTimestampInSeconds()-e.TS;if(Math.floor(a/60)>J.ADOBE_MC_TTL_IN_MIN||e.MCORGID!==t)return;s(e)}},p._mergeServerState=function(e){if(e)try{if((e=function(e){return x.isObject(e)?e:JSON.parse(e)}(e))[p.marketingCloudOrgID]){var t=e[p.marketingCloudOrgID];!function(e){x.isObject(e)&&p.setCustomerIDs(e)}(t.customerIDs),o(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},p._timeout=null,p._loadData=function(e,t,a,r){t=p._addQuerystringParam(t,"d_fieldgroup",e,1),r.url=p._addQuerystringParam(r.url,"d_fieldgroup",e,1),r.corsUrl=p._addQuerystringParam(r.corsUrl,"d_fieldgroup",e,1),F.fieldGroupObj[e]=!0,r===Object(r)&&r.corsUrl&&"XMLHttpRequest"===k.corsMetadata.corsType&&k.fireCORS(r,a,e)},p._clearTimeout=function(e){null!=p._timeout&&p._timeout[e]&&(clearTimeout(p._timeout[e]),p._timeout[e]=0)},p._settingsDigest=0,p._getSettingsDigest=function(){if(!p._settingsDigest){var e=p.version;p.audienceManagerServer&&(e+="|"+p.audienceManagerServer),p.audienceManagerServerSecure&&(e+="|"+p.audienceManagerServerSecure),p._settingsDigest=p._hash(e)}return p._settingsDigest},p._readVisitorDone=!1,p._readVisitor=function(){if(!p._readVisitorDone){p._readVisitorDone=!0;var e,t,a,r,n,s,o=p._getSettingsDigest(),i=!1,l=p.cookieRead(p.cookieName),c=new Date;if(l||h||p.discardTrackingServerECID||(l=p.cookieRead(J.FIRST_PARTY_SERVER_COOKIE)),null==p._fields&&(p._fields={}),l&&"T"!==l)for((l=l.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==o&&(i=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)a=(t=l[e].split("-"))[0],r=l[e+1],t.length>1?(n=parseInt(t[1],10),s=t[1].indexOf("s")>0):(n=0,s=!1),i&&("MCCIDH"===a&&(r=""),n>0&&(n=c.getTime()/1e3-60)),a&&r&&(p._setField(a,r,1),n>0&&(p._fields["expire"+a]=n+(s?"s":""),(c.getTime()>=1e3*n||s&&!p.cookieRead(p.sessionCookieName))&&(p._fieldsExpired||(p._fieldsExpired={}),p._fieldsExpired[a]=!0)));!p._getField(A)&&x.isTrackingServerPopulated()&&(l=p.cookieRead("s_vi"))&&(l=l.split("|")).length>1&&l[0].indexOf("v1")>=0&&((e=(r=l[1]).indexOf("["))>=0&&(r=r.substring(0,e)),r&&r.match(J.VALID_VISITOR_ID_REGEX)&&p._setField(A,r))}},p._appendVersionTo=function(e){var t="vVersion|"+p.version,a=e?p._getCookieVersion(e):null;return a?G.areVersionsDifferent(a,p.version)&&(e=e.replace(J.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},p._writeVisitor=function(){var e,t,a=p._getSettingsDigest();for(e in p._fields)E(e)&&p._fields[e]&&"expire"!==e.substring(0,6)&&(t=p._fields[e],a+=(a?"|":"")+e+(p._fields["expire"+e]?"-"+p._fields["expire"+e]:"")+"|"+t);a=p._appendVersionTo(a),p.cookieWrite(p.cookieName,a,1)},p._getField=function(e,t){return null==p._fields||!t&&p._fieldsExpired&&p._fieldsExpired[e]?null:p._fields[e]},p._setField=function(e,t,a){null==p._fields&&(p._fields={}),p._fields[e]=t,a||p._writeVisitor()},p._getFieldList=function(e,t){var a=p._getField(e,t);return a?a.split("*"):null},p._setFieldList=function(e,t,a){p._setField(e,t?t.join("*"):"",a)},p._getFieldMap=function(e,t){var a=p._getFieldList(e,t);if(a){var r,n={};for(r=0;r<a.length;r+=2)n[a[r]]=a[r+1];return n}return null},p._setFieldMap=function(e,t,a){var r,n=null;if(t)for(r in n=[],t)E(r)&&(n.push(r),n.push(t[r]));p._setFieldList(e,n,a)},p._setFieldExpire=function(e,t,a){var r=new Date;r.setTime(r.getTime()+1e3*t),null==p._fields&&(p._fields={}),p._fields["expire"+e]=Math.floor(r.getTime()/1e3)+(a?"s":""),t<0?(p._fieldsExpired||(p._fieldsExpired={}),p._fieldsExpired[e]=!0):p._fieldsExpired&&(p._fieldsExpired[e]=!1),a&&(p.cookieRead(p.sessionCookieName)||p.cookieWrite(p.sessionCookieName,"1"))},p._findVisitorID=function(t){return t&&("object"===e(t)&&(t=t.d_mid?t.d_mid:t.visitorID?t.visitorID:t.id?t.id:t.uuid?t.uuid:""+t),t&&"NOTARGET"===(t=t.toUpperCase())&&(t=I),t&&(t===I||t.match(J.VALID_VISITOR_ID_REGEX))||(t="")),t},p._setFields=function(t,a){if(p._clearTimeout(t),null!=p._loading&&(p._loading[t]=!1),F.fieldGroupObj[t]&&F.setState(t,!1),"MC"===t){!0!==F.isClientSideMarketingCloudVisitorID&&(F.isClientSideMarketingCloudVisitorID=!1);var r=p._getField(w);if(!r||p.overwriteCrossDomainMCIDAndAID){if(!(r="object"===e(a)&&a.mid?a.mid:p._findVisitorID(a))){if(p._use1stPartyMarketingCloudServer&&!p.tried1stPartyMarketingCloudServer)return p.tried1stPartyMarketingCloudServer=!0,void p.getAnalyticsVisitorID(null,!1,!0);r=p._generateLocalMID()}p._setField(w,r)}r&&r!==I||(r=""),"object"===e(a)&&((a.d_region||a.dcs_region||a.d_blob||a.blob)&&p._setFields(T,a),p._use1stPartyMarketingCloudServer&&a.mid&&p._setFields(j,{id:a.id})),p._callAllCallbacks(w,[r])}if(t===T&&"object"===e(a)){var n=604800;null!=a.id_sync_ttl&&a.id_sync_ttl&&(n=parseInt(a.id_sync_ttl,10));var s=N.getRegionAndCheckIfChanged(a,n);p._callAllCallbacks("MCAAMLH",[s]);var o=p._getField(D);(a.d_blob||a.blob)&&((o=a.d_blob)||(o=a.blob),p._setFieldExpire(D,n),p._setField(D,o)),o||(o=""),p._callAllCallbacks(D,[o]),!a.error_msg&&p._newCustomerIDsHash&&p._setField("MCCIDH",p._newCustomerIDsHash)}if(t===j){var i=p._getField(A);i&&!p.overwriteCrossDomainMCIDAndAID||((i=p._findVisitorID(a))?i!==I&&p._setFieldExpire(D,-1):i=I,p._setField(A,i)),i&&i!==I||(i=""),p._callAllCallbacks(A,[i])}if(p.idSyncDisableSyncs||p.disableIdSyncs)N.idCallNotProcesssed=!0;else{N.idCallNotProcesssed=!1;var l={};l.ibs=a.ibs,l.subdomain=a.subdomain,N.processIDCallData(l)}if(a===Object(a)){var c,u;d()&&p.isAllowed()&&(c=p._getField("MCOPTOUT"));var g=O.parseOptOut(a,c,I);c=g.optOut,u=g.d_ottl,p._setFieldExpire("MCOPTOUT",u,!0),p._setField("MCOPTOUT",c),p._callAllCallbacks("MCOPTOUT",[c])}},p._loading=null,p._getRemoteField=function(e,t,a,r,n){var s,o="",i=x.isFirstPartyAnalyticsVisitorIDCall(e),l={MCAAMLH:!0,MCAAMB:!0};if(d()&&p.isAllowed())if(p._readVisitor(),!(!(o=p._getField(e,!0===l[e]))||p._fieldsExpired&&p._fieldsExpired[e])||p.disableThirdPartyCalls&&!i)o||(e===w?(p._registerCallback(e,a),o=p._generateLocalMID(),p.setMarketingCloudVisitorID(o)):e===A?(p._registerCallback(e,a),o="",p.setAnalyticsVisitorID(o)):(o="",r=!0));else if(e===w||"MCOPTOUT"===e?s="MC":"MCAAMLH"===e||e===D?s=T:e===A&&(s=j),s)return!t||null!=p._loading&&p._loading[s]||(null==p._loading&&(p._loading={}),p._loading[s]=!0,p._loadData(s,t,(function(t){if(!p._getField(e)){t&&F.setState(s,!0);var a="";e===w?a=p._generateLocalMID():s===T&&(a={error_msg:"timeout"}),p._setFields(s,a)}}),n)),p._registerCallback(e,a),o||(t||p._setFields(s,{id:I}),"");return e!==w&&e!==A||o!==I||(o="",r=!0),a&&r&&p._callCallback(a,[o]),o},p._setMarketingCloudFields=function(e){p._readVisitor(),p._setFields("MC",e)},p._mapCustomerIDs=function(e){p.getAudienceManagerBlob(e,!0)},p._setAnalyticsFields=function(e){p._readVisitor(),p._setFields(j,e)},p._setAudienceManagerFields=function(e){p._readVisitor(),p._setFields(T,e)},p._getAudienceManagerURLData=function(e){var t=p.audienceManagerServer,a="",r=p._getField(w),n=p._getField(D,!0),s=p._getField(A),o=s&&s!==I?"&d_cid_ic=AVID%01"+encodeURIComponent(s):"";if(p.loadSSL&&p.audienceManagerServerSecure&&(t=p.audienceManagerServerSecure),t){var i,l,c=p.getCustomerIDs();if(c)for(i in c)E(i)&&(l=c[i],o+="&d_cid_ic="+encodeURIComponent(i)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var d="http"+(p.loadSSL?"s":"")+"://"+t+"/id",u="d_visid_ver="+p.version+(b&&-1!==d.indexOf("demdex.net")?"&gdpr=1&gdpr_force=1&gdpr_consent="+b:"")+"&d_rtbd=json&d_ver=2"+(!r&&p._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(p.marketingCloudOrgID)+"&d_nsid="+(p.idSyncContainerID||0)+(r?"&d_mid="+encodeURIComponent(r):"")+(p.idSyncDisable3rdPartySyncing||p.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===P?"&d_coop_safe=1":!1===P?"&d_coop_unsafe=1":"")+(n?"&d_blob="+encodeURIComponent(n):"")+o,g=["s_c_il",p._in,e];return{url:a=d+"?"+u+"&d_cb=s_c_il%5B"+p._in+"%5D."+e,corsUrl:d+"?"+u,callback:g}}return{url:a}},p.appendVisitorIDsTo=function(e){try{var t=[[w,p._getField(w)],[A,p._getField(A)],["MCORGID",p.marketingCloudOrgID]];return p._addQuerystringParam(e,J.ADOBE_MC,i(t))}catch(t){return e}},p.appendSupplementalDataIDTo=function(e,t){if(!(t=t||p.getSupplementalDataID(x.generateRandomString(),!0)))return e;try{var a=i([["SDID",t],["MCORGID",p.marketingCloudOrgID]]);return p._addQuerystringParam(e,J.ADOBE_MC_SDID,a)}catch(t){return e}};var x={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,a){var r=e.split("&");return a=null!=a?a:r.length,r.splice(a,0,t),r.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,a){return e===A&&(t||(t=p.trackingServer),a||(a=p.trackingServerSecure),!("string"!=typeof(r=p.loadSSL?a:t)||!r.length)&&r.indexOf("2o7.net")<0&&r.indexOf("omtrdc.net")<0);var r},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){B.remove(e,{domain:p.cookieDomain})},isTrackingServerPopulated:function(){return!!p.trackingServer||!!p.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce((function(e,t){var a=t.split("=");return e[a[0]]=decodeURIComponent(a[1]),e}),{})},generateRandomString:function(e){e=e||5;for(var t="",a="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=a[Math.floor(Math.random()*a.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var a in e)e.hasOwnProperty(a)&&"function"==typeof e[a]&&(e[a]=t);return e}};p._helpers=x;var N=X(p,y);p._destinationPublishing=N,p.timeoutMetricsLog=[];var F={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case"MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case j:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case T:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};p.isClientSideMarketingCloudVisitorID=function(){return F.isClientSideMarketingCloudVisitorID},p.MCIDCallTimedOut=function(){return F.MCIDCallTimedOut},p.AnalyticsIDCallTimedOut=function(){return F.AnalyticsIDCallTimedOut},p.AAMIDCallTimedOut=function(){return F.AAMIDCallTimedOut},p.idSyncGetOnPageSyncInfo=function(){return p._readVisitor(),p._getField("MCSYNCSOP")},p.idSyncByURL=function(e){if(!p.isOptedOut()){var t=l(e||{});if(t.error)return t.error;var a,r,n=e.url,s=encodeURIComponent,o=N;return n=n.replace(/^https:/,"").replace(/^http:/,""),a=O.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),r=["ibs",s(e.dpid),"img",s(n),t.ttl,"",a],o.addMessage(r.join("|")),o.requestToProcess(),"Successfully queued"}},p.idSyncByDataSource=function(e){if(!p.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,p.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},De(p,N),p._getCookieVersion=function(e){e=e||p.cookieRead(p.cookieName);var t=J.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},p._resetAmcvCookie=function(e){var t=p._getCookieVersion();t&&!G.isLessThan(t,e)||x.removeCookie(p.cookieName)},p.setAsCoopSafe=function(){P=!0},p.setAsCoopUnsafe=function(){P=!1},function(){if(p.configs=Object.create(null),x.isObject(a))for(var e in a)E(e)&&(p[e]=a[e],p.configs[e]=a[e])}(),[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach((function(e){var t=e[0],a=2===e.length?e[1]:"",r=p[t];p[t]=function(e){return d()&&p.isAllowed()?r.apply(p,arguments):("function"==typeof e&&p._callCallback(e,[a]),a)}})),p.init=function(){if(c())return v.optIn.fetchPermissions(g,!0);!function(){if(x.isObject(a)){p.idSyncContainerID=p.idSyncContainerID||0,P="boolean"==typeof p.isCoopSafe?p.isCoopSafe:x.parseBoolean(p.isCoopSafe),p.resetBeforeVersion&&p._resetAmcvCookie(p.resetBeforeVersion),p._attemptToPopulateIdsFromUrl(),p._attemptToPopulateSdidFromUrl(),p._readVisitor();var e=p._getField(R),t=Math.ceil((new Date).getTime()/J.MILLIS_PER_DAY);p.idSyncDisableSyncs||p.disableIdSyncs||!N.canMakeSyncIDCall(e,t)||(p._setFieldExpire(D,-1),p._setField(R,t)),p.getMarketingCloudVisitorID(),p.getAudienceManagerLocationHint(),p.getAudienceManagerBlob(),p._mergeServerState(p.serverState)}else p._attemptToPopulateIdsFromUrl(),p._attemptToPopulateSdidFromUrl()}(),function(){if(!p.idSyncDisableSyncs&&!p.disableIdSyncs){N.checkDPIframeSrc();var e=function(){var e=N;e.readyToAttachIframe()&&e.attachIframe()};C.addEventListener("load",(function(){y.windowLoaded=!0,e()}));try{W.receiveMessage((function(e){N.receiveMessage(e.data)}),N.iframeHost)}catch(e){}}}(),p.whitelistIframeDomains&&J.POST_MESSAGE_ENABLED&&(p.whitelistIframeDomains=p.whitelistIframeDomains instanceof Array?p.whitelistIframeDomains:[p.whitelistIframeDomains],p.whitelistIframeDomains.forEach((function(e){var a=new S(t,e),r=q(p,a);W.receiveMessage(r,e)})))}};Le.config=Q,f.Visitor=Le;var xe=Le,Ne=function(e){if(O.isObject(e))return Object.keys(e).filter((function(t){return""!==e[t]})).reduce((function(t,a){var r="doesOptInApply"!==a?e[a]:Q.normalizeConfig(e[a]),n=O.normalizeBoolean(r);return t[a]=n,t}),Object.create(null))},Fe=Oe.OptIn,Me=Oe.IabPlugin;xe.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var a=function(){var t=f.s_c_il;if(t)for(var a=0;a<t.length;a++){var r=t[a];if(r&&"Visitor"===r._c&&r.marketingCloudOrgID===e)return r}}();if(a)return a;var r=Ne(t);!function(e){f.adobe.optIn=f.adobe.optIn||function(){var t=O.pluck(e,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),a=e.optInCookieDomain||e.cookieDomain;a=(a=a||H())===window.location.hostname?"":a,t.optInCookieDomain=a;var r=new Fe(t,{cookies:B});if(t.isIabContext){var n=new Me(window.__cmp);r.registerPlugin(n)}return r}()}(r||{});var n=e.split("").reverse().join(""),s=new xe(e,null,n);O.isObject(r)&&r.cookieDomain&&(s.cookieDomain=r.cookieDomain),f.s_c_il.splice(--f.s_c_in,1);var o=O.getIeVersion();if("number"==typeof o&&o<10)return s._helpers.replaceMethodsWithFunction(s,(function(){}));var i=function(){try{return f.self!==f.parent}catch(e){return!0}}()&&!function(e){return e.cookieWrite("TEST_AMCV_COOKIE","T",1),"T"===e.cookieRead("TEST_AMCV_COOKIE")&&(e._helpers.removeCookie("TEST_AMCV_COOKIE"),!0)}(s)&&f.parent?new L(e,r,s,f.parent):new xe(e,r,n);return s=null,i.init(),i},function(){function e(){xe.windowLoaded=!0}f.addEventListener?f.addEventListener("load",e):f.attachEvent&&f.attachEvent("onload",e),xe.codeLoadEnd=(new Date).getTime()}()}(),void 0!==(a=_satellite.getVar("topLevelDomain")))var r=Visitor.getInstance("B52D1CFE5330949C0A490D45@AdobeOrg",{trackingServer:"bmwag.d3.sc.omtrdc.net",trackingServerSecure:"bmwag.d3.sc.omtrdc.net",cookieDomain:a,disableIdSyncs:_satellite.getVar("disableIDSyncs"),idSyncContainerID:_satellite.getVar("aamContainerID")});else r=Visitor.getInstance("B52D1CFE5330949C0A490D45@AdobeOrg",{trackingServer:"bmwag.d3.sc.omtrdc.net",trackingServerSecure:"bmwag.d3.sc.omtrdc.net",disableIdSyncs:_satellite.getVar("disableIDSyncs"),idSyncContainerID:_satellite.getVar("aamContainerID")});e.visitor=r}e.ActivityMap&&(e.ActivityMap.linkOriginalReference=void 0===e.ActivityMap.linkOriginalReference?e.ActivityMap.link:e.ActivityMap.linkOriginalReference,e.ActivityMap.link=function(){return u(e.ActivityMap.linkOriginalReference.apply(this,arguments))},e.ActivityMap.regionOriginalReference=void 0===e.ActivityMap.regionOriginalReference?e.ActivityMap.region:e.ActivityMap.regionOriginalReference,e.ActivityMap.region=function(){return u(e.ActivityMap.regionOriginalReference.apply(this,arguments))}),e.visitorOptedOut=!1,e.usePlugins=!0;var n=_satellite.getVar("PII_keywords"),s=_satellite.getVar("searchKeys");function o(e){var t=[];if("string"==typeof e){var a=e.toLowerCase();n.forEach((function(e){-1!=a.indexOf(e)&&t.push(e)}))}return t}function i(e){var t=[],a=new RegExp("(wba|wmw|wbs|4us|wb1|wby|x4x|sca|lbv)[\\w]{14}","gi");return s.forEach((function(r){Object.keys(e).forEach((function(n){0===n.indexOf(r)&&e[n]&&(o(e[n]).length||"string"==typeof e[n]&&e[n].match(a))&&t.push(n)}))})),t}function l(e){var t=e,a=o(e);if(a.length)a.forEach((function(e){t=c(e,t)}));else{var r=new RegExp("(wba|wmw|wbs|4us|wb1|wby|x4x|sca|lbv)[\\w]{14}","gi");if(e.match(r))return c("withoutVin",e)}return t}function c(e,t){var a,r,n=t.split("?")[0],s=-1!==t.indexOf("?")?t.split("?")[1]:"",o="?";if(s||(n=t.split("#")[0],o="#",s=-1!==t.indexOf("#")?t.split("#")[1]:""),""!==s){for(var i=(r=s.split("&")).length-1;i>=0;i--)r[i].split("=")[0].toLowerCase()===e&&("email"===e?r[i]="potential_pii_removed":r.splice(i,1));n=n+o+r.join("&")}if(-1!=n.toLowerCase().indexOf(e)&&(a=new RegExp("[a-z]"+e+"[a-z]","gi"),result=n.match(a),result||"email"===e&&document.location.pathname.split(e).length>1&&(1==document.location.href.split(o).length||document.location.href.split(o)[1]&&-1==document.location.href.split(o)[1].indexOf(e))||(n=n.toLowerCase().split(e)[0])),a=new RegExp("(wba|wmw|wbs|4us|wb1|wby|x4x|sca|lbv)[\\w]{14}","gi"),result=n.match(a),result)for(var l=0;l<result.length;l++)n=n.replace(result[l].slice(0),"potential_pii_removed");return n}function d(e){return i(e).forEach((function(t){var a=e[t];e[t]=l(a)})),e}function u(e){switch(typeof e){case"object":return d(e);case"string":return l(e);default:return Error("Not a valid parameter")}}function g(e){_satellite.logger.log("Inside doPlugins"),e.campaign=_satellite.getVar("campaignParameter"),e.linkTrackVars=e.linkTrackVars?e.linkTrackVars+",campaign,":"campaign,";try{var t="";null!=processingWrapper&&(t=processingWrapper._getProcessingInfo("BaseTracking",{type:processingWrapper.ENUM.TRACKINGINFO.TYPE.FULL,format:processingWrapper.ENUM.TRACKINGINFO.FORMAT.AASD2}).adobe),t="test",e.linkTrackVars+=",list1",e.list1=t}catch(e){var r={from:"AA",type:"Config",name:"consentstatus"};_satellite.logger.error(e,r)}if("bmw.at"==_satellite.getVar("topLevelDomain")&&""!=_satellite.getVar("ev_att_componentName")&&(e.eVar118=_satellite.getVar("ev_att_componentName"),e.linkTrackVars+=",eVar118,"),!e.prop30){var s=_satellite.getVar("finalDataLayer"),o=(s&&s.page&&s.page&&s.page.category&&s.page.category.subCategory03,s.page.category.subCategory03);e.prop30=void 0===o?"datalayer field missing":""==o?"datalayer field empty":o,e.linkTrackVars=e.apl(e.linkTrackVars,"prop30",",")}if(void 0!==e.eVar45&&""!=e.eVar45){if(e.eVar45.indexOf("undefined~rn:")>-1&&(e.eVar45=e.eVar45.replace("undefined~rn:","~rn:")),!(e.eVar45.indexOf("ev:")>-1&&""!=e.eVar45.split("ev:")[1])){var i=_satellite.getVar("techMetaData")+e.eVar45;e.eVar45=i}}else e.eVar45=_satellite.getVar("techMetaData");if(e.eVar45+="~sc:"+_satellite.getVar("splitConsentEnabled")+"~p:"+_satellite.containerInfo.propertyName,
void 0!==e.eVar11&&""!=e.eVar11&&(5==e.eVar11.split("|").length&&-1!=e.eVar11.indexOf("Local Form")?e.eVar11=e.eVar11+"|"+_satellite.getVar("ev_att_stepName")+"|"+_satellite.getVar("ev_cat_subCategory03"):6==e.eVar11.split("|").length&&-1!=e.eVar11.indexOf("Local Form")?e.eVar11=e.eVar11+"|"+_satellite.getVar("ev_cat_subCategory03"):5==e.eVar11.split("|").length&&e.eVar11.indexOf("Local Form")<0&&(e.eVar11=e.eVar11+"|not set"),void 0===e.eVar17&&(e.eVar17=_satellite.getVar("v17_forms"),e.linkTrackVars+=",eVar17,")),e.cookieDomain=_satellite.getVar("topLevelDomain"),e.cookieDomainPeriods=_satellite.getVar("topLevelDomain").split(".").length,e.fpCookieDomainPeriods=e.cookieDomainPeriods,"bmw.de"!=a||e.linkType||(e.prop25=_satellite.getVar("URLNoParam")),e.cookieLifetime="63072000",null!=e.linkType&&0!=e.linkType||(_satellite.getVar("lastScrollPercentage")?(e.prop36=_satellite.getVar("lastScrollPercentage"),_satellite.setVar("lastScrollPercentage","")):(e.prop36=e.getPercentPageViewed(),_satellite.setVar("lastScrollPercentage",e.prop36))),!e.linkType){if(_satellite.logger.log("doPlugins - Page Load Call"),_satellite.setVar("isPageLoadTracked","true"),e.pageName===_satellite.getVar("lastCallPageName"))_satellite.logger.log("Duplicate Page Load Call"),e.events+=",event247,";else{var l=_satellite.getVar("consentInfo");l&&"true"===l.fireOptInEvent&&(_satellite.logger.log("Setting opt-in event"),e.events+=",event199,","true"===_satellite.getVar("splitConsentEnabled")&&(e.events+=",event229",e.eVar120=_satellite.getVar("consentItemName")+"~"+_satellite.getVar("consentItemType")+"~Accepted"),_satellite.setVar("consentInfo",null))}_satellite.setVar("lastCallPageName",e.pageName)}window.location.hostname.indexOf("bmw.nl")>-1&&(n[n.indexOf("vin")]="vin="),e.pageURL=e.pageURL?u(e.pageURL.toLowerCase()):u(window.location.href.toLowerCase()),e.referrer=e.referrer?u(e.referrer.toLowerCase()):u(document.referrer.toLowerCase()),e.linkName=e.linkName?u(e.linkName):"",e=u(e);try{e.linkTrackVars+=",prop73,";var c=new Date,d=c.getUTCFullYear().toString(),g=(c.getUTCMonth()+1).toString(),m=c.getUTCDate().toString(),p=document.location.hostname.split(".").pop().toUpperCase();base_context=d+"_"+g+"_"+m+"_"+p,e.prop73=base_context+"_A,"+base_context+"_W,"+base_context+"_I,"+base_context+"_E"}catch(e){_satellite.logger.error("Error in Analytics Extension : prop73 "+e)}"false"==_satellite.getVar("isAAMAllowed")&&(document.cookie="aam_uuid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.bmw.de"),"true"==_satellite.getVar("isAdobeAnalyticsAllowed")?e.visitorOptedOut=!1:e.visitorOptedOut=!0,e.eVar1=void 0===e.eVar1||-1!=e.eVar1.indexOf("undefined")?"":e.eVar1,e.prop1="undefined"==e.prop1?"":e.prop1,e.prop2="undefined"==e.prop2?"":e.prop2,e.prop3="undefined"==e.prop3?"":e.prop3,"bmw.co.uk"==_satellite.getVar("topLevelDomain")&&"true"==_satellite.getVar("isAAMAllowed")?(e.AudienceManagement.setup({partner:"bmwag",visitorService:{namespace:"B52D1CFE5330949C0A490D45@AdobeOrg"},containerNSID:_satellite.getVar("aamContainerID"),disableIDSyncs:_satellite.getVar("disableIDSyncs"),uuidCookie:{name:"aam_uuid",days:30,domain:_satellite.getVar("topLevelDomain")},disableDestinationPublishingIframe:!0}),e.contextData["cm.ssf"]="0"):e.contextData["cm.ssf"]="1",e.linkTrackVars=e.apl(e.linkTrackVars,"contextData.cm.ssf",",")}if(e.doPlugins=g,"bmw.ca"==_satellite.getVar("topLevelDomain")){var m=_satellite.cookie.get("bmwdtm_hq_vs");null==m&&(m=Math.floor(Date.now()/1e3),document.cookie="bmwdtm_hq_vs="+m+";domain=.bmw.ca;path=/")}e.events="event91,event998,event999,",e.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}"),e.getPercentPageViewed=new Function("n","var s=this,W=window,EL=W.addEventListener,AE=W.attachEvent,E=['load','unload','scroll','resize','zoom','keyup','mouseup','touchend','orientationchange','pan'];W.s_Obj=s;s_PPVid=(n=='-'?s.pageName:n)||s.pageName||location.href;if(!W.s_PPVevent){s.s_PPVg=function(n,r){var k='s_ppv',p=k+'l',c=s.c_r(n||r?k:p),a=c.indexOf(',')>-1?c.split(',',10):[''],l=a.length,i;a[0]=unescape(a[0]);r=r||(n&&n!=a[0])||0;a.length=10;if(typeof a[0]!='string')a[0]='';for(i=1;i<10;i++)a[i]=!r&&i<l?parseInt(a[i])||0:0;if(l<10||typeof a[9]!='string')a[9]='';if(r){s.c_w(p,c);s.c_w(k,'?')}return a};W.s_PPVevent=function(e){if(_satellite.getVar('splitConsentEnabled') == 'true' && _satellite.getVar('isAdobeAnalyticsAllowed') == 'false') return; var W=window,D=document,B=D.body,E=D.documentElement,S=window.screen||0,Ho='offsetHeight',Hs='scrollHeight',Ts='scrollTop',Wc='clientWidth',Hc='clientHeight',C=100,M=Math,J='object',N='number',s=W.s_Obj||W.s||0;e=e&&typeof e==J?e.type||'':'';if(!e.indexOf('on'))e=e.substring(2);s_PPVi=W.s_PPVi||0;if(W.s_PPVt&&!e){clearTimeout(s_PPVt);s_PPVt=0;if(s_PPVi<2)s_PPVi++}if(typeof s==J){var h=M.max(B[Hs]||E[Hs],B[Ho]||E[Ho],B[Hc]||E[Hc]),X=W.innerWidth||E[Wc]||B[Wc]||0,Y=W.innerHeight||E[Hc]||B[Hc]||0,x=S?S.width:0,y=S?S.height:0,r=M.round(C*(W.devicePixelRatio||1))/C,b=(D.pageYOffset||E[Ts]||B[Ts]||0)+Y,p=h>0&&b>0?M.round(C*b/h):0,O=W.orientation,o=!isNaN(O)?M.abs(o)%180:Y>X?0:90,L=e=='load'||s_PPVi<1,a=s.s_PPVg(s_PPVid,L),V=function(i,v,f,n){i=parseInt(typeof a==J&&a.length>i?a[i]:'0')||0;v=typeof v!=N?i:v;v=f||v>i?v:i;return n?v:v>C?C:v<0?0:v};if(new RegExp('(iPod|iPad|iPhone)').exec(navigator.userAgent||'')&&o){o=x;x=y;y=o}o=o?'P':'L';a[9]=L?'':a[9].substring(0,1);s.c_w('s_ppv',escape(W.s_PPVid)+','+V(1,p,L)+','+(L||!V(2)?p:V(2))+','+V(3,b,L,1)+','+X+','+Y+','+x+','+y+','+r+','+a[9]+(a[9]==o?'':o))}if(_satellite.getVar('splitConsentEnabled') == 'true' && _satellite.getVar('isAdobeAnalyticsAllowed') == 'true' && !W.s_PPVt&&e!='unload')W.s_PPVt=setTimeout(W.s_PPVevent,333)};for(var f=W.s_PPVevent,i=0;i<E.length;i++)if(EL)EL(E[i],f,false);else if(AE)AE('on'+E[i],f);f()};var a=s.s_PPVg();return!n||n=='-'?a[1]:a"),e.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),e.getTimeParting=new Function("h","z","var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMonth()!=0){return'Data Not Available';}else{var H,M,D,U,ds,de,tm,da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d=new Date();z=z?z:0;z=parseFloat(z);if(s._tpDST){var dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de){z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d.getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();if(M>30){M='30'}else{M='00'}U=' AM';if(H>=12){U=' PM';H=H-12;}if(H==0){H=12;}D=da[D];tm=H+':'+M+U;return(tm+'|'+D);}"),e.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+2*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),e.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),e.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),e.s_getLoadTime=function(){if(!window.s_loadT){var e=(new Date).getTime(),t=window.performance?performance.timing:0,a=t?t.requestStart:window.inHeadTS||0;s_loadT=a?Math.round((e-a)/100):""}return s_loadT},e.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l")}},_satellite.setVar("isAAMTriggered","false"),"false"==_satellite.getVar("isAAMAllowed")&&(document.cookie="aam_uuid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.bmw.de"),_satellite.aamCustomizedPageCode=function(){if("bmw.it"==_satellite.getVar("topLevelDomain")&&"true"==_satellite.getVar("isAAMAllowed")){_satellite.setVar("isAAMTriggered","true"),"function"!=typeof window.DIL&&(window.DIL=function(e,t){var a,r,n,s,o,i,l,c,d,u,g,m,p,v,b,f,_,h,V,C,y,P,w,R,j=[];e!==Object(e)&&(e={}),n=e.partner,s=e.containerNSID,o=!!e.disableDestinationPublishingIframe,i=e.iframeAkamaiHTTPS,l=e.mappings,c=e.uuidCookie,d=!0===e.enableErrorReporting,u=e.visitorService,g=e.declaredId,m=!0===e.removeFinishedScriptsAndCallbacks,p=!0===e.delayAllUntilWindowLoad,v=!0===e.disableIDSyncs,b=void 0===e.secureDataCollection||!0===e.secureDataCollection,f=!0===e.useCORSOnly,_=!0===e.disableScriptAttachment,h=!0===e.disableDefaultRequest,V=e.afterResultForDefaultRequest,C=e.dpIframeSrc,y=!0===e.testCORS,P=!0===e.useJSONPOnly,w=e.visitorConstructor,R=!0===e.disableCORS,d&&DIL.errorModule.activate();var A=!0===window._dil_unit_tests;if((a=t)&&j.push(a+""),!n||"string"!=typeof n)return a="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:a,filename:"dil.js"}),Error(a);if(a="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0",(s||"number"==typeof s)&&(s=parseInt(s,10),!isNaN(s)&&0<=s&&(a="")),a&&(s=0,j.push(a),a=""),(r=DIL.getDil(n,s))instanceof DIL&&r.api.getPartner()===n&&r.api.getContainerNSID()===s)return r;if(!(this instanceof DIL))return new DIL(e,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+n+" and containerNSID = "+s);DIL.registerDil(this,n,s);var T={IS_HTTPS:b||"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC",MILLIS_PER_DAY:864e5,DIL_COOKIE_NAME:"AAMC_"+encodeURIComponent(n)+"_"+s,FIRST_PARTY_SYNCS:"AMSYNCS",FIRST_PARTY_SYNCS_ON_PAGE:"AMSYNCSOP",HAS_JSON_STRINGIFY:window.JSON===Object(window.JSON)&&"function"==typeof window.JSON.stringify},O={stuffed:{}},D={},I={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:s+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2e3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var t,a,r,n,o=this;if("function"==typeof e&&"function"==typeof e.getInstance){if(u!==Object(u)||!(t=u.namespace)||"string"!=typeof t)return this.releaseType="no namespace",void this.releaseRequests();if((a=e.getInstance(t,{idSyncContainerID:s}))===Object(a)&&a instanceof e&&"function"==typeof a.isAllowed&&"function"==typeof a.getMarketingCloudVisitorID&&"function"==typeof a.getCustomerIDs&&"function"==typeof a.isOptedOut)return this.VisitorAPI=e,a.isAllowed()?(this.instance=a,r=function(e){"VisitorAPI"!==o.releaseType&&(o.mid=e,o.releaseType="VisitorAPI",o.releaseRequests())},"string"==typeof(n=a.getMarketingCloudVisitorID(r))&&n.length?void r(n):void setTimeout((function(){"VisitorAPI"!==o.releaseType&&(o.releaseType="timeout",o.releaseRequests())}),this.getLoadTimeout())):(this.releaseType="VisitorAPI not allowed",void this.releaseRequests());this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(e){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0,I.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():null},getMIDQueryString:function(){var e=L.isPopulatedString,t=this.getMarketingCloudVisitorID();return e(this.mid)&&this.mid===t||(this.mid=t),e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var t,a,r="",n=[],s=[];for(t in e)e.hasOwnProperty(t)&&(s[0]=t,(a=e[t])===Object(a)&&(s[1]=a.id||"",s[2]=a.authState||0,n.push(s),s=[]));if(s=n.length)for(e=0;e<s;e++)r+="&d_cid_ic="+x.encodeAndBuildRequest(n[e],"%01");return r}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e,this.isOptedOutCallbackCalled=!0,I.registerRequest()},getLoadTimeout:function(){var e=this.instance;if(e){if("function"==typeof e.getLoadTimeout)return e.getLoadTimeout();if(void 0!==e.loadTimeout)return e.loadTimeout}return this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,t){var a=L.isPopulatedString,r=encodeURIComponent;if(e===Object(e)&&a(t)){var n=e.dpid,s=e.dpuuid,o=null;if(a(n)&&a(s))return o=r(n)+"$"+r(s),!0===this.declaredIdCombos[o]?"setDeclaredId: combo exists for type '"+t+"'":(this.declaredIdCombos[o]=!0,this.declaredId[t]={dpid:n,dpuuid:s},"setDeclaredId: succeeded for type '"+t+"'")}return"setDeclaredId: failed for type '"+t+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,t=this.declaredId.init,a=encodeURIComponent,r="";return null!==e?r="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==t&&(r="&d_dpid="+a(t.dpid)+"&d_dpuuid="+a(t.dpuuid)),r}},registerRequest:function(e){var t=this.firingQueue;e===Object(e)&&t.push(e),this.firing||!t.length||p&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,(e=t.shift()).src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),L.isPopulatedString(e.corsPostData)&&(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),k.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(w||window.Visitor)},requestRemoval:function(e){if(!m)return"removeFinishedScriptsAndCallbacks is not boolean true";var t,a,r=this.toRemove;if(e===Object(e)&&(t=e.script,a=e.callbackName,(t===Object(t)&&"SCRIPT"===t.nodeName||"no script created"===t)&&"string"==typeof a&&a.length&&r.push(e)),this.readyToRemove&&r.length){t=(a=r.shift()).script,a=a.callbackName,"no script created"!==t?(e=t.src,t.parentNode.removeChild(t)):e=t,window[a]=null;try{delete window[a]}catch(e){}return this.removed.push({scriptSrc:e,callbackName:a}),DIL.variables.scriptsRemoved.push(e),DIL.variables.callbacksRemoved.push(a),this.requestRemoval()}return"requestRemoval() processed"}},E={THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:"destination_publishing_iframe_"+n+"_"+s,url:(r=function(){var e="http://fast.",t="?d_nsid="+s+"#"+encodeURIComponent(document.location.href);return"string"==typeof C&&C.length?C+t:(T.IS_HTTPS&&(e=!0===i?"https://fast.":"https://"),e+n+".demdex.net/dest5.html"+t)})(),onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return 3<=t.length?t[0]+"//"+t[2]:(j.push("getIframeHost: url is malformed: "+e),e)}},iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:T.POST_MESSAGE_ENABLED?null:100,ibsDeleted:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){(r=document.createElement("iframe")).sandbox="allow-scripts allow-same-origin",r.title="Adobe ID Syncing iFrame",r.id=a.id,r.style.cssText="display: none; width: 0; height: 0;",r.src=a.url,a.newIframeCreated=!0,t(),document.body.appendChild(r)}function t(){x.addListener(r,"load",(function(){r.className="aamIframeLoaded",a.iframeHasLoaded=!0,a.requestToProcess()}))}var a=this,r=document.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==r.className?(this.originalIframeHasLoadedAlready=!1,t()):(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.iframe=r,this.requestToProcess())):e(),this.iframe=r},requestToProcess:function(e,t){function a(){o.jsonForComparison.push(e),o.jsonWaiting.push([e,t])}var r,n,o=this;if(r=I.adms.instance,e===Object(e)&&r===Object(r)&&r.idSyncContainerID===s&&(E.ibsDeleted.push(e.ibs),delete e.ibs),e&&!L.isEmptyObject(e))if(T.HAS_JSON_STRINGIFY)if(r=JSON.stringify(e.ibs||[]),n=JSON.stringify(e.dests||[]),this.jsonForComparison.length){var i,l,c,d=!1;for(i=0,l=this.jsonForComparison.length;i<l;i++)if(c=this.jsonForComparison[i],r===JSON.stringify(c.ibs||[])&&n===JSON.stringify(c.dests||[])){d=!0;break}d?this.jsonDuplicates.push(e):a()}else a();else a();(this.receivedThirdPartyCookiesNotification||!T.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length&&(r=this.jsonWaiting.shift(),!1===this.newIframeCreated&&delete r[0].ibs,this.process(r[0],r[1]),this.requestToProcess()),this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout((function(){o.messageSendingInterval=T.POST_MESSAGE_ENABLED?null:150}),this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},processSyncOnPage:function(e){var t,a,r;if((t=e.ibs)&&t instanceof Array&&(a=t.length))for(e=0;e<a;e++)(r=t[e]).syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e,t){var a,r,n,s,o,i,l=encodeURIComponent;if(t===Object(t)&&(i=x.encodeAndBuildRequest(["",t.dpid||"",t.dpuuid||""],",")),(a=e.dests)&&a instanceof Array&&(r=a.length))for(n=0;n<r;n++)s=a[n],o=[l("dests"),l(s.id||""),l(s.y||""),l(s.c||"")],this.addMessage(o.join("|"));if((a=e.ibs)&&a instanceof Array&&(r=a.length))for(n=0;n<r;n++)s=a[n],o=[l("ibs"),l(s.id||""),l(s.tag||""),x.encodeAndBuildRequest(s.url||[],","),l(s.ttl||""),"",i,s.fireURLSync?"true":"false"],s.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(o.join("|")):s.fireURLSync&&this.checkFirstPartyCookie(s,o.join("|")));this.jsonProcessed.push(e)},checkFirstPartyCookie:function(e,t,a){var r=(a="syncOnPage"===a)?T.FIRST_PARTY_SYNCS_ON_PAGE:T.FIRST_PARTY_SYNCS,n=this.getOnPageSyncData(r),s=!1,o=!1,i=Math.ceil((new Date).getTime()/T.MILLIS_PER_DAY);n?(n=n.split("*"),s=(o=this.pruneSyncData(n,e.id,i)).dataPresent,o=o.dataValid,s&&o||this.fireSync(a,e,t,n,r,i)):(n=[],this.fireSync(a,e,t,n,r,i))},getOnPageSyncData:function(e){var t=I.adms.instance;return t&&"function"==typeof t.idSyncGetOnPageSyncInfo?t.idSyncGetOnPageSyncInfo():x.getDilCookieField(e)},pruneSyncData:function(e,t,a){var r,n,s,o=!1,i=!1;if(e instanceof Array)for(n=0;n<e.length;n++)r=e[n],s=parseInt(r.split("-")[1],10),r.match("^"+t+"-")?(o=!0,a<s?i=!0:(e.splice(n,1),n--)):a>=s&&(e.splice(n,1),n--);return{dataPresent:o,dataValid:i}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort((function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)}));e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(e,t,a,r,n,s){function o(e,t,a,r){return function(){d.onPagePixels[e]=null;var n,s,o,i,l=[];if(n=d.getOnPageSyncData(a))for(s=0,o=(n=n.split("*")).length;s<o;s++)(i=n[s]).match("^"+t.id+"-")||l.push(i);d.setSyncTrackingData(l,t,a,r)}}var i,l,c,d=this;if(e){if("img"===t.tag)for(e=t.url,a=T.IS_HTTPS?"https:":"http:",r=0,i=e.length;r<i;r++){l=e[r],c=/^\/\//.test(l);var u=new Image;x.addListener(u,"load",o(this.onPagePixels.length,t,n,s)),u.src=(c?a:"")+l,this.onPagePixels.push(u)}}else this.addMessage(a),this.setSyncTrackingData(r,t,n,s)},addMessage:function(e){var t=(t=encodeURIComponent)(d?"---destpub-debug---":"---destpub---");this.messages.push((T.POST_MESSAGE_ENABLED?"":t)+e)},setSyncTrackingData:function(e,t,a,r){e.push(t.id+"-"+(r+Math.ceil(t.ttl/60/24))),this.manageSyncsSize(e),x.setDilCookieField(a,e.join("*"))},sendMessages:function(){var e,t=this;this.messages.length?T.POST_MESSAGE_ENABLED?(e=encodeURIComponent("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(e),setTimeout((function(){t.sendMessages()}),this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){DIL.xd.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t=/^---destpub-to-parent---/;"string"==typeof e&&t.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(t,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))}},S={traits:function(e){return L.isValidPdata(e)&&(D.sids instanceof Array||(D.sids=[]),x.extendArray(D.sids,e)),this},pixels:function(e){return L.isValidPdata(e)&&(D.pdata instanceof Array||(D.pdata=[]),x.extendArray(D.pdata,e)),this},logs:function(e){return L.isValidLogdata(e)&&(D.logdata!==Object(D.logdata)&&(D.logdata={}),x.extendObject(D.logdata,e)),this},customQueryParams:function(e){return L.isEmptyObject(e)||x.extendObject(D,e,I.reservedKeys),this},signals:function(e,t){var a,r=e;if(!L.isEmptyObject(r)){if(t&&"string"==typeof t)for(a in r={},e)e.hasOwnProperty(a)&&(r[t+a]=e[a]);x.extendObject(D,r,I.reservedKeys)}return this},declaredId:function(e){return I.declaredId.setDeclaredId(e,"request"),this},result:function(e){return"function"==typeof e&&(D.callback=e),this},afterResult:function(e){return"function"==typeof e&&(D.postCallbackFn=e),this},useImageRequest:function(){return D.useImageRequest=!0,this},clearData:function(){return D={},this},submit:function(){return k.submitRequest(D),D={},this},getPartner:function(){return n},getContainerNSID:function(){return s},getEventLog:function(){return j},getState:function(){var t={},a={};return x.extendObject(t,I,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0}),x.extendObject(a,E,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0}),{initConfig:e,pendingRequest:D,otherRequestInfo:t,destinationPublishingInfo:a}},idSync:function(e){if(v)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!=typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!=typeof e.url||!e.url.length)return"Error: config.url is empty";var t,a=e.url,r=e.minutesToLive,n=encodeURIComponent,s=E;if(a=a.replace(/^https:/,"").replace(/^http:/,""),void 0===r)r=20160;else if(r=parseInt(r,10),isNaN(r)||0>=r)return"Error: config.minutesToLive needs to be a positive number";return t=x.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),e=["ibs",n(e.dpid),"img",n(a),r,"",t],s.addMessage(e.join("|")),I.firstRequestHasFired&&s.requestToProcess(),"Successfully queued"},aamIdSync:function(e){return v?"Error: id syncs have been disabled":e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,this.idSync(e)):"Error: config or config.dpuuid is empty"},passData:function(e){return L.isEmptyObject(e)?"Error: json is empty or not an object":(E.ibsDeleted.push(e.ibs),delete e.ibs,k.defaultCallback(e),e)},getPlatformParams:function(){return I.platformParams},getEventCallConfigParams:function(){var e,t=I,a=t.modStatsParams,r=t.platformParams;if(!a){for(e in a={},r)r.hasOwnProperty(e)&&!t.nonModStatsParams[e]&&(a[e.replace(/^d_/,"")]=r[e]);t.modStatsParams=a}return a}},k={corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest||new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/")()?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){return I.registerRequest(k.createQueuedRequest(e)),!0},createQueuedRequest:function(e){var t,a,r,n,o,i=I,c=e.callback,d="img";if(!L.isEmptyObject(l))for(r in l)l.hasOwnProperty(r)&&null!=(n=l[r])&&""!==n&&r in e&&!(n in e)&&!(n in I.reservedKeys)&&null!=(o=e[r])&&""!==o&&(e[n]=o);return L.isValidPdata(e.sids)||(e.sids=[]),L.isValidPdata(e.pdata)||(e.pdata=[]),L.isValidLogdata(e.logdata)||(e.logdata={}),e.logdataArray=x.convertObjectToKeyValuePairs(e.logdata,"=",!0),e.logdataArray.push("_ts="+(new Date).getTime()),"function"!=typeof c&&(c=this.defaultCallback),i.useJSONP=!0!==e.useImageRequest,i.useJSONP&&(d="script",t=i.callbackPrefix+"_"+s+"_"+(new Date).getTime()),i=this.makeRequestSrcData(e,t),P&&!f||!(a=this.getCORSInstance())||(d="cors"),{tag:d,src:i.src,corsSrc:i.corsSrc,internalCallbackName:t,callbackFn:c,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:a,corsPostData:i.corsPostData}},defaultCallback:function(e,t){var a,r,n,s,i,l,d,u,g;if(E.processSyncOnPage(e),(a=e.stuff)&&a instanceof Array&&(r=a.length))for(n=0;n<r;n++)(s=a[n])&&s===Object(s)&&(i=s.cn,l=s.cv,void 0!==(d=s.ttl)&&""!==d||(d=Math.floor(x.getMaxCookieExpiresInMinutes()/60/24)),u=s.dmn||"."+document.domain.replace(/^www\./,""),g=s.type,i&&(l||"number"==typeof l)&&("var"!==g&&(d=parseInt(d,10))&&!isNaN(d)&&x.setCookie(i,l,1440*d,"/",u,!1),O.stuffed[i]=l));a=e.uuid,L.isPopulatedString(a)&&!L.isEmptyObject(c)&&("string"==typeof(r=c.path)&&r.length||(r="/"),n=parseInt(c.days,10),isNaN(n)&&(n=100),x.setCookie(c.name||"aam_did",a,1440*n,r,c.domain||"."+document.domain.replace(/^www\./,""),!0===c.secure)),o||I.abortRequests||E.requestToProcess(e,t)},makeRequestSrcData:function(e,t){e.sids=L.removeEmptyArrayValues(e.sids||[]),e.pdata=L.removeEmptyArrayValues(e.pdata||[]);var a=I,r=a.platformParams,o=x.encodeAndBuildRequest(e.sids,","),i=x.encodeAndBuildRequest(e.pdata,","),l=(e.logdataArray||[]).join("&");delete e.logdataArray;var c,d,u,g,m,p=T.IS_HTTPS?"https://":"http://",v=a.declaredId.getDeclaredIdQueryString(),b=a.adms.instance?a.adms.getCustomerIDsQueryString(a.adms.getCustomerIDs()):"";for(d in c=[],e)if(!(d in a.reservedKeys)&&e.hasOwnProperty(d))if(u=e[d],d=encodeURIComponent(d),u instanceof Array)for(g=0,m=u.length;g<m;g++)c.push(d+"="+encodeURIComponent(u[g]));else c.push(d+"="+encodeURIComponent(u));return c=c.length?"&"+c.join("&"):"",o="d_nsid="+r.d_nsid+v+b+(o.length?"&d_sid="+o:"")+(i.length?"&d_px="+i:"")+(l.length?"&d_ld="+encodeURIComponent(l):""),r="&d_rtbd="+r.d_rtbd+"&d_jsonv="+r.d_jsonv+"&d_dst="+r.d_dst,i=a=(p=p+n+".demdex.net/event")+"?"+o+(a.useJSONP?r+"&d_cb="+(t||""):"")+c,2048<a.length&&(a=a.substring(0,2048).substring(0,a.lastIndexOf("&"))),{corsSrc:p+"?"+(y?"testcors=1&d_nsid="+s+"&":"")+"_ts="+(new Date).getTime(),src:a,originalSrc:i,corsPostData:o+r+c,isDeclaredIdCall:""!==v}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var t={dpid:(t=(t=I.declaredId).declaredId.request||t.declaredId.init||{}).dpid||"",dpuuid:t.dpuuid||""};"script"===e.tag?this.fireScript(e,t):"cors"===e.tag&&this.fireCORS(e,t)}},fireImage:function(e){var t,r,n=I;n.abortRequests||(n.firing=!0,t=new Image(0,0),n.sent.push(e),t.onload=function(){n.firing=!1,n.fired.push(e),n.num_of_img_responses++,n.registerRequest()},r=function(t){a="imgAbortOrErrorHandler received the event of type "+t.type,j.push(a),n.abortRequests=!0,n.firing=!1,n.errored.push(e),n.num_of_img_errors++,n.registerRequest()},t.addEventListener?(t.addEventListener("error",r,!1),t.addEventListener("abort",r,!1)):t.attachEvent&&(t.attachEvent("onerror",r),t.attachEvent("onabort",r)),t.src=e.src)},fireScript:function(e,t){var r,s,o=this,i=I,l=e.src,c=e.postCallbackFn,d="function"==typeof c,u=e.internalCallbackName;i.abortRequests||(i.firing=!0,window[u]=function(r){try{r!==Object(r)&&(r={}),v&&(E.ibsDeleted.push(r.ibs),delete r.ibs);var o=e.callbackFn;i.firing=!1,i.fired.push(e),i.num_of_jsonp_responses++,o(r,t),d&&c(r,t)}catch(e){e.message="DIL jsonp callback caught error with message "+e.message,a=e.message,j.push(a),e.filename=e.filename||"dil.js",e.partner=n,DIL.errorModule.handleError(e);try{o({error:e.name+"|"+e.message},t),d&&c({error:e.name+"|"+e.message},t)}catch(e){}}finally{i.requestRemoval({script:s,callbackName:u}),i.registerRequest()}},_||f?(i.firing=!1,i.requestRemoval({script:"no script created",callbackName:u})):((s=document.createElement("script")).addEventListener&&s.addEventListener("error",(function(t){i.requestRemoval({script:s,callbackName:u}),a="jsonp script tag error listener received the event of type "+t.type+" with src "+l,o.handleScriptError(a,e)}),!1),s.type="text/javascript",s.src=l,(r=DIL.variables.scriptNodeList[0]).parentNode.insertBefore(s,r)),i.sent.push(e),i.declaredId.declaredId.request=null)},fireCORS:function(e,t){var r=this,s=I,o=this.corsMetadata.corsType,i=e.corsSrc,l=e.corsInstance,c=e.corsPostData,d=e.postCallbackFn,u="function"==typeof d;if(!s.abortRequests&&!R){s.firing=!0;try{l.open("post",i,!0),"XMLHttpRequest"===o&&(l.withCredentials=!0,l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.onreadystatechange=function(){if(4===this.readyState&&200===this.status)e:{var o;try{if((o=JSON.parse(this.responseText))!==Object(o)){r.handleCORSError(e,t,"Response is not JSON");break e}}catch(a){r.handleCORSError(e,t,"Error parsing response as JSON");break e}v&&(E.ibsDeleted.push(o.ibs),delete o.ibs);try{var i=e.callbackFn;s.firing=!1,s.fired.push(e),s.num_of_cors_responses++,i(o,t),u&&d(o,t)}catch(e){e.message="DIL handleCORSResponse caught error with message "+e.message,a=e.message,j.push(a),e.filename=e.filename||"dil.js",e.partner=n,DIL.errorModule.handleError(e);try{i({error:e.name+"|"+e.message},t),u&&d({error:e.name+"|"+e.message},t)}catch(e){}}finally{s.registerRequest()}}}),l.onerror=function(){r.handleCORSError(e,t,"onerror")},l.ontimeout=function(){r.handleCORSError(e,t,"ontimeout")},l.send(c)}catch(a){this.handleCORSError(e,t,"try-catch")}s.sent.push(e),s.declaredId.declaredId.request=null}},handleCORSError:function(e,t,a){I.num_of_cors_errors++,I.corsErrorSources.push(a),"ontimeout"===a||f||(e.tag="script",this.fireScript(e,t))},handleScriptError:function(e,t){I.num_of_jsonp_errors++,this.handleRequestError(e,t)},handleRequestError:function(e,t){var a=I;j.push(e),a.abortRequests=!0,a.firing=!1,a.errored.push(t),a.registerRequest()}},L={isValidPdata:function(e){return!!(e instanceof Array&&this.removeEmptyArrayValues(e).length)},isValidLogdata:function(e){return!this.isEmptyObject(e)},isEmptyObject:function(e){if(e!==Object(e))return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},removeEmptyArrayValues:function(e){var t,a=0,r=e.length,n=[];for(a=0;a<r;a++)null!=(t=e[a])&&""!==t&&n.push(t);return n},isPopulatedString:function(e){return"string"==typeof e&&e.length}},x={addListener:document.addEventListener?function(e,t,a){e.addEventListener(t,(function(e){"function"==typeof a&&a(e)}),!1)}:document.attachEvent?function(e,t,a){
e.attachEvent("on"+t,(function(e){"function"==typeof a&&a(e)}))}:void 0,convertObjectToKeyValuePairs:function(e,t,a){var r,n,s=[];for(r in t||(t="="),e)e.hasOwnProperty(r)&&null!=(n=e[r])&&""!==n&&s.push(r+t+(a?encodeURIComponent(n):n));return s},encodeAndBuildRequest:function(e,t){return this.map(e,(function(e){return encodeURIComponent(e)})).join(t)},map:function(e,t){if(Array.prototype.map)return e.map(t);if(null==e)throw new TypeError;var a=Object(e),r=a.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=Array(r),s=0;s<r;s++)s in a&&(n[s]=t.call(t,a[s],s,a));return n},filter:function(e,t){if(!Array.prototype.filter){if(null==e)throw new TypeError;var a=Object(e),r=a.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=[],s=0;s<r;s++)if(s in a){var o=a[s];t.call(t,o,s,a)&&n.push(o)}return n}return e.filter(t)},getCookie:function(e){e+="=";var t,a,r,n=document.cookie.split(";");for(t=0,a=n.length;t<a;t++){for(r=n[t];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return decodeURIComponent(r.substring(e.length,r.length))}return null},setCookie:function(e,t,a,r,n,s){var o=new Date;a&&(a*=6e4),document.cookie=e+"="+encodeURIComponent(t)+(a?";expires="+new Date(o.getTime()+a).toUTCString():"")+(r?";path="+r:"")+(n?";domain="+n:"")+(s?";secure":"")},extendArray:function(e,t){return e instanceof Array&&t instanceof Array&&(Array.prototype.push.apply(e,t),!0)},extendObject:function(e,t,a){var r;if(e===Object(e)&&t===Object(t)){for(r in t)!t.hasOwnProperty(r)||!L.isEmptyObject(a)&&r in a||(e[r]=t[r]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return(new Date(T.COOKIE_MAX_EXPIRATION_DATE).getTime()-(new Date).getTime())/1e3/60},getCookieField:function(e,t){var a,r,n=this.getCookie(e),s=decodeURIComponent;if("string"==typeof n)for(a=0,r=(n=n.split("|")).length-1;a<r;a++)if(s(n[a])===t)return s(n[a+1]);return null},getDilCookieField:function(e){return this.getCookieField(T.DIL_COOKIE_NAME,e)},setCookieField:function(e,t,a){var r=this.getCookie(e),n=!1;if(t=(o=encodeURIComponent)(t),a=o(a),"string"==typeof r){var s,o=0;for(s=(r=r.split("|")).length-1;o<s;o++)if(r[o]===t){r[o+1]=a,n=!0;break}n||(r[o=r.length]=t,r[o+1]=a)}else r=[t,a];this.setCookie(e,r.join("|"),this.getMaxCookieExpiresInMinutes(),"/",this.getDomain(),!1)},setDilCookieField:function(e,t){return this.setCookieField(T.DIL_COOKIE_NAME,e,t)},getDomain:function(e){if(!e&&window.location&&(e=window.location.hostname),e)if(/^[0-9.]+$/.test(e))e="";else{var t=e.split("."),a=t.length-1,r=a-1;if(1<a&&2>=t[a].length&&(2===t[a-1].length||0>",DOMAIN_2_CHAR_EXCEPTIONS,".indexOf(","+t[a]+","))&&r--,0<r)for(e="";a>=r;)e=t[a]+(e?".":"")+e,a--}return e}};"error"===n&&0===s&&x.addListener(window,"load",(function(){DIL.windowLoaded=!0}));var N=!1,F=function(){N||(N=!0,I.registerRequest(),M(),o||I.abortRequests||E.attachIframe(),I.readyToRemove=!0,I.requestRemoval())},M=function(){o||setTimeout((function(){h||I.firstRequestHasFired||("function"==typeof V?S.afterResult(V).submit():S.submit())}),DIL.constants.TIME_TO_DEFAULT_REQUEST)};if(b=document,"error"!==n&&(DIL.windowLoaded?F():"complete"!==b.readyState&&"loaded"!==b.readyState?x.addListener(window,"load",(function(){DIL.windowLoaded=!0,F()})):(DIL.windowLoaded=!0,F())),"error"!==n)try{DIL.xd.receiveMessage((function(e){E.receiveMessage(e.data)}),E.getIframeHost(E.url))}catch(e){}I.declaredId.setDeclaredId(g,"init"),I.processVisitorAPI(),this.api=S,this.getStuffedVariable=function(e){var t=O.stuffed[e];return t||"number"==typeof t||(t=x.getCookie(e))||"number"==typeof t||(t=""),t},this.validators=L,this.helpers=x,this.constants=T,this.log=j,A&&(this.pendingRequest=D,this.requestController=I,this.setDestinationPublishingUrl=r,this.destinationPublishing=E,this.requestProcs=k,this.variables=O,this.callWindowLoadFunctions=F)},null==(o=document).readyState&&o.addEventListener&&(o.readyState="loading",o.addEventListener("DOMContentLoaded",s=function(){o.removeEventListener("DOMContentLoaded",s,!1),o.readyState="complete"},!1)),DIL.extendStaticPropertiesAndMethods=function(e){var t;if(e===Object(e))for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},DIL.extendStaticPropertiesAndMethods({version:"6.10",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(e){this.windowLoaded="function"==typeof e?!!e():"boolean"!=typeof e||e},create:function(e){try{return new DIL(e)}catch(e){throw Error("Error in attempt to create DIL instance with DIL.create(): "+e.message)}},registerDil:function(e,t,a){(t=t+"$"+a)in this.dils||(this.dils[t]=e)},getDil:function(e,t){var a;return"string"!=typeof e&&(e=""),t||(t=0),(a=e+"$"+t)in this.dils?this.dils[a]:Error("The DIL instance with partner = "+e+" and containerNSID = "+t+" was not found")},dexGetQSVars:function(e,t,a){return(t=this.getDil(t,a))instanceof this?t.getStuffedVariable(e):""},xd:{postMessage:function(e,t,a){var r=1;t&&(window.postMessage?a.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(a.location=t.replace(/#.*$/,"")+"#"+ +new Date+r+++"&"+e))},receiveMessage:function(e,t){var a;try{window.postMessage&&(e&&(a=function(a){if("string"==typeof t&&a.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(a.origin))return!1;e(a)}),window.addEventListener?window[e?"addEventListener":"removeEventListener"]("message",a,!1):window[e?"attachEvent":"detachEvent"]("onmessage",a))}catch(e){}}}}),DIL.errorModule=function(){var e=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),t={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},a=!1;return{activate:function(){a=!0},handleError:function(r){if(!a)return"DIL error module has not been activated";r!==Object(r)&&(r={});var n=r.name?(r.name+"").toLowerCase():"",s=[];return r={name:n,filename:r.filename?r.filename+"":"",partner:r.partner?r.partner+"":"no_partner",site:r.site?r.site+"":document.location.href,message:r.message?r.message+"":""},s.push(n in t?t[n]:t.noerrortypedefined),e.api.pixels(s).logs(r).useImageRequest().submit(),"DIL error report sent"},pixelMap:t}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(e,t,a){var r="";return t=t||"Error caught in DIL module/submodule: ",e===Object(e)?r=t+(e.message||"err has no message"):(r=t+"err is not a valid object",e={}),e.message=r,a instanceof DIL&&(e.partner=a.api.getPartner()),DIL.errorModule.handleError(e),this.errorMessage=r}}}),DIL.tools.getSearchReferrer=function(e,t){var a=DIL.getDil("error"),r=DIL.tools.decomposeURI(e||document.referrer),n="",s="",o={queryParam:"q"};return(n=a.helpers.filter([t===Object(t)?t:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],(function(e){return!(!e.hasOwnProperty("hostPattern")||!r.hostname.match(e.hostPattern))})).shift())?{valid:!0,name:r.hostname,keywords:(a.helpers.extendObject(o,n),s=o.queryPattern?(n=(""+r.search).match(o.queryPattern))?n[1]:"":r.uriParams[o.queryParam],decodeURIComponent(s||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}},DIL.tools.decomposeURI=function(e){var t=DIL.getDil("error"),a=document.createElement("a");return a.href=e||document.referrer,{hash:a.hash,host:a.host.split(":").shift(),hostname:a.hostname,href:a.href,pathname:a.pathname.replace(/^\//,""),protocol:a.protocol,search:a.search,uriParams:function(e,a){return t.helpers.map(a.split("&"),(function(t){t=t.split("="),e[t.shift()]=t.shift()})),e}({},a.search.replace(/^(\/|\?)?|\/$/g,""))}},DIL.tools.getMetaTags=function(){var e,t,a,r,n,s={},o=document.getElementsByTagName("meta");for(e=0,a=arguments.length;e<a;e++)if(null!==(r=arguments[e]))for(t=0;t<o.length;t++)if((n=o[t]).name===r){s[r]=n.content;break}return s},DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(e,t,a,r){try{var n=this,s={name:"DIL Site Catalyst Module Error"},o=function(e){return s.message=e,DIL.errorModule.handleError(s),e};return this.options=r===Object(r)?r:{},this.dil=null,t instanceof DIL?(this.dil=t,s.partner=t.api.getPartner(),e!==Object(e)?o("siteCatalystReportingSuite is not an object"):(window.AppMeasurement_Module_DIL=e.m_DIL=function(e){var t="function"==typeof e.m_i?e.m_i("DIL"):this;if(t!==Object(t))return o("m is not an object");t.trackVars=n.constructTrackVars(a),t.d=0,t.s=e,t._t=function(){var e,t,a,r=","+this.trackVars+",",s=this.s,i=[];a=[];var l={},c=!1;if(s!==Object(s))return o("Error in m._t function: s is not an object");if(this.d){if("function"==typeof s.foreachVar)s.foreachVar((function(e,t){void 0!==t&&(l[e]=t,c=!0)}),this.trackVars);else{if(!(s.va_t instanceof Array))return o("Error in m._t function: s.va_t is not an array");if(s.lightProfileID?(e=s.lightTrackVars)&&(e=","+e+","+s.vl_mr+","):(s.pe||s.linkType)&&(e=s.linkTrackVars,s.pe&&(t=s.pe.substring(0,1).toUpperCase()+s.pe.substring(1),s[t]&&(e=s[t].trackVars)),e&&(e=","+e+","+s.vl_l+","+s.vl_l2+",")),e){for(t=0,i=e.split(",");t<i.length;t++)0<=r.indexOf(","+i[t]+",")&&a.push(i[t]);a.length&&(r=","+a.join(",")+",")}for(a=0,t=s.va_t.length;a<t;a++)e=s.va_t[a],0<=r.indexOf(","+e+",")&&void 0!==s[e]&&null!==s[e]&&""!==s[e]&&(l[e]=s[e],c=!0)}n.includeContextData(s,l).store_populated&&(c=!0),c&&this.d.api.signals(l,"c_").submit()}}},e.loadModule("DIL"),e.DIL.d=t,s.message?s.message:"DIL.modules.siteCatalyst.init() completed with no errors")):o("dilInstance is not a valid instance of DIL")}catch(e){return this.handle(e,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(e){var t,a,r,n,s,o=[];if(e===Object(e)){if((t=e.names)instanceof Array&&(r=t.length))for(a=0;a<r;a++)"string"==typeof(n=t[a])&&n.length&&o.push(n);if((e=e.iteratedNames)instanceof Array&&(r=e.length))for(a=0;a<r;a++)if((t=e[a])===Object(t)&&(n=t.name,s=parseInt(t.maxIndex,10),"string"==typeof n&&n.length&&!isNaN(s)&&0<=s))for(t=0;t<=s;t++)o.push(n+t);if(o.length)return o.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(e,t){var a={},r=!1;if(e.contextData===Object(e.contextData)){var n,s,o,i,l=e.contextData,c=this.options.replaceContextDataPeriodsWith,d=this.options.filterFromContextVariables,u={};if("string"==typeof c&&c.length||(c="_"),d instanceof Array)for(n=0,s=d.length;n<s;n++)o=d[n],this.dil.validators.isPopulatedString(o)&&(u[o]=!0);for(i in l)!l.hasOwnProperty(i)||u[i]||!(d=l[i])&&"number"!=typeof d||(t[i=("contextData."+i).replace(/\./g,c)]=d,r=!0)}return a.store_populated=r,a}},DIL.modules.GA={submitUniversalAnalytics:function(e,t,a){try{var r,n,s,o,i=e.getAll()[0],l=i[a||"b"].data.keys;for(e={},r=0,n=l.length;r<n;r++)s=l[r],void 0===(o=i.get(s))||"function"==typeof o||o===Object(o)||/^_/.test(s)||/^&/.test(s)||(e[s]=o);return t.api.signals(e,"c_").submit(),e}catch(e){return"Caught error with message: "+e.message}},dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(e,t,a){try{this.tv=this.arr=this.dil=null,this.errorMessage="",this.signals={},this.hasSignals=!1;var r={name:"DIL GA Module Error"},n="";t instanceof DIL?(this.dil=t,r.partner=this.dil.api.getPartner()):(n="dilInstance is not a valid instance of DIL",r.message=n,DIL.errorModule.handleError(r)),e instanceof Array&&e.length?this.arr=e:(n="gaArray is not an array or is empty",r.message=n,DIL.errorModule.handleError(r)),this.tv=this.constructTrackVars(a),this.errorMessage=n}catch(e){this.handle(e,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(e){var t,a,r,n,s=[];if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){for(n={},t=0,a=(r=this.defaultTrackVars).length;t<a;t++)n[r[t]]=!0;this.defaultTrackVarsObj=n}else n=this.defaultTrackVarsObj;if(e===Object(e)){if((e=e.names)instanceof Array&&(a=e.length))for(t=0;t<a;t++)"string"==typeof(r=e[t])&&r.length&&r in n&&s.push(r);if(s.length)return s}return this.defaultTrackVars},constructGAObj:function(e){var t,a,r,n,s={};for(t=0,a=(e=e instanceof Array?e:this.arr).length;t<a;t++)(r=e[t])instanceof Array&&r.length&&(r=[],n=e[t],r instanceof Array&&n instanceof Array&&Array.prototype.push.apply(r,n),"string"==typeof(n=r.shift())&&n.length&&(s[n]instanceof Array||(s[n]=[]),s[n].push(r)));return s},addToSignals:function(e,t){return"string"==typeof e&&""!==e&&null!=t&&""!==t&&(this.signals[e]instanceof Array||(this.signals[e]=[]),this.signals[e].push(t),this.hasSignals=!0)},constructSignals:function(){var e,t,a,r,n,s,o=this.constructGAObj(),i={_setAccount:function(e){this.addToSignals("c_accountId",e)},_setCustomVar:function(e,t,a){"string"==typeof t&&t.length&&this.addToSignals("c_"+t,a)},_addItem:function(e,t,a,r,n,s){this.addToSignals("c_itemOrderId",e),this.addToSignals("c_itemSku",t),this.addToSignals("c_itemName",a),this.addToSignals("c_itemCategory",r),this.addToSignals("c_itemPrice",n),this.addToSignals("c_itemQuantity",s)},_addTrans:function(e,t,a,r,n,s,o,i){this.addToSignals("c_transOrderId",e),this.addToSignals("c_transAffiliation",t),this.addToSignals("c_transTotal",a),this.addToSignals("c_transTax",r),this.addToSignals("c_transShipping",n),this.addToSignals("c_transCity",s),this.addToSignals("c_transState",o),this.addToSignals("c_transCountry",i)},_trackSocial:function(e,t,a,r){this.addToSignals("c_socialNetwork",e),this.addToSignals("c_socialAction",t),this.addToSignals("c_socialTarget",a),this.addToSignals("c_socialPagePath",r)}},l=this.tv;for(e=0,t=l.length;e<t;e++)if(a=l[e],o.hasOwnProperty(a)&&i.hasOwnProperty(a)&&(s=o[a])instanceof Array)for(r=0,n=s.length;r<n;r++)i[a].apply(this,s[r])},submit:function(){try{return""!==this.errorMessage?this.errorMessage:(this.constructSignals(),this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present")}catch(e){return this.handle(e,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(e,t,a){try{this.callback=this.dil=null,this.errorMessage="",e instanceof DIL?(this.dil=e,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(t)?t:"aam_ga",this.delimiter=this.v(a)?a:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(e){this.handle(e,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(e){var t,a,r,n,s,o;o=!1;var i=1;if(e===Object(e)&&(t=e.stuff)&&t instanceof Array&&(a=t.length))for(e=0;e<a;e++)if((r=t[e])&&r===Object(r)&&(n=r.cn,s=r.cv,n===this.cookieName&&this.v(s))){o=!0;break}if(o){for(t=s.split(this.delimiter),void 0===window._gaq&&(window._gaq=[]),r=window._gaq,e=0,a=t.length;e<a&&(s=(o=t[e].split("="))[0],o=o[1],this.v(s)&&this.v(o)&&r.push(["_setCustomVar",i++,s,o,1]),!(i>this.LIMIT));e++);this.errorMessage=1<i?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"==typeof this.callback)return this.callback()},submit:function(){try{var e=this;return""!==this.errorMessage?this.errorMessage:(this.dil.api.afterResult((function(t){e.process(t)})).submit(),"DIL.modules.GA.Stuffer.submit() successful")}catch(e){return this.handle(e,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}},DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(e,t,a){try{this.dil=null,this.errorMessage="",this.calledBack=!1,this.optionals=a===Object(a)?a:{},a={name:"DIL Peer39 Module Error"};var r=[],n="";this.isSecurePageButNotEnabled(document.location.protocol)&&(n="Module has not been enabled for a secure page",r.push(n),a.message=n,DIL.errorModule.handleError(a)),t instanceof DIL?(this.dil=t,a.partner=this.dil.api.getPartner()):(n="dilInstance is not a valid instance of DIL",r.push(n),a.message=n,DIL.errorModule.handleError(a)),"string"==typeof e&&e.length?this.aid=e:(n="aid is not a string or is empty",r.push(n),a.message=n,DIL.errorModule.handleError(a)),this.errorMessage=r.join("\n")}catch(e){this.handle(e,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(e){return"https:"===e&&!0!==this.optionals.enableHTTPS},constructSignals:function(){var e=this,t=this.constructScript(),a=DIL.variables.scriptNodeList[0];return window["afterFinished_"+this.aid]=function(){try{var t=e.processData(p39_KVP_Short("c_p","|").split("|"));t.hasSignals&&e.dil.api.signals(t.signals).submit()}catch(e){}finally{e.calledBack=!0,"function"==typeof e.optionals.afterResult&&e.optionals.afterResult()}},a.parentNode.insertBefore(t,a),this.scriptsSent.push(t),"Request sent to Peer39"},processData:function(e){var t,a,r,n,s={},o=!1;if(this.returnedData.push(e),e instanceof Array)for(t=0,a=e.length;t<a;t++)n=(r=e[t].split("="))[0],r=r[1],n&&isFinite(r)&&!isNaN(parseInt(r,10))&&(s[n]instanceof Array||(s[n]=[]),s[n].push(r),o=!0);return{hasSignals:o,signals:s}},constructScript:function(){var e=document.createElement("script"),t=(r=this.optionals).scriptId,a=r.scriptSrc,r=r.scriptParams;return e.id="string"==typeof t&&t.length?t:"peer39ScriptLoader",e.type="text/javascript","string"==typeof a&&a.length?e.src=a:(e.src=document.location.protocol+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"==typeof r&&r.length&&(e.src+="?"+r)),e},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(e){return this.handle(e,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};var t=DIL.create({partner:"bmwit",disableDestinationPublishingIframe:_satellite.getVar("disableIDSyncs"),containerNSID:0,uuidCookie:{name:"aam_uuid",days:30},containerNSID:_satellite.getVar("aamContainerID"),disableIDSyncs:_satellite.getVar("disableIDSyncs")});function a(e){for(var t in e)if(e.hasOwnProperty(t)&&""!==t)return!1;return!0}var r,n=DIL.tools.decomposeURI(document.URL);delete n.search,delete n.href,a(n.uriParams)||t.api.signals(n.uriParams,"c_"),delete n.uriParams,t.api.signals(n,"c_"),t.api.signals(DIL.tools.getMetaTags("title","keywords","description"),"c_"),r=void 0!==e&&e===Object(e)&&void 0!==e.account&&e.account?s_gi(e.account):s_gi(s_account),DIL.modules.siteCatalyst.init(r,t,{names:["pageName","channel","campaign","products","events","pe","referrer","server","purchaseID","zip","state"],iteratedNames:[{name:"eVar",maxIndex:75},{name:"prop",maxIndex:75},{name:"pev",maxIndex:3},{name:"hier",maxIndex:4}]})}var s,o},_satellite.aaCustomizedPageCode(),_satellite.aamCustomizedPageCode()}},libraryCode:{type:"managed",accounts:{staging:["%adobeRSID%"],production:["%adobeRSID%"],development:["%adobeRSID%"]},useActivityMap:!0,scopeTrackerGlobally:!0},moduleProperties:{audienceManager:{config:{partner:"%AAM-dummyPartnerID%"}}},trackerProperties:{eVars:[{name:"eVar1",type:"value",value:"%hierarchyEvar%"},{name:"eVar2",type:"value",value:"%pageName%"},{name:"eVar3",type:"value",value:"%pa_pag_pageTitle%"},{name:"eVar4",type:"value",value:"%URL%"},{name:"eVar12",type:"value",value:"%pathName%"},{name:"eVar14",type:"value",value:"%userMetaData%"},{name:"eVar20",type:"value",value:"eVar16"},{name:"eVar44",type:"value",value:"%nonTechMetaData_EvarAddon%"},{name:"eVar63",type:"value",value:"%URLNoParam%"}],props:[{name:"prop12",type:"value",value:"%timestamp%"},{name:"prop13",type:"value",value:"%nonTechMetaData%"},{name:"prop69",type:"value",value:"Stage II"},{name:"prop70",type:"value",value:"D=mind"}],charSet:"UTF-8",currencyCode:"USD",trackingServer:"bmwag.d3.sc.omtrdc.net",trackInlineStats:!1,trackDownloadLinks:!1,trackExternalLinks:!1,trackingServerSecure:"bmwag.d3.sc.omtrdc.net"}},modules:{"adobe-analytics/src/lib/actions/sendBeacon.js":{name:"send-beacon",displayName:"Send Beacon",script:function(e,t,a,r){"use strict";var n=a("../sharedModules/getTracker"),s=a("../helpers/getNodeLinkText"),o=function(e){return e&&e.nodeName&&"a"===e.nodeName.toLowerCase()},i=function(e){return o(e)?s(e):"link clicked"},l=function(e,t,a){if("page"===t.type)r.logger.info("Firing page view beacon."),e.t();else{var n={linkType:t.linkType||"o",linkName:t.linkName||i(a)};r.logger.info("Firing link track beacon using the values: "+JSON.stringify(n)+"."),e.tl(o(a)?a:"true",n.linkType,n.linkName)}};e.exports=function(e,t){return n().then((function(a){l(a,e,t.element)}),(function(e){r.logger.error("Cannot send beacon: "+e)}))}}},"adobe-analytics/src/lib/actions/setVariables.js":{name:"set-variables",displayName:"Set Variables",script:function(e,t,a,r){"use strict";var n=a("../sharedModules/getTracker"),s=a("../helpers/applyTrackerVariables");e.exports=function(e,t){return n().then((function(a){r.logger.info("Set variables on the tracker."),s(a,e.trackerProperties),e.customSetup&&e.customSetup.source&&e.customSetup.source.call(t.element,t,a)}),(function(e){r.logger.error("Cannot set variables: "+e)}))}}},"adobe-analytics/src/lib/actions/clearVariables.js":{name:"clear-variables",displayName:"Clear Variables",script:function(e,t,a,r){"use strict";var n=a("../sharedModules/getTracker");e.exports=function(){return n().then((function(e){e.clearVars&&(r.logger.info("Clear variables."),e.clearVars())}),(function(e){r.logger.error("Cannot clear variables: "+e)}))}}},"adobe-analytics/src/lib/sharedModules/getTracker.js":{script:function(e,t,a,r){"use strict";var n,s=a("@adobe/reactor-cookie"),o=a("@adobe/reactor-promise"),i=a("@adobe/reactor-window"),l=a("../helpers/settingsHelper"),c=a("../helpers/augmenters"),d=a("../helpers/applyTrackerVariables"),u=a("../helpers/loadLibrary"),g=a("../helpers/generateVersion")(r.buildInfo.turbineBuildDate),m="beforeSettings",p=r.getSharedModule("adobe-mcid","mcid-instance"),v=function(e){return!e||"true"===s.get(e)},b=function(e){return o.all(c.map((function(t){var a;try{a=t(e)}catch(e){setTimeout((function(){throw e}))}return o.resolve(a)}))).then((function(){return e}))},f=function(e){return p&&(r.logger.info("Setting MCID instance on the tracker."),e.visitor=p),e},_=function(e){return r.logger.info('Setting version on tracker: "'+g+'".'),void 0!==e.tagContainerMarker?e.tagContainerMarker=g:"string"==typeof e.version&&e.version.substring(e.version.length-5)!=="-"+g&&(e.version+="-"+g),e},h=function(e,t,a){return t.loadPhase===m&&t.source&&(r.logger.info("Calling custom script before settings."),t.source.call(i,a)),d(a,e||{}),t.loadPhase!==m&&t.source&&(r.logger.info("Calling custom script after settings."),t.source.call(i,a)),a},V=function(e,t){return l.isAudienceManagementEnabled(e)&&(t.loadModule("AudienceManagement"),r.logger.info("Initializing AudienceManagement module"),t.AudienceManagement.setup(e.moduleProperties.audienceManager.config)),t},C=(n=r.getExtensionSettings(),v(n.trackingCookieName)?u(n).then(b).then(f).then(_).then(h.bind(null,n.trackerProperties,n.customSetup||{})).then(V.bind(null,n)):o.reject("EU compliance was not acknowledged by the user."));e.exports=function(){return C}},name:"get-tracker",shared:!0},"adobe-analytics/src/lib/sharedModules/augmentTracker.js":{name:"augment-tracker",shared:!0,script:function(e,t,a){"use strict";var r=a("../helpers/augmenters");e.exports=function(e){r.push(e)}}},"adobe-analytics/src/lib/helpers/getNodeLinkText.js":{script:function(e){"use strict";var t=function(e){return e&&e.replace(/\s+/g," ").trim()},a=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i,r=function(e){return!(e&&e.nodeName&&e.nodeName.match(a))},n=function(e){var t=[],a=!1;return r(e)?(t.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach((function(e){var r=n(e);t=t.concat(r.supportedNodes),a=a||r.includesUnsupportedNodes}))):a=!0,{supportedNodes:t,includesUnsupportedNodes:a}},s=function(e,t,a){var r;return a&&a!==e.nodeName.toUpperCase()||(r=e.getAttribute(t)),r};e.exports=function(e){var a=t(e.innerText||e.textContent),r=n(e);if(!a||r.includesUnsupportedNodes){var o,i,l,c,d=[];r.supportedNodes.forEach((function(e){e.getAttribute&&(o=o||t(e.getAttribute("alt")),i=i||t(e.getAttribute("title")),l=l||t(s(e,"value","INPUT")),c=c||t(s(e,"src","IMG"))),e.nodeValue&&d.push(e.nodeValue)})),(a=t(d.join("")))||(a=t(o||i||l||c||""))}return a}}},"adobe-analytics/src/lib/helpers/settingsHelper.js":{script:function(e,t,a,r){"use strict";var n=a("@adobe/reactor-window"),s={LIB_TYPES:{MANAGED:"managed",PREINSTALLED:"preinstalled",REMOTE:"remote",CUSTOM:"custom"},MANAGED_LIB_PATHS:{APP_MEASUREMENT:"AppMeasurement.js",ACTIVITY_MAP:"AppMeasurement_Module_ActivityMap.js",AUDIENCE_MANAGEMENT:"AppMeasurement_Module_AudienceManagement.js"},getReportSuites:function(e){var t=e.production;return e[r.environment.stage]&&(t=e[r.environment.stage]),t.join(",")},isActivityMapEnabled:function(e){return!(e.libraryCode&&!e.libraryCode.useActivityMap&&!1===e.libraryCode.useActivityMap)},isAudienceManagementEnabled:function(e){var t=!1;return e&&e.moduleProperties&&e.moduleProperties.audienceManager&&e.moduleProperties.audienceManager.config&&n&&n._satellite&&n._satellite.company&&n._satellite.company.orgId&&(t=!0),t}};e.exports=s}},"adobe-analytics/src/lib/helpers/augmenters.js":{script:function(e){"use strict";e.exports=[]}},"adobe-analytics/src/lib/helpers/applyTrackerVariables.js":{script:function(e,t,a,r){"use strict";var n=a("@adobe/reactor-query-string"),s=a("@adobe/reactor-window"),o=/eVar([0-9]+)/,i=/prop([0-9]+)/,l=new RegExp("^(eVar[0-9]+)|(prop[0-9]+)|(hier[0-9]+)|campaign|purchaseID|channel|server|state|zip|pageType$"),c=function(e,t,a){return a.indexOf(e)===t},d=function(e,t,a){var r=Object.keys(t).filter(l.test.bind(l));return a&&r.push("events"),(r=r.concat((e.linkTrackVars||"").split(","))).filter((function(e,t){return"None"!==e&&e&&c(e,t,r)})).join(",")},u=function(e,t){var a=t.map((function(e){return e.name}));return(a=a.concat((e.linkTrackEvents||"").split(","))).filter((function(e,t){return"None"!==e&&c(e,t,a)})).join(",")},g=function(e,t,a){e[t]=a[t].join(",")},m=function(e,t,a){var r=a.dynamicVariablePrefix||"D=";a[t].forEach((function(t){var a;if("value"===t.type)a=t.value;else{var n=o.exec(t.value);if(n)a=r+"v"+n[1];else{var s=i.exec(t.value);s&&(a=r+"c"+s[1])}}e[t.name]=a}))},p={linkDownloadFileTypes:g,linkExternalFilters:g,linkInternalFilters:g,hierarchies:function(e,t,a){a[t].forEach((function(t){e[t.name]=t.sections.join(t.delimiter)}))},props:m,eVars:m,campaign:function(e,t,a){if("queryParam"===a[t].type){var r=n.parse(s.location.search);e[t]=r[a[t].value]}else e[t]=a[t].value},events:function(e,t,a){var r=a[t].map((function(e){var t=e.name;return e.id&&(t=[t,e.id].join(":")),e.value&&(t=[t,e.value].join("=")),t}));e[t]=r.join(",")}};e.exports=function(e,t){var a={};t=t||{},Object.keys(t).forEach((function(e){var r=p[e],n=t[e];r?r(a,e,t):a[e]=n})),a.events&&e.events&&e.events.length>0&&(a.events=e.events+","+a.events);var n=t&&t.events&&t.events.length>0,s=d(e,a,n);s&&(a.linkTrackVars=s);var o=u(e,t.events||[]);o&&(a.linkTrackEvents=o),r.logger.info('Applying the following properties on tracker: "'+JSON.stringify(a)+'".'),Object.keys(a).forEach((function(t){e[t]=a[t]}))}}},"adobe-analytics/src/lib/helpers/loadLibrary.js":{script:function(e,t,a,r){"use strict";var n=a("@adobe/reactor-load-script"),s=a("@adobe/reactor-window"),o=a("@adobe/reactor-promise"),i=a("./settingsHelper"),l=a("./pollHelper"),c=function(e,t){if(!s.s_gi)throw new Error("Unable to create AppMeasurement tracker, `s_gi` function not found."+s.AppMeasurement);r.logger.info('Creating AppMeasurement tracker with these report suites: "'+t+'"');var a=s.s_gi(t);return e.libraryCode.scopeTrackerGlobally&&(r.logger.info("Setting the tracker as window.s"),s.s=a),a},d=function(e){var t=[];switch(e.libraryCode.type){case i.LIB_TYPES.MANAGED:t.push(r.getHostedLibFileUrl(i.MANAGED_LIB_PATHS.APP_MEASUREMENT)),i.isActivityMapEnabled(e)&&t.push(r.getHostedLibFileUrl(i.MANAGED_LIB_PATHS.ACTIVITY_MAP));break;case i.LIB_TYPES.CUSTOM:t.push(e.libraryCode.source);break;case i.LIB_TYPES.REMOTE:t.push("https:"===s.location.protocol?e.libraryCode.httpsUrl:e.libraryCode.httpUrl)}if(i.isAudienceManagementEnabled(e)){var a={namespace:s._satellite.company.orgId};e.moduleProperties.audienceManager.config.visitorService=a,t.push(r.getHostedLibFileUrl(i.MANAGED_LIB_PATHS.AUDIENCE_MANAGEMENT))}return t},u=function(e){return o.all(d(e).map((function(e){return r.logger.info("Loading script: "+e),n(e)})))},g=function(e,t){if(e.libraryCode.accounts)if(t.sa){var a=i.getReportSuites(e.libraryCode.accounts);r.logger.info('Setting the following report suites on the tracker: "'+a+'"'),t.sa(a)}else r.logger.warn("Cannot set report suites on tracker. `sa` method not available.");return t},m=function(e){if(s[e])return r.logger.info('Found tracker located at: "'+e+'".'),s[e];throw new Error('Cannot find the global variable name: "'+e+'".')};e.exports=function(e){var t=u(e);switch(e.libraryCode.type){case i.LIB_TYPES.MANAGED:var a=i.getReportSuites(e.libraryCode.accounts);return t.then(c.bind(null,e,a));case i.LIB_TYPES.PREINSTALLED:return t.then(l.poll.bind(null,s,e.libraryCode.trackerVariableName)).then(g.bind(null,e));case i.LIB_TYPES.CUSTOM:case i.LIB_TYPES.REMOTE:return t.then(m.bind(null,e.libraryCode.trackerVariableName)).then(g.bind(null,e));default:throw new Error("Cannot load library. Type not supported.")}}}},"adobe-analytics/src/lib/helpers/generateVersion.js":{script:function(e){"use strict";var t=8,a=function(e){return e.getUTCDate().toString(36)},r=function(e){return e.substr(e.length-1)},n=function(e){return Math.floor(e.getUTCHours()/t)},s=function(e){var t=(e.getUTCMonth()+1+12*n(e)).toString(36);return r(t)},o=function(e){return(e.getUTCFullYear()-2010).toString(36)};e.exports=function(e){var t=new Date(e);if(isNaN(t))throw new Error("Invalid date provided");return("L"+o(t)+s(t)+a(t)).toUpperCase()}}},"adobe-analytics/src/lib/helpers/pollHelper.js":{script:function(e,t,a,r){"use strict";var n=a("@adobe/reactor-promise"),s=40,o=250,i=function(e,t,a){r.logger.info('Found property located at: "'+t+'"].'),e(a)},l=function(e,t){return new n((function(a,r){if(e[t])return i(a,t,e[t]);var n=1,l=setInterval((function(){e[t]&&(i(a,t,e[t]),clearInterval(l)),n>=s&&(clearInterval(l),r(new Error('Bailing out. Cannot find the variable name: "'+t+'"].'))),n++}),o)}))};e.exports={poll:function(e,t){return r.logger.info('Waiting for the property to become accessible at: "'+t+'"].'),l(e,t)}}}}}},"acronym-gtag.js":{displayName:"Google Global Site Tag (gtag)",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPae09e123f4e549de998be67c85035301/",settings:{accounts:{1656044628116:{id:"1656044628116",name:"BMW TR",type:"ga",options:[],accounts:{production:"UA-94000649-1"},settings:{linker:{accept_incoming:!0}},custom_map:[]}},configCode:function(){},functionName:"",dataLayerName:"gaDataLayer",displayFeatures:!0},modules:{"acronym-gtag.js/src/lib/actions/pageview.js":{name:"send-gtag.js-pageview",displayName:"Send a page view",script:function(e,t,a,r){"use strict";e.exports=function(e){var t=a("../helpers/loadGtag")(),n=a("../helpers/castOptionTypes"),s=a("../helpers/getAccountId"),o=r.getExtensionSettings();if("object"==typeof e.accounts&&null!==e.accounts&&Object.keys(e.accounts).length>0){for(var i in e.accounts)if(e.accounts.hasOwnProperty(i)&&(!0===e.accounts[i].enabled||"true"===e.accounts[i].enabled)&&"object"==typeof o.accounts[i]){var l=o.accounts[i],c=s(l),d=l.settings||{};(l.options||[]).forEach((function(e){d[e[0]]=e[1]})),(l.custom_map||[]).forEach((function(e){d.custom_map=d.custom_map||{},d.custom_map[e[0]]=e[1]})),(e.accounts[i].options||[]).forEach((function(e){d[e[0]]=e[1]})),t("config",c,d=n(d)),r.logger.log("page view fired for account "+c+" with the options:",JSON.stringify(d))}}else r.logger.warn("no accounts enabled for this page view action")}}},"acronym-gtag.js/src/lib/helpers/loadGtag.js":{script:function(e,t,a,r){"use strict";e.exports=function(){
var e=r.getExtensionSettings(),t=e.dataLayerName||"dataLayer",n=e.functionName||"gtag",s=a("@adobe/reactor-window"),o=a("@adobe/reactor-load-script"),i=a("../helpers/getAccountId"),l=a("../helpers/castOptionTypes"),c="";if(s[n]||(s[t]=s[t]||[],s[n]=function(){s[t].push(arguments)},s[n]("js",new Date)),!_satellite.getVar("__acronym_gtag_loaded")){if(_satellite.setVar("__acronym_gtag_loaded",!0),e.displayFeatures||(s[n]("set",{allow_ad_personalization_signals:!1}),r.logger.log("Display features are disabled")),"object"==typeof e.accounts&&null!==e.accounts&&Object.keys(e.accounts).length>0){for(var d in e.accounts)if(e.accounts.hasOwnProperty(d)){var u=e.accounts[d],g=u.settings||{};c=i(u),"object"==typeof u.custom_map&&u.custom_map.length&&(g.custom_map=g.custom_map||{},u.custom_map.forEach((function(e){g.custom_map[e[0]]=e[1]}))),(u.options||[]).forEach((function(e){g[e[0]]=e[1]})),g.send_page_view=!1,g=l(g),s[n]("config",c,g),r.logger.log("account "+c+" was loaded with the options:",JSON.stringify(g))}if("function"==typeof e.configCode)try{e.configCode(s[n],s[t])}catch(e){r.logger.error("Custom config code error:",e)}}else r.logger.warn("There are no accounts setup");var m="gtag.js library";r.logger.log("loading "+m),o("https://www.googletagmanager.com/gtag/js?id="+c+"&l="+t).then((function(){r.logger.log(m+" successfully loaded")}),(function(){r.logger.error(m+" could not be loaded")}))}return s[n]}},name:"get-gtag",shared:!0},"acronym-gtag.js/src/lib/helpers/castOptionTypes.js":{script:function(e){"use strict";e.exports=function(e){var t={bool:function(e){return"string"==typeof e?"true"===e:Boolean(e)},int:function(e){var t=parseInt(e);return isNaN(t)?0:t},float:function(e){var t=parseFloat(e);return isNaN(t)?0:t},csv:function(e){return"string"==typeof e?e.split(","):e},custom_map:function(e){var t={};return"string"==typeof e?e.split(",").forEach((function(e){var a=e.split(":");2===a.length&&(t[a[0]]=a[1])})):"object"==typeof e&&(t=e),t}},a={accept_incoming:t.bool,allow_ad_personalization_signals:t.bool,anonymize_ip:t.bool,checkout_step:t.int,cookie_expires:t.int,custom_map:t.custom_map,event_timeout:t.int,fatal:t.bool,levels:t.int,link_attribution:t.bool,linker:{domains:t.csv,accept_incoming:t.bool,decorate_forms:t.bool},non_interaction:t.bool,value:t.float};return Object.keys(e).forEach((function(t){"function"==typeof a[t]?e[t]=a[t](e[t]):"object"==typeof a[t]&&"object"==typeof e[t]&&null!==e[t]&&Object.keys(e[t]).forEach((function(r){"function"==typeof a[t][r]&&(e[t][r]=a[t][r](e[t][r]))}))})),e}}},"acronym-gtag.js/src/lib/helpers/getAccountId.js":{script:function(e,t,a,r){"use strict";e.exports=function(e,t){return t||(t=r.environment.stage),"string"==typeof e.accounts[t]&&""!==e.accounts[t]?e.accounts[t]:e.accounts.production}}}}}},company:{orgId:"B52D1CFE5330949C0A490D45@AdobeOrg",dynamicCdnEnabled:!1},property:{name:"BMW Blueprint 1",settings:{domains:["www.bmw.de"],undefinedVarsReturnEmpty:!0,ruleComponentSequencingEnabled:!1},id:"PR7cfc1ae9fd004c35b6ba572bc626e881"},rules:[{id:"RLf96fd502f9cc4d2e81aa503ec90741c3",name:"TPT - Kuwait - AEM - Snapchat - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Dubai - Multiple - Twitter",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-kuwait.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf8e8012aa83e4aac83cf97583e9f38d2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5f3590bed04042f4a5cff9dc7a91df60",name:"TPT - MA - AEM - Adwords - Series X1 Tariff Brochure - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'div.show-for-large-up > ul > li:nth-child(2) > a[href="/content/dam/bmw/marketB4R1/bmw_ma/all-models/pricelists/THE-X1_oct2020.pdf.asset.1603713677378.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/fr/all-models/x-series/X1/2019/apercus-de-la-bmw-x1.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC15e38deff7424ac28385a3483f3c416a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLf4a238927a6b4fbd8a37178986dd0b58",name:"DCR - Confirm Save Configuration",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"confirm_save_configuration"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.setVar("useVCOPage",!0),_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("pr_att_mmdr");t.eVar16="Open Layer~Confirm Save Configuration~VCO module~Not available~"+_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01")+"~Not available",t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:Confirm Save Configuration";var n=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");t.eVar63=n;var s=t.eVar16.split("~");t.prop16=s[1]+"~"+s[2]+"~"+s[5],a+="event91,event27,event209,event28:"+_satellite.getVar("SessionID")+r+",",$(".h5vco-vco-request-container input[type=checkbox]").is(":checked")?(a+="event359,",window.check=!0):window.check=!1;var o=_satellite.getVar("pr_pro_productID").split("::").join("|");o=o.substring(o.indexOf("|")+1),t.eVar9=r,t.eVar10=r,t.eVar34="VCO: Confirm Save Configuration",t.eVar36=o,""==r&&(r="not set");var i="",l="";i+=";"+r+";1;"+_satellite.getVar("pr_att_sellingPriceTotal")+";"+l+";eVar52="+_satellite.getVar("s_products_vco_v52")+",",t.eVar51=_satellite.getVar("s_products_vco_v52"),""!=(i+=_satellite.getVar("s_products_vco_v53")+",")&&(i=i.slice(0,-1),t.products=i),_satellite.setVar("useVCOPage",!1),t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar36,eVar34,eVar51,eVar52,eVar53,eVar58",t.linkTrackEvents+="event91,event76,event77,event78,event203,event204,event210,event211,event212,event213,event214,event215,event216,event217,event218,event219,event220,event221,event222,event223,event224,event225,event112,event27,event28,event209,event359",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"confirm save",linkType:"o"}}]},{id:"RL8ceef10ca1534cce94e6fb8b2a2111e7",name:"TPT - Kuwait - AEM - Twitter - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-kuwait.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc7b07889bc264b9e874685512b344af1-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2d039a39f7d14f7b91c4e8f563f48b6c",name:"TPT - HK - Multiple - Adwords",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - HK - Multiple - Adwords - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"HK"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmwhk.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2102e1c39ea84afaa7be6cbb916667b0-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5f68ac01ffa9458abc481b2b7d825a1a",name:"DCR - Need Analyzer interaction",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"need_analyzer_interaction"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=digitals2.tracking.api.getPageObject(digitals2.tracking.api.getCurrentPageIndex()),r=a.event.length-1,n=_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable(),s="Not available",o=_satellite.getVar("ev_att_componentHeadline"),i="Not available",l="Not available",c=_satellite.getVar("URLNoParam");"Call to Action"==a.event[r].eventInfo.eventAction&&(s=a.event[r].eventInfo.cause,l=a.event[r].eventInfo.target,i=a.event[r].eventInfo.eventName),("Change model"==a.event[r].eventInfo.eventName||"Share"==a.event[r].eventInfo.eventName||"Start again"==a.event[r].eventInfo.eventName||"More information"==a.event[r].eventInfo.eventName)&&(s=a.event[r].eventInfo.cause,l=a.event[r].eventInfo.target,i=a.event[r].eventInfo.eventName);var d=i+"~"+s+"~"+n+"~"+o+"~"+c+"~"+l,u="";t.eVar16=d;var g=d.split("~");t.prop16=g[1]+"~"+g[2]+"~"+g[5],t.eVar45+="~rn:Need Analyzer interaction",u+="event91,event998,event999,event118,",t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar45,eVar46,eVar34,eVar50,events",t.linkTrackEvents+="event91,event118,",u=u.slice(0,-1),t.events=u}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"need_analyzer_interaction",linkType:"o"}}]},{id:"RLc96d3134c22a42b88f35baea37db8759",name:"DCR - Ignition One TDA Form",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"Ignite_One_TDA"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{t.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),t.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),t.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),t.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l"),_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("hierarchyEvar").split("|");t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2");var n=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=n,t.eVar45+="~rn:Local Forms RFC",t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=r[0],t.prop2=r[1],t.prop3=r[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var s=_satellite.getVar("navEvarForPage").split("~");t.prop16=s[1]+"~"+s[2]+"~"+s[5],t.prop27="D=v3",a+="event91,",t.campaign=_satellite.getVar("campaignParameter"),"bmw.com.cn"==topLevelDomain&&(t.eVar64=_satellite.getVar("localCampaignVariable")),"brand-switch-tda"===_satellite.getVar("finalDataLayer").page.pageInfo.pageName?(a+="event158,event180,event77,",a+="event1:"+_satellite.getVar("SessionID")+"TDA,",t.eVar11="I/O Form|TDA|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|"+_satellite.getVar("ev_cat_subCategory04"),t.prop30="Start I/O TDA"):(a+="event159,event181,event78,",a+="event3:"+_satellite.getVar("SessionID")+"TDA,",t.eVar11="I/O Form|TDA|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|"+_satellite.getVar("ev_cat_subCategory04"),t.prop31="Finish I/O Form TDA"),t.linkTrackVars+="eVar6,eVar16,eVar17,eVar62,eVar64,eVar11,prop1,prop2,prop3,prop4,eVar6,eVar7,eVar15,eVar16,prop27,prop30,prop31",t.linkTrackEvents+="event91,event158,event159,event1,event3,event180,event181",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.log(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLc4c115a9defd49b496bb99d9dc9673b3",name:"TPT - PA - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT PA Adwords - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"PA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.pa",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC82191e8614fb478b9b90fb026a9c3476-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC426a8d6df5494a59a18afe2b8be9d755-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC54ff9fa1bf0e4ba786e9002f571ff8bc-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa354c3b11cca43e881c3a6c920888320",name:"DCR - Usabilla Tracking",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"Usabilla_AA_Tracking"},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC508cff482359496ea63809f3f8f42042-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL08d06b3c55624fd0b6613bc7841e2e7f",name:"TPT - ME - Offer Button - Facebook EBR",events:[{modulePath:"core/src/lib/events/click.js",settings:{anchorDelay:1e3,elementSelector:"a",elementProperties:[{name:"href",value:"https://www.bmw-me.com/en/local-content/offers-hub.html",valueIsRegex:!0}],bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/local-content/joyunleashed.html",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5a32f89b23df4650a65a03dc7d2b8975-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa0ff06e2da5b4deea1e996d553eb09b7",name:"W - BMW CN Registration Start",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"a.external-login-box__button-secondary",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"CN"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%pa_pag_pageName%",rightOperand:"my-bmw"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{t.linkTrackVars="eVar1,eVar2,eVar3,eVar4,eVar7,eVar12,eVar14,eVar44,eVar45,eVar48,eVar63,prop1,prop12,prop13, prop69,prop70,prop2,channel,prop31,eVar31,events",_satellite.getVar("SessionID");var a=_satellite.getVar("hierarchyEvar"),r=(_satellite.getVar("pa_pag_pageName"),_satellite.getVar("pageName")),n=_satellite.getVar("pa_pag_pageTitle"),s=_satellite.getVar("URL"),o=_satellite.getVar("URLNoParam"),i=_satellite.getVar("pa_pag_language"),l=_satellite.getVar("pathName"),c=_satellite.getVar("userMetaData"),d=_satellite.getVar("nonTechMetaData"),u=_satellite.getVar("nonTechMetaDataEvarAddon"),g=_satellite.getVar("techMetaData"),m=_satellite.getVar("server"),p=(_satellite.getVar("pr_att_mmdr"),_satellite.getVar("jcrPathLevel1"),_satellite.getVar("ev_eve_timestamp"));t.eVar1=a,t.eVar2=r,t.eVar3=n,t.eVar4=s,t.eVar7=i,t.eVar12=l,t.eVar14=c,t.eVar44=d+"~"+u,t.eVar45=g+"~rn:Registration Start",1!=_satellite.getVar("noInteractionCount")?t.eVar48="+1":_satellite.setVar("noInteractionCount",!1),t.eVar63=o;var v=_satellite.getVar("adobeRSID");t.account=v,t.server=m,t.prop12=p,t.prop13=d,t.prop69="Stage II",t.prop70="D=mid"}catch(e){_satellite.logger.log(e)}}},trackerProperties:{events:[{name:"event35"},{name:"event91"},{name:"event998"},{name:"event999"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"regi_Start",linkType:"o"}}]},{id:"RL65dc45ceaff541289c783989a20b6dd8",name:"TPT - MA - Multiple - Google Tracking EBR",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"a[title='T\xe9l\xe9charger la brochure des tarifs']",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCbbbb65acd7014bdbb6ddad92af80c7b2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL31f7bf8e9cd24a64a45b6b023de6bf2e",name:"DCR - Online TDA",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_available_option"},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_add_to_calendar"},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_back"},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_cta_click"},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_link_click"},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_next"},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_next_month"},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_select_location"},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_select_vehicle"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("ev_eve_effect"),r=_satellite.getVar("ev_eve_cause"),n=_satellite.getVar("ev_eve_eventAction"),s=_satellite.getVar("ev_eve_eventName"),o=_satellite.getVar("ev_att_componentName"),i=_satellite.getVar("ev_eve_target"),l=_satellite.getVar("ev_eve_element"),c=_satellite.getVar("ev_att_mmdr_NBO"),d=_satellite.getVar("ev_eve_timestamp");""!=d&&null!=d||(d="Not Set"),""!=c&&null!=c||(c="Not Set"),""!=l&&null!=l||(l="Not Set"),""!=i&&null!=i||(i="Not Set"),""!=o&&null!=o||(o="Not Set"),""==s||null==s?s="Not Set":"0"==s&&(s="00"),""!=n&&null!=n||(n="Not Set"),""!=a&&null!=a||(a="Not Set"),""!=r&&null!=r||(r="Not Set");var u=_satellite.getVar("hierarchyEvar").split("|");t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],t.eVar16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop12=d,t.eVar112=n+"~"+s,t.eVar8=t.eVar10=t.prop8=t.prop10=c,t.eVar117=a+"~"+r;var g="not set",m="not set";"Online TDA Select Vehicle"==n&&"Step 01 Vehicle & Location"==a||"Online TDA Select Location"==n||"Online TDA Next"==n&&"Next - Vehicle & Location"==s?(g="Vehicle & Location",m="Step 01"):"Online TDA Select Vehicle"==n&&"Step 02 Dealer & Test Drive Vehicle"==a||"Online TDA Next"==n&&"Next - Dealer & Test Drive Vehicle"==s||"Online TDA Back"==n&&"Step 02: Dealer & Test Drive Vehicle"==r?(g="Dealer & Test Drive Vehicle",m="Step 02"):"Appointments available"==n||"Online TDA Next Month"==n||"Online TDA Back"==n&&"Step 03: Date & Time"==r||"Online TDA Next"==n&&"Next - Date & Time"==s?(g="Date & Time",m="Step 03"):"Online TDA Link Click"==n||"Online TDA Add to Calendar"==n||"Online TDA Back"==n&&"Step 04: Confirm"==r?(g="Login And Confirm",m="Step 04"):g=n||"not set",t.eVar11="Central Form|Online TDA|tda_online_booking|"+m+"|not set|"+g,t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set",t.eVar52=_satellite.getVar("s_products_iFrame_v52"),t.eVar44=_satellite.getVar("nonTechMetaData"),t.events+="event91",t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12,eVar112,eVar117,eVar11,eVar52,eVar41,eVar44",t.linkTrackEvents+="event91"}catch(e){_satellite.logger.error("Error in DCR - Online TDA  - "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Online TDA",linkType:"o"}}]},{id:"RLcaad4ceeb62f41298298229ccf3c29c4",name:"DCR - Stock Locator Event",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"stock-locator"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{var a="";if(null!=e.detail){var r=e.detail[1];_satellite.logger.log("Getting datalayer from DCR page rule rule",r)}else _satellite.logger.log("Getting datalayer from normal method"),r=digitals2.tracking.api.getPageObject(digitals2.tracking.api.getCurrentPageIndex());if(null!=r.dealer&&r.dealer.length>0){var n=r.dealer.length-1,s=r.dealer[n].dealerInfo.dealerID,o=r.dealer[n].dealerInfo.dealerName,i=r.dealer[n].dealerInfo.outletID;void 0===o&&void 0===s&&void 0===i||(t.eVar41=o+"|"+s+"_"+i)}if(null!=r.event&&r.event.length>0){var l,c,d=r.event.length-1,u=r.event[d].eventInfo.eventAction,g=r.event[d].eventInfo.eventName;r.event[d].attributes&&r.event[d].attributes.relatedComponent?(l=r.event[d].attributes.relatedComponent.componentInfo.componentName,c=r.event[d].attributes.relatedComponent.componentInfo.componentHeadline):r.component.length>0?(l=r.component[r.component.length-1].componentInfo.componentName,c=r.component[r.component.length-1].componentInfo.componentHeadline):(l="",c="");var m=_satellite.getVar("URL"),p=r.event[d].attributes.requestedURL,v=r.event[d].eventInfo.effect,b=r.event[d].eventInfo.cause,f=r.event[d].eventInfo.timestamp,_=r.event[d].attributes.searchResults;if(void 0!==_&&(t.eVar22="na~"+_),t.eVar16=t.prop16=u+"~"+g+"~"+l+"~"+c+"~"+m+"~"+p+"~"+v+"~"+b,t.eVar117=v+"~"+b,-1!=v.indexOf("/ssl/requests/rfo")||-1!=v.indexOf("/topics/offerte")||-1!=v.indexOf("contact.bmw.fr")?a+="event413,":"sl > RFO CTA clicked"!=v&&"sl > Call Dealer CTA clicked"!=v||(a+="event413,"),null!=r.event[d].attributes&&null!=r.event[d].attributes.search&&r.event[d].attributes.search.length>0){var h=r.event[d].attributes.search,V="";for(var C in h)h.hasOwnProperty(C)&&(V+="search;search;;;;eVar30=sl:"+h[C].label+"~st:"+h[C].term+"~ss:"+h[C].state+"~su:"+h[C].unit+",");t.products=V}else t.products="search;search;;;;eVar30=sl:not set~st:not set~ss:not set~su:not set"}if(null!=r.product&&r.product.length>0){var y=r.product.length-1,P=r.product[y].attributes.internalCode||r.product[y].attributes.mmdr,w=r.product[y].attributes.modelName||r.product[y].attributes.productName,R=r.product[y].attributes.modelCode,j=r.product[y].attributes.series,A=r.product[y].attributes.fuelType;t.prop10=t.eVar10=P,t.eVar51="ps:Car~pi:"+(P||"not set")+"~pn:"+(w||"not set")+"~mc:"+(R||"not set")+"~se:"+(j||"not set")+"~bt:na~yl:na~bp:na~op:na~tp:na~sp:na~mr:"+(P||"not set")+"~co:not set~en:na~fu:"+(A||"not set")+"~cu:na~ms:na",r.product[y].productInfo.productID;var T=r.product[y].productInfo.productName,O=r.product[y].productInfo.manufacturer,D=r.product[y].category.primaryCategory,I=r.product[y].category.subCategory1,E=(r.product[y].category||"").subCategory2||"not set",S=r.product[y].category.productType,k=r.product[y].attributes.productionYear,L=r.product[y].attributes.yearOfRegistration;"sl > vehicle"==(((r.page||"").pageInfo||"").pageName||"")&&(document.querySelectorAll("div[data-component='rfx-section']")&&document.querySelectorAll("div[data-component='rfx-section']")[0]&&document.querySelectorAll("div[data-component='rfx-section']")[0].children.length>1?E=document.querySelectorAll("div[data-component='rfx-section']")[0].children[1].href.indexOf("/checkout/")>-1?"dcs ready":"not ready for dcs":document.querySelectorAll("div[data-component='rfx-section']")&&document.querySelectorAll("div[data-component='rfx-section']")[0]&&1==document.querySelectorAll("div[data-component='rfx-section']")[0].children.length?E="not ready for dcs":document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0]&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement.children&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement.children.length>1?E=document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement.children[1].href.indexOf("/checkout/")>-1?"dcs ready":"not ready for dcs":document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0]&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement.children&&1==document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement.children.length&&(E="not ready for dcs")),t.eVar124="na~"+(T||"not set")+"~"+(O||"not set")+"~"+(D||"not set")+"~"+(I||"not set")+"~"+(S||"not set")+"~"+(P||"not set")+"~"+(R||"not set")+"~"+(w||"not set")+"~"+(k||"not set")+"~"+(L||"not set")+"~"+(j||"not set")+"~sc2:"+(E||"not set")}if(t.pageName=r.page.pageInfo.pageName,t.eVar3=r.page.pageInfo.pageID,null==r.page.pageInfo.pageInstanceId?t.eVar1="not set|not set|not set|not set|"+r.page.pageInfo.pageName:t.eVar1=_satellite.getVar("hierarchyEvar"),t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg"),t.eVar15="D=v1",t.prop27="D=v3",t.prop12=f,t.eVar2=r.page.pageInfo.pageName,t.eVar4=document.location.href,t.prop4="D=v4",t.eVar6=document.referrer,t.prop6="D=v6",t.eVar7=t.prop7=r.page.pageInfo.language,void 0!==t.eVar7&&t.eVar7.indexOf("_")>-1&&(t.eVar7=t.prop7=t.eVar7.replace("_","-")),t.eVar44=_satellite.getVar("nonTechMetaData")+"~"+_satellite.getVar("nonTechMetaDataEvarAddon"),(t.eVar45||"").indexOf("Page Load")>-1&&(t.eVar45=t.eVar45.replace("rn:Page Load","rn:Stock Locator")),t.prop46=(((r||"").page||"").category||"").primaryCategory||"",t.prop47=(((r||"").page||"").category||"").subCategory1||"",t.prop48=(((r||"").page||"").category||"").subCategory2||"",t.prop70="D=mid",t.eVar71="pid:"+((((r||"").page||"").pageInfo||"").pageID||"")+"~pty:"+((((r||"").page||"").category||"").pageType||"")+"~var:"+((((r||"").page||"").pageInfo||"").variant||"")+"~ver:"+((((r||"").page||"").pageInfo||"").version||""),"sl > errors"!=g&&"sl > ss: errors"!=g&&"sl > ss : warning"!=g&&"error"!=g||(a+="event95,",t.eVar69=r.event[r.event.length-1].attributes.errorCode+"~"+r.event[r.event.length-1].eventInfo.effect),null!=r.event&&r.event.length>0&&null!=r.event[d].attributes.solutionSpecific){var x=r.event[d].attributes.solutionSpecific.slCarBudgetMax,N=r.event[d].attributes.solutionSpecific.slCarBudgetMin,F=r.event[d].attributes.solutionSpecific.slExteriorColor,M=r.event[d].attributes.solutionSpecific.slFuelType,q=r.event[d].attributes.solutionSpecific.slInteriorColor,U=r.event[d].attributes.solutionSpecific.slModelName,B=r.event[d].attributes.solutionSpecific.slMonthlyBudgetMax,H=r.event[d].attributes.solutionSpecific.slMonthlyBudgetMin,G=r.event[d].attributes.solutionSpecific.slLocation,z=r.event[d].attributes.solutionSpecific.slOptions,W=r.event[d].attributes.solutionSpecific.slSeries,K=r.event[d].attributes.solutionSpecific.slTransmission;t.eVar123=x+"~"+N+"~"+F+"~"+M+"~"+q+"~"+U+"~"+B+"~"+H+"~"+G+"~"+z+"~"+W+"~"+K}("sl > search filter"==g&&"sl > search"==t.pageName||"search"==g)&&(a+="event415,"),a+="event91,",t.linkTrackVars+=",eVar117,prop15,eVar22,eVar124,eVar45,eVar44,eVar62,prop27,prop4,prop6,prop7,prop70,eVar10,eVar3,eVar16,prop10,prop16,prop12,eVar30,eVar41,eVar2,eVar4,eVar6,eVar7,eVar51,eVar69,eVar123,prop46,prop47,prop48,eVar71,products,eVar1",t.linkTrackEvents+="event91,event95,event413,event415,",a=a.slice(0,-1),t.events=a}catch(e){_satellite.logger.error("Error in DCR - Stock Locator: "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",
linkName:"stocklocator",linkType:"o"}}]},{id:"RL4700265367c94ab4a6935c6e442defac",name:"TPT - Oman - AEM - Linkedin - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT re-trigger :  TPT - Oman - Multiple - Linkedin ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7bfaa902a7d341fb8b665aabb87c260c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL11257aa196fd4ef7938aa922f66f24d2",name:"TPT - CR - AEM - Adwords - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - CR - Multiple - facebook",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"CR"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.cr",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5595b16b75544db8a1274bec1ee1e35a-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8ff200debae844db8a7356a1e6965ce7-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC1baceeaada23474db87c4f66dedcc80e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd261a993e4004d96a6c3cca413fd3413",name:"TPT - OM - Multiple - Adwords",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - OM Adwords - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"OM"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"local-content/5-series-sedan.html",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe9c8b1aa3795426b992728be4b603390-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL64725df2ceb1455489cdb5bef36c042b",name:"TPT - CO - All pages - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - CO - Multiple - facebook",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"CO"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.co",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4b4dd9ea84af4034a69d4fec1241b6e6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdce71d357e354a71b6b1485e856d7e3c",name:"TPT - Kuwait - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"KW"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kuwait.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf2bbf68de6fc45a3ab3b7c2da3e4d501-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL476a91e1b91e4f9683b2e1aa8df46434",name:"TPT - EG - AEM - Adwords - 5 Series Download Price List - EBR - p15[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'.cta > a[href="/content/dam/bmw/marketEG/bmw-eg_com/All%20models/brochoure_2018/September/5-series-final.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-egypt.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/all-models/5-series/sedan/2020/bmw-5-series-sedan-highlights.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0480410a463642ddb3e3b9531ed85bcc-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2e7b400565c74a6185cbaa9325ffa2ea",name:"DCR - Error",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"error"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){_satellite.logger.info("DATA LAYER EVENT:");var a=_satellite.getVar("finalDataLayer");_satellite.logger.info(JSON.stringify(a.event[a.event.length-1],null,"\t")),_satellite.logger.info("DATA LAYER COMPONENT (dlo):"),_satellite.logger.info(JSON.stringify(a.component[0],null,"\t")),_satellite.getVar("defaultVars");var r="";if(t.eVar45+="~rn:Error",r+="event95,",""!=_satellite.getVar("ev_eve_eventName")||""!=_satellite.getVar("ev_eve_cause")?t.eVar69=_satellite.getVar("ev_eve_eventName")+": "+_satellite.getVar("ev_eve_cause"):(t.eVar69=_satellite.getVar("pa_pag_pageName"),t.pageName="",t.pageType="errorPage"),"VCO"===_satellite.getVar("ev_att_componentName")){var n=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");if(t.eVar63=n,_satellite.getVar("finalDataLayer").product.length>0){var s=_satellite.getVar("pr_pro_productID").split("::").join("|");s=s.substring(s.indexOf("|")+1),t.eVar9=_satellite.getVar("pr_att_mmdr"),t.eVar10=_satellite.getVar("pr_att_mmdr"),t.eVar34="VCO: Error",t.eVar36=s,t.eVar46=_satellite.getVar("pa_cat_subCategory01")+"|"+_satellite.getVar("pa_pag_pageName");var o="";o+=";"+_satellite.getVar("pr_att_mmdr")+";1;"+_satellite.getVar("pr_att_sellingPriceTotal")+";;eVar52="+_satellite.getVar("s_products_vco_v52")+",",t.eVar51=_satellite.getVar("s_products_vco_v52"),""!=(o+=_satellite.getVar("s_products_vco_v53")+",")&&(o=o.slice(0,-1),t.products=o)}}r=r.slice(0,-1),t.events+=r,t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar36,eVar46,eVar34,eVar51,eVar52,eVar53,eVar69",t.linkTrackEvents+="event95"}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"error",linkType:"o"}}]},{id:"RL8ee59195be0c4e7280092c5a82c81159",name:"DCR - Online TDA Finish",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_finish"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("ev_eve_effect"),r=_satellite.getVar("ev_eve_cause"),n=_satellite.getVar("ev_eve_eventAction"),s=_satellite.getVar("ev_eve_eventName"),o=_satellite.getVar("ev_att_componentName"),i=_satellite.getVar("ev_eve_target"),l=_satellite.getVar("ev_eve_element"),c=_satellite.getVar("ev_att_mmdr_NBO"),d=_satellite.getVar("ev_eve_timestamp");""!=d&&null!=d||(d="Not Set"),""!=c&&null!=c||(c="Not Set"),""!=l&&null!=l||(l="Not Set"),""!=i&&null!=i||(i="Not Set"),""!=o&&null!=o||(o="Not Set"),""!=s&&null!=s||(s="Not Set"),""!=n&&null!=n||(n="Not Set"),""!=a&&null!=a||(a="Not Set"),""!=r&&null!=r||(r="Not Set");var u=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],t.eVar16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+_satellite.getVar("ev_eve_effect")+"~"+r+"~"+l,t.prop12=d,t.eVar112=n+"~"+s,t.eVar117=a+"~"+r,t.eVar67=r,null==_satellite.getVar("ev_att_dealerId")||""==_satellite.getVar("ev_att_dealerId"))var g="not available";else g=_satellite.getVar("ev_att_dealerId");if(null==_satellite.getVar("ev_att_outletID")||""==_satellite.getVar("ev_att_outletID"))var m="not available";else m=_satellite.getVar("ev_att_outletID");t.eVar13="not available|"+g+"|"+m,t.eVar8=t.eVar10=t.prop8=t.prop10=c,t.eVar45+="~rn:Online TDA Finish",t.eVar11="Online TDA Finish"===n?"Central Form|Online TDA|tda_online_booking|Finish|not set|not set":"Central Form|Online TDA|tda_online_booking|"+n+"|not set|not set",t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set",t.eVar52=_satellite.getVar("s_products_iFrame_v52"),t.eVar44=_satellite.getVar("nonTechMetaData"),t.events+="event91,event285,event286",t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12,eVar112,eVar13,eVar45,eVar117,eVar67,eVar11,eVar52,eVar41,eVar44",t.linkTrackEvents+="event91,event285,event286"}catch(e){_satellite.logger.error("Error in DCR - Online TDA Finish: "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RL22a5a4fb8eba4e1db8d5eea87c0a8e46",name:"TPT - Abu Dhabi - AEM - Snapchat - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-abudhabi.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC557107ffeeed41e08ad3e85b1cdebdae-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8ba5713c1e37477b819d86efa0fd8fd4",name:"TPT - MA - All Pages - Google Tracking",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: Google Pixel ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC6775bf269f834e30bacadab6208b31d9-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC66cec9d9cf634590a2f2e1a94648d09b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8b2eb7aad7894ffd8cecc16bde7638d6",name:"DCR - UK - iFrame - AA - DC Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_dc"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - UK - iFrame - AA - DC Forms",t.eVar44=_satellite.getVar("nonTechMetaData");var r=_satellite.getVar("navEvarForClicks").split("~");t.prop16=r[1]+"~"+r[2]+"~"+r[5],a+="event91,";var n="",s=_satellite.getVar("ev_att_mmdr"),o=_satellite.getVar("pr_att_mmdr");n=""!=s&&"mmdr"!=s?s:""!=o?o:"not set";var i=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",l=_satellite.getVar("s_products_iFrame_v52"),c=_satellite.getVar("s_products_vco_v53"),d="";d+=";"+n+";1;"+i+";event112="+i+";eVar52="+l+",",t.eVar51=l,""!=(d+=c+",")&&(d=d.slice(0,-1),t.products=d);var u=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],"Form Start"===_satellite.getVar("ev_eve_eventName"))a+="event1:"+_satellite.getVar("SessionID")+"ROI,",a+="event2:"+_satellite.getVar("SessionID")+"ROI,",a+="event96,event176,",a+="event97:"+_satellite.getVar("SessionID")+",",t.eVar11="Local Form|ROI|"+_satellite.getVar("ev_cat_subCategory02")+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start ROI";else if("Form Success"===_satellite.getVar("ev_eve_eventName")){_satellite.getVar("functionList");var g=_satellite.getVar("ev_att_dealerName"),m=_satellite.getVar("ev_att_dealerID");a+="event3:"+_satellite.getVar("SessionID")+"ROI,",a+="event4:"+_satellite.getVar("SessionID")+"ROI"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",a+="event98,event177,",a+="event99:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar11="Local Form|ROI|"+_satellite.getVar("ev_cat_subCategory02")+"|Finish|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),""!=g&&null!=g||(g="not set"),""!=m&&null!=m||(m="not set"),"not set"==g&&"not set"==m||(t.eVar13=g+"|"+m),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish ROI"}else"Local Form Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event138,event139,",t.eVar11="Local Form|ROI|"+_satellite.getVar("ev_cat_subCategory02")+"|Interaction|not set"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|ROI|"+_satellite.getVar("ev_cat_subCategory02")+"|First Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|ROI|"+_satellite.getVar("ev_cat_subCategory02")+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":(t.abort=!0,_satellite.logger.log("aborting 1"));t.linkTrackVars+="eVar16,prop16,eVar11,prop1,prop2,prop3,prop30,prop31,eVar10,eVar13,eVar67,eVar51,eVar52,products,eVar44",t.linkTrackEvents+="event91,event1,event2,event3,event4,event96,event97,event98,event99,event176,event177,event138,event139,event295",a=a.slice(0,-1),t.events+=a}catch(e){var p={from:"AA",type:"DCR",name:"DC Forms"};_satellite.logger.error(e,p)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RL6f91d66efd9d4646be5592a6f5bcce36",name:"DCR - Close Navigation",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"close_navigation"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals",caseInsensitive:!0},leftOperand:"%isSavingsModeApplicable%",rightOperand:"false"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("ev_eve_timestamp");t.eVar45+="~rn:Close Navigation",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=a;var r=_satellite.getVar("ev_eve_navigationClose");t.eVar111=r,"uxn_main_navigation"==_satellite.getVar("ev_att_componentName")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_element")),t.linkTrackVars+="eVar16,eVar45,eVar54,eVar111,prop16,prop12",t.linkTrackEvents+="event91,event998,event999",t.events="event91,event998,event999"}catch(e){_satellite.logger.error(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"%ev_eve_eventName%",linkType:"o"}}]},{id:"RL7ac6d54d8c484b6cbd5a099df7bbb170",name:"DCR - Online TDA Select Dealer",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_select_dealer"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("ev_eve_effect"),r=_satellite.getVar("ev_eve_cause"),n=_satellite.getVar("ev_eve_eventAction"),s=_satellite.getVar("ev_eve_eventName"),o=_satellite.getVar("ev_att_componentName"),i=_satellite.getVar("ev_eve_target"),l=_satellite.getVar("ev_eve_element"),c=_satellite.getVar("ev_att_mmdr_NBO"),d=_satellite.getVar("ev_eve_timestamp");if(""!=d&&null!=d||(d="Not Set"),""!=c&&null!=c||(c="Not Set"),""!=l&&null!=l||(l="Not Set"),""!=i&&null!=i||(i="Not Set"),""!=o&&null!=o||(o="Not Set"),""!=s&&null!=s||(s="Not Set"),""!=n&&null!=n||(n="Not Set"),""!=a&&null!=a||(a="Not Set"),""!=r&&null!=r||(r="Not Set"),null==_satellite.getVar("ev_eve_eventName")||""==_satellite.getVar("ev_eve_eventName"))var u="not available";else u=_satellite.getVar("ev_eve_eventName");if(null==_satellite.getVar("ev_att_dealerId")||""==_satellite.getVar("ev_att_dealerId"))var g="not available";else g=_satellite.getVar("ev_att_dealerId");if(null==_satellite.getVar("ev_att_outletID")||""==_satellite.getVar("ev_att_outletID"))var m="not available";else m=_satellite.getVar("ev_att_outletID");var p=_satellite.getVar("hierarchyEvar").split("|");t.prop1=p[0],t.prop2=p[1],t.prop3=p[2],t.eVar16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop12=d,t.eVar112=n+"~"+s,t.eVar13=u+"|"+g+"|"+m,t.eVar8=t.eVar10=t.prop8=t.prop10=c,t.eVar45+="~rn:Online TDA Select Dealer",t.eVar117=a+"~"+r;var v="not set",b="not set";"Online TDA Select Dealer"==n&&(v="Dealer & Test Drive Vehicle",b="Step 02"),t.eVar11="Central Form|Online TDA|tda_online_booking|"+b+"|not set|"+v,t.eVar41=u+"|"+g+"|"+m,t.eVar52=_satellite.getVar("s_products_iFrame_v52"),t.eVar44=_satellite.getVar("nonTechMetaData"),t.events+="event91",t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12,eVar45,eVar112,eVar13,eVar117,eVar11,eVar41,eVar52,eVar44",t.linkTrackEvents+="event91"}catch(e){_satellite.logger.error("Error in DCR - Online TDA Select Dealer: "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RLe4b53c699ffc496193cf499fa15d4df1",name:"TPT - UA - Multiple - Google Site Tag",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC50ca56be315848b5aeeda535c7a061b3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL263b363a385f4d0c81bc151e0bc2df51",name:"DCR - All - AEM - AA - Mood Configuration",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"mood_pre_configuration_interaction"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("finalDataLayer"),r=_satellite.getVar("ev_eve_effect"),n=_satellite.getVar("ev_eve_cause");if(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO"),t.eVar45+="~rn:Mood configuration",t.eVar117=r+"~"+n,t.eVar69=_satellite.getVar("ev_att_errorCode"),t.eVar145="pc:"+(_satellite.getVar("ev_cat_primaryCategory")||"not set")+"~sc:"+(_satellite.getVar("ev_cat_subCategory01")||"not set"),null!=a.product&&a.product.length>0){var s=_satellite.getVar("pr_pro_productID"),o=_satellite.getVar("pr_pro_productName"),i=a.product[a.product.length-1].attributes.internalCode,l=_satellite.getVar("pr_att_modelCode"),c=a.product[a.product.length-1].attributes.productionYear,d=a.product[a.product.length-1].attributes.series,u=a.product[a.product.length-1].attributes.fuelType,g=a.product[a.product.length-1].attributes.gearing,m=a.product[a.product.length-1].attributes.engine,p=a.product[a.product.length-1].attributes.color;t.eVar51="ps:Car~pi:"+s+"~pn:"+o+"~mc:"+l+"~se:"+d+"~bt:na~yl:na~yp:"+c+"~yr:na~gr:"+g+"~bp:na~op:na~tp:na~sp:na~mr:"+i+"~co:"+p+"~en:"+m+"~fu:"+u+"~cu:na~ms:na";var v=_satellite.getVar("pr_att_modelName"),b=a.product[a.product.length-1].productInfo.manufacturer,f=a.product[a.product.length-1].category.primaryCategory,_=a.product[a.product.length-1].category.subCategory1,h=a.product[a.product.length-1].category.productType,V=a.product[a.product.length-1].attributes.yearOfRegistration;t.eVar124=(s||"not set")+"~"+(o||"not set")+"~"+(b||"not set")+"~"+(f||"not set")+"~"+(_||"not set")+"~"+(h||"not set")+"~"+(i||"not set")+"~"+(l||"not set")+"~"+(v||"not set")+"~"+(c||"not set")+"~"+(V||"not set")+"~"+(d||"not set");var C=a.product[a.product.length-1].attributes.configID,y=a.product[a.product.length-1].attributes.configLink;t.eVar152="conid:"+C+"~conlink:"+y}-1!=_satellite.getVar("ev_eve_eventName").indexOf("error")&&(t.events+="event95"),t.events+="event91",t.linkTrackEvents+="event91,event95",t.linkTrackVars+="eVar16,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12,eVar45,eVar117,eVar124,eVar51,eVar152,eVar69,eVar145"}catch(e){_satellite.logger.log(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"mood_pre_configuration_interaction",linkType:"o"}}]},{id:"RL6417b036e680407faae3def3df341f7d",name:"TPT - UA - Price List - DoubleClick EBR ",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"div.ds2-basic-teaser.ds2-component.ds2-branded-bmw",elementProperties:[{name:"href",value:"https://data.bmw.ua/pricelist/BMW_Price_List.pdf",valueIsRegex:!0}],bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC10272882bdc84b7a978398693163b302-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL35eae2d79de445b5a2ccd1754d64d509",name:"TPT - Abu Dhabi - AEM - Facebook - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Abudhabi - Offerhub ar/en - fb - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-abudhabi.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC50a3a649adfd4029a80c807e0f3a1246-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL99a3fe7ddc454df8af8b1cb9090708d0",name:"TPT - Saudi - AEM - Linkedin - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Saudi - Multiple - Linkedin - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-saudiarabia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCdcc6720df0c04421989b2d9f342706dd-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6a226cb71aed4d50847a614a59a31d35",name:"TPT - Kuwait - AEM - LinkedIn - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-kuwait.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC21a758aa66344e91b2b8470cf31e0746-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL18053fdf1d974475a27c5eaede66f996",name:"TPT - MO - All Pages - SetCookie",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - MO SetCookie - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MO"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.mo",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd1e72b0a35ea48ca839cdcb9d5353adb-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL35735952aa1f4b9788907f369bd40fbe",name:"TPT - Kuwait - AEM - LinkedIn - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kuwait.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0e4e0f46b27d4545baa83d70397c3800-source.min.js",
language:"javascript",isExternal:!0}}]},{id:"RL98a88d3acb124ac69458bd8fc068e1f0",name:"TPT - Kuwait - AEM - Twitter - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kuwait.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5d8a1db0cbf64bcc97cc1330ec55b04f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4cb79dba06c945548e828b5eb64469fb",name:"TPT - HK - Multiple - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - HK - Multiple - Facebook - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"HK"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmwhk.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4eef1fe50f5f44719d2f62e094ab29f6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdfc19d9137244414aeaf4cc806f011f9",name:"TPT - Saudi - AEM - Doubelclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"SA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-saudiarabia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC469171ccac4e4206b6adeb65b28e1db6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL69ee4556e3344d6d9fe902692913403a",name:"HT - All Pages - Register On Consent Change",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"try {\n    var onAdobeAnalyticsConsentChange = function(consentValue) {\n        if (consentValue === 'true' && _satellite.getVar('isPageLoadTracked') != 'true') { // an Opt-In occured, the DE 'isPageLoadTracked' is set in the doPlugins section            \n            _satellite.aaCustomizedPageCode();\n\n            _satellite.logger.log('Trying to re-trigger adobe analytics page load tag');\n            _satellite.setVar('consentInfo', {\n                fireOptInEvent: 'true'\n            });\n            var event;\n            var eventName = 're-trigger';\n            if (typeof(Event) === 'function') {\n                event = new Event(eventName);\n            } else {\n                event = document.createEvent('Event');\n                event.initEvent(eventName, true, true);                \n            }\n            event.detail = { 'processing': _satellite.getVar('consentMap')['AdobeAnalytics'] } \n            window.dispatchEvent(event);\n        }\n    }\n\n    var onAdvertisingConsentChange = function(consentValue) {\n        if (consentValue === 'true') {\n            if (_satellite.getVar(\"isAAMTriggered\") === 'false' && consentcontroller.api.isUsageAllowed('AdobeAudienceManager_DMP')) {\n                _satellite.aamCustomizedPageCode();\n            }\n        } else if (consentValue === 'false') {\n            if (_satellite.getVar(\"isAAMTriggered\") === 'true' && !consentcontroller.api.isUsageAllowed('AdobeAudienceManager_DMP')) {\n                //block AAM call here\n            }\n        }\n    }\n\n    var onGlobalConsentChange = function(consentValue) { //this will execute only for cookiecontroller market\n        if (consentValue === 'true') { // an Opt-In occured           \n            if (_satellite.getVar('isPageLoadTracked') != 'true') { //the DE 'isPageLoadTracked' is set in the doPlugins section\n                _satellite.aaCustomizedPageCode();\n\n                _satellite.logger.log('Trying to re-trigger adobe analytics page load tag');\n                var event;\n                var eventName = 're-trigger';\n                if (typeof(Event) === 'function') {\n                    event = new Event(eventName);\n                } else {\n                    event = document.createEvent('Event');\n                    event.initEvent(eventName, true, true);                    \n                }\n                \n                event.detail = { 'processing': _satellite.getVar('consentMap')['AdobeAnalytics'] }\n                window.dispatchEvent(event);\n            } else {\n                sendBeacon(consentValue);\n            }\n\n            if (_satellite.getVar('thirdPartyTagsExecuted') != 'true') {\n                retriggerThirdPartyTag();\n                _satellite.setVar('thirdPartyTagsExecuted', 'true')\n            }\n        } else {\n            sendBeacon(consentValue);\n        }\n    }\n\n    var checkForConsentChange = function(apiVersion) {\n        if (apiVersion === \"cookiecontroller\" && typeof cookiecontroller != \"undefined\" && cookiecontroller.api && cookiecontroller.api.registerOnConsentChange) {\n            cookiecontroller.api.registerOnConsentChange(function(consentValue) {\n                onGlobalConsentChange(consentValue.toString());\n            });\n        } else if (apiVersion === \"consentcontroller\" && typeof consentcontroller != \"undefined\" && consentcontroller.api && consentcontroller.api.registerOnUserConsentChange) {\n            consentcontroller.api.registerOnUserConsentChange(function(consentValue, consentCategory) {\n                if (consentCategory === 'advertising') { // AAAA-3017, all categories changed to advertising             \n                    onAdobeAnalyticsConsentChange(consentValue === 'REVOKED' ? 'false' : 'true');\n                    onAdvertisingConsentChange(consentValue === 'REVOKED' ? 'false' : 'true');\n                }/* else if (consentCategory === 'advertising') {\n                    onAdvertisingConsentChange(consentValue === 'REVOKED' ? 'false' : 'true');\n                }*/\n            });\n\n        } else {\n            setTimeout(function() {\n                checkForConsentChange(apiVersion);\n            }, 200);\n        }\n    }\n\n    var retriggerThirdPartyTag = function() {\n        var event;\n        var eventName = 're-trigger-third-party';\n        if (typeof(Event) === 'function') {\n            event = new Event(eventName);\n        } else {\n            event = document.createEvent('Event');\n            event.initEvent(eventName, true, true);            \n        }\n        event.detail = { 'processing': _satellite.getVar('consentMap')['Others'] }\n        window.dispatchEvent(event);\n    }\n\n    var sendBeacon = function(consentValue) {\n        _satellite.track('cookie_link', {\n            consentValue: consentValue\n        });\n    }\n\n    checkForConsentChange(_satellite.getVar('splitConsentEnabled') === 'true' ? 'consentcontroller' : 'cookiecontroller');\n\n} catch (e) {\n    _satellite.logger.error(e);\n}",language:"javascript"}}]},{id:"RLb8f156686691438588d1d5a2fcda1a9c",name:"DCR - All - iFrame - AA - RFA Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfa"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - All - iFrame - AA - RFA Forms",t.eVar44=_satellite.getVar("nonTechMetaData");var r=_satellite.getVar("navEvarForClicks").split("~");t.prop16=r[1]+"~"+r[2]+"~"+r[5],a+="event91,";var n="",s=_satellite.getVar("ev_att_mmdr"),o=_satellite.getVar("pr_att_mmdr");n=""!=s&&"mmdr"!=s?s:""!=o?o:"not set";var i=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",l=_satellite.getVar("s_products_iFrame_v52"),c=_satellite.getVar("s_products_vco_v53"),d="";d+=";"+n+";1;"+i+";event112="+i+";eVar52="+l+",",t.eVar51=l,""!=(d+=c+",")&&(d=d.slice(0,-1),t.products=d);var u=_satellite.getVar("hierarchyEvar").split("|");t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],"Form Start"===_satellite.getVar("ev_eve_eventName")?(a+="event1:"+_satellite.getVar("SessionID")+"RFA,",a+="event2:"+_satellite.getVar("SessionID")+"RFA,",a+="event164,event186,",t.prop30="Start RFA",t.eVar11="Local Form|RFA|Generic|Start|not set",""!=_satellite.getVar("ev_att_mmdr")&&(a+="event365:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_mmdr")+",",a+="event165:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_mmdr")+",")):"Form Success"===_satellite.getVar("ev_eve_eventName")?(_satellite.getVar("ev_att_dealerName"),_satellite.getVar("ev_att_dealerID"),a+="event3:"+_satellite.getVar("SessionID")+"RFA,",a+="event166,event187,",""!=_satellite.getVar("ev_att_mmdr")&&(a+="event4:"+_satellite.getVar("SessionID")+"RFA"+_satellite.getVar("ev_att_mmdr")+",",a+="event365:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_mmdr")+",",a+="event167:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_mmdr")+","),t.prop31="Finish RFA",t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar11="Local Form|RFA|Generic|Finish|not set"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|RFA|Generic|First Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|RFA|Generic|"+_satellite.getVar("ev_eve_eventName")+"|not set":t.abort=!0,t.linkTrackVars+="eVar16,eVar10,eVar11,prop1,prop2,prop3,prop16,prop30,prop31,eVar51,eVar52,products,eVar44",t.linkTrackEvents+="event91,event1,event2,event3,event4,event164,event165,event166,event167,event365,event186,event187,event295",a=a.slice(0,-1),t.events+=a}catch(e){var g={from:"AA",type:"DCR",name:"RFA Forms"};_satellite.logger.error(e,g)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"RFA Form",linkType:"o"}}]},{id:"RL941309231ca54abb819d4eebe05be9cd",name:"DCR - iFrame Accessory Configurator Interaction",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_accessory-configurator_interaction"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("ev_att_mmdr")||"not set";-1!=r.indexOf("LCI")&&(r=r.substring(0,3));var n=_satellite.getVar("ev_att_relatedAccessories");t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:iFrame Accessory Configurator Interaction",t.eVar34="AC: "+_satellite.getVar("ev_eve_eventAction").split(" - ")[1],t.eVar68="AC: "+_satellite.getVar("ev_eve_eventName"),t.eVar10=t.prop10=r;var s=_satellite.getVar("navEvarForClicks").split("~");t.prop16=s[1]+"~"+s[2]+"~"+s[5];var o="";if("AC iFrame - Accessory Add"==_satellite.getVar("ev_eve_eventAction")){for(var i="",l=0;l<n.length;l++)o+=";"+(c=n[l].split("~"))[2]+";1;"+c[3]+";;eVar53=ps:Accessory~ac:"+c[0]+"~an:"+c[1]+"~ai:"+c[2]+"~ap:"+c[3]+",",i+=c[2];a+="event366:"+_satellite.getVar("SessionID")+i.dtm_hashCode()+",event367,"}else if("AC iFrame - Detail Click"==_satellite.getVar("ev_eve_eventAction")){for(o="",i="",l=0;l<n.length;l++){var c;o+=";"+(c=n[l].split("~"))[2]+";1;"+c[3]+";;eVar53=ps:Accessory~ac:"+c[0]+"~an:"+c[1]+"~ai:"+c[2]+"~ap:"+c[3]+",",i+=c[2]}a+="event368:"+_satellite.getVar("SessionID")+i.dtm_hashCode()+",event369,"}else"AC iFrame - Visualisation Change"==_satellite.getVar("ev_eve_eventAction")?a+="event370,":"AC iFrame - Started wishlist Share"==_satellite.getVar("ev_eve_eventAction")?a+="event371,":"AC iFrame - Finished wishlist Share"==_satellite.getVar("ev_eve_eventAction")?a+="event372,":"AC iFrame - Download wishlist"==_satellite.getVar("ev_eve_eventAction")?a+="event373,":"ac model update"==_satellite.getVar("ev_eve_eventName")&&(a+="event376,");if("Model Selection"!=_satellite.getVar("ev_eve_eventName")){t.eVar51=_satellite.getVar("s_products_iFrame_v52");var d=";"+r+";1;;;eVar52="+_satellite.getVar("s_products_iFrame_v52");a+="event365:"+_satellite.getVar("SessionID")+r+",",d=(d+=o).slice(0,-1),t.products=d}a+="event91,event138,event139,",t.linkTrackVars+="eVar10,prop10,eVar16,prop16,eVar34,eVar68,eVar51,eVar52,eVar53,products",t.linkTrackEvents+="event91,event365,event366,event367,event368,event369,event370,event371,event372,event373,event138,event139,event376,",a=a.slice(0,-1),t.events+=a}catch(e){var u={from:"AA",type:"DCR",name:"iFrame Accessory Configurator Interaction"};_satellite.logger.error(e,u)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"iframe accessory configurator interaction",linkType:"o"}}]},{id:"RL99ce9c4918264efe85e7028972138f47",name:"DCR - Popup Save configuration",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"popup_save_configuration"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.setVar("useVCOPage",!0),_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("pr_att_mmdr");t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:Save Configuration";var n=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");t.eVar63=n;var s=t.eVar16.split("~");t.prop16=s[1]+"~"+s[2]+"~"+s[5];var o=_satellite.getVar("ev_eve_eventAction");t.events+="Discard configuration"==o?"event127,":"Pop up closed"==o?"event128,":"event129,";var i=_satellite.getVar("pr_pro_productID").split("::").join("|");i=i.substring(i.indexOf("|")+1),t.eVar9=r,t.eVar10=r,t.eVar34="VCO: Click on Save Configuration Icon",t.eVar36=i,""==r&&(r="not set");var l="";if(_satellite.getVar("s_products_vco_v52"),_satellite.getVar("pr_att_sellingPriceTotal"),l+=";"+r+";1;"+_satellite.getVar("pr_att_sellingPriceTotal"),t.eVar51=_satellite.getVar("s_products_vco_v52"),l+=_satellite.getVar("s_products_vco_v53")+",",a+="event112,",""!=l&&(l=l.slice(0,-1),t.products=l),"true"===_satellite.getVar("financeInteraction")){var c=_satellite.getVar("ev_att_fdo_calculations").split("|"),d=_satellite.getVar("sfProduct");"undefined"!=d&&(t.eVar58=d+c[1])}_satellite.setVar("useVCOPage",!1),t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar36,eVar34,eVar51,eVar52,eVar53,eVar58",t.linkTrackEvents+="event127,event128,event129",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"popup save configuration",linkType:"o"}}]},{id:"RLd14e111641b142629a573a6e0486f1ea",name:"TPT - Abu Dhabi - AEM - Snapchat - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Dubai - Multiple - Twitter",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-abudhabi.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCfc4fdc2a365145c3a84d178334fe7be8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5af9008b9196420ea08d752e2ebd2db3",name:"TPT - Qatar - AEM - Facebook - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: Qatar FB Pixel ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-qatar.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC6bab59fff06148319ad114a02e2616f8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL34297f2baa2b47ebbd146eda5b3e5213",name:"TPT - Bahrain - AEM - Snapchat - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Dubai - Multiple - Twitter",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-bahrain.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCed141278d178402a93b2c23a9b25937e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL656bf78030cd4eada147717f48bcecf7",name:"TPT - MK - All Pages - Facebook - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - MK - All Pages - Facebook - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MK"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.mk",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCbd52bc960b0f438f938cc5305ef2e222-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4d222fc4651a4db898f67876974ed175",name:"TPT - BO - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT BO Adwords - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"BO"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.bo",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb28810a37222499da59b690e71fcb5ce-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC24e6fae322fd476caddef6c1a0be624d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6d95bee501e343f9830e1e6c0a5fd60b",name:"DCR - Save configuration",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"save_configuration"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.setVar("useVCOPage",!0),_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("SessionID"),n=_satellite.getVar("URLNoParam"),s=(_satellite.getVar("navEvarForClicks"),_satellite.getVar("navEvarForClicks2")),o=_satellite.getVar("pa_cat_subCategory01"),i=_satellite.getVar("pr_att_mmdr"),l=(_satellite.getVar("ev_att_componentName"),_satellite.getVar("pr_pro_productID"));t.eVar16="Open Layer~Save Configuration Icon~VCO module~Not available~"+n+"#/"+o+"~Not available",t.eVar18=s,t.eVar45+="~rn:Save Configuration";var c=n+"#/"+o;t.eVar63=c;var d=t.eVar16.split("~");t.prop16=d[1]+"~"+d[2]+"~"+d[5],a+="event91,event113,event114,event115,event116:"+r+i+",";var u=l.split("::").join("|");u=u.substring(u.indexOf("|")+1),t.eVar9=i,t.eVar10=i,t.eVar34="VCO: Click on Save Configuration Icon",t.eVar36=u,_satellite.getVar("pr_att_modelCode"),_satellite.getVar("pr_att_modelName"),_satellite.getVar("pr_att_serie"),_satellite.getVar("pr_att_bodyType"),_satellite.getVar("pr_att_yearOfLaunch"),_satellite.getVar("pr_att_basePriceVehicle"),_satellite.getVar("pr_att_basePriceOptions"),_satellite.getVar("pr_att_basePrice");var g=_satellite.getVar("pr_att_sellingPriceTotal"),m=_satellite.getVar("s_products_vco_v52"),p=_satellite.getVar("s_products_vco_v53");""==i&&(i="not set");var v="";if(v+=";"+i+";1;"+g+";event112="+g+";eVar52="+m+",",t.eVar51=m,a+="event112,",""!=(v+=p+",")&&(v=v.slice(0,-1),t.products=v),"true"===_satellite.getVar("financeInteraction")){var b=_satellite.getVar("ev_att_fdo_calculations").split("|");a+="event203,event204,event225,",a+=b[0];var f=_satellite.getVar("sfProduct");"undefined"!=f&&(t.eVar58=f+b[1])}_satellite.setVar("useVCOPage",!1),t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar36,eVar34,eVar51,eVar52,eVar53,eVar58",t.linkTrackEvents+="event91,event113,event76,event77,event78,event203,event204,event210,event211,event212,event213,event214,event215,event216,event217,event218,event219,event220,event221,event222,event223,event224,event225,event112,event114,event115,event116",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"save configuration",linkType:"o"}}]},{id:"RLbe3c684238154c24834385778d005de8",name:"TPT - Kuwait - AEM - Facebook - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kuwait.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb6ad6a7caec344268cc9ff6d3a454a75-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb038997380db473781980d8d9a8f6cc0",name:"TPT - Dubai - Multiple - Doubleclick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT:  Dubai - floodLight ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"AE"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-dubai.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0acdcad08d51448cab5b9075497b5030-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL1bc26b95bfc449aaa7b2b489ecac02f0",name:"TPT - CC - AEM - Facebook - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.cc",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC194e6c4ca7f44800a47bd6da43ef0601-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbd75913ebe7c450eb5a5bc3053ddd4aa",name:"TPT - SR - Multiple - DBM Tag Configurator Steps",events:[{modulePath:"core/src/lib/events/historyChange.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - SR DBM Tag Configurator Steps - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"SR"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"configurator",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){var e=_satellite.getVar("pa_pag_pageName"),t=_satellite.getVar("previousStepName");if(null==t||t!==e)return _satellite.setVar("previousStepName",e),!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCafd65cc69eb1422a9bec0483f71ad1f0-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5c4bdeec59b648c890f2b6994385adfe",name:"TPT - EC - All Pages - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - EC - All Pages - Facebook - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"EC"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.ec",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5da73e71e0c24271be9e3171ea59e07d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa6759614d3bf42dc903c2c734a88cbfb",name:"TPT - PK - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-pakistan.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7255f7adc48649cc8e5a2e9afa772f34-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc49928f23c4c491ebe1e98d98fef224e",name:"DCR - iFrame Accessory Configurator Steps",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_accessory-configurator_steps"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("ev_att_wishlist"),n=_satellite.getVar("ev_att_productName");window.innerWidth>788&&"Global"==_satellite.getVar("ev_eve_eventName")&&(t.abort=!0);var s=_satellite.getVar("ev_att_mmdr")||"not set";-1!=s.indexOf("LCI")&&(s=s.substring(0,3)),t.eVar10=t.prop10=s,t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:iFrame Accessory Configurator Step",t.eVar34="AC: "+_satellite.getVar("ev_eve_eventName"),t.eVar68="AC: "+_satellite.getVar("ev_eve_eventName");var o=_satellite.getVar("navEvarForClicks").split("~");t.prop16=o[1]+"~"+o[2]+"~"+o[5];var i=_satellite.getVar("hierarchyEvar").split("|");if("RFA: Selected Accessories"==_satellite.getVar("ev_eve_eventName")?(t.prop1=i[0],t.prop2=i[1],t.prop3=i[2],a+="event164,event165,event1,event2:"+_satellite.getVar("SessionID")+s+",event186,event360,",t.eVar10=t.prop10=s,t.eVar11="Local Form|RFA|Accessory Configurator|Start|not set",t.prop30="start RFA"):"RFA: Personal Data"==_satellite.getVar("ev_eve_eventName")?(t.prop1=i[0],t.prop2=i[1],t.prop3=i[2],a+="event361,",t.eVar10=t.prop10=s,t.eVar11="Local Form|RFA|Accessory Configurator|Personal Data|not set"):"RFA: Dealer Selection"==_satellite.getVar("ev_eve_eventName")?(t.prop1=i[0],t.prop2=i[1],t.prop3=i[2],a+="event362,",t.eVar10=t.prop10=s,t.eVar11="Local Form|RFA|Accessory Configurator|Dealer Selection|not set"):"RFA: Legal Notice"==_satellite.getVar("ev_eve_eventName")?(t.prop1=i[0],t.prop2=i[1],t.prop3=i[2],a+="event363,",t.eVar10=t.prop10=s,t.eVar11="Local Form|RFA|Accessory Configurator|Legal Notice|not set"):"RFA: Finish"==_satellite.getVar("ev_eve_eventName")?(t.prop1=i[0],t.prop2=i[1],t.prop3=i[2],a+="event364,event3,event4:"+_satellite.getVar("SessionID")+s+",event187,event166,event167:"+_satellite.getVar("SessionID")+s+",",t.eVar10=t.prop10=s,t.eVar11="Local Form|RFA|Accessory Configurator|Finish|not set",t.eVar67=n,t.prop31="Finish RFA"):"Model Selection"==_satellite.getVar("ev_eve_eventName")?(_satellite.setVar("lastStepModelSelection",!0),a+="event374,"):"ac start after model change"==_satellite.getVar("ev_eve_eventName")&&(a+="event377,"),"Model Selection"!=_satellite.getVar("ev_eve_eventName")){t.eVar51=_satellite.getVar("s_products_iFrame_v52");var l=";"+s+";1;;;eVar52="+_satellite.getVar("s_products_iFrame_v52")+",";"RFA: Finish"!=_satellite.getVar("ev_eve_eventName")&&(a+="event365:"+_satellite.getVar("SessionID")+s+","),1==_satellite.getVar("lastStepModelSelection")&&1!=t.abort&&(a+="event375,",_satellite.setVar("lastStepModelSelection",!1));var c=""
;if(r.length>0)for(var d=0;d<r.length;d++){var u=r[d].split("~");c+=";"+u[2]+";1;"+u[3]+";;eVar53=ps:Accessory~ac:"+u[0]+"~an:"+u[1]+"~ai:"+u[2]+"~ap:"+u[3]+","}l=(l+=c).slice(0,-1),t.products=l}t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set",t.eVar44=_satellite.getVar("nonTechMetaData"),a+="event91,",t.linkTrackVars+="eVar10,prop10,eVar11,eVar16,prop1,prop2,prop3,prop16,prop30,prop31,eVar34,eVar41,eVar44,eVar67,eVar68,eVar51,eVar52,eVar53,products,events",t.linkTrackEvents+="event1,event2,event3,event4,event91,event360,event361,event362,event363,event364,event365,event164,event165,event166,event167,event374,event375,event186,event187,event377",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.error('Error DCR "iframe Accessory Configurator Steps" : '+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"iframe accessory configurator step",linkType:"o"}}]},{id:"RLdbb0b16bfed04e3093066a68b29560d4",name:"TPT - Dubai - AEM - Facebook - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-dubai.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb744dbbc3c1e4972a1aad9f6eb506675-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc5ba2de6aa724cf5b0b8b1989a527610",name:"TPT - IS - AEM - Facebook - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.is",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCffe3d8dea7fb40f8a65125bde71903cd-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2d66629691c3479dac98a0ccade973fc",name:"DCR - GeoLoc Province Selection- show_province_layer",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"show_province_layer"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar16=_satellite.getVar("navEvarForClicks");var r=_satellite.getVar("navEvarForClicks").split("~");t.prop16=r[1]+"~"+r[2]+"~"+r[5],t.eVar45+="~rn:GeoLoc Province Selection- show_province_layer",a+="event91,event998,event999,",t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar34,eVar45,events",t.linkTrackEvents+="event91",a=a.slice(0,-1),t.events=a}catch(e){_satellite.logger.log(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RLee6b9ed4a03849a3b06c82204311a0d5",name:"HT - All Pages - Adobe Target",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isTargetAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){try{return Boolean(_satellite.getVar("adobeTargetProperty"))||RegExp("^m\\d{3}\\.bmw-int\\d{1,2}\\.com$").test(window.location.hostname)}catch(e){_satellite.logger.error("HT - All Pages - Adobe Target \n",e)}}}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"window.navigator.userAgent",value:"Googlebot",valueIsRegex:!0},negate:!0}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"try {\n\n    //Adobe Target DTM configuration defined the below mentioned variables. Since Adobe Target DTM configurtion runs in a global scope, these variables were available on the window object\n    // Since the variables were available globally, some Target activities/experiences used these variables (especially 'targetProperty') inside their code (which is not correct)\n    // Instead of recitifying/refactoring all the Target activities it was decided that backwards compatibility will be provided in launch, hence the below code\n\n    window.isRegulationAccepted = _satellite.getVar(\"isAdobeAnalyticsAllowed\");\n    window.cookieConsentForTarget = _satellite.getVar('cookieConsentForTarget');\n    window.environment = window.location.href;\n    window.topLevelDomain = _satellite.getVar(\"topLevelDomain\");\n    window.targetPropertyLookup = {\n      'bmw.de': \"08ab7353-eddd-5a23-5029-8db5a0795efa\",\n      'bmw.it': \"14a7eacb-d9ed-139b-3740-1715a4324a87\",\n      'bmw.nl': \"a32b2cb6-0d0b-bd0d-b61b-117ae1c93e2a\",\n      'bmw.fr': \"c63e9226-164f-68ce-6a77-04714d861534\",\n      'bmw.es': \"5f6624f7-b481-68c5-89ec-2f7c6df01e47\",\n      'bmw.co.kr': \"265709a7-eeba-c737-64b2-0bf051f21cb7\",\n      'bmw.co.jp': \"3ff9d062-6800-4a61-0e57-9d03be4a750d\",\n      'bmw.co.za': \"08d747c0-6d3b-df18-bfb9-b24468cafd0d\",\n      'bmw.ru': \"932155db-25c4-5f53-1e6a-420ea418566a\",\n      'bmw.com.cn': \"ed0ef1ce-ea2a-0bc5-23cf-807e84e8fc28\",    \n      'bmw.se': \"5fec81b0-d53d-f0c2-76ab-2563557abf59\",\n      'bmw.com.tr': \"71b3a365-8c33-0b8c-f7ef-5d307dde0ea4\",\n      'bmw.at': \"0cf18719-6a28-12fe-562a-a61a9a1d2c3c\",\n      'bmw.com.mx': \"3ecca491-698c-851a-9b1f-0cc5efe31d99\",\n      'bmw.pl': \"ca83460d-3364-fbeb-443a-808a2d6d290f\"        \n  }\n    window.targetProperty = targetPropertyLookup[topLevelDomain];\n} catch (e) {\n    _satellite.logger.error('Error in Rule:HT - All Pages - Adobe Target' + e);\n}",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{
source:'try{\n   //--------------Visitor API Start-------------------------------------------------------------------\n    /**\n   * @license\n   * Adobe Visitor API for JavaScript version: 4.4.0\n   * Copyright 2019 Adobe, Inc. All Rights Reserved\n   * More info available at https://marketing.adobe.com/resources/help/en_US/mcvid/\n   */\n    var e=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,i=this;return function(){i.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=void 0===t?[]:t,t=t instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!j.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach(function(t){var n=void 0!==e[t]?e[t]:"";this.execute(t,n)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}function i(e,t,n){var i=null==e?void 0:e[t];return void 0===i?n:i}function r(e){for(var t=/^\\d+$/,n=0,i=e.length;n<i;n++)if(!t.test(e[n]))return!1;return!0}function a(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function o(e,t){for(var n=0;n<e.length;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(i>r)return 1;if(r>i)return-1}return 0}function s(e,t){if(e===t)return 0;var n=e.toString().split("."),i=t.toString().split(".");return r(n.concat(i))?(a(n,i),o(n,i)):NaN}function l(e){return e===Object(e)&&0===Object.keys(e).length}function c(e){return"function"==typeof e||e instanceof Array&&e.length}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=_e("log",e,t),this.warn=_e("warn",e,t),this.error=_e("error",e,t)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isEnabled,n=e.cookieName,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.cookies;return t&&n&&r?{remove:function(){r.remove(n)},get:function(){var e=r.get(n),t={};try{t=JSON.parse(e)}catch(e){t={}}return t},set:function(e,t){t=t||{},r.set(n,JSON.stringify(e),{domain:t.optInCookieDomain||"",cookieLifetime:t.optInStorageExpiry||3419e4,expires:!0})}}:{get:Le,set:Le,remove:Le}}function f(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function p(){function e(e,t){var n=Se(e);return n.length?n.every(function(e){return!!t[e]}):De(t)}function t(){M(b),O(ce.COMPLETE),_(h.status,h.permissions),m.set(h.permissions,{optInCookieDomain:l,optInStorageExpiry:c}),C.execute(xe)}function n(e){return function(n,i){if(!Ae(n))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return O(ce.CHANGED),Object.assign(b,ye(Se(n),e)),i||t(),h}}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.doesOptInApply,a=i.previousPermissions,o=i.preOptInApprovals,s=i.isOptInStorageEnabled,l=i.optInCookieDomain,c=i.optInStorageExpiry,u=i.isIabContext,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=f.cookies,g=Pe(a);Re(g,"Invalid `previousPermissions`!"),Re(o,"Invalid `preOptInApprovals`!");var m=d({isEnabled:!!s,cookieName:"adobeujs-optin"},{cookies:p}),h=this,_=le(h),C=ge(),I=Me(g),v=Me(o),S=m.get(),D={},A=function(e,t){return ke(e)||t&&ke(t)?ce.COMPLETE:ce.PENDING}(I,S),y=function(e,t,n){var i=ye(pe,!r);return r?Object.assign({},i,e,t,n):i}(v,I,S),b=be(y),O=function(e){return A=e},M=function(e){return y=e};h.deny=n(!1),h.approve=n(!0),h.denyAll=h.deny.bind(h,pe),h.approveAll=h.approve.bind(h,pe),h.isApproved=function(t){return e(t,h.permissions)},h.isPreApproved=function(t){return e(t,v)},h.fetchPermissions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?h.on(ce.COMPLETE,e):Le;return!r||r&&h.isComplete||!!o?e(h.permissions):t||C.add(xe,function(){return e(h.permissions)}),n},h.complete=function(){h.status===ce.CHANGED&&t()},h.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error(je);D[e.name]||(D[e.name]=e,e.onRegister.call(e,h))},h.execute=Ne(D),Object.defineProperties(h,{permissions:{get:function(){return y}},status:{get:function(){return A}},Categories:{get:function(){return ue}},doesOptInApply:{get:function(){return!!r}},isPending:{get:function(){return h.status===ce.PENDING}},isComplete:{get:function(){return h.status===ce.COMPLETE}},__plugins:{get:function(){return Object.keys(D)}},isIabContext:{get:function(){return u}}})}function g(e,t){function n(){r=null,e.call(e,new f("The call took longer than you wanted!"))}function i(){r&&(clearTimeout(r),e.apply(e,arguments))}if(void 0===t)return e;var r=setTimeout(n,t);return i}function m(){if(window.__cmp)return window.__cmp;var e=window;if(e===window.top)return void Ie.error("__cmp not found");for(var t;!t;){e=e.parent;try{e.frames.__cmpLocator&&(t=e)}catch(e){}if(e===window.top)break}if(!t)return void Ie.error("__cmp not found");var n={};return window.__cmp=function(e,i,r){var a=Math.random()+"",o={__cmpCall:{command:e,parameter:i,callId:a}};n[a]=r,t.postMessage(o,"*")},window.addEventListener("message",function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}if(t.__cmpReturn){var i=t.__cmpReturn;n[i.callId]&&(n[i.callId](i.returnValue,i.success),delete n[i.callId])}},!1),window.__cmp}function h(){var e=this;e.name="iabPlugin",e.version="0.0.1";var t=ge(),n={allConsentData:null},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n[e]=t};e.fetchConsentData=function(e){var t=e.callback,n=e.timeout,i=g(t,n);r({callback:i})},e.isApproved=function(e){var t=e.callback,i=e.category,a=e.timeout;if(n.allConsentData)return t(null,s(i,n.allConsentData.vendorConsents,n.allConsentData.purposeConsents));var o=g(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.vendorConsents,a=n.purposeConsents;t(e,s(i,r,a))},a);r({category:i,callback:o})},e.onRegister=function(t){var n=Object.keys(de),i=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.purposeConsents,a=i.gdprApplies,o=i.vendorConsents;!e&&a&&o&&r&&(n.forEach(function(e){var n=s(e,o,r);t[n?"approve":"deny"](e,!0)}),t.complete())};e.fetchConsentData({callback:i})};var r=function(e){var r=e.callback;if(n.allConsentData)return r(null,n.allConsentData);t.add("FETCH_CONSENT_DATA",r);var s={};o(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.purposeConsents,o=e.gdprApplies,l=e.vendorConsents;(arguments.length>1?arguments[1]:void 0)&&(s={purposeConsents:r,gdprApplies:o,vendorConsents:l},i("allConsentData",s)),a(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(arguments.length>1?arguments[1]:void 0)&&(s.consentString=e.consentData,i("allConsentData",s)),t.execute("FETCH_CONSENT_DATA",[null,n.allConsentData])})})},a=function(e){var t=m();t&&t("getConsentData",null,e)},o=function(e){var t=Fe(de),n=m();n&&n("getVendorConsents",t,e)},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!!t[de[e]];return i&&function(){return fe[e].every(function(e){return n[e]})}()}}var _="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,i=1;i<arguments.length;++i){n=arguments[i];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e};var C,I,v={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},S={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},D={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},A={CUSTOMERIDS:"getCustomerIDs"},y={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},b={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},O={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},M={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},k={GLOBAL:"global"},E={MESSAGES:v,STATE_KEYS_MAP:S,ASYNC_API_MAP:D,SYNC_API_MAP:A,ALL_APIS:y,FIELDGROUP_TO_FIELD:b,FIELDS:O,AUTH_STATE:M,OPT_OUT:k},T=E.STATE_KEYS_MAP,L=function(e){function t(){}function n(t,n){var i=this;return function(){var r=e(0,t),a={};return a[t]=r,i.setStateAndPublish(a),n(r),r}}this.getMarketingCloudVisitorID=function(e){e=e||t;var i=this.findField(T.MCMID,e),r=n.call(this,T.MCMID,e);return void 0!==i?i:r()},this.getVisitorValues=function(e){this.getMarketingCloudVisitorID(function(t){e({MCMID:t})})}},P=E.MESSAGES,R=E.ASYNC_API_MAP,w=E.SYNC_API_MAP,F=function(){function e(){}function t(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(P.GETSTATE),""}}function n(n){this[R[n]]=function(i){i=i||e;var r=this.findField(n,i),a=t.call(this,n,i);return void 0!==r?r:a()}}function i(t){this[w[t]]=function(){return this.findField(t,e)||{}}}Object.keys(R).forEach(n,this),Object.keys(w).forEach(i,this)},N=E.ASYNC_API_MAP,x=function(){Object.keys(N).forEach(function(e){this[N[e]]=function(t){this.callbackRegistry.add(e,t)}},this)},j=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(t,n){n.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},n.isValueEmpty=function(e){return""===e||n.isObjectEmpty(e)},n.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;e>4;e--){var t=document.createElement("div");if(t.innerHTML="\\x3c!--[if IE "+e+"]><span></span><![endif]--\\x3e",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},n.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},n.isObject=function(t){return null!==t&&"object"===e(t)&&!1===Array.isArray(t)},n.defineGlobalNamespace=function(){return window.adobe=n.isObject(window.adobe)?window.adobe:{},window.adobe},n.pluck=function(e,t){return t.reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},Object.create(null))},n.parseOptOut=function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));var i=parseInt(e.d_ottl,10);return isNaN(i)&&(i=7200),{optOut:t,d_ottl:i}},n.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t}}),V=(j.isObjectEmpty,j.isValueEmpty,j.getIeVersion,j.encodeAndBuildRequest,j.isObject,j.defineGlobalNamespace,j.pluck,j.parseOptOut,j.normalizeBoolean,n),H=E.MESSAGES,U={0:"prefix",1:"orgID",2:"state"},B=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach(function(e,n){if(void 0!==e){t[U[n]]=2!==n?e:JSON.parse(e)}}),t}catch(e){}},this.isInvalid=function(n){var i=this.parse(n);if(!i||Object.keys(i).length<2)return!0;var r=e!==i.orgID,a=!t||n.origin!==t,o=-1===Object.keys(H).indexOf(i.prefix);return r||a||o},this.send=function(n,i,r){var a=i+"|"+e;r&&r===Object(r)&&(a+="|"+JSON.stringify(r));try{n.postMessage(a,t)}catch(e){}}},G=E.MESSAGES,Y=function(e,t,n,i){function r(e){Object.assign(p,e)}function a(e){Object.assign(p.state,e),Object.assign(p.state.ALLFIELDS,e),p.callbackRegistry.executeAll(p.state)}function o(e){if(!h.isInvalid(e)){m=!1;var t=h.parse(e);p.setStateAndPublish(t.state)}}function s(e){!m&&g&&(m=!0,h.send(i,e))}function l(){r(new L(n._generateID)),p.getMarketingCloudVisitorID(),p.callbackRegistry.executeAll(p.state,!0),_.removeEventListener("message",c)}function c(e){if(!h.isInvalid(e)){var t=h.parse(e);m=!1,_.clearTimeout(p._handshakeTimeout),_.removeEventListener("message",c),r(new F(p)),_.addEventListener("message",o),p.setStateAndPublish(t.state),p.callbackRegistry.hasCallbacks()&&s(G.GETSTATE)}}function u(){g&&postMessage?(_.addEventListener("message",c),s(G.HANDSHAKE),p._handshakeTimeout=setTimeout(l,250)):l()}function d(){_.s_c_in||(_.s_c_il=[],_.s_c_in=0),p._c="Visitor",p._il=_.s_c_il,p._in=_.s_c_in,p._il[p._in]=p,_.s_c_in++}function f(){function e(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(p[e]=function(){})}Object.keys(n).forEach(e),p.getSupplementalDataID=n.getSupplementalDataID,p.isAllowed=function(){return!0}}var p=this,g=t.whitelistParentDomain;p.state={ALLFIELDS:{}},p.version=n.version,p.marketingCloudOrgID=e,p.cookieDomain=n.cookieDomain||"",p._instanceType="child";var m=!1,h=new B(e,g);p.callbackRegistry=V(),p.init=function(){d(),f(),r(new x(p)),u()},p.findField=function(e,t){if(void 0!==p.state[e])return t(p.state[e]),p.state[e]},p.messageParent=s,p.setStateAndPublish=a},q=E.MESSAGES,X=E.ALL_APIS,W=E.ASYNC_API_MAP,J=E.FIELDGROUP_TO_FIELD,K=function(e,t){function n(){var t={};return Object.keys(X).forEach(function(n){var i=X[n],r=e[i]();j.isValueEmpty(r)||(t[n]=r)}),t}function i(){var t=[];return e._loading&&Object.keys(e._loading).forEach(function(n){if(e._loading[n]){var i=J[n];t.push(i)}}),t.length?t:null}function r(t){return function n(r){var a=i();if(a){var o=W[a[0]];e[o](n,!0)}else t()}}function a(e,i){var r=n();t.send(e,i,r)}function o(e){l(e),a(e,q.HANDSHAKE)}function s(e){r(function(){a(e,q.PARENTSTATE)})()}function l(n){function i(i){r.call(e,i),t.send(n,q.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=e.setCustomerIDs;e.setCustomerIDs=i}return function(e){if(!t.isInvalid(e)){(t.parse(e).prefix===q.HANDSHAKE?o:s)(e.source)}}},z=function(e,t){function n(e){return function(n){i[e]=n,r++,r===a&&t(i)}}var i={},r=0,a=Object.keys(e).length;Object.keys(e).forEach(function(t){var i=e[t];if(i.fn){var r=i.args||[];r.unshift(n(t)),i.fn.apply(i.context||null,r)}})},Q={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"="),i=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,i<0?t.length:i))},set:function(e,t,n){var r=i(n,"cookieLifetime"),a=i(n,"expires"),o=i(n,"domain"),s=i(n,"secure"),l=s?"Secure":"";if(a&&"SESSION"!==r&&"NONE"!==r){var c=""!==t?parseInt(r||0,10):-60;if(c)a=new Date,a.setTime(a.getTime()+1e3*c);else if(1===a){a=new Date;var u=a.getYear();a.setYear(u+2+(u<1900?1900:0))}}else a=0;return e&&"NONE"!==r?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(a?" expires="+a.toGMTString()+";":"")+(o?" domain="+o+";":"")+l,this.get(e)===t):0},remove:function(e,t){var n=i(t,"domain");n=n?" domain="+n+";":"",document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+n}},$=function(e){var t;!e&&_.location&&(e=_.location.hostname),t=e;var n,i=t.split(".");for(n=i.length-2;n>=0;n--)if(t=i.slice(n).join("."),Q.set("test","cookie",{domain:t}))return Q.remove("test",{domain:t}),t;return""},Z={compare:s,isLessThan:function(e,t){return s(e,t)<0},areVersionsDifferent:function(e,t){return 0!==s(e,t)},isGreaterThan:function(e,t){return s(e,t)>0},isEqual:function(e,t){return 0===s(e,t)}},ee=!!_.postMessage,te={postMessage:function(e,t,n){var i=1;t&&(ee?n.postMessage(e,t.replace(/([^:]+:\\/\\/[^\\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+i+++"&"+e))},receiveMessage:function(e,t){var n;try{ee&&(e&&(n=function(n){if("string"==typeof t&&n.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(n.origin))return!1;e(n)}),_.addEventListener?_[e?"addEventListener":"removeEventListener"]("message",n):_[e?"attachEvent":"detachEvent"]("onmessage",n))}catch(e){}}},ne=function(e){var t,n,i="0123456789",r="",a="",o=8,s=10,l=10;if(1==e){for(i+="ABCDEF",t=0;16>t;t++)n=Math.floor(Math.random()*o),r+=i.substring(n,n+1),n=Math.floor(Math.random()*o),a+=i.substring(n,n+1),o=16;return r+"-"+a}for(t=0;19>t;t++)n=Math.floor(Math.random()*s),r+=i.substring(n,n+1),0===t&&9==n?s=3:(1==t||2==t)&&10!=s&&2>n?s=10:2<t&&(s=10),n=Math.floor(Math.random()*l),a+=i.substring(n,n+1),0===t&&9==n?l=3:(1==t||2==t)&&10!=l&&2>n?l=10:2<t&&(l=10);return r+a},ie=function(e,t){return{corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(_.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new _[this.corsMetadata.corsType]},fireCORS:function(t,n,i){function r(e){var n;try{if((n=JSON.parse(e))!==Object(n))return void a.handleCORSError(t,null,"Response is not JSON")}catch(e){return void a.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var i=t.callback,r=_,o=0;o<i.length;o++)r=r[i[o]];r(n)}catch(e){a.handleCORSError(t,e,"Error forming callback function")}}var a=this;n&&(t.loadErrorHandler=n);try{var o=this.getCORSInstance();o.open("get",t.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(o.withCredentials=!0,o.timeout=e.loadTimeout,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===this.readyState&&200===this.status&&r(this.responseText)}),o.onerror=function(e){a.handleCORSError(t,e,"onerror")},o.ontimeout=function(e){a.handleCORSError(t,e,"ontimeout")},o.send(),e._log.requests.push(t.corsUrl)}catch(e){this.handleCORSError(t,e,"try-catch")}},handleCORSError:function(t,n,i){e.CORSErrors.push({corsData:t,error:n,description:i}),t.loadErrorHandler&&("ontimeout"===i?t.loadErrorHandler(!0):t.loadErrorHandler(!1))}}},re={POST_MESSAGE_ENABLED:!!_.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\\|((\\d+\\.)?(\\d+\\.)?(\\*|\\d+))(?=$|\\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},ae=function(e,t){var n=_.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,i="http://fast.",r="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(n.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(i=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=i+this.subdomain+".demdex.net/dest5.html"+r,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(n.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:re.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){r=n.createElement("iframe"),r.sandbox="allow-scripts allow-same-origin",r.title="Adobe ID Syncing iFrame",r.id=i.id,r.name=i.id+"_name",r.style.cssText="display: none; width: 0; height: 0;",r.src=i.url,i.newIframeCreated=!0,t(),n.body.appendChild(r)}function t(e){r.addEventListener("load",function(){r.className="aamIframeLoaded",i.iframeHasLoaded=!0,i.fireIframeLoadedCallbacks(e),i.requestToProcess()})}this.startedAttachingIframe=!0;var i=this,r=n.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==r.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn\'t loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=r,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=r},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach(function(t){"function"==typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})}),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function n(){r.jsonForComparison.push(t),r.jsonWaiting.push(t),r.processSyncOnPage(t)}var i,r=this;if(t===Object(t)&&t.ibs)if(i=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var a,o,s,l=!1;for(a=0,o=this.jsonForComparison.length;a<o;a++)if(s=this.jsonForComparison[a],i===JSON.stringify(s.ibs||[])){l=!0;break}l?this.jsonDuplicates.push(t):n()}else n();if((this.receivedThirdPartyCookiesNotification||!re.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var c=this.jsonWaiting.shift();this.process(c),this.requestToProcess()}e.idSyncDisableSyncs||e.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){r.messageSendingInterval=re.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,n){var i=e._getField("MCAAMLH"),r=t.d_region||t.dcs_region;return i?r&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",r),parseInt(i,10)!==r&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField("MCSYNCSOP",""),e._setField("MCSYNCS",""),i=r)):(i=r)&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",i)),i||(i=""),i},processSyncOnPage:function(e){var t,n,i,r;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(i=0;i<n;i++)r=t[i],r.syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,n,i,r,a,o=encodeURIComponent,s=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(s=!0,i=0;i<n;i++)r=t[i],a=[o("ibs"),o(r.id||""),o(r.tag||""),j.encodeAndBuildRequest(r.url||[],","),o(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));s&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,n,i){var r="syncOnPage"===i,a=r?"MCSYNCSOP":"MCSYNCS";e._readVisitor();var o,s,l=e._getField(a),c=!1,u=!1,d=Math.ceil((new Date).getTime()/re.MILLIS_PER_DAY);l?(o=l.split("*"),s=this.pruneSyncData(o,t.id,d),c=s.dataPresent,u=s.dataValid,c&&u||this.fireSync(r,t,n,o,a,d)):(o=[],this.fireSync(r,t,n,o,a,d))},pruneSyncData:function(e,t,n){var i,r,a,o=!1,s=!1;for(r=0;r<e.length;r++)i=e[r],a=parseInt(i.split("-")[1],10),i.match("^"+t+"-")?(o=!0,n<a?s=!0:(e.splice(r,1),r--)):n>=a&&(e.splice(r,1),r--);return{dataPresent:o,dataValid:s}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,n,i,r,a,o){var s=this;if(t){if("img"===n.tag){var l,c,u,d,f=n.url,p=e.loadSSL?"https:":"http:";for(l=0,c=f.length;l<c;l++){u=f[l],d=/^\\/\\//.test(u);var g=new Image;g.addEventListener("load",function(t,n,i,r){return function(){s.onPagePixels[t]=null,e._readVisitor();var o,l=e._getField(a),c=[];if(l){o=l.split("*");var u,d,f;for(u=0,d=o.length;u<d;u++)f=o[u],f.match("^"+n.id+"-")||c.push(f)}s.setSyncTrackingData(c,n,i,r)}}(this.onPagePixels.length,n,a,o)),g.src=(d?p:"")+u,this.onPagePixels.push(g)}}}else this.addMessage(i),this.setSyncTrackingData(r,n,a,o)},addMessage:function(t){var n=encodeURIComponent,i=n(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((re.POST_MESSAGE_ENABLED?"":i)+t)},setSyncTrackingData:function(t,n,i,r){t.push(n.id+"-"+(r+Math.ceil(n.ttl/60/24))),this.manageSyncsSize(t),e._setField(i,t.join("*"))},sendMessages:function(){var e,t=this,n="",i=encodeURIComponent;this.regionChanged&&(n=i("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?re.POST_MESSAGE_ENABLED?(e=n+i("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){te.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,n=/^---destpub-to-parent---/;"string"==typeof e&&n.test(e)&&(t=e.replace(n,"").split("|"),"canSetThirdPartyCookies"===t[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(i){(null==this.url||i.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=i.subdomain||"",this.url=this.getUrl()),i.ibs instanceof Array&&i.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===n.readyState||"loaded"===n.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(i):this.requestToProcess(i),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(i)},canMakeSyncIDCall:function(t,n){return e._forceSyncIDCall||!t||n-t>re.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(n.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}},oe={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{},disableThirdPartyCalls:{},discardTrackingServerECID:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},isIabContext:{},isOptInStorageEnabled:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},se={getConfigNames:function(){return Object.keys(oe)},getConfigs:function(){return oe},normalizeConfig:function(e){return"function"!=typeof e?e:e()}},le=function(e){var t={};return e.on=function(e,n,i){if(!n||"function"!=typeof n)throw new Error("[ON] Callback should be a function.");t.hasOwnProperty(e)||(t[e]=[]);var r=t[e].push({callback:n,context:i})-1;return function(){t[e].splice(r,1),t[e].length||delete t[e]}},e.off=function(e,n){t.hasOwnProperty(e)&&(t[e]=t[e].filter(function(e){if(e.callback!==n)return e}))},e.publish=function(e){if(t.hasOwnProperty(e)){var n=[].slice.call(arguments,1);t[e].slice(0).forEach(function(e){e.callback.apply(e.context,n)})}},e.publish},ce={PENDING:"pending",CHANGED:"changed",COMPLETE:"complete"},ue={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",VIDEO_ANALYTICS:"videoaa"},de=(C={},t(C,ue.AAM,565),t(C,ue.ECID,565),C),fe=(I={},t(I,ue.AAM,[1,2,5]),t(I,ue.ECID,[1,2,5]),I),pe=function(e){return Object.keys(e).map(function(t){return e[t]})}(ue),ge=function(){var e={};return e.callbacks=Object.create(null),e.add=function(t,n){if(!c(n))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");e.callbacks[t]=e.callbacks[t]||[];var i=e.callbacks[t].push(n)-1;return function(){e.callbacks[t].splice(i,1)}},e.execute=function(t,n){if(e.callbacks[t]){n=void 0===n?[]:n,n=n instanceof Array?n:[n];try{for(;e.callbacks[t].length;){var i=e.callbacks[t].shift();"function"==typeof i?i.apply(null,n):i instanceof Array&&i[1].apply(i[0],n)}delete e.callbacks[t]}catch(e){}}},e.executeAll=function(t,n){(n||t&&!l(t))&&Object.keys(e.callbacks).forEach(function(n){var i=void 0!==t[n]?t[n]:"";e.execute(n,i)},e)},e.hasCallbacks=function(){return Boolean(Object.keys(e.callbacks).length)},e},me=function(){},he=function(e){var t=window,n=t.console;return!!n&&"function"==typeof n[e]},_e=function(e,t,n){return n()?function(){if(he(e)){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console[e].apply(console,[t].concat(i))}}:me},Ce=u,Ie=new Ce("[ADOBE OPT-IN]"),ve=function(t,n){return e(t)===n},Se=function(e,t){return e instanceof Array?e:ve(e,"string")?[e]:t||[]},De=function(e){var t=Object.keys(e);return!!t.length&&t.every(function(t){return!0===e[t]})},Ae=function(e){return!(!e||Oe(e))&&Se(e).every(function(e){return pe.indexOf(e)>-1})},ye=function(e,t){return e.reduce(function(e,n){return e[n]=t,e},{})},be=function(e){return JSON.parse(JSON.stringify(e))},Oe=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},Me=function(e){if(Te(e))return e;try{return JSON.parse(e)}catch(e){return{}}},ke=function(e){return void 0===e||(Te(e)?Ae(Object.keys(e)):Ee(e))},Ee=function(e){try{var t=JSON.parse(e);return!!e&&ve(e,"string")&&Ae(Object.keys(t))}catch(e){return!1}},Te=function(e){return null!==e&&ve(e,"object")&&!1===Array.isArray(e)},Le=function(){},Pe=function(e){return ve(e,"function")?e():e},Re=function(e,t){ke(e)||Ie.error("".concat(t))},we=function(e){return Object.keys(e).map(function(t){return e[t]})},Fe=function(e){return we(e).filter(function(e,t,n){return n.indexOf(e)===t})},Ne=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.command,i=t.params,r=void 0===i?{}:i,a=t.callback,o=void 0===a?Le:a;if(!n||-1===n.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var s=n.split("."),l=e[s[0]],c=s[1];if(!l||"function"!=typeof l[c])throw new Error("Make sure the plugin and API name exist.");var u=Object.assign(r,{callback:o});l[c].call(l,u)}catch(e){Ie.error("[execute] Something went wrong: "+e.message)}}};f.prototype=Object.create(Error.prototype),f.prototype.constructor=f;var xe="fetchPermissions",je="[OptIn#registerPlugin] Plugin is invalid.";p.Categories=ue,p.TimeoutError=f;var Ve=Object.freeze({OptIn:p,IabPlugin:h}),He=function(e,t){e.publishDestinations=function(n){var i=arguments[1],r=arguments[2];try{r="function"==typeof r?r:n.callback}catch(e){r=function(){}}var a=t;if(!a.readyToAttachIframePreliminary())return void r({error:"The destination publishing iframe is disabled in the Visitor library."});if("string"==typeof n){if(!n.length)return void r({error:"subdomain is not a populated string."});if(!(i instanceof Array&&i.length))return void r({error:"messages is not a populated array."});var o=!1;if(i.forEach(function(e){\n    "string"==typeof e&&e.length&&(a.addMessage(e),o=!0)}),!o)return void r({error:"None of the messages are populated strings."})}else{if(!j.isObject(n))return void r({error:"Invalid parameters passed."});var s=n;if("string"!=typeof(n=s.subdomain)||!n.length)return void r({error:"config.subdomain is not a populated string."});var l=s.urlDestinations;if(!(l instanceof Array&&l.length))return void r({error:"config.urlDestinations is not a populated array."});var c=[];l.forEach(function(e){j.isObject(e)&&(e.hideReferrer?e.message&&a.addMessage(e.message):c.push(e))});!function e(){c.length&&setTimeout(function(){var t=new Image,n=c.shift();t.src=n.url,a.onPageDestinationsFired.push(n),e()},100)}()}a.iframe?(r({message:"The destination publishing iframe is already attached and loaded."}),a.requestToProcess()):!e.subdomain&&e._getField("MCMID")?(a.subdomain=n,a.doAttachIframe=!0,a.url=a.getUrl(),a.readyToAttachIframe()?(a.iframeLoadedCallbacks.push(function(e){r({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})}),a.attachIframe()):r({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):a.iframeLoadedCallbacks.push(function(e){r({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})})}},Ue=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var i,r,a=Math.pow,o=a(2,32),s="",l=[],c=8*t.length,u=e.h=e.h||[],d=e.k=e.k||[],f=d.length,p={},g=2;f<64;g++)if(!p[g]){for(i=0;i<313;i+=g)p[i]=g;u[f]=a(g,.5)*o|0,d[f++]=a(g,1/3)*o|0}for(t+="\x80";t.length%64-56;)t+="\\0";for(i=0;i<t.length;i++){if((r=t.charCodeAt(i))>>8)return;l[i>>2]|=r<<(3-i)%4*8}for(l[l.length]=c/o|0,l[l.length]=c,r=0;r<l.length;){var m=l.slice(r,r+=16),h=u;for(u=u.slice(0,8),i=0;i<64;i++){var _=m[i-15],C=m[i-2],I=u[0],v=u[4],S=u[7]+(n(v,6)^n(v,11)^n(v,25))+(v&u[5]^~v&u[6])+d[i]+(m[i]=i<16?m[i]:m[i-16]+(n(_,7)^n(_,18)^_>>>3)+m[i-7]+(n(C,17)^n(C,19)^C>>>10)|0);u=[S+((n(I,2)^n(I,13)^n(I,22))+(I&u[1]^I&u[2]^u[1]&u[2]))|0].concat(u),u[4]=u[4]+S|0}for(i=0;i<8;i++)u[i]=u[i]+h[i]|0}for(i=0;i<8;i++)for(r=3;r+1;r--){var D=u[i]>>8*r&255;s+=(D<16?0:"")+D.toString(16)}return s},Be=function(e,t){return"SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t||(e=Ue(e)),e},Ge=function(e){return String(e).trim().toLowerCase()},Ye=Ve.OptIn;j.defineGlobalNamespace(),window.adobe.OptInCategories=Ye.Categories;var qe=function(t,n,i){function r(e){var t=e;return function(e){var n=e||v.location.href;try{var i=g._extractParamFromUri(n,t);if(i)return w.parsePipeDelimetedKeyValues(i)}catch(e){}}}function a(e){function t(e,t,n){e&&e.match(re.VALID_VISITOR_ID_REGEX)&&(n===A&&(I=!0),t(e))}t(e[A],g.setMarketingCloudVisitorID,A),g._setFieldExpire(k,-1),t(e[O],g.setAnalyticsVisitorID)}function o(e){e=e||{},g._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",g._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},g._supplementalDataIDLast=e.supplementalDataIDLast||"",g._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function s(e){function t(e,t,n){return n=n?n+="|":n,n+=e+"="+encodeURIComponent(t)}function n(e,n){var i=n[0],r=n[1];return null!=r&&r!==T&&(e=t(i,r,e)),e}var i=e.reduce(n,"");return function(e){var t=w.getTimestampInSeconds();return e=e?e+="|":e,e+="TS="+t}(i)}function l(e){var t=e.minutesToLive,n="";return(g.idSyncDisableSyncs||g.disableIdSyncs)&&(n=n||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(n=n||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(n=n||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(n=n||"Error: config.minutesToLive needs to be a positive number")),{error:n,ttl:t}}function c(){return!!g.configs.doesOptInApply&&!(m.optIn.isComplete&&u())}function u(){return g.configs.isIabContext?m.optIn.isApproved(m.optIn.Categories.ECID)&&C:m.optIn.isApproved(m.optIn.Categories.ECID)}function d(e,t){if(C=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(h=t.consentString),g.init(),p()}function f(){m.optIn.isApproved(m.optIn.Categories.ECID)&&(g.configs.isIabContext?m.optIn.execute({command:"iabPlugin.fetchConsentData",callback:d}):(g.init(),p()))}function p(){m.optIn.off("complete",f)}if(!i||i.split("").reverse().join("")!==t)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var g=this,m=window.adobe,h="",C=!1,I=!1;g.version="4.4.0";var v=_,S=v.Visitor;S.version=g.version,S.AuthState=E.AUTH_STATE,S.OptOut=E.OPT_OUT,v.s_c_in||(v.s_c_il=[],v.s_c_in=0),g._c="Visitor",g._il=v.s_c_il,g._in=v.s_c_in,g._il[g._in]=g,v.s_c_in++,g._instanceType="regular",g._log={requests:[]},g.marketingCloudOrgID=t,g.cookieName="AMCV_"+t,g.sessionCookieName="AMCVS_"+t,g.cookieDomain=$(),g.loadSSL=v.location.protocol.toLowerCase().indexOf("https")>=0,g.loadTimeout=3e4,g.CORSErrors=[],g.marketingCloudServer=g.audienceManagerServer="dpm.demdex.net",g.sdidParamExpiry=30;var D=null,A="MCMID",y="MCIDTS",b="A",O="MCAID",M="AAM",k="MCAAMB",T="NONE",L=function(e){return!Object.prototype[e]},P=ie(g);g.FIELDS=E.FIELDS,g.cookieRead=function(e){return Q.get(e)},g.cookieWrite=function(e,t,n){var i=g.cookieLifetime?(""+g.cookieLifetime).toUpperCase():"",r=!1;return g.configs&&g.configs.secureCookie&&"https:"===location.protocol&&(r=!0),Q.set(e,""+t,{expires:n,domain:g.cookieDomain,cookieLifetime:i,secure:r})},g.resetState=function(e){e?g._mergeServerState(e):o()},g._isAllowedDone=!1,g._isAllowedFlag=!1,g.isAllowed=function(){return g._isAllowedDone||(g._isAllowedDone=!0,(g.cookieRead(g.cookieName)||g.cookieWrite(g.cookieName,"T",1))&&(g._isAllowedFlag=!0)),"T"===g.cookieRead(g.cookieName)&&g._helpers.removeCookie(g.cookieName),g._isAllowedFlag},g.setMarketingCloudVisitorID=function(e){g._setMarketingCloudFields(e)},g._use1stPartyMarketingCloudServer=!1,g.getMarketingCloudVisitorID=function(e,t){g.marketingCloudServer&&g.marketingCloudServer.indexOf(".demdex.net")<0&&(g._use1stPartyMarketingCloudServer=!0);var n=g._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;return g._getRemoteField(A,i,e,t,n)},g.getVisitorValues=function(e,t){var n={MCMID:{fn:g.getMarketingCloudVisitorID,args:[!0],context:g},MCOPTOUT:{fn:g.isOptedOut,args:[void 0,!0],context:g},MCAID:{fn:g.getAnalyticsVisitorID,args:[!0],context:g},MCAAMLH:{fn:g.getAudienceManagerLocationHint,args:[!0],context:g},MCAAMB:{fn:g.getAudienceManagerBlob,args:[!0],context:g}},i=t&&t.length?j.pluck(n,t):n;z(i,e)},g._currentCustomerIDs={},g._customerIDsHashChanged=!1,g._newCustomerIDsHash="",g.setCustomerIDs=function(t,n){function i(){g._customerIDsHashChanged=!1}if(!g.isOptedOut()&&t){if(!j.isObject(t)||j.isObjectEmpty(t))return!1;g._readVisitor();var r,a,o;for(r in t)if(L(r)&&(a=t[r],n=a.hasOwnProperty("hashType")?a.hashType:n,a))if("object"===e(a)){var s={};if(a.id){if(n){if(!(o=Be(Ge(a.id),n)))return;a.id=o,s.hashType=n}s.id=a.id}void 0!=a.authState&&(s.authState=a.authState),g._currentCustomerIDs[r]=s}else if(n){if(!(o=Be(Ge(a),n)))return;g._currentCustomerIDs[r]={id:o,hashType:n}}else g._currentCustomerIDs[r]={id:a};var l=g.getCustomerIDs(),c=g._getField("MCCIDH"),u="";c||(c=0);for(r in l)L(r)&&(a=l[r],u+=(u?"|":"")+r+"|"+(a.id?a.id:"")+(a.authState?a.authState:""));g._newCustomerIDsHash=String(g._hash(u)),g._newCustomerIDsHash!==c&&(g._customerIDsHashChanged=!0,g._mapCustomerIDs(i))}},g.getCustomerIDs=function(){g._readVisitor();var e,t,n={};for(e in g._currentCustomerIDs)L(e)&&(t=g._currentCustomerIDs[e],n[e]||(n[e]={}),t.id&&(n[e].id=t.id),void 0!=t.authState?n[e].authState=t.authState:n[e].authState=S.AuthState.UNKNOWN,t.hashType&&(n[e].hashType=t.hashType));return n},g.setAnalyticsVisitorID=function(e){g._setAnalyticsFields(e)},g.getAnalyticsVisitorID=function(e,t,n){if(!w.isTrackingServerPopulated()&&!n)return g._callCallback(e,[""]),"";var i="";if(n||(i=g.getMarketingCloudVisitorID(function(t){g.getAnalyticsVisitorID(e,!0)})),i||n){var r=n?g.marketingCloudServer:g.trackingServer,a="";g.loadSSL&&(n?g.marketingCloudServerSecure&&(r=g.marketingCloudServerSecure):g.trackingServerSecure&&(r=g.trackingServerSecure));var o={};if(r){var s="http"+(g.loadSSL?"s":"")+"://"+r+"/id",l="d_visid_ver="+g.version+"&mcorgid="+encodeURIComponent(g.marketingCloudOrgID)+(i?"&mid="+encodeURIComponent(i):"")+(g.idSyncDisable3rdPartySyncing||g.disableThirdPartyCookies?"&d_coppa=true":""),c=["s_c_il",g._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"];a=s+"?"+l+"&callback=s_c_il%5B"+g._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",o.corsUrl=s+"?"+l,o.callback=c}return o.url=a,g._getRemoteField(n?A:O,a,e,t,o)}return""},g.getAudienceManagerLocationHint=function(e,t){if(g.getMarketingCloudVisitorID(function(t){g.getAudienceManagerLocationHint(e,!0)})){var n=g._getField(O);if(!n&&w.isTrackingServerPopulated()&&(n=g.getAnalyticsVisitorID(function(t){g.getAudienceManagerLocationHint(e,!0)})),n||!w.isTrackingServerPopulated()){var i=g._getAudienceManagerURLData(),r=i.url;return g._getRemoteField("MCAAMLH",r,e,t,i)}}return""},g.getLocationHint=g.getAudienceManagerLocationHint,g.getAudienceManagerBlob=function(e,t){if(g.getMarketingCloudVisitorID(function(t){g.getAudienceManagerBlob(e,!0)})){var n=g._getField(O);if(!n&&w.isTrackingServerPopulated()&&(n=g.getAnalyticsVisitorID(function(t){g.getAudienceManagerBlob(e,!0)})),n||!w.isTrackingServerPopulated()){var i=g._getAudienceManagerURLData(),r=i.url;return g._customerIDsHashChanged&&g._setFieldExpire(k,-1),g._getRemoteField(k,r,e,t,i)}}return""},g._supplementalDataIDCurrent="",g._supplementalDataIDCurrentConsumed={},g._supplementalDataIDLast="",g._supplementalDataIDLastConsumed={},g.getSupplementalDataID=function(e,t){g._supplementalDataIDCurrent||t||(g._supplementalDataIDCurrent=g._generateID(1));var n=g._supplementalDataIDCurrent;return g._supplementalDataIDLast&&!g._supplementalDataIDLastConsumed[e]?(n=g._supplementalDataIDLast,g._supplementalDataIDLastConsumed[e]=!0):n&&(g._supplementalDataIDCurrentConsumed[e]&&(g._supplementalDataIDLast=g._supplementalDataIDCurrent,g._supplementalDataIDLastConsumed=g._supplementalDataIDCurrentConsumed,g._supplementalDataIDCurrent=n=t?"":g._generateID(1),g._supplementalDataIDCurrentConsumed={}),n&&(g._supplementalDataIDCurrentConsumed[e]=!0)),n};var R=!1;g._liberatedOptOut=null,g.getOptOut=function(e,t){var n=g._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;if(u())return g._getRemoteField("MCOPTOUT",i,e,t,n);if(g._registerCallback("liberatedOptOut",e),null!==g._liberatedOptOut)return g._callAllCallbacks("liberatedOptOut",[g._liberatedOptOut]),R=!1,g._liberatedOptOut;if(R)return null;R=!0;var r="liberatedGetOptOut";return n.corsUrl=n.corsUrl.replace(/dpm\\.demdex\\.net\\/id\\?/,"dpm.demdex.net/optOutStatus?"),n.callback=[r],_[r]=function(e){if(e===Object(e)){var t,n,i=j.parseOptOut(e,t,T);t=i.optOut,n=1e3*i.d_ottl,g._liberatedOptOut=t,setTimeout(function(){g._liberatedOptOut=null},n)}g._callAllCallbacks("liberatedOptOut",[t]),R=!1},P.fireCORS(n),null},g.isOptedOut=function(e,t,n){t||(t=S.OptOut.GLOBAL);var i=g.getOptOut(function(n){var i=n===S.OptOut.GLOBAL||n.indexOf(t)>=0;g._callCallback(e,[i])},n);return i?i===S.OptOut.GLOBAL||i.indexOf(t)>=0:null},g._fields=null,g._fieldsExpired=null,g._hash=function(e){var t,n,i=0;if(e)for(t=0;t<e.length;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i&=i;return i},g._generateID=ne,g._generateLocalMID=function(){var e=g._generateID(0);return N.isClientSideMarketingCloudVisitorID=!0,e},g._callbackList=null,g._callCallback=function(e,t){try{"function"==typeof e?e.apply(v,t):e[1].apply(e[0],t)}catch(e){}},g._registerCallback=function(e,t){t&&(null==g._callbackList&&(g._callbackList={}),void 0==g._callbackList[e]&&(g._callbackList[e]=[]),g._callbackList[e].push(t))},g._callAllCallbacks=function(e,t){if(null!=g._callbackList){var n=g._callbackList[e];if(n)for(;n.length>0;)g._callCallback(n.shift(),t)}},g._addQuerystringParam=function(e,t,n,i){var r=encodeURIComponent(t)+"="+encodeURIComponent(n),a=w.parseHash(e),o=w.hashlessUrl(e);if(-1===o.indexOf("?"))return o+"?"+r+a;var s=o.split("?"),l=s[0]+"?",c=s[1];return l+w.addQueryParamAtLocation(c,r,i)+a},g._extractParamFromUri=function(e,t){var n=new RegExp("[\\\\?&#]"+t+"=([^&#]*)"),i=n.exec(e);if(i&&i.length)return decodeURIComponent(i[1])},g._parseAdobeMcFromUrl=r(re.ADOBE_MC),g._parseAdobeMcSdidFromUrl=r(re.ADOBE_MC_SDID),g._attemptToPopulateSdidFromUrl=function(e){var n=g._parseAdobeMcSdidFromUrl(e),i=1e9;n&&n.TS&&(i=w.getTimestampInSeconds()-n.TS),n&&n.SDID&&n.MCORGID===t&&i<g.sdidParamExpiry&&(g._supplementalDataIDCurrent=n.SDID,g._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},g._attemptToPopulateIdsFromUrl=function(){var e=g._parseAdobeMcFromUrl();if(e&&e.TS){var n=w.getTimestampInSeconds(),i=n-e.TS;if(Math.floor(i/60)>re.ADOBE_MC_TTL_IN_MIN||e.MCORGID!==t)return;a(e)}},g._mergeServerState=function(e){if(e)try{if(e=function(e){return w.isObject(e)?e:JSON.parse(e)}(e),e[g.marketingCloudOrgID]){var t=e[g.marketingCloudOrgID];!function(e){w.isObject(e)&&g.setCustomerIDs(e)}(t.customerIDs),o(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},g._timeout=null,g._loadData=function(e,t,n,i){t=g._addQuerystringParam(t,"d_fieldgroup",e,1),i.url=g._addQuerystringParam(i.url,"d_fieldgroup",e,1),i.corsUrl=g._addQuerystringParam(i.corsUrl,"d_fieldgroup",e,1),N.fieldGroupObj[e]=!0,i===Object(i)&&i.corsUrl&&"XMLHttpRequest"===P.corsMetadata.corsType&&P.fireCORS(i,n,e)},g._clearTimeout=function(e){null!=g._timeout&&g._timeout[e]&&(clearTimeout(g._timeout[e]),g._timeout[e]=0)},g._settingsDigest=0,g._getSettingsDigest=function(){if(!g._settingsDigest){var e=g.version;g.audienceManagerServer&&(e+="|"+g.audienceManagerServer),g.audienceManagerServerSecure&&(e+="|"+g.audienceManagerServerSecure),g._settingsDigest=g._hash(e)}return g._settingsDigest},g._readVisitorDone=!1,g._readVisitor=function(){if(!g._readVisitorDone){g._readVisitorDone=!0;var e,t,n,i,r,a,o=g._getSettingsDigest(),s=!1,l=g.cookieRead(g.cookieName),c=new Date;if(l||I||g.discardTrackingServerECID||(l=g.cookieRead(re.FIRST_PARTY_SERVER_COOKIE)),null==g._fields&&(g._fields={}),l&&"T"!==l)for(l=l.split("|"),l[0].match(/^[\\-0-9]+$/)&&(parseInt(l[0],10)!==o&&(s=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)t=l[e].split("-"),n=t[0],i=l[e+1],t.length>1?(r=parseInt(t[1],10),a=t[1].indexOf("s")>0):(r=0,a=!1),s&&("MCCIDH"===n&&(i=""),r>0&&(r=c.getTime()/1e3-60)),n&&i&&(g._setField(n,i,1),r>0&&(g._fields["expire"+n]=r+(a?"s":""),(c.getTime()>=1e3*r||a&&!g.cookieRead(g.sessionCookieName))&&(g._fieldsExpired||(g._fieldsExpired={}),g._fieldsExpired[n]=!0)));!g._getField(O)&&w.isTrackingServerPopulated()&&(l=g.cookieRead("s_vi"))&&(l=l.split("|"),l.length>1&&l[0].indexOf("v1")>=0&&(i=l[1],e=i.indexOf("["),e>=0&&(i=i.substring(0,e)),i&&i.match(re.VALID_VISITOR_ID_REGEX)&&g._setField(O,i)))}},g._appendVersionTo=function(e){var t="vVersion|"+g.version,n=e?g._getCookieVersion(e):null;return n?Z.areVersionsDifferent(n,g.version)&&(e=e.replace(re.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},g._writeVisitor=function(){var e,t,n=g._getSettingsDigest();for(e in g._fields)L(e)&&g._fields[e]&&"expire"!==e.substring(0,6)&&(t=g._fields[e],n+=(n?"|":"")+e+(g._fields["expire"+e]?"-"+g._fields["expire"+e]:"")+"|"+t);n=g._appendVersionTo(n),g.cookieWrite(g.cookieName,n,1)},g._getField=function(e,t){return null==g._fields||!t&&g._fieldsExpired&&g._fieldsExpired[e]?null:g._fields[e]},g._setField=function(e,t,n){null==g._fields&&(g._fields={}),g._fields[e]=t,n||g._writeVisitor()},g._getFieldList=function(e,t){var n=g._getField(e,t);return n?n.split("*"):null},g._setFieldList=function(e,t,n){g._setField(e,t?t.join("*"):"",n)},g._getFieldMap=function(e,t){var n=g._getFieldList(e,t);if(n){var i,r={};for(i=0;i<n.length;i+=2)r[n[i]]=n[i+1];return r}return null},g._setFieldMap=function(e,t,n){var i,r=null;if(t){r=[];for(i in t)L(i)&&(r.push(i),r.push(t[i]))}g._setFieldList(e,r,n)},g._setFieldExpire=function(e,t,n){var i=new Date;i.setTime(i.getTime()+1e3*t),null==g._fields&&(g._fields={}),g._fields["expire"+e]=Math.floor(i.getTime()/1e3)+(n?"s":""),t<0?(g._fieldsExpired||(g._fieldsExpired={}),g._fieldsExpired[e]=!0):g._fieldsExpired&&(g._fieldsExpired[e]=!1),n&&(g.cookieRead(g.sessionCookieName)||g.cookieWrite(g.sessionCookieName,"1"))},g._findVisitorID=function(t){return t&&("object"===e(t)&&(t=t.d_mid?t.d_mid:t.visitorID?t.visitorID:t.id?t.id:t.uuid?t.uuid:""+t),t&&"NOTARGET"===(t=t.toUpperCase())&&(t=T),t&&(t===T||t.match(re.VALID_VISITOR_ID_REGEX))||(t="")),t},g._setFields=function(t,n){if(g._clearTimeout(t),null!=g._loading&&(g._loading[t]=!1),N.fieldGroupObj[t]&&N.setState(t,!1),"MC"===t){!0!==N.isClientSideMarketingCloudVisitorID&&(N.isClientSideMarketingCloudVisitorID=!1);var i=g._getField(A);if(!i||g.overwriteCrossDomainMCIDAndAID){if(!(i="object"===e(n)&&n.mid?n.mid:g._findVisitorID(n))){if(g._use1stPartyMarketingCloudServer&&!g.tried1stPartyMarketingCloudServer)return g.tried1stPartyMarketingCloudServer=!0,void g.getAnalyticsVisitorID(null,!1,!0);i=g._generateLocalMID()}g._setField(A,i)}i&&i!==T||(i=""),"object"===e(n)&&((n.d_region||n.dcs_region||n.d_blob||n.blob)&&g._setFields(M,n),g._use1stPartyMarketingCloudServer&&n.mid&&g._setFields(b,{id:n.id})),g._callAllCallbacks(A,[i])}if(t===M&&"object"===e(n)){var r=604800;void 0!=n.id_sync_ttl&&n.id_sync_ttl&&(r=parseInt(n.id_sync_ttl,10));var a=F.getRegionAndCheckIfChanged(n,r);g._callAllCallbacks("MCAAMLH",[a]);var o=g._getField(k);(n.d_blob||n.blob)&&(o=n.d_blob,o||(o=n.blob),g._setFieldExpire(k,r),g._setField(k,o)),o||(o=""),g._callAllCallbacks(k,[o]),!n.error_msg&&g._newCustomerIDsHash&&g._setField("MCCIDH",g._newCustomerIDsHash)}if(t===b){var s=g._getField(O);s&&!g.overwriteCrossDomainMCIDAndAID||(s=g._findVisitorID(n),s?s!==T&&g._setFieldExpire(k,-1):s=T,g._setField(O,s)),s&&s!==T||(s=""),g._callAllCallbacks(O,[s])}if(g.idSyncDisableSyncs||g.disableIdSyncs)F.idCallNotProcesssed=!0;else{F.idCallNotProcesssed=!1;var l={};l.ibs=n.ibs,l.subdomain=n.subdomain,F.processIDCallData(l)}if(n===Object(n)){var c,d;u()&&g.isAllowed()&&(c=g._getField("MCOPTOUT"));var f=j.parseOptOut(n,c,T);c=f.optOut,d=f.d_ottl,g._setFieldExpire("MCOPTOUT",d,!0),g._setField("MCOPTOUT",c),g._callAllCallbacks("MCOPTOUT",[c])}},g._loading=null,g._getRemoteField=function(e,t,n,i,r){var a,o="",s=w.isFirstPartyAnalyticsVisitorIDCall(e),l={MCAAMLH:!0,MCAAMB:!0};if(u()&&g.isAllowed()){g._readVisitor(),o=g._getField(e,!0===l[e]);if(function(){return(!o||g._fieldsExpired&&g._fieldsExpired[e])&&(!g.disableThirdPartyCalls||s)}()){if(e===A||"MCOPTOUT"===e?a="MC":"MCAAMLH"===e||e===k?a=M:e===O&&(a=b),a)return!t||null!=g._loading&&g._loading[a]||(null==g._loading&&(g._loading={}),g._loading[a]=!0,g._loadData(a,t,function(t){if(!g._getField(e)){t&&N.setState(a,!0);var n="";e===A?n=g._generateLocalMID():a===M&&(n={error_msg:"timeout"}),g._setFields(a,n)}},r)),g._registerCallback(e,n),o||(t||g._setFields(a,{id:T}),"")}else o||(e===A?(g._registerCallback(e,n),o=g._generateLocalMID(),g.setMarketingCloudVisitorID(o)):e===O?(g._registerCallback(e,n),o="",g.setAnalyticsVisitorID(o)):(o="",i=!0))}return e!==A&&e!==O||o!==T||(o="",i=!0),n&&i&&g._callCallback(n,[o]),o},g._setMarketingCloudFields=function(e){g._readVisitor(),g._setFields("MC",e)},g._mapCustomerIDs=function(e){g.getAudienceManagerBlob(e,!0)},g._setAnalyticsFields=function(e){g._readVisitor(),g._setFields(b,e)},g._setAudienceManagerFields=function(e){g._readVisitor(),g._setFields(M,e)},g._getAudienceManagerURLData=function(e){var t=g.audienceManagerServer,n="",i=g._getField(A),r=g._getField(k,!0),a=g._getField(O),o=a&&a!==T?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(g.loadSSL&&g.audienceManagerServerSecure&&(t=g.audienceManagerServerSecure),t){var s,l,c=g.getCustomerIDs();if(c)for(s in c)L(s)&&(l=c[s],o+="&d_cid_ic="+encodeURIComponent(s)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var u="http"+(g.loadSSL?"s":"")+"://"+t+"/id",d="d_visid_ver="+g.version+(h&&-1!==u.indexOf("demdex.net")?"&gdpr=1&gdpr_force=1&gdpr_consent="+h:"")+"&d_rtbd=json&d_ver=2"+(!i&&g._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(g.marketingCloudOrgID)+"&d_nsid="+(g.idSyncContainerID||0)+(i?"&d_mid="+encodeURIComponent(i):"")+(g.idSyncDisable3rdPartySyncing||g.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===D?"&d_coop_safe=1":!1===D?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+o,f=["s_c_il",g._in,e];return n=u+"?"+d+"&d_cb=s_c_il%5B"+g._in+"%5D."+e,{url:n,corsUrl:u+"?"+d,callback:f}}return{url:n}},g.appendVisitorIDsTo=function(e){try{var t=[[A,g._getField(A)],[O,g._getField(O)],["MCORGID",g.marketingCloudOrgID]];return g._addQuerystringParam(e,re.ADOBE_MC,s(t))}catch(t){return e}},g.appendSupplementalDataIDTo=function(e,t){if(!(t=t||g.getSupplementalDataID(w.generateRandomString(),!0)))return e;try{var n=s([["SDID",t],["MCORGID",g.marketingCloudOrgID]]);return g._addQuerystringParam(e,re.ADOBE_MC_SDID,n)}catch(t){return e}};var w={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,n){var i=e.split("&");return n=null!=n?n:i.length,i.splice(n,0,t),i.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){if(e!==O)return!1;var i;return t||(t=g.trackingServer),n||(n=g.trackingServerSecure),!("string"!=typeof(i=g.loadSSL?n:t)||!i.length)&&(i.indexOf("2o7.net")<0&&i.indexOf("omtrdc.net")<0)},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){Q.remove(e,{domain:g.cookieDomain})},isTrackingServerPopulated:function(){return!!g.trackingServer||!!g.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}};g._helpers=w;var F=ae(g,S);g._destinationPublishing=F,g.timeoutMetricsLog=[];var N={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case"MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case b:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case M:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};g.isClientSideMarketingCloudVisitorID=function(){return N.isClientSideMarketingCloudVisitorID},g.MCIDCallTimedOut=function(){return N.MCIDCallTimedOut},g.AnalyticsIDCallTimedOut=function(){return N.AnalyticsIDCallTimedOut},g.AAMIDCallTimedOut=function(){return N.AAMIDCallTimedOut},g.idSyncGetOnPageSyncInfo=function(){return g._readVisitor(),g._getField("MCSYNCSOP")},g.idSyncByURL=function(e){if(!g.isOptedOut()){var t=l(e||{});if(t.error)return t.error;var n,i,r=e.url,a=encodeURIComponent,o=F;return r=r.replace(/^https:/,"").replace(/^http:/,""),n=j.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),i=["ibs",a(e.dpid),"img",a(r),t.ttl,"",n],o.addMessage(i.join("|")),o.requestToProcess(),"Successfully queued"}},g.idSyncByDataSource=function(e){if(!g.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,g.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},He(g,F),g._getCookieVersion=function(e){e=e||g.cookieRead(g.cookieName);var t=re.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},g._resetAmcvCookie=function(e){var t=g._getCookieVersion();t&&!Z.isLessThan(t,e)||w.removeCookie(g.cookieName)},g.setAsCoopSafe=function(){D=!0},g.setAsCoopUnsafe=function(){D=!1},function(){if(g.configs=Object.create(null),w.isObject(n))for(var e in n)L(e)&&(g[e]=n[e],g.configs[e]=n[e])}(),function(){[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach(function(e){var t=e[0],n=2===e.length?e[1]:"",i=g[t];g[t]=function(e){return u()&&g.isAllowed()?i.apply(g,arguments):("function"==typeof e&&g._callCallback(e,[n]),n)}})}(),g.init=function(){if(c())return m.optIn.fetchPermissions(f,!0);!function(){if(w.isObject(n)){g.idSyncContainerID=g.idSyncContainerID||0,D="boolean"==typeof g.isCoopSafe?g.isCoopSafe:w.parseBoolean(g.isCoopSafe),g.resetBeforeVersion&&g._resetAmcvCookie(g.resetBeforeVersion),g._attemptToPopulateIdsFromUrl(),g._attemptToPopulateSdidFromUrl(),g._readVisitor();var e=g._getField(y),t=Math.ceil((new Date).getTime()/re.MILLIS_PER_DAY);g.idSyncDisableSyncs||g.disableIdSyncs||!F.canMakeSyncIDCall(e,t)||(g._setFieldExpire(k,-1),g._setField(y,t)),g.getMarketingCloudVisitorID(),g.getAudienceManagerLocationHint(),g.getAudienceManagerBlob(),g._mergeServerState(g.serverState)}else g._attemptToPopulateIdsFromUrl(),g._attemptToPopulateSdidFromUrl()}(),function(){if(!g.idSyncDisableSyncs&&!g.disableIdSyncs){F.checkDPIframeSrc();var e=function(){var e=F;e.readyToAttachIframe()&&e.attachIframe()};v.addEventListener("load",function(){S.windowLoaded=!0,e()});try{te.receiveMessage(function(e){F.receiveMessage(e.data)},F.iframeHost)}catch(e){}}}(),function(){g.whitelistIframeDomains&&re.POST_MESSAGE_ENABLED&&(g.whitelistIframeDomains=g.whitelistIframeDomains instanceof Array?g.whitelistIframeDomains:[g.whitelistIframeDomains],g.whitelistIframeDomains.forEach(function(e){var n=new B(t,e),i=K(g,n);te.receiveMessage(i,e)}))}()}};qe.config=se,_.Visitor=qe;var Xe=qe,We=function(e){if(j.isObject(e))return Object.keys(e).filter(function(t){return""!==e[t]}).reduce(function(t,n){var i="doesOptInApply"!==n?e[n]:se.normalizeConfig(e[n]),r=j.normalizeBoolean(i);return t[n]=r,t},Object.create(null))},Je=Ve.OptIn,Ke=Ve.IabPlugin;return Xe.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var n=function(){var t=_.s_c_il;if(t)for(var n=0;n<t.length;n++){var i=t[n];if(i&&"Visitor"===i._c&&i.marketingCloudOrgID===e)return i}}();if(n)return n;var i=We(t);!function(e){_.adobe.optIn=_.adobe.optIn||function(){var t=j.pluck(e,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),n=e.optInCookieDomain||e.cookieDomain;n=n||$(),n=n===window.location.hostname?"":n,t.optInCookieDomain=n;var i=new Je(t,{cookies:Q});if(t.isIabContext){var r=new Ke(window.__cmp);i.registerPlugin(r)}return i}()}(i||{});var r=e,a=r.split("").reverse().join(""),o=new Xe(e,null,a);j.isObject(i)&&i.cookieDomain&&(o.cookieDomain=i.cookieDomain),function(){_.s_c_il.splice(--_.s_c_in,1)}();var s=j.getIeVersion();if("number"==typeof s&&s<10)return o._helpers.replaceMethodsWithFunction(o,function(){});var l=function(){try{return _.self!==_.parent}catch(e){return!0}}()&&!function(e){return e.cookieWrite("TEST_AMCV_COOKIE","T",1),"T"===e.cookieRead("TEST_AMCV_COOKIE")&&(e._helpers.removeCookie("TEST_AMCV_COOKIE"),!0)}(o)&&_.parent?new Y(e,i,o,_.parent):new Xe(e,i,a);return o=null,l.init(),l},function(){function e(){Xe.windowLoaded=!0}_.addEventListener?_.addEventListener("load",e):_.attachEvent&&_.attachEvent("onload",e),Xe.codeLoadEnd=(new Date).getTime()}(),Xe}();\n  \n\t//--------------Visitor API End-------------------------------------------------------------------\n\n\t_satellite.logger.info(\'visitorAPIjs wurde geladen\');\n\t//***************dtm_debug += "2-MCVID library loaded;";***************\n\n\tvar environment = window.location.href;\n\tvar topLevelDomain = _satellite.getVar("topLevelDomain");\n\n\tif (typeof topLevelDomain != "undefined") {\n\t\tvar visitor = Visitor.getInstance("B52D1CFE5330949C0A490D45@AdobeOrg", {\n\t\t\ttrackingServer: "bmwag.d3.sc.omtrdc.net", // same as s.trackingServer\n\t\t\ttrackingServerSecure: "bmwag.d3.sc.omtrdc.net", //same as s.trackingServerSecure\n\t\t\t//loadTimeout: 1000,\n\t\t\tcookieDomain: topLevelDomain,\n\t\t\tdisableIdSyncs: true\n\t\t});\n\t} else {\n\t\tvar visitor = Visitor.getInstance("B52D1CFE5330949C0A490D45@AdobeOrg", {\n\t\t\ttrackingServer: "bmwag.d3.sc.omtrdc.net", // same as s.trackingServer\n\t\t\ttrackingServerSecure: "bmwag.d3.sc.omtrdc.net", //same as s.trackingServerSecure\n\t\t\tdisableIdSyncs: true\n\t\t\t//loadTimeout: 1000\n\t\t});\n\t\tdtm_debug += "4.3-MCVID getInstance;";\n\t\t_satellite.logger.info(\'Visitor Get Instance ausgef\xfchrt\')\n\n\t}\t\n} catch(e){\t\n\t_satellite.logger.error("Target Rule-Error in Visitor API" + e);\t\n}',
language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"var targetParamsManager = _satellite.getVar('AT-TargetParamsManager');\ntargetParamsManager.mergeParams({\n  'Dotaki_Segment' : _satellite.getVar('dotaki_segment'),\n  'at_property' : _satellite.getVar('adobeTargetProperty')\n});\n\n// The data element 'AT-AffinityParams' returns a custom object containing categories defined by BMW for calulating the affinity using profile scripts\nvar affinityParams = _satellite.getVar('AT-AffinityParams');\n//The second parameter to mergeParams sets \"once\" : \"true\" meaning that the values will be sent via only one target call\ntargetParamsManager.mergeParams(affinityParams , true);\n\nwindow.targetPageParamsAll = function () {\n    return targetParamsManager.getParams();\n}",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{
source:'try {\n  \n    //No Custom JavaScript\n    /**\n     * @license\n     * at.js 2.3.2 | (c) Adobe Systems Incorporated | All rights reserved\n     * zepto.js | (c) 2010-2016 Thomas Fuchs | zeptojs.com/license\n    */\n    window.adobe=window.adobe||{},window.adobe.target=function(){"use strict";var t=window,n=document,e=!n.documentMode||n.documentMode>=10,r=n.compatMode&&"CSS1Compat"===n.compatMode&&e,o=t.targetGlobalSettings;if(!r||o&&!1===o.enabled)return t.adobe=t.adobe||{},t.adobe.target={VERSION:"",event:{},getOffer:ct,getOffers:ct,applyOffer:ct,applyOffers:ct,sendNotifications:ct,trackEvent:ct,triggerView:ct,registerExtension:ct,init:ct},t.mboxCreate=ct,t.mboxDefine=ct,t.mboxUpdate=ct,"console"in t&&"warn"in t.console&&t.console.warn("AT: Adobe Target content delivery is disabled. Update your DOCTYPE to support Standards mode."),t.adobe.target;var i=window,u=document,c=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function f(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var l=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var n={},e=0;e<10;e++)n["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(t){return n[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,n){for(var e,r,o=f(t),i=1;i<arguments.length;i++){for(var u in e=Object(arguments[i]))a.call(e,u)&&(o[u]=e[u]);if(c){r=c(e);for(var l=0;l<r.length;l++)s.call(e,r[l])&&(o[r[l]]=e[r[l]])}}return o};function d(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return setTimeout(t,Number(n)||0)}function v(t){clearTimeout(t)}function p(t){return null==t}var h=Array.isArray,m=Object.prototype.toString;function g(t){return function(t){return m.call(t)}(t)}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function x(t){var n=y(t);return null!=t&&("object"===n||"function"===n)}var w="[object Function]";function E(t){return!!x(t)&&g(t)===w}function S(t){return t}function C(t){return E(t)?t:S}function k(t){return p(t)?[]:Object.keys(t)}var T=function(t,n){return n.forEach(t)},O=function(t,n){T((function(e){return t(n[e],e)}),k(n))},N=function(t,n){return n.filter(t)},I=function(t,n){var e={};return O((function(n,r){t(n,r)&&(e[r]=n)}),n),e};function _(t,n){return p(n)?[]:(h(n)?N:I)(C(t),n)}function A(t){return p(t)?[]:[].concat.apply([],t)}function P(t){for(var n=this,e=t?t.length:0,r=e;r-=1;)if(!E(t[r]))throw new TypeError("Expected a function");return function(){for(var r=0,o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];for(var c=e?t[r].apply(n,i):i[0];(r+=1)<e;)c=t[r].call(n,c);return c}}function q(t,n){p(n)||(h(n)?T:O)(C(t),n)}function R(t){return null!=t&&"object"===y(t)}var j="[object String]";function D(t){return"string"==typeof t||!h(t)&&R(t)&&g(t)===j}function L(t){if(!D(t))return-1;for(var n=0,e=t.length,r=0;r<e;r+=1)n=(n<<5)-n+t.charCodeAt(r)&4294967295;return n}var M=9007199254740991;function V(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=M}(t.length)&&!E(t)}var U=function(t,n){return n.map(t)};function F(t){return p(t)?[]:V(t)?D(t)?t.split(""):function(t){for(var n=0,e=t.length,r=Array(e);n<e;)r[n]=t[n],n+=1;return r}(t):(n=k(t),e=t,U((function(t){return e[t]}),n));var n,e}var $=Object.prototype.hasOwnProperty;function H(t){if(null==t)return!0;if(V(t)&&(h(t)||D(t)||E(t.splice)))return!t.length;for(var n in t)if($.call(t,n))return!1;return!0}var z=String.prototype.trim;function B(t){return p(t)?"":z.call(t)}function Z(t){return D(t)?!B(t):H(t)}var J="[object Object]",G=Function.prototype,K=Object.prototype,X=G.toString,Y=K.hasOwnProperty,W=X.call(Object);function Q(t){if(!R(t)||g(t)!==J)return!1;var n=function(t){return Object.getPrototypeOf(Object(t))}(t);if(null===n)return!0;var e=Y.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&X.call(e)===W}function tt(t){return R(t)&&1===t.nodeType&&!Q(t)}var nt=function(t){return!Z(t)},et="[object Number]";function rt(t){return"number"==typeof t||R(t)&&g(t)===et}function ot(t,n){return h(n)?n.join(t||""):""}var it=function(t,n){var e={};return O((function(n,r){e[r]=t(n,r)}),n),e};function ut(t,n){return p(n)?[]:(h(n)?U:it)(C(t),n)}function ct(){}function at(){return(new Date).getTime()}var st=function(t,n,e){return e.reduce(t,n)},ft=function(t,n,e){var r=n;return O((function(n,e){r=t(r,n,e)}),e),r};function lt(t,n,e){return p(e)?n:(h(e)?st:ft)(C(t),n,e)}var dt=Array.prototype.reverse;function vt(t,n){return Z(n)?[]:n.split(t||"")}function pt(){var t=at();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e,r,o=(t+(r=16,(e=0)+Math.floor(Math.random()*(r-e+1))))%16|0;return t=Math.floor(t/16),("x"===n?o:3&o|8).toString(16)}))}var ht="type",mt="content",gt="height",yt="width",bt="left",xt="top",wt="from",Et="to",St="priority",Ct="selector",kt="cssSelector",Tt="setHtml",Ot="setContent",Nt="setText",It="setJson",_t="setAttribute",At="setImageSource",Pt="setStyle",qt="rearrange",Rt="resize",jt="move",Dt="remove",Lt="customCode",Mt="redirect",Vt="trackClick",Ut="signalClick",Ft="insertBefore",$t="insertAfter",Ht="appendHtml",zt="appendContent",Bt="prependHtml",Zt="prependContent",Jt="replaceHtml",Gt="replaceContent",Kt="mboxDebug",Xt="mboxDisable",Yt="mboxEdit",Wt="at_check",Qt="true",tn=250,nn="data-at-src",en="json",rn="html",on="dynamic",un="script",cn="src",an="id",sn="class",fn="click",ln="head",dn="style",vn="img",pn="div",hn=\'Adobe Target content delivery is disabled. Ensure that you can save cookies to your current domain, there is no "mboxDisable" cookie and there is no "mboxDisable" parameter in query string.\',mn="Adobe Target has already been initialized.",gn="options argument is required",yn="request option is required",bn="response option is required",xn="execute or prefetch is required",wn="execute or prefetch is not allowed",En="notifications are required",Sn="mbox option is required",Cn="mbox option is too long",kn="success option is required",Tn="error option is required",On="offer option is required",Nn="Unexpected error",In="request failed",_n="request succeeded",An="Action rendered successfully",Pn="Rendering action",qn="Action has no content",Rn="Action has no attributes",jn="Action has no CSS properties",Dn="Action has no height or width",Ln="Action has no left, top or position",Mn="Action has no from or to",Vn="Action has no url",Un="Action has no image url",Fn="Rearrange elements are missing",$n="Loading image",Hn="Track event request succeeded",zn="Track event request failed",Bn="No actions to be rendered",Zn="Redirect action",Jn="Script load",Gn="error",Kn="warning",Xn="unknown",Yn="valid",Wn="success",Qn="mbox",te="offer",ne="name",ee="status",re="params",oe="actions",ie="response",ue="request",ce="provider",ae="pageLoad",se="at-flicker-control",fe="at-element-marker",le="at-element-click-tracking",de="enabled",ve="clientCode",pe="imsOrgId",he="serverDomain",me="timeout",ge="globalMboxName",ye="globalMboxAutoCreate",be="version",xe="defaultContentHiddenStyle",we="bodyHiddenStyle",Ee="bodyHidingEnabled",Se="deviceIdLifetime",Ce="sessionIdLifetime",ke="selectorsPollingTimeout",Te="visitorApiTimeout",Oe="overrideMboxEdgeServer",Ne="overrideMboxEdgeServerTimeout",Ie="optoutEnabled",_e="secureOnly",Ae="supplementalDataIdParamTimeout",Pe="authoringScriptUrl",qe="scheme",Re="cookieDomain",je="mboxParams",De="globalMboxParams",Le="mboxSession",Me="PC",Ve="mboxEdgeCluster",Ue="session",Fe="settings",$e="clientTraces",He="serverTraces",ze="___target_traces",Be="targetGlobalSettings",Ze="dataProvider",Je=Ze+"s",Ge="endpoint",Ke="viewsEnabled",Xe="pageLoadEnabled",Ye="authState",We="authenticatedState",Qe="integrationCode",tr="page",nr="view",er="views",rr="viewName",or="display",ir="Content-Type",ur="text/plain",cr="View rendering failed",ar="View delivery error",sr="View name should be a non-empty string",fr="Page load disabled",lr="Using server state",dr="adobe",vr="optIn",pr="isApproved",hr="fetchPermissions",mr="Categories",gr="TARGET",yr="ANALYTICS",br="optinEnabled",xr="Adobe Target is not opted in",wr="analyticsLogging",Er="serverState",Sr="cache-updated-event",Cr="no-offers-event",kr="redirect-offer-event",Tr="file:",Or=/^(?!0)(?!.*\\.$)((1?\\d?\\d|25[0-5]|2[0-4]\\d)(\\.|$)){4}$/,Nr=/^(com|edu|gov|net|mil|org|nom|co|name|info|biz)$/i,Ir={},_r=[de,ve,pe,he,Re,me,je,De,xe,"defaultContentVisibleStyle",Se,we,Ee,ke,Te,Oe,Ne,Ie,br,_e,Ae,Pe,"urlSizeLimit",Ge,Xe,Ke,wr,Er,"cspScriptNonce","cspStyleNonce",ge];function Ar(t){if(function(t){return Or.test(t)}(t))return t;var n,e=null==(n=vt(".",t))?n:dt.call(n),r=e.length;return r>=3&&Nr.test(e[1])?e[2]+"."+e[1]+"."+e[0]:1===r?e[0]:e[1]+"."+e[0]}function Pr(t,n,e){var r="";t.location.protocol===Tr||(r=Ar(t.location.hostname)),e[Re]=r,e[de]=function(t){var n=t.compatMode;return n&&"CSS1Compat"===n}(n)&&function(t){var n=t.documentMode;return!n||n>=10}(n),function(t,n){t[de]&&(p(n[ye])||(t[Xe]=n[ye]),q((function(e){p(n[e])||(t[e]=n[e])}),_r))}(e,t[Be]||{})}function qr(t){Pr(i,u,t);var n=i.location.protocol===Tr;(Ir=l({},t))[Se]=t[Se]/1e3,Ir[Ce]=t[Ce]/1e3,Ir[qe]=Ir[_e]||n?"https:":""}function Rr(){return Ir}var jr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Dr(t,n){return t(n={exports:{}},n.exports),n.exports}var Lr=Dr((function(t,n){var e;e=function(){function t(){for(var t=0,n={};t<arguments.length;t++){var e=arguments[t];for(var r in e)n[r]=e[r]}return n}return function n(e){function r(n,o,i){var u;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=t({path:"/"},r.defaults,i)).expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*i.expires),i.expires=c}i.expires=i.expires?i.expires.toUTCString():"";try{u=JSON.stringify(o),/^[\\{\\[]/.test(u)&&(o=u)}catch(t){}o=e.write?e.write(o,n):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=(n=(n=encodeURIComponent(String(n))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\\(\\)]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s]));return document.cookie=n+"="+o+a}n||(u={});for(var f=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,d=0;d<f.length;d++){var v=f[d].split("="),p=v.slice(1).join("=");\'"\'===p.charAt(0)&&(p=p.slice(1,-1));try{var h=v[0].replace(l,decodeURIComponent);if(p=e.read?e.read(p,h):e(p,h)||p.replace(l,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(t){}if(n===h){u=p;break}n||(u[h]=p)}catch(t){}}return u}}return r.set=r,r.get=function(t){return r.call(r,t)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(n,e){r(n,"",t(e,{expires:-1}))},r.withConverter=n,r}((function(){}))},t.exports=e()})),Mr={get:Lr.get,set:Lr.set,remove:Lr.remove};function Vr(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var Ur=function(t,n,e,r){n=n||"&",e=e||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\\+/g;t=t.split(n);var u=1e3;r&&"number"==typeof r.maxKeys&&(u=r.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var a=0;a<c;++a){var s,f,l,d,v=t[a].replace(i,"%20"),p=v.indexOf(e);p>=0?(s=v.substr(0,p),f=v.substr(p+1)):(s=v,f=""),l=decodeURIComponent(s),d=decodeURIComponent(f),Vr(o,l)?Array.isArray(o[l])?o[l].push(d):o[l]=[o[l],d]:o[l]=d}return o},Fr=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},$r=function(t,n,e,r){return n=n||"&",e=e||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(r){var o=encodeURIComponent(Fr(r))+e;return Array.isArray(t[r])?t[r].map((function(t){return o+encodeURIComponent(Fr(t))})).join(n):o+encodeURIComponent(Fr(t[r]))})).join(n):r?encodeURIComponent(Fr(r))+e+encodeURIComponent(Fr(t)):""},Hr=Dr((function(t,n){n.decode=n.parse=Ur,n.encode=n.stringify=$r})),zr=(Hr.decode,Hr.parse,Hr.encode,Hr.stringify,function(t,n){n=n||{};for(var e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/}},r=e.parser[n.strictMode?"strict":"loose"].exec(t),o={},i=14;i--;)o[e.key[i]]=r[i]||"";return o[e.q.name]={},o[e.key[12]].replace(e.q.parser,(function(t,n,r){n&&(o[e.q.name][n]=r)})),o}),Br=function(t){return"string"==typeof t&&(t=t.trim().replace(/^[?#&]/,"")),Hr.parse(t)},Zr=function(t){return Hr.stringify(t)},Jr=u.createElement("a"),Gr={};function Kr(t){try{return Br(t)}catch(t){return{}}}function Xr(t){try{return Zr(t)}catch(t){return""}}function Yr(t){try{return decodeURIComponent(t)}catch(n){return t}}function Wr(t){try{return encodeURIComponent(t)}catch(n){return t}}function Qr(t){if(Gr[t])return Gr[t];Jr.href=t;var n=zr(Jr.href);return n.queryKey=Kr(n.query),Gr[t]=n,Gr[t]}var to=Mr.get,no=Mr.set,eo=Mr.remove,ro="mbox";function oo(t,n,e){return{name:t,value:n,expires:e}}function io(t){var n=vt("#",t);return H(n)||n.length<3?null:isNaN(parseInt(n[2],10))?null:oo(Yr(n[0]),Yr(n[1]),Number(n[2]))}function uo(){var t,n=ut(io,Z(t=to(ro))?[]:vt("|",t)),e=Math.ceil(at()/1e3);return lt((function(t,n){return t[n.name]=n,t}),{},_((function(t){return x(t)&&e<=t.expires}),n))}function co(t){var n=uo()[t];return x(n)?n.value:""}function ao(t){return ot("#",[Wr(t.name),Wr(t.value),t.expires])}function so(t){return t.expires}function fo(t,n){var e=F(t),r=Math.abs(1e3*function(t){var n=ut(so,t);return Math.max.apply(null,n)}(e)-at()),o=ot("|",ut(ao,e)),i=new Date(at()+r);no(ro,o,{domain:n,expires:i})}function lo(t){var n=t.name,e=t.value,r=t.expires,o=t.domain,i=uo();i[n]=oo(n,e,Math.ceil(r+at()/1e3)),fo(i,o)}function vo(t,n,e){return function(t){return nt(to(t))}(e)||function(t,n){var e=Kr(t.location.search);return nt(e[n])}(t,e)||function(t,n){var e=Qr(t.referrer).queryKey;return!p(e)&&nt(e[n])}(n,e)}function po(){return Rr()[de]&&function(){var t=Rr()[Re];no(Wt,Qt,{domain:t});var n=to(Wt)===Qt;return eo(Wt),n}()&&!vo(i,u,Xt)}function ho(){return vo(i,u,Kt)}function mo(){return vo(i,u,Yt)}var go="AT:";function yo(t,n){var e=t.console;return!p(e)&&E(e[n])}function bo(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];!function(t,n){var e=t.console;yo(t,"warn")&&e.warn.apply(e,[go].concat(n))}(i,n)}function xo(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];!function(t,n){var e=t.console;yo(t,"debug")&&ho()&&e.debug.apply(e,[go].concat(n))}(i,n)}var wo="1";function Eo(t,n,e){var r=t[ze]||[];if(t[ze]=r,e){var o=r.push;r[be]=wo,r[Fe]=function(t){return lt((function(n,e){return n[e]=t[e],n}),{},_r)}(n),r[$e]=[],r[He]=[],r.push=function(t){r[He].push(l({timestamp:at()},t)),o.call(this,t)}}}function So(t,n,e,r){n===He&&t[ze].push(e),r&&n!==He&&t[ze][n].push(l({timestamp:at()},e))}function Co(t){So(i,$e,t,ho())}var ko=Dr((function(t){!function(n){var e=setTimeout;function r(){}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function i(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn((function(){var e=1===t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(t){return void c(n.promise,t)}u(n.promise,r)}else(1===t._state?u:c)(n.promise,t._value)}))):t._deferreds.push(n)}function u(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof o)return t._state=3,t._value=n,void a(t);if("function"==typeof e)return void f((r=e,i=n,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=n,a(t)}catch(n){c(t,n)}var r,i}function c(t,n){t._state=2,t._value=n,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&o._immediateFn((function(){t._handled||o._unhandledRejectionFn(t._value)}));for(var n=0,e=t._deferreds.length;n<e;n++)i(t,t._deferreds[n]);t._deferreds=null}function s(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function f(t,n){var e=!1;try{t((function(t){e||(e=!0,u(n,t))}),(function(t){e||(e=!0,c(n,t))}))}catch(t){if(e)return;e=!0,c(n,t)}}o.prototype[\'catch\']=function(t){return this.then(null,t)},o.prototype.then=function(t,n){var e=new this.constructor(r);return i(this,new s(t,n,e)),e},o.all=function(t){var n=Array.prototype.slice.call(t);return new o((function(t,e){if(0===n.length)return t([]);var r=n.length;function o(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){o(i,t)}),e)}n[i]=u,0==--r&&t(n)}catch(t){e(t)}}for(var i=0;i<n.length;i++)o(i,n[i])}))},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o((function(n){n(t)}))},o.reject=function(t){return new o((function(n,e){e(t)}))},o.race=function(t){return new o((function(n,e){for(var r=0,o=t.length;r<o;r++)t[r].then(n,e)}))},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){e(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o._setImmediateFn=function(t){o._immediateFn=t},o._setUnhandledRejectionFn=function(t){o._unhandledRejectionFn=t},t.exports?t.exports=o:n.Promise||(n.Promise=o)}(jr)})),To=window.Promise||ko,Oo=function(t){var n=function(){var n,e,r,o,i,u,c=[],a=c.concat,s=c.filter,f=c.slice,l=t.document,d={},v={},p={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},h=/^\\s*<(\\w+|!)[^>]*>/,m=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,g=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,b=/^(?:body|html)$/i,x=/([A-Z])/g,w=["val","css","html","text","data","width","height","offset"],E=l.createElement("table"),S=l.createElement("tr"),C={tr:l.createElement("tbody"),tbody:E,thead:E,tfoot:E,td:S,th:S,"*":l.createElement("div")},k=/complete|loaded|interactive/,T=/^[\\w-]*$/,O={},N=O.toString,I={},_=l.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly",\'for\':"htmlFor",\'class\':"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},P=Array.isArray||function(t){return t instanceof Array};function q(t){return null==t?String(t):O[N.call(t)]||"object"}function R(t){return"function"==q(t)}function j(t){return null!=t&&t==t.window}function D(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function L(t){return"object"==q(t)}function M(t){return L(t)&&!j(t)&&Object.getPrototypeOf(t)==Object.prototype}function V(t){var n=!!t&&"length"in t&&t.length,e=r.type(t);return"function"!=e&&!j(t)&&("array"==e||0===n||"number"==typeof n&&n>0&&n-1 in t)}function U(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function F(t){return t in v?v[t]:v[t]=new RegExp("(^|\\\\s)"+t+"(\\\\s|$)")}function $(t,n){return"number"!=typeof n||p[U(t)]?n:n+"px"}function H(t){return"children"in t?f.call(t.children):r.map(t.childNodes,(function(t){if(1==t.nodeType)return t}))}function z(t,n){var e,r=t?t.length:0;for(e=0;e<r;e++)this[e]=t[e];this.length=r,this.selector=n||""}function B(t,r,o){for(e in r)o&&(M(r[e])||P(r[e]))?(M(r[e])&&!M(t[e])&&(t[e]={}),P(r[e])&&!P(t[e])&&(t[e]=[]),B(t[e],r[e],o)):r[e]!==n&&(t[e]=r[e])}function Z(t,n){return null==n?r(t):r(t).filter(n)}function J(t,n,e,r){return R(n)?n.call(t,e,r):n}function G(t,n,e){null==e?t.removeAttribute(n):t.setAttribute(n,e)}function K(t,e){var r=t.className||"",o=r&&r.baseVal!==n;if(e===n)return o?r.baseVal:r;o?r.baseVal=e:t.className=e}function X(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\\[\\{]/.test(t)?r.parseJSON(t):t):t}catch(n){return t}}function Y(t,n){n(t);for(var e=0,r=t.childNodes.length;e<r;e++)Y(t.childNodes[e],n)}function W(t,n,e){var r=t.getElementsByTagName("script")[0];if(r){var o=r.parentNode;if(o){var i=t.createElement("script");i.innerHTML=n,nt(e)&&i.setAttribute("nonce",e),o.appendChild(i),o.removeChild(i)}}}return I.matches=function(t,n){if(!n||!t||1!==t.nodeType)return!1;var e=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(e)return e.call(t,n);var r,o=t.parentNode,i=!o;return i&&(o=_).appendChild(t),r=~I.qsa(o,n).indexOf(t),i&&_.removeChild(t),r},i=function(t){return t.replace(/-+(.)?/g,(function(t,n){return n?n.toUpperCase():""}))},u=function(t){return s.call(t,(function(n,e){return t.indexOf(n)==e}))},I.fragment=function(t,e,o){var i,u,c;return m.test(t)&&(i=r(l.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(g,"<$1></$2>")),e===n&&(e=h.test(t)&&RegExp.$1),e in C||(e="*"),(c=C[e]).innerHTML=""+t,i=r.each(f.call(c.childNodes),(function(){c.removeChild(this)}))),M(o)&&(u=r(i),r.each(o,(function(t,n){w.indexOf(t)>-1?u[t](n):u.attr(t,n)}))),i},I.Z=function(t,n){return new z(t,n)},I.isZ=function(t){return t instanceof I.Z},I.init=function(t,e){var o,i;if(!t)return I.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&h.test(t))o=I.fragment(t,RegExp.$1,e),t=null;else{if(e!==n)return r(e).find(t);o=I.qsa(l,t)}else{if(R(t))return r(l).ready(t);if(I.isZ(t))return t;if(P(t))i=t,o=s.call(i,(function(t){return null!=t}));else if(L(t))o=[t],t=null;else if(h.test(t))o=I.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==n)return r(e).find(t);o=I.qsa(l,t)}}return I.Z(o,t)},(r=function(t,n){return I.init(t,n)}).extend=function(t){var n,e=f.call(arguments,1);return"boolean"==typeof t&&(n=t,t=e.shift()),e.forEach((function(e){B(t,e,n)})),t},I.qsa=function(t,n){var e,r="#"==n[0],o=!r&&"."==n[0],i=r||o?n.slice(1):n,u=T.test(i);return t.getElementById&&u&&r?(e=t.getElementById(i))?[e]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:f.call(u&&!r&&t.getElementsByClassName?o?t.getElementsByClassName(i):t.getElementsByTagName(n):t.querySelectorAll(n))},r.contains=l.documentElement.contains?function(t,n){return t!==n&&t.contains(n)}:function(t,n){for(;n&&(n=n.parentNode);)if(n===t)return!0;return!1},r.type=q,r.isFunction=R,r.isWindow=j,r.isArray=P,r.isPlainObject=M,r.isEmptyObject=function(t){var n;for(n in t)return!1;return!0},r.isNumeric=function(t){var n=Number(t),e=y(t);return null!=t&&"boolean"!=e&&("string"!=e||t.length)&&!isNaN(n)&&isFinite(n)||!1},r.inArray=function(t,n,e){return c.indexOf.call(n,t,e)},r.camelCase=i,r.trim=function(t){return null==t?"":String.prototype.trim.call(t)},r.uuid=0,r.support={},r.expr={},r.noop=function(){},r.map=function(t,n){var e,o,i,u,c=[];if(V(t))for(o=0;o<t.length;o++)null!=(e=n(t[o],o))&&c.push(e);else for(i in t)null!=(e=n(t[i],i))&&c.push(e);return(u=c).length>0?r.fn.concat.apply([],u):u},r.each=function(t,n){var e,r;if(V(t)){for(e=0;e<t.length;e++)if(!1===n.call(t[e],e,t[e]))return t}else for(r in t)if(!1===n.call(t[r],r,t[r]))return t;return t},r.grep=function(t,n){return s.call(t,n)},t.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,n){O["[object "+n+"]"]=n.toLowerCase()})),r.fn={constructor:I.Z,length:0,forEach:c.forEach,reduce:c.reduce,push:c.push,sort:c.sort,splice:c.splice,indexOf:c.indexOf,concat:function(){var t,n,e=[];for(t=0;t<arguments.length;t++)n=arguments[t],e[t]=I.isZ(n)?n.toArray():n;return a.apply(I.isZ(this)?this.toArray():this,e)},map:function(t){return r(r.map(this,(function(n,e){return t.call(n,e,n)})))},slice:function(){return r(f.apply(this,arguments))},ready:function(t){return k.test(l.readyState)&&l.body?t(r):l.addEventListener("DOMContentLoaded",(function(){t(r)}),!1),this},get:function(t){return t===n?f.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(t){for(var n,e=this.length,r=0;r<e&&(n=this[r],!1!==t.call(n,r,n));)r++;return this},filter:function(t){return R(t)?this.not(this.not(t)):r(s.call(this,(function(n){return I.matches(n,t)})))},add:function(t,n){return r(u(this.concat(r(t,n))))},is:function(t){return this.length>0&&I.matches(this[0],t)},not:function(t){var e=[];if(R(t)&&t.call!==n)this.each((function(n){t.call(this,n)||e.push(this)}));else{var o="string"==typeof t?this.filter(t):V(t)&&R(t.item)?f.call(t):r(t);this.forEach((function(t){o.indexOf(t)<0&&e.push(t)}))}return r(e)},has:function(t){return this.filter((function(){return L(t)?r.contains(this,t):r(this).find(t).size()}))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!L(t)?t:r(t)},last:function(){var t=this[this.length-1];return t&&!L(t)?t:r(t)},find:function(t){var n=this;return t?"object"==y(t)?r(t).filter((function(){var t=this;return c.some.call(n,(function(n){return r.contains(n,t)}))})):1==this.length?r(I.qsa(this[0],t)):this.map((function(){return I.qsa(this,t)})):r()},closest:function(t,n){var e=[],o="object"==y(t)&&r(t);return this.each((function(r,i){for(;i&&!(o?o.indexOf(i)>=0:I.matches(i,t));)i=i!==n&&!D(i)&&i.parentNode;i&&e.indexOf(i)<0&&e.push(i)})),r(e)},parents:function(t){for(var n=[],e=this;e.length>0;)e=r.map(e,(function(t){if((t=t.parentNode)&&!D(t)&&n.indexOf(t)<0)return n.push(t),t}));return Z(n,t)},parent:function(t){return Z(u(this.pluck("parentNode")),t)},children:function(t){return Z(this.map((function(){return H(this)})),t)},contents:function(){return this.map((function(){return this.contentDocument||f.call(this.childNodes)}))},siblings:function(t){return Z(this.map((function(t,n){return s.call(H(n.parentNode),(function(t){return t!==n}))})),t)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(t){return r.map(this,(function(n){return n[t]}))},show:function(){return this.each((function(){var t,n,e;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,d[t]||(n=l.createElement(t),l.body.appendChild(n),e=getComputedStyle(n,"").getPropertyValue("display"),n.parentNode.removeChild(n),"none"==e&&(e="block"),d[t]=e),d[t]))}))},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=R(t);if(this[0]&&!n)var e=r(t).get(0),o=e.parentNode||this.length>1;return this.each((function(i){r(this).wrapAll(n?t.call(this,i):o?e.cloneNode(!0):e)}))},wrapAll:function(t){if(this[0]){var n;for(r(this[0]).before(t=r(t));(n=t.children()).length;)t=n.first();r(t).append(this)}return this},wrapInner:function(t){var n=R(t);return this.each((function(e){var o=r(this),i=o.contents(),u=n?t.call(this,e):t;i.length?i.wrapAll(u):o.append(u)}))},unwrap:function(){return this.parent().each((function(){r(this).replaceWith(r(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var e=r(this);(t===n?"none"==e.css("display"):t)?e.show():e.hide()}))},prev:function(t){return r(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return r(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each((function(n){var e=this.innerHTML;r(this).empty().append(J(this,t,n,e))})):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each((function(n){var e=J(this,t,n,this.textContent);this.textContent=null==e?"":""+e})):0 in this?this.pluck("textContent").join(""):null},attr:function(t,r){var o;return"string"!=typeof t||1 in arguments?this.each((function(n){if(1===this.nodeType)if(L(t))for(e in t)G(this,e,t[e]);else G(this,t,J(this,r,n,this.getAttribute(t)))})):0 in this&&1==this[0].nodeType&&null!=(o=this[0].getAttribute(t))?o:n},removeAttr:function(t){return this.each((function(){1===this.nodeType&&t.split(" ").forEach((function(t){G(this,t)}),this)}))},prop:function(t,n){return t=A[t]||t,1 in arguments?this.each((function(e){this[t]=J(this,n,e,this[t])})):this[0]&&this[0][t]},removeProp:function(t){return t=A[t]||t,this.each((function(){delete this[t]}))},data:function(t,e){var r="data-"+t.replace(x,"-$1").toLowerCase(),o=1 in arguments?this.attr(r,e):this.attr(r);return null!==o?X(o):n},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each((function(n){this.value=J(this,t,n,this.value)}))):this[0]&&(this[0].multiple?r(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(n){if(n)return this.each((function(t){var e=r(this),o=J(this,n,t,e.offset()),i=e.offsetParent().offset(),u={top:o.top-i.top,left:o.left-i.left};"static"==e.css("position")&&(u.position="relative"),e.css(u)}));if(!this.length)return null;if(l.documentElement!==this[0]&&!r.contains(l.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+t.pageXOffset,top:e.top+t.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,n){if(arguments.length<2){var o=this[0];if("string"==typeof t){if(!o)return;return o.style[i(t)]||getComputedStyle(o,"").getPropertyValue(t)}if(P(t)){if(!o)return;var u={},c=getComputedStyle(o,"");return r.each(t,(function(t,n){u[n]=o.style[i(n)]||c.getPropertyValue(n)})),u}}var a="";if("string"==q(t))n||0===n?a=U(t)+":"+$(t,n):this.each((function(){this.style.removeProperty(U(t))}));else for(e in t)t[e]||0===t[e]?a+=U(e)+":"+$(e,t[e])+";":this.each((function(){this.style.removeProperty(U(e))}));return this.each((function(){this.style.cssText+=";"+a}))},index:function(t){return t?this.indexOf(r(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&c.some.call(this,(function(t){return this.test(K(t))}),F(t))},addClass:function(t){return t?this.each((function(n){if("className"in this){o=[];var e=K(this);J(this,t,n,e).split(/\\s+/g).forEach((function(t){r(this).hasClass(t)||o.push(t)}),this),o.length&&K(this,e+(e?" ":"")+o.join(" "))}})):this},removeClass:function(t){return this.each((function(e){if("className"in this){if(t===n)return K(this,"");o=K(this),J(this,t,e,o).split(/\\s+/g).forEach((function(t){o=o.replace(F(t)," ")})),K(this,o.trim())}}))},toggleClass:function(t,e){return t?this.each((function(o){var i=r(this);J(this,t,o,K(this)).split(/\\s+/g).forEach((function(t){(e===n?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===n?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===n?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],n=this.offsetParent(),e=this.offset(),o=b.test(n[0].nodeName)?{top:0,left:0}:n.offset();return e.top-=parseFloat(r(t).css("margin-top"))||0,e.left-=parseFloat(r(t).css("margin-left"))||0,o.top+=parseFloat(r(n[0]).css("border-top-width"))||0,o.left+=parseFloat(r(n[0]).css("border-left-width"))||0,{top:e.top-o.top,left:e.left-o.left}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||l.body;t&&!b.test(t.nodeName)&&"static"==r(t).css("position");)t=t.offsetParent;return t}))}},r.fn.detach=r.fn.remove,["width","height"].forEach((function(t){var e=t.replace(/./,(function(t){return t[0].toUpperCase()}));r.fn[t]=function(o){var i,u=this[0];return o===n?j(u)?u["inner"+e]:D(u)?u.documentElement["scroll"+e]:(i=this.offset())&&i[t]:this.each((function(n){(u=r(this)).css(t,J(this,o,n,u[t]()))}))}})),["after","prepend","before","append"].forEach((function(t,e){var o=e%2;r.fn[t]=function(){var t,i,u=r.map(arguments,(function(e){var o=[];return"array"==(t=q(e))?(e.forEach((function(t){return t.nodeType!==n?o.push(t):r.zepto.isZ(t)?o=o.concat(t.get()):void(o=o.concat(I.fragment(t)))})),o):"object"==t||null==e?e:I.fragment(e)})),c=this.length>1;return u.length<1?this:this.each((function(t,n){i=o?n:n.parentNode,n=0==e?n.nextSibling:1==e?n.firstChild:2==e?n:null;var a=r.contains(l.documentElement,i),s=/^(text|application)\\/(javascript|ecmascript)$/,f=Rr(),d=f.cspScriptNonce,v=f.cspStyleNonce;u.forEach((function(t){if(c)t=t.cloneNode(!0);else if(!i)return r(t).remove();nt(d)&&"SCRIPT"===t.tagName&&t.setAttribute("nonce",d),nt(v)&&"STYLE"===t.tagName&&t.setAttribute("nonce",v),i.insertBefore(t,n),a&&Y(t,(function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&!s.test(t.type.toLowerCase())||t.src||W(l,t.innerHTML,t.nonce)}))}))}))},r.fn[o?t+"To":"insert"+(e?"Before":"After")]=function(n){return r(n)[t](this),this}})),I.Z.prototype=z.prototype=r.fn,I.uniq=u,I.deserializeValue=X,r.zepto=I,r}();return function(n){var e,r=1,o=Array.prototype.slice,i=n.isFunction,u=function(t){return"string"==typeof t},c={},a={},s="onfocusin"in t,f={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};function d(t){return t._zid||(t._zid=r++)}function v(t,n,e,r){if((n=p(n)).ns)var o=(i=n.ns,new RegExp("(?:^| )"+i.replace(" "," .* ?")+"(?: |$)"));var i;return(c[d(t)]||[]).filter((function(t){return t&&(!n.e||t.e==n.e)&&(!n.ns||o.test(t.ns))&&(!e||d(t.fn)===d(e))&&(!r||t.sel==r)}))}function p(t){var n=(""+t).split(".");return{e:n[0],ns:n.slice(1).sort().join(" ")}}function h(t,n){return t.del&&!s&&t.e in f||!!n}function m(t){return l[t]||s&&f[t]||t}function g(t,r,o,i,u,a,s){var f=d(t),v=c[f]||(c[f]=[]);r.split(/\\s/).forEach((function(r){if("ready"==r)return n(document).ready(o);var c=p(r);c.fn=o,c.sel=u,c.e in l&&(o=function(t){var e=t.relatedTarget;if(!e||e!==this&&!n.contains(this,e))return c.fn.apply(this,arguments)}),c.del=a;var f=a||o;c.proxy=function(n){if(!(n=S(n)).isImmediatePropagationStopped()){n.data=i;var r=f.apply(t,n._args==e?[n]:[n].concat(n._args));return!1===r&&(n.preventDefault(),n.stopPropagation()),r}},c.i=v.length,v.push(c),"addEventListener"in t&&t.addEventListener(m(c.e),c.proxy,h(c,s))}))}function y(t,n,e,r,o){var i=d(t);(n||"").split(/\\s/).forEach((function(n){v(t,n,e,r).forEach((function(n){delete c[i][n.i],"removeEventListener"in t&&t.removeEventListener(m(n.e),n.proxy,h(n,o))}))}))}a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents",n.event={add:g,remove:y},n.proxy=function(t,e){var r=2 in arguments&&o.call(arguments,2);if(i(t)){var c=function(){return t.apply(e,r?r.concat(o.call(arguments)):arguments)};return c._zid=d(t),c}if(u(e))return r?(r.unshift(t[e],t),n.proxy.apply(null,r)):n.proxy(t[e],t);throw new TypeError("expected function")},n.fn.bind=function(t,n,e){return this.on(t,n,e)},n.fn.unbind=function(t,n){return this.off(t,n)},n.fn.one=function(t,n,e,r){return this.on(t,n,e,r,1)};var b=function(){return!0},x=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function S(t,r){if(r||!t.isDefaultPrevented){r||(r=t),n.each(E,(function(n,e){var o=r[n];t[n]=function(){return this[e]=b,o&&o.apply(r,arguments)},t[e]=x}));try{t.timeStamp||(t.timeStamp=(new Date).getTime())}catch(t){}(r.defaultPrevented!==e?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(t.isDefaultPrevented=b)}return t}function C(t){var n,r={originalEvent:t};for(n in t)w.test(n)||t[n]===e||(r[n]=t[n]);return S(r,t)}n.fn.delegate=function(t,n,e){return this.on(n,t,e)},n.fn.undelegate=function(t,n,e){return this.off(n,t,e)},n.fn.live=function(t,e){return n(document.body).delegate(this.selector,t,e),this},n.fn.die=function(t,e){return n(document.body).undelegate(this.selector,t,e),this},n.fn.on=function(t,r,c,a,s){var f,l,d=this;return t&&!u(t)?(n.each(t,(function(t,n){d.on(t,r,c,n,s)})),d):(u(r)||i(a)||!1===a||(a=c,c=r,r=e),a!==e&&!1!==c||(a=c,c=e),!1===a&&(a=x),d.each((function(e,i){s&&(f=function(t){return y(i,t.type,a),a.apply(this,arguments)}),r&&(l=function(t){var e,u=n(t.target).closest(r,i).get(0);if(u&&u!==i)return e=n.extend(C(t),{currentTarget:u,liveFired:i}),(f||a).apply(u,[e].concat(o.call(arguments,1)))}),g(i,t,a,c,r,l||f)})))},n.fn.off=function(t,r,o){var c=this;return t&&!u(t)?(n.each(t,(function(t,n){c.off(t,r,n)})),c):(u(r)||i(o)||!1===o||(o=r,r=e),!1===o&&(o=x),c.each((function(){y(this,t,o,r)})))},n.fn.trigger=function(t,e){return(t=u(t)||n.isPlainObject(t)?n.Event(t):S(t))._args=e,this.each((function(){t.type in f&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):n(this).triggerHandler(t,e)}))},n.fn.triggerHandler=function(t,e){var r,o;return this.each((function(i,c){(r=C(u(t)?n.Event(t):t))._args=e,r.target=c,n.each(v(c,t.type||t),(function(t,n){if(o=n.proxy(r),r.isImmediatePropagationStopped())return!1}))})),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){n.fn[t]=function(n){return 0 in arguments?this.bind(t,n):this.trigger(t)}})),n.Event=function(t,n){u(t)||(t=(n=t).type);var e=document.createEvent(a[t]||"Events"),r=!0;if(n)for(var o in n)"bubbles"==o?r=!!n[o]:e[o]=n[o];return e.initEvent(t,r,!0),S(e)}}(n),function(){try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;t.getComputedStyle=function(t,e){try{return n(t,e)}catch(t){return null}}}}(),function(t){var n=t.zepto,e=n.qsa,r=/^\\s*>/,o="Zepto"+ +new Date;n.qsa=function(n,i){var u,c,a=i;try{a?r.test(a)&&(c=t(n).addClass(o),a="."+o+" "+a):a="*",u=e(n,a)}catch(t){throw t}finally{c&&c.removeClass(o)}return u}}(n),n}(window),No=i.MutationObserver||i.WebkitMutationObserver;function Io(){return E(No)}function _o(t){return new No(t)}var Ao="Expected an array of promises";function Po(){var t=u.createTextNode(""),n=[];return _o((function(){for(var t=n.length,e=0;e<t;e+=1)n[e]();n.splice(0,t)})).observe(t,{characterData:!0}),function(e){n.push(e),t.textContent=t.textContent.length>0?"":"a"}}function qo(t){return new To(t)}function Ro(t){return To.resolve(t)}function jo(t){return To.reject(t)}function Do(t){return h(t)?To.all(t):jo(new TypeError(Ao))}function Lo(t,n,e){var r,o=-1,i=qo((function(t,r){o=d((function(){return r(new Error(e))}),n)}));return(r=[t,i],h(r)?To.race(r):jo(new TypeError(Ao))).then((function(t){return v(o),t}),(function(t){throw v(o),t}))}function Mo(t){if(p(t[dr]))return!1;var n=t[dr];if(p(n[vr]))return!1;var e=n[vr];return E(e[hr])&&E(e[pr])}function Vo(t,n){if(!Mo(t))return!0;var e=t[dr][vr],r=(t[dr][vr][mr]||{})[n];return e[pr](r)}function Uo(){var t=Rr()[br];return function(t,n){return!!n&&Mo(t)}(i,t)}function Fo(){return Vo(i,gr)}function $o(){return function(t,n){if(!Mo(t))return Ro(!0);var e=t[dr][vr],r=(t[dr][vr][mr]||{})[n];return qo((function(t,n){e[hr]((function(){e[pr](r)?t(!0):n(xr)}),!0)}))}(i,gr)}To._setImmediateFn&&(Io()?To._setImmediateFn(Po()):-1!==i.navigator.userAgent.indexOf("MSIE 10")&&To._setImmediateFn((function(t){var n=Oo("<script>");n.on("readystatechange",(function(){n.on("readystatechange",null),n.remove(),n=null,t()})),Oo(u.documentElement).append(n)})));var Ho=pt();function zo(t,n){lo({name:Ue,value:t,expires:n[Ce],domain:n[Re]})}function Bo(){if(Uo()&&!Fo())return Ho;var t=Rr(),n=Kr(i.location.search)[Le];return nt(n)?(zo(n,t),co(Ue)):(Z(co(Ue))&&zo(Ho,t),co(Ue))}function Zo(){return co(Me)}var Jo=/.*\\.(\\d+)_\\d+/;function Go(t){var n=Rr();if(n[Oe]){var e=n[Re],r=new Date(at()+n[Ne]),o=to(Ve),i={domain:e,expires:r};if(nt(o))no(Ve,o,i);else{var u=function(t){if(Z(t))return"";var n=Jo.exec(t);return H(n)||2!==n.length?"":n[1]}(t);Z(u)||no(Ve,u,i)}}}function Ko(t,n,e,r){var o=new t.CustomEvent(e,{detail:r});n.dispatchEvent(o)}!function(t,n){function e(t,e){var r=n.createEvent("CustomEvent");return e=e||{bubbles:!1,cancelable:!1,detail:void 0},r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r}E(t.CustomEvent)||(e.prototype=t.Event.prototype,t.CustomEvent=e)}(i,u);var Xo="at-library-loaded",Yo="at-request-start",Wo="at-request-succeeded",Qo="at-request-failed",ti="at-content-rendering-start",ni="at-content-rendering-succeeded",ei="at-content-rendering-failed",ri="at-content-rendering-no-offers",oi="at-content-rendering-redirect";function ii(t,n){var e=n.mbox,r=n.error,o=n.url,i=n.analyticsDetails,u=n.responseTokens,c=n.execution,a={type:t,tracking:function(t,n){var e=t(),r=n(),o={};return o.sessionId=e,nt(r)?(o.deviceId=r,o):o}(Bo,Zo)};return p(e)||(a.mbox=e),p(r)||(a.error=r),p(o)||(a.url=o),H(i)||(a.analyticsDetails=i),H(u)||(a.responseTokens=u),H(c)||(a.execution=c),a}function ui(t){var n=ii(Yo,t);Ko(i,u,Yo,n)}function ci(t,n){var e=ii(Wo,t);e.redirect=n,Ko(i,u,Wo,e)}function ai(t){var n=ii(Qo,t);Ko(i,u,Qo,n)}function si(t){var n=ii(ti,t);Ko(i,u,ti,n)}function fi(t){var n=ii(ni,t);Ko(i,u,ni,n)}function li(t){var n=ii(ei,t);Ko(i,u,ei,n)}function di(t){var n=ii(ri,t);Ko(i,u,ri,n)}function vi(t){var n=ii(oi,t);Ko(i,u,oi,n)}var pi=function(t){var n=document.createElement("script");n.src=t,n.async=!0;var e=function(t,n){return new To((function(e,r){"onload"in n?(n.onload=function(){e(n)},n.onerror=function(){r(new Error("Failed to load script "+t))}):"readyState"in n&&(n.onreadystatechange=function(){var t=n.readyState;"loaded"!==t&&"complete"!==t||(n.onreadystatechange=null,e(n))})}))}(t,n);return document.getElementsByTagName("head")[0].appendChild(n),e},hi=":eq(",mi=")",gi=hi.length,yi=/((\\.|#)(-)?\\d{1})/g;function bi(t){var n=t.charAt(0),e=t.charAt(1),r=t.charAt(2),o={key:t};return o.val="-"===e?""+n+e+"\\\\3"+r+" ":n+"\\\\3"+e+" ",o}function xi(t){if(tt(t))return Oo(t);if(!D(t))return Oo(t);var n=function(t){var n=t.match(yi);return H(n)?t:lt((function(t,n){return t.replace(n.key,n.val)}),t,ut(bi,n))}(t);if(-1===n.indexOf(hi))return Oo(n);var e=function(t){for(var n,e,r,o,i=[],u=B(t),c=u.indexOf(hi);-1!==c;)n=B(u.substring(0,c)),o=(e=B(u.substring(c))).indexOf(mi),r=B(e.substring(gi,o)),c=(u=B(e.substring(o+1))).indexOf(hi),n&&r&&i.push({sel:n,eq:Number(r)});return u&&i.push({sel:u}),i}(n);return lt((function(t,n){var e=n.sel,r=n.eq;return t=t.find(e),rt(r)&&(t=t.eq(r)),t}),Oo(u),e)}function wi(t){return xi(t).length>0}function Ei(t){return Oo("<"+pn+"/>").append(t)}function Si(t){return xi(t).parent()}function Ci(t,n){return xi(n).find(t)}var ki="Unable to load target-vec.js",Ti="Loading target-vec.js",Oi="_AT",Ni="clickHandlerForExperienceEditor",Ii="currentView";function _i(){if(mo()){i[Oi]=i[Oi]||{},i[Oi].querySelectorAll=xi;var t=Rr()[Pe];xo(Ti),pi(t).then((function(){u.addEventListener(fn,(function(t){E(i[Oi][Ni])&&i[Oi][Ni](t)}),!0)}))[\'catch\']((function(){return bo(ki)}))}}var Ai="at_qa_mode",Pi="at_preview_token",qi="at_preview_index",Ri="at_preview_listed_activities_only",ji="at_preview_evaluate_as_true_audience_ids",Di="at_preview_evaluate_as_false_audience_ids",Li="_",Mi=function(t){return!p(t)};function Vi(t){var n=function(t){return parseInt(t,10)}(t);return isNaN(n)?null:n}function Ui(t){return vt(Li,t)}function Fi(t){var n=vt(Li,t),e=Vi(n[0]);if(p(e))return null;var r={};r.activityIndex=e;var o=Vi(n[1]);return p(o)||(r.experienceIndex=o),r}function $i(t){return _(Mi,ut(Fi,t))}function Hi(t){var n=Kr(t),e=n[Pi];if(Z(e))return null;var r={};r.token=e;var o=n[Ri];nt(o)&&o===Qt&&(r.listedActivitiesOnly=!0);var i=n[ji];nt(i)&&(r.evaluateAsTrueAudienceIds=Ui(i));var u=n[Di];nt(u)&&(r.evaluateAsFalseAudienceIds=Ui(u));var c,a=n[qi];return H(a)?r:(r.previewIndexes=h(c=a)?$i(c):$i([c]),r)}function zi(t){return xi(t).empty().remove()}function Bi(t,n){return xi(n).after(t)}function Zi(t,n){return xi(n).before(t)}function Ji(t,n){return xi(n).append(t)}function Gi(t){return xi(t).html()}var Ki="at-",Xi="at-body-style",Yi="#"+Xi,Wi=Ki+"views";function Qi(t,n){return"<"+dn+" "+an+\'="\'+t+\'" \'+sn+\'="\'+se+\'">\'+n+"</"+dn+">"}function tu(t,n){if(!H(n)){var e=_((function(t){return!wi("#"+(Ki+L(t)))}),n);if(!H(e)){var r=t[xe];Ji(ot("\\n",ut((function(t){return function(t,n){return Qi(Ki+L(n),n+" {"+t+"}")}(r,t)}),e)),ln)}}}function nu(t,n){H(n)||wi("#"+Wi)||Ji(function(t,n){return Qi(Wi,n+" {"+t+"}")}(t[xe],ot(", ",n)),ln)}function eu(){!function(t){if(!0===t[Ee]&&!wi(Yi)){var n=t[we];Ji(Qi(Xi,n),ln)}}(Rr())}function ru(){!function(t){!0===t[Ee]&&wi(Yi)&&zi(Yi)}(Rr())}var ou="Disabled due to optout",iu="MCAAMB",uu="MCAAMLH",cu="MCMID",au="MCOPTOUT",su="getSupplementalDataID",fu="getCustomerIDs",lu="trackingServer",du=lu+"Secure";function vu(t){return!p(t[an])}function pu(t){return!p(t[Ye])}function hu(t){return vu(t)||pu(t)}var mu="Visitor",gu="getInstance",yu="isAllowed";var bu="Visitor API requests timed out",xu="Visitor API requests error";function wu(t){return xo(xu,t),{}}function Eu(t,n,e){return p(t)?Ro({}):Lo(function(t,n){if(!E(t.getVisitorValues))return Ro({});var e=[cu,iu,uu];return n&&e.push(au),qo((function(n){t.getVisitorValues((function(t){return n(t)}),e)}))}(t,e),n,bu)[\'catch\'](wu)}function Su(t,n){return p(t)?{}:function(t,n){if(!E(t.getVisitorValues))return{};var e=[cu,iu,uu];n&&e.push(au);var r={};return t.getVisitorValues((function(t){return l(r,t)}),e),r}(t,n)}function Cu(){var t=Rr(),n=t[pe],e=t[Ae];return function(t,n,e){if(Z(n))return null;if(p(t[mu]))return null;if(!E(t[mu][gu]))return null;var r=t[mu][gu](n,{sdidParamExpiry:e});return x(r)&&E(r[yu])&&r[yu]()?r:null}(i,n,e)}function ku(){return function(t){if(p(t))return[];if(!E(t[fu]))return[];var n=t[fu]();return x(n)?lt((function(t,n,e){var r={};return r[Qe]=e,vu(n)&&(r[an]=n[an]),pu(n)&&(r[We]=function(t){switch(t){case 0:return"unknown";case 1:return"authenticated";case 2:return"logged_out";default:return"unknown"}}(n[Ye])),t.push(r),t}),[],_(hu,n)):[]}(Cu())}function Tu(t){return function(t,n){return p(t)?null:E(t[su])?t[su](n):null}(Cu(),t)}function Ou(t){return function(t,n){if(p(t))return null;var e=t[n];return p(e)?null:e}(Cu(),t)}var Nu={};function Iu(t,n){Nu[t]=n}function _u(t){return Nu[t]}var Au="Data provider",Pu="timed out",qu=2e3;function Ru(t){var n=t[ne];if(!D(n)||H(n))return!1;var e=t[be];if(!D(e)||H(e))return!1;var r=t[me];return!(!p(r)&&!rt(r))&&!!E(t[ce])}function ju(t,n,e,r,o,i){var u={};u[t]=n,u[e]=r,u[o]=i;var c={};return c[Ze]=u,c}function Du(t){var n=t[ne],e=t[be],r=t[me]||qu;return Lo(function(t){return qo((function(n,e){t((function(t,r){p(t)?n(r):e(t)}))}))}(t[ce]),r,Pu).then((function(t){var r=ju(ne,n,be,e,re,t);return xo(Au,Wn,r),Co(r),t}))[\'catch\']((function(t){var r=ju(ne,n,be,e,Gn,t);return xo(Au,Gn,r),Co(r),{}}))}function Lu(t){var n=lt((function(t,n){return l(t,n)}),{},t);return Iu(Je,n),n}function Mu(t){return function(t){var n=t[Be];if(p(n))return!1;var e=n[Je];return!(!h(e)||H(e))}(t)?Do(ut(Du,_(Ru,t[Be][Je]))).then(Lu):Ro({})}function Vu(){return p(t=_u(Je))?{}:t;var t}var Uu="authorization",Fu="mboxDebugTools";function $u(){var t,n=Z(t=Kr(i.location.search)[Uu])?null:t,e=function(){var t=to(Fu);return Z(t)?null:t}();return n||e}function Hu(t){return!H(t)&&2===t.length&&nt(t[0])}function zu(t,n,e,r){q((function(t,o){x(t)?(n.push(o),zu(t,n,e,r),n.pop()):H(n)?e[r(o)]=t:e[r(ot(".",n.concat(o)))]=t}),t)}function Bu(t){if(!E(t))return{};var n,e,r,o,i=null;try{i=t()}catch(t){return{}}return p(i)?{}:h(i)?(n=lt((function(t,n){return t.push(function(t){var n=t.indexOf("=");return-1===n?[]:[t.substr(0,n),t.substr(n+1)]}(n)),t}),[],_(nt,i)),lt((function(t,n){return t[Yr(B(n[0]))]=Yr(B(n[1])),t}),{},_(Hu,n))):D(i)&&nt(i)?_((function(t,n){return nt(n)}),Kr(i)):x(i)?(e=i,o={},p(r)?zu(e,[],o,S):zu(e,[],o,r),o):{}}function Zu(t){return l({},t,Bu(i.targetPageParamsAll))}function Ju(t){var n=Rr(),e=n[ge],r=n[je],o=n[De];return e!==t?Zu(r||{}):l(Zu(r||{}),function(t){return l({},t,Bu(i.targetPageParams))}(o||{}))}var Gu=function(){var t=u.createElement("canvas"),n=t.getContext("webgl")||t.getContext("experimental-webgl");if(p(n))return null;var e=n.getExtension("WEBGL_debug_renderer_info");if(p(e))return null;var r=n.getParameter(e.UNMASKED_RENDERER_WEBGL);return p(r)?null:r}();function Ku(){var t=i.devicePixelRatio;if(!p(t))return t;t=1;var n=i.screen,e=n.systemXDPI,r=n.logicalXDPI;return!p(e)&&!p(r)&&e>r&&(t=e/r),t}function Xu(){var t=i.screen,n=t.orientation,e=t.width,r=t.height;if(p(n))return e>r?"landscape":"portrait";if(p(n.type))return null;var o=vt("-",n.type);if(H(o))return null;var u=o[0];return p(u)?null:u}var Yu="profile.",Wu="mbox3rdPartyId",Qu="at_property",tc="orderId",nc="orderTotal",ec="productPurchasedId",rc="productId",oc="categoryId";function ic(t){return-1!==t.indexOf(Yu)}function uc(t){return ic(t)||function(t){return t===Wu}(t)||function(t){return t===Qu}(t)||function(t){return t===tc}(t)||function(t){return t===nc}(t)||function(t){return t===ec}(t)||function(t){return t===rc}(t)||function(t){return t===oc}(t)}function cc(t){return lt((function(t,n,e){if(!ic(e))return t;var r=e.substring(Yu.length);return Z(r)?t:(t[r]=p(n)?"":n,t)}),{},t)}var ac="POST",sc="Network request failed",fc="Request timed out",lc="Malformed response JSON";function dc(t){var n=t.url,e=t.headers,r=t.body,o=t.timeout,i=t.async;return qo((function(t,u){var c=new window.XMLHttpRequest;(c=function(t,n){return t.onerror=function(){n(new Error(sc))},t}(c=function(t,n,e){return t.onload=function(){var r=1223===t.status?204:t.status;if(r<100||r>599)e(new Error(sc));else{var o;try{o=JSON.parse(t.responseText)}catch(t){return void e(new Error(lc))}var i=t.getAllResponseHeaders();n({status:r,headers:i,response:o})}},t}(c,t,u),u)).open(ac,n,i),c.withCredentials=!0,c=function(t){return q((function(n,e){h(n)&&q((function(n){t.setRequestHeader(e,n)}),n)}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),t}(c,e),i&&(c=function(t,n,e){return t.timeout=n,t.ontimeout=function(){e(new Error(fc))},t}(c,o,u)),c.send(JSON.stringify(r))})).then((function(t){var n=t.response,e=n.status,r=n.message;if(!p(e)&&!p(r))throw new Error(r);return n}))}var vc="web",pc="mboxedge",hc=".tt.omtrdc.net",mc=function(t){return!H(t)};function gc(t){if(t[au])throw new Error(ou);return t}function yc(){var t=function(){var t=Cu(),n=Rr();return Eu(t,n[Te],n[Ie])}(),n=Mu(i);return Do([t.then(gc),n])}function bc(){return[Su(Cu(),Rr()[Ie]),Vu()]}function xc(t){var n=t.id,e=t.integrationCode,r=t.authenticatedState,o={};return nt(n)&&(o.id=n),nt(e)&&(o.integrationCode=e),nt(r)&&(o.authenticatedState=r),o}function wc(t,n,e,r,o){var i={};nt(n)&&(i.tntId=n),nt(e)&&(i.thirdPartyId=e),nt(t.thirdPartyId)&&(i.thirdPartyId=t.thirdPartyId);var u=r[cu];return nt(u)&&(i.marketingCloudVisitorId=u),nt(t.marketingCloudVisitorId)&&(i.marketingCloudVisitorId=t.marketingCloudVisitorId),H(t.customerIds)?(H(o)||(i.customerIds=function(t){return ut(xc,t)}(o)),i):(i.customerIds=t.customerIds,i)}function Ec(t,n){var e={},r=function(t,n){if(!p(t))return t;var e={};if(H(n))return e;var r=n[uu],o=parseInt(r,10);isNaN(o)||(e.locationHint=o);var i=n[iu];return nt(i)&&(e.blob=i),e}(t.audienceManager,n);return H(r)||(e.audienceManager=r),H(t.analytics)||(e.analytics=t.analytics),e}function Sc(t,n){if(!p(t)&&nt(t.token))return t;var e={},r=n[Qu];return nt(r)&&(e.token=r),e}function Cc(t){return p(t)?function(){var t=to(Ai);if(Z(t))return{};try{return JSON.parse(t)}catch(t){return{}}}():t}function kc(t){var n={},e=function(t){return t[tc]}(t);p(e)||(n.id=e);var r=function(t){return t[nc]}(t),o=parseFloat(r);isNaN(o)||(n.total=o);var i=function(t){var n=ut(B,vt(",",t[ec]));return _(nt,n)}(t);return H(i)||(n.purchasedProductIds=i),n}function Tc(t){var n={},e=function(t){return t[rc]}(t);p(e)||(n.id=e);var r=function(t){return t[oc]}(t);return p(r)||(n.categoryId=r),n}function Oc(t,n){var e={},r=l({},function(t){return lt((function(t,n,e){return uc(e)?t:(t[e]=p(n)?"":n,t)}),{},t)}(n),t.parameters||{}),o=l({},cc(n),t.profileParameters||{}),i=l({},kc(n),t.order||{}),u=l({},Tc(n),t.product||{});return H(r)||(e.parameters=r),H(o)||(e.profileParameters=o),H(i)||(e.order=i),H(u)||(e.product=u),e}function Nc(t,n){var e=t.index,r=t.name,o=t.address,i=Oc(t,l({},n,Ju(r)));return p(e)||(i.index=e),nt(r)&&(i.name=r),H(o)||(i.address=o),i}function Ic(t,n){var e=t.prefetch,r=void 0===e?{}:e,o={};if(H(r))return o;var i=r.mboxes;p(i)||!h(i)||H(i)||(o.mboxes=ut((function(t){return Nc(t,n)}),i));var u=r.views;return p(u)||!h(u)||H(u)||(o.views=ut((function(t){return function(t,n){var e=t.name,r=t.address,o=Oc(t,n);return nt(e)&&(o.name=e),H(r)||(o.address=r),o}(t,n)}),u)),o}function _c(t,n){if(Uo()&&!Vo(i,yr))return null;var e=Rr(),r=Tu(t),o=Ou(lu),u=Ou(du),c=n.experienceCloud,a=(void 0===c?{}:c).analytics,s=void 0===a?{}:a,f=s.logging,l=s.supplementalDataId,d=s.trackingServer,v=s.trackingServerSecure,h={};return p(f)?h.logging=e[wr]:h.logging=f,p(l)||(h.supplementalDataId=l),nt(r)&&(h.supplementalDataId=r),p(d)||(h.trackingServer=d),nt(o)&&(h.trackingServer=o),p(v)||(h.trackingServerSecure=v),nt(u)&&(h.trackingServerSecure=u),H(h)?null:h}function Ac(t,n,e){var r=function(t){var n=Rr()[ge];return l({},t,Ju(n))}(e),o=Zo(),c=r[Wu],a=ku(),s=wc(t.id||{},o,c,n,a),f=Sc(t.property,r),d=Ec(t.experienceCloud||{},n),v=function(t){if(!p(t)&&nt(t.authorizationToken))return t;var n={},e=$u();return nt(e)&&(n.authorizationToken=e),n}(t.trace),m=Cc(t.qaMode),g=function(t,n){var e=t.execute,r=void 0===e?{}:e,o={};if(H(r))return o;var i=r.pageLoad;p(i)||(o.pageLoad=Oc(i,n));var u=r.mboxes;if(!p(u)&&h(u)&&!H(u)){var c=_(mc,ut((function(t){return Nc(t,n)}),u));H(c)||(o.mboxes=c)}return o}(t,r),y=Ic(t,r),b=t.notifications,x={};return x.requestId=pt(),x.context=function(t){if(!p(t)&&t.channel===vc)return t;var n,e,r=(t||{}).beacon;return{userAgent:i.navigator.userAgent,timeOffsetInMinutes:-(new Date).getTimezoneOffset(),channel:vc,screen:(e=i.screen,{width:e.width,height:e.height,orientation:Xu(),colorDepth:e.colorDepth,pixelRatio:Ku()}),window:(n=u.documentElement,{width:n.clientWidth,height:n.clientHeight}),browser:{host:i.location.hostname,webGLRenderer:Gu},address:{url:i.location.href,referringUrl:u.referrer},beacon:r}}(t.context),H(s)||(x.id=s),H(f)||(x.property=f),H(v)||(x.trace=v),H(d)||(x.experienceCloud=d),H(m)||(x.qaMode=m),H(g)||(x.execute=g),H(y)||(x.prefetch=y),H(b)||(x.notifications=b),x}function Pc(t,n,e){var r=e[0],o=e[1];return Ac(t,r,l({},o,n))}function qc(t,n){return yc().then((function(e){return Pc(t,n,e)}))}function Rc(t,n){return rt(n)?n<0?t[me]:n:t[me]}function jc(t){var n=t[he];if(!t[Oe])return n;var e=function(){if(!Rr()[Oe])return"";var t=to(Ve);return Z(t)?"":t}();return Z(e)?n:""+pc+e+hc}function Dc(t){return t[qe]+"//"+jc(t)+t[Ge]+"?"+Xr({client:t[ve],sessionId:Bo(),version:t[be]})}function Lc(t,n){var e=Rr(),r=Dc(e),o=b({},ir,[ur]),i=Rc(e,n),u={url:r,headers:o,body:t,timeout:i,async:!0};return xo(ue,t),Co({request:t}),dc(u).then((function(n){return xo(ie,n),Co({response:n}),{request:t,response:n}}))}var Mc,Vc=function(t){return function(n){return n[t]}},Uc=function(t){return function(n){return!t(n)}},Fc=Uc(p),$c=function(t){return t.status===Gn},Hc=function(t){return t.type===oe},zc=function(t){return t.type===Mt},Bc=(Mc=Fc,function(t){return _(Mc,t)}),Zc=Vc("options"),Jc=Vc(mt),Gc=Vc("responseTokens"),Kc=function(t){return nt(t.name)},Xc=function(t){return x(t)&&Kc(t)},Yc=function(t){return x(t)&&Kc(t)&&function(t){return!p(t.index)}(t)},Wc=function(t){return x(t)&&Kc(t)},Qc=function(t){return nt(t.selector)},ta=Vc("data"),na=P([ta,Fc]);function ea(t,n){return{status:Wn,type:t,data:n}}function ra(t,n){return{status:Gn,type:t,data:n}}function oa(t){return x(t)}function ia(t){return!!oa(t)&&nt(t.eventToken)}function ua(t){return!H(t)&&!Z(t.type)&&nt(t.eventToken)}function ca(t){return!!ua(t)&&nt(t.selector)}function aa(t){var n=t.id;return x(n)&&nt(n.tntId)}function sa(t){var n=t.response;return aa(n)&&function(t){var n=Rr();lo({name:Me,value:t,expires:n[Se],domain:n[Re]})}(n.id.tntId),t}function fa(t){var n=t.response;aa(n)&&Go(n.id.tntId);return Go(null),t}function la(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).trace;H(t)||function(t){So(i,He,t,ho())}(t)}function da(t){var n=t.response,e=n.execute,r=void 0===e?{}:e,o=n.prefetch,i=void 0===o?{}:o,u=r.pageLoad,c=void 0===u?{}:u,a=r.mboxes,s=void 0===a?[]:a,f=i.mboxes,l=void 0===f?[]:f,d=i.views,v=void 0===d?[]:d;return la(c),q(la,s),q(la,l),q(la,v),t}var va="adobe_mc_sdid";function pa(t){var n=t.queryKey,e=n[va];if(!D(e))return n;if(Z(e))return n;var r=Math.round(at()/1e3);return n[va]=e.replace(/\\|TS=\\d+/,"|TS="+r),n}function ha(t){return t.queryKey}function ma(t,n,e){var r=Qr(t),o=r.protocol,i=r.host,u=r.path,c=""===r.port?"":":"+r.port,a=Z(r.anchor)?"":"#"+r.anchor,s=e(r),f=Xr(l({},s,n));return o+"://"+i+c+u+(Z(f)?"":"?"+f)+a}function ga(t,n){return ma(t,n,pa)}var ya="Network request failed",ba="Request timed out",xa="URL is required",wa="GET",Ea="POST",Sa="method",Ca="url",ka="headers",Ta="data",Oa="credentials",Na="timeout",Ia="async";function _a(t){var n=t[Sa]||wa,e=t[Ca]||function(t){throw new Error(t)}(xa),r=t[ka]||{},o=t[Ta]||null,i=t[Oa]||!1,u=t[Na]||3e3,c=!!p(t[Ia])||!0===t[Ia],a={};return a[Sa]=n,a[Ca]=e,a[ka]=r,a[Ta]=o,a[Oa]=i,a[Na]=u,a[Ia]=c,a}function Aa(t,n){var e=_a(n),r=e[Sa],o=e[Ca],i=e[ka],u=e[Ta],c=e[Oa],a=e[Na],s=e[Ia];return qo((function(n,e){var f=new t.XMLHttpRequest;(f=function(t,n){return t.onerror=function(){n(new Error(ya))},t}(f=function(t,n,e){return t.onload=function(){var r=1223===t.status?204:t.status;if(r<100||r>599)e(new Error(ya));else{var o=t.responseText,i=t.getAllResponseHeaders();n({status:r,headers:i,response:o})}},t}(f,n,e),e)).open(r,o,s),f=function(t,n){return q((function(n,e){q((function(n){return t.setRequestHeader(e,n)}),n)}),n),t}(f=function(t,n){return!0===n&&(t.withCredentials=n),t}(f,c),i),s&&(f=function(t,n,e){return t.timeout=n,t.ontimeout=function(){e(new Error(ba))},t}(f,a,e)),f.send(u)}))}function Pa(t){return Aa(i,t)}function qa(t,n,e){var r={};return r[Sa]=wa,r[Ca]=function(t,n){return ma(t,n,ha)}(t,n),r[Na]=e,r}function Ra(t){if(!function(t){return t>=200&&t<300||304===t}(t.status))return null;var n=t.response;if(Z(n))return null;var e={};return e.type=rn,e.content=n,e}var ja=/CLKTRK#(\\S+)/,Da=/CLKTRK#(\\S+)\\s/;function La(t){var n=t[mt],e=function(t){var n=t[Ct];if(Z(n))return"";var e=ja.exec(n);return H(e)||2!==e.length?"":e[1]}(t);if(Z(e)||Z(n))return t;var r=t[Ct];return t[Ct]=r.replace(Da,""),t[mt]=function(t,n){var e=document.createElement(pn);e.innerHTML=n;var r=e.firstElementChild;return p(r)?n:(r.id=t,r.outerHTML)}(e,n),t}var Ma=function(t){return!p(t)};function Va(t){return!p(t.selector)}function Ua(t){var n=t[ht];if(Z(n))return null;switch(n){case Tt:case Nt:case Ht:case Bt:case Jt:case Ft:case $t:return function(t){if(!Va(t))return null;var n=La(t);return D(n[mt])?n:(xo(qn,n),null)}(t);case Lt:return function(t){return Va(t)?D(t[mt])?t:(xo(qn,t),null):null}(t);case _t:return function(t){return Va(t)?x(t[mt])?t:(xo(Rn,t),null):null}(t);case At:return function(t){return Va(t)?D(t[mt])?t:(xo(Un,t),null):null}(t);case Pt:return function(t){return Va(t)?x(t[mt])?t:(xo(jn,t),null):null}(t);case Rt:return function(t){return Va(t)?x(t[mt])?t:(xo(Dn,t),null):null}(t);case jt:return function(t){return Va(t)?x(t[mt])?t:(xo(Ln,t),null):null}(t);case Dt:return function(t){return Va(t)?t:null}(t);case qt:return function(t){return Va(t)?x(t[mt])?t:(xo(Mn,t),null):null}(t);case Mt:return function(t){var n=t.content;return Z(n)?(xo(Vn,t),null):(t.content=ga(n,{}),t)}(t);default:return null}}function Fa(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).options;return h(t)?H(t)?[]:Bc(ut(Gc,t)):[]}function $a(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).execute,n=void 0===t?{}:t,e=n.pageLoad,r=void 0===e?{}:e,o=n.mboxes,i=void 0===o?[]:o,u=Zc(r)||[],c=A(Bc(ut(Zc,i))),a=A([u,c]),s=A(ut(Jc,_(Hc,a))),f=_(zc,a),l=_(zc,s),d=f.concat(l),v={};if(H(d))return v;var p=d[0].content;return Z(p)?v:(v.url=p,v)}function Ha(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).analytics;return H(t)?[]:[t]}function za(t,n){t.parameters=n.parameters,t.profileParameters=n.profileParameters,t.order=n.order,t.product=n.product}function Ba(t,n){var e=n[0],r=n[1],o=!H(e),i=!H(r);return o||i?(o&&(t.options=e),i&&(t.metrics=r),t):t}function Za(t){switch(t.type){case Mt:return Ro(function(t){var n=t.content;if(Z(n))return xo(Vn,t),null;var e=l({},t);return e.content=ga(n,{}),e}(t));case on:return function(t){return Pa(qa(t.content,{},Rr()[Na])).then(Ra)[\'catch\']((function(){return null}))}(t);case oe:return Ro(function(t){var n=t[mt];if(!h(n))return null;if(H(n))return null;var e=_(Ma,ut(Ua,n));if(H(e))return null;var r=l({},t);return r.content=e,r}(t));default:return Ro(t)}}function Ja(t,n){if(!h(t))return Ro([]);if(H(t))return Ro([]);var e=_(n,t);return H(e)?Ro([]):Do(ut((function(t){return Za(t)}),e)).then(Bc)}function Ga(t,n){return h(t)?H(t)?Ro([]):Ro(_(n,t)):Ro([])}function Ka(t){var n=t.name,e=t.analytics,r=t.options,o=t.metrics,i={name:n,analytics:e};return Do([Ja(r,oa),Ga(o,ua)]).then((function(t){return Ba(i,t)}))}function Xa(t,n){var e=n.index,r=n.name,o=n.state,i=n.analytics,u=n.options,c=n.metrics,a=function(t,n,e){var r,o=t.prefetch,i=(void 0===o?{}:o).mboxes,u=void 0===i?[]:i;return H(u)?null:(r=_((function(t){return function(t,n,e){return t.index===n&&t.name===e}(t,n,e)}),u))&&r.length?r[0]:void 0}(t,e,r),s={name:r,state:o,analytics:i};return p(a)||za(s,a),Do([Ja(u,ia),Ga(c,ua)]).then((function(t){return Ba(s,t)}))}function Ya(t,n){var e=n.name,r=n.state,o=n.analytics,i=n.options,u=n.metrics,c=function(t){var n=t.prefetch,e=(void 0===n?{}:n).views,r=void 0===e?[]:e;return H(r)?null:r[0]}(t),a={name:e.toLowerCase(),state:r,analytics:o};return p(c)||za(a,c),Do([Ja(i,ia),Ga(u,ca)]).then((function(t){return Ba(a,t)}))}function Wa(t){var n=t[0],e=t[1],r=t[2],o=t[3],i=t[4],u={},c={};x(n)&&(c.pageLoad=n),H(e)||(c.mboxes=e);var a={};return H(r)||(a.mboxes=r),H(o)||(a.views=o),H(i)||(a.metrics=i),H(c)||(u.execute=c),H(a)||(u.prefetch=a),u}function Qa(t){var n=P([da,sa,fa])(t),e=function(t){var n=t.response.execute;if(!x(n))return Ro(null);var e=n.pageLoad;if(!x(e))return Ro(null);var r=e.analytics,o=e.options,i=e.metrics,u={analytics:r};return Do([Ja(o,oa),Ga(i,ca)]).then((function(t){return Ba(u,t)}))}(n),r=function(t){var n=t.response.execute;if(!x(n))return Ro([]);var e=n.mboxes;return!h(e)||H(e)?Ro([]):Do(ut(Ka,_(Xc,e))).then(Bc)}(n),o=function(t){var n=t.request,e=t.response.prefetch;if(!x(e))return Ro([]);var r=e.mboxes;return!h(r)||H(r)?Ro([]):Do(ut((function(t){return Xa(n,t)}),_(Yc,r))).then(Bc)}(n),i=function(t){var n=t.request,e=t.response.prefetch;if(!x(e))return Ro([]);var r=e.views;return!h(r)||H(r)?Ro([]):Do(ut((function(t){return Ya(n,t)}),_(Wc,r))).then(Bc)}(n);return Do([e,r,o,i,function(t){var n=t.response.prefetch;return x(n)?Ga(n.metrics,ca):Ro([])}(n)]).then(Wa)}function ts(t){return!H($a(t))}function ns(t){var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.execute,e=void 0===n?{}:n,r=t.prefetch,o=void 0===r?{}:r,i=e.pageLoad,u=void 0===i?{}:i,c=e.mboxes,a=void 0===c?[]:c,s=o.mboxes,f=void 0===s?[]:s,l=o.views,d=void 0===l?[]:l,v=Fa(u),p=A(ut(Fa,a)),h=A(ut(Fa,f)),m=A(ut(Fa,d));return A([v,p,h,m])}(t),e={};return H(n)||(e.responseTokens=n),e}function es(t){var n=ns(t),e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.execute,e=void 0===n?{}:n,r=t.prefetch,o=void 0===r?{}:r,i=e.pageLoad,u=void 0===i?{}:i,c=e.mboxes,a=void 0===c?[]:c,s=o.mboxes,f=void 0===s?[]:s,l=o.views,d=void 0===l?[]:l,v=Ha(u),p=A(ut(Ha,a)),h=A(ut(Ha,f)),m=A(ut(Ha,d));return A([v,p,h,m])}(t);return H(e)||(n.analyticsDetails=e),xo(_n,t),ci(n,ts(t)),Ro(t)}function rs(t){var n=Rr()[ge],e=t.mbox,r=t.timeout,o=x(t.params)?t.params:{},i={},u={};e===n?u.pageLoad={}:u.mboxes=[{index:0,name:e}],i.execute=u;var c=_c(e,i);if(!H(c)){var a={};a.analytics=c,i.experienceCloud=a}return ui({mbox:e}),qc(i,o).then((function(t){return Lc(t,r)})).then(Qa).then((function(t){return function(t,n){var e=ns(n);return e.mbox=t,xo(_n,n),ci(e,ts(n)),Ro(n)}(e,t)}))[\'catch\']((function(t){return function(t,n){return bo(In,n),ai({mbox:t,error:n}),jo(n)}(e,t)}))}function os(t){var n=Rr()[ge],e=t.consumerId,r=void 0===e?n:e,o=t.request,i=t.timeout,u=_c(r,o);if(!H(u)){var c=o.experienceCloud||{};c.analytics=u,o.experienceCloud=c}return ui({}),qc(o,{}).then((function(t){return Lc(t,i)})).then(Qa).then((function(t){return es(t)}))[\'catch\']((function(t){return function(t){return bo(In,t),ai({error:t}),jo(t)}(t)}))}function is(t,n){return xi(n).addClass(t)}function us(t,n){return xi(n).css(t)}function cs(t,n){return xi(n).attr(t)}function as(t,n,e){return xi(e).attr(t,n)}function ss(t,n){return xi(n).removeAttr(t)}function fs(t,n,e){var r=cs(t,e);nt(r)&&(ss(t,e),as(n,r,e))}var ls="visibilityState",ds="visible",vs=100;function ps(t){return new Error("Could not find: "+t)}function hs(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rr()[ke],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xi,r=e(t);return H(r)?Io()?function(t,n,e){return qo((function(r,o){var i=_o((function(){var n=e(t);H(n)||(i.disconnect(),r(n))}));d((function(){i.disconnect(),o(ps(t))}),n),i.observe(u,{childList:!0,subtree:!0})}))}(t,n,e):u[ls]===ds?function(t,n,e){return qo((function(r,o){!function n(){var o=e(t);H(o)?i.requestAnimationFrame(n):r(o)}(),d((function(){o(ps(t))}),n)}))}(t,n,e):function(t,n,e){return qo((function(r,o){!function n(){var o=e(t);H(o)?d(n,vs):r(o)}(),d((function(){o(ps(t))}),n)}))}(t,n,e):Ro(r)}function ms(t){return cs(nn,t)}function gs(t){return nt(cs(nn,t))}function ys(t){return q((function(t){return fs(cn,nn,t)}),F(Ci(vn,t))),t}function bs(t){return q((function(t){return fs(nn,cn,t)}),F(Ci(vn,t))),t}function xs(t){return xo($n,t),cs(cn,as(cn,t,Oo("<"+vn+"/>")))}function ws(t){var n=_(gs,F(Ci(vn,t)));return H(n)?t:(q(xs,ut(ms,n)),t)}function Es(t){var n=cs(cn,t);return nt(n)?n:null}function Ss(t){return t}function Cs(t,n){return bo(Nn,n),Co({action:t,error:n}),t}function ks(t,n){var e,r=xi(n[Ct]),o=function(t){return P([ys,ws,bs])(t)}(Ei(n[mt])),i=function(t){return _(nt,ut(Es,F(Ci(un,t))))}(o);try{e=Ro(t(r,o))}catch(t){return jo(Cs(n,t))}return H(i)?e.then((function(){return Ss(n)}))[\'catch\']((function(t){return Cs(n,t)})):e.then((function(){return function(t){return lt((function(t,n){return t.then((function(){return xo(Jn,n),Co({remoteScript:n}),pi(n)}))}),Ro(),t)}(i)})).then((function(){return Ss(n)}))[\'catch\']((function(t){return Cs(n,t)}))}var Ts="script,link,"+dn;function Os(t){var n=l({},t),e=n[mt];if(Z(e))return n;var r,o=xi(n[Ct]);return r=ln,xi(o).is(r)?(n[ht]=Ht,n[mt]=function(t){var n=Ei(t);return ot("",lt((function(t,n){return t.push(Gi(Ei(n))),t}),[],F(Ci(Ts,n))))}(e),n):n}function Ns(t){return t.indexOf("px")===t.length-2?t:t+"px"}function Is(t,n){return e=Gi(n),xi(t).html(e);var e}function _s(t){var n=xi(t[Ct]),e=t[mt];return xo(Pn,t),Co({action:t}),function(t,n){xi(n).text(t)}(e,n),Ro(t)}function As(t,n){return Ji(Gi(n),t)}function Ps(t,n){return e=Gi(n),xi(t).prepend(e);var e}function qs(t,n){var e=Si(t);return zi(Zi(Gi(n),t)),e}function Rs(t,n){return xi(Zi(Gi(n),t)).prev()}function js(t,n){return xi(Bi(Gi(n),t)).next()}function Ds(t,n){return Si(Zi(Gi(n),t))}function Ls(t){var n=xi(t[Ct]),e=t[mt],r=e[St];return xo(Pn,t),Co({action:t}),Z(r)?us(e,n):function(t,n,e){q((function(t){q((function(n,r){return t.style.setProperty(r,n,e)}),n)}),F(t))}(n,e,r),Ro(t)}function Ms(t){var n=xi(t[Ct]),e=t[mt],r=e[wt],o=e[Et],i=F(xi(n).children()),u=i[r],c=i[o];return wi(u)&&wi(c)?(xo(Pn,t),Co({action:t}),r<o?Bi(u,c):Zi(u,c),Ro(t)):(xo(Fn,t),jo(t))}function Vs(t){var n=Os(t);switch(n[ht]){case Tt:return function(t){return xo(Pn,t),ks(Is,t)}(n);case Nt:return _s(n);case Ht:return function(t){return xo(Pn,t),ks(As,t)}(n);case Bt:return function(t){return xo(Pn,t),ks(Ps,t)}(n);case Jt:return function(t){return xo(Pn,t),ks(qs,t)}(n);case Ft:return function(t){return xo(Pn,t),ks(Rs,t)}(n);case $t:return function(t){return xo(Pn,t),ks(js,t)}(n);case Lt:return function(t){return xo(Pn,t),ks(Ds,t)}(n);case _t:return function(t){var n=t[mt],e=xi(t[Ct]);return xo(Pn,t),Co({action:t}),q((function(t,n){return as(n,t,e)}),n),Ro(t)}(n);case At:return function(t){var n=t[mt],e=xi(t[Ct]);return xo(Pn,t),Co({action:t}),ss(cn,e),as(cn,xs(n),e),Ro(t)}(n);case Pt:return Ls(n);case Rt:return function(t){var n=xi(t[Ct]),e=t[mt];return e[yt]=Ns(e[yt]),e[gt]=Ns(e[gt]),xo(Pn,t),Co({action:t}),us(e,n),Ro(t)}(n);case jt:return function(t){var n=xi(t[Ct]),e=t[mt];return e[bt]=Ns(e[bt]),e[xt]=Ns(e[xt]),xo(Pn,t),Co({action:t}),us(e,n),Ro(t)}(n);case Dt:return function(t){var n=xi(t[Ct]);return xo(Pn,t),Co({action:t}),zi(n),Ro(t)}(n);case qt:return Ms(n);default:return Ro(n)}}var Us="at-action-key";function Fs(t){var n=t[Ct];return nt(n)||tt(n)}function $s(t){var n=t[kt];Z(n)||zi("#"+(Ki+L(n)))}function Hs(t){if(Fs(t)){var n=t[Ct];!function(t){return t[ht]===Vt||t[ht]===Ut}(t)?(is(fe,n),$s(t)):is(le,n)}else $s(t)}function zs(t){return function(t){var n=t.key;if(Z(n))return!0;if(t[ht]===Lt)return t[tr];var e=t[Ct],r=cs(Us,e);return r!==n||r===n&&!t[tr]}(t)?Vs(t).then((function(){return xo(An,t),Co({action:t}),function(t){var n=t.key;if(!Z(n)&&Fs(t)){var e=t[Ct];as(Us,n,e)}}(t),Hs(t),t}))[\'catch\']((function(n){bo(Nn,n),Co({action:t,error:n}),Hs(t);var e=l({},t);return e[Gn]=!0,e})):(Hs(t),t)}function Bs(t){var n=_((function(t){return!0===t[Gn]}),t);return H(n)?Ro():(function(t){q(Hs,t)}(n),jo(t))}function Zs(t){return function(t){return hs(t[Ct]).then((function(){return t}))[\'catch\']((function(){var n=l({},t);return n[Gn]=!0,n}))}(t).then(zs)}function Js(t,n,e){return xi(e).on(t,n)}var Gs="metric element not found";function Ks(t){return hs(t[Ct]).then((function(){return Co({metric:t}),l({found:!0},t)}))[\'catch\']((function(){return bo(Gs,t),Co({metric:t,message:Gs}),t}))}var Xs="navigator",Ys="sendBeacon";function Ws(t,n){return Xs in(e=i)&&Ys in e[Xs]?function(t,n,e){return t[Xs][Ys](n,e)}(i,t,n):function(t,n,e){var r={};r[ir]=[ur];var o={};o[Sa]=Ea,o[Ca]=n,o[Ta]=e,o[Oa]=!0,o[Ia]=!1,o[ka]=r;try{t(o)}catch(t){return!1}return!0}(Pa,t,n);var e}function Qs(t){var n=t.name,e=_u(er)||{};e[n]=t,Iu(er,e)}function tf(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.page,r=void 0===e||e,o=(_u(er)||{})[t];if(p(o))return o;var i=n.impressionId;return p(i)?o:l({page:r,impressionId:i},o)}var nf="Beacon data sent",ef="Beacon data sent failed",rf="View triggered notification",of="View rendered notification",uf="Mboxes rendered notification",cf="Event handler notification",af="Mbox event handler notification",sf="View event handler notification",ff="prefetchMboxes",lf="rendered",df="triggered";function vf(t){var n=_c(t,{}),e={context:{beacon:!0}};if(!H(n)){var r={};r.analytics=n,e.experienceCloud=r}return e}function pf(t,n,e){var r=function(t,n){return Pc(t,n,bc())}(vf(t),n);return r.notifications=e,r}function hf(t,n,e){var r={id:pt(),type:n,timestamp:at(),parameters:t.parameters,profileParameters:t.profileParameters,order:t.order,product:t.product};return H(e)?r:(r.tokens=e,r)}function mf(t){var n=Dc(Rr());return Ws(n,JSON.stringify(t))?(xo(nf,n,t),!0):(bo(ef,n,t),!1)}function gf(t,n,e){var r=Ju(Rr()[ge]),o=hf(Oc({},r),n,[e]),i=pf(pt(),r,[o]);xo(cf,t,o),Co({source:t,event:n,request:i}),mf(i)}function yf(t,n,e){var r=Ju(t),o=hf(Oc({},r),n,[e]);o.mbox={name:t};var i=pf(t,r,[o]);xo(af,t,o),Co({mbox:t,event:n,request:i}),mf(i)}function bf(t){var n=Rr()[ge],e=[],r=or;if(q((function(t){var n=t.mbox,o=t.data;if(!p(o)){var i=o.eventTokens,u=void 0===i?[]:i;H(u)||e.push(function(t,n,e){var r=t.name,o=t.state,i=hf(t,n,e);return i.mbox={name:r,state:o},i}(n,r,u))}}),t),!H(e)){var o=pf(n,{},e);xo(uf,e),Co({source:ff,event:lf,request:o}),mf(o)}}function xf(t,n,e){var r=Ju(Rr()[ge]),o=hf(Oc({},r),n,[e]);o.view={name:t};var i=pf(pt(),r,[o]);xo(sf,t,o),Co({view:t,event:n,request:i}),mf(i)}function wf(t){var n=t.viewName,e=t.impressionId,r=Ju(Rr()[ge]),o=hf(Oc({},r),or,[]);o.view={name:n},xo(rf,n),function(t,n,e){return qc(vf(t),n).then((function(t){return t.notifications=e,t}))}(n,r,[o]).then((function(t){t.impressionId=e,Co({view:n,event:df,request:t}),mf(t)}))}function Ef(t){if(!p(t)){var n=t.view,e=t.data,r=(void 0===e?{}:e).eventTokens,o=void 0===r?[]:r;if(!H(o)){var i=n.name,u=n.impressionId,c=tf(i);if(!p(c)){var a=pf(i,{},[function(t,n,e){var r=t.name,o=t.state,i=hf(t,n,e);return i.view={name:r,state:o},i}(c,or,o)]);a.impressionId=u,xo(of,i,o),Co({view:i,event:lf,request:a}),mf(a)}}}}var Sf={},Cf="pageLoadMetrics",kf="prefetchMetrics",Tf=Vc("metrics"),Of=function(){return ea("metric")},Nf=function(t){return ra("metric",t)};function If(t,n,e){if(p(Sf[t])){var r=k(Sf);H(r)||q((function(t){q((function(r){var o=Sf[t][r];!function(t,n,e){xi(e).off(t,n)}(n,o,e)}),k(Sf[t])),delete Sf[t]}),r)}}function _f(t,n,e,r){var o=e.type,i=e.selector,u=e.eventToken,c=L(o+":"+i+":"+u),a=function(){return r(t,o,u)};!function(t,n){t===fn&&is(le,n)}(o,i),n?function(t,n){return!p(Sf[t])&&!p(Sf[t][n])}(t,c)||(If(t,o,i),function(t,n,e){Sf[t]=Sf[t]||{},Sf[t][n]=e}(t,c,a),Js(o,a,i)):Js(o,a,i)}function Af(t,n,e,r){return Do(ut(Ks,e)).then((function(e){return q((function(e){return _f(t,n,e,r)}),_((function(t){return t.found}),e)),Of()}))[\'catch\'](Nf)}function Pf(t){return Af(t.name,!1,Tf(t),yf)}function qf(t){return Af(t.name,!0,Tf(t),xf)}function Rf(t){return Af(Cf,!1,Tf(t),gf)}function jf(t){return Af(kf,!1,Tf(t),gf)}var Df=Vc(mt),Lf=Vc(kt),Mf=function(t){return ea("render",t)},Vf=function(t){return ra("render",t)},Uf=function(t){return Uc($c)(t)&&na(t)};function Ff(t){var n,e=ut(Lf,t);n=Bc(e),tu(Rr(),n)}function $f(t){var n,e=ut(Lf,t);n=Bc(e),nu(Rr(),n)}function Hf(t){var n=_(Hc,Zc(t));return A(ut(Df,n))}function zf(t){return x(t)&&t.type!==It}function Bf(t,n,e){var r=t.eventToken;return function(t){return Do(ut(Zs,t)).then(Bs)}(function(t,n,e){return ut((function(t){return l({key:n,page:e},t)}),_(zf,t))}(t.content,n,e)).then((function(){return Mf(r)}))[\'catch\'](Vf)}function Zf(t){return x(t)&&t.type!==en}function Jf(t,n){return ut(t,_(Zf,Zc(n)))}function Gf(t,n,e){var r=b({status:Wn},t,n),o=ut(ta,_($c,e)),i={};return H(o)||(r.status=Gn,i.errors=o),H(i)||(r.data=i),r}function Kf(t,n,e){return Do(Jf((function(t){return Bf(t,!0)}),t)).then(n).then((function(n){return e(t),n}))}function Xf(t,n,e,r){var o=n.name;return Do(Jf((function(t){return Bf(t,o,e)}),n)).then((function(e){return function(t,n,e){var r=b({status:Wn},t,n),o=ut(ta,_($c,e)),i=ut(ta,_(Uf,e)),u={};return H(o)||(r.status=Gn,u.errors=o),H(i)||(u.eventTokens=i),H(u)||(r.data=u),r}(t,n,e)})).then((function(t){return r(n),t}))}function Yf(t){return Kf(t,(function(n){return Gf(Qn,t,n)}),Pf)}function Wf(t){return Xf(Qn,t,!0,Pf)}function Qf(t){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){var n=t.execute,e=(void 0===n?{}:n).pageLoad,r=void 0===e?{}:e;H(r)||Ff(Hf(r))}}function tl(t){var n;Ff(Hf(t)),wi(n="#"+Wi)&&zi(n)}function nl(){}nl.prototype={on:function(t,n,e){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:n,ctx:e}),this},once:function(t,n,e){var r=this;function o(){r.off(t,o),n.apply(e,arguments)}return o._=n,this.on(t,o,e)},emit:function(t){for(var n=[].slice.call(arguments,1),e=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=e.length;r<o;r++)e[r].fn.apply(e[r].ctx,n);return this},off:function(t,n){var e=this.e||(this.e={}),r=e[t],o=[];if(r&&n)for(var i=0,u=r.length;i<u;i++)r[i].fn!==n&&r[i].fn._!==n&&o.push(r[i]);return o.length?e[t]=o:delete e[t],this}};var el=nl,rl=nl;el.TinyEmitter=rl;var ol=new el;function il(t,n){!function(t,n,e){t.emit(n,e)}(ol,t,n)}function ul(t,n){!function(t,n,e){t.on(n,e)}(ol,t,n)}function cl(t){return{type:Mt,content:t.url}}function al(t){var n={};if(H(t))return n;var e=[],r=[],o=[];q((function(t){var n;switch(t.action){case Ot:nt((n=t).selector)&&nt(n.cssSelector)?o.push(function(t){var n={};return n.type=Tt,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t)):e.push({type:rn,content:t.content});break;case It:H(t.content)||q((function(t){return e.push({type:en,content:t})}),t.content);break;case Nt:o.push(function(t){var n={};return n.type=Nt,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case zt:o.push(function(t){var n={};return n.type=Ht,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Zt:o.push(function(t){var n={};return n.type=Bt,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Gt:o.push(function(t){var n={};return n.type=Jt,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Ft:o.push(function(t){var n={};return n.type=Ft,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case $t:o.push(function(t){var n={};return n.type=$t,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Lt:o.push(function(t){var n={};return n.type=Lt,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case _t:o.push(function(t){var n={};if(n.selector=t.selector,n.cssSelector=t.cssSelector,t.attribute===cn)return n.type=At,n.content=t.value,n;n.type=_t;var e={};return e[t.attribute]=t.value,n.content=e,n}(t));break;case Pt:o.push(function(t){var n=t.style,e=void 0===n?{}:n,r={};return r.selector=t.selector,r.cssSelector=t.cssSelector,p(e.left)||p(e.top)?p(e.width)||p(e.height)?(r.type=Pt,r.content=e,r):(r.type=Rt,r.content=e,r):(r.type=jt,r.content=e,r)}(t));break;case Dt:o.push(function(t){var n={};return n.type=Dt,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case qt:o.push(function(t){var n={};n.from=t.from,n.to=t.to;var e={};return e.type=qt,e.selector=t.selector,e.cssSelector=t.cssSelector,e.content=n,e}(t));break;case Mt:e.push(cl(t));break;case Vt:r.push({type:fn,selector:t.selector,eventToken:t.clickTrackId})}}),t);var i={};if(!H(o)&&e.push({type:oe,content:o}),!H(e)&&(i.options=e),!H(r)&&(i.metrics=r),H(i))return n;var u={};return u.pageLoad=i,n.execute=u,n}function sl(t,n,e){return e?al(n):function(t,n){var e={};if(H(n))return e;var r=[],o=[];q((function(t){switch(t.action){case Ot:r.push({type:rn,content:t.content});break;case It:H(t.content)||q((function(t){return r.push({type:en,content:t})}),t.content);break;case Mt:r.push(cl(t));break;case Ut:o.push({type:fn,eventToken:t.clickTrackId})}}),n);var i={name:t};if(!H(r)&&(i.options=r),!H(o)&&(i.metrics=o),H(i))return e;var u={},c=[i];return u.mboxes=c,e.execute=u,e}(t,n)}var fl="Page load rendering failed",ll="Mboxes rendering failed",dl="View rendering failed",vl="Prefetch rendering failed",pl=function(t){return!H(_($c,t))};function hl(t){var n=t.status,e=t.data,r={status:n,pageLoad:!0};return p(e)||(r.data=e),r}function ml(t){var n=t.status,e=t.mbox,r=t.data,o={status:n,mbox:e.name};return p(r)||(o.data=r),o}function gl(t){var n=t.status,e=t.view,r=t.data,o={status:n,view:e.name};return p(r)||(o.data=r),o}function yl(t){var n=t.status,e=t.data,r={status:n,prefetchMetrics:!0};return p(e)||(r.data=e),r}function bl(t){if(p(t))return[null];var n=ut(hl,[t]);return pl(n)&&bo(fl,t),n}function xl(t){if(p(t))return[null];var n=ut(ml,t);return pl(n)&&bo(ll,t),n}function wl(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bf;if(p(t))return[null];var e=ut(ml,t);return pl(e)&&bo(ll,t),n(t),e}function El(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ef;if(p(t))return[null];var e=ut(gl,[t]);return pl(e)&&bo(dl,t),t.view.page?(n(t),e):e}function Sl(t){if(p(t))return[null];var n=ut(yl,[t]);return pl(n)&&bo(vl,t),n}function Cl(t){var n=A([bl(t[0]),xl(t[1]),wl(t[2]),Sl(t[3])]),e=_(Fc,n),r=_($c,e);return H(r)?Ro(e):jo(r)}function kl(t){return jo(t)}function Tl(t,n){if(!H(n)){var e=n.options;H(e)||q((function(n){if(n.type===rn){var e=Tt,r=n.content;n.type=oe,n.content=[{type:e,selector:t,content:r}]}}),e)}}function Ol(t,n){var e=n.metrics;if(!H(e)){var r=n.name;q((function(n){n.name=r,n.selector=n.selector||t}),e)}}function Nl(t,n){var e=l({},n),r=e.execute,o=void 0===r?{}:r,i=e.prefetch,u=void 0===i?{}:i,c=o.pageLoad,a=void 0===c?{}:c,s=o.mboxes,f=void 0===s?[]:s,d=u.mboxes,v=void 0===d?[]:d;return Tl(t,a),q((function(n){return Tl(t,n)}),f),q((function(n){return Ol(t,n)}),f),q((function(n){return Tl(t,n)}),v),q((function(n){return Ol(t,n)}),v),e}function Il(t){var n=t.prefetch,e=(void 0===n?{}:n).views,r=void 0===e?[]:e;H(r)||function(t){q(Qs,t)}(r)}function _l(t){var n=[],e=t.execute,r=void 0===e?{}:e,o=r.pageLoad,i=void 0===o?{}:o,u=r.mboxes,c=void 0===u?[]:u;H(i)?n.push(Ro(null)):n.push(function(t){return Kf(t,(function(n){return Gf(ae,t,n)}),Rf)}(i)),H(c)?n.push(Ro(null)):n.push(function(t){return Do(ut(Yf,t))}(c));var a=t.prefetch,s=void 0===a?{}:a,f=s.mboxes,l=void 0===f?[]:f,d=s.metrics,v=void 0===d?[]:d;return H(l)?n.push(Ro(null)):n.push(function(t){return Do(ut(Wf,t))}(l)),h(v)&&!H(v)?n.push(function(t){return Do([jf(t)]).then(Gf)}(s)):n.push(Ro(null)),ru(),Do(n).then(Cl)[\'catch\'](kl)}function Al(t,n){d((function(){return t.location.replace(n)}))}function Pl(t){return nt(t)?t:tt(t)?t:ln}function ql(t){is(fe,t)}function Rl(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=t.selector,r=t.response;if(H(r))return xo(Bn),ql(e),ru(),di({}),il(Cr),Ro();var o=Nl(e,r),u=$a(o);if(!H(u)){var c=u.url;return xo(Zn,u),vi({url:c}),il(kr),Al(i,c),Ro()}return si({}),Il(o),il(Sr),Qf(o,n),_l(o).then((function(t){H(t)||fi({execution:t})}))[\'catch\']((function(t){return li({error:t})}))}var jl="[page-init]";function Dl(t){bo(jl,ar,t),Co({source:jl,error:t}),ru()}function Ll(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e={selector:ln,response:t};xo(jl,ie,t),Co({source:jl,response:t}),Rl(e,n)[\'catch\'](Dl)}function Ml(t){var n=function(t){return t[Er]}(t),e=n.request,r=n.response;xo(jl,lr),Co({source:jl,serverState:n});var o,i,u,c=function(t,n){var e=l({},n),r=e.execute,o=e.prefetch,i=t[Xe],u=t[Ke];return r&&(e.execute.mboxes=null),r&&!i&&(e.execute.pageLoad=null),o&&(e.prefetch.mboxes=null),o&&!u&&(e.prefetch.views=null),e}(t,r);Qf(c),o=c.prefetch,i=(void 0===o?{}:o).views,H(u=void 0===i?[]:i)||$f(A(ut(Hf,u))),Qa({request:e,response:c}).then((function(t){return Ll(t,!0)}))[\'catch\'](Dl)}function Vl(){if(!po())return bo(jl,hn),void Co({source:jl,error:hn});var t=Rr();if(function(t){var n=t[Er];if(H(n))return!1;var e=n.request,r=n.response;return!H(e)&&!H(r)}(t))Ml(t);else{var n=t[Xe],e=t[Ke];if(!n&&!e)return xo(jl,fr),void Co({source:jl,error:fr});eu();var r={};if(n){var o={pageLoad:{}};r.execute=o}if(e){var i={views:[{}]};r.prefetch=i}var u=t[me];xo(jl,ue,r),Co({source:jl,request:r});var c={request:r,timeout:u};Uo()&&!Fo()?$o().then((function(){os(c).then(Ll)[\'catch\'](Dl)}))[\'catch\'](Dl):os(c).then(Ll)[\'catch\'](Dl)}}function Ul(){var t={};return t[Yn]=!0,t}function Fl(t){var n={};return n[Yn]=!1,n[Gn]=t,n}function $l(t){return Z(t)?Fl(Sn):t.length>tn?Fl(Cn):Ul()}function Hl(t){return{action:Mt,url:t.content}}function zl(t){var n=[];return q((function(t){switch(t.type){case Tt:n.push(function(t){var n={};return n.action=Ot,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Nt:n.push(function(t){var n={};return n.action=Nt,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Ht:n.push(function(t){var n={};return n.action=zt,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Bt:n.push(function(t){var n={};return n.action=Zt,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Jt:n.push(function(t){var n={};return n.action=Gt,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Ft:n.push(function(t){var n={};return n.action=Ft,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case $t:n.push(function(t){var n={};return n.action=$t,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Lt:n.push(function(t){var n={};return n.action=Lt,n.content=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case _t:n.push(function(t){var n=k(t.content)[0],e={};return e.action=_t,e.attribute=n,e.value=t.content[n],e.selector=t.selector,e.cssSelector=t.cssSelector,e}(t));break;case At:n.push(function(t){var n={};return n.action=_t,n.attribute=cn,n.value=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Pt:case Rt:case jt:n.push(function(t){var n={};return n.action=Pt,n.style=t.content,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Dt:n.push(function(t){var n={};return n.action=Dt,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case qt:n.push(function(t){var n={};return n.action=qt,n.from=t.content.from,n.to=t.content.to,n.selector=t.selector,n.cssSelector=t.cssSelector,n}(t));break;case Mt:n.push(Hl(t))}}),t),n}function Bl(t){if(H(t))return[];var n=[],e=[],r=[],o=t.options,i=void 0===o?[]:o,u=t.metrics,c=void 0===u?[]:u;q((function(t){switch(t.type){case rn:n.push(t.content);break;case en:e.push(t.content);break;case Mt:r.push(Hl(t));break;case oe:r.push.apply(r,zl(t.content))}}),i),H(n)||r.push({action:Ot,content:n.join("")}),H(e)||r.push({action:It,content:e});var a=function(t){if(H(t))return[];var n=[];return q((function(t){t.type===fn&&(Qc(t)?n.push({action:Vt,selector:t.selector,clickTrackId:t.eventToken}):n.push({action:Ut,clickTrackId:t.eventToken}))}),t),n}(c);return H(a)||r.push.apply(r,a),r}var Zl="[getOffer()]";function Jl(t,n){var e=function(t){var n=t.execute,e=void 0===n?{}:n,r=e.pageLoad,o=void 0===r?{}:r,i=e.mboxes,u=void 0===i?[]:i,c=[];return c.push.apply(c,Bl(o)),c.push.apply(c,A(ut(Bl,u))),c}(n);t[Wn](e)}function Gl(t){var n=function(t){if(!x(t))return Fl(gn);var n=$l(t[Qn]);return n[Yn]?E(t[Wn])?E(t[Gn])?Ul():Fl(Tn):Fl(kn):n}(t),e=n[Gn];if(!n[Yn])return bo(Zl,e),void Co({source:Zl,options:t,error:e});if(!po())return d(t[Gn](Kn,hn)),bo(Zl,hn),void Co({source:Zl,options:t,error:hn});var r=function(n){return Jl(t,n)},o=function(n){return function(t,n){var e=n[ee]||Xn;t[Gn](e,n)}(t,n)};xo(Zl,t),Co({source:Zl,options:t}),Uo()&&!Fo()?$o().then((function(){rs(t).then(r)[\'catch\'](o)})):rs(t).then(r)[\'catch\'](o)}var Kl="[getOffers()]";function Xl(t){var n=function(t){if(!x(t))return Fl(gn);var n=t.request;if(!x(n))return Fl(yn);var e=n.execute,r=n.prefetch;return x(e)||x(r)?Ul():Fl(xn)}(t),e=n[Gn];return n[Yn]?po()?(xo(Kl,t),Co({source:Kl,options:t}),!Uo()||Fo()?os(t):$o().then((function(){return os(t)}))):(bo(Kl,hn),Co({source:Kl,options:t,error:hn}),jo(new Error(hn))):(bo(Kl,e),Co({source:Kl,options:t,error:e}),jo(n))}var Yl="[applyOffer()]";function Wl(t){var n=Pl(t.selector),e=function(t){if(!x(t))return Fl(gn);var n=$l(t[Qn]);if(!n[Yn])return n;var e=t[te];return h(e)?Ul():Fl(On)}(t),r=e[Gn];return e[Yn]?po()?(t.selector=n,xo(Yl,t),Co({source:Yl,options:t}),void function(t){var n=t.mbox,e=t.selector,r=t.offer,o=Rr(),u=n===o[ge];if(H(r))return xo(Bn),ql(e),ru(),void di({mbox:n});var c=Nl(e,sl(n,r,u)),a=$a(c);if(!H(a)){var s=a.url;return xo(Zn,a),vi({url:s}),void Al(i,s)}si({mbox:n}),Qf(c),_l(c).then((function(t){H(t)||fi({mbox:n,execution:t})}))[\'catch\']((function(t){return li({error:t})}))}(t)):(bo(Yl,hn),Co({source:Yl,options:t,error:hn}),void ql(n)):(bo(Yl,t,r),Co({source:Yl,options:t,error:r}),void ql(n))}var Ql="[applyOffers()]";function td(t){var n=Pl(t.selector),e=function(t){return x(t)?x(t.response)?Ul():Fl(bn):Fl(gn)}(t),r=e[Gn];return e[Yn]?po()?(t.selector=n,xo(Ql,t),Co({source:Ql,options:t}),Rl(t)):(bo(Ql,hn),Co({source:Ql,options:t,error:hn}),ql(n),jo(new Error(hn))):(bo(Ql,t,r),Co({source:Ql,options:t,error:r}),ql(n),jo(e))}var nd="[sendNotifications()]";function ed(t){var n=Rr()[ge],e=t.consumerId,r=void 0===e?n:e,o=t.request,i=function(t){if(!x(t))return Fl(gn);var n=t.request;if(!x(n))return Fl(yn);var e=n.execute,r=n.prefetch,o=n.notifications;return x(e)||x(r)?Fl(wn):h(o)?Ul():Fl(En)}(t),u=i[Gn];if(!i[Yn])return bo(nd,u),void Co({source:nd,options:t,error:u});if(!po())return bo(nd,hn),void Co({source:nd,options:t,error:hn});xo(nd,t),Co({source:nd,options:t});var c=pf(r,{},o.notifications);!Uo()||Fo()?mf(c):bo(nd,xr)}var rd="[trackEvent()]";function od(t){if(Uo()&&!Fo())return bo(zn,xr),void t[Gn](Gn,xr);!function(t){var n=t.mbox,e=x(t.params)?t.params:{},r=l({},Ju(n),e),o=or,i=hf(Oc({},r),o,[]);if(i.mbox={name:n},mf(pf(n,r,[i])))return xo(Hn,t),void t[Wn]();bo(zn,t),t[Gn](Xn,zn)}(t)}function id(t){var n=t[Ct],e=t[ht],r=F(xi(n)),o=function(){return function(t){return od(t),!t.preventDefault}(t)};q((function(t){return Js(e,o,t)}),r)}function ud(t){var n=function(t){if(!x(t))return Fl(gn);var n=$l(t[Qn]);return n[Yn]?Ul():n}(t),e=n[Gn];if(!n[Yn])return bo(rd,e),void Co({source:rd,options:t,error:e});var r=function(t,n){var e=n[Qn],r=l({},n),o=x(n.params)?n.params:{};return r[re]=l({},Ju(e),o),r[me]=Rc(t,n[me]),r[Wn]=E(n[Wn])?n[Wn]:ct,r[Gn]=E(n[Gn])?n[Gn]:ct,r}(Rr(),t);if(!po())return bo(rd,hn),d(r[Gn](Kn,hn)),void Co({source:rd,options:t,error:hn});xo(rd,r),Co({source:rd,options:r}),function(t){var n=t[ht],e=t[Ct];return nt(n)&&(nt(e)||tt(e))}(r)?id(r):od(r)}var cd="[triggerView()]",ad=[],sd=1,fd=0;function ld(t){return tl(t),function(t){var n=t.page;return Xf(nr,t,n,qf)}(t).then(El).then((function(t){H(t)||fi({execution:t})}))[\'catch\']((function(t){bo(cr,t),li({error:t})}))}function dd(){for(;ad.length>0;){var t=ad.pop(),n=tf(t.viewName,t);p(n)||ld(n)}}function vd(){fd=sd,dd()}function pd(t){!function(t){if(mo()){var n=t[rr];i[Oi][Ii]=n}}(t),p(tf(t.viewName,t))&&t.page&&wf(t),ad.push(t),fd===sd&&dd()}function hd(t,n){if(!D(t)||Z(t))return bo(cd,sr,t),void Co({source:cd,view:t,error:sr});var e=t.toLowerCase(),r=function(t,n){var e={};return e.viewName=t,e.impressionId=pt(),e.page=!0,H(n)||(e.page=!!n.page),e}(e,n);xo(cd,e,r),Co({source:cd,view:e,options:r}),pd(r)}ul(Sr,vd),ul(Cr,vd),ul(kr,vd);var md="function has been deprecated. Please use getOffer() and applyOffer() functions instead.",gd="adobe.target.registerExtension() function has been deprecated. Please review the documentation for alternatives.",yd="mboxCreate() "+md,bd="mboxDefine() "+md,xd="mboxUpdate() "+md;function wd(){bo(gd,arguments)}function Ed(){bo(yd,arguments)}function Sd(){bo(bd,arguments)}function Cd(){bo(xd,arguments)}return{init:function(t,n,e){if(t.adobe&&t.adobe.target&&void 0!==t.adobe.target.getOffer)bo(mn);else{qr(e);var r,o=Rr(),c=o[be];if(t.adobe.target.VERSION=c,t.adobe.target.event={LIBRARY_LOADED:Xo,REQUEST_START:Yo,REQUEST_SUCCEEDED:Wo,REQUEST_FAILED:Qo,CONTENT_RENDERING_START:ti,CONTENT_RENDERING_SUCCEEDED:ni,CONTENT_RENDERING_FAILED:ei,CONTENT_RENDERING_NO_OFFERS:ri,CONTENT_RENDERING_REDIRECT:oi},!o[de])return function(t){var n=function(){},e=function(){return Ro()};t.adobe=t.adobe||{},t.adobe.target={VERSION:"",event:{},getOffer:n,getOffers:e,applyOffer:n,applyOffers:e,sendNotifications:n,trackEvent:n,triggerView:n,registerExtension:n,init:n},t.mboxCreate=n,t.mboxDefine=n,t.mboxUpdate=n}(t),void bo(hn);Eo(i,Rr(),ho()),_i(),function(t){var n=Hi(t.location.search);if(!p(n)){var e=new Date(at()+186e4);no(Ai,JSON.stringify(n),{expires:e})}}(t),Vl(),t.adobe.target.getOffer=Gl,t.adobe.target.getOffers=Xl,t.adobe.target.applyOffer=Wl,t.adobe.target.applyOffers=td,t.adobe.target.sendNotifications=ed,t.adobe.target.trackEvent=ud,t.adobe.target.triggerView=hd,t.adobe.target.registerExtension=wd,t.mboxCreate=Ed,t.mboxDefine=Sd,t.mboxUpdate=Cd,r=ii(Xo,{}),Ko(i,u,Xo,r)}}}}(),window.adobe.target.init(window,document,{clientCode:"bmwag",imsOrgId:"B52D1CFE5330949C0A490D45@AdobeOrg",serverDomain:"bmwag.tt.omtrdc.net",timeout:Number("10000"),globalMboxName:"target-global-mbox",version:"2.3.2",defaultContentHiddenStyle:"visibility: hidden;",defaultContentVisibleStyle:"visibility: visible;",bodyHiddenStyle:"body {opacity: 0 !important}",bodyHidingEnabled:!0,deviceIdLifetime:632448e5,sessionIdLifetime:186e4,selectorsPollingTimeout:5e3,visitorApiTimeout:2e3,overrideMboxEdgeServer:!0,overrideMboxEdgeServerTimeout:186e4,optoutEnabled:!1,optinEnabled:!1,secureOnly:!1,supplementalDataIdParamTimeout:30,authoringScriptUrl:"//cdn.tt.omtrdc.net/cdn/target-vec.js",urlSizeLimit:2048,endpoint:"/rest/v1/delivery",pageLoadEnabled:"true"===String("true"),viewsEnabled:!0,analyticsLogging:"server_side",serverState:{}});\n        \n    var topLevelDomain = _satellite.getVar(\'topLevelDomain\');\n\n    if (topLevelDomain == "bmw.it" || topLevelDomain == "bmw.fr" || topLevelDomain == "bmw.co.uk") {\n        (function() {\n            var csPrefix = \'AB_AdobeT&T_\';\n\n            document.addEventListener(adobe.target.event.REQUEST_SUCCEEDED, getEventData);\n\n            function getEventData(e) {\n                if (typeof(e) !== \'undefined\' && typeof(e.detail) !== \'undefined\' && typeof(e.detail.responseTokens) !== \'undefined\' && e.detail.responseTokens.length > 0) {\n                    for (var i = 0; i < e.detail.responseTokens.length; i++) {\n                        if (typeof(e.detail.responseTokens[i]) !== \'undefined\' && typeof(e.detail.responseTokens[i][\'activity.name\']) !== \'undefined\' && typeof(e.detail.responseTokens[i][\'experience.name\']) !== \'undefined\') {\n                            csKey = csPrefix + e.detail.responseTokens[i][\'activity.name\'];\n                            csValue = e.detail.responseTokens[i][\'experience.name\'];\n                            sendTestToCS(decodeURI(csKey), decodeURI(csValue));\n                        }\n                    }\n                }\n            };\n\n            function sendTestToCS(cskey, csValue) {\n                window._uxa = window._uxa || [];\n                window._uxa.push(["trackDynamicVariable", {\n                    key: csKey,\n                    value: csValue\n                }]);\n            };\n\n        })();\n    }\n} catch (e) {\n    _satellite.logger.error(\'Error in custom code while loading AT.js\' + e);\n}',
language:"javascript"}}]},{id:"RLf94dfa33aacb470e86dc39491f2fa8b1",name:"DCR - Online TDA Dealers List",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_dealers_list"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("ev_eve_effect"),r=_satellite.getVar("ev_eve_cause"),n=_satellite.getVar("ev_eve_eventAction"),s=_satellite.getVar("ev_eve_eventName"),o=_satellite.getVar("ev_att_componentName"),i=_satellite.getVar("ev_eve_target"),l=_satellite.getVar("ev_eve_element"),c=_satellite.getVar("ev_att_mmdr_NBO"),d=_satellite.getVar("ev_eve_timestamp");""!=d&&null!=d||(d="Not Set"),""!=c&&null!=c||(c="Not Set"),""!=l&&null!=l||(l="Not Set"),""!=i&&null!=i||(i="Not Set"),""!=o&&null!=o||(o="Not Set"),""!=s&&null!=s||(s="Not Set"),""!=n&&null!=n||(n="Not Set"),""!=a&&null!=a||(a="Not Set"),""!=r&&null!=r||(r="Not Set");var u=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],t.eVar16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop12=d,t.eVar112=n+"~"+s,null==_satellite.getVar("ev_eve_eventName")||""==_satellite.getVar("ev_eve_eventName"))var g="not available";else g=_satellite.getVar("ev_eve_eventName");if(null==_satellite.getVar("ev_att_dealerId")||""==_satellite.getVar("ev_att_dealerId"))var m="not available";else m=_satellite.getVar("ev_att_dealerId");if(null==_satellite.getVar("ev_att_outletID")||""==_satellite.getVar("ev_att_outletID"))var p="not available";else p=_satellite.getVar("ev_att_outletID");t.eVar13=g+"|"+m+"|"+p,t.eVar8=t.eVar10=t.prop8=t.prop10=c,t.eVar45+="~rn:Online TDA Dealers List",t.eVar117=a+"~"+r;var v="not set",b="not set";"Online TDA Dealers list"==n&&(v="Dealer & Test Drive Vehicle",b="Step 02"),t.eVar11="Central Form|Online TDA|tda_online_booking|"+b+"|not set|"+v,t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set",t.eVar52=_satellite.getVar("s_products_iFrame_v52"),t.eVar44=_satellite.getVar("nonTechMetaData"),t.events+="event91",t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12,eVar45,eVar112,eVar13,eVar117,eVar11,eVar52,eVar41,eVar44",t.linkTrackEvents+="event91"}catch(e){_satellite.logger.error("Error in DCR - Online TDA Dealers List: "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RL8ac58b83c2de4e04a1dc430aa856e880",name:"PLR - All Page Rules - prop75",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC508a8acf0b7549cd94d9017074fefd4b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLea7e5a4922274b52bc0b88f7552370a6",name:"TPT - Iraq - Multiple - Doubleclick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - IRAQ - Multiple - Programmatic - ar/en - floodlight - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"IQ"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-iraq.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC6373acd188904520bd1808af120ab921-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdcfb9fe8e1b54f198b3dd99f172ca000",name:"TPT - UA - AEM - Adwords - Stock Locator Button - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"div.tw-w-1\\/4.tw-hidden.md\\:tw-flex > button",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCebab45b7b8374091a9073b9a63c9980c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL778353c5b63348978980a65d2b22f591",name:"TPT - MQ - AEM - Facebook - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.mq",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc3d1b623765e432d9e9a5b0db9e34321-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL7fa8d656acdf4a719ca8a8091927502b",name:"PLR - Multiple - Campaign String to Cookie",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.mo",valueIsRegex:!0},{value:"bmw.ru",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0112d5865dca4d51b25dcd3a91034e06-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLba3aefe580814f75b8730f30062dfa4e",name:"TPT - MD - AEM - Facebook - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.md",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa4a917b4c82b48f5bf2e506431d62ce4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6108766beb5e43fdbd199a8128fa4f57",name:"DCR - Electric Range Content",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"electric_range_content"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=digitals2.tracking.api.getPageObject(digitals2.tracking.api.getCurrentPageIndex()),r=(_satellite.getVar("URLNoParam"),_satellite.getVar("navEvarForClicks"),_satellite.getVar("ev_att_componentName"),_satellite.getVar("ev_eve_eventName")),n=_satellite.getVar("ev_eve_effect"),s=(_satellite.getVar("ev_eve_cause"),_satellite.getVar("pr_att_mmdr")),o=_satellite.getVar("ev_att_errorCode"),i=(_satellite.getVar("ev_att_solutionspecific"),a.event[a.event.length-1].attributes.requestedURL),l=+new Date;null==_satellite.getVar("prevValue")?_satellite.setVar("prevValue",l):l-_satellite.getVar("prevValue")<1e3?t.abort=!0:_satellite.setVar("prevValue",l),"tr > errors"==r&&(t.events+="event95,",t.eVar69=o+"~"+n);var c=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+i+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause");if(t.eVar2=a.page.pageInfo.pageName,t.eVar16=c,t.prop16=c,t.eVar45+="~rn:Electric Range Content",null!=a.product&&a.product.length>0){s=a.product[a.product.length-1].attributes.internalCode;var d=a.product[a.product.length-1].attributes.modelName,u=a.product[a.product.length-1].attributes.modelCode,g=a.product[a.product.length-1].attributes.series;t.eVar51="ps:Car~pi:"+s+"~pn:"+d+"~mc:"+u+"~se:"+g+"~bt:na~yl:na~bp:na~op:na~tp:na~sp:na~mr:"+s+"~co:not set~en:na~fu:na~cu:na~ms:na";var m=a.product[a.product.length-1].productInfo.productID,p=a.product[a.product.length-1].productInfo.productName,v=a.product[a.product.length-1].productInfo.manufacturer,b=a.product[a.product.length-1].category.primaryCategory,f=a.product[a.product.length-1].category.subCategory1,_=a.product[a.product.length-1].category.productType,h=a.product[a.product.length-1].attributes.productionYear,V=a.product[a.product.length-1].attributes.yearOfRegistration;t.eVar124=m+"~"+p+"~"+v+"~"+b+"~"+f+"~"+_+"~"+s+"~"+u+"~"+d+"~"+h+"~"+V+"~"+g}if(null!=a.event&&a.event.length>0){var C=_satellite.getVar("ev_att_solutionspecific").trCarRangeMax,y=_satellite.getVar("ev_att_solutionspecific").trCarRangeMin,P=_satellite.getVar("ev_att_solutionspecific").trEmission,w=_satellite.getVar("ev_att_solutionspecific").trFuelConsumption,R=_satellite.getVar("ev_att_solutionspecific").trElectricPowerConsumption,j=_satellite.getVar("ev_att_solutionspecific").trModelName,A=_satellite.getVar("ev_att_solutionspecific").trTopSpeed,T=_satellite.getVar("ev_att_solutionspecific").trNoOfSeats,O=_satellite.getVar("ev_att_solutionspecific").trEnginePower,D=_satellite.getVar("ev_att_solutionspecific").trSeries,I=a.event[a.event.length-1].category.mmdr;t.eVar8=t.eVar10=t.prop8=t.prop10=I,t.eVar126=C+"~"+y+"~"+P+"~"+w+"~"+R+"~"+j+"~"+A+"~"+T+"~"+O+"~"+D}t.events+="event91",t.linkTrackVars+="prop8,prop10,eVar8,eVar10,eVar16,prop16,eVar44,eVar45,eVar51,eVar69,eVar124,eVar126,",t.linkTrackEvents+="event91,event95"}catch(e){_satellite.logger.error("Error in DCR - Electric Range Content: "+e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"electric_range_content",linkType:"o"}}]},{id:"RL21890b4d37644ba988b024b654b6d1f6",name:"TPT - EC - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - EC - All Pages - Adwords - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"EC"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.ec",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf884830c07f7438cbfaeeaa160ed334b-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC6fe03a27b8e74e7ca6fcddea89fd1f34-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc364f7da0e784c1d957dec3a5cc1e63e",name:"DCR - Open Form",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"open_form"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("SessionID"),n=_satellite.getVar("URLNoParam"),s=_satellite.getVar("navEvarForClicks"),o=_satellite.getVar("navEvarForClicks2"),i=_satellite.getVar("pa_cat_subCategory01"),l=_satellite.getVar("pr_att_mmdr"),c=_satellite.getVar("ev_att_componentName"),d=_satellite.getVar("pr_pro_productID");"VCO"!==c&&(t.abort=!0),t.eVar16=s,t.eVar18=o,t.eVar45+="~rn:Open Form";var u=n+"#/"+i;t.eVar63=u;var g=s.split("~");t.prop16=g[1]+"~"+g[2]+"~"+g[5],a+="event91,event113,event24,event26,event25:"+r+l+",";var m=d.split("::").join("|");m=m.substring(m.indexOf("|")+1),t.eVar9=l,t.eVar10=l,t.eVar34="VCO: Click on CTA",t.eVar36=m,_satellite.getVar("pr_att_modelCode"),_satellite.getVar("pr_att_modelName"),_satellite.getVar("pr_att_serie"),_satellite.getVar("pr_att_bodyType"),_satellite.getVar("pr_att_yearOfLaunch"),_satellite.getVar("pr_att_basePriceVehicle"),_satellite.getVar("pr_att_basePriceOptions"),_satellite.getVar("pr_att_basePrice");var p=_satellite.getVar("pr_att_sellingPriceTotal"),v=_satellite.getVar("s_products_vco_v52"),b=_satellite.getVar("s_products_vco_v53");""==l&&(l="not set");var f="";if(f+=";"+l+";1;"+p+";event112="+p+";eVar52="+v+",",t.eVar51=v,a+="event112,",""!=(f+=b+",")&&(f=f.slice(0,-1),t.products=f),"true"===_satellite.getVar("financeInteraction")){var _=_satellite.getVar("ev_att_fdo_calculations").split("|");a+="event203,event204,event225,",a+=_[0];var h=_satellite.getVar("sfProduct");"undefined"!=h&&(t.eVar58=h+_[1])}t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar36,eVar34,eVar51,eVar52,eVar53,eVar58,products",t.linkTrackEvents+="event91,event113,event24,event25,event26,event203,event204,event210,event211,event212,event213,event214,event215,event216,event217,event218,event219,event220,event221,event222,event223,event224,event225,event112",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.error('Error DCR "Open Form" :'+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"open form",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC42d9c79fb92e4cd689bfabbc1a60f0d5-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb329c50314004ef4b643f8799df46145",name:"DCR - Call",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"call"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:Call";var r=_satellite.getVar("navEvarForClicks").split("~");if(t.prop16=r[1]+"~"+r[2]+"~"+r[5],"VCO"===pa_cat_primaryCategory){t.eVar9=_satellite.getVar("pr_att_mmdr"),t.eVar10=_satellite.getVar("pr_att_mmdr");var n=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");t.eVar63=n,t.eVar46=_satellite.getVar("pa_cat_subCategory01")+"|"+_satellite.getVar("pa_pag_pageName")}_satellite.getVar("pa_att_template").indexOf("/templates/dealerlocator")>-1&&(t.eVar41=_satellite.getVar("pa_att_outletName")+"|"+_satellite.getVar("pa_att_dealerID"),a+="event57,event60,event61,"),a+="event91,",t.linkTrackVars+="eVar16,eVar41,prop16,eVar9,eVar10,eVar46,eVar34",t.linkTrackEvents+="event91,event57,event60,event61",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"call",linkType:"o"}}]},{id:"RL594a59cb190b49ed9619bf98612be632",name:"TPT - CL - AEM - Facebook - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - CL - AEM - Facebook - All Pages - PLR",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"CL"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.cl",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4034cf471a8440af95e8f3f8270b839d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa364dc026d694a37a127172d371bd386",name:"DCR - Video Start",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"start_video"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){function a(){_satellite.getVar("video_start_event_length")==_satellite.getVar("finalDataLayer").event.length&&(t.abort=!0),_satellite.setVar("video_start_event_length",_satellite.getVar("finalDataLayer").event.length)}try{_satellite.getVar("defaultVars");var r="",n=_satellite.getVar("SessionID"),s=_satellite.getVar("pa_pag_pageName"),o=_satellite.getVar("URLNoParam"),i=_satellite.getVar("navEvarForClicks"),l=_satellite.getVar("navEvarForClicks2"),c=_satellite.getVar("pa_cat_primaryCategory"),d=_satellite.getVar("pa_cat_subCategory01"),u=_satellite.getVar("pr_att_mmdr"),g=_satellite.getVar("ev_eve_target"),m=(_satellite.getVar("functionList"),_satellite.getVar("ev_eve_eventName")),p=_satellite.getVar("ev_att_componentName");_satellite.getVar("ev_eve_eventPoints"),_satellite.getVar("ev_eve_cause"),_satellite.getVar("ev_eve_effect"),_satellite.getVar("ev_eve_element"),_satellite.getVar("ev_att_mmdr"),t.eVar16=i,t.eVar18=l,t.eVar45+="~rn:Start video",t.eVar50=m;var v=n+m.dtm_hashCode(),b=i.split("~");if(t.prop16=b[1]+"~"+b[2]+"~"+b[5],"VCO"===c){t.eVar9=u,t.eVar10=u;var f=o+"#/"+d;t.eVar63=f,t.eVar34="VCO: Video Start",t.eVar46=d+"|"+s;var _=g.split("/");t.eVar50=_[_.length-1].split("?")[0],v=n+g.dtm_hashCode()}if(r+="event91,event64,event65:"+v+",","gallery"!==p&&(t.abort=!0),"facebook_video"==p&&(r+="event64,",t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar46,eVar34,eVar50",t.linkTrackEvents+="event91,event64,event65",t.tl()),"new_gallery"==p){a();var h=_satellite.getVar("ev_eve_timestamp");t.eVar50=_satellite.getVar("ev_eve_eventName"),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=h,t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO"),t.linkTrackVars+="eVar50,eVar16,prop16,prop12,eVar8,eVar10,prop8,prop10",t.tl()}"uxs-highlight"!=p&&"stage_presentation:_buttons_variant"!=p&&"stage_presentation:_video"!=p&&"video_container"!=p||(a(),h=_satellite.getVar("ev_eve_timestamp"),t.eVar50=_satellite.getVar("ev_eve_eventName"),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=h,t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO")||_satellite.getVar("pr_att_mmdr"),t.linkTrackVars+="eVar50,eVar16,prop16,prop12,eVar8,eVar10,prop8,prop10",t.tl()),t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar18,eVar46,eVar34,eVar50",t.linkTrackEvents+="event91,event64,event65",r=r.slice(0,-1),t.events+=r}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"start video",linkType:"o"}}]},{id:"RL19c76609c4e44326920b66ae5b2a3923",name:"DCR - MyBMW Config Finish",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"vehicle_config_finished"},ruleOrder:50}],conditions:[],actions:[]},{id:"RLebb5cf553c674ebab8a35816cb4a3eb1",name:"TPT - ME - Register now button - Facebook EBR",events:[{modulePath:"core/src/lib/events/click.js",settings:{anchorDelay:1e3,elementSelector:"a",elementProperties:[{name:"title",value:"Register now",valueIsRegex:!0}],bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/local-content/joyunleashed.html",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2590da92390e4c7f8b2f359493135955-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa4a0ffb596fd4551bb8d328c8b4204d8",name:"TPT - CC - AEM - Facebook - iFrame TDA Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.cc",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC85e7b3bbae6047c2a3c60a03d8cf3772-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2345dede656d46dcbb15bfc67e9068a7",name:"TPT - Oman - AEM - LinkedIn - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa7cf6464f3a04933970298ee455c8150-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2f4e3e52de6548b5b737f5656cc8d8c9",name:"TPT - Bahrain - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"BH"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCcffed4d2e87448d0886eb9639e656c61-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8934a611d2a94b338fc657137fcfbd07",name:"TPT - MA - AEM - Adwords - Series X3 Tariff Brochure - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'div.show-for-large-up > ul > li:nth-child(2) > a[href="/content/dam/bmw/marketB4R1/bmw_ma/all-models/pricelists/THE-X3_oct2020.pdf.asset.1603713680420.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/fr/all-models/x-series/X3/2019/bmw-x3-highlights.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC68ccfa849e1948a28379220c29f594f9-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL805c1389a0774d0899618ea23695c5c3",name:"W - Configurator - EWE Layer Confirmed",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"button.expand.button.btn-agree-policy.btn-submit",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){var e=[];if($(".gcdm-policy-usage-definitions input:checked").each((function(){e.push($(this).attr("name"))})),e.length>0)return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.logger.log("EWE Layer Shown - Confirmed"),t.linkTrackVars="eVar1,eVar2,eVar3,eVar4,eVar7,eVar12,eVar14,eVar44,eVar45,eVar48,eVar63,prop1,prop12,prop13, prop69,prop70,prop2,channel,prop31,eVar31,events",_satellite.getVar("SessionID"),_satellite.getVar("pa_pag_pageName");var a=_satellite.getVar("URLNoParam");_satellite.getVar("pr_att_mmdr"),_satellite.getVar("jcrPathLevel1"),t.eVar1=_satellite.getVar("hierarchyEvar"),t.eVar2=_satellite.getVar("pageName"),t.eVar3=_satellite.getVar("pa_pag_pageTitle"),t.eVar4=_satellite.getVar("URL"),t.eVar7=_satellite.getVar("pa_pag_language"),t.eVar12=_satellite.getVar("pathName"),t.eVar14=_satellite.getVar("userMetaData"),t.eVar44=_satellite.getVar("nonTechMetaData")+"~"+_satellite.getVar("nonTechMetaDataEvarAddon"),t.eVar45=_satellite.getVar("techMetaData")+"~rn:Configurator - EWE Layer Confirmed",1!=_satellite.getVar("noInteractionCount")?t.eVar48="+1":_satellite.setVar("noInteractionCount",!1),t.eVar63=a;var r=_satellite.getVar("adobeRSID");t.account=r,t.server=_satellite.getVar("server");var n=_satellite.getVar("ev_eve_timestamp");t.prop12=n,t.prop13=_satellite.getVar("nonTechMetaData"),t.prop69="tracking.5",t.prop70="D=mid"}catch(e){_satellite.logger.log(e)}}},trackerProperties:{events:[{name:"event91"},{name:"event132"},{name:"event998"},{name:"event999"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"EWE Layer Confirmed",linkType:"o"}}]},{id:"RLac8f0ddbdb9449a082fcbf5a61b22931",name:"DCR - Print",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"print"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){_satellite.logger.info("DTM: print rule: start"),_satellite.getVar("defaultVars"),"trgovec.bmw"===_satellite.getVar("topLevelDomain")&&(t.abort=!0);var a="",r=_satellite.getVar("URLNoParam"),n=_satellite.getVar("pa_pag_pageName"),s=_satellite.getVar("navEvarForClicks"),o=_satellite.getVar("navEvarForClicks2"),i=_satellite.getVar("pa_cat_primaryCategory"),l=_satellite.getVar("pa_cat_subCategory01"),c=_satellite.getVar("pr_att_mmdr"),d=_satellite.getVar("pr_pro_productID"),u=_satellite.getVar("ev_eve_cause"),g=_satellite.getVar("ev_eve_eventAction"),m=_satellite.getVar("pa_att_template");t.eVar16=s,t.eVar18=o,t.eVar45+="~rn:Print";var p=s.split("~");if(t.prop16=p[1]+"~"+p[2]+"~"+p[5],"VCO"===i){t.eVar9=c,t.eVar10=c;var v=r+"#/"+l;t.eVar63=v,t.eVar34="VCO: Download",t.eVar46=l+"|"+n;var b=d.split("::").join("|");if(b=b.substring(b.indexOf("|")+1),t.eVar36=b,a+="event91,event113,event37,event38,",("Icon-Bar"==u&&"Print"==g||"Summary-Bottom"==u&&"Print"==g)&&(a+="event33,"),"Icon-Bar"!=u&&(a+="event206,"),"true"===_satellite.getVar("financeInteraction")){var f=_satellite.getVar("ev_att_fdo_calculations").split("|");a+="event203,event204,event225,",a+=f[0];var _=_satellite.getVar("sfProduct");null!=_&&(t.eVar58=_+f[1])}var h=_satellite.getVar("pr_att_sellingPriceTotal"),V=_satellite.getVar("s_products_vco_v52"),C=_satellite.getVar("s_products_vco_v53");""==c&&(c="not set");var y="";y+=";"+c+";1;"+h+";event112="+h+";eVar52="+V+",",t.eVar51=V,""!=(y+=C+",")&&(y=y.slice(0,-1),t.products=y),a+="event112,",t.linkTrackEvents+="event91,event113,event33,event37,event38,event203,event204,event206,event210,event211,event212,event213,event214,event215,event216,event217,event218,event219,event220,event221,event222,event223,event224,event225,event112"}if(m.indexOf("/templates/dealerlocator")>-1){var P=_satellite.getVar("pa_att_outletName"),w=_satellite.getVar("pa_att_dealerID");t.eVar41=P+"|"+w,a+="event58,event60,event61,",t.linkTrackEvents+="event58,event60,event61"}t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar36,eVar34,eVar51,eVar52,eVar53,eVar58,eVar46,eVar41,eVar48,products",a=a.slice(0,-1),t.events+=a}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"print",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC359dd6834dff4659858aaa7cdb00e77c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd7e5a2331a4d4eee8a32c02fd13698bc",name:"TPT - MU - AEM - Eloqua - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.mu",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC57e00a3d96d04327bbda10e8d709f8d8-source.min.js",language:"html",isExternal:!0}}]},{id:"RLafe47920b17142f98a600cfd201ee270",name:"HT - All Pages - Consent Cookie Transfer",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-cookie-transfer",(function(){e()}))}catch(e){_satellite.logger.error("PLR: Cookie consent transfer ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){var e=["bmw.pl","bmw.se","bmw.no","bmw.dk","bmw.sk","bmw.hu","bmw.gr","bmw.cz","bmw.ro","bmw.bg","bmw.no","bmw.si","bmw.fi","bmw.com.br","bmw.in"],t=_satellite.getVar("topLevelDomain");return e.indexOf(t)>-1||"true"!=_satellite.getVar("splitConsentEnabled")}}}],actions:[{
modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCae475a212e6543ba8f10bb3af1ff8c6f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6a03646ee7fb4a9f93771ac9d7d95bbd",name:"TPT - VN - All pages - Adwords",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - VN - All pages - Adwords retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"VN"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.vn",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5f9e70f444bf4c38a388e981e2cffa85-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa87efeefe2984810b1cc5e7201fe1143",name:"PLR - All Pages - Fire Form Start Rule",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger",(function(t){t.detail&&t.detail.processing==_satellite.getVar("consentMap").AdobeAnalytics&&e()}))}catch(e){_satellite.logger.error("PLR - Fire Form Start Rule",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC132cdb8d2aa646be9a1147fbe4694c89-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL428064d104064642ac3cf489bbf29473",name:"PLR - All Pages - Performance timing New",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!!["bmw.co.uk","bmw.nl","bmw.fr","bmw.co.jp","bmw.ru","bmw.it","bmw.pl","bmw.se","bmw.hr","bmw.es","bmw.ro","bmw.gr","bmw.bg","bmw.dk","bmw.ie","bmw.be","bmw.pt","bmw.at","bmw.hu","bmw.fi","bmw.cz","bmw.com.cy","bmw.lu","bmw.lt","bmw.si","bmw.com.mt","bmw.ee","bmw.sk","bmw.lv"].includes(_satellite.getVar("topLevelDomain"))}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCad3ea9e24f464ed5812371d9a4bcfab4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLfccbe55ea2b8464cb630e11cb59abc5e",name:"W - New Salesbar ICP",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"newsalesbar_ICPworkaround"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),t.eVar60=_satellite.getVar("internalCampaignParameter"),t.linkTrackVars+="eVar60",t.linkTrackEvents+="event91"}catch(e){_satellite.notify("error in DCR newsalesbar_ICPworkaround : "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Salesbar ICP workaround",linkType:"o"}}]},{id:"RLf306d9c458b74dcd83ee99af3e7a88a1",name:"TPT - EE - AEM - TawkChat - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw.ee",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC25b0ee3a24704bb1b203db98220c0b11-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL23b5f73e371046a995a9a78779a2e09b",name:"DCR - All - iFrame - AA - Connected Drive Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_connecteddrive"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),_satellite.getVar("topLevelDomain");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - All - iFrame - AA - Connected Drive Forms",t.eVar44=_satellite.getVar("nonTechMetaData");var r=_satellite.getVar("navEvarForClicks").split("~");t.prop16=r[1]+"~"+r[2]+"~"+r[5],a+="event91,";var n="",s=_satellite.getVar("ev_att_mmdr"),o=_satellite.getVar("pr_att_mmdr");n=""!=s&&"mmdr"!=s?s:""!=o?o:"not set";var i=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",l=_satellite.getVar("s_products_iFrame_v52"),c=_satellite.getVar("s_products_vco_v53"),d="";d+=";"+n+";1;"+i+";event112="+i+";eVar52="+l+",",t.eVar51=l,""!=(d+=c+",")&&(d=d.slice(0,-1),t.products=d);var u=_satellite.getVar("hierarchyEvar").split("|");t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],"Form Start"===_satellite.getVar("ev_eve_eventName")?(a+="event158,event180,",a+="event1:"+_satellite.getVar("SessionID")+"RFC,",a+="event2:"+_satellite.getVar("SessionID")+"RFC,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|Start|not set",t.prop30="Start RFC"):"Form Success"===_satellite.getVar("ev_eve_eventName")?(a+="event159,event181,",a+="event3:"+_satellite.getVar("SessionID")+"RFC,",a+="event4:"+_satellite.getVar("SessionID")+"RFC,",1==_satellite.getVar("ev_att_newsletterSelected")&&(a+="event188,event189,"),t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|Finish|not set",t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFC"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|First Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":t.abort=!0,t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,eVar11,eVar67,prop30,prop31,eVar51,eVar52,products,eVar44",t.linkTrackEvents+="event91,event1,event2,event3,event4,event158,event159,event180,event181,event188,event189,event295",a=a.slice(0,-1),t.events+=a}catch(e){var g={from:"AA",type:"DCR",name:"Connected Drive Forms"};_satellite.logger.error(e,g)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"connected drive form",linkType:"o"}}]},{id:"RL34e67e3036824457b78de34e2428badb",name:"TPT - TR - AEM - Adform - Multiple - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tr",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC43deff758cd94b76b64a9d9ba0da4a0b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL93d765acf415452ca9ba4532ba412e6f",name:"TPT - RS - AEM - Facebook - iFrame TDA Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCce6fe2e5bc5d4fd3b97b52247f25c153-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6bb4c13cb8434c0187801f75777c774a",name:"TPT - GT - All Pages - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - GT - All Pages - Facebook - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"GT"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.gt",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe77ecc88a3ab48c99d6ad34b9512c54f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLcb26f9cf711a4cb4b5370a8eb3e62517",name:"TPT - TR - All Pages - Twitter",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Twitter - TR - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"TR"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tr",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC1b52ccaf5a084135a3845ee21947cab5-source.min.js",language:"html",isExternal:!0}}]},{id:"RL623a946c244e46e78c45fc0ccfb2d607",name:"TPT - Abudhabi - iFrame - RFO Forms DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-abudhabi.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"AE"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCedeff4c3ba1a4291bc205aaf5cde8810-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb484f2258d2743b5b4d77c5861a37efc",name:"TPT - IL - AEM - LinkedIn - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.il",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC96793fb074d647378ce60f9c5824d174-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb5cb70f1e595451f88aeb2252485808a",name:"TPT - TW - AEM - Yahoo - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"TW"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tw",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC989c39debc244fdab551bab7aaf2236a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc7cb4ffa4ba247fabd9593ca9f26d5ed",name:"DCR - Scrape Form Start",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"temp_form_start"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){try{if(void 0===_satellite.getVar("triggeredCall"))return!0}catch(e){_satellite.logger.error(e)}}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2"),t.eVar45+="~rn:Scrape - Form Start",t.eVar6=document.referrer;var r=_satellite.getVar("navEvarForPage").split("~");t.prop16=r[1]+"~"+r[2]+"~"+r[5],a+="event91,",t.linkTrackVars+="eVar16,prop16,eVar6,",t.linkTrackEvents+="event91,";var n=_satellite.getVar("hierarchyEvar").split("|");t.prop1=n[0],t.prop2=n[1],t.prop3=n[2],t.linkTrackVars+="prop1,prop2,prop3,";var s=_satellite.getVar("ev_att_mmdr"),o=_satellite.getVar("pr_att_mmdr");t.eVar10=""!=s&&"mmdr"!=s?s:""!=o?o:"not set";var i=_satellite.getVar("ev_att_dealerInfo");""==i&&(i=(((_satellite.getVar("finalDataLayer").page||"").attributes||"").dealerName||"not set")+"|"+(((_satellite.getVar("finalDataLayer").page||"").attributes||"").dealerID||"not set")+"_"+(((_satellite.getVar("finalDataLayer").page||"").attributes||"").outletID||"not set")),t.eVar41=i,t.linkTrackVars+="eVar10,eVar41,";var l=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",c=_satellite.getVar("s_products_vco_v52"),d=_satellite.getVar("s_products_vco_v53");""==(o=_satellite.getVar("pr_att_mmdr"))&&(o="not set");var u="";u+=";"+o+";1;"+l+";event112="+l+";eVar52="+c+",",t.eVar51=c,""!=(u+=d+",")&&(u=u.slice(0,-1),t.products=u),t.linkTrackVars+="eVar51,eVar52,products,";var g=document.getElementsByClassName("before-success"),m=$(g).is(":visible"),p=document.getElementsByClassName("after-success");$(p).is(":visible"),window.formrfo&&m&&(a+="event1:"+_satellite.getVar("SessionID")+"RFO,",a+="event2:"+_satellite.getVar("SessionID")+"RFO"+_satellite.getVar("pr_att_mmdr")+",",a+="event13,event172,",a+="event14:"+_satellite.getVar("SessionID")+_satellite.getVar("pr_att_mmdr")+",",t.eVar11="Central Form|RFO|Generic|Start|not set",t.prop30="Start RFO",t.linkTrackVars+="eVar11,prop30,",t.linkTrackEvents+="event1,event2,event13,event14,event172,"),window.formtda&&m&&(a+="event1:"+_satellite.getVar("SessionID")+"TDA,",a+="event2:"+_satellite.getVar("SessionID")+"TDA"+_satellite.getVar("pr_att_mmdr")+",",a+="event9,event170,",a+="event10:"+_satellite.getVar("SessionID")+_satellite.getVar("pr_att_mmdr")+",",t.eVar11="Central Form|TDA|Generic|Start|not set",t.prop30="Start TDA",t.linkTrackVars+="eVar11,prop30,",t.linkTrackEvents+="event1,event2,event9,event10,event170,"),window.formrfi&&"post"===window.formrfi.getAttribute("data-form-type")&&m&&(a+="event1:"+_satellite.getVar("SessionID")+"RFIP,",a+="event2:"+_satellite.getVar("SessionID")+"RFIP"+_satellite.getVar("pr_att_mmdr")+",",a+="event5,",a+="event6:"+_satellite.getVar("SessionID")+_satellite.getVar("pr_att_mmdr")+",",a+="event162,event168,event184,event701,",t.eVar11="Central Form|RFI Postal|Generic|Start|not set",t.prop30="Start RFI Postal",t.linkTrackVars+="eVar11,prop30,",t.linkTrackEvents+="event1,event2,event5,event6,event162,event168,event184,event701,"),window.formrfi&&"download"===window.formrfi.getAttribute("data-form-type")&&m&&(a+="event1:"+_satellite.getVar("SessionID")+"RFID,",a+="event2:"+_satellite.getVar("SessionID")+"RFID"+_satellite.getVar("pr_att_mmdr")+",",a+="event17,",a+="event18:"+_satellite.getVar("SessionID")+_satellite.getVar("pr_att_mmdr")+",",a+="event162,event174,event184,",t.eVar11="Central Form|RFI Download|Generic|Start|not set",t.prop30="Start RFI Download",t.linkTrackVars+="eVar11,prop30,",t.linkTrackEvents+="event1,event2,event17,event18,event162,event174,event184,"),window.formrfc&&(a+="event1:"+_satellite.getVar("SessionID")+"RFC,",a+="event2:"+_satellite.getVar("SessionID")+"RFC,",a+="event158,event180,",t.eVar11="Central Form|RFC|Generic|Start|not set",t.prop30="Start RFC",t.linkTrackVars+="eVar11,prop30,",t.linkTrackEvents+="event1,event2,event158,event180,"),window.formrfs&&m&&(a+="event1:"+_satellite.getVar("SessionID")+"RFS,",a+="event2:"+_satellite.getVar("SessionID")+"RFS,",a+="event160,event182,",t.eVar11="Central Form|RFS|Generic|Start|not set",t.prop30="Start RFS",t.linkTrackVars+="eVar11,prop30,",t.linkTrackEvents+="event1,event2,event160,event182,"),window.formrfa&&m&&(a+="event1:"+_satellite.getVar("SessionID")+"RFA,",a+="event2:"+_satellite.getVar("SessionID")+"RFA,",a+="event164,event165,event186,",t.eVar11="Central Form|RFA|Generic|Start|not set",t.prop30="Start RFA",t.linkTrackVars+="eVar11,prop30,",t.linkTrackEvents+="event1,event2,event160,event182,event164,event165,event186,"),window.formcontainercr&&m&&(a+="event1:"+_satellite.getVar("SessionID")+"Campaign,",a+="event2:"+_satellite.getVar("SessionID")+"Campaign"+_satellite.getVar("pr_att_mmdr")+",",a+="event156,event178,",t.eVar11="Central Form|Campaign|Generic|Start|not set",t.prop30="Start Campaign",t.linkTrackVars+="eVar11,prop30,",t.linkTrackEvents+="event1,event2,event156,event178,"),a=a.slice(0,-1),t.events+=a,t.linkTrackVars=t.linkTrackVars.slice(0,-1),t.linkTrackEvents=t.linkTrackEvents.slice(0,-1),void 0===_satellite.getVar("triggeredCall")&&_satellite.setVar("triggeredCall","true")}catch(e){_satellite.logger.log("Third Party Error")}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC6941127139f546c0a0dfe4b5a327b24d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL91aa5e2bf0c84fb1b101f5a61ae9f4a0",name:"TPT - Abu Dhabi - AEM - LinkedIn - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-abudhabi.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC17f6ba7db60a449187647d70899f1878-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd33202110a36471f96e5d16539e333f4",name:"DCR - All - iFrame - AA - FS RFO Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_fs_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - All - iFrame - AA - FS RFO Forms";var r=_satellite.getVar("navEvarForClicks").split("~");t.prop16=r[1]+"~"+r[2]+"~"+r[5],a+="event91,";var n=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=n[0],t.prop2=n[1],t.prop3=n[2],"Form Start"===_satellite.getVar("ev_eve_eventName"))a+="event1:"+_satellite.getVar("SessionID")+"FS RFO,",a+="event2:"+_satellite.getVar("SessionID")+"FS RFO,","Loan"===_satellite.getVar("ev_cat_subCategory02")?a+="event322,event323,":"Quote"===_satellite.getVar("ev_cat_subCategory02")?a+="event330,event331,":"Private Lease"===_satellite.getVar("ev_cat_subCategory02")?a+="event334,event335,":"Generic"===_satellite.getVar("ev_cat_subCategory02")?a+="event378,event380,":"Insurance"===_satellite.getVar("ev_cat_subCategory02")?a+="event382,event384,":"Operational Lease"===_satellite.getVar("ev_cat_subCategory02")&&(a+="event386,event388,"),a+="event207,event338,",t.eVar11="Local Form|FS RFO|"+_satellite.getVar("ev_cat_subCategory02")+"|Start|not set|"+_satellite.getVar("ev_att_stepName"),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start FS RFO";else if("Form Success"===_satellite.getVar("ev_eve_eventName")){_satellite.getVar("functionList");var s=_satellite.getVar("ev_att_dealerName"),o=_satellite.getVar("ev_att_dealerID");a+="event3:"+_satellite.getVar("SessionID")+"FS RFO,",a+="event4:"+_satellite.getVar("SessionID")+"FS RFO"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",","Loan"===_satellite.getVar("ev_cat_subCategory02")?a+="event324,event325,":"Quote"===_satellite.getVar("ev_cat_subCategory02")?a+="event332,event333,":"Private Lease"===_satellite.getVar("ev_cat_subCategory02")?a+="event336,event337,":"Generic"===_satellite.getVar("ev_cat_subCategory02")?a+="event379,event381,":"Insurance"===_satellite.getVar("ev_cat_subCategory02")?a+="event383,event385,":"Operational Lease"===_satellite.getVar("ev_cat_subCategory02")&&(a+="event387,event389,"),a+="event208,event339,","true"===_satellite.getVar("ev_att_newsletterSelected")&&(a+="event188,event189,"),t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar11="Local Form|FS RFO|"+_satellite.getVar("ev_cat_subCategory02")+"|Finish|not set|"+_satellite.getVar("ev_att_stepName"),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),""!=s&&null!=s||(s="not set"),""!=o&&null!=o||(o="not set"),"not set"==s&&"not set"==o||(t.eVar13=s+"|"+o),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish FS RFO"}else"Local Form Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event138,event139,",t.eVar11="Local Form|FS RFO|"+_satellite.getVar("ev_cat_subCategory02")+"|Interaction|not set|"+_satellite.getVar("ev_att_stepName"),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element")):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|FS RFO|"+_satellite.getVar("ev_cat_subCategory02")+"|"+_satellite.getVar("ev_eve_eventName")+"|not set|"+_satellite.getVar("ev_att_stepName"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|FS RFO|"+_satellite.getVar("ev_cat_subCategory02")+"|First Interaction|not set|"+_satellite.getVar("ev_att_stepName"),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element")):t.abort=!0;var i=_satellite.getVar("ev_att_dealerInfo")||"not set";t.eVar41=i;var l=_satellite.getVar("ev_att_mmdr");if(""==l){var c=_satellite.getVar("finalDataLayer").product;l=((c=c&&c.length>0?c[c.length-1]:[]).attributes||"").mmdr||"not set"}t.eVar10=l,t.eVar44=_satellite.getVar("nonTechMetaData");var d=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",u=_satellite.getVar("s_products_iFrame_v52"),g=_satellite.getVar("s_products_vco_v53"),m="";m+=";"+l+";1;"+d+";event112="+d+";eVar52="+u+",",t.eVar51=u,""!=(m+=g+",")&&(m=m.slice(0,-1),t.products=m),t.linkTrackVars+="eVar16,eVar10,eVar11,eVar13,eVar41,eVar44,eVar51,eVar52,eVar53,eVar67,products,prop1,prop2,prop3,prop16,prop30,prop31",t.linkTrackEvents+="event91,event1,event2,event3,event4,event13,event14,event15,event16,event172,event173,event188,event189,event138,event139,event207,event208,event295,event322,event323,event324,event325,event330,event331,event332,event333,event334,event335,event336,event337,event338,event339,event378,event379,event380,event381,event382,event383,event384,event385,event386,event387,event388,event389",a=a.slice(0,-1),t.events+=a}catch(e){var p={from:"AA",type:"DCR",name:"FS RFO Forms"};_satellite.logger.error(e,p)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"FS RFO Form",linkType:"o"}}]},{id:"RL638bd1d4557548b4ac1600afb03e8aad",name:"DCR - Conflict",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"conflict"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("pr_pro_productID").split("::").join("|");r=r.substring(r.indexOf("|")+1),"VCO"===_satellite.getVar("ev_att_componentName")&&"Error"===_satellite.getVar("ev_eve_eventAction")||(t.abort=!0);var n=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:Conflict",t.eVar63=n;var s=_satellite.getVar("navEvarForClicks").split("~");t.prop16=s[1]+"~"+s[2]+"~"+s[5],t.eVar9=_satellite.getVar("pr_att_mmdr"),t.eVar10=_satellite.getVar("pr_att_mmdr"),t.eVar34="VCO: Buildability Conflict",t.eVar36=r,a+="event91,event84,event109,event110,",t.eVar38=_satellite.getVar("ev_eve_cause");var o=_satellite.getVar("s_products_vco_v52"),i=_satellite.getVar("pr_att_sellingPriceTotal"),l="";l+=";"+_satellite.getVar("pr_att_mmdr")+";1;"+i+";;eVar52="+o+",",t.eVar51=o,""!=(l+=";"+_satellite.getVar("ev_eve_eventPoints")+";1;;;eVar53=ps:not set~pi:"+_satellite.getVar("ev_eve_eventPoints")+",")&&(l=l.slice(0,-1),t.products=l),t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar36,eVar46,eVar33,eVar34,eVar51,eVar52,eVar53,eVar38",t.linkTrackEvents+="event91,event84,event109,event110",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"conflict",linkType:"o"}}]},{id:"RL9d3518ad8f1c4eb4a4d5c50ed82b032a",name:"TPT - LB - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-lebanon.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2f81b137fd7c4e6cab5e9159b06826d1-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6b4a22bec62249e1b41e77a76ec3e006",name:"TPT - MU - AEM - TAWKChat - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.mu",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0fdf1911f66347a49f9a335fc3ba0a45-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL79431421f6374502a22cbdbc1c70fbfb",name:"TPT - ME - AEM - Linkedin - TDA iFrame Scrape Form - DCR - p15r[l]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc6e24f8c63374abe831bcedfbff10211-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL0182fc0534bf4ff48ae0baf149466d5c",name:"W - BMW Submit Registration",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"#formregistration .before-success .multistepline__submit button",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{if(document.getElementById("formregistration").classList.contains("ng-invalid"))t.abort=!0;else{t.linkTrackVars="eVar1,eVar2,eVar3,eVar4,eVar7,eVar11,eVar12,eVar14,eVar44,eVar45,eVar48,eVar63,prop1,prop12,prop13, prop69,prop70,prop2,prop3,channel,prop31,eVar31,events",_satellite.getVar("SessionID");var a=_satellite.getVar("hierarchyEvar"),r=(_satellite.getVar("pa_pag_pageName"),_satellite.getVar("pageName")),n=_satellite.getVar("pa_pag_pageTitle"),s=_satellite.getVar("URL"),o=_satellite.getVar("URLNoParam"),i=_satellite.getVar("pa_pag_language"),l=_satellite.getVar("pathName"),c=_satellite.getVar("userMetaData"),d=_satellite.getVar("nonTechMetaData"),u=_satellite.getVar("nonTechMetaDataEvarAddon"),g=_satellite.getVar("techMetaData"),m=_satellite.getVar("server"),p=(_satellite.getVar("pr_att_mmdr"),_satellite.getVar("jcrPathLevel1"),_satellite.getVar("ev_eve_timestamp"));t.eVar1=a,t.eVar2=r,t.eVar3=n,t.eVar4=s,t.eVar7=i,t.eVar11="Central Form|Registration|MyBMW|Finish|not set",t.eVar12=l,t.eVar14=c,t.eVar44=d+"~"+u,t.eVar45=g+"~rn:Registration Submit",1!=_satellite.getVar("noInteractionCount")?t.eVar48="+1":_satellite.setVar("noInteractionCount",!1),t.eVar63=o;var v=_satellite.getVar("adobeRSID");t.account=v,t.server=m,t.prop12=p,t.prop13=d,t.prop69="Stage II",t.prop70="D=mid";var b=_satellite.getVar("hierarchyEvar").split("|");t.prop1=b[0],t.prop2=b[1],t.prop3=b[2],t.events="event36,event91,event998,event999,event308,event309,event3:"+_satellite.getVar("SessionID")+"Registration",t.linkTrackEvents="event36,event91,event998,event999,event308,event309,event3"}}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"regi_Submit",linkType:"o"}}]},{id:"RL615fd6be7b75470296d8f9296ada62f1",name:"TPT - Qatar - AEM - Snapchat - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{
modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Dubai - Multiple - Twitter",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-qatar.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9f447b2cc6ee44b1a01d1a47122ebbc5-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2de077ba26014467850d46e36fb2b708",name:"TPT - PY - All Pages - Facebook - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - SK - All Pages - Facebook - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"PY"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.py",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC92aaff40bdb445c782eb25ce5f3ab68c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8179c16d9c7541b09a895bcbab2ea777",name:"DCR - iFrame Aftersales Service Special Step",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_after-sales_service-special_step"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:iFrame Aftersales Service Special Step",t.eVar34=_satellite.getVar("ev_eve_eventName"),t.eVar68=_satellite.getVar("ev_eve_eventName"),t.eVar51=_satellite.getVar("s_products_vco_v52"),t.eVar52=_satellite.getVar("s_products_vco_v52"),""!=_satellite.getVar("ev_att_outletName")&&""!=_satellite.getVar("ev_att_dealerID")&&""!=_satellite.getVar("ev_att_outletID")&&(t.eVar41=_satellite.getVar("ev_att_outletName")+"|"+_satellite.getVar("ev_att_dealerID")+"_"+_satellite.getVar("ev_att_outletID"));var r=_satellite.getVar("navEvarForClicks").split("~");t.prop16=r[1]+"~"+r[2]+"~"+r[5],t.linkTrackVars+="eVar16,prop16,eVar34,eVar68,eVar51,eVar52,eVar41",t.linkTrackEvents+="",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.error('Error DCR "iframe aftersales service special step" : '+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"iframe aftersales service special step",linkType:"o"}}]},{id:"RLc2ea731e37904306bcb119be827d0bae",name:"TPT - EG - AEM - Facebook - All Pages - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - EG - All Pages - Facebook - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-egypt.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4cdf778390914f1e9b060246159e84f1-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8f896b81395c432c8d492f9bbef67a20",name:"DCR - Online TDA Error",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_error"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("ev_eve_effect"),r=_satellite.getVar("ev_eve_cause"),n=_satellite.getVar("ev_eve_eventAction"),s=_satellite.getVar("ev_eve_eventName"),o=_satellite.getVar("ev_att_componentName"),i=_satellite.getVar("ev_eve_target"),l=_satellite.getVar("ev_eve_element"),c=_satellite.getVar("ev_att_mmdr_NBO"),d=_satellite.getVar("ev_eve_timestamp");""!=d&&null!=d||(d="Not Set"),""!=c&&null!=c||(c="Not Set"),""!=l&&null!=l||(l="Not Set"),""!=i&&null!=i||(i="Not Set"),""!=o&&null!=o||(o="Not Set"),""!=s&&null!=s||(s="Not Set"),""!=n&&null!=n||(n="Not Set"),""!=a&&null!=a||(a="Not Set"),""!=r&&null!=r||(r="Not Set"),s=s.indexOf("email")>-1?s.replace("email","e m a i l"):s.indexOf("password")>-1?s.replace("password","p a s s w o r d"):s,t.eVar16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop12=d,t.eVar69=s,t.eVar112=n+"~"+s,t.eVar8=t.eVar10=t.prop8=t.prop10=c,t.eVar45+="~rn:Online TDA Error",t.eVar117=a+"~"+r,t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set",t.eVar52=_satellite.getVar("s_products_iFrame_v52"),t.eVar44=_satellite.getVar("nonTechMetaData"),t.events+="event91,event287,event288",t.linkTrackVars+="eVar16,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12,eVar45,eVar112,eVar69,eVar117,eVar52,eVar41,eVar44",t.linkTrackEvents+="event91,event287,event288"}catch(e){_satellite.logger.error("Error in DCR - Online TDA Error: "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RL20de5786c9164ae6891886f50e7fc3cb",name:"DCR - All - AEM - AA - DCS PV",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dcs_pv"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{var a="";_satellite.getVar("defaultVars"),t.prop13="",t.eVar1="",t.eVar72="";var r=digitals2.tracking.api.getPageObject(digitals2.tracking.api.getCurrentPageIndex());if(null!=r.cart){var n=r.cart.item.length-1,s=r.cart.attributes.paymentMethod,o=r.cart.attributes.offerID,i=(r.cart.item[n].productInfo.productID,r.cart.item[n].category.productType),l=r.cart.item[n].quantity,c=r.cart.item[n].price.basePrice,d=r.cart.item[n].price.currency,u=r.cart.item[n].price.taxRate,g=r.cart.item[n].price.priceWithTax,m=r.cart.item[n].linkedProduct[r.cart.item[n].linkedProduct.length-1].productInfo.totalPriceEur,p=r.cart.item[n].linkedProduct[r.cart.item[n].linkedProduct.length-1].productInfo.totalPriceLocal;t.eVar141="pm:"+(s||"not set"),t.eVar142="oid:"+(o||"not set"),t.currencyCode=d,c&&(a+="event480="+c+","),u&&(a+="event481="+u+","),g&&(a+="event482="+g+",")}if(null!=r.component){var v=r.component.length-1,b=r.component[v].componentInfo.componentID,f=r.component[v].componentInfo.componentName,_=r.component[v].category.primaryCategory,h=r.component[v].category.subCategory1,V=r.component[v].category.subCategory2,C=r.component[v].category.componentType,y=r.component[v].attributes.referringComponent,P=r.component[v].attributes.referringPlatform;t.eVar143="~cid:"+(b||"not set")+"~cn:"+(f||"not set"),t.eVar144="~pc:"+(_||"not set")+"~sc1:"+(h||"not set")+"~sc2:"+(V||"not set")+"~ct:"+(C||"not set"),t.eVar145="rc:"+(y||"not set")+"~rp:"+(P||"not set")}if(null!=r.dealer){var w=r.dealer.length-1,R=r.dealer[w].dealerInfo.dealerID,j=r.dealer[w].dealerInfo.dealerName,A=r.dealer[w].dealerInfo.outletID,T=r.dealer[w].attributes.solutionSpecific.BMWpay,O=r.dealer[w].attributes.linkedPage.pageInfo.pageID;r.dealer[w].attributes.linkedProduct[r.dealer[r.dealer.length-1].attributes.linkedProduct.length-1].productInfo.productID,t.eVar41=(j||"not set")+"|"+(R||"not set")+"_"+(A||"not set")+"_"+(T||"not set")}if(null!=r.page){O=r.page.pageInfo.pageID;var D=r.page.pageInfo.pageName,I=r.page.pageInfo.destinationURL,E=r.page.pageInfo.referringURL,S=(r.page.pageInfo.sysEnv,r.page.pageInfo.variant),k=r.page.pageInfo.version,L=r.page.pageInfo.language,x=r.page.pageInfo.geoRegion,N=(_=r.page.category.primaryCategory,h=r.page.category.subCategory1,V=r.page.category.subCategory2,r.page.category.pageType),F=(r.page.attributes.brand,r.page.attributes.currencyCode,r.page.attributes.preferredComChannel),M=r.page.attributes.checkoutID,q=r.page.attributes.leadTime,U=r.page.attributes.purchaseID,B=r.page.attributes.marketingConsent,H=r.page.attributes.solutionSpecific.deliveryMethodSelected,G=r.page.attributes.solutionSpecific.deliveryMethodAvailable,z=r.page.attributes.solutionSpecific.checkoutMethodsAvailable,W=r.page.attributes.solutionSpecific.paymentMethodsAvailable;-1!=F.indexOf("email")?F=F.replace("email","e_mail"):-1!=F.indexOf("phone")&&(F=F.replace("phone","p_hone")),-1!=B.indexOf("email")?B=B.replace("email","e_mail"):-1!=B.indexOf("phone")&&(B=B.replace("phone","p_hone")),t.eVar71="pid:"+(O||"not set")+"~vr:"+(S||"not set")+"~vn:"+(k||"not set")+"~pt:"+(N||"not set"),t.eVar4=I||"not set",t.eVar6=E||"not set",t.eVar7=t.prop7=(L||"not set")+"-"+(x||"not set"),t.prop46=_||"not set",t.prop47=h||"not set",t.prop48=V||"not set",t.eVar147="pcc:"+(F||"not set")+"~dms:"+(H||"not set"),t.eVar148="cid:"+(M||"not set"),t.eVar149="lt:"+(q||"not set"),t.eVar153="pcid:"+(U||"not set"),t.eVar155="mc:"+(B||"not set"),t.prop49=G||"not set",t.prop51=z||"not set",t.prop52=W||"not set",t.eVar2=D,t.pageName=D}if(null!=r.product&&r.product.length>0){var K=r.product.length-1,Y=r.product[K].attributes.modelName,J=(r.product[K].productInfo.productID,r.product[K].productInfo.productName),X=r.product[K].productInfo.manufacturer,Z=r.product[K].productInfo.color,Q=(_=r.product[K].category.primaryCategory,h=r.product[K].category.subCategory1,i=r.product[K].category.productType,r.product[K].attributes.internalCode),$=r.product[K].attributes.modelCode,ee=r.product[K].attributes.productionYear,te=r.product[K].attributes.yearOfRegistration,ae=r.product[K].attributes.series,re=r.product[K].attributes.bodyType,ne=r.product[K].attributes.fuelType,se=(r.product[K].linkedProduct[r.product[K].linkedProduct.length-1].productInfo.productID,X+"-"+Q);t.eVar51="ps:Car~pi:"+(Q||"not set")+"~pn:"+(J||"not set")+"~mc:"+($||"not set")+"~se:"+(ae||"not set")+"~bt:"+(re||"not set")+"~yl:na~bp:na~op:na~tp:na~sp:na~mr:"+(Q||"not set")+"~co:not set~en:na~fu:"+(ne||"not set")+"~cu:"+d+"~ms:na",t.eVar124=(se||"not set")+"~"+(J||"not set")+"~"+(X||"not set")+"~"+(_||"not set")+"~"+(h||"not set")+"~"+(i||"not set")+"~"+(Q||"not set")+"~"+($||"not set")+"~"+(Y||"not set")+"~"+(ee||"not set")+"~"+(te||"not set")+"~"+(ae||"not set")+"~"+(Z||"not set")+"~"+(re||"not set")+"~"+(ne||"not set"),t.prop10=t.eVar10=Q||"not set",t.products=(i||"not set")+";"+(se||"not set")+";"+(l||"not set")+";"+(g||"not set")+";event483="+(m||"not set")+"|event484="+(p||"not set")+";eVar154= "+(u||"not set")+"%"}if(null!=r.user){var oe=r.user.length-1,ie=r.user[oe].profile[r.user[oe].profile.length-1].profileInfo.profileID,le=r.user[oe].profile[r.user[oe].profile.length-1].attributes.loggedInStatus;t.eVar158="prid:"+(ie||"not set"),t.eVar14="lo:"+(le||"not set")}-1!=D.indexOf("error")&&(a+="event95,"),a=a.slice(0,-1),t.events=a,t.linkTrackVars+=",eVar141,eVar142,eVar143,eVar144,eVar145,eVar10,eVar41,eVar1,eVar2,eVar3,eVar71,eVar72,eVar4,eVar6,eVar7,eVar147,eVar148,eVar149,eVar153,prop13,prop49,prop51,prop52,eVar16,prop16,eVar117,prop53,prop10,prop54,eVar153,eVar14,prop12,eVar51,eVar124,products,eVar154,eVar155,eVar156,eVar157,eVar158,prop46,prop47,prop48"}catch(e){_satellite.logger.log("Error in DCR - All - AEM - AA - DCS",e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RL03f48952ce1146bc88c94430bde6d1cd",name:"TPT - TR - NPS - Usabilla",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT -NPS TU - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"TR"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tr",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb2421c6a6fb94f54a51df3d5bc4d0d88-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL88a1ec7d0dbc43d4acf56cb4997ccbf6",name:"TPT - Abu Dhabi - AEM - Facebook - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-abudhabi.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8f2b93b443ea45f9962bcbf3efa5ffa1-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLf5e5a0f334e34f9683247990e20be7e2",name:"DCR - All - AEM - AA - Compare",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"compare_technical_data_interaction"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals",caseInsensitive:!0},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("finalDataLayer"),r=_satellite.getVar("ev_eve_effect"),n=_satellite.getVar("ev_eve_cause");if(t.eVar16=t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~not set~not set~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO"),t.eVar45+="~rn:DCR Compare",t.eVar117=r+"~"+n,t.eVar69=_satellite.getVar("ev_att_errorCode"),t.eVar145="pc:"+(_satellite.getVar("ev_cat_primaryCategory")||"not set")+"~sc:"+(_satellite.getVar("ev_cat_subCategory01")||"not set"),null!=a.product&&a.product.length>0){var s=_satellite.getVar("pr_pro_productID"),o=_satellite.getVar("pr_pro_productName"),i=a.product[a.product.length-1].attributes.internalCode,l=_satellite.getVar("pr_att_modelCode"),c=a.product[a.product.length-1].attributes.productionYear,d=a.product[a.product.length-1].attributes.series,u=a.product[a.product.length-1].attributes.fuelType,g=a.product[a.product.length-1].attributes.gearing,m=a.product[a.product.length-1].attributes.engine,p=a.product[a.product.length-1].attributes.color;t.eVar51="ps:Car~pi:"+s+"~pn:"+o+"~mc:"+l+"~se:"+d+"~bt:na~yl:na~yp:"+c+"~yr:na~gr:"+g+"~bp:na~op:na~tp:na~sp:na~mr:"+i+"~co:"+p+"~en:"+m+"~fu:"+u+"~cu:na~ms:na";var v=_satellite.getVar("pr_att_modelName"),b=a.product[a.product.length-1].productInfo.manufacturer,f=a.product[a.product.length-1].category.primaryCategory,_=a.product[a.product.length-1].category.subCategory1,h=a.product[a.product.length-1].category.productType,V=a.product[a.product.length-1].attributes.yearOfRegistration;t.eVar124=(s||"not set")+"~"+(o||"not set")+"~"+(b||"not set")+"~"+(f||"not set")+"~"+(_||"not set")+"~"+(h||"not set")+"~"+(i||"not set")+"~"+(l||"not set")+"~"+(v||"not set")+"~"+(c||"not set")+"~"+(V||"not set")+"~"+(d||"not set")}-1!=_satellite.getVar("ev_eve_eventName").indexOf("error")&&(t.events+="event95"),t.events+="event91",t.linkTrackEvents+="event91,event95",t.linkTrackVars+="eVar16,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12,eVar45,eVar117,eVar124,eVar51,eVar69,eVar145"}catch(e){_satellite.logger.log(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"compare",linkType:"o"}}]},{id:"RL957f47baac6d43b0be80ba5a90beba09",name:"EBR - CA - iFrame - AA - ACS Click Tracking",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(-1!=["https://sf-acs.bmw.ca","https://sf-acs-i.bmw.ca"].indexOf(t.origin))if(t.data)try{_satellite.logger.log(JSON.parse(t.data));var a=JSON.parse(t.data);a.detail&&a.detail.custom&&Object.keys(a.detail.custom)&&Object.keys(a.detail.custom).length&&(_satellite.setVar("acs_event_data",a),e())}catch(e){_satellite.logger.error("EBR: ACS Component click tracking",e)}else _satellite.logger.log("no data in event object",t)}))}catch(e){_satellite.logger.error("EBR: ACS Component click tracking",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%topLevelDomain%",rightOperand:"bmw.ca"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("acs_event_data").detail,r=a.event.length?a.event[a.event.length-1].eventInfo.eventAction:"not set",n=a.event.length?a.event[a.event.length-1].eventInfo.eventName:"not set",s=a.event.length?a.event[a.event.length-1].eventInfo.type:"not set",o=a.event.length?a.event[a.event.length-1].eventInfo.timeStamp:"not set",i=a.event.length?a.event[a.event.length-1].eventInfo.cause:"not set",l=a.event.length?a.event[a.event.length-1].eventInfo.effect:"not set",c=a.component.length?a.component[a.component.length-1].componentInfo.componentID:"not set",d=a.component.length?a.component[a.component.length-1].componentInfo.componentName:"not set",u=a.component.length?a.component[a.component.length-1].category.componentType:"not set",g=a.component.length?a.component[a.component.length-1].category.primaryCategory:"not set",m=a.component.length?a.component[a.component.length-1].category.subCategory1:"not set",p=a.component.length?a.component[a.component.length-1].category.subCategory2:"not set";if(a.custom&&a.custom.event&&a.custom.event.length&&null!=a.custom.event[a.custom.event.length-1].attributes&&null!=a.custom.event[a.custom.event.length-1].attributes.search){var v=a.custom.event.length?a.custom.event[a.custom.event.length-1].attributes.search[0].label:"not set",b=a.custom.event.length?a.custom.event[a.custom.event.length-1].attributes.search[0].term:"not set",f=a.custom.event.length?a.custom.event[a.custom.event.length-1].attributes.search[0].state:"not set",_=a.custom.event.length?a.custom.event[a.custom.event.length-1].attributes.search[0].unit:"not set";t.products="search;search;;;;eVar30=sl:"+v+"~st:"+b+"~ss:"+f+"~su:"+_+",",t.eVar30="sl:"+v+"~st:"+b+"~ss:"+f+"~su:"+_}if(a.custom&&a.custom.product&&a.custom.product.length)for(var h=0;h<a.custom.product.length;h++){if(a.custom.product[h].category&&"service"===a.custom.product[h].category.productType){var V=a.custom.product[h].category.productType||"not set",C=a.custom.product[h].category.primaryCategory||"not set",y=a.custom.product[h].category.subCategory1||"not set",P=a.custom.product[h].productInfo.productName||"not set",w=(a.custom.product[h].productInfo.productID,a.custom.product[h].attributes.fin.downPayment||"not set"),R=a.custom.product[h].attributes.fin.monthlyPayment||"not set",j=a.custom.product[h].attributes.fin.term||"not set",A=a.custom.product[h].attributes.fin.annualMileage||"not set";t.eVar159="pt:"+V+"~ pc:"+C+"~ sc1:"+y+"~ pn:"+P,t.events+="event485="+w+",",t.events+="event486="+R+",",t.events+="event487="+j+",",t.events+="event488="+A+","}if(a.custom.product[h].category&&"vehicle"===a.custom.product[h].category.productType){var T=a.custom.product[h].category.productType||"not set",O=a.custom.product[h].category.primaryCategory||"not set",D=a.custom.product[h].category.subCategory1||"not set",I=a.custom.product[h].productInfo.productName||"not set",E=a.custom.product[h].productInfo.productID||"not set",S=a.custom.product[h].productInfo.manufacturer||"not set",k=a.custom.product[h].attributes.modelCode||"not set",L=a.custom.product[h].attributes.hybridVersion||"not set",x=a.custom.product[h].attributes.series||"not set";t.eVar51="ps:Car~pi:"+E+"~pn:"+I+"~mc:"+k+"~se:"+x+"~bt:na~yl:na~bp:na~op:na~tp:na~sp:na~mr:not set~co:not set~en:na~fu:na~cu:na~ms:na",t.eVar124=E+"~"+I+"~"+S+"~"+O+"~"+D+"~"+T+"~not set~"+k+"~not set~not set~not set~"+x+"~"+L}}"error"===n&&(t.events+="event95,"),t.prop12=o,t.eVar16=r+"~"+n+"~"+d+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+l+"~"+i+"~"+_satellite.getVar("ev_eve_element"),t.prop16=r+"~"+n+"~"+d+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+l+"~"+i+"~"+_satellite.getVar("ev_eve_element"),t.eVar117=l+"~"+i,t.eVar143="~cid:"+(c||"not set")+"~cn:"+(d||"not set"),t.eVar144="~pc:"+(g||"not set")+"~sc1:"+(m||"not set")+"~sc2:"+(p||"not set")+"~ct:"+(u||"not set"),t.events+="event91,",t.eVar156=s,t.linkTrackVars+="prop12,prop16,eVar16,eVar30,eVar51,eVar117,eVar124,eVar143,eVar144,eVar156,eVar159,products",t.linkTrackEvents+="event91,event95,event485,event486,event487,event488,"}catch(e){_satellite.logger.error("Error in EBR - CA - iFrame - AA - ACS Click Tracking: ",e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RL14417e77a49e4e0b9bbbe21a0cfe12b5",name:"TPT - PY - AEM - Adwords - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - PY - All Pages - Adwords - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"PY"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.py",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC30064389097b48108ed6527c38660ea8-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe0df8a3006b24b6bb4f2767acf668ecf-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa73f36497c7b4f659b817e9ea9404c0e",name:"TPT - UA - Price List - Google Site Tag EBR",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"a[href='https://data.bmw.ua/pricelist/BMW_Price_List.pdf']",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50},{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"a[href='https://data.bmw.ua/pricelist/BMW_i_Price_List.pdf']",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/topics/fascination-bmw/pricelist.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8f90bb86861247c79887d4d083c75813-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe7601147b4554e1c9c2f2dd072548408",name:"W - BMW Registration Start",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"#loginform > div > div > ul > li.small-12.medium-6.columns.s-order-2 > a > span, a.ds2-login-js--to-register > font, a.login-box__button-secondary > span > font > font,a.login-box__button-secondary,a.ds2-login-js--to-register,#loginform > div > div.login-box__container.login-box__bullet-container.column > ul.ds2-buttonlist.row > li > a > span",bubbleFireIfParent:!0,bubbleFireIfChildFired:!1},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{t.linkTrackVars="eVar1,eVar2,eVar3,eVar4,eVar7,eVar11,eVar12,eVar14,eVar44,eVar45,eVar48,eVar63,prop1,prop12,prop13, prop69,prop70,prop2,prop3,channel,prop31,eVar31,events",_satellite.getVar("SessionID");var a=_satellite.getVar("hierarchyEvar"),r=(_satellite.getVar("pa_pag_pageName"),_satellite.getVar("pageName")),n=_satellite.getVar("pa_pag_pageTitle"),s=_satellite.getVar("URL"),o=_satellite.getVar("URLNoParam"),i=_satellite.getVar("pa_pag_language"),l=_satellite.getVar("pathName"),c=_satellite.getVar("userMetaData"),d=_satellite.getVar("nonTechMetaData"),u=_satellite.getVar("nonTechMetaDataEvarAddon"),g=_satellite.getVar("techMetaData"),m=_satellite.getVar("server"),p=(_satellite.getVar("pr_att_mmdr"),_satellite.getVar("jcrPathLevel1"),_satellite.getVar("ev_eve_timestamp"));t.eVar1=a,t.eVar2=r,t.eVar3=n,t.eVar4=s,t.eVar7=i,t.eVar11="Central Form|Registration|MyBMW|Start|not set",t.eVar12=l,t.eVar14=c,t.eVar44=d+"~"+u,t.eVar45=g+"~rn:Registration Start",1!=_satellite.getVar("noInteractionCount")?t.eVar48="+1":_satellite.setVar("noInteractionCount",!1),t.eVar63=o;var v=_satellite.getVar("adobeRSID");t.account=v,t.server=m,t.prop12=p,t.prop13=d,t.prop69="Stage II",t.prop70="D=mid";var b=_satellite.getVar("hierarchyEvar").split("|");t.prop1=b[0],t.prop2=b[1],t.prop3=b[2],t.events="event35,event91,event998,event999,event340,event341,event1:"+_satellite.getVar("SessionID")+"Registration",t.linkTrackEvents="event35,event91,event998,event999,event340,event341,event1"}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"regi_Start",linkType:"o"}}]},{id:"RL9992712ab4be4bf3bb918bdc4696e848",name:"DCR - Scroll Tracking",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"reach_viewport"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),"scroll_tracking"==_satellite.getVar("ev_att_componentName")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_element"),t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("pr_att_mmdr"),t.eVar45+="~rn:Scroll Tracking",t.eVar102=_satellite.getVar("componentOffset")+"%~"+_satellite.getVar("documentHeight"),t.eVar103=_satellite.getVar("scrollTrackingComponent")+"~"+_satellite.getVar("totalScrollTrackingComponents")),t.linkTrackVars+="eVar16,prop16,prop12,eVar8,prop8,eVar45,eVar102,eVar103",t.linkTrackEvents+="event193,event91,event998,event999",t.events="event193,event91,event998,event999"}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Scroll Tracking",linkType:"o"}}]},{id:"RLd84d96ba714e45138257359371cf4edb",name:"TPT - Kuwait - AEM - Doubleclick - iFrame RFO Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kuwait.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8d9b776b00e241f785c87219f412cc78-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9dbf9ba7bfd04d06a2a81035c9f16ea7",name:"DCR - Request Link",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"request_link"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("topLevelDomain"),_satellite.getVar("defaultVars");var a="",r=""==_satellite.getVar("ev_eve_eventAction")?"Not set":_satellite.getVar("ev_eve_eventAction"),n=""==_satellite.getVar("ev_eve_eventName")?"Not set":_satellite.getVar("ev_eve_eventName"),s=""==_satellite.getVar("ev_att_componentName")?"Not set":_satellite.getVar("ev_att_componentName"),o=""==_satellite.getVar("ev_eve_target")?"Not set":_satellite.getVar("ev_eve_target"),i=""==_satellite.getVar("ev_eve_effect")?"Not set":_satellite.getVar("ev_eve_effect"),l=""==_satellite.getVar("ev_eve_cause")?"Not set":_satellite.getVar("ev_eve_cause"),c=""==_satellite.getVar("ev_eve_element")?"Not set":_satellite.getVar("ev_eve_element"),d=""==_satellite.getVar("ev_att_relatedComponentHeadline")?"Not set":_satellite.getVar("ev_att_relatedComponentHeadline");t.eVar16=r+"~"+n+"~"+s.dtm_capitalize().dtm_readable()+"~"+d+"~"+_satellite.getVar("URL")+"~"+o+"~"+i+"~"+l+"~"+c,t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:Request Link",t.prop16="D=v16",a+="event91,",t.linkTrackVars+="eVar16,prop16",t.linkTrackEvents+="event91",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.error('Error in the Direct Call Rule "Request Link" : '+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"%ev_eve_target%",linkType:"o"}}]},{
id:"RLc4522b5251184bfa9f1b1de5d938ebb2",name:"TPT - Abu Dhabi - AEM - Twitter - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Abudhabi - Multiple - Linkedin",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-abudhabi.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf449a27e818b46719dac120e9938cb1c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd673276893ce49afa697fc868dcb2f39",name:"TPT - RE - AEM - Facebook - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.re",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC32e73addc68e4c2993255bf26779d9de-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2b0670a749b44a27a462e664744e6c39",name:"TPT\xa0-\xa0SK\xa0-\xa0AEM\xa0-\xa0DoubleClick\xa0-\xa0Scrape\xa0Form\xa0Finish\xa0-\xa0DCR\xa0-\xa0p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"forms_simulated_page"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.sk",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0948746d3e21497b9b03933078a0c2bc-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb23f349f702445b0b34e1dcf2df3e273",name:"DCR - NL - iFrame - AA - NSF Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_nsf"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - NL - iFrame - AA - NSF Forms",t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var r="",n=_satellite.getVar("ev_att_mmdr"),s=_satellite.getVar("pr_att_mmdr");r=t.eVar10=""!=n&&"mmdr"!=n?n:""!=s?s:"not set",t.eVar44=_satellite.getVar("nonTechMetaData");var o=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",i=_satellite.getVar("s_products_iFrame_v52"),l=_satellite.getVar("s_products_vco_v53"),c="";c+=";"+r+";1;"+o+";event112="+o+";eVar52="+i+",",t.eVar51=i,""!=(c+=l+",")&&(c=c.slice(0,-1),t.products=c);var d=_satellite.getVar("navEvarForClicks").split("~");t.prop16=d[1]+"~"+d[2]+"~"+d[5],a+="event91,";var u=_satellite.getVar("hierarchyEvar").split("|");t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],"Form Start"===_satellite.getVar("ev_eve_eventName")?("RAO"==_satellite.getVar("ev_cat_subCategory01")?a+="event310,event311,":"RPL"==_satellite.getVar("ev_cat_subCategory01")?a+="event334,event335,":"RFD"==_satellite.getVar("ev_cat_subCategory01")?a+="event318,event319,":"RFL"==_satellite.getVar("ev_cat_subCategory01")?a+="event322,event323,":"FS RFO"==_satellite.getVar("ev_cat_subCategory01")&&"Quote"==_satellite.getVar("ev_cat_subCategory02")?(a+="event207,event338,",a+="event330,event331,"):"FS RFO"==_satellite.getVar("ev_cat_subCategory01")&&"Insurance"==_satellite.getVar("ev_cat_subCategory02")?(a+="event207,event338,",a+="event382,event384,"):"FS RFO"==_satellite.getVar("ev_cat_subCategory01")&&"Operational Lease"==_satellite.getVar("ev_cat_subCategory02")&&(a+="event207,event338,",a+="event386,event388,"),a+="event1:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_cat_subCategory01")+",",a+="event2:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_cat_subCategory01")+",",t.eVar11="Local Form|"+_satellite.getVar("ev_cat_subCategory01")+"|"+_satellite.getVar("ev_cat_subCategory02")+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start "+_satellite.getVar("ev_cat_subCategory01")):"Form Success"===_satellite.getVar("ev_eve_eventName")?("RAO"==_satellite.getVar("ev_cat_subCategory01")?a+="event312,event313,":"RPL"==_satellite.getVar("ev_cat_subCategory01")?a+="event336,event337,":"RFD"==_satellite.getVar("ev_cat_subCategory01")?a+="event320,event321,":"RFL"==_satellite.getVar("ev_cat_subCategory01")?a+="event324,event325,":"FS RFO"==_satellite.getVar("ev_cat_subCategory01")&&"Quote"==_satellite.getVar("ev_cat_subCategory02")?(a+="event208,event339,",a+="event332,event333,"):"FS RFO"==_satellite.getVar("ev_cat_subCategory01")&&"Insurance"==_satellite.getVar("ev_cat_subCategory02")?(a+="event208,event339,",a+="event383,event385,"):"FS RFO"==_satellite.getVar("ev_cat_subCategory01")&&"Operational Lease"==_satellite.getVar("ev_cat_subCategory02")&&(a+="event208,event339,",a+="event387,event389,"),a+="event3:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_cat_subCategory01")+",",a+="event4:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_cat_subCategory01")+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",t.eVar11="Local Form|"+_satellite.getVar("ev_cat_subCategory01")+"|"+_satellite.getVar("ev_cat_subCategory02")+"|Finish|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop31="Finish "+_satellite.getVar("ev_cat_subCategory01")):"Local Form Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event138,event139,",t.eVar11="Local Form|"+_satellite.getVar("ev_cat_subCategory01")+"|"+_satellite.getVar("ev_cat_subCategory02")+"|Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|"+(_satellite.getVar("ev_cat_subCategory01")||"RFD")+"|"+_satellite.getVar("ev_cat_subCategory02")+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":"RFO Start Direct"===_satellite.getVar("ev_eve_eventName")?t.eVar11="Local Form|"+(_satellite.getVar("ev_cat_subCategory01")||"RFD")+"|"+_satellite.getVar("ev_cat_subCategory02")+"|RFO Start Direct|not set":"RFO Start Config"===_satellite.getVar("ev_eve_eventName")?t.eVar11="Local Form|"+(_satellite.getVar("ev_cat_subCategory01")||"RFD")+"|"+_satellite.getVar("ev_cat_subCategory02")+"|RFO Start Config|not set":"Model Overview"===_satellite.getVar("ev_eve_eventName")?t.eVar11="Local Form|"+(_satellite.getVar("ev_cat_subCategory01")||"RFD")+"|"+_satellite.getVar("ev_cat_subCategory02")+"|Model Overview|not set":"RFO Start Dealer"===_satellite.getVar("ev_eve_eventName")?t.eVar11="Local Form|"+(_satellite.getVar("ev_cat_subCategory01")||"RFL")+"|"+_satellite.getVar("ev_cat_subCategory02")+"|RFO start Dealer|not set":"RFO Start Email"===_satellite.getVar("ev_eve_eventName")?t.eVar11="Local Form|"+(_satellite.getVar("ev_cat_subCategory01")||"RFL")+"|"+_satellite.getVar("ev_cat_subCategory02")+"|RFO start Email|not set":"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|"+_satellite.getVar("ev_cat_subCategory01")+"|"+_satellite.getVar("ev_cat_subCategory02")+"|First Interaction|not set"):t.abort=!0,t.linkTrackVars+="eVar16,prop16,eVar11,prop1,prop2,prop3,prop30,prop31,eVar10,eVar41,eVar44,eVar52,eVar51,products",t.linkTrackEvents+="event91,event1,event2,event3,event4,event138,event139,event295,event310,event311,event312,event313,event334,event335,event318,event319,event336,event337,event320,event321,event322,event323,event324,event325,event207,event208,event330,event331,event332,event333,event338,event339,event382,event383,event384,event385,event386,event387,event388,event389,",a=a.slice(0,-1),t.events+=a}catch(e){var g={from:"AA",type:"DCR",name:"NSF Forms"};_satellite.logger.error(e,g)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RLf6a03e827c184fc6a259bcc84c4baad3",name:"DCR - Email",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"email"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){_satellite.logger.info("DATA LAYER EVENT:");var a=_satellite.getVar("finalDataLayer");_satellite.logger.info(JSON.stringify(a.event[a.event.length-1],null,"\t")),_satellite.logger.info("DATA LAYER COMPONENT:"),_satellite.logger.info(JSON.stringify(a.component[0],null,"\t")),_satellite.getVar("defaultVars");var r="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:eMail";var n=_satellite.getVar("navEvarForClicks").split("~");if(t.prop16=n[1]+"~"+n[2]+"~"+n[5],"VCO"===_satellite.getVar("pa_cat_primaryCategory")){t.eVar9=_satellite.getVar("pr_att_mmdr"),t.eVar10=_satellite.getVar("pr_att_mmdr");var s=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");t.eVar63=s,t.eVar34="VCO: Email",t.eVar46=_satellite.getVar("pa_cat_subCategory01")+"|"+_satellite.getVar("pa_pag_pageName")}_satellite.getVar("pa_att_template").indexOf("/templates/dealerlocator")>-1&&(t.eVar41=_satellite.getVar("co_att_outletName")+"|"+_satellite.getVar("co_att_dealerID")+"_"+_satellite.getVar("co_att_outletID"),r+="event56,event60,event61,",t.eVar34="DLO: Email"),r+="event91,event92,",t.linkTrackVars+="eVar16,eVar41,prop16,eVar9,eVar10,eVar46,eVar34",t.linkTrackEvents+="event91,event92,event56,event60,event61",r=r.slice(0,-1),t.events+=r}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"email",linkType:"o"}}]},{id:"RLda1619d35f6544d4a335d326f934563d",name:"PLR - HQ - All Pages - removeJQueryMigration Warnings in sdsat_debug mode",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:3}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return"true"===localStorage.getItem("sdsat_debug")}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb85f98bc1686482ea4472552f30e81c1-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5d9b62d1dc5c4088b595fc46505eda93",name:"TPT - TR - AEM - LinkedIn -  All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - TR - All Pages - LinkedIn - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tr",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4784f6eda4344273ba29a5ec4a570def-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd7092d93b5494a98950c3e053767ee78",name:"DCR - All - iFrame - AA - RFI Download Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfi"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),_satellite.getVar("topLevelDomain");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - All - iFrame - AA - RFI Download Forms",t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var r="",n=_satellite.getVar("ev_att_mmdr"),s=_satellite.getVar("pr_att_mmdr");r=t.eVar10=""!=n&&"mmdr"!=n?n:""!=s?s:"not set",t.eVar44=_satellite.getVar("nonTechMetaData");var o=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",i=_satellite.getVar("s_products_iFrame_v52"),l=_satellite.getVar("s_products_vco_v53"),c="";c+=";"+r+";1;"+o+";event112="+o+";eVar52="+i+",",t.eVar51=i,""!=(c+=l+",")&&(c=c.slice(0,-1),t.products=c);var d=_satellite.getVar("navEvarForClicks").split("~");t.prop16=d[1]+"~"+d[2]+"~"+d[5],a+="event91,";var u=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],"Form Start"===_satellite.getVar("ev_eve_eventName"))a+="event1:"+_satellite.getVar("SessionID")+"RFI,",a+="event2:"+_satellite.getVar("SessionID")+"RFI,",a+="event162,event184,","Postal"==_satellite.getVar("ev_cat_subCategory03")||"postal"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?(a+="event5,event6:"+_satellite.getVar("SessionID")+",",a+="event168,"):(a+="event17,event174,",a+="event18:"+_satellite.getVar("SessionID")+","),"postal"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?(t.eVar11="Local Form|RFI Postal|Generic|Start|not set",t.prop30="Start RFI Postal"):"download"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?(t.eVar11="Local Form|RFI Download|Generic|Start|not set",t.prop30="Start RFI Download"):(t.eVar11="Local Form|RFI|"+_satellite.getVar("ev_cat_subCategory02")+"|Start|not set",t.prop30="Start RFI"),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element");else if(_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step"))"postal"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?t.eVar11="Local Form|RFI Postal|Generic|"+_satellite.getVar("ev_eve_eventName")+"|not set":"download"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?t.eVar11="Local Form|RFI Download|Generic|"+_satellite.getVar("ev_eve_eventName")+"|not set":t.eVar11="Local Form|RFI|"+_satellite.getVar("ev_cat_subCategory02")+"|"+_satellite.getVar("ev_eve_eventName")+"|not set";else if("Form Success"===_satellite.getVar("ev_eve_eventName")){_satellite.getVar("functionList");var g=_satellite.getVar("ev_att_dealerName"),m=_satellite.getVar("ev_att_dealerID");a+="event3:"+_satellite.getVar("SessionID")+"RFI,",a+="event4:"+_satellite.getVar("SessionID")+"RFI"+_satellite.getVar("ev_att_productName").toString().dtm_hashCode()+",",a+="event163,event185,","Postal"==_satellite.getVar("ev_cat_subCategory03")||"postal"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?(a+="event7,event8:"+_satellite.getVar("SessionID")+",",a+="event169,"):(a+="event19,event175,",a+="event20:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").toString().dtm_hashCode()+","),"postal"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?(t.eVar11="Local Form|RFI Postal|Generic|Finish|not set",t.prop31="Finish RFI Postal"):"download"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?(t.eVar11="Local Form|RFI Download|Generic|Finish|not set",t.prop31="Finish RFI Download"):(t.eVar11="Local Form|RFI|"+_satellite.getVar("ev_cat_subCategory02")+"|Finish|not set",t.prop31="Finish RFI"),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),""!=g&&null!=g||(g="not set"),""!=m&&null!=m||(m="not set"),"not set"==g&&"not set"==m||(t.eVar13=g+"|"+m),t.eVar67=_satellite.getVar("ev_att_productName").toString()}else"Local Form Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event138,event139,","postal"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?t.eVar11="Local Form|RFI Postal|Generic|Interaction|not set":"download"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?t.eVar11="Local Form|RFI Download|Generic|Interaction|not set":t.eVar11="Local Form|RFI|"+_satellite.getVar("ev_cat_subCategory02")+"|Interaction|not set"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,","postal"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?t.eVar11="Local Form|RFI Postal|Generic|First Interaction|not set":"download"==_satellite.getVar("ev_cat_subCategory02").toLocaleLowerCase()?t.eVar11="Local Form|RFI Download|Generic|First Interaction|not set":t.eVar11="Local Form|RFI|"+_satellite.getVar("ev_cat_subCategory02")+"|First Interaction|not set"):t.abort=!0;t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,eVar11,prop30,prop31,eVar67,eVar13,eVar10,eVar41,eVar44,eVar52,eVar51,products",t.linkTrackEvents+="event91,event1,event2,event3,event4,event5,event6,event17,event18,event7,event8,event19,event20,event162,event163,event168,event169,event174,event175,event184,event185,event138,event139,event295",a=a.slice(0,-1),t.events+=a}catch(e){var p={from:"AA",type:"DCR",name:"RFI Download Forms"};_satellite.logger.error(e,p)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"%check_RFI_Form_Type%",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC1c7c6beefbba4dd1a2c7d42f8c8d3cbf-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL510ba07dcc0a4329937e12f9fdc7a7b9",name:"TPT - Qatar - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"QA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-qatar.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc1010e8c6d8b4613bf747ca5c0b6ee8c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL85ba01e9d1714e4696f5ed08f6385973",name:"TPT - ME - AEM - Facebook - TDA iFrame Scrape Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCdb526a8b7dae444ba6e32889b8c2ee14-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd939d54e614343a88662bb6ed9e0c85f",name:"TPT - MK - AEM - Facebook - Local Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.mk",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC869d2d20ed024c759593cd0572ebb881-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLefe91959a66e4e1a83ac07f544c26197",name:"TPT - ME - Find a Retailer Button - Facebook EBR",events:[{modulePath:"core/src/lib/events/click.js",settings:{anchorDelay:1e3,elementSelector:"a",elementProperties:[{name:"href",value:"https://www.bmw-me.com/en/fastlane/dealer-locator.html",valueIsRegex:!0}],bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/local-content/joyunleashed.html",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd7134161313e45e0826387030641d58e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL55671549661445d8bf75106c7c978055",name:"TPT - Saudi - AEM - Facebook - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Saudi - Multiple - Facebook Pixels - ar/en - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-saudiarabia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0a32a6387c6a404fa4d7942fabe93488-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdfbd84d0e5b14ce4bd3c29ceb273f99f",name:"TPT - Abudhabi - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"AE"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-abudhabi.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCdda38bbd38e545999222bfe70ee5775b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL72b2a14ca2074d1387fe8c28b7f3171b",name:"TPT - TN - AEM - Facebook - Multiple - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-tunisia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc1144579818f47a580e012490590ba0b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa9e8522df7e849e982eb07e52a2b87ee",name:"TPT - TW - AEM - Facebook - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tw",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCcfe8ada7cd744c27a81d783214774b88-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8e5417bce7ac4b8981c20dbdbcdd9ad9",name:"TPT - MA - AEM - Adwords - Series X5 Tariff Brochure - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'div.show-for-large-up > ul > li:nth-child(2) > a[href="/content/dam/bmw/marketB4R1/bmw_ma/all-models/pricelists/THE-X5_oct2020.pdf.asset.1603713679584.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/fr/all-models/x-series/X5/2019/bmw-x5-apercu.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCdbfa282c60794fcc9041d26e938c3b40-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL647d5afa82944b8da7d63d9b1fc9a44b",name:"TPT - CY - AEM - Doubleclick - Configurator Histroy Change - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.cy",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){try{var e=_satellite.getVar("pa_pag_pageName"),t=_satellite.getVar("previousStepName");if(null==t||t!==e)return _satellite.setVar("previousStepName",e),!0}catch(e){_satellite.logger.log("TPT - CY - DBM Tag Configurator Steps err \n",e)}}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCecca2575b91d4b02a3e64e3705f52a36-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL85e86693b02d464d87bdd85d7d7191a0",name:"TPT - IL - AEM - Facebook - iFrame TDA Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.il",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC13d7682c1fd740cfa170b3b687297a7e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbce8b3b8cf864130b2acdfb11436c285",name:"TPT - Oman - AEM - Twitter - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT re-trigger :  TPT - Oman - Multiple - Linkedin ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC99a2ad5f432e4b30a27a46d944ed2c4d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLcf46944e21ae4ed28aaada8f231dc8b6",name:"TPT - PA - All Pages - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: Facebook Pixel ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"PA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.pa",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe672e9c6852d48e98866de52dbed8176-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL1c1be84379154039b139120594921119",name:"TPT - Dubai - AEM - Doubelclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"AE"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-dubai.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCda42a2c060a24fb38d26a1635a08f87e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9e1a7fd675aa47b3a869192a195347d5",name:"DCR - All - iFrame - AA - RFS Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfs"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),_satellite.getVar("topLevelDomain");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - All - iFrame - AA - RFS Forms",t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var r="",n=_satellite.getVar("ev_att_mmdr"),s=_satellite.getVar("pr_att_mmdr");r=t.eVar10=""!=n&&"mmdr"!=n?n:""!=s?s:"not set",t.eVar44=_satellite.getVar("nonTechMetaData");var o=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",i=_satellite.getVar("s_products_iFrame_v52"),l=_satellite.getVar("s_products_vco_v53"),c="";c+=";"+r+";1;"+o+";event112="+o+";eVar52="+i+",",t.eVar51=i,""!=(c+=l+",")&&(c=c.slice(0,-1),t.products=c);var d=_satellite.getVar("navEvarForClicks").split("~");t.prop16=d[1]+"~"+d[2]+"~"+d[5],a+="event91,";var u=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],"Form Start"===_satellite.getVar("ev_eve_eventName"))a+="event160,event182,",a+="event1:"+_satellite.getVar("SessionID")+"RFS,",a+="event2:"+_satellite.getVar("SessionID")+"RFS,",
t.eVar11="Local Form|RFS|"+_satellite.getVar("ev_cat_subCategory02")+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start RFS";else if(_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step"))t.eVar11="Local Form|RFS|"+_satellite.getVar("ev_cat_subCategory02")+"|"+_satellite.getVar("ev_eve_eventName")+"|not set";else if("Form Success"===_satellite.getVar("ev_eve_eventName")){_satellite.getVar("functionList");var g=_satellite.getVar("ev_att_dealerName"),m=_satellite.getVar("ev_att_dealerID");a+="event161,event183,",a+="event3:"+_satellite.getVar("SessionID")+"RFS,",a+="event4:"+_satellite.getVar("SessionID")+"RFS"+_satellite.getVar("ev_att_productName").dtm_hashCode(),t.eVar11="Local Form|RFS|"+_satellite.getVar("ev_cat_subCategory02")+"|Finish|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),""!=g&&null!=g||(g="not set"),""!=m&&null!=m||(m="not set"),"not set"==g&&"not set"==m||(t.eVar13=g+"|"+m),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFS"}else"Local Form Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event138,event139,",t.eVar11="Local Form|RFS|"+_satellite.getVar("ev_cat_subCategory02")+"|Interaction|not set"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|RFS|"+_satellite.getVar("ev_cat_subCategory02")+"|First Interaction|not set"):t.abort=!0;t.linkTrackVars+="eVar10,eVar11,eVar13,eVar16,eVar67,prop1,prop2,prop3,prop16,prop30,prop31,eVar41,eVar44,eVar51,eVar52,products",t.linkTrackEvents+="event91,event1,event2,event3,event4,event160,event161,event182,event183,event138,event139,event295",a=a.slice(0,-1),t.events+=a}catch(e){var p={from:"AA",type:"DCR",name:"RFS Forms"};_satellite.logger.error(e,p)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"RFS Form",linkType:"o"}}]},{id:"RL0d8578cb545a47628e6605dead0ef60c",name:"TPT - DZ - Multiple - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: DZ - Facebook ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"DZ"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.dz",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC107b75b50e1f47d4b5f45ac46902b58b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2b916cc5f6b44ac78c3892bc2f6ef0b9",name:"TPT - UA - Multiple - DoubleClick",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - UA - Multiple - DoubleClick - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3bedafb90e7c4e6aa282a91a9c53ec6c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL82b5266f4ba54d6ea8ae5dbc5c5810dc",name:"TPT - Qatar - AEM - LinkedIn - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-qatar.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC065dc353138e401a9ed7812a37f5c88c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd270403b5f4c462184a43e0db37abc26",name:"TPT - EG - AEM - Brochure-download  - Gtag AW - EBR - p15[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'a[href$=".pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-egypt.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0668956a575648e8b42b87d3f73933ab-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL30c66aa4d4734d4882c3c10a320cb156",name:"DCR - Download",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"download"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:Download";var r=_satellite.getVar("navEvarForClicks").split("~");if(t.prop16=r[1]+"~"+r[2]+"~"+r[5],"VCO"===_satellite.getVar("pa_cat_primaryCategory")){t.eVar9=_satellite.getVar("pr_att_mmdr"),t.eVar10=_satellite.getVar("pr_att_mmdr");var n=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");t.eVar63=n,t.eVar34="VCO: Download",t.eVar46=_satellite.getVar("pa_cat_subCategory01")+"|"+_satellite.getVar("pa_pag_pageName")}"Contact bar"==r[2]?a+="event45,event46,":"Main navigation"==r[2]?a+="event49,":-1!=r[2].indexOf("teaser")&&(a+="event44,"),a+="event91,event37,event38,",t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar46,eVar34",t.linkTrackEvents+="event91,event37,event38,event250,event251,event45,event46,event49,event44",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.error("analytics download error: "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"download",linkType:"o"}}]},{id:"RLebd217fbd5c746e99084d82675a0714a",name:"TPT - Qatar - AEM - Facebook - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-qatar.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe8f580a4c45c49a989608643679de7e8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL728a6d874f9d4ffc8f54d3fda1d593c6",name:"TPT - TW - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: Adwords for TW ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tw",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC415bf27817a740a0aea89b873151fbc9-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC88410a180e6241568573e4eded03ac4f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLba81d36fc8aa492996a9af6ced5a903b",name:"TPT - LB - Multiple - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - LB - Multiple - Facebook - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"LB"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-lebanon.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCfacef4d907ad422bbf38844c2a80048b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9e474c3d106b4f92a08916123d97e62d",name:"TPT - CR - AEM - Facebook - All pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - CR - All Pages - facebook",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.cr",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"CR"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2e13bb9d142b45019fc645d389ca2f57-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb20a6ae4aa6f440681912576432726d2-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb6d4a5f0d73844dab05f786653b2012e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLba2725c48f7146b592c766104ebf76b9",name:"DCR - Bouncer",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"bounce_timer"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.setVar("noInteractionCount",!0),_satellite.getVar("defaultVars");var a="";if(t.eVar45+="~rn:Bounce Timer","VCO"===_satellite.getVar("pa_cat_primaryCategory")){t.eVar9=_satellite.getVar("pr_att_mmdr"),t.eVar10=_satellite.getVar("pr_att_mmdr");var r=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");t.eVar63=r,t.eVar46=_satellite.getVar("pa_cat_subCategory01")+"|"+_satellite.getVar("pa_pag_pageName")}a+="event611,event901,event902,event903,event904,",t.linkTrackVars+="eVar9,eVar10,eVar46,eVar34",t.linkTrackEvents+="event611,event901,event902,event903,event904",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"bounce timer",linkType:"o"}}]},{id:"RL5cbea3f12a9244bf8f280aca5f1a62b1",name:"TPT - ME - AEM - Twitter - Multiple - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - ME - AEM - Twitter - Multiple - PLR",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4031514b59d04342999d6c7f942a6a7e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbdae3adbca2446b48c418b745abeefe5",name:"PLR - KR - shareMID",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf0a7ac5517d44398aa332f50c154096d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL70c04e1fb58a4330b8156598619f10ac",name:"DCR - MyBMW Vehicle config finished",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"vehicle_config_finished"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{var a=_satellite.getVar("finalDataLayer");_satellite.getVar("defaultVars");var r="event134",n=_satellite.getVar("pr_att_serie"),s=_satellite.getVar("pr_att_bodyType"),o=_satellite.getVar("pr_att_yearOfLaunch"),i=_satellite.getVar("pr_att_basePriceVehicle"),l=_satellite.getVar("pr_att_sellingPriceTotal"),c=_satellite.getVar("pr_att_basePrice"),d=_satellite.getVar("pr_att_basePriceOptions"),u=_satellite.getVar("pr_pro_productName"),g=_satellite.getVar("pr_att_modelCode"),m=_satellite.getVar("pr_pro_productID"),p=_satellite.getVar("pr_att_mmdr");if(""==p&&(p="not set"),a.product.length>0){var v="ps:Car~mr:"+p+"~pi:"+p+"~mc:"+g+"~pn:"+u+"~se:"+n+"~bt:"+s+"~yl:"+o+"~bp:"+i+"~op:"+d+"~tp:"+c+"~sp:"+l,b=(l=_satellite.getVar("pr_att_sellingPriceTotal"),"");b+=";"+_satellite.getVar("pr_pro_productName")+";;;;eVar52="+v+"|eVar53="+m+",",t.eVar67=_satellite.getVar("pr_att_modelName"),t.eVar10=p,t.prop10=p,t.eVar51=v,""!=b&&(b=b.slice(0,-1),t.products=b)}t.events+=r,t.eVar45+="~rn:MyBMW Vehicle config finished",t.linkTrackVars+="eVar10,prop10,eVar45,eVar67,eVar51",t.linkTrackEvents+="event134"}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLc45c3e741e3a4dcd927b2455b1fe0ba6",name:"EBR - CA - iFrame - AA - ACS Page Load",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(-1!=["https://sf-acs.bmw.ca","https://sf-acs-i.bmw.ca"].indexOf(t.origin))if(t.data)try{_satellite.logger.log(JSON.parse(t.data));var a=JSON.parse(t.data);a.detail&&a.detail.custom&&Object.keys(a.detail.custom)&&!Object.keys(a.detail.custom).length&&(_satellite.setVar("acs_event_data",a),e())}catch(e){_satellite.logger.error("EBR: ACS Component Page Load",e)}else _satellite.logger.log("no data in event object",t)}))}catch(e){_satellite.logger.error("EBR: ACS Component Page Load",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%topLevelDomain%",rightOperand:"bmw.ca"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("acs_event_data").detail,r=a.event.length?a.event[a.event.length-1].eventInfo.eventAction:"not set",n=a.event.length?a.event[a.event.length-1].eventInfo.eventName:"not set",s=a.event.length?a.event[a.event.length-1].eventInfo.type:"not set",o=a.event.length?a.event[a.event.length-1].eventInfo.timeStamp:"not set",i=a.event.length?a.event[a.event.length-1].eventInfo.cause:"not set",l=a.event.length?a.event[a.event.length-1].eventInfo.effect:"not set",c=a.component.length?a.component[a.component.length-1].componentInfo.componentID:"not set",d=a.component.length?a.component[a.component.length-1].componentInfo.componentName:"not set",u=a.component.length?a.component[a.component.length-1].componentInfo.componentType:"not set",g=a.component.length?a.component[a.component.length-1].category.primaryCategory:"not set",m=a.component.length?a.component[a.component.length-1].category.subCategory1:"not set",p=a.component.length?a.component[a.component.length-1].category.subCategory2:"not set";t.prop12=o,t.eVar16=r+"~"+n+"~"+d+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+l+"~"+i+"~"+_satellite.getVar("ev_eve_element"),t.prop16=r+"~"+n+"~"+d+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+l+"~"+i+"~"+_satellite.getVar("ev_eve_element"),t.eVar156=s,t.eVar117=l+"~"+i,t.eVar143="~cid:"+(c||"not set")+"~cn:"+(d||"not set"),t.eVar144="~pc:"+(g||"not set")+"~sc1:"+(m||"not set")+"~sc2:"+(p||"not set")+"~ct:"+(u||"not set"),t.events+="event91,"}catch(e){_satellite.logger.error("Error in EBR - CA - iFrame - AA - ACS Page Load: ",e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RL5e8c5747fa6442ba9990a3d7222cbc66",name:"TPT - LB - X4 At a Glance  - Adwords",events:[{modulePath:"core/src/lib/events/submit.js",settings:{elementSelector:"form",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - LB - Form Submit Event x-series x4 at-a-glance - Adwords - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"LB"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-lebanon.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCddb9af0d12434928809d8f9f16ab57b8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL586fb509a7794b55822a30b268b717d0",name:"TPT - CO - Multiple - DoubleClick",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - CO - Multiple - DoubleClick",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"CO"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.co",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC57cb690813ce4286874fa838fd099d06-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL1fc00c67d1b4479da7f2f7c5f97b0f01",name:"DCR - Stock Locator Page",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"stock-locator-page"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{var a="";if(null!=e.detail){var r=e.detail[1];_satellite.logger.log("Getting datalayer from DCR page rule rule",r)}else _satellite.logger.log("Getting datalayer from normal method"),r=digitals2.tracking.api.getPageObject(digitals2.tracking.api.getCurrentPageIndex());if(null!=r.dealer&&r.dealer.length>0){var n=r.dealer.length-1,s=r.dealer[n].dealerInfo.dealerID,o=r.dealer[n].dealerInfo.dealerName,i=r.dealer[n].dealerInfo.outletID;t.eVar41=o+"|"+s+"_"+i}if(null!=r.event&&r.event.length>0){var l=r.event.length-1;r.event[l].eventInfo.eventAction,r.event[l].eventInfo.eventName,r.event[l].attributes&&r.event[l].attributes.relatedComponent?(r.event[l].attributes.relatedComponent.componentInfo.componentName,r.event[l].attributes.relatedComponent.componentInfo.componentHeadline):r.component.length>0&&(r.component[r.component.length-1].componentInfo.componentName,r.component[r.component.length-1].componentInfo.componentHeadline),_satellite.getVar("URL"),r.event[l].attributes.requestedURL,r.event[l].eventInfo.effect,r.event[l].eventInfo.cause;var c=r.event[l].eventInfo.timestamp,d=r.event[l].attributes.searchResults;t.eVar22="na~"+d}if(null!=r.product&&r.product.length>0){var u=r.product.length-1,g=r.product[u].attributes.internalCode,m=r.product[u].attributes.modelName,p=r.product[u].attributes.modelCode,v=r.product[u].attributes.series;t.prop10=t.eVar10=g,t.eVar51="ps:Car~pi:"+g+"~pn:"+m+"~mc:"+p+"~se:"+v+"~bt:na~yl:na~bp:na~op:na~tp:na~sp:na~mr:"+g+"~co:not set~en:na~fu:na~cu:na~ms:na",r.product[u].productInfo.productID;var b=r.product[u].productInfo.productName,f=r.product[u].productInfo.manufacturer,_=r.product[u].category.primaryCategory,h=r.product[u].category.subCategory1,V=(r.product[u].category||"").subCategory2||"not set",C=r.product[u].category.productType,y=r.product[u].attributes.productionYear,P=r.product[u].attributes.yearOfRegistration;"sl > vehicle"==(((r.page||"").pageInfo||"").pageName||"")&&(document.querySelectorAll("div[data-component='rfx-section']")&&document.querySelectorAll("div[data-component='rfx-section']")[0]&&document.querySelectorAll("div[data-component='rfx-section']")[0].children.length>1?V=document.querySelectorAll("div[data-component='rfx-section']")[0].children[1].href.indexOf("/checkout/")>-1?"dcs ready":"not ready for dcs":document.querySelectorAll("div[data-component='rfx-section']")&&document.querySelectorAll("div[data-component='rfx-section']")[0]&&1==document.querySelectorAll("div[data-component='rfx-section']")[0].children.length?V="not ready for dcs":document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0]&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement.children&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement.children.length>1?V=document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement.children[1].href.indexOf("/checkout/")>-1?"dcs ready":"not ready for dcs":document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0]&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement&&document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement.children&&1==document.querySelectorAll("a[href*='konfiguratorData=StockLocator']")[0].parentElement.children.length&&(V="not ready for dcs")),t.eVar124="na~"+b+"~"+f+"~"+_+"~"+h+"~"+C+"~"+g+"~"+p+"~"+m+"~"+y+"~"+P+"~"+v+"~sc2:"+V}if(t.pageName=r.page.pageInfo.pageName,t.eVar3=r.page.pageInfo.pageID,null==r.page.pageInfo.pageInstanceId?t.eVar1="not set|not set|not set|not set|"+r.page.pageInfo.pageName:t.eVar1=_satellite.getVar("hierarchyEvar"),t.eVar17=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg"),t.eVar15="D=v1",t.prop27="D=v3",t.prop12=c,t.eVar2=r.page.pageInfo.pageName,t.eVar4=document.location.href,t.prop4="D=v4",t.eVar6=document.referrer,t.prop6="D=v6",t.eVar7=t.prop7=r.page.pageInfo.language,t.eVar44=_satellite.getVar("nonTechMetaData")+"~"+_satellite.getVar("nonTechMetaDataEvarAddon"),(t.eVar45||"").indexOf("Page Load")>-1&&(t.eVar45=t.eVar45.replace("rn:Page Load","rn:Stock Locator")),t.prop46=(((r||"").page||"").category||"").primaryCategory||"",t.prop47=(((r||"").page||"").category||"").subCategory1||"",t.prop48=(((r||"").page||"").category||"").subCategory2||"",t.prop70="D=mid",t.eVar71="pid:"+((((r||"").page||"").pageInfo||"").pageID||"")+"~pty:"+((((r||"").page||"").category||"").pageType||"")+"~var:"+((((r||"").page||"").pageInfo||"").variant||"")+"~ver:"+((((r||"").page||"").pageInfo||"").version||""),null!=r.event&&r.event.length>0&&null!=r.event[l].attributes.solutionSpecific){var w=r.event[l].attributes.solutionSpecific.slCarBudgetMax,R=r.event[l].attributes.solutionSpecific.slCarBudgetMin,j=r.event[l].attributes.solutionSpecific.slExteriorColor,A=r.event[l].attributes.solutionSpecific.slFuelType,T=r.event[l].attributes.solutionSpecific.slInteriorColor,O=r.event[l].attributes.solutionSpecific.slModelName,D=r.event[l].attributes.solutionSpecific.slMonthlyBudgetMax,I=r.event[l].attributes.solutionSpecific.slMonthlyBudgetMin,E=r.event[l].attributes.solutionSpecific.slLocation,S=r.event[l].attributes.solutionSpecific.slOptions,k=r.event[l].attributes.solutionSpecific.slSeries,L=r.event[l].attributes.solutionSpecific.slTransmission;t.eVar123=w+"~"+R+"~"+j+"~"+A+"~"+T+"~"+O+"~"+D+"~"+I+"~"+E+"~"+S+"~"+k+"~"+L}a+="event91,",t.linkTrackVars+=",prop15,eVar22,eVar124,eVar62,eVar44,eVar45,prop27,prop4,prop6,prop7,prop70,eVar10,eVar3,prop10,prop12,eVar41,eVar69,eVar2,eVar4,eVar6,eVar7,eVar51,eVar123,prop46,prop47,prop48,eVar71,eVar1,eVar17,",t.linkTrackEvents+="event91,",a=a.slice(0,-1),t.events=a}catch(e){_satellite.logger.error("Error in DCR - Stock Locator Page: "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLd640dec8a5e4440786f1fec64b83a7ef",name:"TPT - TN - AEM - Facebook  - iFrame RFO Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-tunisia.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC051c5cd75a494216a0420dc4dead5ea7-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL32148fa0fac74cc685ff0c83a964e977",name:"DCR - Online TDA Confirm",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_confirm"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("ev_eve_effect"),r=_satellite.getVar("ev_eve_cause"),n=_satellite.getVar("ev_eve_eventAction"),s=_satellite.getVar("ev_eve_eventName"),o=_satellite.getVar("ev_att_componentName"),i=_satellite.getVar("ev_eve_target"),l=_satellite.getVar("ev_eve_element"),c=_satellite.getVar("ev_att_mmdr_NBO"),d=_satellite.getVar("ev_eve_timestamp");""!=d&&null!=d||(d="Not Set"),""!=c&&null!=c||(c="Not Set"),""!=l&&null!=l||(l="Not Set"),""!=i&&null!=i||(i="Not Set"),""!=o&&null!=o||(o="Not Set"),""!=s&&null!=s||(s="Not Set"),""!=n&&null!=n||(n="Not Set"),""!=a&&null!=a||(a="Not Set"),""!=r&&null!=r||(r="Not Set");var u=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],t.eVar16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop12=d,t.eVar112=n+"~"+s,null==_satellite.getVar("ev_att_dealerId")||""==_satellite.getVar("ev_att_dealerId"))var g="not available";else g=_satellite.getVar("ev_att_dealerId");if(null==_satellite.getVar("ev_att_outletID")||""==_satellite.getVar("ev_att_outletID"))var m="not available";else m=_satellite.getVar("ev_att_outletID");t.eVar13="not available|"+g+"|"+m,t.eVar8=t.eVar10=t.prop8=t.prop10=c,t.eVar45+="~rn:Online TDA Confirm",t.eVar117=a+"~"+r;var p="not set",v="not set";"Online TDA Confirm"==n&&(p="Login And Confirm",v="Step 04"),t.eVar11="Central Form|Online TDA|tda_online_booking|"+v+"|not set|"+p,t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set",t.eVar52=_satellite.getVar("s_products_iFrame_v52"),t.eVar44=_satellite.getVar("nonTechMetaData"),t.events+="event91",t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12,eVar45,eVar112,eVar13,eVar117,eVar11,eVar52,eVar41,eVar44",t.linkTrackEvents+="event91"}catch(e){_satellite.logger.error("Error in DCR - Online TDA Confirm: "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RL0d6957e1834944618bd6d4ad88fbcc22",name:"TPT - Iraq - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-iraq.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC14b5d5cdc4f24c82a58809c96f11f4e7-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL3a54ac0ed8184faea029c14f6891f5ba",name:"TPT - PE - AEM - Adwords - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - PE - All Pages - Adwords - retriggering ",e)}}
},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.pe",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"PE"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2adf71043b8d4eec87be3ba517730c81-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc349e080f0c04b50aa2bae8ac109717f-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7e7787e0c14a46ff98d892f5b0f7afca-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL3292ddc86cd9443aa2001fa612218203",name:"TPT - AT- Multiple - Facebook Pixel",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"AT"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.at",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9b592f74cc844b16a347ac4beaf3c4af-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL21d32851ff134ffabc24f96b19b4c739",name:"TPT - MA - AEM - Adwords - iFrame TDA Form - DCR  - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd1e29fa876914b598963ff9f1006d228-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa84487ea0a7c4f6bba851ef038a641b9",name:"TPT - Saudi - AEM - Twitter - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Saudi - Multiple - Twitter - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-saudiarabia.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC00cfc1ae3a3e451199e50fbbb67f3652-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL53eefaf8f4f443ebbf280f80a90022d7",name:"TPT - ME - Register now button AR - Doubleclick EBR",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"a",elementProperties:[{name:"title",value:"\u0633\u062c\u0651\u0644 \u0627\u0644\u0622\u0646",valueIsRegex:!0}],bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/ar/local-content/joyunleashed.html",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC17c2351f0ce146d2afcdb6fb4ac0dfeb-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL71433a99e1684237b7b5583c9cc68e93",name:"TPT - MA - Brochure des Tarifs - Gtag  AW EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'a[title="Brochure des Tarifs"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/topics/offers-and-services/unlock-joy.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3dd717cbf22143faa81fb2b3825b3631-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9048a3705c3a464da8d05e1453f2ff4f",name:"TPT - OM - Multiple - Doubleclick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - OM FloodLight - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"OM"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC78083ee621e840f1bc3bf5eebda7603d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL763c91ee23594013a5b15eafba02b290",name:"TPT - CY - AEM - Doublelclick - Multiple - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.cy",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe0eebb7299c746d380cc12ea16a1a078-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL7a9d72c4b60843e296d521b811a6426a",name:"TPT - MU - All Pages - Facebook",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.mu",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd4bde3aba3e84d91a62aa2f33cd54a20-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe573d85c307345af914a6db568e9c0d5",name:"TPT - PH - AEM - Facebook - RIF Form Submit - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfi"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.ph",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/en/topics/fascination-bmw/about.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb208b81e2d8a40b69a8a044ed9dcbe3f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL71b35a24bb7941549cbe65208e4eb49a",name:"TPT - UY - AEM - Adwords - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - UY - All pages - Adwords - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UY"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.uy",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf7709dbb7a8141beb6112169bf9d276c-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd51d766de14c43f28d9ec19e0bf9647d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL239519594d1f4c3c82e434cf3b3dbce7",name:"PLR - AEM - AA - ActivityMap",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger",(function(t){t.detail&&t.detail.processing==_satellite.getVar("consentMap").AdobeAnalytics&&e()}))}catch(e){_satellite.logger.error("PLR:Retrigger ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8a514b8914bc420b95a0c6d691de760d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLfe37c73e7c254007a94e049b40899a49",name:"TPT - HM - AEM - Chatbot - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmwbkk.de",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd044fe0720d1489bb6ec42159d4dfe31-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL59e21ef9dc8d445eb8c47e9b186bcadb",name:"TPT - Qatar - AEM - Twitter - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: Qatar FB Pixel ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-qatar.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC002e3666393d495daf03111fcc1becc5-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL0c12c102f5fb4df9a8a43c286d80313a",name:"TPT - Saudi - AEM - Facebook - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-saudiarabia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9d6294e5eac74fddb27b6f2c12a0a765-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL374a5257cafb40c18fc4dd1ed723ccbe",name:"TPT - PE - AEM - Facebook - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - PE - AEM - Facebook - All Pages - PLR - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"PE"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.pe",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC86db2d83fe244ab3ad2675724ce79d7d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd612f64c2f494ed9b0f63a3b22ddd791",name:"TPT - Bahrain - AEM - LinkedIn - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5994d9e1946c4a67901c9f929b64dc48-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL855d36f92c054d1d91257b124f19399e",name:"TPT - RS - AEM - Facebook - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - RS - All pages - facebook - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd699a7e0ef804712ad6653d186a123cc-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL937b1fb945d148d7b96cff0e79548584",name:"DCR - Salesbar",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"salesbar"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("ev_eve_timestamp");t.eVar45+="~rn:Salesbar",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=a,t.linkTrackVars+="eVar16,eVar45,prop16,prop12",t.linkTrackEvents+="event91",t.events="event91"}catch(e){_satellite.logger.error(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Salesbar",linkType:"o"}}]},{id:"RL65148c2646e24655873b38a7083345c9",name:"DCR - All - iFrame - AA - ROI Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_roi"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("topLevelDomain");"bmw.ru"!=a&&"bmw.co.za"!=a&&"bmw.com.au"!=a&&"bmw.com.cn"!=a&&"bmw.fr"!=a&&"bmw.ch"!=a&&"bmw.es"!=a&&"bmw.be"!=a&&"bmw.lu"!=a&&"bmw.it"!=a||"production"!=_satellite.buildInfo.environment&&(t.account="bmw.dev.hq.nsctestsuite");var r="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - All - iFrame - AA - ROI Forms",t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var n="",s=_satellite.getVar("ev_att_mmdr"),o=_satellite.getVar("pr_att_mmdr");n=t.eVar10=""!=s&&"mmdr"!=s?s:""!=o?o:"not set",t.eVar44=_satellite.getVar("nonTechMetaData");var i=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",l=_satellite.getVar("s_products_iFrame_v52"),c=_satellite.getVar("s_products_vco_v53"),d="";d+=";"+n+";1;"+i+";event112="+i+";eVar52="+l+",",t.eVar51=l,""!=(d+=c+",")&&(d=d.slice(0,-1),t.products=d);var u=_satellite.getVar("navEvarForClicks").split("~");t.prop16=u[1]+"~"+u[2]+"~"+u[5],r+="event91,";var g=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=g[0],t.prop2=g[1],t.prop3=g[2],"Form Start"===_satellite.getVar("ev_eve_eventName"))r+="event1:"+_satellite.getVar("SessionID")+"ROI,",r+="event2:"+_satellite.getVar("SessionID")+"ROI,",r+="event96,event176,",r+="event97:"+_satellite.getVar("SessionID")+",","Generic"===_satellite.getVar("ev_cat_subCategory02")?r+="event342,event344,":"Newsletter"===_satellite.getVar("ev_cat_subCategory02")?r+="event392,event394,":"Keep Me Informed"===_satellite.getVar("ev_cat_subCategory02")&&(r+="event355,event357,"),t.eVar11="Local Form|ROI|"+_satellite.getVar("ev_cat_subCategory02")+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start ROI";else if("Form Success"===_satellite.getVar("ev_eve_eventName")){_satellite.getVar("functionList");var m=_satellite.getVar("ev_att_dealerName"),p=_satellite.getVar("ev_att_dealerID");r+="event3:"+_satellite.getVar("SessionID")+"ROI,",r+="event4:"+_satellite.getVar("SessionID")+"ROI"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",r+="event98,event177,",r+="event99:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+",","Generic"===_satellite.getVar("ev_cat_subCategory02")?r+="event343,event391,":"Newsletter"===_satellite.getVar("ev_cat_subCategory02")?r+="event393,event395,":"Keep Me Informed"===_satellite.getVar("ev_cat_subCategory02")&&(r+="event356,event358,"),t.eVar11="Local Form|ROI|"+_satellite.getVar("ev_cat_subCategory02")+"|Finish|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),""!=m&&null!=m||(m="not set"),""!=p&&null!=p||(p="not set"),"not set"==m&&"not set"==p||(t.eVar13=m+"|"+p),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish ROI"}else _satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|ROI|"+_satellite.getVar("ev_cat_subCategory02")+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":"Local Form Interaction"===_satellite.getVar("ev_eve_eventName")?(r+="event138,event139,",t.eVar11="Local Form|ROI|"+_satellite.getVar("ev_cat_subCategory02")+"|Interaction|not set"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(r+="event295,",t.eVar11="Local Form|ROI|"+_satellite.getVar("ev_cat_subCategory02")+"|First Interaction|not set"):(t.abort=!0,_satellite.logger.log("aborting 1"));t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,eVar11,prop30,prop31,eVar10,eVar13,eVar67,eVar41,eVar44,eVar52,eVar51,products",t.linkTrackEvents+="event91,event1,event2,event3,event4,event96,event97,event98,event99,event176,event177,event138,event139,event295,event342,event343,event344,event355,event356,event357,event358,event391,event392,event393,event394,event395",r=r.slice(0,-1),t.events+=r}catch(e){var v={from:"AA",type:"DCR",name:"ROI Forms"};_satellite.logger.error(e,v)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"ROI Form",linkType:"o"}}]},{id:"RL928a09ecb9ea4fee9d17fbdee3a48e74",name:"TPT - CL - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Chile - All pages - Adwords",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"CL"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.cl",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCddce96545d32449793a13e2cd8c48811-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5147aa6751a749a8a6fd59a335a5bd0a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL07c83ef28bf94ac1a61c010e6627ef28",name:"TPT - Bahrain - iFrame - RFO Forms - Doubleclick - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"BH"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCcc1d86209af44f3aa7283e8cf8ebfe4c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLba7ef3735ab844a293dd692df725b07e",name:"TPT - MA - AEM - Facebook - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: Facebook Pixel ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw.ma"}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0bd27dc48b37474c9d5c966e6aa6e2f3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLf65dddc5bfca49f08611142d78ba394e",name:"TPT - AZ - AEM - Facebook - Form Submit - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.az",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb4db667ed18049dd93864d3ce30e5c48-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb18dff50c82e41b382defac43ea8b9e3",name:"DCR - All - NSC - AA - Local Forms RFI",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"local_forms_rfi"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("hierarchyEvar").split("|");t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2"),t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var n="",s=_satellite.getVar("ev_att_mmdr"),o=_satellite.getVar("pr_att_mmdr");n=t.eVar10=""!=s&&"mmdr"!=s?s:""!=o?o:"not set",t.eVar44=_satellite.getVar("nonTechMetaData");var i=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",l=_satellite.getVar("s_products_iFrame_v52"),c=_satellite.getVar("s_products_vco_v53"),d="";d+=";"+n+";1;"+i+";event112="+i+";eVar52="+l+",",t.eVar51=l,""!=(d+=c+",")&&(d=d.slice(0,-1),t.products=d);var u=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=u,t.eVar45+="~rn:DCR - All - NSC - AA - Local Forms RFI",t.eVar62=t.s_getLoadTime(),t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=r[0],t.prop2=r[1],t.prop3=r[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var g=_satellite.getVar("navEvarForPage").split("~");t.prop16=g[1]+"~"+g[2]+"~"+g[5],t.prop27="D=v3",a+="event91,","bmw.com.cn"==_satellite.getVar("topLevelDomain")&&(t.eVar64=_satellite.getVar("localCampaignVariable")),"Form Start"===_satellite.getVar("ev_eve_eventName")?(a+="event1:"+_satellite.getVar("SessionID")+"RFI,",a+="event2:"+_satellite.getVar("SessionID")+"RFI,",a+="event162,event184,","Download"===_satellite.getVar("ev_cat_subCategory03")?(a+="event17,event174,",a+="event18:"+_satellite.getVar("SessionID")+","):"Postal"===_satellite.getVar("ev_cat_subCategory03")&&(a+="event5,event168,",a+="event6:"+_satellite.getVar("SessionID")+","),t.eVar11="Local Form|RFI|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|not set",t.prop30="Start RFI"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|RFI|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":"Form Success"===_satellite.getVar("ev_eve_eventName")?(a+="event3:"+_satellite.getVar("SessionID")+"RFI,",a+="event4:"+_satellite.getVar("SessionID")+"RFI"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",a+="event163,event185,","Download"===_satellite.getVar("ev_cat_subCategory03")?(a+="event19,event175,",a+="event20:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+","):"Postal"===_satellite.getVar("ev_cat_subCategory03")&&(a+="event7,event169,",a+="event8:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+","),t.eVar11="Local Form|RFI|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|not set",""!=_satellite.getVar("ev_att_dealerName")&&""!=_satellite.getVar("ev_att_dealerID")&&(t.eVar13=_satellite.getVar("ev_att_dealerName")+"|"+_satellite.getVar("ev_att_dealerID")),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFI"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|RFI|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|First Interaction|not set"):t.abort=!0,t.linkTrackVars+="eVar6,eVar10,eVar11,eVar13,eVar16,eVar17,eVar41,eVar44,eVar51,eVar52,eVar62,eVar64,eVar67,products,prop1,prop2,prop3,prop4,prop6,prop7,prop15,prop16,prop27,prop30,prop31",t.linkTrackEvents+="event91,event1,event2,event3,event4,event17,event18,event19,event20,event162,event163,event5,event6,event7,event8,event168,event174,event169,event175,event184,event185,event295,",a=a.slice(0,-1),t.events+=a}catch(e){var m={from:"AA",type:"DCR",name:"Local Forms RFI"};_satellite.logger.error(e,m)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLd38b1fc15c014e2d8200afcf91913636",name:"TPT - Kuwait - AEM - Facebook - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kuwait.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9a4766c7d7054e85a9ccbf0b3a1a1fe3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL76a0f746f41440b5a89466a17e2642c3",name:"TPT - Dubai - AEM - Snapchat - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-dubai.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa546af4a3a654ca3a07684f69be0e44c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL3564053e94cc4ab98012c546e93ec4c0",name:"DCR - Selection",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"selection"},ruleOrder:50}],conditions:[],actions:[]},{id:"RL01b99d7d78c84f7d8bb2590e35c50007",name:"TPT - MK - AEM - Facebook - iFrame RFO Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.mk",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC82ac41ee6636461abfc1c65ccc53e181-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL0a02837678184d3d869e8ff9df1a4c3e",name:"TPT - TN - All Pages - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - TN - All Pages - Facebook - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"TN"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-tunisia.com",valueIsRegex:!0}]}},{
modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC56cb51e1b0cc444a90f64763a9d97888-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4998db4db86c4e6d9bf3dbd1e189c8b1",name:"TPT - MA - Teaser Pricelist - Gtag  AW EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'a[href="/content/dam/bmw/marketB4R1/bmw_ma/umbrella/BMW-Catalogue-2020.pdf.asset.1592392281841.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/topics/offers-and-services/unlock-joy.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC49249874f9a141f7b003d93498e85172-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL750350d474c74107b7441ecfb719b470",name:"DCR - MyBMW Login Error tracking",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"mybmw_loging_error"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar45+="~rn:Error",a+="event95,";var r=$(".login-box__error-message,ng-scope").not(".ng-hide").text();r=r.indexOf("email")>-1?r.replace("email","e m a i l"):r.indexOf("password")>-1?r.replace("password","p a s s w o r d"):r,t.eVar69=r,t.pageName="",t.pageType="errorPage",a=a.slice(0,-1),t.events+=a,t.linkTrackVars+="eVar45,eVar69",t.linkTrackEvents+="event95"}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RL8a50dcff902f4acc988db44c25502d95",name:"DCR\xa0-\xa0All\xa0-\xa0iFrame\xa0-\xa0AA\xa0-\xa0RFCD\xa0Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_contactdealer"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),_satellite.getVar("topLevelDomain");var a="",r=_satellite.getVar("ev_att_dealerName"),n=_satellite.getVar("ev_att_dealerID");t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR\xa0-\xa0All\xa0-\xa0iFrame\xa0-\xa0AA\xa0-\xa0RFCD\xa0Forms",t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var s="",o=_satellite.getVar("ev_att_mmdr"),i=_satellite.getVar("pr_att_mmdr");s=t.eVar10=""!=o&&"mmdr"!=o?o:""!=i?i:"not set",t.eVar44=_satellite.getVar("nonTechMetaData");var l=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",c=_satellite.getVar("s_products_iFrame_v52"),d=_satellite.getVar("s_products_vco_v53"),u="";u+=";"+s+";1;"+l+";event112="+l+";eVar52="+c+",",t.eVar51=c,""!=(u+=d+",")&&(u=u.slice(0,-1),t.products=u);var g=_satellite.getVar("navEvarForClicks").split("~");t.prop16=g[1]+"~"+g[2]+"~"+g[5],a+="event91,";var m=_satellite.getVar("hierarchyEvar").split("|");t.prop1=m[0],t.prop2=m[1],t.prop3=m[2],"Form Start"===_satellite.getVar("ev_eve_eventName")?(a+="event158,event180,",a+="event1:"+_satellite.getVar("SessionID")+"RFC,",a+="event2:"+_satellite.getVar("SessionID")+"RFC,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|Start|not set",t.prop30="Start RFC"):"Form Success"===_satellite.getVar("ev_eve_eventName")?(a+="event159,event181,",a+="event3:"+_satellite.getVar("SessionID")+"RFC,",a+="event4:"+_satellite.getVar("SessionID")+"RFC,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|Finish|not set",t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFC",""!=r&&null!=r||(r="not set"),""!=n&&null!=n||(n="not set"),"not set"==r&&"not set"==n||(t.eVar13=r+"|"+n)):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|First Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":t.abort=!0,t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,eVar11,eVar13,eVar41,eVar44,eVar52,prop30,prop31,eVar10,eVar51,products",t.linkTrackEvents+="event91,event1,event2,event3,event4,event158,event159,event180,event181,event295",a=a.slice(0,-1),t.events+=a}catch(e){var p={from:"AA",type:"DCR",name:"RFCD\xa0Forms"};_satellite.logger.error(e,p)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"RFC Form",linkType:"o"}}]},{id:"RL2291c5ab80654790931516ae5972e966",name:"TPT - MD - AEM - Facebook - iFrame RFO Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.md",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7300ba0398814b8699bc58042c7f1527-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4acedee2c99340afa2668926753b9aeb",name:"TPT - Bahrain - AEM - Facebook - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd672c7f0e20444dd984418dc97d8cdc2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdca5b9c5a075411fb48899c75b60095c",name:"TPT - IL - AEM - Facebook - iFrame RFO Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.il",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7b12235846844614bcf636a73d6865c3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbe6696afabc54a169f662cadbba40a0e",name:"TPT - MA - TDA Forms - Facebook DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc66d85f283c74289a276428645a9e59b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLadbab84ae51b404ebaa3695d0247154b",name:"TPT - RS - AEM - Adwords - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC187c4ee3ea20473d9567934db7650858-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLfdc47f95a302405d8a605299fe4275b7",name:"TPT - Qatar - AEM - LinkedIn - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: Qatar FB Pixel ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-qatar.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC44a4431960f54629a79c14438e6648e9-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc104ff11c622424e9fb87ae862ece721",name:"TPT - JO - Multiple - DoubleClick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT -  Jordan -  offerhub/Ramadan Offer -  ar/en - floodlight - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"JO"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-jordan.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCde4fedbd6a8d45029e4c175de6009767-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL36c6016b39a84562a0cc4f7feceae720",name:"TPT - Bahrain - AEM - LinkedIn - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Bahrain - Multiple - facebook - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5d6244a99910473ab28ecee4b3d69aad-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbfb20bd9e6ce4df6a6dab44aadb965f7",name:"TPT - TR - AEM - Taboola - Multiple - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tr",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC478fb9dfe1414ce5a9064258855cefb1-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2e9316094209426984e9187d143cb9cd",name:"TPT - Abu Dhabi - AEM - Linkedin - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Abudhabi - Multiple - Linkedin",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-abudhabi.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7e0657f32ff64ed0bf1b57eb15678d27-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4a687f7eb3e840ec9513c078ddd6769d",name:"DCR - Ignition One Tracking",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"ignitionOneTracking"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{var a=window.ignitionone.eventType,r=window.ignitionone.formType;_satellite.getVar("defaultVars"),"Impression"==a&&(t.eVar2="ignitionone form "+r,t.eVar3=r+" form",t.eVar4=_satellite.getVar("URL"),t.eVar7=_satellite.getVar("pa_pag_language"),t.eVar11="IgnitionOne|"+r+"|Generic|Impression|not set",t.eVar18="Not available~ignitionone "+r+" impression~Not available",t.eVar45+="~rn:Ignition One Tracking",t.eVar63="ignition one form",t.prop30="Impression "+r,t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set",t.linkTrackVars+="eVar2,eVar3,eVar4,eVar7,eVar11,eVar18,eVar45,eVar63,prop30,eVar41,",t.events+="event91,event117,event138,event139",t.linkTrackEvents+="event91,event117,event138,event139"),"Start"==a&&(t.eVar2="ignitionone form "+r,t.eVar3=r+" form",t.eVar4=_satellite.getVar("URL"),t.eVar7=_satellite.getVar("pa_pag_language"),t.eVar11="IgnitionOne|"+r+"|Generic|Start|not set",t.eVar18="Not available~ignitionone "+r+" start~Not available",t.eVar45+="~rn:Ignition One Tracking",t.eVar63="ignition one form",t.prop30="Start "+r,t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set",t.linkTrackVars+="eVar2,eVar3,eVar4,eVar7,eVar11,eVar18,eVar45,eVar63,prop30,eVar41,","TDA"==r&&(t.events+="event91,event1,event2,event9,event10,event170,event138,event139",t.linkTrackEvents+="event91,event1,event2,event9,event10,event170,event138,event139"),"RFI"==r&&(t.events+="event91,event1,event2,event17,event18,event5,event6,event168,event138,event139",t.linkTrackEvents+="event91,event1,event2,event17,event18,event5,event6,event168,event138,event139"),"RFC"==r&&(t.events+="event91,event1,event2,event180,event158,event138,event139",t.linkTrackEvents+="event91,event1,event2,event180,event158,event138,event139"),"RFO"==r&&(t.events+="event91,event1,event2,event172,event13,event14,event138,event139",t.linkTrackEvents+="event91,event1,event2,event172,event13,event14,event138,event139"),"ROI"==r&&(t.events+="event91,event1,event2,event176,event96,event97,event138,event139",t.linkTrackEvents+="event91,event1,event2,event176,event96,event97,event138,event139"),"FS RFO"==r&&(t.events+="event91,event1,event2,event207,event138,event139",t.linkTrackEvents+="event91,event1,event2,event207,event138,event139")),"End"==a&&(t.eVar2="ignitionone form "+r,t.eVar3=r+" form",t.eVar4=_satellite.getVar("URL"),t.eVar7=_satellite.getVar("pa_pag_language"),t.eVar11="IgnitionOne|"+r+"|Generic|Finish|not set",t.eVar18="Not available~ignitionone "+r+" finish~Not available",t.eVar45+="~rn:Ignition One Tracking",t.eVar63="ignition one form",t.prop31="Finish "+r,t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set",t.linkTrackVars+="eVar2,eVar3,eVar4,eVar7,eVar11,eVar18,eVar45,eVar63,prop31,eVar41,","TDA"==r&&(t.events+="event91,event3,event4,event11,event12,event171,event138,event139",t.linkTrackEvents+="event91,event3,event4,event11,event12,event171,event138,event139"),"RFI"==r&&(t.events+="event91,event3,event4,event7,event8,event19,event20,event169,event138,event139",t.linkTrackEvents+="event91,event3,event4,event7,event8,event19,event20,event169,event138,event139"),"RFC"==r&&(t.events+="event91,event3,event4,event181,event159,event138,event139",t.linkTrackEvents+="event91,event3,event4,event181,event159,event138,event139"),"RFO"==r&&(t.events+="event91,event3,event4,event173,event15,event16,event138,event139",t.linkTrackEvents+="event91,event3,event4,event173,event15,event16,event138,event139"),"ROI"==r&&(t.events+="event91,event3,event4,event177,event98,event99,event138,event139",t.linkTrackEvents+="event91,event3,event4,event177,event98,event99,event138,event139"),"FS RFO"==r&&(t.events+="event91,event3,event4,event208,event138,event139",t.linkTrackEvents+="event91,event3,event4,event208,event138,event139"));var n=_satellite.getVar("pr_att_sellingPriceTotal"),s=_satellite.getVar("s_products_vco_v52"),o=_satellite.getVar("s_products_vco_v53"),i=_satellite.getVar("pr_att_mmdr");""==i&&(i="not set");var l="";l+=";"+i+";1;"+n+";event112="+n+";eVar52="+s+",",t.eVar51=s,""!=(l+=o+",")&&(l=l.slice(0,-1),t.products=l),t.linkTrackVars+="eVar51,eVar52,products"}catch(e){_satellite.logger.log(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Ignition One",linkType:"o"}}]},{id:"RL4cc2b05927a74fd5b92b9193284950c7",name:"TPT - Saudi - AEM - Snapchat - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Dubai - Multiple - Twitter",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-saudiarabia.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf799bdf9e6644375b55bffce40cfb2f4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL29209e661eba4ae5a08c3a79368031e4",name:"DCR - Change in Consent",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"consentChange"},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0aa0df0a58114f919cd6734a33f80f68-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCfbd0ecdbf24f45c09e6a1eb34e03a6cd-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLad0a98eb241c470b88fd6b05631c9e71",name:"TPT - HK - Multiple - Conversion Pixel",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - HK - Multiple - Conversion Pixel - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"HK"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmwhk.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC41b76b2dde704142aaae2ca785a30b22-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL51140c20b9ed4e57b81eb9fa86222af3",name:"DCR - All - AEM - AA - ZSO Interaction",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"zso_interaction"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=""==_satellite.getVar("ev_eve_eventAction")?"Not set":_satellite.getVar("ev_eve_eventAction"),n=""==_satellite.getVar("ev_eve_eventName")?"Not set":_satellite.getVar("ev_eve_eventName"),s=""==_satellite.getVar("ev_att_componentName")?"Not set":_satellite.getVar("ev_att_componentName"),o=""==_satellite.getVar("ev_att_componentHeadline")?"Not set":_satellite.getVar("ev_att_componentHeadline"),i=""==_satellite.getVar("ev_eve_target")?"Not set":_satellite.getVar("ev_eve_target"),l=""==_satellite.getVar("ev_eve_element")?"Not set":_satellite.getVar("ev_eve_element"),c=""==_satellite.getVar("ev_eve_effect")?"Not set":_satellite.getVar("ev_eve_effect"),d=""==_satellite.getVar("ev_eve_cause")?"Not set":_satellite.getVar("ev_eve_cause");t.eVar117=c+"~"+d,t.eVar16=r+"~"+n+"~"+s.dtm_capitalize().dtm_readable()+"~"+o+"~"+_satellite.getVar("URLNoParam")+"~"+i+"~"+c+"~"+d+"~"+l,t.eVar8=_satellite.getVar("ev_att_mmdr_NBO")||"not set",t.eVar10=_satellite.getVar("ev_att_mmdr_NBO")||"not set",t.eVar45+="~rn:DCR - All - AEM - AA - ZSO Interaction",t.prop16="D=v16",t.prop12=_satellite.getVar("ev_eve_timestamp"),t.prop8="D=v8",t.prop10="D=v10",t.linkTrackVars+="eVar8,eVar10,eVar16,eVar45,eVar117,prop8,prop10,prop12,prop16,",t.linkTrackEvents+="event91,",a=(a+="event91,").slice(0,-1),t.events+=a}catch(e){var u={from:"AA",type:"DCR",name:"ZSO Interaction"};_satellite.logger.error(e,u)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"ZSO Interaction",linkType:"o"}}]},{id:"RL3c7e636447c04e59a866eadbf0587124",name:"DCR - MYCE Interaction",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"my_ce_interaction"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),t.eVar10=t.prop10=_satellite.getVar("ev_att_mmdr")||"Not Set",t.eVar16=_satellite.getVar("ev_eve_eventAction").replace("phone","p h o n e")+"~"+_satellite.getVar("ev_eve_eventName").replace("phone","p h o n e")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect").replace("phone","p h o n e")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction").replace("phone","p h o n e")+"~"+_satellite.getVar("ev_eve_eventName").replace("phone","p h o n e")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect").replace("phone","p h o n e")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.eVar117=_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_effect"),t.events="event91",t.linkTrackEvents="event91",t.linkTrackVars+="eVar10,eVar16,prop10,prop16,eVar117,events,"}catch(e){_satellite.logger.error("Erroe in my ce interaction "+e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}},{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}}]},{id:"RL7ea7384e1dbc4cb89fa6ee55253da105",name:"TPT - Qatar - AEM - Doubleclick - IFrame RFO Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-qatar.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC472564c4f5e745e3ad8520f8b2cff008-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL88ff3844ea9648a68637a65b29cc922e",name:"TPT - Yemen - Multiple - DoubleClick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Yemen - floodlight - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"YE"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-yemen.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc9816c3329ed4eaaa54170419fc781b2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4d8d79a6b2cf41d193efffcbd72ec397",name:"TPT - Lebanon - Multiple - Doubleclick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: Lebanon - Doubleclick ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"LB"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-lebanon.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC35df0c46d7634eed87f01bc9232d5fc4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb28822f2540343f1852052bd5b2f50db",name:"DCR - Simulated Page",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"simulated_page"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.clearVars();try{_satellite.getVar("geoRegion");var a=_satellite.getVar("topLevelDomain");null==_satellite.cookie.get("bmwdtm_hq_sid")&&setTimeout((function(){_satellite.track("bounce_timer")}),3e4),_satellite.getVar("defaultVars");var r="",n=_satellite.getVar("pr_att_mmdr"),s=_satellite.getVar("navEvarForPage"),o=_satellite.getVar("hierarchyEvar").split("|");if("bmw.ca"==a&&window.document.cookie.indexOf("tempNavigation")>-1){var i=_satellite.cookie.get("tempNavigation"),l=JSON.parse(decodeURIComponent(i)),c=l.trackingEvent.attributes.relatedComponent.componentInfo,d=s.split("~")[4],u=s.split("~")[5];s="Internal Pagelink~"+l.trackingEvent.eventInfo.eventName+"~"+c.componentName+"~Not available~"+d+"~"+u,_satellite.cookie.remove("tempNavigation")}t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar15=_satellite.getVar("hierarchyEvar"),t.eVar16=s,t.eVar18=_satellite.getVar("navEvarForPage2");var g=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=g,t.eVar45+="~rn:Simulated Page",t.eVar62="Virtual Page",t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=o[0],t.prop2=o[1],t.prop3=o[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var m=s.split("~");if(t.prop16=m[1]+"~"+m[2]+"~"+m[5],t.prop27="D=v3",r+="event91,",t.campaign=_satellite.getVar("campaignParameter"),t.eVar60=_satellite.getVar("internalCampaignParameter"),"bmw.com.cn"==a&&(t.eVar64=_satellite.getVar("localCampaignVariable")),"Contact bar"==m[2]?r+="event45,event46,":"Main navigation"==m[2]?r+="event49,":-1!=m[2].indexOf("teaser")&&(r+="event44,"),"VCO"===_satellite.getVar("pa_cat_primaryCategory")){var p="SATELLITE: Configurator Simulated Page";t.eVar34="VCO: Reach "+_satellite.getVar("pa_pag_pageName"),t.prop24=_satellite.getVar("pa_pag_pageName"),t.eVar46=_satellite.getVar("pa_cat_subCategory01")+"|"+_satellite.getVar("pa_pag_pageName"),t.eVar47="+1",configuratorUrl=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01"),t.eVar63=configuratorUrl,_satellite.setVar("vco_referring_url",configuratorUrl),_satellite.logger.log("DTM: pa_cat_pageType value"+_satellite.getVar("pa_cat_pageType")),"start page"===_satellite.getVar("pa_cat_pageType")&&(_satellite.logger.log("DTM: pa_cat_pageType value"+_satellite.getVar("pa_cat_pageType")),_satellite.logger.log("DTM: pa_cat_pageType before"+r),r+="event21,event994,","DE"!==_satellite.getVar("geoRegion")&&"IT"!==_satellite.getVar("geoRegion")||(r+="event155,"),_satellite.logger.log("DTM: pa_cat_pageType after"+r)),"Select Engine"===_satellite.getVar("pa_pag_pageName")&&(t.prop28=n),"Province Selection"!=_satellite.getVar("pa_pag_pageName")&&"Select Model"!=_satellite.getVar("pa_pag_pageName")&&(t.eVar9=n,t.eVar10=n,t.prop9=n,t.prop10=n),"Select Financing : Financing Product"==_satellite.getVar("pa_pag_pageName")&&(r+="event201,"),"Select Engine"===_satellite.getVar("pa_pag_pageName")||"Select Model"===_satellite.getVar("pa_pag_pageName")?_satellite.getVar("productLength")!=_satellite.getVar("finalDataLayer").product.length&&(_satellite.setVar("financeInteraction","false"),_satellite.setVar("productLength",_satellite.getVar("finalDataLayer").product.length)):_satellite.setVar("productLength",_satellite.getVar("finalDataLayer").product.length),_satellite.getVar("pr_att_yearOfLaunch");var v=_satellite.getVar("pr_att_modelCode"),b=_satellite.getVar("pr_att_sellingPriceTotal");""==n&&(n="not set");var f="",_=!1,h="",V=_satellite.getVar("lastModelCode");if((V!=v||"VCO module"!=m[2]&&null!=m[2])&&"Select Engine"!=_satellite.getVar("pa_pag_pageName")&&"Select Model"!=_satellite.getVar("pa_pag_pageName")&&"Province Selection"!=_satellite.getVar("pa_pag_pageName")&&t.eVar1!=t.eVar17){h="event111="+b;var C=_satellite.getVar("pr_pro_productID").split("::").join("|");C=C.substring(C.indexOf("|")+1),t.eVar36=C,r+="event22:"+_satellite.getVar("SessionID")+n+",event23,event226,event111,",_=!0}if("Select Model"!=_satellite.getVar("pa_pag_pageName")&&"Select Engine"!=_satellite.getVar("pa_pag_pageName")&&"Province Selection"!=_satellite.getVar("pa_pag_pageName")){
var y=_satellite.getVar("s_products_vco_v52");f+=";"+n+";1;"+b+";"+h+";eVar52="+y+",",t.eVar51=y}_&&(f+=_satellite.getVar("s_products_vco_v53")+","),""!=f&&(f=f.slice(0,-1),t.products=f),r=r.slice(0,-1),_satellite.logger.log("DTM: events in simulated page"+r),t.events+=r,_satellite.logger.log("DTM: events in simulated page"+r),_satellite.logger.info("DEBUG: lastModelCode:"+V),_satellite.logger.info("DEBUG: pr_att_modelCode:"+v),_satellite.logger.info("DEBUG: pa_pag_pageName:"+_satellite.getVar("pa_pag_pageName")),_satellite.logger.info("DEBUG: clickProp[2]:"+m[2]);var P="DEBUG: NO START";(V!=v||"VCO module"!=m[2]&&null!=m[2])&&"Select Engine"!=_satellite.getVar("pa_pag_pageName")&&"Select Model"!=_satellite.getVar("pa_pag_pageName")&&"Province Selection"!=_satellite.getVar("pa_pag_pageName")&&t.eVar1!=t.eVar17&&(P="DEBUG: CONFIGURATION START"),_satellite.logger.info(P),"Select Engine"!=_satellite.getVar("pa_pag_pageName")&&_satellite.setVar("lastModelCode",v)}"multicontent"==_satellite.getVar("ev_att_componentName")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO"),r+="event91",t.linkTrackVars+="eVar16,prop16,prop12,eVar8,eVar10,prop8,prop10"),"line_component"==_satellite.getVar("ev_att_componentName")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO"),r+="event91,",t.linkTrackVars+="eVar16,prop16,prop12,eVar8,eVar10,prop8,prop10"),"offers"==_satellite.getVar("ev_att_componentName")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("pa_pag_referringUrl")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("pa_pag_referringUrl")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO"),r+="event91,",t.linkTrackVars+="eVar16,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12"),"true"==localStorage.getItem("sdsat_debug")&&_satellite.logger.log(p),"new_pre_configuration"==_satellite.getVar("ev_att_componentName")&&(t.abort=!0)}catch(e){_satellite.logger.error("SATELLITE: Simulated Page Load request suppressed -- regulation not accepted by user")}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC775bec9e7d6f4f2eb9aa2104f425fa2a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb8649fb1305449b9b26ff54a91328337",name:"TPT - KZ - AEM - Adwords - iframe_forms_rfi - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfi"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kz.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc95419a6008f4c5e99537122591fef11-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe9167ef646c74be4bb542af199c3057b",name:"TPT - UA - AEM - Adwords - iFrame RFO Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC1a58254d90374c23a6fc8388d8652cc6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4b36b269582e4806b06ce673f259e83a",name:"DCR - Ignition One RFO Form",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"Ignite_One_RFO"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{function a(){if(!window.s_loadT){var e=(new Date).getTime(),t=window.performance?performance.timing:0,a=t?t.requestStart:window.inHeadTS||0;s_loadT=a?Math.round((e-a)/100):""}return s_loadT}t.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),t.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),t.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),t.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l"),_satellite.getVar("defaultVars");var r="",n=_satellite.getVar("hierarchyEvar").split("|");t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2");var s=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=s,t.eVar45+="~rn:Local Forms RFC",t.eVar62=a(),t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=n[0],t.prop2=n[1],t.prop3=n[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var o=_satellite.getVar("navEvarForPage").split("~");t.prop16=o[1]+"~"+o[2]+"~"+o[5],t.prop27="D=v3",r+="event91,",t.campaign=_satellite.getVar("campaignParameter"),"bmw.com.cn"==topLevelDomain&&(t.eVar64=_satellite.getVar("localCampaignVariable")),"brand-switch-rfo"===_satellite.getVar("finalDataLayer").page.pageInfo.pageName?(r+="event158,event180,event77,",r+="event1:"+_satellite.getVar("SessionID")+"RFO,",t.eVar11="I/O Form|RFO|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|"+_satellite.getVar("ev_cat_subCategory04"),t.prop30="Start I/O RFO"):(r+="event159,event181,event78,",r+="event3:"+_satellite.getVar("SessionID")+"RFO,",t.eVar11="I/O Form|RFO|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|"+_satellite.getVar("ev_cat_subCategory04"),t.prop31="Finish I/O Form RFO"),t.linkTrackVars+="eVar6,eVar16,eVar17,eVar62,eVar64,eVar11,prop1,prop2,prop3,prop4,eVar6,eVar7,eVar15,eVar16,prop27,prop30,prop31",t.linkTrackEvents+="event91,event158,event159,event1,event3,event180,event181",r=r.slice(0,-1),t.events+=r}catch(e){_satellite.logger.log(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RL4f112c8c7a1045e18cb173c7bcaba22c",name:"TPT - Middle East - Multiple - Doubleclick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Middle East - Multiple - Programmatic - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb5b620eac90042e7bd47e8aee055bb41-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL82635ae2183742c3ba959cd436a5763a",name:"TPT - MA - AEM - Adwords - Local Form - DCR - p15r[c] ",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc7c01cb8fe9e42dd93e17be03dd40688-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6d4e93d2abb341359688244a88373293",name:"TPT - HK - Multiple - DoubleClick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - HK - Multiple - DoubleClick - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"HK"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmwhk.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2808d4a189384fe5bd2650994c472071-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL551153b6896944c9be6330b74566af28",name:"TPT - Saudi - AEM - Twitter - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-saudiarabia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3ef28c4522ca4a408b3d127c58cca6e9-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL80cfe48ee1514850bf36642a4088283d",name:"TPT - Kuwait - AEM - Snapchat - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-kuwait.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCcd4a4f8c02ce43d9912283f625222a41-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLffe163f1e39948fca9fa649d420a80d0",name:"TPT - Iraq - Multiple - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Iraq - Multiple - Facebook - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"IQ"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-iraq.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0567f4555c3a40e682c3ecc494493a47-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL65ff4d657dc04a4b996b7ff826a91940",name:"TPT - UA - AEM - Facebook - iFrame RFO Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5b8a270c91414ff5a8f15a92b7beb409-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf87e233d683b4d57a47741d0f9b3990b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL54ce2502975a40c7aac2b9ad1f5c8cc2",name:"TPT - All Pages - Google Adwords Help Functions - 20",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:20},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: Adwords Pixel ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.bg",valueIsRegex:!0},{value:"bmw.hu",valueIsRegex:!0},{value:"bmw.cz",valueIsRegex:!0},{value:"bmw.gr",valueIsRegex:!0},{value:"bmw.sk",valueIsRegex:!0},{value:"bmw.si",valueIsRegex:!0},{value:"bmw.ro",valueIsRegex:!0},{value:"bmw.ru",valueIsRegex:!0},{value:"bmw.at",valueIsRegex:!0},{value:"bmw.nl",valueIsRegex:!0},{value:"bmw.com.mx",valueIsRegex:!0},{value:"bmw.co.uk",valueIsRegex:!0},{value:"bmw.pl",valueIsRegex:!0},{value:"bmw.co.jp",valueIsRegex:!0},{value:"bmw-oman.com",valueIsRegex:!0},{value:"bmw.com.do",valueIsRegex:!0},{value:"bmw.com.ec",valueIsRegex:!0},{value:"bmw.com.gt",valueIsRegex:!0},{value:"bmw.co.il",valueIsRegex:!0},{value:"bmw-lebanon.com",valueIsRegex:!0},{value:"bmw.com.py",valueIsRegex:!0},{value:"bmw.com.pe",valueIsRegex:!0},{value:"bmw.dz",valueIsRegex:!0},{value:"bmw.com.ar",valueIsRegex:!0},{value:"bmw.com.bo",valueIsRegex:!0},{value:"bmw.com.mk",valueIsRegex:!0},{value:"bmw.com.pa",valueIsRegex:!0},{value:"bmw.com.tw",valueIsRegex:!0},{value:"bmw.co.za",valueIsRegex:!0},{value:"pml-bmw.com.sg",valueIsRegex:!0},{value:"bmw.com.sg",valueIsRegex:!0},{value:"bmw.cl",valueIsRegex:!0},{value:"bmw.com.co",valueIsRegex:!0},{value:"bmw.co.cr",valueIsRegex:!0},{value:"bmw.co.th",valueIsRegex:!0},{value:"bmw.com.br",valueIsRegex:!0},{value:"bmw.com.uy",valueIsRegex:!0},{value:"bmwhk.com",valueIsRegex:!0},{value:"bmw-voli.me",valueIsRegex:!0},{value:"bmw.vn",valueIsRegex:!0},{value:"bmw.fr",valueIsRegex:!0},{value:"bmw.rs",valueIsRegex:!0},{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex",caseInsensitive:!0},leftOperand:"%URL%",rightOperand:"mein-bmw\\.html"},negate:!0}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC35238cb9ba794c97965131ed6bc302b0-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6487a82cc15b4826a74262f6b91bbc86",name:"DCR - Online Sales Module",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_online_sales"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("navEvarForClicks2"),n=_satellite.getVar("ev_eve_eventName"),s=(_satellite.getVar("ev_eve_target"),_satellite.getVar("ev_cat_primaryCategory"),_satellite.getVar("ev_att_mmdr"));t.eVar18=r,t.eVar16=n,t.prop16=n,t.eVar8=s,t.eVar10=s,t.prop8=s,t.prop10=s,t.eVar45+="~rn:Online Sales Module";var o=n.toLowerCase();"landing page"==o&&(a="event91,event301,"),"checkout"==o&&(a="event91,event302,"),"thank you page"==o&&(a="event91,event303,"),"faqs page"==o&&(a="event91,event304,"),t.linkTrackVars+="eVar16,prop16,eVar8,eVar10,prop8,prop10,eVar18,eVar45",t.linkTrackEvents+="event301,event302,event303,event304,event91",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.error(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLc03ace3672f04565b749cc440ed1c194",name:"TPT - PS - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ps",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC1cfbf64b19834f4694eed3fc08b7df0f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL44c0328f98c740dbbb7ed5cd68981fb4",name:"DCR - All - NSC - AA - Local Forms TDA",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"local_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("hierarchyEvar").split("|");t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2"),t.eVar44=_satellite.getVar("nonTechMetaData");var n=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=n,t.eVar45+="~rn:DCR - All - NSC - AA - Local Forms TDA",t.eVar62=t.s_getLoadTime(),t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=r[0],t.prop2=r[1],t.prop3=r[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var s=navEvarForPage.split("~");t.prop16=s[1]+"~"+s[2]+"~"+s[5],t.prop27="D=v3",a+="event91,","bmw.com.cn"==topLevelDomain&&(t.eVar64=_satellite.getVar("localCampaignVariable"));var o="",i=_satellite.getVar("ev_att_mmdr"),l=_satellite.getVar("pr_att_mmdr");o=""!=i&&"mmdr"!=i?i:""!=l?l:"not set";var c=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",d=_satellite.getVar("s_products_iFrame_v52"),u=_satellite.getVar("s_products_vco_v53"),g="";g+=";"+o+";1;"+c+";event112="+c+";eVar52="+d+",",t.eVar51=d,""!=(g+=u+",")&&(g=g.slice(0,-1),t.products=g),"Form Start"===_satellite.getVar("ev_eve_eventName")?(a+="event1:"+_satellite.getVar("SessionID")+"TDA,",a+="event2:"+_satellite.getVar("SessionID")+"TDA,",a+="event9,event170,",a+="event10:"+_satellite.getVar("SessionID")+",",t.eVar11="Local Form|TDA|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start TDA"):"Form Success"===_satellite.getVar("ev_eve_eventName")?(a+="event3:"+_satellite.getVar("SessionID")+"TDA,",a+="event4:"+_satellite.getVar("SessionID")+"TDA"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",a+="event11,event171,",a+="event12:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar11="Local Form|TDA|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|not set",""!=_satellite.getVar("ev_att_dealerName")&&""!=_satellite.getVar("ev_att_dealerID")&&(t.eVar13=_satellite.getVar("ev_att_dealerName")+"|"+_satellite.getVar("ev_att_dealerID")),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish TDA"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|TDA|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|First Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|TDA|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":t.abort=!0,t.linkTrackVars+="eVar6,eVar16,eVar17,eVar45,eVar62,eVar64,eVar11,eVar10,eVar13,eVar67,prop1,prop2,prop3,prop4,prop6,prop7,prop15,prop16,prop27,prop30,prop31,eVar51,eVar52,products,eVar44",t.linkTrackEvents+="event91,event1,event2,event3,event4,event9,event10,event11,event12,event170,event171,event295",a=a.slice(0,-1),t.events+=a}catch(e){var m={from:"AA",type:"DCR",name:"Local Forms TDA"};_satellite.logger.error(e,m)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RL3f6f83945f374dcc828695bb45dd643e",name:"W - BMW Registration Start DE",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"#loginform .ds2-layer--interaction-list-container-lower.ng-scope li:nth-child(2) > a",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{t.linkTrackVars="eVar1,eVar2,eVar3,eVar4,eVar7,eVar12,eVar14,prop1,prop12,prop13, prop69,prop70,prop2,channel,prop31,eVar31,events",_satellite.getVar("SessionID");var a=_satellite.getVar("hierarchyEvar"),r=(_satellite.getVar("pa_pag_pageName"),_satellite.getVar("pageName")),n=_satellite.getVar("pa_pag_pageTitle"),s=_satellite.getVar("URL"),o=_satellite.getVar("URLNoParam"),i=_satellite.getVar("pa_pag_language"),l=_satellite.getVar("pathName"),c=_satellite.getVar("userMetaData"),d=_satellite.getVar("nonTechMetaData"),u=_satellite.getVar("nonTechMetaDataEvarAddon"),g=_satellite.getVar("techMetaData"),m=_satellite.getVar("server");_satellite.getVar("pr_att_mmdr"),_satellite.getVar("jcrPathLevel1"),t.eVar1=a,t.eVar2=r,t.eVar3=n,t.eVar4=s,t.eVar7=i,t.eVar12=l,t.eVar14=c,t.eVar44=d+"~"+u,t.eVar45=g,1!=_satellite.getVar("noInteractionCount")?t.eVar48="+1":_satellite.setVar("noInteractionCount",!1),t.eVar63=o;var p=_satellite.getVar("adobeRSID");t.account=p,t.server=m;var v=new Date,b=Math.round(v.getTime()/1e3);t.prop12=b,t.prop13=d,t.prop69="Stage II",t.prop70="D=mid"}catch(e){_satellite.logger.log(e)}}},trackerProperties:{events:[{name:"event35"},{name:"event91"},{name:"event998"},{name:"event999"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"regi_Start",linkType:"o"}}]},{id:"RL1ffff106322043748afdfd74ea6c9b85",name:"DCR - DLO State Integrated",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dlo_state_integrated"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("finalDataLayer"),_satellite.getVar("defaultVars");var a="",r=(_satellite.getVar("navEvarForClicks"),_satellite.getVar("navEvarForClicks2"),_satellite.getVar("ev_eve_eventName")),n=(_satellite.getVar("co_att_outletName"),_satellite.getVar("co_att_dealerID"),_satellite.getVar("co_att_outletID"),_satellite.getVar("SessionID"));if("Brand Selection"==r)a+="event82,";else if("Search Start"==r||"DLO Start"==r)a+="event50:"+n+document.location.hash.dtm_hashCode()+",event51,",t.eVar39=_satellite.getVar("ev_eve_brandName");else if("Inline Dealer Detail"==r||"Single Dealer Detail"==r||"Select Dealer"==r)a+="event54,event55,",t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType");else if("Route Start"==r);else if("Select Preferred Dealer"==r)a+="event85,",t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType");else if("Delete Preferred Dealer"==r)a+="event86,",t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType");else if("Route Detail"==r||"Dealer Interaction"==r){var s=_satellite.getVar("ev_eve_effect");"Contact Information Hide"!=s&&"Contact Information Show"!=s||(a+="event60,event61,"),"Plan Route"==s&&(a+="event89,");var o=s.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(s)?a+="event56,":null!=o&&(a+="event59,"),/^\d+\s\d+$/.test(s)&&(a+="event57,"),t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType")}else"DLO Errors"==r&&(a+="event95,",t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType"),t.eVar69=_satellite.getVar("ev_eve_eventError"));if(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target"),t.eVar45+="~rn:DLO State Standalone",t.eVar34="DLO: "+r,t.prop12=_satellite.getVar("ev_eve_timestamp"),"DLO Search"==r||"Search Result"==r){var i=_satellite.getVar("co_att_onsiteSearchResultsFilters");t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType"),a+="event83,",i.indexOf("Location")>-1?a+="event52,":i.indexOf("Dealer")>-1&&(a+="event53,")}t.eVar41=_satellite.getVar("ev_att_dealerName_DLOnew")+"|"+_satellite.getVar("ev_att_dealerID_DLOnew"),a+="event91,",t.linkTrackVars+="eVar16,prop16,prop12,eVar41,eVar42,eVar43,eVar69,eVar39,eVar57,eVar34",t.linkTrackEvents+="event91,event82,event89,event95,event54,event55,event52,event53,event83,event85,event86,event50,event51,event56,event57,event58,event59,event60,event61",a=a.slice(0,-1),
t.events+=a}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"dlo state standalone",linkType:"o"}}]},{id:"RL3f0ff55570244f8894443552905859ca",name:"DCR - Open Navigation",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"open_navigation"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals",caseInsensitive:!0},leftOperand:"%isSavingsModeApplicable%",rightOperand:"false"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{if("true"==localStorage.getItem("sdsat_debug")){var a=window.digitals2.tracking.api.getCurrentPageIndex(),r=window.digitals2.tracking.api.getPageObject(a);if(r.component){var n="Number of Components: "+r.component.length,s="Page Name: "+(i=r.page.pageInfo.pageName);_satellite.logger.log("Data Layer API Timing Test (DirectCall Triggered):"),_satellite.logger.log(n),_satellite.logger.log(s)}else _satellite.logger.log("Data Layer API Timing Test (DirectCall Triggered):"),_satellite.logger.log("No Data Layer / Components available.")}t.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+2*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),t.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),t.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),t.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l");var o="",i=_satellite.getVar("pageName"),l=_satellite.getVar("pa_pag_referringUrl"),c=(_satellite.getVar("pa_att_template"),_satellite.getVar("jcrPathLevel1")),d=_satellite.getVar("campaignParameter"),u=_satellite.getVar("finalDataLayer").component,g=_satellite.getVar("hierarchy"),m=(_satellite.getVar("URLNoParam"),_satellite.getVar("SessionID"),_satellite.getVar("navEvarForPage"),_satellite.getVar("navEvarForPage2"),_satellite.getVar("hierarchyEvar")),p=m.split("|"),v=(_satellite.getVar("ev_eve_eventName"),_satellite.getVar("navEvarForClicks"));_satellite.getVar("navEvarForClicks2"),_satellite.getVar("defaultVars"),t.campaign=d,t.eVar6=l,t.eVar15=m;var b=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=b,t.eVar45+="~rn:Open Navigation",t.eVar47="+1",t.eVar62="Virtual Page",t.pageName=i,t.channel=c,t.referrer=document.referrer,t.hier1=g,t.prop1=p[0],t.prop2=p[1],t.prop3=p[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var f=_satellite.getVar("ev_eve_timestamp");t.prop12=f,t.prop27="D=v3";var _=v.split("~");if(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),"uxn_main_navigation"!=_satellite.getVar("ev_att_componentName")&&"model_navigation_hp"!=_satellite.getVar("ev_att_componentName")||("model_navigation_hp"!=_satellite.getVar("ev_att_componentName")||!_satellite.getVar("ev_eve_cause")||"series"!=_satellite.getVar("ev_eve_cause").toLowerCase()&&"automatic"!=_satellite.getVar("ev_eve_cause").toLowerCase()&&"body type"!=_satellite.getVar("ev_eve_cause").toLowerCase())&&(t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element")),"multicontent"==_satellite.getVar("ev_att_componentName")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element")),"visualizer"==_satellite.getVar("ev_att_componentName_vis")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName_vis").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentName_vis")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName_vis").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentName_vis")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO"),t.linkTrackVars+="prop12,eVar8,eVar10,prop8,prop10,"),o+="event91,",t.linkTrackVars+="eVar16,prop16,eVar48",t.linkTrackEvents+="event91","bmw.com.cn"==_satellite.getVar("topLevelDomain")&&(t.eVar64=_satellite.getVar("localCampaignVariable")),void 0!==u){for(var h="false",V="SATELLITE: Search Results Page Load Variables set triggered by _satellite.track",C=0;C<u.length;C++)if(u[C].attributes&&u[C].attributes.onsiteSearch&&"General"===u[C].attributes.onsiteSearch){h="true";break}"true"==h&&(t.prop21=u[C].attributes.onsiteSearchTerm,t.eVar22=u[C].attributes.onsiteSearchTerm+"|"+u[C].attributes.onsiteSearchResults+"|GSA",o+="event47,")}"Contact bar"==_[2]?o+="event45,event46,":"Main navigation"==_[2]?o+="event49,":-1!=_[2].indexOf("teaser")&&(o+="event44,"),o=o.slice(0,-1),t.events+=o,"true"==localStorage.getItem("sdsat_debug")&&(_satellite.logger.log(V),_satellite.logger.log("removed direct call rule from pageload_datalayer_ready"))}catch(e){_satellite.logger.error("Open Navigaiton "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Open Navigation",linkType:"o"}}]},{id:"RL540a5c100aa7406d9f71d0cc1cc70634",name:"TPT - HK - All Pages  - Set Campaign Paramter to Cookie",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - HK - All Pages - Set Campaign Paramter to Cookie - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"HK"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmwhk.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb6345d1641dc468ea1c26259e9256eef-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4c0b6d84b06845a8b0af30ee51a79ce0",name:"TPT - TW - AEM - Yahoo - Iframe Forms TDA - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tw",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC41d537c541f84c3c9d998015ac921f4e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6e715eaa831d4055b6814faca55700a9",name:"TPT - LV - AEM - TawkChat - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.lv",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCfdfcea43e5104c1bb1b66640b47e58ae-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL63bbf413c9c3450e923147695a694b9c",name:"TPT - GP - Multiple - facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"GP"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.gp",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb52913db54b5471f8f4ec9607a30fe4f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL43c5c5b8197d4669ba12128ad601b366",name:"TPT - AZ - AEM - Facebook - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.az",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd95820bacce84dac853e6aa4567e82bd-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa26ae68cc29542a99697e66a84237021",name:"PLR - FR - Campaign String to Cookie",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - FR - All Pages - Set Campaign data Cookie - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"FR"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.fr",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){try{var t=_satellite.getVar("consentMap");return"true"==("true"==_satellite.getVar("splitConsentEnabled")?consentcontroller.api.isUsageAllowed(t.campaignCookieTracking).toString():_satellite.getVar("isRegulationAccepted_Tags"))}catch(t){_satellite.logger.error("error in FR campaign to cookie rule"+e)}}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe07389f1a5fd4abdb0de9150f13e8ced-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6dce5d0df8874c61bd9dffdc7d06a7c8",name:"TPT - Oman - AEM - Snapchat - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCad540e70b2d14a99b5f70d989913d24c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL86b9e23d0e3142418ce9611f1e6644ae",name:"PLR - ALL - NSC - AA - localform2.0 eventlistener",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"try {\n    //DEEP Merge Code Start\n    function isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object'\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n    }\n    function emptyTarget(val) {\n        return Array.isArray(val) ? [] : {}\n    }\n    function cloneIfNecessary(value, optionsArgument) {\n        var clone = optionsArgument && optionsArgument.clone === true\n        return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n    }\n    function defaultArrayMerge(target, source, optionsArgument) {\n        var destination = target.slice()\n        source.forEach(function(e, i) {\n            if (typeof destination[i] === 'undefined') {\n                destination[i] = cloneIfNecessary(e, optionsArgument)\n            } else if (isMergeableObject(e)) {\n                destination[i] = deepmerge(target[i], e, optionsArgument)\n            } else if (target.indexOf(e) === -1) {\n                destination.push(cloneIfNecessary(e, optionsArgument))\n            }\n        })\n        return destination\n    }\n    function mergeObject(target, source, optionsArgument) {\n        var destination = {}\n        if (isMergeableObject(target)) {\n            Object.keys(target).forEach(function (key) {\n                destination[key] = cloneIfNecessary(target[key], optionsArgument)\n            })\n        }\n        Object.keys(source).forEach(function (key) {\n            if (!isMergeableObject(source[key]) || !target[key]) {\n                destination[key] = cloneIfNecessary(source[key], optionsArgument)\n            } else {\n                destination[key] = deepmerge(target[key], source[key], optionsArgument)\n            }\n        })\n        return destination\n    }\n    function deepmerge(target, source, optionsArgument) {\n        var array = Array.isArray(source);\n        var options = optionsArgument || { arrayMerge: defaultArrayMerge }\n        var arrayMerge = options.arrayMerge || defaultArrayMerge\n        if (array) {\n            return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n        } else {\n            return mergeObject(target, source, optionsArgument)\n        }\n    }\n    //DEEP Merge Code Ends\n  \n  \n    window.addEventListener('message', function (e) {\n      if(e && e.data && typeof e.data == \"string\" && e.data.indexOf('tracking-localform') > -1){\n        _satellite.logger.log(\"Localform: message received\");\n        try {\n            //Avoid JS error\n            if (e.data.charAt(0) == \"{\") {\n                var dlParam = e.data;\n                dlParam = JSON.parse(e.data) || {};\n                if (dlParam && dlParam.methodName && dlParam.methodName == \"tracking-localform\") {\n                    dlParam = dlParam.args[1];\n                    \n                    var oldDL = _satellite.getVar('finalDataLayer');\n                    var newDL = dlParam;\n                    dlParam = deepmerge(oldDL,newDL);\n                    \n                    dlParam['component'] = JSON.parse(JSON.stringify(newDL['component']));\n                    dlParam['event'] = JSON.parse(JSON.stringify(newDL['event']));\n                    \n                    _satellite.track('localform', {\n                        'webDL': dlParam\n                    });\n                }\n            }\n        } catch (err) {\n            var errorOrigin = {\n                from: \"AA\",\n                type: \"PLR\",\n                name: \"localform2.0 eventlistener\"\n            }\n            _satellite.logger.error(e, errorOrigin);\n        }\n      }\n    });\n} catch (e) {\n    var errorOrigin = {\n        from: \"AA\",\n        type: \"PLR\",\n        name: \"localform2.0 eventlistener\"\n    }\n    _satellite.logger.error(e, errorOrigin);\n}",language:"javascript"}}]},{id:"RL03daaf90f89b42d19fae9b576e190d76",name:"TPT - DO - All Pages - Adwords",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - DO - All Pages - Adwords - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"DO"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.do",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd135aa38a4ed40ef83be08575353b241-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL0e57743d4c7f4ba5b354101b8d40e1d8",name:"TPT - Qatar - AEM - Doubleclick - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: FloodLight Pixel ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-qatar.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCffb4f77388734ff69bd17f3287ea18a4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8ff46aae259944a8b8508dee9133b734",name:"TPT - ZA - Multiple - Adform",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - ZA Adform - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"ZA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.za",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC60bbe7766e6b4698af1c3f7448a19661-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL7f9e88cd16e64e6d93aa52973de253ca",name:"PLR - TR - Set iFrame Query String",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"TR"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tr",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC58585cb9d3944c67a017fbc537deb5be-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc714db51629748a3afd152ef38743f9d",name:"TPT - RS - AEM - Adwords - PDF Download Click - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"download"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb29c028cf1f14d30a4981bf0aa174d1b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLed8ccd6387e44263ab4fe3e00e8ff20b",name:"TPT - Yemen - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-yemen.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0d4ffaa4a6414643b980d88737dffd32-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbeb8002b8281403d9a2f5f22029d35ab",name:"PLR - ProcessingWrapper stub",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:2}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return"true"!==localStorage.getItem("processingWrapper")&&void 0===window.processingWrapper}}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex",caseInsensitive:!0},leftOperand:"%URL%",rightOperand:"mein-bmw\\.html"},negate:!0}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"window.p15r = window.p15r || [];\n\nwindow.processingWrapper = window.processingWrapper || {\n  overwrite: true,\n  register : function (processingId, callback) {\n    window.p15r.push({\n      action: 'register',\n      processingId : processingId,\n      callback : callback,\n    })\n  },  \n  execute : function (processingId, procParams) {\n    window.p15r.push({\n      action: 'execute',\n      processingId : processingId,\n      params: procParams,\n    })\n  }\n}",language:"javascript"}}]},{id:"RL834e6cf5b07e496397b68904433659d8",name:"TPT - MA - AEM - Adwords - Local Form RFO  Finish - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if("local > form finished"==_satellite.getVar("LocalFormEvent").event[0].eventInfo.effect)return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCaa82d846b9004cc69938d0e6f27f6c83-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb39d710d96824a869c1c51feb70844f7",name:"TPT - HN - AEM - Adwords - All Pages - PLR - p15[c]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Chile - All pages - Adwords",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"HN"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.hn",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC73298f7f2d9d4b0cbdadd87d222758a0-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe6efbe7ee01d4513950a4895adc6afd0",name:"DCR - Ignition One RFI Form",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"Ignite_One_RFI"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{function a(){if(!window.s_loadT){var e=(new Date).getTime(),t=window.performance?performance.timing:0,a=t?t.requestStart:window.inHeadTS||0;s_loadT=a?Math.round((e-a)/100):""}return s_loadT}t.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),t.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),t.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),t.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l"),_satellite.getVar("defaultVars");var r="",n=_satellite.getVar("hierarchyEvar").split("|");t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2");var s=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=s,t.eVar45+="~rn:Local Forms RFC",t.eVar62=a(),t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=n[0],t.prop2=n[1],t.prop3=n[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var o=_satellite.getVar("navEvarForPage").split("~");t.prop16=o[1]+"~"+o[2]+"~"+o[5],t.prop27="D=v3",r+="event91,",t.campaign=_satellite.getVar("campaignParameter"),"bmw.com.cn"==topLevelDomain&&(t.eVar64=_satellite.getVar("localCampaignVariable")),"brand-switch-rfi"===_satellite.getVar("finalDataLayer").page.pageInfo.pageName?(r+="event158,event180,event77,",r+="event1:"+_satellite.getVar("SessionID")+"RFI,",t.eVar11="I/O Form|RFI|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|"+_satellite.getVar("ev_cat_subCategory04"),t.prop30="Start I/O RFI"):(r+="event159,event181,event78,",r+="event3:"+_satellite.getVar("SessionID")+"RFI,",t.eVar11="I/O Form|RFI|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|"+_satellite.getVar("ev_cat_subCategory04"),t.prop31="Finish I/O Form RFI"),t.linkTrackVars+="eVar6,eVar16,eVar17,eVar62,eVar64,eVar11,prop1,prop2,prop3,prop4,eVar6,eVar7,eVar15,eVar16,prop27,prop30,prop31",t.linkTrackEvents+="event91,event158,event159,event1,event3,event180,event181",r=r.slice(0,-1),t.events+=r}catch(e){_satellite.logger.log(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RL37100c06a63944cd87ac358367404bcb",name:"TPT - CC - AEM - Facebook - iFrame RFO Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.cc",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCcf863d1a11794653abcd2f62157781d6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL3cb86aa872d44a48aa8774db7b71d756",name:"TPT - ME - AEM - Tiktok - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9e8c2358bffb49488e1ef6f1fb352527-source.min.js",
language:"javascript",isExternal:!0}}]},{id:"RL50d6d59038194071ae77235254c004e0",name:"TPT - Abu Dhabi - AEM - Twitter - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-abudhabi.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC610c088a0b9d42358cfe6dfcfece5e22-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa7e94bf5fe89414b8ae5160c951b7465",name:"DCR - Select Province",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"select_province"},ruleOrder:50}],conditions:[],actions:[]},{id:"RL99954809528e48f28a57705d88ae7e50",name:"TPT - UA - Multiple - Facebook",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - UA - Multiple - Facebook - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC276cd13203104b20bfc3729863267444-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd116aa2d7ad742cbabeaa2a4a71d085a",name:"TPT - MA - AEM - Adwords - iFrame RFO Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7ae65ae21d514d7eb78f5a839446681c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd5b925cceb814910b093b767eb171d0f",name:"TPT - BY - All Pages - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - BY - THolySheep - All pages - FB pixel for remarketing - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"BY"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.by",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC1c487560e91d4947a3b84e358d1ef783-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdd94e608a7e64817968916a375c500bc",name:"TPT - BN - AEM - GTagDC - All Pages - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: Facebook Pixel ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.bn",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC46eee53457e7432e8234efb5d4f92f22-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL0ac489fb19ed4666a717c9aa0266ca7a",name:"TPT - LB - Multiple - Facebook Form Submit Event ",events:[{modulePath:"core/src/lib/events/submit.js",settings:{elementSelector:"form",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - LB - Form Submit Event Multiple - Facebook - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"LB"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-lebanon.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC95d8ae3c634e454aaf23edd33b517e76-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8e7028eb63ee4dc2aefbc63bbda7cb3d",name:"TPT - KZ - AEM - Facebook - Multiple - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.kz",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC68411796f3824ad59b2769968d0b613a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL570f1025bf5346f8aeb42ee9a40bed3e",name:"TPT - Bahrain - AEM - Twitter - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Bahrain - Multiple - facebook - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC76c3ffe32b4048068262c3cc7ce51db2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL17eaaa0a940e472d8c63ebd3a8499ea2",name:"TPT - Oman - Multiple - Gtag AW",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT:  Oman - Gtag AW ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"OM"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf1ac90d7cd914fc59f07026e4e625b8e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL36f7b80427f44a50a2a1e709569a20fa",name:"TPT - PH - AEM - Facebook - Multiple - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.ph",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC22c952a5b5c84a9485d4542e1f35fefd-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL1b1510680304460cb2715d646847fb59",name:"TPT - IL - Multiple - Adwords",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - IL - Multiple - Adwords - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"IL"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.il",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCaef9248484f74e87adb5d10759c7d768-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC93c5113321d04dc3bca9a1b763b6da82-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLfa6f7d27ef0f462ea83bc2d609ef4770",name:"DCR - All - AEM - AA - DCS Event",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dcs"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{var a="";_satellite.getVar("defaultVars"),t.prop13="",t.eVar1="",t.eVar72="";var r=digitals2.tracking.api.getPageObject(digitals2.tracking.api.getCurrentPageIndex());if(null!=r.cart){var n=r.cart.item.length-1,s=r.cart.attributes.paymentMethod,o=r.cart.attributes.offerID,i=(r.cart.item[n].productInfo.productID,r.cart.item[n].category.productType),l=r.cart.item[n].quantity,c=r.cart.item[n].price.basePrice,d=r.cart.item[n].price.currency,u=r.cart.item[n].price.taxRate,g=r.cart.item[n].price.priceWithTax,m=r.cart.item[n].linkedProduct[r.cart.item[n].linkedProduct.length-1].productInfo.totalPriceEur,p=r.cart.item[n].linkedProduct[r.cart.item[n].linkedProduct.length-1].productInfo.totalPriceLocal;t.eVar141="pm:"+(s||"not set"),t.eVar142="oid:"+(o||"not set"),t.currencyCode=d,c&&(a+="event480="+c+","),u&&(a+="event481="+u+","),g&&(a+="event482="+g+",")}if(null!=r.component){var v=r.component.length-1,b=r.component[v].componentInfo.componentID,f=r.component[v].componentInfo.componentName,_=r.component[v].category.primaryCategory,h=r.component[v].category.subCategory1,V=r.component[v].category.subCategory2,C=r.component[v].category.componentType,y=r.component[v].attributes.referringComponent,P=r.component[v].attributes.referringPlatform;t.eVar143="~cid:"+(b||"not set")+"~cn:"+(f||"not set"),t.eVar144="~pc:"+(_||"not set")+"~sc1:"+(h||"not set")+"~sc2:"+(V||"not set")+"~ct:"+(C||"not set"),t.eVar145="rc:"+(y||"not set")+"~rp:"+(P||"not set")}if(null!=r.dealer){var w=r.dealer.length-1,R=r.dealer[w].dealerInfo.dealerID,j=r.dealer[w].dealerInfo.dealerName,A=r.dealer[w].dealerInfo.outletID,T=r.dealer[w].attributes.solutionSpecific.BMWpay,O=r.dealer[w].attributes.linkedPage.pageInfo.pageID;r.dealer[w].attributes.linkedProduct[r.dealer[r.dealer.length-1].attributes.linkedProduct.length-1].productInfo.productID,t.eVar41=(j||"not set")+"|"+(R||"not set")+"_"+(A||"not set")+"_"+(T||"not set")}if(null!=r.page){O=r.page.pageInfo.pageID;var D=r.page.pageInfo.pageName,I=r.page.pageInfo.destinationURL,E=r.page.pageInfo.referringURL,S=(r.page.pageInfo.sysEnv,r.page.pageInfo.variant),k=r.page.pageInfo.version,L=r.page.pageInfo.language,x=r.page.pageInfo.geoRegion,N=(_=r.page.category.primaryCategory,h=r.page.category.subCategory1,V=r.page.category.subCategory2,r.page.category.pageType),F=(r.page.attributes.brand,r.page.attributes.currencyCode,r.page.attributes.preferredComChannel),M=r.page.attributes.checkoutID,q=r.page.attributes.leadTime,U=r.page.attributes.purchaseID,B=r.page.attributes.marketingConsent,H=r.page.attributes.solutionSpecific.deliveryMethodSelected,G=r.page.attributes.solutionSpecific.deliveryMethodAvailable,z=r.page.attributes.solutionSpecific.checkoutMethodsAvailable,W=r.page.attributes.solutionSpecific.paymentMethodsAvailable;-1!=F.indexOf("email")?F=F.replace("email","e_mail"):-1!=F.indexOf("phone")&&(F=F.replace("phone","p_hone")),-1!=B.indexOf("email")?B=B.replace("email","e_mail"):-1!=B.indexOf("phone")&&(B=B.replace("phone","p_hone")),t.eVar71="pid:"+(O||"not set")+"~vr:"+(S||"not set")+"~vn:"+(k||"not set")+"~pt:"+(N||"not set"),t.eVar4=I||"not set",t.eVar6=E||"not set",t.eVar7=t.prop7=(L||"not set")+"-"+(x||"not set"),t.prop46=_||"not set",t.prop47=h||"not set",t.prop48=V||"not set",t.eVar147="pcc:"+(F||"not set")+"~dms:"+(H||"not set"),t.eVar148="cid:"+(M||"not set"),t.eVar149="lt:"+(q||"not set"),t.eVar153="pcid:"+(U||"not set"),t.eVar155="mc:"+(B||"not set"),t.prop49=G||"not set",t.prop51=z||"not set",t.prop52=W||"not set",t.eVar2=D}if(null!=r.event){var K=r.event.length-1,Y=r.event[K].eventInfo.eventName,J=r.event[K].eventInfo.eventAction,X=r.event[K].eventInfo.type,Z=r.event[K].eventInfo.timeStamp,Q=r.event[K].eventInfo.effect,$=r.event[K].eventInfo.cause,ee=_satellite.getVar("ev_cat_primaryCategory"),te=(h=r.event[K].category.subCategory1,V=r.event[K].category.subCategory2,r.event[K].attributes.requestedURL,r.event[K].attributes.errorCode),ae=r.event[K].attributes.error.multipleCauseKey,re=r.event[K].attributes.error.multipleErrorKey;r.event[K].attributes.linkedProduct[r.event[K].attributes.linkedProduct.length-1].productInfo.productID,t.eVar16=t.prop16=(J||"not set")+"~"+(Y||"not set")+"~"+(f||"not set")+"~not set~"+(_satellite.getVar("URL")||"not set")+"~not set~"+(Q||"not set")+"~"+($||"not set")+"~not set",t.prop12=Z||"not set",t.eVar117=(Q||"not set")+"~"+($||"not set"),t.eVar156="tp:"+(X||"not set")+"~pc:"+(ee||"not set")+"~sc1:"+(h||"not set")+"~sc2:"+(V||"not set"),t.eVar157="ec:"+(te||"not set"),t.prop53=ae||"not set",t.prop54=re||"not set","error"!=Y&&-1==Q.indexOf("error")||(a+="event95,",t.eVar69=te+"~"+Q)}if(null!=r.product&&r.product.length>0){var ne=r.product.length-1,se=r.product[ne].attributes.modelName,oe=(r.product[ne].productInfo.productID,r.product[ne].productInfo.productName),ie=r.product[ne].productInfo.manufacturer,le=r.product[ne].productInfo.color,ce=(_=r.product[ne].category.primaryCategory,h=r.product[ne].category.subCategory1,i=r.product[ne].category.productType,r.product[ne].attributes.internalCode),de=r.product[ne].attributes.modelCode,ue=r.product[ne].attributes.productionYear,ge=r.product[ne].attributes.yearOfRegistration,me=r.product[ne].attributes.series,pe=r.product[ne].attributes.bodyType,ve=r.product[ne].attributes.fuelType,be=(r.product[ne].linkedProduct[r.product[ne].linkedProduct.length-1].productInfo.productID,ie+"-"+ce);t.eVar51="ps:Car~pi:"+(ce||"not set")+"~pn:"+(oe||"not set")+"~mc:"+(de||"not set")+"~se:"+(me||"not set")+"~bt:"+(pe||"not set")+"~yl:na~bp:na~op:na~tp:na~sp:na~mr:"+(ce||"not set")+"~co:not set~en:na~fu:"+(ve||"not set")+"~cu:"+d+"~ms:na",t.eVar124=(be||"not set")+"~"+(oe||"not set")+"~"+(ie||"not set")+"~"+(_||"not set")+"~"+(h||"not set")+"~"+(i||"not set")+"~"+(ce||"not set")+"~"+(de||"not set")+"~"+(se||"not set")+"~"+(ue||"not set")+"~"+(ge||"not set")+"~"+(me||"not set")+"~"+(le||"not set")+"~"+(pe||"not set")+"~"+(ve||"not set"),t.prop10=t.eVar10=ce||"not set",t.products=(i||"not set")+";"+(be||"not set")+";"+(l||"not set")+";"+(g||"not set")+";event483="+(m||"not set")+"|event484="+(p||"not set")+";eVar154= "+(u||"not set")+"%"}if(null!=r.user){var fe=r.user.length-1,_e=r.user[fe].profile[r.user[fe].profile.length-1].profileInfo.profileID,he=r.user[fe].profile[r.user[fe].profile.length-1].attributes.loggedInStatus;t.eVar158="prid:"+(_e||"not set"),t.eVar14="lo:"+(he||"not set")}a+="event91,","sales > dcs: order submit success"==Q&&(a+="purchase,",t.purchaseID=U),a=a.slice(0,-1),t.events=a,t.linkTrackEvents+="event480,event481,event482,event483,event484,event91,event95,purchase",t.linkTrackVars+=",eVar141,eVar142,eVar143,eVar144,eVar145,eVar41,eVar1,eVar2,eVar3,eVar10,eVar71,eVar72,eVar4,eVar6,eVar7,eVar147,eVar148,eVar149,eVar153,prop13,prop10,prop49,prop51,prop52,eVar16,prop16,eVar117,prop53,prop54,eVar153,eVar14,prop12,eVar51,eVar124,products,eVar154,eVar155,eVar156,eVar157,eVar158,eVar69,prop46,prop47,prop48,purchaseID"}catch(e){_satellite.logger.log("Error in DCR - All - AEM - AA - DCS",e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"DCS",linkType:"o"}}]},{id:"RL06e8d82ac2494d218d9f09c15da861e3",name:"TPT - IL - All Pages - TABOOLA",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - IL - All Pages - TABOOLA - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"IL"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.il",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC546f21ee59a24338ab46338ea86ff36d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLcd377208d9db441dae337ed5b28e249a",name:"TPT - Bahrain - AEM - Snapchat - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2b2eb5abc08b43fd9945c972e9c8e0f1-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL489595877d904734a8f99734777c0ee6",name:"TPT - Abudhabi - AEM - Doubleclick - iFrame RFO Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-abudhabi.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCbf8c765b0507499a91c528ffb428528f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe2fbda8685f84885a26a1c790750db30",name:"TPT - UA - AEM - Adwords - TDA Form - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa6f6d26cece74c0a97a2ebda8be7dbc2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa40a913691644ffdbdc10a4da8584452",name:"PLR - All Pages - Performance timing",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa3291216e4f1482881701454203db8d3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa32e640e356145069d6e0a27ce9f6b07",name:"TPT - Kuwait - Multiple - DoubleClick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT Kuwait - Multiple - DoubleClick - ar/en - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"KW"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kuwait.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC98b39412b19f436987860b9042e2f07b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd9fa3542c4ca4630a455292277e8dcbf",name:"TPT - MA - AEM - Adwords - Local Form TDA Submit Button - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3fa82a1ce4d14d37bf177caa108f75b0-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd052935be88f4c71a5f9af76cdb32e56",name:"TPT - Saudi - AEM - Doubleclick - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Saudi - Multiple - Programmatic - ar/en - floodlight - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-saudiarabia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC64a68a676451462e9d57a86492b254dd-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL87fe18fbbcc346dbae627c00f21bf3e7",name:"TPT - BY - AEM - Facebook - Multiple",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.by",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC51233e134a2c4af3ba43816c7c3c35a8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL738e74a979244c0ba9529ae6fc665daa",name:"TPT - Saudi - AEM - Snapchat - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-saudiarabia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCfb3026375e2b4103ab2655a2a03bcb96-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL47825003e6c94550a8d9a21261e3d1c0",name:"DCR - All - iFrame - AA - TDA Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),_satellite.getVar("topLevelDomain");var a="",r=(_satellite.getVar("pa_pag_pageName"),_satellite.getVar("navEvarForClicks")),n=_satellite.getVar("navEvarForClicks2"),s=(_satellite.getVar("pa_cat_primaryCategory"),_satellite.getVar("pa_cat_subCategory01"),_satellite.getVar("pr_att_mmdr")),o=_satellite.getVar("URLNoParam"),i=_satellite.getVar("SessionID"),l=_satellite.getVar("ev_cat_subCategory02"),c=(_satellite.getVar("ev_cat_subCategory04"),_satellite.getVar("ev_eve_eventName")),d=_satellite.getVar("ev_att_mmdr"),u=_satellite.getVar("ev_att_stepName");t.eVar16=r,t.eVar18=n,t.eVar45+="~rn:DCR - All - iFrame - AA - TDA Forms",t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var g="";g=t.eVar10=""!=d&&"mmdr"!=d?d:""!=s?s:"not set",t.eVar44=_satellite.getVar("nonTechMetaData");var m=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",p=_satellite.getVar("s_products_iFrame_v52"),v=_satellite.getVar("s_products_vco_v53"),b="";b+=";"+g+";1;"+m+";event112="+m+";eVar52="+p+",",t.eVar51=p,""!=(b+=v+",")&&(b=b.slice(0,-1),t.products=b);var f=r.split("~");t.prop16=f[1]+"~"+f[2]+"~"+f[5],a+="event91,";var _=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=_[0],t.prop2=_[1],t.prop3=_[2],"Form Start"===c)"start"!=window.TDA&&"www.bmw.nl/nl/ssl/aanvraag/proefrit.html"==o?(_satellite.logger.log("direct at step 1"),a+="event1:"+i+"TDA,",a+="event2:"+i+"TDA,",a+="event170,",a+="event9,",a+="event10:"+i+",",_satellite.logger.log(a),window.TDA="start"):"www.bmw.nl/nl/ssl/aanvraag/proefrit.html"!=o&&(a+="event1:"+i+"TDA,",a+="event2:"+i+"TDA,",a+="event170,",a+="event9,",a+="event10:"+i+","),t.eVar11="Local Form|TDA|"+l+"|Start|not set|"+u,t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start TDA",window.step1="set";else if(c.toLowerCase().startsWith("form step"))t.eVar11="Local Form|TDA|"+l+"|"+c+"|not set|"+u;else if("Form Success"===c){_satellite.getVar("functionList");var h=_satellite.getVar("ev_att_dealerName"),V=_satellite.getVar("ev_att_dealerID"),C=_satellite.getVar("ev_att_productName"),y=C.dtm_hashCode(),P=_satellite.getVar("ev_att_newsletterSelected");a+="event3:"+i+"TDA,",a+="event4:"+i+"TDA"+y+",",a+="event11,event171,",a+="event12:"+i+y+",","true"===P&&(a+="event188,event189,"),t.eVar11="Local Form|TDA|"+l+"|Finish|not set|"+u,t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),""!=h&&null!=h||(h="not set"),""!=V&&null!=V||(V="not set"),"not set"==h&&"not set"==V||(t.eVar13=h+"|"+V),t.eVar67=C,t.prop31="Finish TDA"}else"Local Form Interaction"===c?(a+="event138,event139,",t.eVar11="Local Form|TDA|"+l+"|Interaction|not set|"+u):"First Interaction"===c?(a+="event295,",t.eVar11="Local Form|TDA|"+l+"|First Interaction|not set|"+u):(_satellite.logger.info("DTM: Aborting AA call"),t.abort=!0);t.linkTrackVars+="eVar16,prop16,eVar11,prop1,prop2,prop3,prop30,prop31,eVar10,eVar13,eVar67,eVar41,eVar52,eVar44,eVar51,products",t.linkTrackEvents+="event91,event1,event2,event3,event4,event9,event10,event11,event12,event170,event171,event188,event189,event138,event139,event295",a=a.slice(0,-1),t.events+=a}catch(e){var w={from:"AA",type:"DCR",name:"TDA Forms"};_satellite.logger.error(e,w)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"TDA Form",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe9695d5e18004d03a4d28d127732572e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL04db78c142c44e198e7a578b9ab1a4f2",name:"TPT - KZ - AEM - Adwords - Local Form RFI - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"localform"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kz.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb8d66c939b7144f0916f52054ffd93c6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL47d5cb25c58043a68fda406d515aff06",name:"TPT - EG - AEM - Adwords - 1 Series Download Price List - EBR - p15[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'.cta > a[href="/content/dam/bmw/marketEG/bmw-eg_com/All%20models/brochure_2020_September/F40%20-%201%20Series%20CBU%20Pricelist.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-egypt.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/all-models/1-series/5-door/2019/bmw-1-series-inspire.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe2335a1e67cc4f71a03927d4842ab691-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc614c73d875840d0ad61fe6513b213ba",name:"DCR - All - NSC - AA - Local Forms RFO",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"local_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{
_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("hierarchyEvar").split("|");t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2"),t.eVar44=_satellite.getVar("nonTechMetaData");var n=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=n,t.eVar45+="~rn:DCR - All - NSC - AA - Local Forms RFO",t.eVar62=t.s_getLoadTime(),t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=r[0],t.prop2=r[1],t.prop3=r[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var s=_satellite.getVar("navEvarForPage").split("~");t.prop16=s[1]+"~"+s[2]+"~"+s[5],t.prop27="D=v3",a+="event91,","bmw.com.cn"==topLevelDomain&&(t.eVar64=_satellite.getVar("localCampaignVariable"));var o="",i=_satellite.getVar("ev_att_mmdr"),l=_satellite.getVar("pr_att_mmdr");o=""!=i&&"mmdr"!=i?i:""!=l?l:"not set";var c=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",d=_satellite.getVar("s_products_iFrame_v52"),u=_satellite.getVar("s_products_vco_v53"),g="";g+=";"+o+";1;"+c+";event112="+c+";eVar52="+d+",",t.eVar51=d,""!=(g+=u+",")&&(g=g.slice(0,-1),t.products=g),"Form Start"===_satellite.getVar("ev_eve_eventName")?(a+="event1:"+_satellite.getVar("SessionID")+"RFO,",a+="event2:"+_satellite.getVar("SessionID")+"RFO,",a+="event13,event172,",a+="event14:"+_satellite.getVar("SessionID")+",",t.eVar11="Local Form|RFO|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|not set",t.prop30="Start RFO"):"Form Success"===_satellite.getVar("ev_eve_eventName")?(a+="event3:"+_satellite.getVar("SessionID")+"RFO,",a+="event4:"+_satellite.getVar("SessionID")+"RFO"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",a+="event15,event173,",a+="event16:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar11="Local Form|RFO|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|not set",""!=_satellite.getVar("ev_att_dealerName")&&""!=_satellite.getVar("ev_att_dealerID")&&(t.eVar13=_satellite.getVar("ev_att_dealerName")+"|"+_satellite.getVar("ev_att_dealerID")),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFO"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|RFO|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|First Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|RFO|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":t.abort=!0,t.linkTrackVars+="eVar6,eVar16,eVar17,eVar45,eVar62,eVar64,eVar11,eVar10,eVar13,eVar67,prop1,prop2,prop3,prop4,prop6,prop7,prop15,prop16,prop27,prop30,prop31,eVar51,eVar52,products,eVar44",t.linkTrackEvents+="event91,event1,event2,event3,event4,event13,event14,event15,event16,event172,event173,event295",a=a.slice(0,-1),t.events+=a}catch(e){var m={from:"AA",type:"DCR",name:"Local Forms RFO"};_satellite.logger.error(e,m)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RL4db9d27e281c4bfcb1c7542f6460ec0c",name:"TPT - TR - AEM - TikTok - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tr",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCcb5d1f0ff0fe43ec83e61fd4a2939e53-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL163f5bb28c5247cdb27caf9af22650c1",name:"DCR - DLO State Standalone",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dlo_state_standalone"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("finalDataLayer"),_satellite.getVar("defaultVars");var a="",r=(_satellite.getVar("navEvarForClicks"),_satellite.getVar("navEvarForClicks2"),_satellite.getVar("ev_eve_eventName")),n=(_satellite.getVar("co_att_outletName"),_satellite.getVar("co_att_dealerID"),_satellite.getVar("co_att_outletID"),_satellite.getVar("SessionID"));if("Brand Selection"==r)a+="event82,";else if("Search Start"==r||"DLO Start"==r)a+="event50:"+n+document.location.hash.dtm_hashCode()+",event51,",t.eVar39=_satellite.getVar("ev_eve_brandName");else if("Inline Dealer Detail"==r||"Single Dealer Detail"==r||"Select Dealer"==r)a+="event54,event55,",t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.list1=_satellite.getVar("co_att_onsiteSearchResultsFilters").replace("[","").replace("]","").replace(/"/g,""),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType");else if("Route Start"==r);else if("Select Preferred Dealer"==r)a+="event85,",t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.list1=_satellite.getVar("co_att_onsiteSearchResultsFilters").replace("[","").replace("]","").replace(/"/g,""),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType");else if("Delete Preferred Dealer"==r)a+="event86,",t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.list1=_satellite.getVar("co_att_onsiteSearchResultsFilters").replace("[","").replace("]","").replace(/"/g,""),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType");else if("Route Detail"==r||"Dealer Interaction"==r){var s=_satellite.getVar("ev_eve_effect");"Contact Information Hide"!=s&&"Contact Information Show"!=s||(a+="event60,event61,"),"Plan Route"==s&&(a+="event89,");var o=s.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(s)?a+="event56,":null!=o&&(a+="event59,"),/^\d+\s\d+$/.test(s)&&(a+="event57,"),t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType")}else"DLO Errors"==r&&(a+="event95,",t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.list1=_satellite.getVar("co_att_onsiteSearchResultsFilters").replace("[","").replace("]","").replace(/"/g,""),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType"),t.eVar69=_satellite.getVar("ev_eve_eventError"));if(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),"DLO Online appointment"==s&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),a+="event121,event122,"),t.eVar45+="~rn:DLO State Standalone",t.eVar34="DLO: "+r,t.prop12=_satellite.getVar("ev_eve_timestamp"),"DLO Search"==r||"Search Result"==r){var i=_satellite.getVar("co_att_onsiteSearchResultsFilters");t.eVar43=_satellite.getVar("co_att_onSiteSearchTerm")+"|"+_satellite.getVar("co_att_onsiteSearchResults"),t.eVar39=_satellite.getVar("ev_eve_brandName"),t.eVar57=_satellite.getVar("co_att_onsiteSearchResultsFilters"),t.list1=_satellite.getVar("co_att_onsiteSearchResultsFilters").replace("[","").replace("]","").replace(/"/g,""),t.eVar42=_satellite.getVar("co_att_co_att_onsiteSearchResultsType"),a+="event83,",i.indexOf("Location")>-1?a+="event52,":i.indexOf("Dealer")>-1&&(a+="event53,")}t.eVar41=_satellite.getVar("ev_att_dealerName_DLOnew")+"|"+_satellite.getVar("ev_att_dealerID_DLOnew"),a+="event91,",t.linkTrackVars+="eVar16,prop16,prop12,eVar41,eVar42,eVar43,eVar69,eVar39,eVar57,eVar34,list1",t.linkTrackEvents+="event91,event82,event89,event95,event54,event55,event52,event53,event83,event85,event86,event50,event51,event56,event57,event58,event59,event60,event61,event121,event122",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"dlo state standalone",linkType:"o"}}]},{id:"RL3de6b6a33e17403ea14850ad17e0ad2f",name:"DCR - All - iFrame - AA - Campaign Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_campaign"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),_satellite.getVar("topLevelDomain");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - All - iFrame - AA - Campaign Forms",t.eVar44=_satellite.getVar("nonTechMetaData");var r="",n=_satellite.getVar("ev_att_mmdr"),s=_satellite.getVar("pr_att_mmdr");r=""!=n&&"mmdr"!=n?n:""!=s?s:"not set";var o=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",i=_satellite.getVar("s_products_iFrame_v52"),l=_satellite.getVar("s_products_vco_v53"),c="";c+=";"+r+";1;"+o+";event112="+o+";eVar52="+i+",",t.eVar51=i,""!=(c+=l+",")&&(c=c.slice(0,-1),t.products=c);var d=_satellite.getVar("navEvarForClicks").split("~");t.prop16=d[1]+"~"+d[2]+"~"+d[5],a+="event91,";var u=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],"Form Start"===_satellite.getVar("ev_eve_eventName"))a+="event156,event178,",a+="event1:"+_satellite.getVar("SessionID")+"CAF,",t.eVar11="Local Form|Campaign Form|Campaign|Start|not set",t.prop30="Start Campaign Form";else if("Form Success"===_satellite.getVar("ev_eve_eventName")){a+="event157,event179,",a+="event3:"+_satellite.getVar("SessionID")+"CAF,";var g=_satellite.getVar("ev_att_dealerName"),m=_satellite.getVar("ev_att_dealerID");t.eVar11="Local Form|Campaign Form|Campaign|Finish|not set",""!=g&&null!=g||(g="not set"),""!=m&&null!=m||(m="not set"),"not set"==g&&"not set"==m||(t.eVar13=g+"|"+m),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish Campaign Form"}else"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|Campaign Form|Campaign|First Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|Campaign Form|Campaign|"+_satellite.getVar("ev_eve_eventName")+"|not set":t.abort=!0;t.linkTrackVars+="eVar11,eVar13,eVar16,eVar67,prop1,prop2,prop3,prop16,prop30,prop31,eVar51,eVar52,products,eVar44",t.linkTrackEvents+="event91,event1,event3,event156,event157,event178,event179,event295",a=a.slice(0,-1),t.events+=a}catch(e){var p={from:"AA",type:"DCR",name:"Campaign Forms"};_satellite.logger.error(e,p)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"campaign forms",linkType:"o"}}]},{id:"RL148127d89308475d9789338c632ecd0c",name:"TPT - Bahrain - Multiple - Doubleclick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Bahrain - Multiple - Programmatic - floodlight - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"BH"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8993dd601616495998634d6a3496ca2b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLde3ed437683f4d67985ed40c07669ac1",name:"TPT - UA - AEM - Facebook - stock-locator - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"stock-locator"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC6b453985aeae4ddeb46f395f8786731f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL07b67e85c8444c2291b6cb7e9df4cb9c",name:"TPT - TR - AEM - Engageya - Multiple - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tr",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"tesekkurler.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC010491e4b8f94e238dbeceb7cfb613b8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2348390bcad54da0a7b49ce5385ebef6",name:"TPT - ME - AEM - Doubleclick - TDA iFrame Scrape Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb8618d30055f4b43a9eec2acdb27ef41-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2fe1c0788950405fbd7f35026ee26bd9",name:"TPT - HK - Multiple - Yahoo",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - HK - Multiple - Yahoo - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"HK"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmwhk.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9d87d11aad5b4324b67018a2074ba0a8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLece05ffa459c4ce48cee1816331c3407",name:"TPT - Oman - AEM - Twitter - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC17839f5dc7fd405d9e7db2b429bde56a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc51fe82bc9bc48d9bcd2b0ade3b305c0",name:"TPT - KZ - AEM - Facebook - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.kz",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2e420ab4575a4d11ab33da91e3d059c5-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6477b8a3b2244748bb23e2f2d73e3945",name:"TPT - IL - AEM - SimpleChat - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.il",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc40dc88e798c496896f7258bbae89111-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLcafc725beb6c40289f4f44f57de89bb3",name:"TPT - Voli ME - AEM - Adwords - All pages - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-voli.me",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3ce17b6b70ff42819b7c7d8410f11c0a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLcd972676ab834d399903e0e7b47a9ec0",name:"TPT - Dubai - AEM - LinkedIn - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-dubai.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC1d8bb58e09b94bf1be7b69911a450c54-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL97d3741a9ed04d578b16a6b5f427d0f6",name:"DCR - Online TDA Start",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"online_tda_start"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("ev_eve_effect"),r=_satellite.getVar("ev_eve_cause"),n=_satellite.getVar("ev_eve_eventAction"),s=_satellite.getVar("ev_eve_eventName"),o=_satellite.getVar("ev_att_componentName"),i=_satellite.getVar("ev_eve_target"),l=_satellite.getVar("ev_eve_element"),c=_satellite.getVar("ev_att_mmdr_NBO"),d=_satellite.getVar("ev_eve_timestamp");""!=d&&null!=d||(d="Not Set"),""!=c&&null!=c||(c="Not Set"),""!=l&&null!=l||(l="Not Set"),""!=i&&null!=i||(i="Not Set"),""!=o&&null!=o||(o="Not Set"),""!=s&&null!=s||(s="Not Set"),""!=n&&null!=n||(n="Not Set"),""!=a&&null!=a||(a="Not Set"),""!=r&&null!=r||(r="Not Set");var u=_satellite.getVar("hierarchyEvar").split("|");t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],t.eVar16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop16=n+"~"+s+"~"+o+"~"+o+"~"+_satellite.getVar("URL")+"~"+i+"~"+a+"~"+r+"~"+l,t.prop12=d,t.eVar112=n+"~"+s,t.eVar8=t.eVar10=t.prop8=t.prop10=c,t.eVar117=a+"~"+r,t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var g=_satellite.getVar("ev_att_mmdr")||"not set";t.eVar10=g,t.eVar11="Online TDA Start"===n?"Central Form|Online TDA|tda_online_booking|Start|not set|not set":"Central Form|Online TDA|tda_online_booking|"+n+"|not set|not set",t.eVar52=_satellite.getVar("s_products_iFrame_v52"),t.eVar44=_satellite.getVar("nonTechMetaData"),t.events+="event91,event283,event284",t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12,eVar41,eVar112,eVar117,eVar11,eVar52,eVar44",t.linkTrackEvents+="event91,event283,event284"}catch(e){_satellite.logger.error("Error in DCR : Start - "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Online TDA Start",linkType:"o"}}]},{id:"RL4cf03729bc0b46f6b959d88cc6b87381",name:"TPT - VN - All pages - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - VN - All pages - Facebook - Retrigerring",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"VN"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.vn",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2cb4ee5d5d86487e8007db4a5139da44-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL947273b54f574b949e9ccfb1e950926d",name:"TPT - KZ - AEM - Facebook - iFrame RFI Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfi"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.kz",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC753985c10f5740e6a2858ab916dc1c01-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5746f502f345462d9176e5636630d7bb",name:"TPT - ME - AEM - Twitter - TDA iFrame Scrape Form - DCR - p15r[l]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2fc582aa65b14697859de620d42123a7-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLfabd228526ff444ebeb12775b15b19f2",name:"TPT - TR - AEM - Facebook - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tr",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3a9ecb0f272e47949661c7dc322b63f2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6de0f19059354635b2991bf354167a9e",name:"TPT - CO - AEM - All pages - DMP Tags - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - CO - Multiple - DoubleClick",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.co",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCaf1d25419a254a6d8f204871ad28ed72-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe7e148e73c7d4c839e84720f2396bfeb",name:"TPT - CO - AEM - Cloudfront - All pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.co",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC172a7bc350104a35905b6fedccc99024-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLcb8ee4715de9461ca9ba531b9e14bba0",name:"HT - All Models - Page Top ",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/de/neufahrzeuge.html"},{value:"/nl/modellen.html"}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'try {\n    function allModelsClickTrackig() {\n        var elem = document.querySelectorAll(\'.cars\');\n        if (elem.length == 0) {\n            setTimeout(allModelsClickTrackig, 50);\n        } else {\n            for (var i = 0; i < elem.length; i++) {\n                elem[i].addEventListener(\'click\', function(e) {\n                    var target = e.target;\n                    var href, hasTargetUrl = false;\n                    _satellite.logger.log(\'All Models Target-\', target);\n\n                    if (target.getAttribute(\'title\') == "Konfigurieren") {\n                        _satellite.logger.log(\'All Models - Config Button Clicked\');\n                        _satellite.setVar("modelClickType", "Configurator Link");\n                        href = target.href;\n                        hasTargetUrl = true;\n                    } else if (target.getAttribute(\'title\') == "Mehr erfahren") {\n                        _satellite.logger.log(\'All Models - Learn More Button Clicked\');\n                        _satellite.setVar("modelClickType", "Learn More Link");\n                        href = target.href;\n                        hasTargetUrl = true;\n                    } else if (target.getAttribute(\'class\') == "ds2-model-card--image" || target.parentNode.getAttribute(\'class\') == "ds2-model-card--image" || (target.parentNode.parentNode && target.parentNode.parentNode.getAttribute(\'class\') == "ds2-model-card--image") || (target.parentNode.parentNode && target.parentNode.parentNode.parentNode && target.parentNode.parentNode.parentNode.getAttribute(\'class\') == "ds2-model-card--image")) {\n                        _satellite.logger.log(\'All Models - Img Clicked\');\n                        _satellite.setVar("modelClickType", "Image");\n\n                        if (target.tagName == \'A\') {\n                            href = target.href;\n                        } else if (target.parentNode.tagName == \'A\') {\n                            href = target.parentNode.href;\n                        } else if (target.parentNode.parentNode.tagName == \'A\') {\n                            href = target.parentNode.parentNode.href;\n                        }\n                    }\n\n                    if (hasTargetUrl) {\n                        setCookieData(target);\n                    }\n\n                    if (href) {\n                        _satellite.track("allModelsClickTracking");\n                        //delay the navigation\n                        if (typeof e.preventDefault == "function") {\n                            e.preventDefault();\n                            setTimeout(function() {\n                                _satellite.logger.log(\'All Models - Window navigation started\');\n                                window.location = href;\n                            }, 350);\n                        }\n                    } else {\n                        _satellite.logger.log(\'All Models - Clicked Elsewhere\');\n                    }\n\n                }, {\n                    capture: true\n                });\n            };\n        }\n    }\n    setTimeout(allModelsClickTrackig, 50);\n\n    function setCookieData(target) {\n        var cookieName = \'pageNavData\';\n        var cookieValue = target.getAttribute(\'data-tracking-event\') || "Not Available";\n        var date = new Date();\n        date.setHours(date.getHours() + 12);\n        var topLevelDomain = _satellite.getVar("topLevelDomain");\n        document.cookie = cookieName + "=" + cookieValue + ";expires=" + date + ";domain=" + topLevelDomain + ";path=/";\n    }\n\n} catch (e) {\n    _satellite.logger.log(e);\n}',language:"javascript"}}]},{id:"RLae0ef04b3b72442f84ed1713c8ed7871",name:"TPT - KZ - AEM - Facebook - iFrame TDA Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.kz",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb8b7c167cc6748208f5adcda417743aa-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL05372eadf16a4e50bd30b6c3f439a753",name:"DCR - GeoLoc Province Selection- Continue",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"select_province"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.eVar16=t.eVar16.replace(/province/gi,"region"),
_satellite.getVar("navEvarForClicks").split("~"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=t.prop16.replace(/province/gi,"region"),t.eVar45+="~rn:GeoLoc Province Selection- Continue",a+="event91,event998,event999,",t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar34,eVar45,events",t.linkTrackEvents+="event91",a=a.slice(0,-1),t.events=a}catch(e){_satellite.logger.log(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RLb57ae10b187f4db4a5a088bc1a018f2e",name:"TPT - MA - iFrame Campaign TDA - Adwords DCR  - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_campaign"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0b90f6f2dff74e8a894bfdee8b3a4ffe-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL7bea19a83d6b48bda28ce598677f5a3a",name:"DCR - All - NSC - AA - Local Forms RFC",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"local_forms_rfc"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("hierarchyEvar").split("|");t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2"),t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var n="",s=_satellite.getVar("ev_att_mmdr"),o=_satellite.getVar("pr_att_mmdr");n=t.eVar10=""!=s&&"mmdr"!=s?s:""!=o?o:"not set",t.eVar44=_satellite.getVar("nonTechMetaData");var i=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",l=_satellite.getVar("s_products_iFrame_v52"),c=_satellite.getVar("s_products_vco_v53"),d="";d+=";"+n+";1;"+i+";event112="+i+";eVar52="+l+",",t.eVar51=l,""!=(d+=c+",")&&(d=d.slice(0,-1),t.products=d);var u=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=u,t.eVar45+="~rn:DCR - All - NSC - AA - Local Forms RFC",t.eVar62=t.s_getLoadTime(),t.t(),t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=r[0],t.prop2=r[1],t.prop3=r[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var g=_satellite.getVar("navEvarForPage").split("~");t.prop16=g[1]+"~"+g[2]+"~"+g[5],t.prop27="D=v3",a+="event91,",t.campaign=_satellite.getVar("campaignParameter"),"Form Start"===_satellite.getVar("ev_eve_eventName")?(a+="event158,event180,",a+="event1:"+_satellite.getVar("SessionID")+"RFC,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|not set",t.prop30="Start RFC"):"Form Success"===_satellite.getVar("ev_eve_eventName")?(a+="event159,event181,",a+="event3:"+_satellite.getVar("SessionID")+"RFC,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|not set",t.prop31="Finish RFC"):"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|First Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":(_satellite.logger.log("aborting in the rule: local_forms_rfc"),t.abort=!0),t.linkTrackVars+="eVar6,eVar16,eVar17,eVar62,eVar64,eVar11,prop1,prop2,prop3,prop4,eVar6,eVar7,eVar15,eVar16,prop27,prop30,prop31,eVar10,eVar41,eVar44,eVar52,eVar51,products",t.linkTrackEvents+="event91,event158,event159,event1,event3,event180,event181,event295",a=a.slice(0,-1),t.events+=a}catch(e){var m={from:"AA",type:"DCR",name:"Local Forms RFC"};_satellite.logger.error(e,m)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLe0b07d1f1714483eba7122fea585d765",name:"TPT - CL - AEM - Linkedin - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - CL - AEM - Linkedin - All Pages - PLR",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"CL"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.cl",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC281a2a6f7f17404e9895d30560afaa70-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL370fcdc9811c4cf0a3f41e12c0930a52",name:"TPT - RS - AEM - Adwords - TDA - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC07283ccf909f4bbda34f45311467df13-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL621cbf9628e2409983475d10f09d4faf",name:"TPT - Dubai - AEM - Doubleclick - iFrame RFO Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-dubai.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC484638f2f82c46c8a1f0cb01601c5b7f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL752a10f6a62142848c1720020bf9af4c",name:"TPT - IL - All Pages - OUTBRAIN",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - IL - All Pages - OUTBRAIN - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"IL"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.il",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCcce70cc4bee54d66afe8b8565c8476d6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL77fdadbfe1e84445a479272d22cce1a6",name:"TPT - Oman - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"OM"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCcf374cf18b7a4ab0b79ba23ca6d88529-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL089a66af0554490184f0e6519a40508a",name:"TPT - AT- Multiple - Adwords",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"AT"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.at",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4a567497ff064b068325e39a94d1f577-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCead80dfae2664920ae2a46ba21365296-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLef83d1b484c34157881c4bc41306ac3c",name:"TPT - Oman - iFrame - RFO Forms DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"OM"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCaab33875ec9142d0a05a73ed3833387a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL63b0b1781b2841fcba07512f4f75452a",name:"TPT - RS - AEM - Facebook - Multiple - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC75914265a510449ca5d15653270103a5-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9d24205f499d49b684a6bff7d01e6595",name:"TPT - RS - AEM - Adwords - stock-locator - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"stock-locator"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC00acfdfff36545c4b45e6ead7e39b125-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL20e9cbe6b68348a2924d0fc50f07f7ee",name:"TPT - KZ - AEM - Adwords - iframe_forms_rfo - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kz.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9a83254a26894d9b950d2e157d13074c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdf845ad83e2745de8c0ecb456264bbaf",name:"TPT - EG - AEM - Adwords - Multiple - PLR - p15[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - EG - Multiple - Google Site Tag - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-egypt.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC88b02b7ea1ec47df99c121e507df283c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLcdbb986b01e1473893d744a90759a746",name:"TPT - TN - AEM - Adwords - stock-locator - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"stock-locator"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-tunisia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC21c8202f728e4436b9e8f60389808ccf-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb8a50930e756411fa1f5f283d27aa252",name:"TPT - UA - AEM - Adwords - PriceList Download - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"outbound_click"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2455f300972c495b9b797b70c9e61cf2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe718459d2aac41329ad8d7be2b7236cf",name:"DCR - Configuration Overwrite",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"overwrite_configuration"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.setVar("useVCOPage",!0),_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("pr_att_mmdr");t.eVar16="Open Layer~Confirm Overwrite Configuration~VCO module~Not available~"+_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01")+"~Not available",t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:Confirm Overwrite Configuration";var n=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");t.eVar63=n;var s=t.eVar16.split("~");t.prop16=s[1]+"~"+s[2]+"~"+s[5],a+="event91,event27,event209,event28:"+_satellite.getVar("SessionID")+_satellite.getVar("pr_att_mmdr")+",";var o=_satellite.getVar("pr_pro_productID").split("::").join("|");o=o.substring(o.indexOf("|")+1),t.eVar9=_satellite.getVar("pr_att_mmdr"),t.eVar10=_satellite.getVar("pr_att_mmdr"),t.eVar34="VCO: Confirm Overwrite Configuration",t.eVar36=o,""==r&&(r="not set");var i="",l="";i+=";"+r+";1;"+_satellite.getVar("pr_att_sellingPriceTotal")+";"+l+";eVar52="+_satellite.getVar("s_products_vco_v52")+",",t.eVar51=_satellite.getVar("s_products_vco_v52"),""!=(i+=_satellite.getVar("s_products_vco_v53")+",")&&(i=i.slice(0,-1),t.products=i),_satellite.setVar("useVCOPage",!1),t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar36,eVar34,eVar51,eVar52,eVar53,eVar58",t.linkTrackEvents+="event91,event76,event77,event78,event203,event204,event210,event211,event212,event213,event214,event215,event216,event217,event218,event219,event220,event221,event222,event223,event224,event225,event112,event27,event28,event209",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"overwrite configuration",linkType:"o"}}]},{id:"RL01deae4e8d0e418fbae50bb190ebc082",name:"TPT - ME - Multiple - Facebook - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - ME - Multiple - Facebook ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC09be3e3d1b3140aca4ef797ab8394abe-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL1586d72be06e4086b13d680acbab8240",name:"TPT - Oman - AEM - Facebook - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd7d3939bbce942f0bff33383eb0de8c3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL82a1410400ba4434a2b16ebd86b095da",name:"TPT - Oman - AEM - Facebook - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT re-trigger :  TPT - Oman - Multiple - Facebook ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-oman.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf1d1d6b91beb47de861d117a72b20ef2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL13f585f6c1754c96bb6ff98eb7e99be6",name:"TPT - PH - AEM - Facebook - TDA Form Submit - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.ph",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/en/ssl/test-drive.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2173ac6a3d574d23bce7297d1422ef85-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL30ba07093aec4b039bcdf01ecef9f3f4",name:"TPT - KZ - AEM - Adwords - Multiple - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kz.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0fdea977483c4caba06c167cf0bd371f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLf05ae3a91b53487fac0517456c936d9e",name:"TPT - ME - AEM - Doubleclick - RFO iFrame Scrape Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7d26272ad2984977828075c5b74980d3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6798c0daeb164312b3d7653ee492877f",name:"PLR - All - AEM - AA - DCS Event Listener",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger",(function(t){t.detail&&t.detail.processing==_satellite.getVar("consentMap").AdobeAnalytics&&e()}))}catch(e){_satellite.logger.error("PLR - All - AEM - AA - DCS Event Listener",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){try{var e=["bmw.de","bmw.it","bmw.be","bmw.fr","bmw.es","bmw.nl","bmw.lu"],t=_satellite.getVar("topLevelDomain");if(e.indexOf(t)>-1)return!0}catch(e){_satellite.logger.log("Error in PLR - All - AEM - AA - DCS Event Listener",e)}}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"try{\n   window.addEventListener('dispatch_event',function(e){\n     _satellite.logger.log(\"Khubruy event fired for event DCS\");\n     _satellite.track('dcs');\n   });\n   window.addEventListener('dispatch_pageload',function(e){\n     _satellite.logger.log(\"Khubruy event fired for pageload DCS\");\n     _satellite.track('dcs_pv');\n   });\n}catch(e){\n  _satellite.logger.log(\"Error in PLR - All - AEM - AA - DCS Event Listener\",e);\n}",language:"javascript"}}]},{id:"RL9f38799103cc4549b0d9e066fc0736fb",name:"TPT - UA - All Pages - Currency",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - UA - All Pages - Currency - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC76b78dc68c31438ca2bb9d1b92d39c63-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL56ca7372dae149e2a9af09c4eb00c49a",name:"PLR - ActivateScrollTracking",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:0}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return"bmw.ru"==_satellite.getVar("topLevelDomain")}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC79c6710ab42f4cbba8b127e39d09a4ba-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL325302602517435b8117ddfbc3c810ec",name:"TPT - Abudhabi - Multiple - DoubleClick",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Abudhabi - Ramadan Finance/Offerhub - ar/en - floodlight - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"AE"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-abudhabi.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCbe573d08c6924ec7bfec09535a1588ce-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL147e10316ab9432395113eb246ccdb07",name:"TPT - MA - AEM - Adwords - Local Form ROI Submit - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"localform"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4a9899d99239411abd307c98f691dfca-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5c91be48b9174410ab6207a3b7ca5099",name:"TPT - TN - AEM - Adwords - All Pages - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-tunisia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC12a71ac2c3294dac8055c6096aac8026-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL95f5be5da5cc4022a5e3c8dff8d3ae0e",name:"TPT - Saudi - iFrame RFO Forms - Doubleclick DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"SA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-saudiarabia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC471d6f76010447bf8fcfd66f8b3c7cc4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL08d9abcc930b400f952e8f493443ab06",name:"TPT - TW - AEM - Adwords - Conversion - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tw",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8777212b6f424a57816ee848b222c3dc-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL54cddeab7f2f4f23a84ec5e14d710dc2",name:"DCR\xa0-\xa0All\xa0-\xa0iFrame\xa0-\xa0AA\xa0-\xa0PRD\xa0Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_prd"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR\xa0-\xa0All\xa0-\xa0iFrame\xa0-\xa0AA\xa0-\xa0PRD\xa0Forms",t.eVar44=_satellite.getVar("nonTechMetaData");var r=_satellite.getVar("navEvarForClicks").split("~");t.prop16=r[1]+"~"+r[2]+"~"+r[5],a+="event91,";var n="",s=_satellite.getVar("ev_att_mmdr"),o=_satellite.getVar("pr_att_mmdr");n=""!=s&&"mmdr"!=s?s:""!=o?o:"not set";var i=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",l=_satellite.getVar("s_products_iFrame_v52"),c=_satellite.getVar("s_products_vco_v53"),d="";d+=";"+n+";1;"+i+";event112="+i+";eVar52="+l+",",t.eVar51=l,""!=(d+=c+",")&&(d=d.slice(0,-1),t.products=d);var u=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],"Form Start"===_satellite.getVar("ev_eve_eventName"))a+="event156,event178,",a+="event1:"+_satellite.getVar("SessionID")+"CAF,",a+="event2:"+_satellite.getVar("SessionID")+"CAF,",t.eVar11="Local Form|Campaign Form|Campaign|Start|not set",t.prop30="Start Campaign Form";else if("Local Form Interaction"===_satellite.getVar("ev_eve_eventName"))a+="event138,event139,",t.eVar11="Local Form|Campaign Form|Campaign|Interaction|not set";else if("Form Success"===_satellite.getVar("ev_eve_eventName")){a+="event157,event179,",a+="event3:"+_satellite.getVar("SessionID")+"CAF,",a+="event4:"+_satellite.getVar("SessionID")+"CAF,";var g=_satellite.getVar("ev_att_dealerName"),m=_satellite.getVar("ev_att_dealerID");t.eVar11="Local Form|Campaign Form|Campaign|Finish|not set",""!=g&&null!=g||(g="not set"),""!=m&&null!=m||(m="not set"),"not set"==g&&"not set"==m||(t.eVar13=g+"|"+m),t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish Campaign Form"}else"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|Campaign Form|Campaign|First Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|Campaign Form|Campaign|"+_satellite.getVar("ev_eve_eventName")+"|not set":t.abort=!0;t.linkTrackVars+="eVar10,eVar11,eVar13,eVar16,eVar67,prop16,prop1,prop2,prop3,prop30,prop31,eVar51,eVar52,products,eVar44",t.linkTrackEvents+="event91,event1,event2,event3,event4,event138,event139,event156,event157,event178,event179,event295",a=a.slice(0,-1),t.events+=a}catch(e){var p={from:"AA",type:"DCR",name:"PRD Forms"};_satellite.logger.error(e,p)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RL1a1fcced66824c02aef9eb7936bbc1a2",name:"TPT - LT - Multiple - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"LT"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.lt",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC6de053b45c8a4c30958c16e5cce662b3-source.min.js",
language:"javascript",isExternal:!0}}]},{id:"RLa13521d346284ddbad2592677739f6ed",name:"DCR - Ignition One RFC Form",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"Ignite_One_RFC"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("hierarchyEvar").split("|"),n=_satellite.getVar("ev_cat_subCategory02").dtm_capitalize();t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2");var s=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=s,t.eVar45+="~rn:Local Forms RFC",t.eVar62=t.s_getLoadTime(),t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=r[0],t.prop2=r[1],t.prop3=r[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var o=navEvarForPage.split("~");t.prop16=o[1]+"~"+o[2]+"~"+o[5],t.prop27="D=v3",a+="event91,",t.campaign=_satellite.getVar("campaignParameter"),"bmw.com.cn"==topLevelDomain&&(t.eVar64=_satellite.getVar("localCampaignVariable")),"contact"===_satellite.getVar("finalDataLayer").page.pageInfo.pageName?(a+="event158,event180,event77,",a+="event1:"+_satellite.getVar("SessionID")+"RFC,",t.eVar11="I/O Form|RFC|"+n+"|Start|"+_satellite.getVar("ev_cat_subCategory04"),t.prop30="Start I/O RFC"):(a+="event159,event181,event78,",a+="event3:"+_satellite.getVar("SessionID")+"RFC,",t.eVar11="I/O Form|RFC|"+n+"|Finish|"+_satellite.getVar("ev_cat_subCategory04"),t.prop31="Finish I/O Form RFC"),t.linkTrackVars+="eVar6,eVar16,eVar17,eVar62,eVar64,eVar11,prop1,prop2,prop3,prop4,eVar6,eVar7,eVar15,eVar16,prop27,prop30,prop31",t.linkTrackEvents+="event91,event158,event159,event1,event3,event180,event181",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.log(e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLba89fbb1dac242429c8cc4c2ca7ac7a1",name:"TPT - MD - AEM - Facebook - iFrame TDA Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.md",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc5dc7760d8984c49b937b57a16490196-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL88deea170af24fe5875309dcaec9d0d6",name:"TPT - GP - AEM - Facebook - Multiple - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.gp",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd091895f9ef840c0ad1be918b0b86ade-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5861f2ff251044a88d15c41f1ee3c92a",name:"TPT - AZ - AEM - Facebook - Local Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.az",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9134b1fc0f6143d7b53d7edecf57e79a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8b959131fc5346798fb9453816b888e6",name:"DCR - MYCE Error",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"my_ce_error"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),t.eVar10=t.prop10=_satellite.getVar("ev_att_mmdr")||"Not Set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.eVar117=_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_effect"),t.eVar69=_satellite.getVar("ev_eve_effect"),t.events="event91,event95",t.linkTrackEvents="event91,event95",t.linkTrackVars+="eVar10,eVar16,prop10,prop16,eVar69,eVar117,events,"}catch(e){_satellite.logger.error("Erroe in my ce interaction "+e),t.abort=!0}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}},{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}}]},{id:"RL618a0ed7d8f3428ba323aa671bfb9852",name:"DCR - Need Analyzer Step",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"need_analyzer_step"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{if(_satellite.getVar("pa_att_template").indexOf("needanalyzer")>-1){_satellite.getVar("defaultVars");var a="",r=digitals2.tracking.api.getPageObject(digitals2.tracking.api.getCurrentPageIndex()),n=_satellite.getVar("pa_pag_referringUrl"),s=_satellite.getVar("server"),o=_satellite.getVar("jcrPathLevel1"),i=_satellite.getVar("hierarchy"),l=_satellite.getVar("hierarchyEvar"),c=l.split("|"),d=_satellite.getVar("pageName"),u=r.page.pageInfo.pageName,g=r.page.attributes.previousQuestion,m=r.page.attributes.previousAnswers,p=_satellite.getVar("pr_att_mmdr");""!=p&&null!=p||(p="not set");var v=_satellite.getVar("pr_att_sellingPriceTotal");""!=v&&null!=v||(v="not set");var b="",f="";t.eVar2=d,t.eVar6=n,t.eVar15=l,t.eVar34="Need Analyzer: "+u,t.eVar45+="~rn:Need Analyzer Step",t.eVar101=g+" || "+m;var _=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");if(t.eVar17=_,t.eVar62="Virtual Page",t.pageName=d,t.server=s,t.channel=o,t.referrer=document.referrer,t.hier1=i,t.prop1=c[0],t.prop2=c[1],t.prop3=c[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv"),t.prop27="D=v3",t.prop69="Stage II",t.prop70="D=mid","Start Page"==u&&(a+="event430,"),"My Perfect Match"==u){var h=_satellite.getVar("s_products_vco_v52");f+=";"+p+";1;"+v+";"+b+";eVar52="+h+",",t.eVar51=h,a+="event432,",""!=f&&(f=f.slice(0,-1),t.products=f)}""!=r.page.attributes.previousAnswers&&null!=r.page.attributes.previousAnswers&&(a+="event431,"),a=a.slice(0,-1),t.events=a}}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLfc313a3087bc4a0bbf012da7e8724709",name:"TPT - UA - AEM - Adwords - Multiple Page - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - EG - Multiple - Google Site Tag - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5f3fb8745a584b298b6dcb933f180443-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL457e452e10cc4be9985d1314860f805d",name:"TPT - UA - AEM - Adwords - RFO - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/uk/ssl/contact.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC1d795cc73d9c4353afc40971569b8683-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL31c437b9e5c84c2893a588fd5ceee92b",name:"TPT - MA - AEM - GTagDC - Dealer - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/topics/fascination-bmw/bmw-dealers.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7f8970b40f704a63ac543314a825f8ff-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc973590124724546bddb054bdcf6f126",name:"W - Exit Link",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"span.tw-pl-400",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC30a15ffd8f4d42749ea600e2265c2d5e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL3ad03dc9574741919d53d717f4aef22d",name:"TPT - LT - AEM - TawkChat - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw.lt",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3ee11085788b4c99b0429321fbb1122b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLea0230793486496ebaff37f349239a84",name:"TPT - RS - AEM - GTagDC - Configurator RFO - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0fab3ffe95f34656b6053b687ae8afe8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL16fb0cc115f74d8f867ca5c738e0fbf4",name:"TPT - JM - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Chile - All pages - Adwords",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"JM"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmwjamaica.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4f7e12e1e9364f118560d68e76479784-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa567557be87f4f0c9bb68fcc2dbcb2cf",name:"TPT - RE - AEM - Facebook - PriceList Download - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"download"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.re",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd54a8195ce94400984eb0b7b4eefb7db-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5385ff3e458845ab9ee408664effb0c5",name:"TPT - PH - AEM - Facebook - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.ph",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3022f36836344fedb9304c2664021a66-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL441706e422434a06917c70befc3e9fbd",name:"DCR - Ignition One Form Impressions",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"IgnitionOneFormImpressions"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{t.clearVars();var a=_satellite.getVar("adobeRSID"),r=_satellite.getVar("topLevelDomain");t.account=a,t.trackingServer="bmwag.d3.sc.omtrdc.net",t.cookieDomainPeriods=r.split(".").length,t.events="event998,",null!=_satellite.cookie.get("bmwdtm_hq_sid")&&"bmw.se"==r&&(t.events+="event991,"),t.eVar1=_satellite.getVar("hierarchyEvar"),t.eVar2=_satellite.getVar("pageName"),t.eVar3=_satellite.getVar("pa_pag_pageTitle"),t.eVar4=_satellite.getVar("URL"),t.eVar7=_satellite.getVar("pa_pag_language"),t.eVar12=_satellite.getVar("pathName"),t.eVar14=_satellite.getVar("userMetaData"),t.eVar11="I/O Forms",t.events+="event76,",t.eVar44=_satellite.getVar("nonTechMetaData")+"~"+_satellite.getVar("nonTechMetaDataEvarAddon"),t.eVar45=_satellite.getVar("techMetaData"),1!=_satellite.getVar("noInteractionCount")?t.eVar48="+1":_satellite.setVar("noInteractionCount",!1),t.eVar63=_satellite.getVar("URLNoParam"),t.server=_satellite.getVar("server");var n=_satellite.getVar("ev_eve_timestamp");t.prop12=n,t.prop13=_satellite.getVar("nonTechMetaData"),t.prop69="Stage II",t.prop70="D=mid",_satellite.getVar("pr_att_mmdr")&&"all-models"===_satellite.getVar("jcrPathLevel1")&&(t.eVar8=_satellite.getVar("pr_att_mmdr"),t.eVar10=_satellite.getVar("pr_att_mmdr"));var s=t.getTimeParting("n");split=s.split("|");var o=-(new Date).getTimezoneOffset()/60,i=t.getTimeParting("n",o);t.prop14=split[0]+"~"+i.split("|")[0];try{"bmw.com.tr"!=r&&"bmw.co.kr"!=r&&"bmw.ca"!=r&&"bmw-m.com"!=r||(_satellite.getVar("performance timing sender"),t.eVar35=window.perfTime.URL,t.eVar32=window.perfTime.timesString,void 0!==window.perfTime.events&&(t.events+=window.perfTime.events+","))}catch(e){_satellite.logger.error(e)}t.linkTrackVars="eVar1,eVar2,eVar3,eVar4,eVar7,eVar8,eVar10,eVar12,eVar14,eVar18,eVar32,eVar35,eVar44,eVar45,eVar48,eVar63,server,prop12,prop13,prop14,prop69,prop70,events,",t.events+="event999,",t.linkTrackEvents="event998,event999,event235,event236,event237,event992,event991,"}catch(e){t.events="event997,",t.linkTrackEvents="event997,",_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RL9c1c8333c49847fc90073aa86d658d04",name:"TPT - LV - AEM - Facebook - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.lv",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8921fb3885bb4d6a863253635bf14ee7-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL00e1250a8a584246bf61de59a3065194",name:"TPT - IS - AEM - Facebook - PriceList Download - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"outbound_click"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.is",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa66b3a7bb1c249df91b655e6f12ba453-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL80d6913802d4404680a523de493162f5",name:"TPT - MQ - AEM - Facebook - Local Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.mq",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2a4fd5089e634c3a855d6bafd9dde7ef-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2430ef50db5c4959b5404520c9d0d216",name:"TPT - TW - AEM - Facebook - Multiple - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tw",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCdc5b287789aa4a89a01dd78164ebc86a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9e044b07b7364726be921aaca058fb02",name:"DCR - All - NSC - AA - Central Form TDA",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"tda"},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"TDA"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals",caseInsensitive:!0},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("navEvarForClicks2"),n=digitals2.tracking.api.getPageObject(digitals2.tracking.api.getCurrentPageIndex());if(null!=n.event&&n.event.length>0){var s=n.event[n.event.length-1].eventInfo.eventAction,o=n.event[n.event.length-1].eventInfo.eventName,i=n.component[n.component.length-1].componentInfo.componentName;if("tda"!=i)try{i=n.event[n.event.length-1].attributes.linkedComponent[n.event[n.event.length-1].attributes.linkedComponent.length-1].componentInfo.componentName}catch(e){i=n.event[n.event.length-1].attributes.linkedComponent[n.event[n.event.length-1].attributes.linkedComponent.length-1].tdaComponent.componentInfo.componentName}var l=_satellite.getVar("URL"),c=n.event[n.event.length-1].attributes.requestedURL,d=n.event[n.event.length-1].eventInfo.effect,u=n.event[n.event.length-1].eventInfo.cause,g=n.event[n.event.length-1].eventInfo.timestamp||n.event[n.event.length-1].eventInfo.timeStamp;n.event[n.event.length-1].category.primaryCategory,n.event[n.event.length-1].category.subCategory1,t.eVar16=s+"~"+o+"~"+i+"~na~"+l+"~"+c+"~"+d+"~"+u,t.prop16="D=v16",t.eVar117=d+"~"+u}var m=(n.product[n.product.length-1]||[]).series||"not set",p=((n.product[n.product.length-1]||[]).productInfo||"").productID||(n.product[n.product.length-1]||[]).productID||"not set",v=((n.product[n.product.length-1]||[]).productInfo||"").productName||(n.product[n.product.length-1]||[]).productName||"not set",b=((n.product[n.product.length-1]||[]).productInfo||"").manufacturer||(n.product[n.product.length-1]||[]).manufacturer||"not set",f=((n.product[n.product.length-1]||[]).category||"").primaryCategory||"not set",_=((n.product[n.product.length-1]||[]).category||"").subCategory1||"not set",h=((n.product[n.product.length-1]||[]).category||"").productType||(n.product[n.product.length-1]||[]).productType||"not set",V=(n.product[n.product.length-1]||[]).fuelType||"not set",C=(n.product[n.product.length-1]||[]).motorization||"not set",y=((n.product[n.product.length-1]||[]).attributes||"").modelName||"not set",P=((n.product[n.product.length-1]||[]).attributes||"").modelCode||"not set",w=((n.product[n.product.length-1]||[]).attributes||"").productionYear||"not set",R=((n.product[n.product.length-1]||[]).attributes||"").yearOfRegistration||"not set",j=((n.product[n.product.length-1]||[]).attributes||"").mmdr||"not set";t.prop10=t.eVar10=j;var A=t.eVar51="ps:Car~pi:"+p+"~pn:"+v+"~mc:na~se:"+m+"~bt:na~yl:na~bp:na~op:na~tp:na~sp:na~mr:"+j+"~co:not set~en:"+C+"~fu:"+V+"~cu:na~ms:na~hv:na";t.eVar124=p+"~"+v+"~"+b+"~"+f+"~"+_+"~"+h+"~"+j+"~"+P+"~"+y+"~"+w+"~"+R+"~"+m;var T=(n.product[n.product.length-1]||[]).dealerID||"not set",O=(n.product[n.product.length-1]||[]).dealerName||"not set",D=(n.product[n.product.length-1]||[]).outletID||"not set";t.eVar41=t.eVar13=O+"|"+T+"_"+D,"nsc > form started"==d?(a+="event1:"+_satellite.getVar("SessionID")+"TDA,",a+="event2:"+_satellite.getVar("SessionID")+"TDA"+p+",",a+="event9,event170,",a+="event10:"+_satellite.getVar("SessionID")+p+",",t.eVar11="Central Form|TDA|Generic|Start|not set",t.prop30="Start TDA",t.linkTrackVars+=",eVar11,prop30,",t.linkTrackEvents+="event1,event2,event9,event10,event170,"):"nsc > form finish intention"==d?(t.eVar11="Central Form|TDA|Generic|Finish Intention|not set",t.linkTrackVars+=",eVar11,"):"nsc > form finished"==d?(a+="event3:"+_satellite.getVar("SessionID")+"TDA,",a+="event4:"+_satellite.getVar("SessionID")+"TDA"+p+",",a+="event11,event171,",a+="event12:"+_satellite.getVar("SessionID")+p+",",t.eVar11="Central Form|TDA|Generic|Finish|not set",t.prop31="Finish TDA",t.linkTrackVars+=",eVar11,prop31,",t.linkTrackEvents+="event3,event4,event11,event12,event171,"):-1!=(d||"").indexOf("error")?(a+="event95,",t.eVar69=n.event[n.event.length-1].attributes.errorCode||"not set",t.linkTrackVars+=",eVar69,",t.linkTrackEvents+="event95,"):t.abort=!0,t.prop12=g,t.eVar6=document.referrer,t.prop7="D=v7",t.eVar18=r,t.eVar45+="~rn:DE - NSC - AA - Central Form TDA";var I=_satellite.getVar("hierarchyEvar").split("|");t.prop1=I[0],t.prop2=I[1],t.prop3=I[2],a+="event91,",t.linkTrackEvents+="event91,";var E=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",S=_satellite.getVar("s_products_vco_v53");""==(j=_satellite.getVar("pr_att_mmdr"))&&(j="not set");var k="";k+=";"+j+";1;"+E+";event112="+E+";eVar52="+A+",",""!=(k+=S+",")&&(k=k.slice(0,-1),t.products=k),t.linkTrackVars+="eVar52,products,",t.linkTrackVars+="eVar4,eVar6,eVar7,eVar10,eVar13,eVar16,eVar18,eVar41,eVar44,eVar45,eVar51,eVar69,eVar117,eVar124,prop1,prop2,prop3,prop7,prop10,prop12,prop16,prop14,prop69,prop70",a=a.slice(0,-1),t.events+=a}catch(e){_satellite.logger.error("Error in DCR - All - NSC - AA - Central Form TDA - "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Central Form - TDA",linkType:"o"}}]},{id:"RL591be06a8da8454f9561e2aef30fa062",name:"DCR - All - iFrame - AA - RFC Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfc"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),_satellite.getVar("topLevelDomain");var a="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - All - iFrame - AA - RFC Forms",t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var r="",n=_satellite.getVar("ev_att_mmdr"),s=_satellite.getVar("pr_att_mmdr");r=t.eVar10=""!=n&&"mmdr"!=n?n:""!=s?s:"not set",t.eVar44=_satellite.getVar("nonTechMetaData");var o=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",i=_satellite.getVar("s_products_iFrame_v52"),l=_satellite.getVar("s_products_vco_v53"),c="";c+=";"+r+";1;"+o+";event112="+o+";eVar52="+i+",",t.eVar51=i,""!=(c+=l+",")&&(c=c.slice(0,-1),t.products=c);var d=_satellite.getVar("navEvarForClicks").split("~");t.prop16=d[1]+"~"+d[2]+"~"+d[5],a+="event91,";var u=_satellite.getVar("hierarchyEvar").split("|");t.prop1=u[0],t.prop2=u[1],t.prop3=u[2],"Form Start"===_satellite.getVar("ev_eve_eventName")?(a+="event158,event180,",a+="event1:"+_satellite.getVar("SessionID")+"RFC,",a+="event2:"+_satellite.getVar("SessionID")+"RFC,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start RFC"):"Form Success"===_satellite.getVar("ev_eve_eventName")?(a+="event159,event181,",a+="event3:"+_satellite.getVar("SessionID")+"RFC,",a+="event4:"+_satellite.getVar("SessionID")+"RFC,","true"===_satellite.getVar("ev_att_newsletterSelected")&&(a+="event188,event189,"),t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|Finish|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFC"):"Local Form Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event138,event139,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|Interaction|not set"):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":"First Interaction"===_satellite.getVar("ev_eve_eventName")?(a+="event295,",t.eVar11="Local Form|RFC|"+_satellite.getVar("ev_cat_subCategory02")+"|First Interaction|not set"):t.abort=!0,t.linkTrackVars+="eVar16,prop1,prop2,prop3,prop16,eVar10,eVar11,eVar41,eVar67,prop30,prop31,eVar44,eVar52,eVar51,products",t.linkTrackEvents+="event91,event1,event2,event3,event4,event158,event159,event180,event181,event188,event189,event138,event139,event295",a=a.slice(0,-1),t.events+=a}catch(e){var g={from:"AA",type:"DCR",name:"RFC Forms"};_satellite.logger.error(e,g)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"RFC Form",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa5c02e74c715432586e1d8490503d064-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd3a5673d5e3847a5b4a193b16c687639",name:"TPT - MK - AEM - Facebook - PriceList Download - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"download"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.mk",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4a65e701aa44486a8e72f61c0da2c478-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLfbbdc9a40f7a4dc98e6d74de28ca4202",name:"DCR - All - NSC - AA - Adobe Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"adobe form"},ruleOrder:50}],conditions:[],actions:[{modulePath:"bmw-group-utility-kit/extension-package-src/lib/actions/takeSnapshot.js",settings:{takeSnapshot:null}},{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("snapshotDL"),r=(a.get("event.-1.eventInfo.eventName"),a.get("event.-1.eventInfo.type")),n=(a.get("event.-1.eventInfo.eventAction"),a.get("event.-1.eventInfo.effect"),""),s=_satellite.getVar("hierarchyEvar").split("|");t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2"),t.eVar44=_satellite.getVar("nonTechMetaData");var o=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=o,t.eVar62=t.s_getLoadTime(),t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=s[0],t.prop2=s[1],t.prop3=s[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var i=_satellite.getVar("navEvarForPage").split("~");t.prop16=i[1]+"~"+i[2]+"~"+i[5],t.prop27="D=v3",n+="event91,";var l="",c=_satellite.getVar("ev_att_mmdr"),d=_satellite.getVar("pr_att_mmdr");l=""!=c&&"mmdr"!=c?c:""!=d?d:"not set";var u=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",g=_satellite.getVar("s_products_iFrame_v52"),m=_satellite.getVar("s_products_vco_v53"),p="";p+=";"+l+";1;"+u+";event112="+u+";eVar52="+g+",",t.eVar51=g,""!=(p+=m+",")&&(p=p.slice(0,-1),t.products=p),"form"===_satellite.getVar("ev_eve_eventName")&&"tda"===r&&(t.eVar45+="~rn:DCR - All - NSC - AA - Adobe Forms TDA",
"nsc > form started"===_satellite.getVar("ev_eve_effect")?(n+="event1:"+_satellite.getVar("SessionID")+"TDA,",n+="event2:"+_satellite.getVar("SessionID")+"TDA,",n+="event9,event170,",n+="event10:"+_satellite.getVar("SessionID")+",",t.eVar11="Adobe Form|TDA|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start TDA"):"nsc > form finished"===_satellite.getVar("ev_eve_effect")?(n+="event3:"+_satellite.getVar("SessionID")+"TDA,",n+="event4:"+_satellite.getVar("SessionID")+"TDA"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",n+="event11,event171,",n+="event12:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar11="Adobe Form|TDA|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|not set",""!=_satellite.getVar("ev_att_dealerName")&&""!=_satellite.getVar("ev_att_dealerID")&&(t.eVar13=_satellite.getVar("ev_att_dealerName")+"|"+_satellite.getVar("ev_att_dealerID")),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish TDA"):"nsc > first form interaction"===_satellite.getVar("ev_eve_effect")?(n+="event295,",t.eVar11="Adobe Form|TDA|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|First Interaction|not set"):t.eVar11="Adobe Form|TDA|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|"+_satellite.getVar("ev_eve_eventName")+"|not set"),"form"===_satellite.getVar("ev_eve_eventName")&&"rfo"===r&&(t.eVar45+="~rn:DCR - All - NSC - AA - Adobe Forms RFO","nsc > form started"===_satellite.getVar("ev_eve_effect")?(n+="event1:"+_satellite.getVar("SessionID")+"RFO,",n+="event2:"+_satellite.getVar("SessionID")+"RFO,",n+="event9,event170,",n+="event10:"+_satellite.getVar("SessionID")+",",t.eVar11="Adobe Form|RFO|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start RFO"):"nsc > form finished"===_satellite.getVar("ev_eve_effect")?(n+="event3:"+_satellite.getVar("SessionID")+"RFO,",n+="event4:"+_satellite.getVar("SessionID")+"RFO"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",n+="event11,event171,",n+="event12:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar11="Adobe Form|RFO|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|not set",""!=_satellite.getVar("ev_att_dealerName")&&""!=_satellite.getVar("ev_att_dealerID")&&(t.eVar13=_satellite.getVar("ev_att_dealerName")+"|"+_satellite.getVar("ev_att_dealerID")),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFO"):"nsc > first form interaction"===_satellite.getVar("ev_eve_effect")?(n+="event295,",t.eVar11="Adobe Form|RFO|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|First Interaction|not set"):t.eVar11="Adobe Form|RFO|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|"+_satellite.getVar("ev_eve_eventName")+"|not set"),"form"===_satellite.getVar("ev_eve_eventName")&&"rfi"===r&&(t.eVar45+="~rn:DCR - All - NSC - AA - Adobe Forms RFI","nsc > form started"===_satellite.getVar("ev_eve_effect")?(n+="event1:"+_satellite.getVar("SessionID")+"RFI,",n+="event2:"+_satellite.getVar("SessionID")+"RFI,",n+="event9,event170,",n+="event10:"+_satellite.getVar("SessionID")+",",t.eVar11="Adobe Form|RFI|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start RFI"):"nsc > form finished"===_satellite.getVar("ev_eve_effect")?(n+="event3:"+_satellite.getVar("SessionID")+"RFI,",n+="event4:"+_satellite.getVar("SessionID")+"RFI"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",n+="event11,event171,",n+="event12:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar11="Adobe Form|RFI|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|not set",""!=_satellite.getVar("ev_att_dealerName")&&""!=_satellite.getVar("ev_att_dealerID")&&(t.eVar13=_satellite.getVar("ev_att_dealerName")+"|"+_satellite.getVar("ev_att_dealerID")),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFI"):"nsc > first form interaction"===_satellite.getVar("ev_eve_effect")?(n+="event295,",t.eVar11="Adobe Form|RFI|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|First Interaction|not set"):t.eVar11="Adobe Form|RFI|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|"+_satellite.getVar("ev_eve_eventName")+"|not set"),"form"===_satellite.getVar("ev_eve_eventName")&&"rfc"===r&&(t.eVar45+="~rn:DCR - All - NSC - AA - Adobe Forms RFC","nsc > form started"===_satellite.getVar("ev_eve_effect")?(n+="event1:"+_satellite.getVar("SessionID")+"RFC,",n+="event2:"+_satellite.getVar("SessionID")+"RFC,",n+="event9,event170,",n+="event10:"+_satellite.getVar("SessionID")+",",t.eVar11="Adobe Form|RFC|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start RFC"):"nsc > form finished"===_satellite.getVar("ev_eve_effect")?(n+="event3:"+_satellite.getVar("SessionID")+"RFC,",n+="event4:"+_satellite.getVar("SessionID")+"RFC"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",n+="event11,event171,",n+="event12:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar11="Adobe Form|RFC|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|Finish|not set",""!=_satellite.getVar("ev_att_dealerName")&&""!=_satellite.getVar("ev_att_dealerID")&&(t.eVar13=_satellite.getVar("ev_att_dealerName")+"|"+_satellite.getVar("ev_att_dealerID")),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFC"):"nsc > first form interaction"===_satellite.getVar("ev_eve_effect")?(n+="event295,",t.eVar11="Adobe Form|RFC|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|First Interaction|not set"):t.eVar11="Adobe Form|RFC|"+_satellite.getVar("ev_cat_subCategory02").dtm_capitalize()+"|"+_satellite.getVar("ev_eve_eventName")+"|not set"),n=n.slice(0,-1),t.events+=n,t.linkTrackEvents+="event91,event1,event2,event3,event4,event9,event10,event11,event12,event170,event171,event295",t.linkTrackVars+="eVar6,eVar16,eVar17,eVar45,eVar62,eVar64,eVar11,eVar10,eVar13,eVar67,prop1,prop2,prop3,prop4,prop6,prop7,prop15,prop16,prop27,prop30,prop31,eVar51,eVar52,products,eVar44"}catch(e){var v={from:"AA",type:"DCR",name:"Adobe Forms"};_satellite.logger.error(e,v)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Adobe Forms",linkType:"o"}},{modulePath:"bmw-group-utility-kit/extension-package-src/lib/actions/discardSnapshot.js",settings:{discardSnapshot:null}}]},{id:"RL4d13a77a681048299390dd05db001676",name:"TPT - MA - AEM - Adwords - Price List DownLoad - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"li.downloadlink.pagelink a",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCfa4b17562ea547ef875899d1cb2fbe12-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLf49eb6f1b0ac45858c47305cd04f5903",name:"DCR - Search Simulated Page",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"search_simulated_page"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){if("true"==localStorage.getItem("sdsat_debug")){var a=window.digitals2.tracking.api.getCurrentPageIndex(),r=window.digitals2.tracking.api.getPageObject(a);if(r.component){var n="Number of Components: "+r.component.length,s="Page Name: "+r.page.pageInfo.pageName;_satellite.logger.log("Data Layer API Timing Test (DirectCall Triggered):"),_satellite.logger.log(n),_satellite.logger.log(s)}else _satellite.logger.log("Data Layer API Timing Test (DirectCall Triggered):"),_satellite.logger.log("No Data Layer / Components available.")}try{var o="",i=_satellite.getVar("finalDataLayer").component,l=_satellite.getVar("hierarchyEvar").split("|"),c=_satellite.getVar("topLevelDomain");_satellite.getVar("defaultVars"),t.campaign=_satellite.getVar("campaignParameter"),t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar15=_satellite.getVar("hierarchyEvar");var d=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");if(t.eVar17=d,t.eVar45+="~rn:Search Simulated Page",t.eVar47="+1",t.eVar62="Virtual Page",t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=l[0],t.prop2=l[1],t.prop3=l[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv"),t.prop27="D=v3",o+="event91,","bmw.com.cn"==c&&(t.eVar64=_satellite.getVar("localCampaignVariable")),void 0!==i){for(var u="false",g="SATELLITE: Search Results Page Load Variables set triggered by _satellite.track",m=0;m<i.length;m++)if(i[m].attributes&&i[m].attributes.onsiteSearch&&"General"===i[m].attributes.onsiteSearch){u="true";break}"true"==u&&(t.prop21=i[m].attributes.onsiteSearchTerm,t.eVar22=i[m].attributes.onsiteSearchTerm+"|"+i[m].attributes.onsiteSearchResults+"|GSA",o+="event47,")}if(_satellite.getVar("tempSearchTerm")==t.prop21){var p=_satellite.getVar("navEvarForClicks");t.eVar16=p;var v=p.split("~");t.prop16=v[1]+"~"+v[2]+"~"+v[5]}else t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2"),v=_satellite.getVar("navEvarForPage").split("~"),t.prop16=v[1]+"~"+v[2]+"~"+v[5];if("uxn_main_navigation"==_satellite.getVar("ev_att_componentName")){var b=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),f=b.split("~");t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar16=b,t.prop16=f[1]+"~"+f[2]+"~"+f[5]}_satellite.setVar("tempSearchTerm",t.prop21),"Contact bar"==v[2]?o+="event45,event46,":"Main navigation"==v[2]?o+="event49,":-1!=v[2].indexOf("teaser")&&(o+="event44,"),o=o.slice(0,-1),t.events+=o,"true"==localStorage.getItem("sdsat_debug")&&(_satellite.logger.log(g),_satellite.logger.log("removed direct call rule from pageload_datalayer_ready"))}catch(e){_satellite.logger.error('Error DCR Rule "Search Simulated Page" : '+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RL349156de3e2b45e69b1b1c9659b042d1",name:"DCR - Go To Dealer Website",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"go_to"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("co_att_outletName")||"Not available",n=_satellite.getVar("co_att_dealerID")||"Not available";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:Go To Dealer Website";var s=_satellite.getVar("navEvarForClicks").split("~");if(t.prop16=s[1]+"~"+s[2]+"~"+s[5],"VCO"===_satellite.getVar("pa_cat_primaryCategory")){t.eVar9=_satellite.getVar("pr_att_mmdr"),t.eVar10=_satellite.getVar("pr_att_mmdr");var o=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");t.eVar63=o,t.eVar46=_satellite.getVar("pa_cat_subCategory01")+"|"+_satellite.getVar("pa_pag_pageName")}_satellite.getVar("pa_att_template").indexOf("/templates/dealerlocator")>-1&&(t.eVar41=r+"|"+n,a+="event59,event60,event61,event196,"),a+="event91,",t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar46,eVar63,eVar41",t.linkTrackEvents+="event91,event59,event60,event61,event196",a=a.slice(0,-1),t.events=a}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"go to dealer website",linkType:"o"}}]},{id:"RL9522b7a0387c4c568444d83a002c6351",name:"TPT - ME - AEM - Linkedin - Multiple - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - ME - AEM - Doubleclick - Multiple - PLR",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa944e399b6a54504932f30389d62eea6-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC62c1215334ea423cb376cf73b8563c2a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLea52af5954b7472abd242acbb4963280",name:"TPT - TN - AEM - Adwords - Outbound Click - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"outbound_click"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-tunisia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc8bf3c5b84394e3ab49912bd1237b2ef-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9e31df6760e34fb2a5f879a44a16ce2f",name:"TPT - Middle East - Multiple - facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Middle East - Multiple - facebook - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0655d7081f2d49c1819004dcaf8f19b2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL47e8cbe2596d4fcd9440d8f79db4425f",name:"TPT - KZ - AEM - Adwords - Local Form RFO - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"localform"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kz.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC039cac40c23a465388bb86b81603a4b2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6e4872b93868489390c770a563c40ca2",name:"TPT - Bahrain - AEM - Facebook - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Bahrain - Multiple - facebook - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3830bbb026644a7e86ca020aa3e94c8e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL66388615620e4791bd9c8fc2d0ca2e7e",name:"TPT - RS - AEM - Adwords -  RFC - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfc"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCba8bfff2cda34bb9b430f3d0d5dc6d8a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL905daa97615b4bcfa305f543f9e2478d",name:"TPT - MA - AEM - Adwords - Local Form ROI Submit - DCR copy - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"localform"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5eb38a770bd04824b0bfc66e82c236bc-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd1c748fa162c464ca203adc4b2eb5b1b",name:"TPT - ME - Register now button EN - Doubleclick EBR",events:[{modulePath:"core/src/lib/events/click.js",settings:{anchorDelay:3e3,elementSelector:"a",elementProperties:[{name:"title",value:"Register now",valueIsRegex:!0}],bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/en/local-content/joyunleashed.html",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf177c9cb31754213b1b2bf76dac71466-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLed86cd56e3ef4af39f0d5a3d82af0f78",name:"TPT - UA - AEM - Adwords - Local Form TDA - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"localform"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf25ef561754e4a539827f005151d4152-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8e5a24861b124b6e8c976ac8a10000eb",name:"TPT - Qatar - AEM - Facebook - iFrame RFO Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-qatar.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC939140a42fbd4bd596b3ca8d5fab33b8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL82616885d95c498f97084e0433f2d9ce",name:"TPT - MA - AEM - Adwords - Series 3 Tariff Brochure - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'div.show-for-large-up > ul > li:nth-child(2) > a[href="/content/dam/bmw/marketB4R1/bmw_ma/all-models/pricelists/THE-3_oct2020.pdf.asset.1603713678146.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/fr/all-models/3-series/sedan/2018/bmw-serie-3-berline-apercu.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC60a9441ce11943c0991cd544de41a39e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLf516f190b32f4929a7b1dc973b575ee8",name:"TPT - RS - AEM - Facebook - PriceList Download - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"download"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5f11d183c3c84cf88ae1ecdbf7b5a150-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL57e808db06ba477b83810cb394bfcc29",name:"TPT - UA - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe90236bbcf194d84875f008e9399b3c6-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC71e7f8a9a3564c4d998b84cdbb23531b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLae11f297eccf4fb5a5dfd148bbc6e07e",name:"TPT - RS - AEM - Facebook - stock-locator - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"stock-locator"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb08ccb4619d645089125107414b7306c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6f14fe52468a41d49caf5dced71215a4",name:"TPT - Dubai- AEM - Facebook - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&(console.log("This got retrigger maybe because of HASH"),e())}))}catch(e){_satellite.logger.error("PLR: FB Pixel ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-dubai.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCaceb8c63646f46a3b7af71d477c7ff77-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb5700c5669594bb289adb06c756da0ea",name:"TPT - RE - AEM - Facebook - Multiple - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.re",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa8e86162fd34432381cd7b0b2fcde46c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL3c38a956e72644c4af2f8b9fbe79d919",name:"TPT - UA - AEM - Facebook - Multiple - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC6877695c56af41e6b21ed3e49c07df04-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCbb7c335955724919b9f4d42b67d6f9b4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc32c69eaaba24bd992b32e2b344986b7",name:"TPT - GT - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - GT - All Pages - Adwords - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"GT"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.gt",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3e6cf879828b431ab0113d777ab28236-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC37f59d944345443398d5ec62205358c8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL278f4157350740218426963844c3b7e5",name:"TPT - Oman - AEM - Snapchat - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Dubai - Multiple - Twitter",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-oman.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7e4b420bebc24d7ba755b475ce97e5fd-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6bbf4ba0a02a49be86f61e674e654215",name:"TPT - MA - AEM - Adwords - Stock Locator Button - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"div.tw-w-1\\/4.tw-hidden.md\\:tw-flex > button",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/fr/stocklocator.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4fafbb0fe23b4113b14a474e356ddb3e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbbe0eabdf5a84b7e806bd7dcf8da8292",name:"TPT - RS - AEM - Adwords - RFO - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},
ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa6b09ad611394f37bb8bfc1e211f24e0-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL0f7f4bab300940728548e4a2d81bd372",name:"W - MyBMW error messages",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"#loginform > div > div > ul > li.small-12.medium-6.columns.s-order-1.ng-scope > a > span",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC90228260997b4104ad2dd08510c373c6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe34530e0621441d8ac5f70ffd5ac5410",name:"TPT - TW - AEM - Adwords - Iframe Forms TDA - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tw",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9b04f67904794485926a8c77feef040c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd2b234ae25a8464794f8bc45d6faf2de",name:"TPT - MA - AEM - Adwords - Series 2 Tariff Brochure - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'div.show-for-large-up > ul > li:nth-child(2) > a[href="/content/dam/bmw/marketB4R1/bmw_ma/all-models/pricelists/THE-2%20GRAN%20COUPE_oct2020.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/fr/all-models/2-series/gran-coupe/2019/bmw-serie-2-gran-coupe-apercu.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC82ddf1605edd40208778e6b523f5f168-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLfd419efd200f4b33ae7097f9378f4e02",name:"TPT - MA - AEM - Facebook - PriceList Download - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"download"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCaea3625c9dd341899d6fc6742fc5b87d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLfa9de1ac9375445facbad4885354e633",name:"TPT - UA - AEM - Adwords - Local Form RFO - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"localform"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCaeaa63acdc3f4a848c465322197a3f34-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdfb24acbd81643d8a5fa406d77b4deb3",name:"TPT - TN - AEM - Adwords - Local Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-tunisia.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCcfb9848d73614b3799dff113b2485a2d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLed5f1fb1a2a34e1b8afa7f6bd361b063",name:"TPT - UA - AEM - Doubleclick - iFrame TDA Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd6d42586e4f64f37bfbfbcac93a77c17-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL3cdd96ac2a314167a1121fbf7b1ccf50",name:"TPT - MA - AEM - Adwords - Series 1 Tariff Brochure - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'div.show-for-large-up > ul > li:nth-child(2) > a[href="/content/dam/bmw/marketB4R1/bmw_ma/all-models/pricelists/THE-1_oct2020.pdf.asset.1603713676328.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/content/bmw/marketB4R1/bmw_ma/fr_MA/all-models/1-series/5-door/2019/inspire.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC57d34eb31ad84970bcde47789449d1d7-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLf05077d2ec2b417aabf5b79415c9867d",name:"TPT - EG - AEM - Adwords - 3 Series Download Price List - EBR - p15[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'.cta > a[href="/content/dam/bmw/marketEG/bmw-eg_com/All%20models/brochure_2020_September/G20%20-%203%20Series%20CBU%20Pricelist.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-egypt.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/all-models/3-series/sedan/2018/bmw-3-series-sedan-highlights.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8ef2fb8fc8324e7da11e745eed2dbbb1-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9bcc2473f6554cb5923dd927ec1edb90",name:"DCR - Outbound Click",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"outbound_click"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{var a=_satellite.getVar("topLevelDomain");"trgovec.bmw"!==a&&"testnavoznja.bmw"!==a||(t.abort=!0),_satellite.getVar("defaultVars");var r="",n=""==_satellite.getVar("ev_eve_eventAction")?"Not set":_satellite.getVar("ev_eve_eventAction"),s=""==_satellite.getVar("ev_eve_eventName")?"Not set":_satellite.getVar("ev_eve_eventName"),o=""==_satellite.getVar("ev_att_componentName")?"Not set":_satellite.getVar("ev_att_componentName"),i=(""==_satellite.getVar("ev_att_componentHeadline")||_satellite.getVar("ev_att_componentHeadline"),""==_satellite.getVar("ev_eve_target")?"Not set":_satellite.getVar("ev_eve_target")),l=""==_satellite.getVar("ev_eve_effect")?"Not set":_satellite.getVar("ev_eve_effect"),c=""==_satellite.getVar("ev_eve_cause")?"Not set":_satellite.getVar("ev_eve_cause"),d=""==_satellite.getVar("ev_eve_element")?"Not set":_satellite.getVar("ev_eve_element");"Stage teaser"==o.dtm_capitalize().dtm_readable()?t.eVar16=n+"~"+s+"~"+o.dtm_capitalize().dtm_readable()+"~"+c+"~"+_satellite.getVar("URLNoParam")+"~"+i+"~"+l+"~"+c+"~"+d:t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:Outbound click";var u=_satellite.getVar("navEvarForClicks").split("~");if(t.prop16="D=v16","Share"==_satellite.getVar("ev_eve_eventAction")&&(r+="event41,event42,"),"VCO"===_satellite.getVar("pa_cat_primaryCategory")){t.eVar9=_satellite.getVar("pr_att_mmdr"),t.eVar10=_satellite.getVar("pr_att_mmdr");var g=_satellite.getVar("URLNoParam")+"#/"+_satellite.getVar("pa_cat_subCategory01");t.eVar63=g,t.eVar34="VCO: Outbound click",t.eVar46=_satellite.getVar("pa_cat_subCategory01")+"|"+_satellite.getVar("pa_pag_pageName")}"Contact bar"==u[2]?r+="event45,event46,":"Main navigation"==u[2]?r+="event49,":-1!=u[2].indexOf("teaser")&&(r+="event44,"),"Open layer"==_satellite.getVar("ev_eve_eventAction")&&(t.abort=!0),"NSC Lead"==_satellite.getVar("ev_cat_subCategory01")&&"outbound_click"==_satellite.getVar("ev_eve_eventAction")&&(r+="event410,"),_satellite.getVar("ICP_link")&&_satellite.getVar("ICP_link").indexOf("icp=")>-1&&(t.eVar60=_satellite.getVar("ICP_link").split("icp=")[1]||""),r+="event91,event196,",t.linkTrackVars+="eVar16,prop16,eVar9,eVar10,eVar46,eVar34,eVar11,eVar68,eVar60",t.linkTrackEvents+="event91,event196,event41,event42,event45,event46,event49,event44,event410,event411,event412,event407,event408,event409",r=r.slice(0,-1),t.events+=r}catch(e){_satellite.logger.error('Error in the Direct Call Rule "Outbound Click" : '+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"%ev_eve_target%",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe94d1760a59647199a3fc0f260901721-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC308c2bd6cbac411db693005b6a46ecb5-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0ae990da3e8440e5aa9f4e4cd95f4f49-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL01c33a2541f247be8598d7338dda7930",name:"TPT - UA - AEM - Facebook - PriceList Download - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"outbound_click"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb16f7a1784974fdb8af68a14ad1f6b49-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL64c552dc39e94bb38eeceb96fc51347b",name:"TPT - ME - Multiple -  DoubleClick - p15r[c]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - ME - Floodlight - Multiple ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc5b089cccba3456fa1efc9b57c8a7ce6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbab67f6b663b44c382af744d609a3a0a",name:"TPT - MU - AEM - Facebook - PriceList Download - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"download"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.mu",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe4012be68d32476fbe08897f01dbc25d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL48f9b8cf82bc42ea84ce562dcfdc0321",name:"TPT - LT - AEM - LinkedIn - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.lt",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa4ef9903775844b48e44aae93336f555-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb25431d630464a3391fadad308fa0060",name:"TPT - CR - AEM - ChatFuel - All Pages - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.cr",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCbf159e9f2d6a4026ab88a2ae98d0361b-source.min.js",language:"html",isExternal:!0}}]},{id:"RL2325ab979b314b50b68618a88ca92cef",name:"TPT - Bahrain - AEM - Snapchat - iFrame RFO Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCedd4ad5a3af046eda0e3c76e4232c8ab-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5a1f2e57df46422db75f3773195880b2",name:"TPT - AZ - AEM - Facebook - PriceList Download - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"download"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.az",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC794d6cebf44e4721a731e92e397a6541-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLf90f2f0f188e40f393ef3fa21ba2e63f",name:"TPT - RS - AEM - Adwords - Multiple - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC29e0fbfe76c84d0ea79cc927313f0cab-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL18695271724b4e5ea9f41ffc0f287d9b",name:"TPT - UY - All pages - Facebook",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - UY - All pages - facebook - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UY"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.uy",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5908d2400f7349bca93fc1280148975d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8cd042771a054252b545bc6aed2c0417",name:"TPT - SV - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Chile - All pages - Adwords",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"SV"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.sv",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC71c869d926524ecb962a5251c3470a9b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLce32f57a058f40f09752a6ce73b9e942",name:"TPT - Saudi - AEM - LinkedIn - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-saudiarabia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC2274162b721b40ebb46ea034d056c2d4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc281e97045154140bbc886ef218f055e",name:"TPT - BS - AEM - Adwords - All Pages - PLR - p15[c]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Chile - All pages - Adwords",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"BS"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.bs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC3d811d505e9f4d12abd44b3eb27c12f6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdf93f5982446430d85d5ca183e3c82ab",name:"TPT - UA - AEM - Adwords -  RFC - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfc"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7ef2135d4e864ca491ac60eaf2d0f9cd-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb44bcf29a6d440eca172ee7d27230af2",name:"TPT - MA - AEM - Adwords - Series 5 Tariff Brochure - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'div.show-for-large-up > ul > li:nth-child(2) > a[href="/content/dam/bmw/marketB4R1/bmw_ma/all-models/pricelists/THE-5_oct2020.pdf.asset.1603713676043.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/fr/all-models/5-series/sedan/2019/bmw-serie-5-berline-apercu.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa1e62e72f40149d5ac6d6eaa6c92fc90-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL196251fd6656440b944a55b2c084f79b",name:"TPT - ME - Test Drive Button - Facebook EBR",events:[{modulePath:"core/src/lib/events/click.js",settings:{anchorDelay:1e3,elementSelector:"a",elementProperties:[{name:"href",value:"https://www.bmw-me.com/en/local-content/generic-tda.html",valueIsRegex:!0}],bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"MP"}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/local-content/joyunleashed.html",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC734ebb1aca08421da0aee2e2f81d49a2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLaff218083bf141288442bedc8c885c84",name:"TPT - HT - ES - Registration Tags",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return-1!=window.location.hostname.indexOf("bmw.es")}}}],actions:[]},{id:"RL44107d70ff414d51b4341f463923a3da",name:"DCR - Show Price Rate",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"show_price-rate"},ruleOrder:50}],conditions:[],actions:[]},{id:"RLa7b67aa40f32403da2e353246c5d40b7",name:"TPT - Bahrain - AEM - Twitter - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCae8d2424d23342a7a2c622c76e5c314f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLefbdc4073b8c4c649e1105b7471d4565",name:"DCR - Scrape Form Finish",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"forms_simulated_page"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a="",r=_satellite.getVar("pa_pag_pageName"),n=(_satellite.getVar("navEvarForPage"),_satellite.getVar("navEvarForPage2"),_satellite.getVar("pa_cat_primaryCategory"),_satellite.getVar("pa_cat_subCategory01"),_satellite.getVar("pr_att_mmdr")),s=(_satellite.getVar("URLNoParam"),_satellite.getVar("ev_att_productName"),_satellite.getVar("SessionID")),o=_satellite.getVar("pa_att_template");_satellite.getVar("pa_cat_pageType"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2"),t.eVar45+="~rn:Scrape - Form Finish";var i=_satellite.getVar("navEvarForPage").split("~");t.prop16=i[1]+"~"+i[2]+"~"+i[5],a+="event91,",t.linkTrackVars+="eVar16,prop16,",t.linkTrackEvents+="event91,";var l=_satellite.getVar("hierarchyEvar").split("|");t.prop1=l[0],t.prop2=l[1],t.prop3=l[2],t.linkTrackVars+="prop1,prop2,prop3,";var c=_satellite.getVar("ev_att_mmdr");n=_satellite.getVar("pr_att_mmdr"),t.eVar10=""!=c&&"mmdr"!=c?c:""!=n?n:"not set";var d=_satellite.getVar("ev_att_dealerInfo");""==d&&(d=(((_satellite.getVar("finalDataLayer").page||"").attributes||"").dealerName||"not set")+"|"+(((_satellite.getVar("finalDataLayer").page||"").attributes||"").dealerID||"not set")+"_"+(((_satellite.getVar("finalDataLayer").page||"").attributes||"").outletID||"not set")),t.eVar41=d,t.linkTrackVars+="eVar10,eVar41,";var u=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",g=_satellite.getVar("s_products_vco_v52"),m=_satellite.getVar("s_products_vco_v53");""==(n=_satellite.getVar("pr_att_mmdr"))&&(n="not set");var p="";p+=";"+n+";1;"+u+";event112="+u+";eVar52="+g+",",t.eVar51=g,""!=(p+=m+",")&&(p=p.slice(0,-1),t.products=p),t.linkTrackVars+="eVar51,eVar52,products,";var v=document.getElementsByClassName("before-success"),b=$(v).is(":visible");if(document.getElementsByClassName("multistepline__label-wrapper").length>0)var f=document.getElementsByClassName("multistepline__label-wrapper")[1].className.includes("active");var _=document.getElementsByClassName("after-success"),h=$(_).is(":visible");window.formrfo&&b&&f?(t.eVar11="Central Form|RFO|Generic|Step 2|Dealer Selection|not set",t.prop31="BMW Dealer - RFO",t.linkTrackVars+="eVar11,prop31,",t.linkTrackEvents+="event3,event4,event15,event16,event173,"):window.formrfo&&h?(a+="event3:"+_satellite.getVar("SessionID")+"RFO,",a+="event4:"+_satellite.getVar("SessionID")+"RFO"+_satellite.getVar("pr_att_mmdr")+",",a+="event15,event173,",a+="event16:"+_satellite.getVar("SessionID")+_satellite.getVar("pr_att_mmdr")+",",t.eVar11="Central Form|RFO|Generic|Finish|not set",t.prop31="Finish RFO",t.linkTrackVars+="eVar11,prop31,",t.linkTrackEvents+="event3,event4,event15,event16,event173,"):window.formcontainercr&&b?(a+="event1:"+s+"Campaign,",a+="event2:"+s+"Campaign"+n+",",a+="event156,event178,",t.eVar11="Central Form|Campaign|Generic|Start|not set",t.prop30="Start Campaign",t.linkTrackVars+="eVar11,prop30,",t.linkTrackEvents+="event1,event2,event156,event14,event178,"):window.formcontainercr&&h?(a+="event3:"+s+"Campaign,",a+="event4:"+s+"Campaign"+n+",",a+="event157,event179,",t.eVar11="Central Form|Campaign|Generic|Finish|not set",t.prop31="Finish Campaign",t.linkTrackVars+="eVar11,prop31,",t.linkTrackEvents+="event3,event4,event157,event16,event179,"):window.formtda&&h?(a+="event3:"+_satellite.getVar("SessionID")+"TDA,",a+="event4:"+_satellite.getVar("SessionID")+"TDA"+_satellite.getVar("pr_att_mmdr")+",",a+="event11,event171,",a+="event12:"+_satellite.getVar("SessionID")+_satellite.getVar("pr_att_mmdr")+",",t.eVar11="Central Form|TDA|Generic|Finish|not set",t.prop31="Finish TDA",t.linkTrackVars+="eVar11,prop31,",t.linkTrackEvents+="event3,event4,event11,event12,event171,"):window.formrfi&&"post"===window.formrfi.getAttribute("data-form-type")&&h?(a+="event3:"+_satellite.getVar("SessionID")+"RFIP,",a+="event4:"+_satellite.getVar("SessionID")+"RFIP"+_satellite.getVar("pr_att_mmdr")+",",a+="event7,",a+="event8:"+_satellite.getVar("SessionID")+_satellite.getVar("pr_att_mmdr")+",",a+="event163,event169,event185,event702,",t.eVar11="Central Form|RFI Postal|Generic|Finish|not set",t.prop31="Finish RFI Postal",t.linkTrackVars+="eVar11,prop31,",t.linkTrackEvents+="event3,event4,event7,event8,event163,event169,event185,event702,"):_satellite.getVar("pa_att_template").indexOf("rfidownload")>-1&&"end page"==_satellite.getVar("pa_cat_pageType")?(a+="event3:"+_satellite.getVar("SessionID")+"RFID,",a+="event4:"+_satellite.getVar("SessionID")+"RFID"+_satellite.getVar("pr_att_mmdr")+",",a+="event19,",a+="event20:"+_satellite.getVar("SessionID")+_satellite.getVar("pr_att_mmdr")+",",a+="event163,event175,event185,",t.eVar11="Central Form|RFI Download|Generic|Finish|not set",t.prop31="Finish RFI Download",t.linkTrackVars+="eVar11,prop31,",t.linkTrackEvents+="event3,event4,event19,event20,event163,event175,event185,"):!window.formrfi||"post"!==window.formrfi.getAttribute("data-form-type")||"Form Step 2"!=r&&"Form Step 3"!=r?o.indexOf("rfidownload")>-1&&("Form Step 2"==r||"Form Step 3"==r)?(a+="event91",t.eVar11="Central Form|RFI Download|Generic|"+r+"|not set",t.linkTrackVars+="eVar11,",t.linkTrackEvents+="event91,"):window.formrfc&&h?(a+="event3:"+_satellite.getVar("SessionID")+"RFC,",a+="event4:"+_satellite.getVar("SessionID")+"RFC,",a+="event159,event181,",t.eVar11="Central Form|RFC|Generic|Finish|not set",t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFC",t.linkTrackVars+="eVar11,eVar67,prop31,",t.linkTrackEvents+="event3,event4,event159,event181,"):window.formrfs&&h?(a+="event3:"+_satellite.getVar("SessionID")+"RFS,",a+="event4:"+_satellite.getVar("SessionID")+"RFS,",a+="event161,event183,",t.eVar11="Central Form|RFS|Generic|Finish|not set",t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFS",t.linkTrackVars+="eVar11,eVar67,prop31,",t.linkTrackEvents+="event3,event4,event161,event183,"):t.abort=!0:(a+="event91",t.eVar11="Central Form|RFI Postal|Generic|"+r+"|not set",t.linkTrackVars+="eVar11,",t.linkTrackEvents+="event91,"),window.formrfa&&h&&(a+="event3:"+_satellite.getVar("SessionID")+"RFA,",a+="event4:"+_satellite.getVar("SessionID")+"RFA"+_satellite.getVar("pr_att_mmdr")+",",a+="event166,event167,event187,",t.eVar11="Central Form|RFA|Generic|Finish|not set",t.prop31="Finish RFA",t.linkTrackVars+="eVar11,prop31,",t.linkTrackEvents+="event3,event4,event15,event16,event173,event166,event167,event187,",t.t()),a=a.slice(0,-1),t.events+=a,t.linkTrackVars=t.linkTrackVars.slice(0,-1),t.linkTrackEvents=t.linkTrackEvents.slice(0,-1)}catch(e){_satellite.logger.log(e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC96313a7f7bbf4cdcbba57790341e351b-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa1f4cd937bed41d2aa2cdc0f3a6cae92-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC90126c6175da43c7a078d689229c2a6f-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb1fc4a74e1f142c3bdcf4ed05a69ee6c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLfeb882e386d542bca9b2640f43e4321f",name:"TPT - KZ - AEM - Adwords - iframe_forms_tda - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kz.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],
actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC6ab053c4b68e432aa07ac3e3cc66232d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL588d0a51ea9945bcb9894f97a03feb18",name:"TPT - MD - AEM - Facebook - Local Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.md",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCefdecd8239e6477aa0b009c206b1923e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4229953032c44b8799d55a45860ddf89",name:"TPT - Dubai - Single - passCampaing IUCP",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("Error ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"AE"}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"pre-owned-vehicles",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCb7e4479992d9416f824b7929afacdefa-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLf8b0fb37074a4f3698d2762550e33002",name:"PLR - TR - NSC - GA - Page View",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{var t=function(){consentcontroller.api.registerOnConsentChange((function(t){!0===t&&e()}))},a=function(){consentcontroller.api.registerOnConsentChange((function(t){!0===t&&e()}))};!0===consentcontroller.api.getApiInfo().splitConsentManagement?t():!1===consentcontroller.api.getApiInfo().splitConsentManagement&&a()}catch(e){_satellite.logger.error(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isGAAllowed%",rightOperand:"true"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tr",valueIsRegex:!0}]}}],actions:[{modulePath:"acronym-gtag.js/src/lib/actions/pageview.js",settings:{accounts:{1656044628116:{enabled:!0,options:[]}}}}]},{id:"RLdf7c3cf877d0412ea9ad874e29ac3604",name:"TPT - KZ - AEM - Adwords - stock-locator - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"stock-locator"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kz.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe23bf5c7065145c8ace4be911c033275-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc332543d34a3407a8ce3b33ce7f692f4",name:"TPT - UA - iFrame TDA Forms - Google Site Tag DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf8d54cf0a03840a2b1f73342bb4289fc-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa19a6f35a66745b1899de3a00123ce00",name:"TPT - BY - AEM - Facebook - Local Forms - DCR",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.by",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC498514f080814805b73e0ac662535626-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9f91e6ac83124fb48d39f800c60d3b77",name:"PLR - All - AEM - AA - Stock Locator Event Listener",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"document.addEventListener('newCar-stocklocator_pageload',function(e){\n   _satellite.track('stock-locator-page');\n});\ndocument.addEventListener('newCar-stocklocator_event',function(e){\n   _satellite.track('stock-locator');\n});",language:"javascript"}}]},{id:"RL2fcc3093465340469e754c7aef98794a",name:"TPT - UA - AEM - Adwords - Trade in Page - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4fa7e9e86c754f9d948977fb6a224c53-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLc41423c5078a468b85c6e7c0aeda7ef5",name:"TPT - GP - AEM - Facebook - Local Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.gp",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC619df1c3eb8d48a29c8b449101154ba3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5da457211cab437888fbf1b395002137",name:"TPT - PK - Multiple - Doubleclick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - PK FloodLight - retriggering",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"PK"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-pakistan.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8b9a46e433584b0face8c439d8091c61-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLac75806d008447a5a68e33600c8e796f",name:"TPT - RS - AEM - Adwords - Local Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"localform"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0c12d12cc16e4d7a80a69f3d8fc709b9-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4e1bcb3349cb4e039f990d9a281aa7fb",name:"TPT - KZ - AEM - Adwords - All Pages - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kz.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCbfdc3af3ef364c15b8113a5efac1fadd-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL904992fa5d8b4d87ba5fe42d05852616",name:"TPT - RS - AEM - GTagDC - FormTracking - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC102f016e1a91411f97eef4962e70a40f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe83fe00ba3744c6cbd9ae4e987640dcb",name:"DCR - Toggle User Consent - V2",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"cookie_link"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){try{if("true"!==_satellite.getVar("splitConsentEnabled"))return!0;if("true"===_satellite.getVar("isAdobeAnalyticsAllowed"))return!0;if("false"===_satellite.getVar("isAdobeAnalyticsAllowed")){var e=_satellite.getVar("ev_eve_eventName"),t=_satellite.getVar("consentItemName");return("analytics"===t||"global"===t)&&"reject consent"===e}}catch(e){_satellite.logger.error("Error in condition Toggle user Consent "+e)}}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("finalDataLayer");var a=_satellite.getVar("ev_eve_eventName"),r=_satellite.getVar("consentItemName"),n=_satellite.getVar("consentItemType");"Cookie drawer impression"!==a&&"false"!==_satellite.getVar("isPageLoadTracked")||(t.abort=!0),_satellite.getVar("defaultVars"),"true"===_satellite.getVar("splitConsentEnabled")?("analytics"===r||"global"===r?("accept consent"===a?_satellite.getVar("consentInfo")&&"true"===_satellite.getVar("consentInfo").fireOptInEvent?t.abort=!0:(t.eVar45+="~rn:Opt-In",t.events+="event199,",t.linkTrackEvents+="event199,",t.prop72=t.eVar122=_satellite.getVar("cookieDrawerClass"),"global"===r&&_satellite.getVar("conWithoutSplitConsent").indexOf(_satellite.getVar("topLevelDomain"))>-1&&window.dispatchEvent(new CustomEvent("re-trigger-cookie-transfer",{detail:{}}))):"reject consent"===a&&(t.eVar45+="~rn:Opt-Out",t.events+="event200,",t.linkTrackEvents+="event200,"),t.eVar120=r+"~"+n,t.eVar120+="accept consent"===a?"~Accepted":"~Rejected",t.events+="event229,",t.linkTrackEvents+="event229,"):"functional"!==r&&"advertising"!==r||(t.eVar120=r+"~"+n,t.eVar120+="accept consent"===a?"~Accepted":"~Rejected",t.events+="event229,",t.linkTrackEvents+="event229,"),"more information"===a?(t.events+="event228",t.linkTrackEvents+="event228,"):"consent content open: manual"===a?(t.events+="event230",t.linkTrackEvents+="event230,"):"consent impression"===a?(t.events+="event231",t.linkTrackEvents+="event231,"):_satellite.getVar("conWithoutSplitConsent").indexOf(_satellite.getVar("topLevelDomain"))>-1&&window.dispatchEvent(new CustomEvent("re-trigger-cookie-transfer",{detail:{}}))):"more information"===a?(t.events+="event228",t.linkTrackEvents+="event228,"):"accept consent"===a||e&&e.detail&&"true"===e.detail.consentValue?(t.eVar45+="~rn:Opt-In",t.events+="event199,event229,",t.linkTrackEvents+="event199,event229,",t.prop72=t.eVar122=_satellite.getVar("cookieDrawerClass")):(t.eVar45+="~rn:Opt-Out",t.events+="event200,event229,",t.linkTrackEvents+="event200,event229,"),t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.linkTrackVars+="eVar16,prop16,eVar120,eVar122,prop72,events,","true"===_satellite.getVar("isSavingsModeApplicable",e)&&(t.abort=!0)}catch(e){_satellite.logger.error("Error in toogle user consent DCR "+e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd06691ae2ef24da5b6c25392dde066bf-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2570a8da4cd6492f893936478ef18c53",name:"TPT - UA - AEM - Adwords - stock-locator - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"stock-locator"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC8a4bd713dfea4da5b7e2478957bb3625-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2e2c63dda54740609eb556d3f0e8d437",name:"TPT - All - DCS Pages - AA - Usabilla Adhoc DCS",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger",(function(t){t.detail&&"true"==_satellite.getVar("isUsabillaAllowed")&&e()}))}catch(e){_satellite.logger.error("Error in re-trigger IT Usabilla NPS ",e)}}},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0d8a900d319640219a0e1500e14513ca-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLff4d6fac0ca2407685b3bac49009c15a",name:"DCR - All - iFrame - AA - RFO Forms",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars");var a=_satellite.getVar("topLevelDomain");"bmw.ly"!=a&&"bmw.ru"!=a&&"bmw.co.za"!=a&&"bmw.com.au"!=a&&"bmw.mu"!=a&&"bmw.com.cn"!=a&&"bmw.fr"!=a&&"bmw.ch"!=a&&"bmw.be"!=a&&"bmw.lu"!=a&&"bmw.nl"!=a&&"bmw.it"!=a&&"bmw.am"!=a&&"bmw.ly"!=a&&"bmw.cc"!=a&&"bmw.is"!=a&&"bmw.com.ge"!=a&&"bmw.com.al"!=a&&"bmw.md"!=a&&"bmw.bm"!=a&&"bmw.ua"!=a&&"bmw.az"!=a&&"bmw.by"!=a&&"bmw.kz"!=a&&"bmw.ma"!=a&&"bmw-antilles.fr"!=a&&"bmw.re"!=a&&"bmw.dz"!=a&&"bmw-tunisia.com"!=a&&"bmw-abudhabi.com"!=a&&"bmw-dubai.com"!=a&&"bmw-saudiarabia.com"!=a&&"bmw-kuwait.com"!=a&&"bmw-oman.com"!=a&&"bmw-qatar.com"!=a&&"bmw-yemen.com"!=a&&"bmw-iraq.com"!=a&&"bmw-jordan.com"!=a&&"bmw-lebanon.com"!=a&&"bmw-pakistan.com"!=a&&"bmw-me.com"!=a&&"bmw-bahrain.com"!=a&&"bmw.ps"!=a||(adobeRSID="bmw.dev.hq.nsctestsuite");var r="";t.eVar16=_satellite.getVar("navEvarForClicks"),t.eVar18=_satellite.getVar("navEvarForClicks2"),t.eVar45+="~rn:DCR - All - iFrame - AA - RFO Forms";var n=_satellite.getVar("navEvarForClicks").split("~");t.prop16=n[1]+"~"+n[2]+"~"+n[5],r+="event91,";var s=_satellite.getVar("hierarchyEvar").split("|");if(t.prop1=s[0],t.prop2=s[1],t.prop3=s[2],"Form Start"===_satellite.getVar("ev_eve_eventName"))r+="event1:"+_satellite.getVar("SessionID")+"RFO,",r+="event2:"+_satellite.getVar("SessionID")+"RFO,",r+="event13,event172,",r+="event14:"+_satellite.getVar("SessionID")+",",t.eVar11="Local Form|RFO|"+_satellite.getVar("ev_cat_subCategory02")+"|Start|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop30="Start RFO";else if("Form Success"===_satellite.getVar("ev_eve_eventName")){_satellite.getVar("functionList");var o=_satellite.getVar("ev_att_dealerName"),i=_satellite.getVar("ev_att_dealerID");r+="event3:"+_satellite.getVar("SessionID")+"RFO,",r+="event4:"+_satellite.getVar("SessionID")+"RFO"+_satellite.getVar("ev_att_productName").dtm_hashCode()+",",r+="event15,event173,",r+="event16:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName").dtm_hashCode()+",","true"===_satellite.getVar("ev_att_newsletterSelected")&&(r+="event188,event189,"),t.eVar10=_satellite.getVar("ev_att_mmdr"),t.eVar11="Local Form|RFO|"+_satellite.getVar("ev_cat_subCategory02")+"|Finish|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),""!=o&&null!=o||(o="not set"),""!=i&&null!=i||(i="not set"),"not set"==o&&"not set"==i||(t.eVar13=o+"|"+i),t.eVar67=_satellite.getVar("ev_att_productName"),t.prop31="Finish RFO"}else"Local Form Interaction"===_satellite.getVar("ev_eve_eventName")?(r+="event138,event139,",t.eVar11="Local Form|RFO|"+_satellite.getVar("ev_cat_subCategory02")+"|Interaction|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element")):_satellite.getVar("ev_eve_eventName").toLowerCase().startsWith("form step")?t.eVar11="Local Form|RFO|"+_satellite.getVar("ev_cat_subCategory02")+"|"+_satellite.getVar("ev_eve_eventName")+"|not set":"First Interaction"===_satellite.getVar("ev_eve_eventName")?(r+="event295,",t.eVar11="Local Form|RFO|"+_satellite.getVar("ev_cat_subCategory02")+"|First Interaction|not set",t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("URL")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element")):t.abort=!0;var l=_satellite.getVar("ev_att_dealerInfo");""==l&&(l=(((_satellite.getVar("finalDataLayer").page||"").attributes||"").dealerName||"not set")+"|"+(((_satellite.getVar("finalDataLayer").page||"").attributes||"").dealerID||"not set")+"_"+(((_satellite.getVar("finalDataLayer").page||"").attributes||"").outletID||"not set")),t.eVar41=l;var c=_satellite.getVar("ev_att_mmdr");if(""==c){var d=_satellite.getVar("finalDataLayer").product;c=((d=d&&d.length>0?d[d.length-1]:[]).attributes||"").mmdr||"not set"}t.eVar10=c,t.eVar44=_satellite.getVar("nonTechMetaData");var u=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",g=_satellite.getVar("s_products_iFrame_v52"),m=_satellite.getVar("s_products_vco_v53"),p="";p+=";"+c+";1;"+u+";event112="+u+";eVar52="+g+",",t.eVar51=g,""!=(p+=m+",")&&(p=p.slice(0,-1),t.products=p),t.linkTrackVars+="eVar16,eVar10,eVar11,eVar13,eVar41,eVar44,eVar51,eVar52,eVar67,products,prop1,prop2,prop3,prop16,prop30,prop31",t.linkTrackEvents+="event91,event1,event2,event3,event4,event13,event14,event15,event16,event172,event173,event188,event189,event138,event139,event295",r=r.slice(0,-1),t.events+=r}catch(e){var v={from:"AA",type:"DCR",name:"RFO Forms"};_satellite.logger.error(e,v)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"RFO Form",linkType:"o"}}]},{id:"RLf435436e59dc4fe38c9d9004868c8483",name:"TPT - Dubai - AEM - Linkedin - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Dubai - Multiple - Linkedin",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-dubai.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd067b9f275364029bdfedc0d92e74391-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbe8dab5ed27e4cbb9cebcda94501d613",name:"TPT - MA - AEM - Facebook - Local Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC5cfaa343efba44178a5075c387e27bc4-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4cfb2b262a84479cbf3703bf4f6fcc89-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL101f9f7b9cf1415e8cf08d659d497cd6",name:"TPT - RS - AEM - gtagAW - Form Confirmation - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("addEventTracking")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"addEventTracking"==a.methodName&&(_satellite.setVar("FormSubmit",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.rs",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0d84e212bae3471d88199890d8c3a2d4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLfc14f688c14940d08d84529e90b9e01d",name:"TPT - MA - AEM - Facebook - Multiple - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ma",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa809b4368d6b49dfa37b1ff44e3f03b7-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL1438491227ee4f4b89ff9613a0b450c6",name:"TPT - Qatar - AEM - Twitter - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-qatar.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc31daacc871e4e74b8bd689795448e34-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5aa79412232d41b4bc3fb1cdf81f5e18",name:"TPT - UA - AEM - Doubleclick - iFrame RFC Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC74ed5801bd494faf9c678b3ef2a1f37d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL090ce23d5c034d72bb7adf971dcca48f",name:"TPT - TN - AEM - Adwords - Brochure Download - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:".ds2-link.ds2-icon.ds2-tracking-js--event.ds2-icon--download-white.ds2-accessibility",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-tunisia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC11a1122f892641c7b95fc2d0bf2a9b14-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL374c79ea1c3b41f7a387233b64d2eec2",name:"TPT - KY - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Chile - All pages - Adwords",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"KY"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.ky",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC87eed86bdf1f4e5cb7a9f8533452600e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL843b26be7d1e4751ac667af56e856f01",name:"TPT - UA - AEM - DoubleClick - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT: DoubleClick ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4f91e227009d42f3a81c0427cde47db9-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd2ce87473148478e94434ca6774d3d2c",name:"TPT - IL - AEM - Facebook - Multiple - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.il",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4bedd74986f7465888c90eaca27a1f46-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLf3b23499e84d4f71939d31b61c730d92",name:"TPT - KN - AEM - Adwords - Price List - EBR - p15r[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:".ds2-cms-output.ds2-accordion--copy",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kz.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC67fbb4b01d824e288914a28c0dc9247d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLce769322659740238160d133dc85b2eb",name:"TPT - UA - AEM - Doubleclick - outbound_click - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"outbound_click"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9d48b71f025b40c1a5c872e4c70340b8-source.min.js",language:"javascript",isExternal:!0}}]},{
id:"RL1daa02703c8a449bbbfb555a4b6cb1da",name:"TPT - KZ - AEM - Facebook - iFrame RFO Form - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.kz",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa22146f40ee448ff96b08ce7b302fc87-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbed6bdac3e35487da1eea934170ee196",name:"TPT - DZ - AEM - Facebook - iFrame RFO Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.tm.dz",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC08459a4449fa4188a743c30db703b3bc-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLce4a923ce6b647f4b26296f1f9db6ee7",name:"TPT - LT - AEM - gtagAW- Book Now - EBR - p15r[c] ",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/lt/all-models/bmw-i/bmw-ix-new/2021/bmw-ix-registracija-informacijai-gauti.html|/lt/all-models/bmw-i/bmw-ix/2021/bmw-ix-rezervacija.html|/lt/all-models/bmw-i/bmw-ix-new/2021/bmw-ix-rezervacija.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9f79d15c21d545d9b16fed06537ff851-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL26ca92e0ec3546f281c3e56df5d0a502",name:"TPT - UA - AEM - Adwords - Stocklocator - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/uk/stocklocator.html#/?filters=",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC75d9ef5f07b740c2bd239965ee5fbc75-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL37d3d121ad844017a94e481b54b1ea61",name:"TPT - TN - AEM - Adwords - Multiple - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-tunisia.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC461253b22d174b3da22e7f2fc8c11324-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6848be25255f4c6bb3ad8dde474beeae",name:"TPT - JO - AEM - Doubleclick - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-jordan.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9755f8c714214b5fa45813f599a77368-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL28badf412e064d338f2d0050c3e6b126",name:"TPT - RE - AEM - Facebook - Local Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.re",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7f3462df24604fe8b10287e33168766b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6d9d16ac4e60407e8af8d03cd5d073cc",name:"PLR - Set Third Party Execution Flag",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("PLR Set Third Party Tag Execution Flag - Retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%splitConsentEnabled%",rightOperand:"false"}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return"true"==_satellite.getVar("isRegulationAccepted_Tags")&&(_satellite.setVar("thirdPartyTagsExecuted","true"),!0)}}}],actions:[]},{id:"RL2086e45d91644d52b6929ac2041448a1",name:"TPT - TW - AEM - Line - All Pages - PLR - P15r[l]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"TW"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tw",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC41aa46c8dc28439e95f386e004378dd3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL304eba51ff434f7597025c48cab8f16f",name:"TPT - MU - AEM - Facebook - Local Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.mu",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCbe3fcc3323484c6b91f9443d9c9c042a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL3d1ff90e3a674204a96ed4b46380264d",name:"TPT - Palestine - Multiple - Doubleclick",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT:  Palestine - floodLight ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"PS"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ps",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe509d3764a9a45e4bc12b848655586aa-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL358843418736405593de63a5bea096f4",name:"TPT - PA - AEM - Facebook - All Pages - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.pa",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC79b4abdb714240a1b4a730469e049c97-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4e807c9e627741199e2f6d33ed7eff55",name:"TPT - CO - AEM - Adwords - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - CO - Multiple - Adwords",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"CO"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.co",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0891090a80d14de3a8390eb6051089ae-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC73f1f462bd594915be4f76579c941359-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL34ccefc4cd6e4b63be73b75b74169c89",name:"TPT - Dubai - AEM - Snapchat - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Dubai - Multiple - Twitter",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-dubai.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC0ad14d73c92746e8a63a6221dd4add91-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL7d2dd2e324644e63a3917c95d963dcb0",name:"TPT - TW - AEM - Adwords - Multiple - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tw",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCf522c4dfdc304bfc9931e6fc212d6cbb-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL52f01d050b00485aa45a6d7607642101",name:"TPT - KZ - AEM - Adwords - Local Form TDA - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"localform"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-kz.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC93b3b98b3e4745f78a335f02ec95324c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbc4b8238c503439c99958cb31fe4e9c0",name:"TPT - CC - AEM - Facebook - Local Forms - DCR - p15r[c]",events:[{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("message",(function(t){if(void 0!==t.data&&t.data.toString().indexOf("tracking-localform")>-1){var a=JSON.parse(t.data),r=a.args[1];console.log(a),console.log(r),"tracking-localform"==a.methodName&&(_satellite.setVar("LocalFormEvent",r),e())}}))}catch(e){console.log(e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.cc",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC033245aa1cbf4099a8da33fbed789f37-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL66755507428d44feb7d67005122c45b7",name:"PLR-CoronaMsg",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"index.html",valueIsRegex:!0},{value:"home.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC1a661c35682341159b55c6402bbafc2b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL854c8f819981460eb62f0feb427a2056",name:"TPT - UA - i Price List - DoubleClick EBR",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"div.ds2-basic-teaser.ds2-component.ds2-branded-bmw",elementProperties:[{name:"href",value:"https://data.bmw.ua/pricelist/BMW_i_Price_List.pdf",valueIsRegex:!0}],bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"UA"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.ua",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc27647de7b81458db2ce91221314691e-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL20a4bce100674dd8a4d690dea1cd36f5",name:"TPT - EG - AEM - Adwords - 2 Series Download Price List - EBR - p15[c]",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'.cta > a[href="/content/dam/bmw/marketEG/bmw-eg_com/All%20models/brochure_2020_September/F44%20-%202%20Series%20Gran%20Coupe%20CBU%20Pricelist.pdf"]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-egypt.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/all-models/2-series/gran-coupe/2019/bmw-2-series-gran-coupe-highlights.html",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC735ab330edca4ff3aa988ca4f65d3e4f-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL072fd257a6564eb290f4eac6fcc88cbf",name:"DCR - All - IFrame - AA - Local Forms 3CT",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"localform"},ruleOrder:50}],conditions:[],actions:[{modulePath:"bmw-group-utility-kit/extension-package-src/lib/actions/takeSnapshot.js",settings:{takeSnapshot:null}},{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{_satellite.getVar("defaultVars"),t.events="";var a=_satellite.getVar("snapshotDL"),r=(a.get("event.-1.eventInfo.eventName"),a.get("event.-1.eventInfo.effect")),n=(a.get("event.-1.eventInfo.cause"),a.get("event.-1.eventInfo.eventPoints"),a.get("event.-1.eventInfo.type")),s=(a.get("event.-1.category.subCategory1"),a.get("event.-1.category.subCategory2")),o=(a.get("page.pageInfo.pageName",a.get("event.-1.attributes.relatedPageName")),_satellite.getVar("URL")),i=_satellite.getVar("pa_pag_language"),l=_satellite.getVar("languageAndMarketWorkaround");t.eVar4=o,t.eVar7=i||l;var c=_satellite.getVar("hierarchyEvar").split("|");t.eVar6=_satellite.getVar("pa_pag_referringUrl"),t.eVar16=_satellite.getVar("navEvarForPage"),t.eVar18=_satellite.getVar("navEvarForPage2"),t.eVar41=_satellite.getVar("ev_att_dealerInfo")||"not set";var d=_satellite.getVar("ev_att_mmdr"),u=_satellite.getVar("pr_att_mmdr");t.eVar10=""!=d&&"mmdr"!=d?d:""!=u?u:"not set",t.eVar44=_satellite.getVar("nonTechMetaData");var g=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");t.eVar17=g,t.eVar45+="~rn:DCR - All - IFrame - AA - Local Forms 3CT",t.eVar62=t.s_getLoadTime(),t.pageName=_satellite.getVar("pageName"),t.channel=_satellite.getVar("jcrPathLevel1"),t.referrer=document.referrer,t.hier1=_satellite.getVar("hierarchy"),t.prop1=c[0],t.prop2=c[1],t.prop3=c[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var m=_satellite.getVar("navEvarForPage").split("~");t.prop16=m[1]+"~"+m[2]+"~"+m[5],t.prop27="D=v3",t.campaign=_satellite.getVar("campaignParameter");var p={rao:["event310,event311","event312,event313"],rfa:["event186,event164","event187,event166"],rfc:["event180,event158","event181,event159"],rfcd:["event314,event315","event316,event317"],rfd:["event318,event319","event320,event321"],rfo:["event172,event13","event173,event15"],rfp:["event326,event327","event328,event329"],rfs:["event182,event160","event183,event161"],tda:["event170,event9","event171,event11"],"online tda":["event284,event283","event285,event286"],registration:["event340,event341","event308,event309"],campaign:["event178,event156","event179,event157"],rfi:["event184,event162","event185,event163"],download:["event174,event17","event175,event19"],postal:["event168,event5","event169,event7"],roi:["event176,event96","event177,event98"],"fs rfo":["event207,event338","event208,event339"],loan:["event322,event323","event324,event325"],rfq:["event330,event331","event332,event333"],rpl:["event334,event335","event336,event337"],rfl:["event322,event323","event324,event325"],"private lease":["event334,event335","event336,event337"],quote:["event330,event331","event332,event333"]},v="",b="",f=p[n.toLowerCase()],_=p[s.toLowerCase()];"nsc > form started"==r||"local > form started"==r||"form started"==r?(b+="event1:"+_satellite.getVar("SessionID")+n,"rfc"!=n&&(b+=",event2:"+_satellite.getVar("SessionID")+n),"tda"==n&&(b+=",event10:"+_satellite.getVar("SessionID")),"rfo"==n&&(b+=",event14:"+_satellite.getVar("SessionID")),null!=_&&(v=v.concat(",",_[0])),null!=f&&(v=v.concat(",",f[0]))):"nsc > form finished"==r||"local > form finished"==r||"form finished"==r?(b+="event3:"+_satellite.getVar("SessionID")+n,"rfc"!=n&&(b+=",event4:"+_satellite.getVar("SessionID")+n+_satellite.getVar("ev_att_productName")),"tda"==n&&(b+=",event12:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName")),"rfo"==n&&(b+=",event16:"+_satellite.getVar("SessionID")+_satellite.getVar("ev_att_productName")),null!=_&&(v=v.concat(",",_[1])),null!=f&&(v=v.concat(",",f[1]))):"nsc > form finish intention"==r||"form finish intension"==r||"local > form finish intention"==r||("first form interaction"==r||"local > first form interaction"==r?v=v.concat(",event295"):"form interaction"==r||"local > form interaction"==r||r.indexOf("form step")),t.events=t.apl(t.events,b),t.linkTrackEvents+="event1,event2,event3,event4,event10,event14,event12,event16",t.events+=v,t.linkTrackEvents+=v,r&&r.indexOf("local > ")>-1&&(r=r.replace("local > ","")),t.eVar11="local form|"+n+"|"+r+"|"+a.get("page.pageInfo.pageName")+"|not set",t.linkTrackVars=t.apl(t.linkTrackVars,"products,eVar11,eVar23,eVar136,eVar137,prop6,prop7,prop8,prop9,prop10,prop11,prop16,eVar16,prop17,prop18,prop55,prop52,prop1,eVar34,pageName,eVar39,eVar41,eVar42,eVar40,prop42,prop43,prop19,prop53,prop56,eVar4,eVar11,eVar7,events")}catch(t){var h={from:"AA",type:"Rule",name:e.$rule.name};_satellite.logger.error(t,h)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"%AA-eventType%",linkType:"o"}},{modulePath:"bmw-group-utility-kit/extension-package-src/lib/actions/discardSnapshot.js",settings:{discardSnapshot:null}}]},{id:"RL60382d6f92ea4b75ae8056e68d587970",name:"TPT - TW - AEM - Facebook - Iframe Forms TDA - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.tw",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC818059bd39074208a4cd8368cdd99f11-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL7923f681f7024c849479bab7aad839d2",name:"TPT - IL - AEM - Facebook - All Pages - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - IL - All Pages - Facebook - retriggering ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.co.il",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCd75eb5fcafb9454b96cca78f923c8761-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL478040be45b048e0ae84226350afd15f",name:"TPT - LT - AEM - Adwords - All Pages - PLR - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw.lt",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCa7945ec8838641faa415b182d0e64e6d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6fdb82d40a9c4378b9007461c34d8263",name:"TPT - Qatar - AEM - Snapchat - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-qatar.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC59b68320555a4b1bab1056fbd1175bc4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9c818ffa38f34e198f2f89324eebc84d",name:"TPT - Dubai - AEM - Twitter - iFrame TDA Forms - DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-dubai.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc0e844fc7fc74da9be65d33c6f73ee28-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe3770135ea7741b78dbb00d635030242",name:"TPT - KH - AEM - Facebook Chat - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"KH"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"contains"},leftOperand:"%URL%",rightOperand:"bmw.com.kh/en/index"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC67376a06eae341dda0380cffd638c877-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdbd9f8c2b2d140dd95da310032a51121",name:"TPT - TN - AEM - LinkedIn - All Pages - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-tunisia.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC9aed4ee2a9a94bc8a541d7672b660c3d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL11427d2116774d7cba92b4d034a87b41",name:"TPT - ME - AEM - TikTok - TDA iFrame Scrape Form - DCR - p15r[l]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_tda"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-me.com",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe0e742ae879c47b8ab3fe92b8d8c19b9-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2bc46b2afc6b4811b45c47d58938ba0e",name:"TPT - MQ - AEM - Facebook - Multiple - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.mq",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC6722ae70a8e64988a32abfd9b5849973-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL69c1dc1f529c4f6fbc82665c6dc8dffd",name:"PLR - All Pages - Page Bottom - Adobe Analytics Beacon",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger",(function(t){t.detail&&t.detail.processing==_satellite.getVar("consentMap").AdobeAnalytics&&e()}))}catch(e){_satellite.logger.error("PLR:All Pages page bottom ",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isAdobeAnalyticsAllowed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{function a(e){e+="=";for(var t=decodeURIComponent(document.cookie).split(";"),a=0;a<t.length;a++){for(var r=t[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""}var r=_satellite.getVar("languageAndMarketWorkaround"),n=_satellite.getVar("pageLanguage");t.eVar7=n||r,t.eVar44=_satellite.getVar("nonTechMetaData_EvarAddon"),_satellite.logger.log("DTM: eVar44 is assigned s.eVar44 = "+t.eVar44);var s=_satellite.getVar("geoRegion"),o=_satellite.getVar("topLevelDomain");function i(e,t){return-1!==e.indexOf(t,e.length-t.length)}"DE"==s&&(t.prop25=_satellite.getVar("URLNoParam")),"bmw.se"!=o&&null==(f=_satellite.cookie.get("bmwdtm_hq_sid"))&&setTimeout((function(){_satellite.track("bounce_timer")}),3e4),_satellite.getVar("defaultVars"),t.events="event91,event998,event999,","dashboard"==_satellite.getVar("pa_pag_pageName")&&(N=_satellite.getVar("finalDataLayer")).user&&N.user.length&&N.user[0].segment&&N.user[0].segment.userSelectedInterests&&(t.eVar74=N.user[0].segment.userSelectedInterests);var l="",c=_satellite.getVar("pa_pag_referringUrl"),d=_satellite.getVar("pageName"),u=_satellite.getVar("pa_att_template"),g=_satellite.getVar("pr_att_mmdr"),m=_satellite.getVar("jcrPathLevel1"),p=(_satellite.getVar("jcrPathLevel2"),_satellite.getVar("jcrPathLevel3"),_satellite.getVar("campaignParameter")),v=_satellite.getVar("pageInstanceId"),b=_satellite.getVar("finalDataLayer").component,f=_satellite.getVar("SessionID"),_=_satellite.getVar("hierarchy"),h=_satellite.getVar("navEvarForPage"),V=_satellite.getVar("navEvarForPage2"),C=_satellite.getVar("hierarchyEvar").split("|"),y=!0,P=window.location.href;if((digitals2.tracking.api.getPageObject(0)&&digitals2.tracking.api.getPageObject(0).pageInstanceId&&digitals2.tracking.api.getPageObject(0).pageInstanceId.indexOf("need-analyzer")>-1||u.indexOf("/templates/configurator")>-1&&"new_pre_configuration"!=_satellite.getVar("ev_att_componentName")||v.indexOf("/ssl/requests/")>-1&&"bmw.com.cn"==o)&&(y=!1),_satellite.setVar("trackPage",y),y){try{if(_satellite.getVar("isFirstPageofVisit")&&document.referrer.length>0){var w=document.referrer.split("?")[0];/.*:\/\/[^\/]*$/.test(w)&&(w+="/");var R=w.match(/^.*:\/\/(.+?)(\/.*)$/);t.eVar130="dm:"+R[1]+"~ph:"+R[2]}}catch(e){_satellite.logger.error("Refferer evar130 error ",e)}t.eVar64=_satellite.getVar("SearchAds360Parameter"),t.campaign=p,t.eVar60=_satellite.getVar("internalCampaignParameter"),"BE"==s?(t.eVar26=_satellite.getVar("cid_parameter"),t.eVar80=_satellite.getVar("bid_parameter")):"GB"==s&&(t.eVar76=_satellite.getVar("cid_parameter"),t.eVar77=_satellite.getVar("bid_parameter")),t.eVar6=c,"NL"==s&&(t.eVar125=_satellite.getVar("dotaki_segment"));var j=document.getElementsByClassName("iframeintegration-component-path"),A=document.getElementsByClassName("iframeadaptive");(j.length>0||A.length>0)&&(l+="event190,"),(j.length>0||A.length>0)&&-1==m.indexOf("all-models")||u.indexOf("requests")>-1||u.indexOf("brandswitch")>-1||d.indexOf("switch-")>-1||u.indexOf("business-forms")>-1||(t.eVar15="D=v1"),_satellite.logger.log("DTM: eVar15 not being set.");var T=""==_satellite.getVar("ev_eve_eventAction")?"Not set":_satellite.getVar("ev_eve_eventAction"),O=""==_satellite.getVar("ev_eve_eventName")?"Not set":_satellite.getVar("ev_eve_eventName"),D=""==_satellite.getVar("ev_att_componentName")?"Not set":_satellite.getVar("ev_att_componentName"),I=""==_satellite.getVar("ev_att_componentHeadline")?"Not set":_satellite.getVar("ev_att_componentHeadline"),E=""==_satellite.getVar("ev_eve_target")?"Not set":_satellite.getVar("ev_eve_target"),S=""==_satellite.getVar("ev_eve_effect")?"Not set":_satellite.getVar("ev_eve_effect"),k=""==_satellite.getVar("ev_eve_cause")?"Not set":_satellite.getVar("ev_eve_cause"),L=""==_satellite.getVar("ev_eve_element")?"Not set":_satellite.getVar("ev_eve_element");"Stage teaser"==D.dtm_capitalize().dtm_readable()?t.eVar16=T+"~"+O+"~"+D.dtm_capitalize().dtm_readable()+"~"+k+"~"+_satellite.getVar("pa_pag_referringUrl")+"~"+E+"~"+S+"~"+k+"~"+L:t.eVar16=T+"~"+O+"~"+D.dtm_capitalize().dtm_readable()+"~"+I+"~"+_satellite.getVar("pa_pag_referringUrl")+"~"+E+"~"+S+"~"+k+"~"+L,t.eVar18=V;var x=t.getPreviousValue(t.eVar1,"bmwdtm_hq_pcg");_satellite.logger.log("DTM: previousCG"+x),_satellite.setVar("v17_forms",x),t.eVar17=x,t.eVar45+="~rn:Page Load",t.eVar47="+1",t.eVar62=t.s_getLoadTime(),t.pageName=d,t.channel=m,t.referrer=document.referrer,
t.hier1=_,t.prop1=C[0],t.prop2=C[1],t.prop3=C[2],t.prop4="D=v4",t.prop6="D=v6",t.prop7="D=v7",t.prop15=t.getDaysSinceLastVisit("s_lv");var N,F=h.split("~");if(t.prop16=F[1]+"~"+F[2]+"~"+F[5],t.prop27="D=v3","user navigate to tech hub"===_satellite.getVar("ev_eve_effect")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element")),"multicontent"==_satellite.getVar("ev_att_componentName")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO")),"line_component"==_satellite.getVar("ev_att_componentName")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName").dtm_capitalize().dtm_readable()+"~"+_satellite.getVar("ev_att_componentHeadline")+"~"+_satellite.getVar("URLNoParam")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO")),"offers"==_satellite.getVar("ev_att_componentName")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("pa_pag_referringUrl")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("pa_pag_referringUrl")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop12=_satellite.getVar("ev_eve_timestamp"),t.eVar8=t.eVar10=t.prop8=t.prop10=_satellite.getVar("ev_att_mmdr_NBO"),l+="event91,",t.linkTrackVars+="eVar16,prop16,prop12,eVar8,eVar10,prop8,prop10,prop12"),"iucp_integration"==_satellite.getVar("ev_att_componentName")&&(N=_satellite.getVar("finalDataLayer")).event.length&&N.event[0].category&&N.event[0].category.mmdr&&(_satellite.logger.log("set evar8"),t.eVar8=N.event[0].category.mmdr,t.eVar10=N.event[0].category.mmdr),"new_pre_configuration"!=_satellite.getVar("ev_att_componentName")&&"user_centric_navigation"!=_satellite.getVar("ev_att_componentName")||(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("pa_pag_referringUrl")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("pa_pag_referringUrl")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element")),"MyCE"==_satellite.getVar("ev_att_componentName")&&(t.eVar16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("pa_pag_referringUrl")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element"),t.prop16=_satellite.getVar("ev_eve_eventAction")+"~"+_satellite.getVar("ev_eve_eventName")+"~"+_satellite.getVar("ev_att_componentName")+"~"+_satellite.getVar("ev_att_relatedComponentHeadline")+"~"+_satellite.getVar("pa_pag_referringUrl")+"~"+_satellite.getVar("ev_eve_target")+"~"+_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")+"~"+_satellite.getVar("ev_eve_element")),"ZSO_accessories"==_satellite.getVar("ev_att_componentName")&&(t.eVar117=_satellite.getVar("ev_eve_effect")+"~"+_satellite.getVar("ev_eve_cause")),"Contact bar"==F[2]?l+="event45,event46,":"Main navigation"==F[2]?l+="event49,":-1!=F[2].indexOf("teaser")&&(l+="event44,"),g&&"all-models"===m){var M="SATELLITE: Showroom Page Load triggered by _satellite.track";t.eVar8=g,t.eVar10=g,t.prop8="D=v8",t.prop10="D=v10",l+="event79:"+f+g+",event80,";var q=_satellite.getVar("pr_att_sellingPriceTotal")||"not set",U=_satellite.getVar("s_products_vco_v52"),B=_satellite.getVar("s_products_vco_v53");""==(g=_satellite.getVar("pr_att_mmdr"))&&(g="not set");var H="";H+=";"+g+";1;"+q+";event112="+q+";eVar52="+U+",",t.eVar51=U,""!=(H+=B+",")&&(H=H.slice(0,-1),t.products=H)}if(void 0!==b){for(var G="false",z=0;z<b.length;z++)if(b[z].attributes&&b[z].attributes.onsiteSearch&&b[z].attributes.onsiteSearchResultsType&&"General"===b[z].attributes.onsiteSearch&&b[z].attributes.onsiteSearchResultsType.indexOf("click")>-1){G="true";break}if("true"==G){var W=b[z].attributes.onsiteSearchResults;W=parseInt(W)+1,t.eVar23=W.toString(),l+="event48,"}}if(u.indexOf("templates/dealerlocator")>-1&&(_satellite.logger.log(window.location.href),_satellite.logger.log(window.location.hash),""==window.location.hash?(M="SATELLITE: DLO Brand Selection Page Load triggered by _satellite.track",l+="event82,",t.eVar34="DLO: Brand Selection"):(l+="event50:"+f+document.location.hash.dtm_hashCode()+",event51,",(i(P,"BMW")||i(P,"BMW_I")||i(P,"BMWI")||i(P,"BMW_BMWM"))&&(_satellite.getVar("functionList"),t.eVar34="DLO: Search Start"))),v.indexOf("error-pool/")>-1&&(M="SATELLITE: Error Page Load triggered by _satellite.track",l+="event95,",t.pageName="",t.pageType="errorPage"),"bmw.ca"==o){var K=window.location.pathname;"/en/ssl/RTD.html"==K?l+="event996,":"/en/province-switch.html"==K&&(l+="event994,event995,")}var Y=a("pageNavData");if(Y&&(Y=JSON.parse(Y)),t.eVar16&&t.eVar16.split("~")&&t.eVar16.split("~").length&&"Not available"==t.eVar16.split("~")[1]&&Y){var J=c.split("?")[0].split("#")[0];J.indexOf("://")>-1&&(J=J.split("://")[1]),Y.eventInfo&&(t.eVar16="Internal Pagelink~"+Y.eventInfo.eventName+"~Not available~"+Y.eventInfo.cause+"~"+J+"~"+Y.eventInfo.target+"~"+Y.eventInfo.element),document.cookie="pageNavData=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.bmw.de"}if("DE"==s&&"de:L1Gebrauchtwagen:unxmainnav"===_satellite.getVar("internalCampaignParameter")&&(t.eVar16="Internal Pagelink~L1 Gebrauchtwagen~Uxn main navigation~Uxn main navigation~"+_satellite.getVar("referrer_url")+"~https://www.bmw.de/de/topics/gebrauchtfahrzeuge/gebrauchtwagenboerse.html?icp=de:l1gebrauchtwagen:unxmainnav"),P.indexOf("registration.html")>-1&&(l+="event35,"),void 0!==_satellite.cookie.get("bmwdtm_hq_perf")&&""!=_satellite.cookie.get("bmwdtm_hq_perf")){var X=_satellite.cookie.get("bmwdtm_hq_perf");json_data=JSON.parse(X),"ok"==json_data.status&&(l+="event345="+json_data.timeServer+",",l+="event346="+json_data.timeServerReact+",",l+="event347="+json_data.timeDOM+",",l+="event348="+json_data.timeContent+",",l+="event349="+json_data.timePageReady+",",t.eVar35=_satellite.getVar("perfTime_url"),t.eVar134=_satellite.getVar("perfTime_query"),t.eVar135=_satellite.getVar("perfTime_hash")),_satellite.cookie.set("bmwdtm_hq_perf","")}}y||(t.abort=!0),"true"==localStorage.getItem("sdsat_debug")&&_satellite.logger.log(M),("true"===_satellite.getVar("splitConsentEnabled")&&"undefined"!=typeof consentcontroller&&consentcontroller.api&&consentcontroller.api.showDisclaimer()||"false"===_satellite.getVar("splitConsentEnabled")&&"undefined"!=typeof cookiecontroller&&cookiecontroller.api&&cookiecontroller.api.showDisclaimer())&&(","==l.charAt(l.length-1)?l+="event231,":l+=",event231,"),l=l.slice(0,-1),t.events+=l;try{_satellite.logger.log("Asset Tracking | Assiging to s.products variable | Start"),null!=sessionStorage.getItem("bmw_dtm_resources")?(_satellite.logger.log("Asset Tracking | bmw_dtm_resources session storage found, s.products assigment | Start"),""!=t.events?t.events+=",event901,event902,event903":t.events="event901,event902,event903",t.products=sessionStorage.getItem("bmw_dtm_resources"),_satellite.logger.log("Asset Tracking | bmw_dtm_resources session storage found, s.products assigment | Completed")):_satellite.logger.log("Asset Tracking | bmw_dtm_resources session storage not found, s.products will not populate")}catch(e){_satellite.logger.log("All Pages - Asset Tracking - ",e)}if("bmw.fr"===o){var Z=_satellite.getVar("init_event");Z&&(t.events+=Z)}function Q(){function e(){a||(a=!0,window.CS_CONF&&(CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Adobe Analytics")))}var a=!1;window._uxa=window._uxa||[],_uxa.push(["afterPageView",e]);var r="_cs_mk",n="_cs_id",s="; "+document.cookie;if(s){var o=s.split("; "+r+"="),i=s.split("; "+n+"=");if(o.length>1&&i.length>1)return;function l(e){var a=Math.random()+"_"+Date.now();e&&(a=e),t.eVar131=a,_satellite.logger.log("contentsquare installation",t.eVar131);var n=function(){for(var e=0,t=document.domain,a=t.split("."),r="_gd"+(new Date).getTime();e<a.length-1&&-1==document.cookie.indexOf(r+"="+r);)t=a.slice(-1-++e).join("."),document.cookie=r+"="+r+";domain="+t+";";return document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}(),s=new Date,o=s.getTime();o+=18e5,s.setTime(o),document.cookie=r+"="+a+"; expires="+s.toUTCString()+";path=/;domain="+n,_uxa.push(["trackDynamicVariable",{key:"csMatchingKey",value:a}])}if(1==o.length)l();else{var c="";o&&(c=o[1].split(";")[0]),l(c)}}}"bmw.fr"!==o&&"bmw.co.uk"!==o&&"bmw.it"!==o||Q()}catch(e){_satellite.logger.error("All Pages Bottom - ",e)}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLba97d124fa364d7ba456ea6d0b88003a",name:"TPT - Bahrain - iFrame - RFO Forms DCR",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"iframe_forms_rfo"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw-bahrain.com",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"BH"}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC7dd132752ac54d18959618ad18789984-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb1a4e4034c334500b3006d162d8f8a54",name:"TPT - TT - AEM - Adwords - All Pages - PLR",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Chile - All pages - Adwords",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%geoRegion%",rightOperand:"TT"}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.tt",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCc7f38bd9905b4331b8f351c4b6e6b814-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2b5b2cb733eb44d19778b2aef90fff3e",name:"TPT - PA - AEM - Zendesk - All Pages - PLR - p15r[l]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.com.pa",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC229563d4392f4165b15da2b9b24276fc-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb19e5573d62c4a08a73096fb6c962695",name:"TPT - Dubai - AEM - Twitter - Multiple - PLR",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){try{window.addEventListener("re-trigger-third-party",(function(t){t.detail&&e()}))}catch(e){_satellite.logger.error("TPT - Dubai - Multiple - Twitter",e)}}},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"www.bmw-dubai.com"}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted_Tags%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RCe670ffe020124b9aaf45655250a6bfc7-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL580df89324e54be09df7937d2c5ed51b",name:"TPT - MU - AEM - Facebook - Multiple - p15r[c]",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bmw.mu",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%isRegulationAccepted%",rightOperand:"true"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/717b2dc27cb7/741392a4b6ea/09004b8e37a7/RC4745e72c487544fdbde02e02f248bbc6-source.min.js",language:"javascript",isExternal:!0}}]}]};var _satellite=function(){"use strict";function e(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function t(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}function a(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(a){var r=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,r.get?r:{enumerable:!0,get:function(){return e[a]}})})),t}function r(e){var t={exports:{}};return e(t,t.exports),t.exports}function n(e){var t=this.constructor;return this.then((function(a){return t.resolve(e()).then((function(){return a}))}),(function(a){return t.resolve(e()).then((function(){return t.reject(a)}))}))}function s(e){return Boolean(e&&void 0!==e.length)}function o(){}function i(e,t){return function(){e.apply(t,arguments)}}function l(e){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,l._immediateFn((function(){var a=1===e._state?t.onFulfilled:t.onRejected;if(null!==a){var r;try{r=a(e._value)}catch(e){return void u(t.promise,e)}d(t.promise,r)}else(1===e._state?d:u)(t.promise,e._value)}))):e._deferreds.push(t)}function d(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var a=t.then;if(t instanceof l)return e._state=3,e._value=t,void g(e);if("function"==typeof a)return void p(i(a,t),e)}e._state=1,e._value=t,g(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,g(e)}function g(e){2===e._state&&0===e._deferreds.length&&l._immediateFn((function(){e._handled||l._unhandledRejectionFn(e._value)}));for(var t=0,a=e._deferreds.length;t<a;t++)c(e,e._deferreds[t]);e._deferreds=null}function m(e,t,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=a}function p(e,t){var a=!1;try{e((function(e){a||(a=!0,d(t,e))}),(function(e){a||(a=!0,u(t,e))}))}catch(e){if(a)return;a=!0,u(t,e)}}function v(e){return!0===Ye(e)&&"[object Object]"===Object.prototype.toString.call(e)}function b(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e){return"string"==typeof e&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")}function _(e){return e.substr(0,e.indexOf("["))}function h(e,t,a){if(e.length&&Je(t)){var r=e[0];if(1!==e.length){var n=e.slice(1);if(!f(r))return h(n,t[r],a);var s=t[r=_(r)];Array.isArray(s)&&s.forEach((function(e){return h(n,e,a)}))}else t.hasOwnProperty(r)&&"string"==typeof t[r]&&(t[r]=a(t[r]))}}if(window.atob){var V=document,C=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,w=t()?Object.assign:function(t){for(var a,r,n=e(t),s=1;s<arguments.length;s++){for(var o in a=Object(arguments[s]))y.call(a,o)&&(n[o]=a[o]);if(C){r=C(a);for(var i=0;i<r.length;i++)P.call(a,r[i])&&(n[r[i]]=a[r[i]])}}return n},R=w,j=window,A=function(e,t,a,r){var n,s=Boolean(t&&Array.isArray(a)),o=Boolean(s&&e),i=document.createElement("a");if(s){var l=function(){var e=new Error("Unable to find the Library Embed Code for Dynamic Host Resolution.");throw e.code="dynamic_host_resolver_constructor_error",e};if(e&&(/^((https?:)?\/\/).+/.test(e)||l(),/^\/\/.+/.test(e)?i.href=j.location.protocol+e:i.href=e),i.hostname||l(),-1===a.indexOf(i.hostname)){var c=new Error("This library is not authorized for this domain. Please contact your CSM for more information.");throw c.code="dynamic_host_not_allowed",c}}var d=function(){if(null!=n)return n;if(o){var e=i.host;/:80$/.test(e)?e=e.replace(":80",""):/:80\/$/.test(e)?e=e.replace(":80/",""):/:443$/.test(e)?e=e.replace(":443",""):/:443\/$/.test(e)&&(e=e.replace(":443/","")),n=i.protocol+"//"+e}else n="";return n},u=function(e){return o&&"string"==typeof e?[d(),"/"===e.charAt(0)?e.slice(1):e].join("/"):e},g={getTurbineHost:d,decorateWithDynamicHost:u,get isDynamicEnforced(){return s}};return j&&r.onDebugChanged((function(e){e?j.dynamicHostResolver=g:delete j.dynamicHostResolver})),g},T=function(e){var t=[];return e.forEach((function(e){e.events&&e.events.forEach((function(a){t.push({rule:e,event:a})}))})),t.sort((function(e,t){return e.event.ruleOrder-t.event.ruleOrder}))},O="debug",D=function(e,t){var a=function(){return"true"===e.getItem(O)},r=function(t){e.setItem(O,t)},n=[],s=function(e){n.push(e)};return t.outputEnabled=a(),{onDebugChanged:s,getDebugEnabled:a,setDebugEnabled:function(e){a()!==e&&(r(e),t.outputEnabled=e,n.forEach((function(t){t(e)})))}}},I="Module did not export a function.",E=function(e,t,a){return function(r,n,s){s=s||[];var o=e.getModuleExports(r.modulePath);if("function"!=typeof o)throw new Error(I);var i=e.getModuleDefinition(r.modulePath),l=r.settings||{};!r.hasTransformedFilePaths&&i.filePaths&&(a(l,i.filePaths,r.modulePath),r.hasTransformedFilePaths=!0);var c=t(l,n);return o.bind(null,c).apply(null,s)}},S=function(e){return"string"==typeof e?e.replace(/\s+/g," ").trim():e},k={LOG:"log",INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error"},L="\ud83d\ude80",x=10===parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])?"[Launch]":L,N=!1,F=function(e){if(N&&window.console){var t=Array.prototype.slice.call(arguments,1);t.unshift(x),e!==k.DEBUG||window.console[e]||(e=k.INFO),window.console[e].apply(window.console,t)}},M=F.bind(null,k.LOG),q=F.bind(null,k.INFO),U=F.bind(null,k.DEBUG),B=F.bind(null,k.WARN),H=F.bind(null,k.ERROR),G=function(){var e=N;N=!0,F.apply(null,Array.prototype.concat(k.WARN,Array.prototype.slice.call(arguments))),e||(N=!1)},z={log:M,info:q,debug:U,warn:B,error:H,deprecation:G,get outputEnabled(){return N},set outputEnabled(e){N=e},createPrefixedLogger:function(e){var t="["+e+"]";return{log:M.bind(null,t),info:q.bind(null,t),debug:U.bind(null,t),warn:B.bind(null,t),error:H.bind(null,t)}}},W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},K=r((function(e){!function(t){if(e.exports=t(),!!0){var a=window.Cookies,r=window.Cookies=t();r.noConflict=function(){return window.Cookies=a,r}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var r in a)t[r]=a[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function a(r){function n(){}function s(t,a,s){if("undefined"!=typeof document){"number"==typeof(s=e({path:"/"},n.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var o=JSON.stringify(a);/^[\{\[]/.test(o)&&(a=o)}catch(e){}a=r.write?r.write(a,t):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var i="";for(var l in s)s[l]&&(i+="; "+l,!0!==s[l]&&(i+="="+s[l].split(";")[0]));return document.cookie=t+"="+a+i}}function o(e,a){if("undefined"!=typeof document){for(var n={},s=document.cookie?document.cookie.split("; "):[],o=0;o<s.length;o++){var i=s[o].split("="),l=i.slice(1).join("=");a||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(i[0]);if(l=(r.read||r)(l,c)||t(l),a)try{l=JSON.parse(l)}catch(e){}if(n[c]=l,e===c)break}catch(e){}}return e?n[e]:n}}return n.set=s,n.get=function(e){return o(e,!1)},n.getJSON=function(e){return o(e,!0)},n.remove=function(t,a){s(t,"",e(a,{expires:-1}))},n.defaults={},n.withConverter=a,n}return a((function(){}))}))})),Y={get:K.get,set:K.set,remove:K.remove},J="com.adobe.reactor.",X=function(e,t){var a=J+(t||"");return{getItem:function(t){try{return j[e].getItem(a+t)}catch(e){return null}},setItem:function(t,r){try{return j[e].setItem(a+t,r),!0}catch(e){return!1}}}},Z="_sdsat_",Q="dataElements.",$="dataElementCookiesMigrated",ee=X("localStorage"),te=X("sessionStorage",Q),ae=X("localStorage",Q),re={PAGEVIEW:"pageview",SESSION:"session",VISITOR:"visitor"},ne={},se=function(e){var t;try{t=JSON.stringify(e)}catch(e){}return t},oe=function(e,t,a){var r;switch(t){case re.PAGEVIEW:return void(ne[e]=a);case re.SESSION:return void((r=se(a))&&te.setItem(e,r));case re.VISITOR:return void((r=se(a))&&ae.setItem(e,r))}},ie=function(e,t){var a=Y.get(Z+e);void 0!==a&&oe(e,t,a)},le=function(e){ee.getItem($)||(Object.keys(e).forEach((function(t){ie(t,e[t].storageDuration)})),ee.setItem($,!0))},ce={setValue:oe,getValue:function(e,t){var a;switch(t){case re.PAGEVIEW:return ne.hasOwnProperty(e)?ne[e]:null;case re.SESSION:return null===(a=te.getItem(e))?a:JSON.parse(a);case re.VISITOR:return null===(a=ae.getItem(e))?a:JSON.parse(a)}},migrateCookieData:le},de=function(e,t,a,r){return"Failed to execute data element module "+e.modulePath+" for data element "+t+". "+a+(r?"\n"+r:"")},ue=function(e,t,a,r,n){return function(s,o){var i=t(s);if(!i)return r?"":void 0;var l,c,d=i.storageDuration;try{l=e.getModuleExports(i.modulePath),c=e.getModuleDefinition(i.modulePath)}catch(e){return void z.error(de(i,s,e.message,e.stack))}if("function"==typeof l){var u,g=i.settings||{};!i.hasTransformedFilePaths&&c.filePaths&&(n(g,c.filePaths,i.modulePath),i.hasTransformedFilePaths=!0);try{u=l(a(g,o),o)}catch(e){return void z.error(de(i,s,e.message,e.stack))}return d&&(null!=u?ce.setValue(s,d,u):u=ce.getValue(s,d)),null==u&&null!=i.defaultValue&&(u=i.defaultValue),"string"==typeof u&&(i.cleanText&&(u=S(u)),i.forceLowerCase&&(u=u.toLowerCase())),u}z.error(de(i,s,"Module did not export a function."))}},ge={text:function(e){return e.textContent},cleanText:function(e){return S(e.textContent)}},me=function(e,t,a){for(var r,n=e,s=0,o=t.length;s<o;s++){if(null==n)return;var i=t[s];if(a&&"@"===i.charAt(0)){var l=i.slice(1);n=ge[l](n)}else if(n.getAttribute&&(r=i.match(/^getAttribute\((.+)\)$/))){var c=r[1];n=n.getAttribute(c)}else n=n[i]}return n},pe=function(e,t,a){return function(r,n){var s;if(t(r))s=a(r,n);else{var o=r.split("."),i=o.shift();"this"===i?n&&(s=me(n.element,o,!0)):"event"===i?n&&(s=me(n,o)):"target"===i?n&&(s=me(n.target,o)):s=me(e[i],o)}return s}},ve=function(e,t){return function(a){var r=a.split(".")[0];return Boolean(t(a)||"this"===r||"event"===r||"target"===r||e.hasOwnProperty(r))}},be=function(e,t,a){var r={exports:{}};return e.call(r.exports,r,r.exports,t,a),r.exports},fe=function(){var e={},t=function(t){var a=e[t];if(!a)throw new Error("Module "+t+" not found.");return a},a=function(){Object.keys(e).forEach((function(e){try{r(e)}catch(a){var t="Error initializing module "+e+". "+a.message+(a.stack?"\n"+a.stack:"");z.error(t)}}))},r=function(e){var a=t(e);return a.hasOwnProperty("exports")||(a.exports=be(a.definition.script,a.require,a.turbine)),a.exports};return{registerModule:function(t,a,r,n,s){var o={definition:a,extensionName:r,require:n,turbine:s};o.require=n,e[t]=o},hydrateCache:a,getModuleExports:r,getModuleDefinition:function(e){return t(e).definition},getModuleExtensionName:function(e){return t(e).extensionName}}},_e=!1,he=function(e){return function(t,a){var r=e._monitors;r&&(_e||(z.warn("The _satellite._monitors API may change at any time and should only be used for debugging."),_e=!0),r.forEach((function(e){e[t]&&e[t](a)})))}},Ve=function(e,t,a){var r,n,s,o,i=[],l=function(r,n,s){if(!e(n))return r;i.push(n);var o=t(n,s);return i.pop(),null==o&&a?"":o};return r=function(e,t){var a=/^%([^%]+)%$/.exec(e);return a?l(e,a[1],t):e.replace(/%(.+?)%/g,(function(e,a){return l(e,a,t)}))},n=function(e,t){for(var a={},r=Object.keys(e),n=0;n<r.length;n++){var s=r[n],i=e[s];a[s]=o(i,t)}return a},s=function(e,t){for(var a=[],r=0,n=e.length;r<n;r++)a.push(o(e[r],t));return a},o=function(e,t){return"string"==typeof e?r(e,t):Array.isArray(e)?s(e,t):"object"==typeof e&&null!==e?n(e,t):e},function(e,t){return i.length>10?(z.error("Data element circular reference detected: "+i.join(" -> ")),e):o(e,t)}},Ce=function(e){return function(){if("string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var a in t)e[a]=t[a]}}},ye=setTimeout;l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){var a=new this.constructor(o);return c(this,new m(e,t,a)),a},l.prototype.finally=n,l.all=function(e){return new l((function(t,a){function r(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var i=s.then;if("function"==typeof i)return void i.call(s,(function(t){r(e,t)}),a)}n[e]=s,0==--o&&t(n)}catch(e){a(e)}}if(!s(e))return a(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);for(var o=n.length,i=0;i<n.length;i++)r(i,n[i])}))},l.resolve=function(e){return e&&"object"==typeof e&&e.constructor===l?e:new l((function(t){t(e)}))},l.reject=function(e){return new l((function(t,a){a(e)}))},l.race=function(e){return new l((function(t,a){if(!s(e))return a(new TypeError("Promise.race accepts an array"));for(var r=0,n=e.length;r<n;r++)l.resolve(e[r]).then(t,a)}))},l._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){ye(e,0)},l._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var Pe=a(Object.freeze({__proto__:null,default:l})),we="undefined"!=typeof window&&window.Promise||void 0!==W&&W.Promise||Pe.default||Pe,Re=function(e,t,a){return function(r,n,s,o){return o.then((function(){var o,i=r.delayNext;return new we((function(t,a){var n=e(r,s,[s]);if(!i)return t();var l=r.timeout,c=new we((function(e,t){o=setTimeout((function(){t(new Error("A timeout occurred because the action took longer than "+l/1e3+" seconds to complete. "))}),l)}));we.race([n,c]).then(t,a)})).catch((function(e){return clearTimeout(o),e=t(e),a(r,n,e),we.reject(e)})).then((function(){clearTimeout(o)}))}))}},je=function(e,t,a,r,n){return function(s,o,i,l){return l.then((function(){var l;return new we((function(t,a){var r=e(s,i,[i]),n=s.timeout,o=new we((function(e,t){l=setTimeout((function(){t(new Error("A timeout occurred because the condition took longer than "+n/1e3+" seconds to complete. "))}),n)}));we.race([r,o]).then(t,a)})).catch((function(e){return clearTimeout(l),e=t(e),r(s,o,e),we.reject(e)})).then((function(e){if(clearTimeout(l),!a(s,e))return n(s,o),we.reject()}))}))}},Ae=we.resolve(),Te=function(e,t,a){return function(r,n){return r.conditions&&r.conditions.forEach((function(t){Ae=e(t,r,n,Ae)})),r.actions&&r.actions.forEach((function(e){Ae=t(e,r,n,Ae)})),Ae=(Ae=Ae.then((function(){a(r)}))).catch((function(){}))}},Oe=function(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)},De=function(e,t,a,r){return function(n,s){var o;if(n.conditions)for(var i=0;i<n.conditions.length;i++){o=n.conditions[i];try{var l=e(o,s,[s]);if(Oe(l))throw new Error("Rule component sequencing must be enabled on the property for this condition to function properly.");if(!t(o,l))return a(o,n),!1}catch(e){return r(o,n,e),!1}}return!0}},Ie=function(e,t){return function(a,r){e(a,r)&&t(a,r)}},Ee=function(e){return function(t){var a=e.getModuleDefinition(t.modulePath);return a&&a.displayName||t.modulePath}},Se=function(e){return function(t){var a=t.rule,r=t.event,n=e.getModuleDefinition(r.modulePath).name;return{$type:e.getModuleExtensionName(r.modulePath)+"."+n,$rule:{id:a.id,name:a.name}}}},ke=function(e,t,a,r,n,s){return function(o,i){var l=i.rule,c=i.event;c.settings=c.settings||{};try{var d=n(i);t(c,null,[function(t){var r=a(d,t);o((function(){e(r,l)}))}])}catch(e){s.error(r(c,l,e))}}},Le=function(e,t,a,r){return function(n,s,o){var i=t(n);a.error(e(i,s.name,o)),r("ruleActionFailed",{rule:s,action:n})}},xe=function(e,t,a,r){return function(n,s,o){var i=t(n);a.error(e(i,s.name,o)),r("ruleConditionFailed",{rule:s,condition:n})}},Ne=function(e,t,a){return function(r,n){var s=e(r);t.log('Condition "'+s+'" for rule "'+n.name+'" was not met.'),a("ruleConditionFailed",{rule:n,condition:r})}},Fe=function(e,t){return function(a){e.log('Rule "'+a.name+'" fired.'),t("ruleCompleted",{rule:a})}},Me=function(e,t,a){return function(r,n){var s;if(r.actions)for(var o=0;o<r.actions.length;o++){s=r.actions[o];try{e(s,n,[n])}catch(e){return void t(s,r,e)}}a(r)}},qe=function(e,t,a,r){return function(n,s){
r("ruleTriggered",{rule:s}),e?a(s,n):t(s,n)}},Ue=function(e,t,a){return'Failed to execute "'+e+'" for "'+t+'" rule. '+a.message+(a.stack?"\n"+a.stack:"")},Be=function(e,t){return t&&!e.negate||!t&&e.negate},He=[],Ge=!1,ze=function(e){Ge?e():He.push(e)},We=function(e,t,a){e(t).forEach((function(e){a(ze,e)})),Ge=!0,He.forEach((function(e){e()})),He=[]},Ke=function(e){if(e||(e=new Error("The extension triggered an error, but no error information was provided.")),!(e instanceof Error)){var t="object"==typeof e?JSON.stringify(e):String(e);e=new Error(t)}return e},Ye=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)},Je=function(e){var t,a;return!1!==v(e)&&("function"==typeof(t=e.constructor)&&(!1!==v(a=t.prototype)&&!1!==a.hasOwnProperty("isPrototypeOf")))},Xe=function(e,t){return Je(t=t||{})?t=R({},t,e):R(t,e),t.hasOwnProperty("type")||Object.defineProperty(t,"type",{get:function(){return z.deprecation("Accessing event.type in Adobe Launch has been deprecated and will be removed soon. Please use event.$type instead."),t.$type}}),t},Ze=function(e,t){return function(a,r){var n=e[a];if(n){var s=n.modules;if(s)for(var o=Object.keys(s),i=0;i<o.length;i++){var l=o[i],c=s[l];if(c.shared&&c.name===r)return t.getModuleExports(l)}}}},Qe=function(e,t){return function(){return t?e(t):{}}},$e=function(e,t,a){return function(r){if(a){var n=r.split(".");n.splice(n.length-1||1,0,"min"),r=n.join(".")}return e(t)+r}},et=".js",tt=function(e){return e.substr(0,e.lastIndexOf("/"))},at=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},rt=function(e,t){at(t,et)||(t+=et);var a=t.split("/"),r=tt(e).split("/");return a.forEach((function(e){e&&"."!==e&&(".."===e?r.length&&r.pop():r.push(e))})),r.join("/")},nt=function(e,t){return new we((function(a,r){t.onload=function(){a(t)},t.onerror=function(){r(new Error("Failed to load script "+e))}}))},st=function(e){var t=document.createElement("script");t.src=e,t.async=!0;var a=nt(e,t);return document.getElementsByTagName("head")[0].appendChild(t),a},ot=function(e,t,a,r){t=t||"&",a=a||"=";var n={};if("string"!=typeof e||0===e.length)return n;var s=/\+/g;e=e.split(t);var o=1e3;r&&"number"==typeof r.maxKeys&&(o=r.maxKeys);var i=e.length;o>0&&i>o&&(i=o);for(var l=0;l<i;++l){var c,d,u,g,m=e[l].replace(s,"%20"),p=m.indexOf(a);p>=0?(c=m.substr(0,p),d=m.substr(p+1)):(c=m,d=""),u=decodeURIComponent(c),g=decodeURIComponent(d),b(n,u)?Array.isArray(n[u])?n[u].push(g):n[u]=[n[u],g]:n[u]=g}return n},it=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},lt=function(e,t,a,r){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(r){var n=encodeURIComponent(it(r))+a;return Array.isArray(e[r])?e[r].map((function(e){return n+encodeURIComponent(it(e))})).join(t):n+encodeURIComponent(it(e[r]))})).join(t):r?encodeURIComponent(it(r))+a+encodeURIComponent(it(e)):""},ct=r((function(e,t){t.decode=t.parse=ot,t.encode=t.stringify=lt})),dt="@adobe/reactor-",ut={cookie:Y,document:V,"load-script":st,"object-assign":R,promise:we,"query-string":{parse:function(e){return"string"==typeof e&&(e=e.trim().replace(/^[?#&]/,"")),ct.parse(e)},stringify:function(e){return ct.stringify(e)}},window:j},gt=function(e){return function(t){if(0===t.indexOf(dt)){var a=t.substr(dt.length),r=ut[a];if(r)return r}if(0===t.indexOf("./")||0===t.indexOf("../"))return e(t);throw new Error('Cannot resolve module "'+t+'".')}},mt=function(e,t,a,r,n,s,o){var i=e.extensions,l=e.buildInfo,c=e.environment,d=e.property.settings;if(i){var u=Ze(i,t);Object.keys(i).forEach((function(g){var m=i[g],p=m.settings;Array.isArray(m.filePaths)&&(p=s(p,m.filePaths));var v=Qe(r,p);if(m.modules){var b=z.createPrefixedLogger(m.displayName),f=$e(o,m.hostedLibFilesBaseUrl,l.minified),_={buildInfo:l,environment:c,property:{name:e.property.name,id:e.property.id},getDataElementValue:n,getExtensionSettings:v,getHostedLibFileUrl:f,getSharedModule:u,logger:b,propertySettings:d,replaceTokens:r,onDebugChanged:a.onDebugChanged,get debugEnabled(){return a.getDebugEnabled()}};Object.keys(m.modules).forEach((function(e){var a=m.modules[e],r=gt((function(a){var r=rt(e,a);return t.getModuleExports(r)}));t.registerModule(e,a,g,r,_)}))}})),t.hydrateCache()}return t},pt=function(e,t,a,r,n){var s=z.createPrefixedLogger("Custom Script");e.track=function(e){z.log('"'+e+'" does not match any direct call identifiers.')},e.getVisitorId=function(){return null},e.property={name:t.property.name,id:t.property.id},e.company=t.company,e.buildInfo=t.buildInfo,e.environment=t.environment,e.logger=s,e.notify=function(e,t){switch(z.deprecation("_satellite.notify is deprecated. Please use the `_satellite.logger` API."),t){case 3:s.info(e);break;case 4:s.warn(e);break;case 5:s.error(e);break;default:s.log(e)}},e.getVar=r,e.setVar=n,e.setCookie=function(e,t,a){var r="",n={};a&&(r=", { expires: "+a+" }",n.expires=a);var s='_satellite.setCookie is deprecated. Please use _satellite.cookie.set("'+e+'", "'+t+'"'+r+").";z.deprecation(s),Y.set(e,t,n)},e.readCookie=function(e){return z.deprecation('_satellite.readCookie is deprecated. Please use _satellite.cookie.get("'+e+'").'),Y.get(e)},e.removeCookie=function(e){z.deprecation('_satellite.removeCookie is deprecated. Please use _satellite.cookie.remove("'+e+'").'),Y.remove(e)},e.cookie=Y,e.pageBottom=function(){},e.setDebug=a;var o=!1;Object.defineProperty(e,"_container",{get:function(){return o||(z.warn("_satellite._container may change at any time and should only be used for debugging."),o=!0),t}})},vt=function(e){for(var t=V.querySelectorAll("script"),a=0;a<t.length;a++){var r=t[a];if(e.test(r.src))return r}},bt=function(e,t){return function(a,r,n){return e&&Je(a)&&Object.keys(a).length&&Array.isArray(r)&&r.length?(r.forEach((function(e){Boolean(null!=n&&/^core\/.*actions.*\/customCode\.js$/.test(n))&&"source"===e&&!a.isExternal||h(e.split("."),a,t)})),a):a}},ft={getTurbine:function(){return vt(new RegExp(/(launch|satelliteLib)-[^\/]+.js(\?.*)?$/))},byRegexPattern:vt}.getTurbine,_t=window._satellite;if(_t&&!window.__satelliteLoaded){window.__satelliteLoaded=!0;var ht=_t.container;delete _t.container;var Vt=R({},ht.buildInfo);Object.defineProperty(Vt,"environment",{get:function(){return z.deprecation("container.buildInfo.environment is deprecated.Please use `container.environment.stage` instead"),ht.environment.stage}}),ht.buildInfo=Vt;var Ct,yt=D(X("localStorage"),z),Pt="";V.currentScript&&V.currentScript.getAttribute("src")?Pt=V.currentScript.getAttribute("src"):ft()&&(Pt=ft().getAttribute("src"));try{Ct=A(Pt,Boolean(ht.company.dynamicCdnEnabled),ht.company.cdnAllowList,yt)}catch(e){throw z.warn("Please review the following error:"),e}var wt,Rt=bt(Ct.isDynamicEnforced,Ct.decorateWithDynamicHost),jt=fe(),At=ht.property.settings.undefinedVarsReturnEmpty,Tt=ht.property.settings.ruleComponentSequencingEnabled,Ot=ht.dataElements||{};ce.migrateCookieData(Ot);var Dt=function(e){return Ot[e]},It=function(){return wt.apply(null,arguments)},Et=ue(jt,Dt,It,At,Rt),St={},kt=Ce(St),Lt=ve(St,Dt),xt=pe(St,Dt,Et);wt=Ve(Lt,xt,At),pt(_t,ht,yt.setDebugEnabled,xt,kt),mt(ht,jt,yt,wt,Et,Rt,Ct.decorateWithDynamicHost);var Nt=he(_t),Ft=E(jt,wt,Rt),Mt=Ee(jt),qt=Ne(Mt,z,Nt),Ut=xe(Ue,Mt,z,Nt),Bt=Le(Ue,Mt,z,Nt),Ht=Fe(z,Nt),Gt=ke(qe(Tt,Ie(De(Ft,Be,qt,Ut),Me(Ft,Bt,Ht)),Te(je(Ft,Ke,Be,Ut,qt),Re(Ft,Ke,Bt),Ht),Nt),Ft,Xe,Ue,Se(jt),z);We(T,ht.rules||[],Gt)}return _t}console.warn("Adobe Launch is unsupported in IE 9 and below.")}();