define("ds2-showroom-tracking",["ds2-touch-detection","ds2-tracking","ds2-tracking-base","jquery"],(function(e,t,n,o){return a={20:function(e,t,n){var o,a;o=[t,n(404),n(646),n(494),n(485)],void 0===(a=function(e,n,o,a,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e,t){e.ds2TrackingShowroom(a.default.getOptions(t))},n=l(n),o=l(o),a=l(a),i=l(i),n.default.widget("digitals2.ds2TrackingShowroom",o.default,{_initialize(e){this._super(e)},_create(){const e=this,t=e._super();return(0,n.default)(e.element).on("ds2-showroom-highlight-change-image-event",((t,o)=>{let a,i=0;a="left"===o?(0,n.default)(".slick-list .slick-active",e.element).first():(0,n.default)(".slick-list .slick-active",e.element).last(),a&&(i=a.data("slickIndex")+1,a=a.find(".ds2-showroom-highlight__item"),e._trackEvents(t,a,i))})),(0,n.default)(e.element).on("ds2-showroom-open-layer-highlight-event",((t,o)=>{let a="";if((o=(0,n.default)(o)).parents(".ds2-showroom-highlight").length){a=o.parent().data("slickIndex")+1;let n=o.find(".ds2-showroom-highlight__item-text  .ds2-showroom-highlight__item-number").text();n?n+=" ":n="",n+=o.find(".ds2-showroom-highlight__item-text  .ds2-showroom-highlight__item-headline").text(),e._trackEvents(t,o,a,n,null,"Image",null,null,null)}})),(0,n.default)(e.element).on("ds2-showroom-open-layer-gallery-event",((t,o,a)=>{let i,l;a+=1,(o=(o=(0,n.default)(o)).find("div.slick-active [data-tracking-event]")).length>1&&(o=(0,n.default)(o[0])),o.find(".ds2-quote--quote-main-container").length>0&&(i=o.find(".ds2-quote--text").text().trim(),i=i.replace(/ +(?= )/g,""),l="Text item");let r="";o.find("img").length>0&&(r="open_image"),o.find("video").length>0&&(r="start_video"),e._trackEvents(t,o,a,l,null,null,"overlay view","Open image",i,r)})),(0,n.default)(e.element).on("ds2-showroom-line-switch-slide-event",((t,o,a)=>{let i;(o=(o=(0,n.default)(o)).find("div.slick-active")).length>1&&(o=(0,n.default)(o[0])),window&&(i=window.location.href),e._trackEvents(t,o,"","",null,"Other",null,"Open layer",i,"open_layer")})),(0,n.default)(e.element).on("ds2-showroom-image-click",((t,o)=>{o=(0,n.default)(o),e._trackEvents(t,o)})),(0,n.default)(e.element).on("ds2-showroom-start-video-event",((t,o,a,i)=>{let l;if((o=(0,n.default)(o)).parents(".ds2-showroom-mosaicgallery").length>0&&(i?(o=o.parent(),l=e._getElementPosition(o)):o=(0,n.default)(o.children()[0])),!l){let e=o.closest(".ds2-layer-fullsize").children();l=e.index(o.parent())+1,l||(e=o.closest(".slick-track").children(),l=e.index(o.closest(".slick-slide"))+1)}e._trackEvents(t,o,l,null,a,null,null,"Start video")})),(0,n.default)(e.element).on("ds2-showroom-close-layer-event",((t,o)=>{if((o=(0,n.default)(o)).closest(".ds2-showroom-mosaicgallery")){const a=(0,n.default)(o).prev().find(".slick-active").data("slick-index")+1;(o=(0,n.default)(o).prev().find("div.slick-active [data-tracking-event]")).length>1&&(o=(0,n.default)(o[0])),e._trackEvents(t,o,a,"Close overlay",null,"Other","","Close image",null,"close_image")}})),(0,n.default)(e.element).on("ds2-showroom-switch-line-layer-event",((t,o,a)=>{o=(0,n.default)(o),"details-layer"===a?(o=o.siblings(".ds2-showroom-line__item-overview-text-container").children(".ds2-link"),e._trackEvents(t,o,"")):o.closest(".ds2-showroom-line")&&e._trackEvents(t,o,"")})),(0,n.default)(".ds2-showroom-multicontent__nav-item",e.element).on("click",(t=>{const o=(0,n.default)(t.target),a=o.text().trim();e._trackMultiContent(t,o,a)})),(0,n.default)(e.element).on("ds2-showroom-multicontent-change-image-event",((t,o)=>{let a,l,r=(0,n.default)(e.element);const s=i.default.any;if((0,n.default)(e.element).find(".ds2-showroom-multicontent__nav").length>0){const t=(0,n.default)(e.element).find(".ds2-showroom-multicontent__nav li"),o=(0,n.default)(e.element).find(".ds2-showroom-multicontent__nav li.is-active"),a=t.index(o),i=(0,n.default)(e.element).find(".ds2-showroom-multicontent__slider-wrapper");r=(0,n.default)(i[a])}"left"===o?(l=s?"Previous Teaser":"Arrow Left",a=(0,n.default)(".slick-list .slick-active .ds2-showroom-multicontent__item",r).first()):(l=s?"Next Teaser":"Arrow Right",a=(0,n.default)(".slick-list .slick-active .ds2-showroom-multicontent__item",r).last()),a&&(t.currentTarget=a,e._trackMultiContent(t,a,l))})),(0,n.default)(e.element).get(0).addEventListener("ds2-showroom-preconfiguration-tracking",(t=>{const o=(0,n.default)(t.detail)[0];e._trackPreconfiguration(t,o)})),(0,n.default)(e.element).on("ds2-showroom-offer-change-slide",((t,o)=>{e._trackEvents(t,(0,n.default)(o))})),(0,n.default)(e.element).on("ds2-showroom-offer-download",((t,o)=>{e._trackOffers(t,(0,n.default)(o))})),(0,n.default)(e.element).on("ds2-showroom-offer-accordion",((t,o,a)=>{const i=(0,n.default)(o).data("header");a||(a=(0,n.default)(i).text()),e._trackEvents(t,(0,n.default)(o),!1,a)})),t},_trackPreconfiguration(e,t){const n=this;let o=n._getTrackOptionsData(t.target);const a=n._getTrackingEventData(t.target);if(o&&a){const i=a.eventInfo.eventName||t.eventName||"";t.eventInfoTarget&&(a.eventInfo.target=t.eventInfoTarget),o=n.bmwTrackOptionsBuilder.options().name(a.eventInfo.track||o.name||"").build();const l=n._populateClickEvent({currentTarget:t},o.name,a.eventInfo.target,i,a.eventInfo.cause,a.eventInfo.effect);l.eventInfo.eventAction=a.eventInfo.eventAction,l.eventInfo.element=a.eventInfo.element,l.category.mmdr=a.category.mmdr||n._getDataTrackingEventParentMMDRAttr(t.target),a.category&&(l.category.eventType=a.category.eventType),n._parseDataFromEvent(l,o,e,!0)}},_trackEvents(e,t,n,o,a,i,l,r,s,c){const d=this;let f=d._getTrackOptionsData(t);const u=d._getTrackingEventData(t);if(f&&u){o||(o=u.eventInfo.eventName),a&&(u.eventInfo.effect=a),i&&(u.eventInfo.element=i),(l||""===l)&&(u.eventInfo.cause=l),r&&(u.eventInfo.eventAction=r),s&&(u.eventInfo.target=s),c&&(u.eventInfo.track=c),"Start video"!==r||u.eventInfo.cause||(u.eventInfo.cause="Auto"),f=d.bmwTrackOptionsBuilder.options().name(u.eventInfo.track||f.name||"").build();const v=d._populateClickEvent({currentTarget:t},f.name,u.eventInfo.target,o,u.eventInfo.cause,u.eventInfo.effect);n&&(v.eventInfo.eventPoints="position-".concat(n)),v.eventInfo.eventAction=u.eventInfo.eventAction,v.eventInfo.element=u.eventInfo.element,d._parseDataFromEvent(v,f,e,!0)}},_trackMultiContent(e,t,n){const o=this;let a=o._getTrackOptionsData(t);const i=o._getTrackingEventData(t);if(a&&i){i.eventInfo.eventName=n,a=o.bmwTrackOptionsBuilder.options().name(i.eventInfo.track||a.name||"").build();const t=o._populateClickEvent(e,a.name,i.eventInfo.target,i.eventInfo.eventName,i.eventInfo.cause,i.eventInfo.effect);o._parseDataFromEvent(t,a,e,!0)}},_trackOffers(e,t){const n=this;let o=n._getTrackOptionsData(t);const a=n._getTrackingEventData(t);if(o&&a){"text link"==a.eventInfo.cause&&(a.eventInfo.cause=""),"Internal click"===a.eventInfo.eventAction&&(a.eventInfo.cause=""),o=n.bmwTrackOptionsBuilder.options().name(o.name||a.eventInfo.track||"").build();const t=n._populateClickEvent(e,o.name,a.eventInfo.target,a.eventInfo.eventName,a.eventInfo.cause,a.eventInfo.effect);t.eventInfo.element=a.eventInfo.element,n._parseDataFromEvent(t,o,e,!0)}},_getTrackingEventData(e){let t;try{t=JSON.parse((0,n.default)(e).attr("data-tracking-event"))}catch(e){t=null}return t},_getTrackingEventDataFromParent(e){const t=(0,n.default)(e).parents(".ds2-showroom-preconfiguration").find(".ds2-showroom-preconfiguration__item.is-active");return this._getTrackingEventData(t)},_getDataTrackingEventParentMMDRAttr(e){const t=this._getTrackingEventDataFromParent(e);return t.category.mmdr?t.category.mmdr:""},_getTrackOptionsData:e=>(0,n.default)(e).data("tracking-options")||null,_getElementPosition(e){const t=e.attr("class");return t&&t.indexOf("mosaicgallery-tile-")>-1&&t.indexOf("mosaicgallery-tile-")+19<t.length?t[t.indexOf("mosaicgallery-tile-")+19]-1:0}})}.apply(t,o))||(e.exports=a)},485:function(t){"use strict";t.exports=e},494:function(e){"use strict";e.exports=t},646:function(e){"use strict";e.exports=n},404:function(e){"use strict";e.exports=o}},i={},function e(t){var n=i[t];if(void 0!==n)return n.exports;var o=i[t]={exports:{}};return a[t](o,o.exports,e),o.exports}(20);var a,i}));