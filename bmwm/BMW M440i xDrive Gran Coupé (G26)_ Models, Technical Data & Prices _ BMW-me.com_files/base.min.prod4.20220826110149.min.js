window.ds2configurator=window.ds2configurator||{};window.ds2configurator.info=function(){return{gcdmUseCases:{RFO:"RFO",VCO:"VCO"}}};(function(a){window.ds2configurator.$=a})(window.jQuery);
(function(a){var f={};a.publish=function(g,b,d){d=d||0;!f[g]&&3>d?setTimeout(function(){a.publish(g,b,d+1)},200):f[g]&&a.each(f[g],function(){this.apply(a,b||[])})};a.subscribe=function(a,b){f[a]||(f[a]=[]);f[a].push(b);return[a,b]};a.unsubscribe=function(g){var b=g[0];f[b]&&a.each(f[b],function(a){this===g[1]&&f[b].splice(a,1)})}})(ds2configurator.$);window.integration=window.integration||{};window.integration.iframeintegration=window.integration.iframeintegration||{};
window.integration.iframeintegration.getAllHashParameter=function(){var a={};window.location.hash.substr(1).split("\x26").forEach(function(f){f=f.split("\x3d");a[f[0]]=f[1]});return a};window.integration.iframeintegration.extractAllUrlParameterPlaceholer=function(a){for(var f=[],g=/\$\{urlParameter\.([^\}]*)\}/g,b;b=g.exec(a);)0>f.indexOf(b[1])&&f.push(b[1]);return f};
window.integration.iframeintegration.getDeviceTypeSelector=function(){return 2==window.integration.deviceType?"mobile":1==window.integration.deviceType?"tablet":"default"};String.prototype.startsWith||(String.prototype.startsWith=function(a,f){f=f||0;return this.lastIndexOf(a,f)===f});
window.integration.getQueryParameters=function(){var a=window.location.href.replace("cf#",""),f="";-1!=a.indexOf("#")&&(a=a.split("#"),$.each(a,function(){0<this.length&&!this.startsWith("http")&&!this.startsWith("bookmark")&&(f+=this)}));return f};function isIphoneOrIpad(){return!!(0<navigator.userAgent.toLowerCase().indexOf("ipad")||0<navigator.userAgent.toLowerCase().indexOf("iphone"))}
require(["jquery"],function(a){var f=window.consentcontroller?window.consentcontroller.api:null,g=function(){this.init()};g.prototype={init:function(){f&&"SOFT_OPT_IN"===f.getRegulationType()&&this.initEventListener()},initEventListener:function(){this.initClickEventListener()},initClickEventListener:function(){var b=this,d=document.getElementsByTagName("body");0<d.length&&d[0].addEventListener("click",function(a){f&&f.showDisclaimer()&&(b.isConsentDrawerInteraction(a)||b.isRejectCookiesButton(a)||
b.isActionClick(a)&&b.acceptCookies())},!0);a(window).on("ds2-user-action",function(){f&&"SOFT_OPT_IN"===f.getRegulationType()&&f.showDisclaimer()&&b.acceptCookies()})},acceptCookies:function(){f&&f.consentdrawer.then(function(b){b.acceptSoftOptIn()})},isConsentDrawerInteraction:function(b){return b.target&&"epaas-consent-drawer-shell"===(b.target.tagName||"").toLowerCase()},isRejectCookiesButton:function(b){return 0<a(b.target).parents(".ds2-cookie-consent-settings--button-reject").length},isActionClick:function(b){b=
b.target;return this.isConsentNeeded(b)?!1:this.isTagOrContainedByTag(b,"a")||this.isTagOrContainedByTag(b,"button")||this.isTag(b,"select")||this.isTag(b,"input")||0<a("#bmw-configurator").length?!0:!1},isConsentNeeded:function(b){return 0<a(b).closest("[data-consent-needed\x3d'true']").length?!0:!1},isTag:function(b,a){return b.tagName&&b.tagName.toUpperCase()===a.toUpperCase()?!0:!1},isTagOrContainedByTag:function(b,d){return this.isTag(b,d)||0<a(b).closest(d).length?!0:!1}};return new g});
require(["jquery"],function(a){function f(){this.redirectFromCookie()}var g=f.prototype;g.redirectFromCookie=function(){if(!(0<a.find('[data-component-path\x3d"ds2-navigation-main"]').length)){var b=/\/content\/(forms\/af\/)?bmw\/market|^$\/i/,d=this.getLanguageFromCookie(),f=this.getLanguageFromPath();!this.isEmpty(d)&&3>=d.length&&d!=f&&1!=b.test(window.location.pathname)&&(b=this.findAlternateLink(d),this.isEmpty(b)&&(b=window.location.origin+"/"+d),""!==window.location.hash&&(b+=window.location.hash),
window.location.replace(b))}};g.getLanguageFromCookie=function(){var a=null;window.consentcontroller&&window.consentcontroller.api&&(a=window.consentcontroller.api.getCookie("lang_consentCookie"));this.isEmpty(a)||(a=a.replace("/",""));return a};g.getLanguageFromPath=function(){var a=window.location.pathname;var d=a.split("/");a.startsWith("/content")?(d=d[5],0<d.indexOf("_")&&(d=d.slice(0,d.indexOf("_")))):(a=d[1],0<d[1].indexOf("-")&&(a=d[1].split("-")[0]),d=a);return d};g.findAlternateLink=function(b){var d=
a("html").find("head").find('link[rel\x3d"alternate"]'),f=null;a.each(d,function(d,g){a(g).attr("hreflang")==b&&(f=a(g).attr("href"))});this.isEmpty(f)&&(f=this.defaultLink(b));return f};g.defaultLink=function(b){var d=window.location.origin,f="";a.each(this.alternateLinks,function(a,d){d.language==b&&(f=d.path)});f.startsWith("http://")&&f.startsWith("https://")||(f=d+f);return f};g.isEmpty=function(b){return null==b||void 0==b||0<=b.indexOf("undefined")||0<=b.indexOf("null")||0==a.trim(b).length?
!0:!1};new f});
window.onload=function(){var a=navigator.userAgent,f=navigator.appName,g=""+parseFloat(navigator.appVersion),b=parseInt(navigator.appVersion,10),d=0,m="",k,l;-1!=(k=a.indexOf("Opera"))?(f="Opera",g=a.substring(k+6),-1!=(k=a.indexOf("Version"))&&(g=a.substring(k+8)),d=15,m="http://www.opera.com/browser/"):-1!=(k=a.indexOf("MSIE"))||-1!=(k=a.indexOf("Microsoft Internet Explorer"))?(f="Internet Explorer",g=a.substring(k+5),d=9,m="http://windows.microsoft.com/de-DE/internet-explorer/downloads/ie"):-1!=
(k=a.indexOf("Chrome"))?(f="Chrome",g=a.substring(k+7),d=-1!=(k=a.indexOf("Mobile"))||-1!=(k=a.indexOf("Android"))?28:35,m="http://www.google.com/chrome?hl\x3dde"):-1!=(k=a.indexOf("Safari"))?(f="Safari",g=a.substring(k+7),-1!=(k=a.indexOf("Version"))&&(g=a.substring(k+8)),d=-1!=(k=a.indexOf("Mobile"))||-1!=(k=a.indexOf("Android"))?4:6,m="https://www.apple.com/de/safari/"):-1!=(k=a.indexOf("Firefox"))?(f="Firefox",g=a.substring(k+8),d=30,m="http://www.mozilla.com/firefox/"):(b=a.lastIndexOf(" ")+
1)<(k=a.lastIndexOf("/"))&&(f=a.substring(b,k),g=a.substring(k+1),f.toLowerCase()==f.toUpperCase()&&(f=navigator.appName));-1!=(l=g.indexOf(";"))&&(g=g.substring(0,l));-1!=(l=g.indexOf(" "))&&(g=g.substring(0,l));b=parseInt(""+g,10);isNaN(b)&&(g=""+parseFloat(navigator.appVersion),b=parseInt(navigator.appVersion,10));if(b<d){g=function(a,b){b||(b=document);b=b.getElementsByTagName("*");for(var d=-1,f,k=[];f=b[++d];)-1<(" "+(f["class"]||f.className)+" ").indexOf(" "+a+" ")&&k.push(f);return k};l=g("ds2-layer-error-old-browser--browser-name");
for(a=-1;b=l[++a];)b.innerHTML=f;f=g("ds2-layer-error-old-browser--browser-minversion");for(a=-1;l=f[++a];)l.innerHTML=d;d=g("ds2-layer-error-old-browser--browser-link");for(a=-1;f=d[++a];)f.href=m;if(m=document.getElementById("ds2-messages-js--browser-error"))m.style.display="block",m.style.opacity=1}else document.getElementById("ds2-messages-js--browser-error")&&(document.getElementById("ds2-messages-js--browser-error").innerHTML="")};
var languageredirect=!1,ds2DataLanguage=ds2DataLanguage||void 0,ds2RedirectOnLanguageCookie=ds2RedirectOnLanguageCookie||void 0,ds2RedirectOnLanguageCookieOptions=ds2RedirectOnLanguageCookieOptions||void 0;window.digitals2=window.digitals2||{};
window.digitals2.cookieLanguage=function(){return{init:function(){var a=this;window.consentcontroller&&window.consentcontroller.api&&window.consentcontroller.api.addEventListener("consentcontroller.api.initialized",function(f){a._afterCookieControllerInitialized()})},_afterCookieControllerInitialized:function(){if(window.consentcontroller.api.isBrowserPersistenceEnabled(window.consentcontroller.api.ENUM_PERSISTENCE_TYPE.COOKIE)){this.languageSelectionClick();var a=window.consentcontroller.api.getCookie("lang_consentCookie");
this._languagePageRedirect(a);this._languageCookieRedirect(a)}},_languagePageRedirect:function(a){window.consentcontroller.api.isBrowserPersistenceEnabled(window.consentcontroller.api.ENUM_PERSISTENCE_TYPE.COOKIE)&&ds2DataLanguage&&ds2DataLanguage.languagePath&&!a&&(languageredirect=!0,window.location.replace(ds2DataLanguage.languagePath))},_languageCookieRedirect:function(a){if(window.consentcontroller.api.isBrowserPersistenceEnabled(window.consentcontroller.api.ENUM_PERSISTENCE_TYPE.COOKIE))if(ds2DataLanguage&&
1==ds2DataLanguage.homepage&&a&&a!=ds2DataLanguage.currLanguagePath)languageredirect=!0,window.location.replace(a);else if(ds2RedirectOnLanguageCookie&&a)for(var f in ds2RedirectOnLanguageCookieOptions)if(-1!==f.indexOf(a)){languageredirect=!0;window.location.replace(ds2RedirectOnLanguageCookieOptions[f]);break}},languageSelectionClick:function(){$(window).ready(function(){$("a[data-lang]").on("click",function(a){a.preventDefault();a.stopImmediatePropagation();var f=$(this).data("lang");f&&(console.log("data-lang",
f),window.consentcontroller.api.addEventListener(window.consentcontroller.api.ENUM_EVENT.EVENT_INITIALIZED,function(a){window.consentcontroller.api.setPersistence("lang_consentCookie",f)}));$(this).data("province-page")&&""!==$(this).data("province-page")?window.location.href=$(this).data("province-page"):1<$(this).attr("href").length&&(window.location.href=$(this).attr("href"))})})}}}();window.digitals2.cookieLanguage.init();window.digitals2=window.digitals2||{};
var ds2DataProvince=ds2DataProvince||void 0;
window.digitals2.cookieProvince=function(){return{init:function(){var a=this;window.consentcontroller&&window.consentcontroller.api&&consentcontroller.api.addEventListener("consentcontroller.api.initialized",function(f){a._afterCookieControllerInitialized()})},_afterCookieControllerInitialized:function(){if(window.consentcontroller.api.isBrowserPersistenceEnabled(window.consentcontroller.api.ENUM_PERSISTENCE_TYPE.COOKIE)){this.provinceSelectionClick();var a=window.consentcontroller.api.getPersistence("prov_consentCookie");
this._provincePageRedirect(a);this._provinceCookieRedirect(a)}},_provincePageRedirect:function(a){if(!window.consentcontroller.api.isBrowserPersistenceEnabled(window.consentcontroller.api.ENUM_PERSISTENCE_TYPE.COOKIE)&&ds2DataProvince&&ds2DataProvince.provinceList){a=ds2DataProvince.provinceList||[];var f=window.location.href.split("#/").shift().split(".html").shift().split("/").pop().split(".")||[];for(var g=0;g<a.length;g++)for(var b=0;b<f.length;b++)if(a[g]==f[b])return}},_provinceCookieRedirect:function(a){window.consentcontroller.api.isBrowserPersistenceEnabled(window.consentcontroller.api.ENUM_PERSISTENCE_TYPE.COOKIE)},
provinceSelectionClick:function(){$(window).ready(function(){var a=window.location.hash.substr(1);$("a[data-province]").on("click",function(f){f.preventDefault();f.stopImmediatePropagation();$(this).data("province")&&(console.log("data-province",$(this).data("province")),window.consentcontroller.api.addEventListener(window.consentcontroller.api.ENUM_EVENT.EVENT_INITIALIZED,function(a){window.consentcontroller.api.setPersistence("prov_consentCookie",$(this).data("province"))}),1<a.length?provinceSelection.openProvinceSelectionModal("",
!0,0):1<$(this).attr("href").length&&provinceSelection.openProvinceSelectionModal("",!0,0))})})}}}();window.digitals2.cookieProvince.init();window.digitals2=window.digitals2||{};window.digitals2.$=$;
window.digitals2.responsivePlus={device:99,devices:["desktop","tablet","mobile"],handleScreenOrientation:function(){function a(){this.trackingObjectExists&&window.digitals2.tracking.trackingObj.setOrientation(window.innerWidth/window.innerHeight?"landscape":"portrait")}a();$(window).resize(function(){a()})},responsivePlusInit:function(){pResponsiveClass="";600>this.shortestScreenWidth()?(pResponsiveClass="ds2-responsive-plus-mobile",device=2):this.checkUserAgent()?630>this.shortestVPWidth()?(pResponsiveClass=
"ds2-responsive-plus-mobile",device=2):(pResponsiveClass="ds2-responsive-plus-tablet",device=1):(pResponsiveClass="ds2-responsive-plus-desktop",device=0);document.documentElement.className+=" "+pResponsiveClass},responsivePlusDeviceGet:function(){return device},responsivePlusDeviceSet:function(a){device=a},shortestVPWidth:function(){return Math.min(document.documentElement.clientWidth,window.innerWidth,document.documentElement.clientHeight,window.innerHeight||0)},shortestScreenWidth:function(){return Math.min(screen.width,
screen.height||0)},checkUserAgent:function(){var a=0;/ipad|android|silk|kindle|playbook|mobi/i.test(navigator.userAgent.toLowerCase())?a=1:/windows nt/i.test(navigator.userAgent.toLowerCase())&&/arm/i.test(navigator.userAgent.toLowerCase())&&(a=1);return a}};window.digitals2.responsivePlus.responsivePlusInit();window.integration=window.integration||{};window.integration.deviceType=function(){return window.digitals2.responsivePlus?window.digitals2.responsivePlus.responsivePlusDeviceGet():0}();
require(["componentInitializer"],function(a){a.init()});
var UCPDataService=function(a,f){function g(){var c=b();if(!selfUcpService.configurationSettings.pdhUrl||!selfUcpService.configurationSettings.mandator)return console.log("Missing PDH url and the mandator to get the UCP settings"),c;if(selfUcpService.configurationSettings&&selfUcpService.configurationSettings.ucpV3BaseUrl&&-1<selfUcpService.configurationSettings.ucpV3BaseUrl.indexOf("%")){for(var e=decodeURIComponent(selfUcpService.configurationSettings.ucpV3BaseUrl),h=0;-1<e.indexOf("%")&&10>h;)e=
decodeURIComponent(e),h+=1,console.log("Decoded url: ",e);selfUcpService.configurationSettings.ucpV3BaseUrl=e}q(selfUcpService.configurationSettings.pdhUrl+selfUcpService.configurationSettings.PDH_SETTING_ENDPOINT+"/"+selfUcpService.configurationSettings.mandator,"GET",null,null).then(function(e){if(e){selfUcpService.configurationSettings.ucpservices.configs=e;selfUcpService.configurationSettings.ucpservices.configs.context.brand=e.context.brands[0];selfUcpService.configurationSettings.ucpservices.configs.context.brands=
e.context.brands;if(e&&(selfUcpService.configurationSettings.ucpV3BaseUrl||(selfUcpService.configurationSettings.ucpV3BaseUrl=e.endpoint),!selfUcpService.configurationSettings.apiKey)){var h=selfUcpService.configurationSettings;a:{if(e.apikeys){e=e.apikeys;for(var w=0;w<e.length;w++){var a=e[w];if(a.endpoint===selfUcpService.configurationSettings.ucpV3BaseUrl){e=a.apikey;break a}}}else if(e.apikey){e=e.apikey;break a}e=void 0}h.apiKey=e}selfUcpService.isInitialized=!0}c.resolve(selfUcpService.configurationSettings)},
function(e){c.reject(e)});return c}function b(){return a.Deferred()}function d(){return{"x-api-key":selfUcpService.configurationSettings.apiKey,"Content-type":"application/json"}}function m(c){c=selfUcpService.configurationSettings.ucpservices.GET_SAVED_VEHICLE_BY_CONFIGURL.replace(selfUcpService.CONST.CONFIGURL_PARAM,c);return selfUcpService.configurationSettings.ucpV3BaseUrl+c}function k(){var c=r(),e=selfUcpService.configurationSettings.ucpservices.configs.context;c=selfUcpService.configurationSettings.ucpservices.GET_SERIES_NAME.replace(selfUcpService.CONST.SOURCE_PARAM,
e.source).replace(selfUcpService.CONST.BRAND_PARAM,e.brand).replace(selfUcpService.CONST.COUNTRY_PARAM,e.country).replace(selfUcpService.CONST.EFFECT_DATE_PARAM,c).replace(selfUcpService.CONST.APPLICATION_PARAM,e.application).replace(selfUcpService.CONST.LANGUAGE_PARAM,e.language).replace(selfUcpService.CONST.CLUSTER_PARAM,e.cluster).replace(selfUcpService.CONST.GFSPOLICY_PARAM,e.gfsPolicy);return selfUcpService.configurationSettings.ucpV3BaseUrl+c}function l(c){var e=b(),h=k();p(h).then(function(h){h[c]&&
h[c].phrases&&h[c].phrases.longDescription&&(selfUcpService.vehicle.seriesName=h[c].phrases.longDescription);e.resolve(h)},function(c){e.resolve(c)});return e}function n(c,e){var h=selfUcpService.configurationSettings.ucpservices.configs.context;c=selfUcpService.configurationSettings.ucpservices.GET_COSY_IMAGES.replace(selfUcpService.CONST.APPLICATION_PARAM,h.application).replace(selfUcpService.CONST.APPSHORT_PARAM,h.appShort?h.appShort:"h5-bmw").replace(selfUcpService.CONST.BRAND_PARAM,h.brand).replace(selfUcpService.CONST.MODEL_CODE_PARAM,
c).replace(selfUcpService.CONST.OPTIONS_PARAM,e);return selfUcpService.configurationSettings.ucpV3BaseUrl+c}function O(c){var e=b(),h=n(c.modelCode,c.options.join(","));c.cosyImageUrls={};c.cosyImageUrls[selfUcpService.CONST.FRONTSIDE_VIEW]="";c.cosyImageUrls[selfUcpService.CONST.SMALL_VEHICLE_34_VIEW]="";p(h).then(function(h){var a=h[selfUcpService.CONST.VEHICLE];a&&(a&&a[selfUcpService.CONST.FRONTSIDE_VIEW]&&(c.cosyImageUrls[selfUcpService.CONST.FRONTSIDE_VIEW]=a[selfUcpService.CONST.FRONTSIDE_VIEW].imageUrl),
a&&a[selfUcpService.CONST.SMALL_VEHICLE_34_VIEW]&&(c.cosyImageUrls[selfUcpService.CONST.SMALL_VEHICLE_34_VIEW]=a[selfUcpService.CONST.SMALL_VEHICLE_34_VIEW].imageUrl));e.resolve(h)},function(c){e.resolve(c)});return e}function P(c,e,h){var a=selfUcpService.configurationSettings.ucpservices.configs.context,b=a.brand;h&&(b=h);c=selfUcpService.configurationSettings.ucpservices.GET_COSY_GARAGE_IMAGES.replace(selfUcpService.CONST.APPLICATION_PARAM,a.application).replace(selfUcpService.CONST.APPSHORT_PARAM,
a.appShort?a.appShort:"h5-bmw").replace(selfUcpService.CONST.BRAND_PARAM,b).replace(selfUcpService.CONST.MODEL_CODE_PARAM,c).replace(selfUcpService.CONST.OPTIONS_PARAM,e);return selfUcpService.configurationSettings.ucpV3BaseUrl+c}function v(c){if(c.mandator&&c.mandator.brand)var e=c.mandator.brand;var h=b();e=P(c.modelCode,c.options.join(","),e);c.cosyImageUrls={};c.cosyImageUrls[selfUcpService.CONST.FRONTSIDE_VIEW]="";c.cosyImageUrls[selfUcpService.CONST.SMALL_VEHICLE_34_VIEW]="";p(e).then(function(e){if(e){var a=
e[selfUcpService.CONST.GARAGE];a&&(a&&a[selfUcpService.CONST.DT_GARGE]&&(c.cosyImageUrls[selfUcpService.CONST.FRONTSIDE_VIEW]=a[selfUcpService.CONST.DT_GARGE].imageUrl),a&&a[selfUcpService.CONST.SMALL_VEHICLE_34_VIEW]&&(c.cosyImageUrls[selfUcpService.CONST.SMALL_VEHICLE_34_VIEW]=a[selfUcpService.CONST.P_GARGE].imageUrl))}h.resolve(e)},function(c){h.resolve(c)});return h}function A(c){if(c&&selfUcpService.configurationSettings.apiKey){var e=b();c=m(c);p(c).then(function(c){if(c){selfUcpService.vehicle.modelCode=
c.configuration.modelCode;selfUcpService.vehicle.modelBaseCode=c.configuration.modelCode;selfUcpService.vehicle.configId=c.configId;selfUcpService.vehicle.options=c.configuration.options.sort();selfUcpService.vehicle.configUrl=selfUcpService.configurationSettings.conBaseUrl+selfUcpService.configurationSettings.CON_OPEN_CONFIGURATION_ENDPOINT.replace(selfUcpService.CONST.CONFIGURL_PARAM,c.configId);selfUcpService.vehicle.optionalEquipments=[];for(var a=0;a<selfUcpService.vehicle.options.length;a++)selfUcpService.vehicle.optionalEquipments.push({code:selfUcpService.vehicle.options[a],
name:"",netPrice:"",grossPrice:"",displayFlag:!0,standard:""})}c.mandator&&c.mandator.brand&&(selfUcpService.configurationSettings.ucpservices.configs.context.brand=c.mandator.brand);selfUcpService.vehicle&&selfUcpService.vehicle.modelCode?B(selfUcpService.vehicle.modelCode).then(function(){e.resolve(c)},function(){e.resolve(c)}):e.resolve(c)},function(c){e.reject(c)});return e}}function C(c,e){selfUcpService.vehicle.modelCode=c;selfUcpService.vehicle.modelBaseCode=c;selfUcpService.vehicle.options=
e.sort();selfUcpService.vehicle.optionalEquipments=[];for(c=0;c<selfUcpService.vehicle.options.length;c++)selfUcpService.vehicle.optionalEquipments.push({code:selfUcpService.vehicle.options[c],name:"",netPrice:"",grossPrice:"",displayFlag:!0,standard:""})}function t(c,e){if(null!=c){if(c&&c.category===e)return c;if((c=c.subNodes)&&0<c.length){var a=c.length-1,b=t(c[a],e);if(null!=b)return b;for(;null==b&&-1<a;)if(--a,b=t(c[a],e),null!=b)return b}}return null}function r(c){var e=new Date,a=D(e);if(c&&
selfUcpService.configurationDates[c]){var b=Date.parse(selfUcpService.configurationDates[c].earliestEffectDate);b>e&&(a=selfUcpService.configurationDates[c].earliestEffectDate)}return a}function D(c){var e=new Date,a=e.getUTCFullYear(),b=e.getMonth()+1,d=e.getDate();c&&(a=c.getUTCFullYear(),b=e.getMonth()+1,d=e.getDate());return""+a+"-"+(10>b?"0"+b:b)+"-"+(10>d?"0"+d:d)}function E(c){var e=b(),a=selfUcpService.configurationSettings.ucpservices.configs,d=a.context.brand;c.mandator&&c.mandator.brand&&
(d=c.mandator.brand);var f=r(c.modelCode);a={settings:{priceTree:a.priceTree?a.priceTree:"DEFAULT",ignoreInvalidOptionCodes:!0,ignoreInvalidOaIds:!0},validityDates:{effectDate:f,taxDate:D()},vehicleDatasource:{source:a.context.source,brand:d,gfsPolicy:a.context.gfsPolicy,cluster:a.context.cluster},configuration:{model:c.modelCode,selectedOptions:c.options}};d=selfUcpService.configurationSettings.ucpV3BaseUrl+selfUcpService.configurationSettings.ucpservices.POST_PRICE_CALCULATION.replace(selfUcpService.CONST.COUNTRY_PARAM,
selfUcpService.configurationSettings.ucpservices.configs.context.country);x(d,JSON.stringify(a)).then(function(a){if(a){var h=t(a.priceTreeNode,selfUcpService.CONST.MODEL_AND_OPTION_TOTAL),b=t(a.priceTreeNode,selfUcpService.CONST.MODEL_TOTAL);a=t(a.priceTreeNode,selfUcpService.CONST.OPTION_TOTAL);h&&h.effectivePrice&&(h=h.effectivePrice,c.totalNetPrice=""+h.netPrice,c.totalGrossPrice=""+h.grossPrice,c.grossPrice=""+h.grossPrice);b&&b.effectivePrice&&(b=b.effectivePrice,c.modelNetPrice=""+b.netPrice,
c.modelGrossPrice=""+b.grossPrice);if(a){if(b=a.effectivePrice)c.equipmentNetPrice=""+b.netPrice,c.equipmentGrossPrice=""+b.grossPrice;b=a.subNodes;c.optionalEquipments&&F(b,c.optionalEquipments)}e.resolve(c)}},function(c){e.resolve(c)});return e}function F(c,a){if(a&&0<c.length)for(var e=0;e<c.length;e++){var b=c[e];"OPTION"!=b.category&&0<b.subNodes.length&&F(b.subNodes,a);if("OPTION"==b.category)for(var d=0;d<a.length;d++){var f=a[d];if(f.code==b.key&&b.effectivePrice){f.netPrice=""+b.effectivePrice.netPrice;
f.grossPrice=""+b.effectivePrice.grossPrice;break}}}}function Q(c,a,b){var e=selfUcpService.configurationSettings.ucpservices.configs.context,h=e.brand;b&&(h=b);b=selfUcpService.configurationSettings.ucpservices.GET_OPTIONS_INFORMATIONS;var d=r(c);a=a.sort().join(",");b=b.replace(selfUcpService.CONST.BRAND_PARAM,h).replace(selfUcpService.CONST.SOURCE_PARAM,e.source).replace(selfUcpService.CONST.COUNTRY_PARAM,e.country).replace(selfUcpService.CONST.EFFECT_DATE_PARAM,d).replace(selfUcpService.CONST.ORDER_DATE_PARAM,
d).replace(selfUcpService.CONST.APPLICATION_PARAM,e.application).replace(selfUcpService.CONST.MODEL_CODE_PARAM,c).replace(selfUcpService.CONST.LANGUAGE_PARAM,e.language).replace(selfUcpService.CONST.OPTIONS_PARAM,a);return selfUcpService.configurationSettings.ucpV3BaseUrl+b}function G(c){if(c.mandator&&c.mandator.brand)var a=c.mandator.brand;a=Q(c.modelCode,c.options,a);var h=b();p(a).then(function(a){for(var e=0;e<c.optionalEquipments.length;e++){var b=c.optionalEquipments[e],d=a[b.code];d&&(d.phrases&&
(b.name=d.phrases.longDescription),b.displayFlag=1==d.displayTypeId,b.standard=""+d.std,b.type=d.type,b.isPaint="paint"==d.optionType,b.isFabric="fabric"==d.optionType);b.isPaint&&(c.paint=b);b.isFabric&&(c.fabric=b)}h.resolve(a)},function(c){h.resolve(c)});return h}function R(c,a){var e=selfUcpService.configurationSettings.ucpservices.configs.context,b=e.brand;a&&(b=a);a=r(c);c=selfUcpService.configurationSettings.ucpservices.GET_RANGE_CODE.replace(selfUcpService.CONST.SOURCE_PARAM,e.source).replace(selfUcpService.CONST.BRAND_PARAM,
b).replace(selfUcpService.CONST.COUNTRY_PARAM,e.country).replace(selfUcpService.CONST.EFFECT_DATE_PARAM,a).replace(selfUcpService.CONST.ORDER_DATE_PARAM,a).replace(selfUcpService.CONST.MODEL_CODE_PARAM,c);return selfUcpService.configurationSettings.ucpV3BaseUrl+c}function H(c){if(c.mandator&&c.mandator.brand)var a=c.mandator.brand;a=R(c.modelCode,a);var h=b();p(a).then(function(a){c.modelRange=a.modelRange;c.agModelCode=a.agModelCode;c.series=a.series;c.bodyStyle=a.bodyStyle;c.baseModelCode=a.agModelCode;
l(a.series).then(function(c){h.resolve(c)},function(c){h.resolve(c)})},function(c){h.resolve(c)});return h}function S(c,a){var e=selfUcpService.configurationSettings.ucpservices.configs.context,b=e.brand;a&&(b=a);a=r(c);c=selfUcpService.configurationSettings.ucpservices.GET_MODEL_NAME.replace(selfUcpService.CONST.SOURCE_PARAM,e.source).replace(selfUcpService.CONST.BRAND_PARAM,b).replace(selfUcpService.CONST.COUNTRY_PARAM,e.country).replace(selfUcpService.CONST.EFFECT_DATE_PARAM,a).replace(selfUcpService.CONST.APPLICATION_PARAM,
e.application).replace(selfUcpService.CONST.LANGUAGE_PARAM,e.language).replace(selfUcpService.CONST.MODEL_CODE_PARAM,c);return selfUcpService.configurationSettings.ucpV3BaseUrl+c}function y(c,e,h){c=S(c,h);var d=b();p(c).then(function(c){a.extend(selfUcpService.modelsNames,c);e&&e(c);d.resolve(c)},function(c){d.resolve(c)});return d}function T(c,a){a=b();for(var e=[],d=0;d<c.length;d++){var f=c[d],k=f.modelCode;var g=void 0,m=new Date(selfUcpService.configurationSettings.ucpservices.configs.context.effectDate);
selfUcpService.configurationDates[k]&&(g=new Date(selfUcpService.configurationDates[k].latestEffectDate));k=g&&m instanceof Date&&!isNaN(m)&&g instanceof Date&&!isNaN(g)&&m>g?!1:!0;k&&e.push(f)}a.resolve(e);return a}function I(c,a){var e=selfUcpService.configurationSettings.ucpservices.configs.context,d=e.brand;a&&(console.log("model codes belong to brand",a),d=a);c=selfUcpService.configurationSettings.ucpservices.MODELS.replace(selfUcpService.CONST.SOURCE_PARAM,e.source).replace(selfUcpService.CONST.BRAND_PARAM,
d).replace(selfUcpService.CONST.COUNTRY_PARAM,e.country).replace(selfUcpService.CONST.MODEL_CODE_PARAM,c);c=selfUcpService.configurationSettings.ucpV3BaseUrl+c;var f=b();p(c).then(function(c){f.resolve(c)},function(c){f.reject(c)});return f}function B(c,e){var d=b();I(c,e).then(function(c){a.each(c,function(c,a){!selfUcpService.configurationDates[c]&&a&&(selfUcpService.configurationDates[c]=a.configurationDates)});d.resolve(c)},function(c){d.resolve(c)});return d}function U(c){var a=selfUcpService.configurationSettings.ucpservices.configs.context,
b=[];if(0<a.brands.length)for(var d=0;d<a.brands.length;d++){var f=selfUcpService.configurationSettings.ucpservices.GCDM_OWNER_CONFIGURATIONS.replace(selfUcpService.CONST.APPLICATION_PARAM,a.application).replace(selfUcpService.CONST.BRAND_PARAM,a.brands[d]).replace(selfUcpService.CONST.COUNTRY_PARAM,a.country).replace(selfUcpService.CONST.GCDM_TOKEN,c);selfUcpService.configurationSettings.gcdmBackendUrl&&0<selfUcpService.configurationSettings.gcdmBackendUrl.length&&(f=f+"?gcdm-environment\x3d"+selfUcpService.configurationSettings.gcdmBackendUrl);
b.push(selfUcpService.configurationSettings.ucpV3BaseUrl+f)}return b}function J(c){c=U(c);for(var e=b(),d=[],f=[],k=0;k<c.length;k++)f.push(V(c[k],d).promise());a.when.apply(a,f).then(function(){e.resolve(d)},function(){e.resolve(d)});return e}function V(c,a){var e=b();p(c).then(function(c){if(c){var b=[],d="",f="",h;for(h in c){var k=c[h].configuration.modelCode;garageEntry={configUrl:c[h].configId,modelCode:k,created:c[h].metadata.creationDate,lastUpdate:c[h].metadata.lastModified,note:c[h].note1||
c[h].note2,options:c[h].configuration.options.sort(),optionalEquipments:[],mandator:c[h].mandator};for(var g=0;g<garageEntry.options.length;g++)garageEntry.optionalEquipments.push({code:garageEntry.options[g]});-1==b.indexOf(k)&&b.push(c[h].configuration.modelCode);d=garageEntry.mandator.brand;a.push(garageEntry)}0<b.length&&(f=b.sort().join(","));B(b,d).then(function(){T(a).then(function(c){a=c;y(f,null,d).then(function(){z(a).then(function(){e.resolve(a)},function(){e.resolve(a)})},function(){z(a).then(function(){e.resolve(a)},
function(){e.resolve(a)})})})},function(){z(a).then(function(){e.resolve(a)},function(){e.resolve(a)})})}});return e}function z(c){for(var e=[],d=b(),f=0;f<c.length;f++){var k=c[f];e.push(E(k).promise());e.push(H(k).promise());e.push(v(k).promise());e.push(G(k).promise())}a.when.apply(a,e).done(function(){for(var a=0;a<c.length;a++){var b=c[a].modelCode;selfUcpService.modelsNames&&selfUcpService.modelsNames[b]&&selfUcpService.modelsNames[b].phrases&&(c[a].vehicleName=selfUcpService.modelsNames[b].phrases.longDescription,
c[a].note||(c[a].note=selfUcpService.modelsNames[b].phrases.longDescription))}d.resolve()},function(){d.resolve()});return d}function W(c,a){var b=selfUcpService.configurationSettings.ucpservices.configs.context;a||(a=b.brand);c=selfUcpService.configurationSettings.ucpservices.GCDM_OWNER_CONFIGURATIONS.replace(selfUcpService.CONST.APPLICATION_PARAM,b.application).replace(selfUcpService.CONST.BRAND_PARAM,a).replace(selfUcpService.CONST.COUNTRY_PARAM,b.country).replace(selfUcpService.CONST.GCDM_TOKEN,
c);return selfUcpService.configurationSettings.ucpV3BaseUrl+c}function K(a,e){a=W(a,e.brand);var c=b();x(a,JSON.stringify({configuration:{modelCode:e.modelCode,options:e.selectedFeatures},note1:e.note})).then(function(a){a&&c.resolve({baseConfigUrl:a.configId})},function(a){c.reject(a)});return c}function L(a,b){var c=selfUcpService.configurationSettings.ucpservices.configs.context;a=selfUcpService.configurationSettings.ucpservices.UPDATE_GARAGE_VEHICLE.replace(selfUcpService.CONST.APPLICATION_PARAM,
c.application).replace(selfUcpService.CONST.BRAND_PARAM,c.brand).replace(selfUcpService.CONST.COUNTRY_PARAM,c.country).replace(selfUcpService.CONST.GCDM_TOKEN,a).replace(selfUcpService.CONST.CONFIG_ID,b);return selfUcpService.configurationSettings.ucpV3BaseUrl+a}function M(a,e){var c=b();a=L(a,e);q(a,selfUcpService.CONST.DELETE,null,d()).then(function(){c.resolve({status:"OK"})},function(){c.reject()});return c}function N(a,e){var c=b(),d=L(a,e.configUrl),f={configuration:{modelCode:e.modelCode.value,
options:e.options},note1:e.note};p(d).then(function(a){a&&!f.note1&&(f.note1=a.note1);X(d,JSON.stringify(f)).then(function(a){c.resolve({configUrl:e.configUrl,modelCode:e.modelCode.value,options:e.options,note:f.note1,created:a.creationDate,lastUpdate:a.lastUpdate})},function(a){c.reject(a)})},function(a){c.reject(a)});return c}function x(a,b){return q(a,selfUcpService.CONST.POST,b,d())}function p(a){return q(a,selfUcpService.CONST.GET,null,d())}function X(a,b){return q(a,selfUcpService.CONST.PUT,
b,d())}function q(c,e,d,f){var h=b(),k="json";-1<selfUcpService.CONST.DELETE.indexOf(e)&&(k="text");a.ajax({url:c,type:e,data:d,dataType:k,headers:f}).done(function(a){h.resolve(a)}).fail(function(a,c,b){console.log("call failed",c);h.reject(c)});return h}function u(){var c=b(),e=[];e.push(E(selfUcpService.vehicle).promise());e.push(G(selfUcpService.vehicle).promise());e.push(H(selfUcpService.vehicle).promise());e.push(y(selfUcpService.vehicle.modelCode,null).promise());e.push(O(selfUcpService.vehicle).promise());
a.when.apply(a,e).done(function(){selfUcpService.modelsNames[selfUcpService.vehicle.modelCode]&&selfUcpService.modelsNames[selfUcpService.vehicle.modelCode].phrases&&(selfUcpService.vehicle.modelName=selfUcpService.modelsNames[selfUcpService.vehicle.modelCode].phrases.longDescription);c.resolve(selfUcpService.vehicle)},function(){c.resolve(selfUcpService.vehicle)});return c}function Y(){var a=selfUcpService.configurationSettings.ucpservices.configs.context;a=selfUcpService.configurationSettings.ucpservices.GARAGE_SAVE_ANONYMOUS.replace(selfUcpService.CONST.APPLICATION_PARAM,
a.application).replace(selfUcpService.CONST.BRAND_PARAM,a.brand).replace(selfUcpService.CONST.COUNTRY_PARAM,a.country);return selfUcpService.configurationSettings.ucpV3BaseUrl+a}this.configurationSettings={ucpservices:{GET_SAVED_VEHICLE_BY_CONFIGURL:"/garage/public-configurations/{configUrl}",GET_OPTIONS_INFORMATIONS:"/localisations/overridden-vehicle-data/sources/{source}/brands/{brand}/countries/{country}/effect-dates/{effectDate}/order-dates/{orderDate}/applications/{application}/models/{modelCode}/options/languages/{language}?option-list\x3d{options}",
GET_MODEL_NAME:"/localisations/merged-phrases/sources/{source}/brands/{brand}/countries/{country}/effect-dates/{effectDate}/applications/{application}/models/languages/{language}?model-list\x3d{modelCode}",GET_RANGE_CODE:"/vehicles/sources/{source}/brands/{brand}/countries/{country}/effect-dates/{effectDate}/order-dates/{orderDate}/models/{modelCode}",POST_PRICE_CALCULATION:"/pricing/calculation/public-calculation/countries/{country}",GET_SERIES_NAME:"/localisations/merged-phrases/sources/{source}/brands/{brand}/countries/{country}/effect-dates/{effectDate}/applications/{application}/series/languages/{language}?cluster\x3d{cluster}\x26gfs-policy\x3d{gfsPolicy}",
GET_COSY_IMAGES:"/image-urls/applications/{application}/collections/VEHICLE/app-short/{appShort}/brands/{brand}/dynamic-images/models/{modelCode}?included-options\x3d{options}",GCDM_OWNER_CONFIGURATIONS:"/garage/applications/{application}/brands/{brand}/countries/{country}/gcdm-owners/{gcdmToken}/configurations",UPDATE_GARAGE_VEHICLE:"/garage/applications/{application}/brands/{brand}/countries/{country}/gcdm-owners/{gcdmToken}/configurations/{configId}",GET_COSY_GARAGE_IMAGES:"/image-urls/applications/{application}/collections/GARAGE/app-short/{appShort}/brands/{brand}/dynamic-images/models/{modelCode}?included-options\x3d{options}",
GARAGE_SAVE_ANONYMOUS:"/garage/applications/{application}/brands/{brand}/countries/{country}/anon-configurations",MODELS:"/vehicles/sources/{source}/brands/{brand}/countries/{country}/models?vg-model-codes\x3d{modelCode}"},ucpV3BaseUrl:void 0,CON_OPEN_CONFIGURATION_ENDPOINT:"/configid/{configUrl}",PDH_SETTING_ENDPOINT:"/pdh/settings/v1.0/ucpv3"};a.extend(this.configurationSettings,f);this.CONST={CONFIGURL_PARAM:"{configUrl}",BRAND_PARAM:"{brand}",COUNTRY_PARAM:"{country}",EFFECT_DATE_PARAM:"{effectDate}",
ORDER_DATE_PARAM:"{orderDate}",APPLICATION_PARAM:"{application}",MODEL_CODE_PARAM:"{modelCode}",LANGUAGE_PARAM:"{language}",LOCALE_PARAM:"{locale}",OPTIONS_PARAM:"{options}",SOURCE_PARAM:"{source}",CLUSTER_PARAM:"{cluster}",GFSPOLICY_PARAM:"{gfsPolicy}",APPSHORT_PARAM:"{appShort}",GCDM_TOKEN:"{gcdmToken}",CONFIG_ID:"{configId}",GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",MODEL_AND_OPTION_TOTAL:"MODEL_AND_OPTION_TOTAL",MODEL_TOTAL:"MODEL_TOTAL",OPTION_TOTAL:"OPTION_TOTAL",SMALL_VEHICLE_34_VIEW:"SMALL_VEHICLE_34_VIEW",
FRONTSIDE_VIEW:"FRONTSIDE_VIEW",VEHICLE:"VEHICLE",GARAGE:"GARAGE",DT_GARGE:"DT_GARAGE",P_GARGE:"P_GARAGE"};this.vehicle={};this.modelsNames={};this.configurationDates={};selfUcpService=this;this.getVehicleByModelCodeAndOptions=function(a,e){var c=b(),d;if(a&&e&&0!=e.length)return this.configurationSettings.ucpservices.configs||(d=g()),d?d.then(function(){C(a,e);u(a,e).then(function(a){c.resolve(a)})}):(C(a,e),u(a,e).then(function(a){c.resolve(a)})),c};this.getVehicle=function(a){var c=b(),d;this.configurationSettings.ucpservices.configs||
(d=g());d?d.then(function(){A(a).then(function(){u().then(function(a){c.resolve(a)})})}):A(a).then(function(){u().then(function(a){c.resolve(a)})});return c};this.listVehicles=function(a){var c=b(),d;this.configurationSettings.ucpservices.configs||(d=g());d?d.then(function(){J(a).then(function(a){c.resolve(a)})}):J(a).then(function(a){c.resolve(a)});return c};this.createVehicle=function(a,d){var c=b(),e;this.configurationSettings.ucpservices.configs||(e=g());e?e.then(function(){K(a,d).then(function(a){c.resolve(a)},
function(a){c.reject(a)})}):K(a,d).then(function(a){c.resolve(a)},function(a){c.reject(a)});return c};this.updateVehicle=function(a,d){var c=b(),e;this.configurationSettings.ucpservices.configs||(e=g());e?e.then(function(){N(a,d).then(function(a){c.resolve(a)},function(a){c.reject(a)})}):N(a,d).then(function(a){c.resolve(a)},function(a){c.reject(a)});return c};this.deleteVehicle=function(a,d){var c=b(),e;this.configurationSettings.ucpservices.configs||(e=g());e?e.then(function(){M(a,d).then(function(a){c.resolve(a)},
function(a){c.reject(a)})}):M(a,d).then(function(a){c.resolve(a)},function(a){c.reject(a)});return c};this.getModelNameForModelCode=function(a){var c=b(),d;this.configurationSettings.ucpservices.configs||(d=g());d&&d.then(function(){y(a,function(b){b[a]&&b[a].phrases&&c.resolve(b[a].phrases.longDescription)})});return c};this.saveAnonymousConfig=function(a,d){var c=b();this.initialize().then(function(){var b=Y();x(b,JSON.stringify({configuration:{modelCode:a,options:d}})).then(function(a){a&&c.resolve({configId:a.configId})},
function(a){c.reject(a)})});return c};this.isModelAvailable=function(a){var c=b();this.initialize().then(function(){I(a).then(function(b){b?c.resolve(!!b[a]):c.resolve(!1)},function(a){c.reject(a)})});return c};this.initialize=function(){var a=b();this.configurationSettings.ucpservices.configs?a.resolve():g().then(function(){a.resolve()});return a}};
define("ds2-navigation",["jquery"],function(a){var f=function(f){this.element=a(f);this.init()};f.prototype.init=function(){var f=JSON.parse(a("#plainjson").html());a("#json").append(JSON.stringify(f,null,2))};return f});
(function(a){define("ds2-page-context",["postal","lodash"],function(a,g){function b(b){if(b){try{this.context=JSON.parse(b.innerHTML)}catch(l){this.context=d}a.subscribe({channel:"page-context",topic:"get",callback:this.call.bind(this,this.context)});a.subscribe({channel:"page-context",topic:"set",callback:this.changeContext.bind(this)});a.publish({channel:"page-context",topic:"init",data:this.context})}}var d={},f={MODEL_CODE:"${pageContext.modelCode}",MODEL_RANGE:"${pageContext.modelRange}",PAINT:"${pageContext.paint}",
FABRIC:"${pageContext.fabric}",OPTIONS:"${pageContext.options}"};b.prototype.changeContext=function(b){"object"===typeof b&&(b=g.assign(context,b),g.eq(context,b)||(this.context=b,a.publish({channel:"page-context",topic:"change",data:context})))};b.prototype.call=function(a,b){b(a)};b.CHANNEL="page-context";b.MODEL_RANGE="model-range";b.CURRENT_PAGE="current-page";b.CONFIGURATOR_PARAMS="default-configurator-params";b.MODEL_CODE="model-code";b.PAINT="paint";b.FABRIC="fabric";b.OPTIONS="options";b.SERIES_OVERVIEW_MODEL_RANGES=
"series-overview-model-ranges";b.MODEL_CAROUSEL_MODEL_CODES="model-carousel-codes";b.ALTERNATIVE_LANG_PAGES="alternativeLang";b.replacements=f;b.createHash=function(a,b,d,g,m,v){return a.replace(f.MODEL_CODE,b||"").replace(f.MODEL_RANGE,d||"").replace(f.PAINT,g||"").replace(f.FABRIC,m||"").replace(f.OPTIONS,v||"")};b.replaceModelRange=function(a,b){return a.replace(f.MODEL_RANGE,b||"")};return b});a(window).ready(function(){require(["ds2-page-context"],function(a){new a(document.getElementById("ds2-page-context"))})})})(window.jQuery);
(function(){define("ds2-tracking-checker",function(){function a(){}a.prototype.isDigitals2TrackingAvailable=function(){return window.digitals2&&window.digitals2.tracking&&window.digitals2.tracking.api&&window.digitals2.tracking.api.initComponentTracking&&window.digitals2.tracking.api.addEventTracking};return new a})})();
define("business/commons/TrackingAdapter",function(){function a(a){function b(){var b=a.getPageObject(a.getCurrentPageIndex());return{eventInfo:{cause:"",effect:"",element:"",eventAction:"",eventName:"",eventPoints:"",target:"",timeStamp:Date.now().toString()},category:{primaryCategory:"",mmdr:b.category&&b.category.mmdr?b.category.mmdr:"",eventType:"triggered"},attributes:{relatedPageName:b.pageName||"",relatedPageCategory:b.category||{},relatedComponent:{componentInfo:{},category:{},attributes:{}}}}}
return{apply:function(){return{delayed:function(a){a.category.eventType=TC.DELAYED;return this},relatedComponent:function(a,b){a.attributes.relatedComponent=b;return this},relatedPageName:function(a,b){a.attributes.relatedPageName=b;return this},relatedPageCategory:function(a,b){a.attributes.relatedPageCategory=b;return this}}},newEvent:function(a){var d=b();a&&(d=g(!0,{},d,a));return{build:function(){return d},relatedComponentID:function(a){d.attributes.relatedComponentID=a;return this},eventAction:function(a){d.eventInfo.eventAction=
a;return this},eventName:function(a){d.eventInfo.eventName=a;return this},eventPoints:function(a){d.eventInfo.eventPoints=a.toString();return this},primaryCategory:function(a){d.category.primaryCategory=a;return this},subCategory01:function(a){d.category.subCategory01=a;return this},target:function(a){d.eventInfo.target=a;return this},effect:function(a){d.eventInfo.effect=a;return this},cause:function(a){d.eventInfo.cause=a;return this}}}}}function f(){return{options:function(){var a=!0,b="",f=!0,
g="click",n=!1;return{active:function(b){a=b;return this},build:function(){return{active:a,name:b,timing:f,type:g,useTimer:n}},name:function(a){b=(a||"").toLowerCase().replace(/\s+/g,"_");return this},timing:function(a){f=a;return this},type:function(a){g=a;return this},useTimer:function(a){n=a;return this}}}}}function g(){var a={},b=!1,f=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(b=arguments[0],f++);for(;f<arguments.length;f++){var l=void 0,n=arguments[f];for(l in n)Object.prototype.hasOwnProperty.call(n,
l)&&(b&&"[object Object]"===Object.prototype.toString.call(n[l])?a[l]=g(!0,a[l],n[l]):a[l]=n[l])}return a}var b=function(){this.pageObject=this.optionsBuilder=this.eventBuilder=this.api=null;this.isEventCookieSaveCapable=!1;this.initTracking()};b.prototype={initTracking:function(){if(window.digital&&window.digital.tracking&&"function"===typeof window.digital.tracking.getInstance){var b=window.digital.tracking.getInstance(window.dataLayer);b.isMinimalInterface||(this.api=b,this.isEventCookieSaveCapable=
!1)}else this.api=window.digital&&window.digital.tracking&&window.digital.tracking.lib,this.isEventCookieSaveCapable=!0;if(this.api){if(b=this.api.getCurrentPageIndex())this.pageObject=this.api.getPageObject(b);this.eventBuilder=a(this.api)}this.initMinimalTrackingInterface()},getOptionsBuilder:function(){null===this.optionsBuilder&&(this.optionsBuilder=new f);return this.optionsBuilder},getPageObject:function(){if(!this.isInitialized())return{};this.pageObject&&this.pageObject.page||(this.pageObject=
this.api.getPageObject(this.api.getCurrentPageIndex()));return this.pageObject},getEventBuilder:function(){if(this.eventBuilder)return this.eventBuilder;window.digitals2&&window.digitals2.tracking&&window.digitals2.tracking.api&&(this.eventBuilder=window.digitals2.tracking.eventBuilder);return this.eventBuilder},trackEvent:function(a,b,f){if(this.isInitialized()){var d=g(!0,{},a,{eventInfo:{timeStamp:Date.now().toString()}});try{_.has(d,"category.eventType")&&"delayed"===d.category.eventType&&this.isEventCookieSaveCapable?
this.api.eventCookieSave(d):(this.api.addEventTracking(b,d,this.api.getCurrentPageIndex()),this.triggerSatelliteEvent(f))}catch(n){console.error("caught exception while tracking event",a,", exception was",n)}}},satelliteTrack:function(a){if(window._satellite&&window._satellite.track){var b=this.api.getCurrentPageIndex(),d=g(!0,{},getPageObject(b));window._satellite.track(a,[b,d])}else console.log("_satellite not defined")},triggerSatelliteEvent:function(a){document.dispatchEvent(new CustomEvent("digital:tracking:addEventSatellite",
{detail:{eventName:"digital:tracking:addEventSatellite",eventOptions:a},bubbles:!1,cancelable:!1}))},initComponentTracking:function(a,b){if(this.isInitialized())return this.api.initComponentTracking(a,this.api.getCurrentPageIndex(),b)},getTrackingDefaults:function(a){return{eventInfo:{eventName:"",eventAction:"click",eventPoints:"",cause:"default",effect:""},category:{primaryCategory:a.category.primaryCatergory,subCategory01:a.category.subCategory01},attributes:{relatedComponentID:a.componentInfo.componentID,
relatedComponentName:a.componentInfo.componentName,relatedComponentPrimaryCategory:a.category.primaryCatergory}}},isApiValid:function(){return null!==this.api&&void 0!==this.api},isInitialized:function(){this.isApiValid()||this.initTracking();return this.isApiValid()},getComponent:function(a){if(!this.isInitialized())return null;var b=this.api.getPageObject(this.api.getCurrentPageIndex());return b.component?b.component[a]:null},newEvent:function(a){return this.getEventBuilder().newEvent(a)},applyEventComponentProperties:function(a,
b,f){this.eventBuilder.apply().relatedComponent(a,b);f&&(b=this.getPageObject())&&(this.eventBuilder.apply().relatedPageCategory(a,b.page.category),this.eventBuilder.apply().relatedPageName(a,b.page.pageInfo.pageName))},updateComponentTracking:function(a,b){this.isInitialized()&&this.api.updateComponentTracking(a,b,this.api.getCurrentPageIndex())},buildOptions:function(a){var b=this.getOptionsBuilder();return b?(b=b.options(),b.name(a),b.build()):null},initMinimalTrackingInterface:function(){window.digital=
window.digital||{};window.digital.tracking=window.digital.tracking||{};if(!window.digital.tracking.getInstance){var a=this;window.digital.tracking.getInstance=function(){return a.getMinimalInterfaceObject()}}},getMinimalInterfaceObject:function(){var a=this;return{getPageObject:function(b){return a.isInitialized()?a.api.getPageObject(b):{}},getCurrentPageIndex:function(){return a.isInitialized()?a.api.getCurrentPageIndex():0},addEventTracking:function(b,d,f){if(a.isInitialized())return a.api.addEventTracking(b,
d,f)},initComponentTracking:function(b,d){if(a.isInitialized())return a.api.initComponentTracking(b,d)},isMinimalInterface:function(){return!0}}}};return new b});require(["business/commons/TrackingAdapter"],function(a){});
define("business/commons/components/epaas-notavailable-banner",["jquery"],function(a){var f=function(b){var d=this;d.$element=a(b);d.closeButton=d.$element.find(".close-button")[0];!0===window.epaasNotAvailable&&d._showBanner(d.$element);(window.epaas&&window.epaas.api||window).addEventListener("consentcontroller.api.notavailable",function(){d._showBanner(d.$element)});a(this.closeButton).click(function(){d._hideBanner(d.$element)})},g=f.prototype;g._showBanner=function(a){a.addClass("show-banner")};
g._hideBanner=function(a){a.removeClass("show-banner")};return f});