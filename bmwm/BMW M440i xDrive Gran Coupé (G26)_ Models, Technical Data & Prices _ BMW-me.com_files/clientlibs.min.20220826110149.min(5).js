define("ds2-lightbox",["ds2-accessibility","ds2-layer-error","ds2-main","ds2-scroll","jquery","lazyload"],(function(t,e,s,i,o,l){return n={943:function(t,e,s){var i,o;i=[e,s(748),s(986),s(393),s(571),s(404),s(412)],void 0===(o=function(t,s,i,o,l,n,d){"use strict";function h(t){return t&&t.__esModule?t:{default:t}}function a(t){this.element=t,this.$element=(0,n.default)(this.element),this.element.Lightbox=this,this.options={ANIMATION_TIMEOUT:500},this.accessibility=new d.default(t),this.eventIds={ready:"ds2-lightbox-ready",open:"ds2-lightbox-open",close:"ds2-lightbox-close",initialized:"ds2-lightbox-initialized"},this.events={close:new Event(this.eventIds.close),open:new Event(this.eventIds.open),initialized:new Event(this.eventIds.initialized)},this.domClasses={closeButton:".ds2-lightbox__close-button",closeLightboxButton:".ds2-lightbox__close",lightboxContainer:".ds2-lightbox__container",lightboxMiddle:".ds2-lightbox__middle",lightboxMiddleHide:".ds2-lightbox__middle--hide",scrollBar:".ds2-layer--scrollablepart",lightBoxVisible:"ds2-lightbox--open",scrollLock:"ds2-scrolllock",scrollLockIos:"ds2-scrolllock--ios",fadeIn:"ds2-lightbox--fade-in",fadeOut:"ds2-lightbox--fade-out",inTransition:"ds2-lightbox--transition"},this.create(this.init.bind(this)),this.initSlider(),this.moveLightboxToBottom(),this.addKeyboardSupport(),this.element.dispatchEvent(this.events.initialized)}Object.defineProperty(t,"__esModule",{value:!0}),e.default=void 0,s=h(s),i=h(i),n=h(n),d=h(d),a.prototype.create=function(t){this.isAjax()?this.element.addEventListener(this.eventIds.ready,t):t()},a.prototype.init=function(){this.$body=(0,n.default)("body"),this.$html=(0,n.default)("html"),this.$main=(0,n.default)("main"),this.lightboxContainerElement=this.element.querySelector(this.domClasses.lightboxContainer),this.closeXButton=this.element.querySelector(this.domClasses.closeButton),this.closeButtons=this.$element.find(this.domClasses.closeButton),this.closeLightboxButtons=this.$element.find(this.domClasses.closeLightboxButton),this.lightboxMiddle=this.$element.find(this.domClasses.lightboxMiddle),this.scrollbarElement=this.$element.find(this.domClasses.scrollBar),this.scrollbarElement.length>0&&(this.scrollbar=new s.default(this.scrollbarElement[0])),this.closeButtons.on("click",this.closeLightbox.bind(this,!1)),this.closeLightboxButtons.on("click",this.closeLightbox.bind(this,!1))},a.prototype.openLightbox=function(t){const e=this;this.accessibility.setLastActiveElement(),this.$element.addClass(this.domClasses.lightBoxVisible),this.lockScroll(!0),this.scrollbar&&this.scrollbar.setBarPosition(),setTimeout((()=>{e.$element.addClass(this.domClasses.fadeIn),e.addScroll()}),10),t&&(this.events.open.trigger=t),this.element.dispatchEvent(this.events.open),new i.default({container:this.element}),this.accessibility.focusElement(this.lightboxContainerElement,!0),this.accessibility.activateKeyboardTrap({container:this.lightboxContainerElement,includeContainer:!0})},a.prototype.isOpen=function(){return this.$element.hasClass(this.domClasses.lightBoxVisible)},a.prototype.isSlider=function(){return"slider"===this.$element.data("lightbox-type")},a.prototype.isAjax=function(){return"ajax"===this.$element.data("is-ajax")},a.prototype.closeLightbox=function(t){this.$element.addClass(this.domClasses.fadeOut),setTimeout((()=>{this.$element.removeClass(this.domClasses.lightBoxVisible),this.$element.removeClass(this.domClasses.fadeOut),this.$element.removeClass(this.domClasses.fadeIn),t||this.lockScroll(!1),this.element.dispatchEvent(this.events.close)}),this.options.ANIMATION_TIMEOUT),this.accessibility.focusLastActiveElement()},a.prototype.refreshLightbox=function(){this.init()},a.prototype.addScroll=function(){if(this.scrollbarElement)return;const t=this.element.querySelector(".ds2-layer--slider"),e=document.documentElement.clientHeight,i=Math.max(e,window.innerHeight||0),o=(0,n.default)(t).height();t&&o>i&&(this.scrollbar=new s.default(t))},a.prototype.moveLightboxToBottom=function(){!function(t,e){let s=t.parentNode;for(;s&&s!==e;)s=s.parentNode;return!!s}(this.element,document.getElementById("ng-app"))&&this.$main.length>0&&this.$main.append(this.element)},a.prototype.replaceLightbox=function(t){this.lightboxMiddle.addClass(this.domClasses.lightboxMiddleHide),this.$element.addClass(this.domClasses.inTransition),window.digitals2.main.openLayer(t);const e=this;setTimeout((()=>{e.$element.removeClass(this.domClasses.inTransition),e.closeLightbox(!0),e.lightboxMiddle.removeClass(this.domClasses.lightboxMiddleHide)}),this.options.ANIMATION_TIMEOUT)},a.prototype.initSlider=function(){if(!this.isSlider())return;const t=this.$element.find(".ds2-slider"),e=this.$element.find(".slick-slider");this.$element[0].addEventListener(this.eventIds.opened,(()=>{e.each(((t,e)=>(0,n.default)(e).slick("refresh"))),t.addClass("ds2-slider--slide-single-image opened")}))},a.prototype.lockScroll=function(t){let e;e=t?"addClass":"removeClass",this.$body[e](this.domClasses.scrollLock),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&this.$html[e](this.domClasses.scrollLockIos)},a.prototype.addKeyboardSupport=function(){this.lightboxContainerElement&&this.closeXButton&&(this.accessibility.addKeyListener("up",{element:this.lightboxContainerElement,keyCodes:[this.accessibility.keyCodes.ESC],fn:()=>{this.closeXButton.click()}}),this.accessibility.addKeyListener("up",{element:this.closeXButton,keyCodes:[this.accessibility.keyCodes.ENTER],fn:()=>{this.closeXButton.click()}}))};var r=a;e.default=r}.apply(e,i))||(t.exports=o)},412:function(e){"use strict";e.exports=t},393:function(t){"use strict";t.exports=e},571:function(t){"use strict";t.exports=s},748:function(t){"use strict";t.exports=i},404:function(t){"use strict";t.exports=o},986:function(t){"use strict";t.exports=l}},d={},function t(e){var s=d[e];if(void 0!==s)return s.exports;var i=d[e]={exports:{}};return n[e](i,i.exports,t),i.exports}(943);var n,d}));